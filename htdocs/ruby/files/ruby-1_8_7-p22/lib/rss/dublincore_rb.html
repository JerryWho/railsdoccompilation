  <div id="fileHeader">
    <h1>dublincore.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>ruby-1.8.7-p22/lib/rss/dublincore.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Oct 21 07:19:43 -0500 2007</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require &quot;rss/rss&quot;

module RSS
  DC_PREFIX = 'dc'
  DC_URI = &quot;http://purl.org/dc/elements/1.1/&quot;

  module BaseDublinCoreModel
    def append_features(klass)
      super

      return if klass.instance_of?(Module)
      DublinCoreModel::ELEMENT_NAME_INFOS.each do |name, plural_name|
        plural = plural_name || &quot;#{name}s&quot;
        full_name = &quot;#{DC_PREFIX}_#{name}&quot;
        full_plural_name = &quot;#{DC_PREFIX}_#{plural}&quot;
        klass_name = &quot;DublinCore#{Utils.to_class_name(name)}&quot;
        klass.install_must_call_validator(DC_PREFIX, DC_URI)
        klass.install_have_children_element(name, DC_URI, &quot;*&quot;,
                                            full_name, full_plural_name)
        klass.module_eval(&lt;&lt;-EOC, *get_file_and_line_from_caller(0))
          remove_method :#{full_name}
          remove_method :#{full_name}=
          remove_method :set_#{full_name}

          def #{full_name}
            @#{full_name}.first and @#{full_name}.first.value
          end
          
          def #{full_name}=(new_value)
            @#{full_name}[0] = Utils.new_with_value_if_need(#{klass_name}, new_value)
          end
          alias set_#{full_name} #{full_name}=
        EOC
      end
      klass.module_eval(&lt;&lt;-EOC, *get_file_and_line_from_caller(0))
        if method_defined?(:date)
          alias date_without_#{DC_PREFIX}_date= date=

          def date=(value)
            self.date_without_#{DC_PREFIX}_date = value
            self.#{DC_PREFIX}_date = value
          end
        else
          alias date #{DC_PREFIX}_date
          alias date= #{DC_PREFIX}_date=
        end

        # For backward compatibility
        alias #{DC_PREFIX}_rightses #{DC_PREFIX}_rights_list
      EOC
    end
  end
  
  module DublinCoreModel

    extend BaseModel
    extend BaseDublinCoreModel

    TEXT_ELEMENTS = {
      &quot;title&quot; =&gt; nil,
      &quot;description&quot; =&gt; nil,
      &quot;creator&quot; =&gt; nil,
      &quot;subject&quot; =&gt; nil,
      &quot;publisher&quot; =&gt; nil,
      &quot;contributor&quot; =&gt; nil,
      &quot;type&quot; =&gt; nil,
      &quot;format&quot; =&gt; nil,
      &quot;identifier&quot; =&gt; nil,
      &quot;source&quot; =&gt; nil,
      &quot;language&quot; =&gt; nil,
      &quot;relation&quot; =&gt; nil,
      &quot;coverage&quot; =&gt; nil,
      &quot;rights&quot; =&gt; &quot;rights_list&quot;
    }

    DATE_ELEMENTS = {
      &quot;date&quot; =&gt; &quot;w3cdtf&quot;,
    }
    
    ELEMENT_NAME_INFOS = DublinCoreModel::TEXT_ELEMENTS.to_a
    DublinCoreModel::DATE_ELEMENTS.each do |name, |
      ELEMENT_NAME_INFOS &lt;&lt; [name, nil]
    end
    
    ELEMENTS = TEXT_ELEMENTS.keys + DATE_ELEMENTS.keys

    ELEMENTS.each do |name, plural_name|
      module_eval(&lt;&lt;-EOC, *get_file_and_line_from_caller(0))
        class DublinCore#{Utils.to_class_name(name)} &lt; Element
          include RSS10
          
          content_setup

          class &lt;&lt; self
            def required_prefix
              DC_PREFIX
            end
        
            def required_uri
              DC_URI
            end
          end

          @tag_name = #{name.dump}

          alias_method(:value, :content)
          alias_method(:value=, :content=)
          
          def initialize(*args)
            if Utils.element_initialize_arguments?(args)
              super
            else
              super()
              self.content = args[0]
            end
          end
      
          def full_name
            tag_name_with_prefix(DC_PREFIX)
          end

          def maker_target(target)
            target.new_#{name}
          end

          def setup_maker_attributes(#{name})
            #{name}.content = content
          end
        end
      EOC
    end

    DATE_ELEMENTS.each do |name, type|
      tag_name = &quot;#{DC_PREFIX}:#{name}&quot;
      module_eval(&lt;&lt;-EOC, *get_file_and_line_from_caller(0))
        class DublinCore#{Utils.to_class_name(name)} &lt; Element
          remove_method(:content=)
          remove_method(:value=)

          date_writer(&quot;content&quot;, #{type.dump}, #{tag_name.dump})

          alias_method(:value=, :content=)
        end
      EOC
    end
  end

  # For backward compatibility
  DublincoreModel = DublinCoreModel

  DublinCoreModel::ELEMENTS.each do |name|
    class_name = Utils.to_class_name(name)
    BaseListener.install_class_name(DC_URI, name, &quot;DublinCore#{class_name}&quot;)
  end

  DublinCoreModel::ELEMENTS.collect! {|name| &quot;#{DC_PREFIX}_#{name}&quot;}
end

require 'rss/dublincore/1.0'
require 'rss/dublincore/2.0'
require 'rss/dublincore/atom'
</pre>
    </div>