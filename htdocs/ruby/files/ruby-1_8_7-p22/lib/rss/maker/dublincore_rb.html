  <div id="fileHeader">
    <h1>dublincore.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>ruby-1.8.7-p22/lib/rss/maker/dublincore.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Oct 21 07:19:43 -0500 2007</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'rss/dublincore'
require 'rss/maker/1.0'

module RSS
  module Maker
    module DublinCoreModel
      def self.append_features(klass)
        super

        ::RSS::DublinCoreModel::ELEMENT_NAME_INFOS.each do |name, plural_name|
          plural_name ||= &quot;#{name}s&quot;
          full_name = &quot;#{RSS::DC_PREFIX}_#{name}&quot;
          full_plural_name = &quot;#{RSS::DC_PREFIX}_#{plural_name}&quot;
          klass_name = Utils.to_class_name(name)
          plural_klass_name = &quot;DublinCore#{Utils.to_class_name(plural_name)}&quot;
          full_plural_klass_name = &quot;self.class::#{plural_klass_name}&quot;
          full_klass_name = &quot;#{full_plural_klass_name}::#{klass_name}&quot;
          klass.def_classed_elements(full_name, &quot;value&quot;, plural_klass_name,
                                     full_plural_name, name)
          klass.module_eval(&lt;&lt;-EOC, __FILE__, __LINE__ + 1)
            def new_#{full_name}(value=nil)
              _#{full_name} = #{full_plural_name}.new_#{name}
              _#{full_name}.value = value
              if block_given?
                yield _#{full_name}
              else
                _#{full_name}
              end
            end
          EOC
        end

        klass.module_eval(&lt;&lt;-EOC, __FILE__, __LINE__ + 1)
          # For backward compatibility
          alias #{DC_PREFIX}_rightses #{DC_PREFIX}_rights_list
        EOC
      end

      ::RSS::DublinCoreModel::ELEMENT_NAME_INFOS.each do |name, plural_name|
        plural_name ||= &quot;#{name}s&quot;
        full_name ||= &quot;#{DC_PREFIX}_#{name}&quot;
        full_plural_name ||= &quot;#{DC_PREFIX}_#{plural_name}&quot;
        klass_name = Utils.to_class_name(name)
        full_klass_name = &quot;DublinCore#{klass_name}&quot;
        plural_klass_name = &quot;DublinCore#{Utils.to_class_name(plural_name)}&quot;
        module_eval(&lt;&lt;-EOC, __FILE__, __LINE__ + 1)
        class #{plural_klass_name}Base &lt; Base
          def_array_element(#{name.dump}, #{full_plural_name.dump},
                            #{full_klass_name.dump})

          class #{full_klass_name}Base &lt; Base
            attr_accessor :value
            add_need_initialize_variable(&quot;value&quot;)
            alias_method(:content, :value)
            alias_method(:content=, :value=)

            def have_required_values?
              @value
            end

            def to_feed(feed, current)
              if value and current.respond_to?(:#{full_name})
                new_item = current.class::#{full_klass_name}.new(value)
                current.#{full_plural_name} &lt;&lt; new_item
              end
            end
          end
          #{klass_name}Base = #{full_klass_name}Base
        end
        EOC
      end

      def self.install_dublin_core(klass)
        ::RSS::DublinCoreModel::ELEMENT_NAME_INFOS.each do |name, plural_name|
          plural_name ||= &quot;#{name}s&quot;
          klass_name = Utils.to_class_name(name)
          full_klass_name = &quot;DublinCore#{klass_name}&quot;
          plural_klass_name = &quot;DublinCore#{Utils.to_class_name(plural_name)}&quot;
          klass.module_eval(&lt;&lt;-EOC, __FILE__, __LINE__ + 1)
          class #{plural_klass_name} &lt; #{plural_klass_name}Base
            class #{full_klass_name} &lt; #{full_klass_name}Base
            end
            #{klass_name} = #{full_klass_name}
          end
EOC
        end
      end
    end

    class ChannelBase
      include DublinCoreModel
    end
    
    class ImageBase; include DublinCoreModel; end
    class ItemsBase
      class ItemBase
        include DublinCoreModel
      end
    end
    class TextinputBase; include DublinCoreModel; end

    makers.each do |maker|
      maker.module_eval(&lt;&lt;-EOC, __FILE__, __LINE__ + 1)
        class Channel
          DublinCoreModel.install_dublin_core(self)
        end

        class Image
          DublinCoreModel.install_dublin_core(self)
        end

        class Items
          class Item
            DublinCoreModel.install_dublin_core(self)
          end
        end

        class Textinput
          DublinCoreModel.install_dublin_core(self)
        end
      EOC
    end
  end
end
</pre>
    </div>