  <div id="fileHeader">
    <h1>1.0.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>ruby-1.8.7-p22/lib/rss/1.0.rb
      </td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Oct 21 07:19:43 -0500 2007</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require &quot;rss/parser&quot;

module RSS

  module RSS10
    NSPOOL = {}
    ELEMENTS = []

    def self.append_features(klass)
      super
      
      klass.install_must_call_validator('', ::RSS::URI)
    end

  end

  class RDF &lt; Element

    include RSS10
    include RootElementMixin

    class &lt;&lt; self

      def required_uri
        URI
      end

    end

    @tag_name = 'RDF'

    PREFIX = 'rdf'
    URI = &quot;http://www.w3.org/1999/02/22-rdf-syntax-ns#&quot;

    install_ns('', ::RSS::URI)
    install_ns(PREFIX, URI)

    [
      [&quot;channel&quot;, nil],
      [&quot;image&quot;, &quot;?&quot;],
      [&quot;item&quot;, &quot;+&quot;, :children],
      [&quot;textinput&quot;, &quot;?&quot;],
    ].each do |tag, occurs, type|
      type ||= :child
      __send__(&quot;install_have_#{type}_element&quot;, tag, ::RSS::URI, occurs)
    end

    alias_method(:rss_version, :feed_version)
    def initialize(version=nil, encoding=nil, standalone=nil)
      super('1.0', version, encoding, standalone)
      @feed_type = &quot;rss&quot;
    end

    def full_name
      tag_name_with_prefix(PREFIX)
    end

    class Li &lt; Element

      include RSS10

      class &lt;&lt; self
        def required_uri
          URI
        end
      end
      
      [
        [&quot;resource&quot;, [URI, &quot;&quot;], true]
      ].each do |name, uri, required|
        install_get_attribute(name, uri, required)
      end
      
      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          self.resource = args[0]
        end
      end

      def full_name
        tag_name_with_prefix(PREFIX)
      end
    end

    class Seq &lt; Element

      include RSS10

      Li = ::RSS::RDF::Li

      class &lt;&lt; self
        def required_uri
          URI
        end
      end

      @tag_name = 'Seq'
      
      install_have_children_element(&quot;li&quot;, URI, &quot;*&quot;)
      install_must_call_validator('rdf', ::RSS::RDF::URI)
      
      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          @li = args[0] if args[0]
        end
      end

      def full_name
        tag_name_with_prefix(PREFIX)
      end
      
      def setup_maker(target)
        lis.each do |li|
          target &lt;&lt; li.resource
        end
      end
    end

    class Bag &lt; Element

      include RSS10

      Li = ::RSS::RDF::Li

      class &lt;&lt; self
        def required_uri
          URI
        end
      end

      @tag_name = 'Bag'
      
      install_have_children_element(&quot;li&quot;, URI, &quot;*&quot;)
      install_must_call_validator('rdf', URI)
      
      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          @li = args[0] if args[0]
        end
      end

      def full_name
        tag_name_with_prefix(PREFIX)
      end
      
      def setup_maker(target)
        lis.each do |li|
          target &lt;&lt; li.resource
        end
      end
    end

    class Channel &lt; Element

      include RSS10
      
      class &lt;&lt; self

        def required_uri
          ::RSS::URI
        end

      end

      [
        [&quot;about&quot;, URI, true]
      ].each do |name, uri, required|
        install_get_attribute(name, uri, required, nil, nil,
                              &quot;#{PREFIX}:#{name}&quot;)
      end

      [
        ['title', nil, :text],
        ['link', nil, :text],
        ['description', nil, :text],
        ['image', '?', :have_child],
        ['items', nil, :have_child],
        ['textinput', '?', :have_child],
      ].each do |tag, occurs, type|
        __send__(&quot;install_#{type}_element&quot;, tag, ::RSS::URI, occurs)
      end

      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          self.about = args[0]
        end
      end

      private
      def maker_target(maker)
        maker.channel
      end
      
      def setup_maker_attributes(channel)
        channel.about = about
      end

      class Image &lt; Element
        
        include RSS10

        class &lt;&lt; self
          
          def required_uri
            ::RSS::URI
          end

        end

        [
          [&quot;resource&quot;, URI, true]
        ].each do |name, uri, required|
          install_get_attribute(name, uri, required, nil, nil,
                                &quot;#{PREFIX}:#{name}&quot;)
        end
      
        def initialize(*args)
          if Utils.element_initialize_arguments?(args)
            super
          else
            super()
            self.resource = args[0]
          end
        end
      end

      class Textinput &lt; Element
        
        include RSS10

        class &lt;&lt; self
          
          def required_uri
            ::RSS::URI
          end

        end

        [
          [&quot;resource&quot;, URI, true]
        ].each do |name, uri, required|
          install_get_attribute(name, uri, required, nil, nil,
                                &quot;#{PREFIX}:#{name}&quot;)
        end
      
        def initialize(*args)
          if Utils.element_initialize_arguments?(args)
            super
          else
            super()
            self.resource = args[0]
          end
        end
      end
      
      class Items &lt; Element

        include RSS10

        Seq = ::RSS::RDF::Seq

        class &lt;&lt; self
          
          def required_uri
            ::RSS::URI
          end
          
        end

        install_have_child_element(&quot;Seq&quot;, URI, nil)
        install_must_call_validator('rdf', URI)
        
        def initialize(*args)
          if Utils.element_initialize_arguments?(args)
            super
          else
            super()
            self.Seq = args[0]
          end
          self.Seq ||= Seq.new
        end

        def resources
          if @Seq
            @Seq.lis.collect do |li|
              li.resource
            end
          else
            []
          end
        end
      end
    end

    class Image &lt; Element

      include RSS10

      class &lt;&lt; self
        
        def required_uri
          ::RSS::URI
        end

      end

      [
        [&quot;about&quot;, URI, true]
      ].each do |name, uri, required|
        install_get_attribute(name, uri, required, nil, nil,
                              &quot;#{PREFIX}:#{name}&quot;)
      end

      %w(title url link).each do |name|
        install_text_element(name, ::RSS::URI, nil)
      end

      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          self.about = args[0]
        end
      end

      private
      def maker_target(maker)
        maker.image
      end
    end

    class Item &lt; Element

      include RSS10

      class &lt;&lt; self

        def required_uri
          ::RSS::URI
        end
        
      end


      [
        [&quot;about&quot;, URI, true]
      ].each do |name, uri, required|
        install_get_attribute(name, uri, required, nil, nil,
                              &quot;#{PREFIX}:#{name}&quot;)
      end

      [
        [&quot;title&quot;, nil],
        [&quot;link&quot;, nil],
        [&quot;description&quot;, &quot;?&quot;],
      ].each do |tag, occurs|
        install_text_element(tag, ::RSS::URI, occurs)
      end

      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          self.about = args[0]
        end
      end

      private
      def maker_target(items)
        if items.respond_to?(&quot;items&quot;)
          # For backward compatibility
          items = items.items
        end
        items.new_item
      end
    end

    class Textinput &lt; Element

      include RSS10

      class &lt;&lt; self

        def required_uri
          ::RSS::URI
        end

      end

      [
        [&quot;about&quot;, URI, true]
      ].each do |name, uri, required|
        install_get_attribute(name, uri, required, nil, nil,
                              &quot;#{PREFIX}:#{name}&quot;)
      end

      %w(title description name link).each do |name|
        install_text_element(name, ::RSS::URI, nil)
      end

      def initialize(*args)
        if Utils.element_initialize_arguments?(args)
          super
        else
          super()
          self.about = args[0]
        end
      end

      private
      def maker_target(maker)
        maker.textinput
      end
    end

  end

  RSS10::ELEMENTS.each do |name|
    BaseListener.install_get_text_element(URI, name, name)
  end

  module ListenerMixin
    private
    def initial_start_RDF(tag_name, prefix, attrs, ns)
      check_ns(tag_name, prefix, ns, RDF::URI)

      @rss = RDF.new(@version, @encoding, @standalone)
      @rss.do_validate = @do_validate
      @rss.xml_stylesheets = @xml_stylesheets
      @last_element = @rss
      pr = Proc.new do |text, tags|
        @rss.validate_for_stream(tags, @ignore_unknown_element) if @do_validate
      end
      @proc_stack.push(pr)
    end
  end

end
</pre>
    </div>