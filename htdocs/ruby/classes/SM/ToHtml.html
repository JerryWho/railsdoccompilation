  <div id="C00001033">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ToHtml<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/rdoc/markup/simple_markup/to_html_rb.html');">ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005244&name=accept_blank_line" >accept_blank_line</a></li>
  <li><a href="index.html?a=M005245&name=accept_heading" >accept_heading</a></li>
  <li><a href="index.html?a=M005242&name=accept_list_end" >accept_list_end</a></li>
  <li><a href="index.html?a=M005243&name=accept_list_item" >accept_list_item</a></li>
  <li><a href="index.html?a=M005241&name=accept_list_start" >accept_list_start</a></li>
  <li><a href="index.html?a=M005238&name=accept_paragraph" >accept_paragraph</a></li>
  <li><a href="index.html?a=M005240&name=accept_rule" >accept_rule</a></li>
  <li><a href="index.html?a=M005239&name=accept_verbatim" >accept_verbatim</a></li>
  <li><a href="index.html?a=M005234&name=add_tag" >add_tag</a></li>
  <li><a href="index.html?a=M005235&name=annotate" >annotate</a></li>
  <li><a href="index.html?a=M005237&name=end_accepting" >end_accepting</a></li>
  <li><a href="index.html?a=M005233&name=init_tags" >init_tags</a></li>
  <li><a href="index.html?a=M005232&name=new" >new</a></li>
  <li><a href="index.html?a=M005236&name=start_accepting" >start_accepting</a></li>
  <li><a href="index.html?a=M005246&name=wrap" >wrap</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">LIST_TYPE_TO_HTML</td>
    <td>=</td>
    <td class="attr-value">{       ListBase::BULLET =&gt;  [ &quot;&lt;ul&gt;&quot;, &quot;&lt;/ul&gt;&quot; ],       ListBase::NUMBER =&gt;  [ &quot;&lt;ol&gt;&quot;, &quot;&lt;/ol&gt;&quot; ],       ListBase::UPPERALPHA =&gt;  [ &quot;&lt;ol&gt;&quot;, &quot;&lt;/ol&gt;&quot; ],       ListBase::LOWERALPHA =&gt;  [ &quot;&lt;ol&gt;&quot;, &quot;&lt;/ol&gt;&quot; ],       ListBase::LABELED =&gt; [ &quot;&lt;dl&gt;&quot;, &quot;&lt;/dl&gt;&quot; ],       ListBase::NOTE    =&gt; [ &quot;&lt;table&gt;&quot;, &quot;&lt;/table&gt;&quot; ],     }</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">InlineTag</td>
    <td>=</td>
    <td class="attr-value">Struct.new(:bit, :on, :off)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M005232" class="method">
  <div id="M005232_title" class="title">
    <b>new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005232_source')" id="l_M005232_source">show source</a> ]</p>
  <div id="M005232_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 21</span>
21:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
22:       <span class="ruby-identifier">init_tags</span>
23:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M005244" class="method">
  <div id="M005244_title" class="title">
    <b>accept_blank_line</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005244_source')" id="l_M005244_source">show source</a> ]</p>
  <div id="M005244_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 105</span>
105:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_blank_line</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
106:       <span class="ruby-comment cmt"># @res &lt;&lt; annotate(&quot;&lt;p /&gt;&quot;) &lt;&lt; &quot;\n&quot;</span>
107:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005245" class="method">
  <div id="M005245_title" class="title">
    <b>accept_heading</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005245_source')" id="l_M005245_source">show source</a> ]</p>
  <div id="M005245_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 109</span>
109:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_heading</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
110:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">convert_heading</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">head_level</span>, <span class="ruby-identifier">am</span>.<span class="ruby-identifier">flow</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">txt</span>))
111:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005242" class="method">
  <div id="M005242_title" class="title">
    <b>accept_list_end</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005242_source')" id="l_M005242_source">show source</a> ]</p>
  <div id="M005242_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_list_end</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
90:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tag</span> = <span class="ruby-ivar">@in_list_entry</span>.<span class="ruby-identifier">pop</span>
91:         <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-identifier">tag</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
92:       <span class="ruby-keyword kw">end</span>
93:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">html_list_name</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">type</span>, <span class="ruby-keyword kw">false</span>) <span class="ruby-operator">&lt;&lt;</span><span class="ruby-value str">&quot;\n&quot;</span>
94:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005243" class="method">
  <div id="M005243_title" class="title">
    <b>accept_list_item</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005243_source')" id="l_M005243_source">show source</a> ]</p>
  <div id="M005243_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 96</span>
 96:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_list_item</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
 97:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tag</span> = <span class="ruby-ivar">@in_list_entry</span>.<span class="ruby-identifier">last</span>
 98:         <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-identifier">tag</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
 99:       <span class="ruby-keyword kw">end</span>
100:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">list_item_start</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
101:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">convert_flow</span>(<span class="ruby-identifier">am</span>.<span class="ruby-identifier">flow</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">txt</span>))) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
102:       <span class="ruby-ivar">@in_list_entry</span>[<span class="ruby-value">-1</span>] = <span class="ruby-identifier">list_end_for</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">type</span>)
103:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005241" class="method">
  <div id="M005241_title" class="title">
    <b>accept_list_start</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005241_source')" id="l_M005241_source">show source</a> ]</p>
  <div id="M005241_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 84</span>
84:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_list_start</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
85:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">html_list_name</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">type</span>, <span class="ruby-keyword kw">true</span>) <span class="ruby-operator">&lt;&lt;</span><span class="ruby-value str">&quot;\n&quot;</span>
86:       <span class="ruby-ivar">@in_list_entry</span>.<span class="ruby-identifier">push</span> <span class="ruby-keyword kw">false</span>
87:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005238" class="method">
  <div id="M005238_title" class="title">
    <b>accept_paragraph</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005238_source')" id="l_M005238_source">show source</a> ]</p>
  <div id="M005238_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 66</span>
66:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_paragraph</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
67:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-value str">&quot;&lt;p&gt;&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
68:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">convert_flow</span>(<span class="ruby-identifier">am</span>.<span class="ruby-identifier">flow</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">txt</span>)))
69:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-value str">&quot;&lt;/p&gt;&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
70:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005240" class="method">
  <div id="M005240_title" class="title">
    <b>accept_rule</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005240_source')" id="l_M005240_source">show source</a> ]</p>
  <div id="M005240_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 78</span>
78:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_rule</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
79:       <span class="ruby-identifier">size</span> = <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">param</span>
80:       <span class="ruby-identifier">size</span> = <span class="ruby-value">10</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>
81:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;&lt;hr size=\&quot;#{size}\&quot;&gt;&lt;/hr&gt;&quot;</span>
82:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005239" class="method">
  <div id="M005239_title" class="title">
    <b>accept_verbatim</b>(am, fragment)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005239_source')" id="l_M005239_source">show source</a> ]</p>
  <div id="M005239_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 72</span>
72:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept_verbatim</span>(<span class="ruby-identifier">am</span>, <span class="ruby-identifier">fragment</span>)
73:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-value str">&quot;&lt;pre&gt;&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>
74:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CGI</span>.<span class="ruby-identifier">escapeHTML</span>(<span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">txt</span>)
75:       <span class="ruby-ivar">@res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-value str">&quot;&lt;/pre&gt;&quot;</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
76:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005234" class="method">
  <div id="M005234_title" class="title">
    <b>add_tag</b>(name, start, stop)
  </div>
  <div class="description">
  <p>
Add a new set of HTML tags for an attribute. We allow separate start and
end tags for flexibility
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005234_source')" id="l_M005234_source">show source</a> ]</p>
  <div id="M005234_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 40</span>
40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_tag</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">start</span>, <span class="ruby-identifier">stop</span>)
41:       <span class="ruby-ivar">@attr_tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">InlineTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">SM</span><span class="ruby-operator">::</span><span class="ruby-constant">Attribute</span>.<span class="ruby-identifier">bitmap_for</span>(<span class="ruby-identifier">name</span>), <span class="ruby-identifier">start</span>, <span class="ruby-identifier">stop</span>)
42:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005235" class="method">
  <div id="M005235_title" class="title">
    <b>annotate</b>(tag)
  </div>
  <div class="description">
  <p>
Given an HTML tag, decorate it with class information and the like if
required. This is a no-op in the base class, but is overridden in HTML
output classes that implement style sheets
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005235_source')" id="l_M005235_source">show source</a> ]</p>
  <div id="M005235_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 50</span>
50:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">annotate</span>(<span class="ruby-identifier">tag</span>)
51:       <span class="ruby-identifier">tag</span>
52:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005237" class="method">
  <div id="M005237_title" class="title">
    <b>end_accepting</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005237_source')" id="l_M005237_source">show source</a> ]</p>
  <div id="M005237_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 62</span>
62:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">end_accepting</span>
63:       <span class="ruby-ivar">@res</span>
64:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005233" class="method">
  <div id="M005233_title" class="title">
    <b>init_tags</b>()
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000201&name=Set">Set</a> up the standard mapping
of attributes to HTML tags
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005233_source')" id="l_M005233_source">show source</a> ]</p>
  <div id="M005233_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 28</span>
28:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">init_tags</span>
29:       <span class="ruby-ivar">@attr_tags</span> = [
30:         <span class="ruby-constant">InlineTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">SM</span><span class="ruby-operator">::</span><span class="ruby-constant">Attribute</span>.<span class="ruby-identifier">bitmap_for</span>(<span class="ruby-identifier">:BOLD</span>), <span class="ruby-value str">&quot;&lt;b&gt;&quot;</span>, <span class="ruby-value str">&quot;&lt;/b&gt;&quot;</span>),
31:         <span class="ruby-constant">InlineTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">SM</span><span class="ruby-operator">::</span><span class="ruby-constant">Attribute</span>.<span class="ruby-identifier">bitmap_for</span>(<span class="ruby-identifier">:TT</span>),   <span class="ruby-value str">&quot;&lt;tt&gt;&quot;</span>, <span class="ruby-value str">&quot;&lt;/tt&gt;&quot;</span>),
32:         <span class="ruby-constant">InlineTag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">SM</span><span class="ruby-operator">::</span><span class="ruby-constant">Attribute</span>.<span class="ruby-identifier">bitmap_for</span>(<span class="ruby-identifier">:EM</span>),   <span class="ruby-value str">&quot;&lt;em&gt;&quot;</span>, <span class="ruby-value str">&quot;&lt;/em&gt;&quot;</span>),
33:       ]
34:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005236" class="method">
  <div id="M005236_title" class="title">
    <b>start_accepting</b>()
  </div>
  <div class="description">
  <p>
Here&#8217;s the client side of the visitor pattern
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005236_source')" id="l_M005236_source">show source</a> ]</p>
  <div id="M005236_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 57</span>
57:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start_accepting</span>
58:       <span class="ruby-ivar">@res</span> = <span class="ruby-value str">&quot;&quot;</span>
59:       <span class="ruby-ivar">@in_list_entry</span> = []
60:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005246" class="method">
  <div id="M005246_title" class="title">
    <b>wrap</b>(txt, line_len = 76)
  </div>
  <div class="description">
  <p>
This is a higher speed (if messier) version of wrap
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005246_source')" id="l_M005246_source">show source</a> ]</p>
  <div id="M005246_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/markup/simple_markup/to_html.rb, line 115</span>
115:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wrap</span>(<span class="ruby-identifier">txt</span>, <span class="ruby-identifier">line_len</span> = <span class="ruby-value">76</span>)
116:       <span class="ruby-identifier">res</span> = <span class="ruby-value str">&quot;&quot;</span>
117:       <span class="ruby-identifier">sp</span> = <span class="ruby-value">0</span>
118:       <span class="ruby-identifier">ep</span> = <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">length</span>
119:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span>
120:         <span class="ruby-comment cmt"># scan back for a space</span>
121:         <span class="ruby-identifier">p</span> = <span class="ruby-identifier">sp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line_len</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
122:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">ep</span>
123:           <span class="ruby-identifier">p</span> = <span class="ruby-identifier">ep</span>
124:         <span class="ruby-keyword kw">else</span>
125:           <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&gt;</span> <span class="ruby-identifier">sp</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">p</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?\s</span>
126:             <span class="ruby-identifier">p</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
127:           <span class="ruby-keyword kw">end</span>
128:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-identifier">sp</span>
129:             <span class="ruby-identifier">p</span> = <span class="ruby-identifier">sp</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line_len</span>
130:             <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">p</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?\s</span>
131:               <span class="ruby-identifier">p</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
132:             <span class="ruby-keyword kw">end</span>
133:           <span class="ruby-keyword kw">end</span>
134:         <span class="ruby-keyword kw">end</span>
135:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">sp</span><span class="ruby-operator">...</span><span class="ruby-identifier">p</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
136:         <span class="ruby-identifier">sp</span> = <span class="ruby-identifier">p</span>
137:         <span class="ruby-identifier">sp</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sp</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">ep</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">txt</span>[<span class="ruby-identifier">sp</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?\s</span>
138:       <span class="ruby-keyword kw">end</span>
139:       <span class="ruby-identifier">res</span>
140:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>