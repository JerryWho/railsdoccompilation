  <div id="C00001589">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />GzipFile<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/ext/zlib/zlib_c.html');">ruby-1.8.7-p22/ext/zlib/zlib.c</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<a href="index.html?a=C00001589&name=Zlib::GzipFile">Zlib::GzipFile</a> is
an abstract class for handling a gzip formatted compressed file. The
operations are defined in the subclasses, <a
href="index.html?a=C00001602&name=Zlib::GzipReader">Zlib::GzipReader</a>
for reading, and <a
href="index.html?a=C00001597&name=Zlib::GzipWriter">Zlib::GzipWriter</a>
for writing.
</p>
<p>
<a href="index.html?a=C00001602&name=GzipReader">GzipReader</a> should be
used by associating an <a href="index.html?a=C00000245&name=IO">IO</a>, or
<a href="index.html?a=C00000245&name=IO">IO</a>-like, object.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M007801&name=close" >close</a></li>
  <li><a href="index.html?a=M007803&name=closed?" >closed?</a></li>
  <li><a href="index.html?a=M007800&name=comment" >comment</a></li>
  <li><a href="index.html?a=M007795&name=crc" >crc</a></li>
  <li><a href="index.html?a=M007802&name=finish" >finish</a></li>
  <li><a href="index.html?a=M007797&name=level" >level</a></li>
  <li><a href="index.html?a=M007796&name=mtime" >mtime</a></li>
  <li><a href="index.html?a=M007799&name=orig_name" >orig_name</a></li>
  <li><a href="index.html?a=M007798&name=os_code" >os_code</a></li>
  <li><a href="index.html?a=M007804&name=sync" >sync</a></li>
  <li><a href="index.html?a=M007805&name=sync=" >sync=</a></li>
  <li><a href="index.html?a=M007794&name=to_io" >to_io</a></li>
  <li><a href="index.html?a=M007793&name=wrap" >wrap</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/Zlib/GzipFile/CRCError.html');" class="link">Zlib::GzipFile::CRCError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Zlib/GzipFile/Error.html');" class="link">Zlib::GzipFile::Error</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Zlib/GzipFile/LengthError.html');" class="link">Zlib::GzipFile::LengthError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Zlib/GzipFile/NoFooter.html');" class="link">Zlib::GzipFile::NoFooter</a>"<br />




<div class="sectiontitle">Public Class methods</div>
<div id="M007793" class="method">
  <div id="M007793_title" class="title">
    <b>wrap</b>(...)
  </div>
  <div class="description">
  <p>
See Zlib::GzipReader#wrap and Zlib::GzipWriter#wrap.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007793_source')" id="l_M007793_source">show source</a> ]</p>
  <div id="M007793_source" class="dyn-source">
<pre>
/*
 * See Zlib::GzipReader#wrap and Zlib::GzipWriter#wrap.
 */
static VALUE
rb_gzfile_s_wrap(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    VALUE obj = rb_class_new_instance(argc, argv, klass);

    if (rb_block_given_p()) {
        return rb_ensure(rb_yield, obj, gzfile_ensure_close, obj);
    }
    else {
        return obj;
    }
}
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M007801" class="method">
  <div id="M007801_title" class="title">
    <b>close</b>()
  </div>
  <div class="description">
  <p>
Closes the <a href="index.html?a=C00001589&name=GzipFile">GzipFile</a>
object. This method calls close method of the associated <a
href="index.html?a=C00000245&name=IO">IO</a> object. Returns the associated
<a href="index.html?a=C00000245&name=IO">IO</a> object.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007801_source')" id="l_M007801_source">show source</a> ]</p>
  <div id="M007801_source" class="dyn-source">
<pre>
/*
 * Closes the GzipFile object. This method calls close method of the
 * associated IO object. Returns the associated IO object.
 */
static VALUE
rb_gzfile_close(obj)
    VALUE obj;
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE io;

    io = gz-&gt;io;
    gzfile_close(gz, 1);
    return io;
}
</pre>
  </div>
</div>
</div>
<div id="M007803" class="method">
  <div id="M007803_title" class="title">
    <b>closed?</b>()
  </div>
  <div class="description">
  <p>
Same as <a href="index.html?a=C00000245&name=IO">IO</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007803_source')" id="l_M007803_source">show source</a> ]</p>
  <div id="M007803_source" class="dyn-source">
<pre>
/*
 * Same as IO.
 */
static VALUE
rb_gzfile_closed_p(obj)
    VALUE obj;
{
    struct gzfile *gz;
    Data_Get_Struct(obj, struct gzfile, gz);
    return NIL_P(gz-&gt;io) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M007800" class="method">
  <div id="M007800_title" class="title">
    <b>comment</b>()
  </div>
  <div class="description">
  <p>
Returns comments recorded in the gzip file header, or nil if the comments
is not present.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007800_source')" id="l_M007800_source">show source</a> ]</p>
  <div id="M007800_source" class="dyn-source">
<pre>
/*
 * Returns comments recorded in the gzip file header, or nil if the comments
 * is not present.
 */
static VALUE
rb_gzfile_comment(obj)
    VALUE obj;
{
    VALUE str = get_gzfile(obj)-&gt;comment;
    if (!NIL_P(str)) {
        str = rb_str_dup(str);
    }
    OBJ_TAINT(str);  /* for safe */
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M007795" class="method">
  <div id="M007795_title" class="title">
    <b>crc</b>()
  </div>
  <div class="description">
  <p>
Returns CRC value of the uncompressed data.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007795_source')" id="l_M007795_source">show source</a> ]</p>
  <div id="M007795_source" class="dyn-source">
<pre>
/*
 * Returns CRC value of the uncompressed data.
 */
static VALUE
rb_gzfile_crc(obj)
    VALUE obj;
{
    return rb_uint2inum(get_gzfile(obj)-&gt;crc);
}
</pre>
  </div>
</div>
</div>
<div id="M007802" class="method">
  <div id="M007802_title" class="title">
    <b>finish</b>()
  </div>
  <div class="description">
  <p>
Closes the <a href="index.html?a=C00001589&name=GzipFile">GzipFile</a>
object. Unlike <a
href="index.html?a=M007801&name=Zlib::GzipFile#close">Zlib::GzipFile#close</a>,
this method never calls the close method of the associated <a
href="index.html?a=C00000245&name=IO">IO</a> object. Returns the associated
<a href="index.html?a=C00000245&name=IO">IO</a> object.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007802_source')" id="l_M007802_source">show source</a> ]</p>
  <div id="M007802_source" class="dyn-source">
<pre>
/*
 * Closes the GzipFile object. Unlike Zlib::GzipFile#close, this method never
 * calls the close method of the associated IO object. Returns the associated IO
 * object.
 */
static VALUE
rb_gzfile_finish(obj)
    VALUE obj;
{
    struct gzfile *gz = get_gzfile(obj);
    VALUE io;

    io = gz-&gt;io;
    gzfile_close(gz, 0);
    return io;
}
</pre>
  </div>
</div>
</div>
<div id="M007797" class="method">
  <div id="M007797_title" class="title">
    <b>level</b>()
  </div>
  <div class="description">
  <p>
Returns compression level.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007797_source')" id="l_M007797_source">show source</a> ]</p>
  <div id="M007797_source" class="dyn-source">
<pre>
/*
 * Returns compression level.
 */
static VALUE
rb_gzfile_level(obj)
    VALUE obj;
{
    return INT2FIX(get_gzfile(obj)-&gt;level);
}
</pre>
  </div>
</div>
</div>
<div id="M007796" class="method">
  <div id="M007796_title" class="title">
    <b>mtime</b>()
  </div>
  <div class="description">
  <p>
Returns last modification time recorded in the gzip file header.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007796_source')" id="l_M007796_source">show source</a> ]</p>
  <div id="M007796_source" class="dyn-source">
<pre>
/*
 * Returns last modification time recorded in the gzip file header.
 */
static VALUE
rb_gzfile_mtime(obj)
    VALUE obj;
{
    return rb_time_new(get_gzfile(obj)-&gt;mtime, (time_t)0);
}
</pre>
  </div>
</div>
</div>
<div id="M007799" class="method">
  <div id="M007799_title" class="title">
    <b>orig_name</b>()
  </div>
  <div class="description">
  <p>
Returns original filename recorded in the gzip file header, or <tt>nil</tt>
if original filename is not present.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007799_source')" id="l_M007799_source">show source</a> ]</p>
  <div id="M007799_source" class="dyn-source">
<pre>
/*
 * Returns original filename recorded in the gzip file header, or +nil+ if
 * original filename is not present.
 */
static VALUE
rb_gzfile_orig_name(obj)
    VALUE obj;
{
    VALUE str = get_gzfile(obj)-&gt;orig_name;
    if (!NIL_P(str)) {
        str = rb_str_dup(str);
    }
    OBJ_TAINT(str);  /* for safe */
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M007798" class="method">
  <div id="M007798_title" class="title">
    <b>os_code</b>()
  </div>
  <div class="description">
  <p>
Returns OS code number recorded in the gzip file header.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007798_source')" id="l_M007798_source">show source</a> ]</p>
  <div id="M007798_source" class="dyn-source">
<pre>
/*
 * Returns OS code number recorded in the gzip file header.
 */
static VALUE
rb_gzfile_os_code(obj)
    VALUE obj;
{
    return INT2FIX(get_gzfile(obj)-&gt;os_code);
}
</pre>
  </div>
</div>
</div>
<div id="M007804" class="method">
  <div id="M007804_title" class="title">
    <b>sync</b>()
  </div>
  <div class="description">
  <p>
Same as <a href="index.html?a=C00000245&name=IO">IO</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007804_source')" id="l_M007804_source">show source</a> ]</p>
  <div id="M007804_source" class="dyn-source">
<pre>
/*
 * Same as IO.
 */
static VALUE
rb_gzfile_sync(obj)
    VALUE obj;
{
    return (get_gzfile(obj)-&gt;z.flags &amp; GZFILE_FLAG_SYNC) ? Qtrue : Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M007805" class="method">
  <div id="M007805_title" class="title">
    <b> sync = flag<br />
</b>
  </div>
  <div class="description">
  <p>
Same as <a href="index.html?a=C00000245&name=IO">IO</a>. If flag is
<tt>true</tt>, the associated <a
href="index.html?a=C00000245&name=IO">IO</a> object must respond to the
<tt>flush</tt> method. While <tt>sync</tt> mode is <tt>true</tt>, the
compression ratio decreases sharply.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007805_source')" id="l_M007805_source">show source</a> ]</p>
  <div id="M007805_source" class="dyn-source">
<pre>
/*
 * call-seq: sync = flag
 *
 * Same as IO.  If flag is +true+, the associated IO object must respond to the
 * +flush+ method.  While +sync+ mode is +true+, the compression ratio
 * decreases sharply.
 */
static VALUE
rb_gzfile_set_sync(obj, mode)
    VALUE obj, mode;
{
    struct gzfile *gz = get_gzfile(obj);

    if (RTEST(mode)) {
        gz-&gt;z.flags |= GZFILE_FLAG_SYNC;
    }
    else {
        gz-&gt;z.flags &amp;= ~GZFILE_FLAG_SYNC;
    }
    return mode;
}
</pre>
  </div>
</div>
</div>
<div id="M007794" class="method">
  <div id="M007794_title" class="title">
    <b>to_io</b>()
  </div>
  <div class="description">
  <p>
Same as <a href="index.html?a=C00000245&name=IO">IO</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007794_source')" id="l_M007794_source">show source</a> ]</p>
  <div id="M007794_source" class="dyn-source">
<pre>
/*
 * Same as IO.
 */
static VALUE
rb_gzfile_to_io(obj)
    VALUE obj;
{
    return get_gzfile(obj)-&gt;io;
}
</pre>
  </div>
</div>
</div>
</div>

  </div>