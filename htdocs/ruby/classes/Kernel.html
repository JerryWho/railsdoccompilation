  <div id="C00001179">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />Kernel<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/object_c.html');">ruby-1.8.7-p22/object.c</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/open-uri_rb.html');">ruby-1.8.7-p22/lib/open-uri.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/pathname_rb.html');">ruby-1.8.7-p22/lib/pathname.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/pp_rb.html');">ruby-1.8.7-p22/lib/pp.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/scanf_rb.html');">ruby-1.8.7-p22/lib/scanf.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/soap/soap_rb.html');">ruby-1.8.7-p22/lib/soap/soap.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/uri/common_rb.html');">ruby-1.8.7-p22/lib/uri/common.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/yaml_rb.html');">ruby-1.8.7-p22/lib/yaml.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<tt><a href="index.html?a=C00000023&name=Object">Object</a></tt> is the
parent class of all classes in Ruby. Its methods are therefore available to
all objects unless explicitly overridden.
</p>
<p>
<tt><a href="index.html?a=C00000023&name=Object">Object</a></tt> mixes in
the <tt><a href="index.html?a=C00001179&name=Kernel">Kernel</a></tt>
module, making the built-in kernel functions globally accessible. Although
the instance methods of <tt><a
href="index.html?a=C00000023&name=Object">Object</a></tt> are defined by
the <tt><a href="index.html?a=C00001179&name=Kernel">Kernel</a></tt>
module, we have chosen to document them here for clarity.
</p>
<p>
In the descriptions of <a
href="index.html?a=C00000023&name=Object">Object</a>&#8217;s methods, the
parameter <em>symbol</em> refers to a symbol, which is either a quoted
string or a <tt><a
href="index.html?a=C00000284&name=Symbol">Symbol</a></tt> (such as
<tt>:name</tt>).
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006219&name=Array" >Array</a></li>
  <li><a href="index.html?a=M006217&name=Float" >Float</a></li>
  <li><a href="index.html?a=M006216&name=Integer" >Integer</a></li>
  <li><a href="index.html?a=M006239&name=Pathname" >Pathname</a></li>
  <li><a href="index.html?a=M006218&name=String" >String</a></li>
  <li><a href="index.html?a=M006243&name=URI" >URI</a></li>
  <li><a href="index.html?a=M006188&name=__method__" >__method__</a></li>
  <li><a href="index.html?a=M006212&name=`" >`</a></li>
  <li><a href="index.html?a=M006182&name=abort" >abort</a></li>
  <li><a href="index.html?a=M006183&name=at_exit" >at_exit</a></li>
  <li><a href="index.html?a=M006194&name=autoload" >autoload</a></li>
  <li><a href="index.html?a=M006195&name=autoload?" >autoload?</a></li>
  <li><a href="index.html?a=M006198&name=binding" >binding</a></li>
  <li><a href="index.html?a=M006175&name=block_given?" >block_given?</a></li>
  <li><a href="index.html?a=M006199&name=callcc" >callcc</a></li>
  <li><a href="index.html?a=M006180&name=caller" >caller</a></li>
  <li><a href="index.html?a=M006184&name=catch" >catch</a></li>
  <li><a href="index.html?a=M006234&name=chomp" >chomp</a></li>
  <li><a href="index.html?a=M006235&name=chomp!" >chomp!</a></li>
  <li><a href="index.html?a=M006232&name=chop" >chop</a></li>
  <li><a href="index.html?a=M006233&name=chop!" >chop!</a></li>
  <li><a href="index.html?a=M006173&name=eval" >eval</a></li>
  <li><a href="index.html?a=M006220&name=exec" >exec</a></li>
  <li><a href="index.html?a=M006181&name=exit" >exit</a></li>
  <li><a href="index.html?a=M006222&name=exit!" >exit!</a></li>
  <li><a href="index.html?a=M006179&name=fail" >fail</a></li>
  <li><a href="index.html?a=M006221&name=fork" >fork</a></li>
  <li><a href="index.html?a=M006215&name=format" >format</a></li>
  <li><a href="index.html?a=M006209&name=getc" >getc</a></li>
  <li><a href="index.html?a=M006207&name=gets" >gets</a></li>
  <li><a href="index.html?a=M006186&name=global_variables" >global_variables</a></li>
  <li><a href="index.html?a=M006229&name=gsub" >gsub</a></li>
  <li><a href="index.html?a=M006231&name=gsub!" >gsub!</a></li>
  <li><a href="index.html?a=M006174&name=iterator?" >iterator?</a></li>
  <li><a href="index.html?a=M006197&name=lambda" >lambda</a></li>
  <li><a href="index.html?a=M006192&name=load" >load</a></li>
  <li><a href="index.html?a=M006187&name=local_variables" >local_variables</a></li>
  <li><a href="index.html?a=M006177&name=loop" >loop</a></li>
  <li><a href="index.html?a=M006176&name=method_missing" >method_missing</a></li>
  <li><a href="index.html?a=M006202&name=open" >open</a></li>
  <li><a href="index.html?a=M006238&name=open" >open</a></li>
  <li><a href="index.html?a=M006213&name=p" >p</a></li>
  <li><a href="index.html?a=M006241&name=pp" >pp</a></li>
  <li><a href="index.html?a=M006240&name=pretty_inspect" >pretty_inspect</a></li>
  <li><a href="index.html?a=M006204&name=print" >print</a></li>
  <li><a href="index.html?a=M006203&name=printf" >printf</a></li>
  <li><a href="index.html?a=M006196&name=proc" >proc</a></li>
  <li><a href="index.html?a=M006205&name=putc" >putc</a></li>
  <li><a href="index.html?a=M006206&name=puts" >puts</a></li>
  <li><a href="index.html?a=M006178&name=raise" >raise</a></li>
  <li><a href="index.html?a=M006226&name=rand" >rand</a></li>
  <li><a href="index.html?a=M006208&name=readline" >readline</a></li>
  <li><a href="index.html?a=M006211&name=readlines" >readlines</a></li>
  <li><a href="index.html?a=M006193&name=require" >require</a></li>
  <li><a href="index.html?a=M006237&name=scan" >scan</a></li>
  <li><a href="index.html?a=M006210&name=select" >select</a></li>
  <li><a href="index.html?a=M006191&name=set_trace_func" >set_trace_func</a></li>
  <li><a href="index.html?a=M006224&name=sleep" >sleep</a></li>
  <li><a href="index.html?a=M006236&name=split" >split</a></li>
  <li><a href="index.html?a=M006214&name=sprintf" >sprintf</a></li>
  <li><a href="index.html?a=M006225&name=srand" >srand</a></li>
  <li><a href="index.html?a=M006228&name=sub" >sub</a></li>
  <li><a href="index.html?a=M006230&name=sub!" >sub!</a></li>
  <li><a href="index.html?a=M006201&name=syscall" >syscall</a></li>
  <li><a href="index.html?a=M006223&name=system" >system</a></li>
  <li><a href="index.html?a=M006200&name=test" >test</a></li>
  <li><a href="index.html?a=M006185&name=throw" >throw</a></li>
  <li><a href="index.html?a=M006189&name=trace_var" >trace_var</a></li>
  <li><a href="index.html?a=M006227&name=trap" >trap</a></li>
  <li><a href="index.html?a=M006190&name=untrace_var" >untrace_var</a></li>
  <li><a href="index.html?a=M006242&name=warn" >warn</a></li>
  <li><a href="index.html?a=M006172&name=warn" >warn</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M006219" class="method">
  <div id="M006219_title" class="title">
    <b>Array(arg)    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <em>arg</em> as an <tt><a
href="index.html?a=M006219&name=Array">Array</a></tt>. First tries to call
<em>arg</em><tt>.to_ary</tt>, then <em>arg</em><tt>.to_a</tt>. If both
fail, creates a single element array containing <em>arg</em> (unless
<em>arg</em> is <tt>nil</tt>).
</p>
<pre>
   Array(1..5)   #=&gt; [1, 2, 3, 4, 5]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006219_source')" id="l_M006219_source">show source</a> ]</p>
  <div id="M006219_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Array(arg)    =&gt; array
 *  
 *  Returns &lt;i&gt;arg&lt;/i&gt; as an &lt;code&gt;Array&lt;/code&gt;. First tries to call
 *  &lt;i&gt;arg&lt;/i&gt;&lt;code&gt;.to_ary&lt;/code&gt;, then &lt;i&gt;arg&lt;/i&gt;&lt;code&gt;.to_a&lt;/code&gt;.
 *  If both fail, creates a single element array containing &lt;i&gt;arg&lt;/i&gt;
 *  (unless &lt;i&gt;arg&lt;/i&gt; is &lt;code&gt;nil&lt;/code&gt;).
 *     
 *     Array(1..5)   #=&gt; [1, 2, 3, 4, 5]
 */

static VALUE
rb_f_array(obj, arg)
    VALUE obj, arg;
{
    return rb_Array(arg);
}
</pre>
  </div>
</div>
</div>
<div id="M006217" class="method">
  <div id="M006217_title" class="title">
    <b>Float(arg)    => float<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <em>arg</em> converted to a float. <a
href="index.html?a=C00000009&name=Numeric">Numeric</a> types are converted
directly, the rest are converted using <em>arg</em>.to_f. As of Ruby 1.8,
converting <tt>nil</tt> generates a <tt><a
href="index.html?a=C00000091&name=TypeError">TypeError</a></tt>.
</p>
<pre>
   Float(1)           #=&gt; 1.0
   Float(&quot;123.456&quot;)   #=&gt; 123.456
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006217_source')" id="l_M006217_source">show source</a> ]</p>
  <div id="M006217_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Float(arg)    =&gt; float
 *  
 *  Returns &lt;i&gt;arg&lt;/i&gt; converted to a float. Numeric types are converted
 *  directly, the rest are converted using &lt;i&gt;arg&lt;/i&gt;.to_f. As of Ruby
 *  1.8, converting &lt;code&gt;nil&lt;/code&gt; generates a &lt;code&gt;TypeError&lt;/code&gt;.
 *     
 *     Float(1)           #=&gt; 1.0
 *     Float(&quot;123.456&quot;)   #=&gt; 123.456
 */

static VALUE
rb_f_float(obj, arg)
    VALUE obj, arg;
{
    return rb_Float(arg);
}
</pre>
  </div>
</div>
</div>
<div id="M006216" class="method">
  <div id="M006216_title" class="title">
    <b>Integer(arg)    => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>arg</em> to a <tt><a
href="index.html?a=C00000089&name=Fixnum">Fixnum</a></tt> or <tt><a
href="index.html?a=C00000095&name=Bignum">Bignum</a></tt>. <a
href="index.html?a=C00000009&name=Numeric">Numeric</a> types are converted
directly (with floating point numbers being truncated). If <em>arg</em> is
a <tt><a href="index.html?a=M006218&name=String">String</a></tt>, leading
radix indicators (<tt>0</tt>, <tt>0b</tt>, and <tt>0x</tt>) are honored.
Others are converted using <tt>to_int</tt> and <tt>to_i</tt>. This behavior
is different from that of <tt><a
href="index.html?a=M000772&name=String#to_i">String#to_i</a></tt>.
</p>
<pre>
   Integer(123.999)    #=&gt; 123
   Integer(&quot;0x1a&quot;)     #=&gt; 26
   Integer(Time.new)   #=&gt; 1049896590
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006216_source')" id="l_M006216_source">show source</a> ]</p>
  <div id="M006216_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Integer(arg)    =&gt; integer
 *  
 *  Converts &lt;i&gt;arg&lt;/i&gt; to a &lt;code&gt;Fixnum&lt;/code&gt; or &lt;code&gt;Bignum&lt;/code&gt;.
 *  Numeric types are converted directly (with floating point numbers
 *  being truncated). If &lt;i&gt;arg&lt;/i&gt; is a &lt;code&gt;String&lt;/code&gt;, leading
 *  radix indicators (&lt;code&gt;0&lt;/code&gt;, &lt;code&gt;0b&lt;/code&gt;, and
 *  &lt;code&gt;0x&lt;/code&gt;) are honored. Others are converted using
 *  &lt;code&gt;to_int&lt;/code&gt; and &lt;code&gt;to_i&lt;/code&gt;. This behavior is
 *  different from that of &lt;code&gt;String#to_i&lt;/code&gt;.
 *     
 *     Integer(123.999)    #=&gt; 123
 *     Integer(&quot;0x1a&quot;)     #=&gt; 26
 *     Integer(Time.new)   #=&gt; 1049896590
 */

static VALUE
rb_f_integer(obj, arg)
    VALUE obj, arg;
{
    return rb_Integer(arg);
}
</pre>
  </div>
</div>
</div>
<div id="M006218" class="method">
  <div id="M006218_title" class="title">
    <b>String(arg)   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>arg</em> to a <tt><a
href="index.html?a=M006218&name=String">String</a></tt> by calling its
<tt>to_s</tt> method.
</p>
<pre>
   String(self)        #=&gt; &quot;main&quot;
   String(self.class   #=&gt; &quot;Object&quot;
   String(123456)      #=&gt; &quot;123456&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006218_source')" id="l_M006218_source">show source</a> ]</p>
  <div id="M006218_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     String(arg)   =&gt; string
 *  
 *  Converts &lt;i&gt;arg&lt;/i&gt; to a &lt;code&gt;String&lt;/code&gt; by calling its
 *  &lt;code&gt;to_s&lt;/code&gt; method.
 *     
 *     String(self)        #=&gt; &quot;main&quot;
 *     String(self.class   #=&gt; &quot;Object&quot;
 *     String(123456)      #=&gt; &quot;123456&quot;
 */

static VALUE
rb_f_string(obj, arg)
    VALUE obj, arg;
{
    return rb_String(arg);
}
</pre>
  </div>
</div>
</div>
<div id="M006243" class="method">
  <div id="M006243_title" class="title">
    <b>URI</b>(uri_str)
  </div>
  <div class="description">
  <p>
alias for <a href="index.html?a=M005060&name=URI.parse">URI.parse</a>.
</p>
<p>
This method is introduced at 1.8.2.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006243_source')" id="l_M006243_source">show source</a> ]</p>
  <div id="M006243_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/uri/common.rb, line 607</span>
607:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">URI</span>(<span class="ruby-identifier">uri_str</span>) <span class="ruby-comment cmt"># :doc:</span>
608:     <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">uri_str</span>)
609:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006188" class="method">
  <div id="M006188_title" class="title">
    <b>__method__         => symbol<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the name of the current method as a <a
href="index.html?a=C00000284&name=Symbol">Symbol</a>. If called from inside
of an aliased method it will return the original nonaliased name. If called
outside of a method, it returns <tt>nil</tt>.
</p>
<pre>
  def foo
    __method__
  end
  alias bar foo

  foo                # =&gt; :foo
  bar                # =&gt; :foo
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006188_source')" id="l_M006188_source">show source</a> ]</p>
  <div id="M006188_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     __method__         =&gt; symbol
 *  
 *  Returns the name of the current method as a Symbol.
 *  If called from inside of an aliased method it will return the original
 *  nonaliased name.
 *  If called outside of a method, it returns &lt;code&gt;nil&lt;/code&gt;.
 *  
 *    def foo
 *      __method__
 *    end
 *    alias bar foo
 *    
 *    foo                # =&gt; :foo
 *    bar                # =&gt; :foo
 *
 */

static VALUE
rb_f_method_name()
{
    struct FRAME* prev = ruby_frame-&gt;prev;
    if (prev &amp;&amp; prev-&gt;orig_func) {
        return ID2SYM(prev-&gt;orig_func);
    }
    else {
        return Qnil;
    }
}
</pre>
  </div>
</div>
</div>
<div id="M006212" class="method">
  <div id="M006212_title" class="title">
    <b>`cmd`    => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the standard output of running <em>cmd</em> in a subshell. The
built-in syntax <tt>%x{&#8230;}</tt> uses this method. Sets <tt>$?</tt> to
the process status.
</p>
<pre>
   `date`                   #=&gt; &quot;Wed Apr  9 08:56:30 CDT 2003\n&quot;
   `ls testdir`.split[1]    #=&gt; &quot;main.rb&quot;
   `echo oops &amp;&amp; exit 99`   #=&gt; &quot;oops\n&quot;
   $?.exitstatus            #=&gt; 99
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006212_source')" id="l_M006212_source">show source</a> ]</p>
  <div id="M006212_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     `cmd`    =&gt; string
 *  
 *  Returns the standard output of running _cmd_ in a subshell.
 *  The built-in syntax &lt;code&gt;%x{...}&lt;/code&gt; uses
 *  this method. Sets &lt;code&gt;$?&lt;/code&gt; to the process status.
 *     
 *     `date`                   #=&gt; &quot;Wed Apr  9 08:56:30 CDT 2003\n&quot;
 *     `ls testdir`.split[1]    #=&gt; &quot;main.rb&quot;
 *     `echo oops &amp;&amp; exit 99`   #=&gt; &quot;oops\n&quot;
 *     $?.exitstatus            #=&gt; 99
 */

static VALUE
rb_f_backquote(obj, str)
    VALUE obj, str;
{
    volatile VALUE port;
    VALUE result;
    rb_io_t *fptr;

    SafeStringValue(str);
    port = pipe_open(str, 0, &quot;r&quot;);
    if (NIL_P(port)) return rb_str_new(0,0);

    GetOpenFile(port, fptr);
    result = read_all(fptr, remain_size(fptr), Qnil);
    rb_io_close(port);

    return result;
}
</pre>
  </div>
</div>
</div>
<div id="M006182" class="method">
  <div id="M006182_title" class="title">
    <b>abort<br />
Kernel::abort<br />
Process::abort<br />
</b>
  </div>
  <div class="description">
  <p>
Terminate execution immediately, effectively by calling <tt><a
href="index.html?a=M006181&name=Kernel.exit">Kernel.exit</a>(1)</tt>. If
<em>msg</em> is given, it is written to STDERR prior to terminating.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006182_source')" id="l_M006182_source">show source</a> ]</p>
  <div id="M006182_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     abort
 *     Kernel::abort
 *     Process::abort
 *  
 *  Terminate execution immediately, effectively by calling
 *  &lt;code&gt;Kernel.exit(1)&lt;/code&gt;. If _msg_ is given, it is written
 *  to STDERR prior to terminating.
 */

VALUE
rb_f_abort(argc, argv)
    int argc;
    VALUE *argv;
{
    rb_secure(4);
    if (argc == 0) {
        if (!NIL_P(ruby_errinfo)) {
            error_print();
        }
        rb_exit(EXIT_FAILURE);
    }
    else {
        VALUE mesg;

        rb_scan_args(argc, argv, &quot;1&quot;, &amp;mesg);
        StringValue(mesg);
        rb_io_puts(1, &amp;mesg, rb_stderr);
        terminate_process(EXIT_FAILURE, mesg);
    }
    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006183" class="method">
  <div id="M006183_title" class="title">
    <b>at_exit { block } &rarr; proc<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>block</em> to a <tt><a
href="index.html?a=C00000198&name=Proc">Proc</a></tt> object (and therefore
binds it at the point of call) and registers it for execution when the
program exits. If multiple handlers are registered, they are executed in
reverse order of registration.
</p>
<pre>
   def do_at_exit(str1)
     at_exit { print str1 }
   end
   at_exit { puts &quot;cruel world&quot; }
   do_at_exit(&quot;goodbye &quot;)
   exit
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   goodbye cruel world
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006183_source')" id="l_M006183_source">show source</a> ]</p>
  <div id="M006183_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     at_exit { block } -&gt; proc
 *  
 *  Converts _block_ to a +Proc+ object (and therefore
 *  binds it at the point of call) and registers it for execution when
 *  the program exits. If multiple handlers are registered, they are
 *  executed in reverse order of registration.
 *     
 *     def do_at_exit(str1)
 *       at_exit { print str1 }
 *     end
 *     at_exit { puts &quot;cruel world&quot; }
 *     do_at_exit(&quot;goodbye &quot;)
 *     exit
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     goodbye cruel world
 */

static VALUE
rb_f_at_exit()
{
    VALUE proc;

    if (!rb_block_given_p()) {
        rb_raise(rb_eArgError, &quot;called without a block&quot;);
    }
    proc = rb_block_proc();
    rb_set_end_proc(call_end_proc, proc);
    return proc;
}
</pre>
  </div>
</div>
</div>
<div id="M006194" class="method">
  <div id="M006194_title" class="title">
    <b>autoload(module, filename)   => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Registers <em>filename</em> to be loaded (using <tt>Kernel::require</tt>)
the first time that <em>module</em> (which may be a <tt><a
href="index.html?a=M006218&name=String">String</a></tt> or a symbol) is
accessed.
</p>
<pre>
   autoload(:MyModule, &quot;/usr/local/lib/modules/my_module.rb&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006194_source')" id="l_M006194_source">show source</a> ]</p>
  <div id="M006194_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     autoload(module, filename)   =&gt; nil
 *  
 *  Registers _filename_ to be loaded (using &lt;code&gt;Kernel::require&lt;/code&gt;) 
 *  the first time that _module_ (which may be a &lt;code&gt;String&lt;/code&gt; or
 *  a symbol) is accessed.
 *     
 *     autoload(:MyModule, &quot;/usr/local/lib/modules/my_module.rb&quot;)
 */

static VALUE
rb_f_autoload(obj, sym, file)
    VALUE obj;
    VALUE sym;
    VALUE file;
{
    if (NIL_P(ruby_cbase)) {
        rb_raise(rb_eTypeError, &quot;no class/module for autoload target&quot;);
    }
    return rb_mod_autoload(ruby_cbase, sym, file);
}
</pre>
  </div>
</div>
</div>
<div id="M006195" class="method">
  <div id="M006195_title" class="title">
    <b>autoload(module, filename)   => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Registers <em>filename</em> to be loaded (using <tt>Kernel::require</tt>)
the first time that <em>module</em> (which may be a <tt><a
href="index.html?a=M006218&name=String">String</a></tt> or a symbol) is
accessed.
</p>
<pre>
   autoload(:MyModule, &quot;/usr/local/lib/modules/my_module.rb&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006195_source')" id="l_M006195_source">show source</a> ]</p>
  <div id="M006195_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     autoload(module, filename)   =&gt; nil
 *
 *  Registers _filename_ to be loaded (using &lt;code&gt;Kernel::require&lt;/code&gt;)
 *  the first time that _module_ (which may be a &lt;code&gt;String&lt;/code&gt; or
 *  a symbol) is accessed.
 *
 *     autoload(:MyModule, &quot;/usr/local/lib/modules/my_module.rb&quot;)
 */

static VALUE
rb_f_autoload_p(obj, sym)
    VALUE obj;
    VALUE sym;
{
    /* use ruby_cbase as same as rb_f_autoload. */
    if (NIL_P(ruby_cbase)) {
        return Qfalse;
    }
    return rb_mod_autoload_p(ruby_cbase, sym);
}
</pre>
  </div>
</div>
</div>
<div id="M006198" class="method">
  <div id="M006198_title" class="title">
    <b>binding &rarr; a_binding<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a <tt><a
href="index.html?a=C00000021&name=Binding">Binding</a></tt> object,
describing the variable and method bindings at the point of call. This
object can be used when calling <tt>eval</tt> to execute the evaluated
command in this environment. Also see the description of class <tt><a
href="index.html?a=C00000021&name=Binding">Binding</a></tt>.
</p>
<pre>
   def getBinding(param)
     return binding
   end
   b = getBinding(&quot;hello&quot;)
   eval(&quot;param&quot;, b)   #=&gt; &quot;hello&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006198_source')" id="l_M006198_source">show source</a> ]</p>
  <div id="M006198_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     binding -&gt; a_binding
 *  
 *  Returns a +Binding+ object, describing the variable and
 *  method bindings at the point of call. This object can be used when
 *  calling +eval+ to execute the evaluated command in this
 *  environment. Also see the description of class +Binding+.
 *     
 *     def getBinding(param)
 *       return binding
 *     end
 *     b = getBinding(&quot;hello&quot;)
 *     eval(&quot;param&quot;, b)   #=&gt; &quot;hello&quot;
 */

static VALUE
rb_f_binding(self)
    VALUE self;
{
    struct BLOCK *data, *p;
    struct RVarmap *vars;
    VALUE bind;

    PUSH_BLOCK(0,0);
    bind = Data_Make_Struct(rb_cBinding,struct BLOCK,blk_mark,blk_free,data);
    *data = *ruby_block;

    data-&gt;orig_thread = rb_thread_current();
    data-&gt;wrapper = ruby_wrapper;
    data-&gt;iter = rb_f_block_given_p();
    frame_dup(&amp;data-&gt;frame);
    if (ruby_frame-&gt;prev) {
        data-&gt;frame.last_func = ruby_frame-&gt;prev-&gt;last_func;
        data-&gt;frame.last_class = ruby_frame-&gt;prev-&gt;last_class;
        data-&gt;frame.orig_func = ruby_frame-&gt;prev-&gt;orig_func;
    }

    if (data-&gt;iter) {
        blk_copy_prev(data);
    }
    else {
        data-&gt;prev = 0;
    }

    for (p = data; p; p = p-&gt;prev) {
        for (vars = p-&gt;dyna_vars; vars; vars = vars-&gt;next) {
            if (FL_TEST(vars, DVAR_DONT_RECYCLE)) break;
            FL_SET(vars, DVAR_DONT_RECYCLE);
        }
    }
    scope_dup(data-&gt;scope);
    POP_BLOCK();

    return bind;
}
</pre>
  </div>
</div>
</div>
<div id="M006175" class="method">
  <div id="M006175_title" class="title">
    <b>block_given?   => true or false<br />
iterator?      => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <tt>yield</tt> would execute a block in the
current context. The <tt>iterator?</tt> form is mildly deprecated.
</p>
<pre>
   def try
     if block_given?
       yield
     else
       &quot;no block&quot;
     end
   end
   try                  #=&gt; &quot;no block&quot;
   try { &quot;hello&quot; }      #=&gt; &quot;hello&quot;
   try do &quot;hello&quot; end   #=&gt; &quot;hello&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006175_source')" id="l_M006175_source">show source</a> ]</p>
  <div id="M006175_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     block_given?   =&gt; true or false
 *     iterator?      =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;yield&lt;/code&gt; would execute a
 *  block in the current context. The &lt;code&gt;iterator?&lt;/code&gt; form
 *  is mildly deprecated.
 *     
 *     def try
 *       if block_given?
 *         yield
 *       else
 *         &quot;no block&quot;
 *       end
 *     end
 *     try                  #=&gt; &quot;no block&quot;
 *     try { &quot;hello&quot; }      #=&gt; &quot;hello&quot;
 *     try do &quot;hello&quot; end   #=&gt; &quot;hello&quot;
 */


static VALUE
rb_f_block_given_p()
{
    if (ruby_frame-&gt;prev &amp;&amp; ruby_frame-&gt;prev-&gt;iter == ITER_CUR &amp;&amp; ruby_block)
        return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M006199" class="method">
  <div id="M006199_title" class="title">
    <b>callcc {|cont| block }   =>  obj<br />
</b>
  </div>
  <div class="description">
  <p>
Generates a <tt><a
href="index.html?a=C00000267&name=Continuation">Continuation</a></tt>
object, which it passes to the associated block. Performing a
<em>cont</em><tt>.call</tt> will cause the <tt>callcc</tt> to return (as
will falling through the end of the block). The value returned by the
<tt>callcc</tt> is the value of the block, or the value passed to
<em>cont</em><tt>.call</tt>. See class <tt><a
href="index.html?a=C00000267&name=Continuation">Continuation</a></tt> for
more details. Also see <tt>Kernel::throw</tt> for an alternative mechanism
for unwinding a call stack.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006199_source')" id="l_M006199_source">show source</a> ]</p>
  <div id="M006199_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     callcc {|cont| block }   =&gt;  obj
 *  
 *  Generates a &lt;code&gt;Continuation&lt;/code&gt; object, which it passes to the
 *  associated block. Performing a &lt;em&gt;cont&lt;/em&gt;&lt;code&gt;.call&lt;/code&gt; will
 *  cause the &lt;code&gt;callcc&lt;/code&gt; to return (as will falling through the
 *  end of the block). The value returned by the &lt;code&gt;callcc&lt;/code&gt; is
 *  the value of the block, or the value passed to
 *  &lt;em&gt;cont&lt;/em&gt;&lt;code&gt;.call&lt;/code&gt;. See class &lt;code&gt;Continuation&lt;/code&gt; 
 *  for more details. Also see &lt;code&gt;Kernel::throw&lt;/code&gt; for
 *  an alternative mechanism for unwinding a call stack.
 */

static VALUE
rb_callcc(self)
    VALUE self;
{
    volatile VALUE cont;
    rb_thread_t th;
    volatile rb_thread_t th_save;
    struct tag *tag;
    struct RVarmap *vars;

    THREAD_ALLOC(th);
    cont = Data_Wrap_Struct(rb_cCont, thread_mark, thread_free, th);

    scope_dup(ruby_scope);
    for (tag=prot_tag; tag; tag=tag-&gt;prev) {
        scope_dup(tag-&gt;scope);
    }
    th-&gt;thread = curr_thread-&gt;thread;
    th-&gt;thgroup = cont_protect;

    for (vars = ruby_dyna_vars; vars; vars = vars-&gt;next) {
        if (FL_TEST(vars, DVAR_DONT_RECYCLE)) break;
        FL_SET(vars, DVAR_DONT_RECYCLE);
    }
    th_save = th;
    if (THREAD_SAVE_CONTEXT(th)) {
        return th_save-&gt;result;
    }
    else {
        return rb_yield(cont);
    }
}
</pre>
  </div>
</div>
</div>
<div id="M006180" class="method">
  <div id="M006180_title" class="title">
    <b>caller(start=1)    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the current execution stack&#8212;an array containing strings in
the form ``<em>file:line</em>&#8217;&#8217; or ``<em>file:line: in
`method&#8217;</em>&#8217;&#8217;. The optional <em>start</em> parameter
determines the number of initial stack entries to omit from the result.
</p>
<pre>
   def a(skip)
     caller(skip)
   end
   def b(skip)
     a(skip)
   end
   def c(skip)
     b(skip)
   end
   c(0)   #=&gt; [&quot;prog:2:in `a'&quot;, &quot;prog:5:in `b'&quot;, &quot;prog:8:in `c'&quot;, &quot;prog:10&quot;]
   c(1)   #=&gt; [&quot;prog:5:in `b'&quot;, &quot;prog:8:in `c'&quot;, &quot;prog:11&quot;]
   c(2)   #=&gt; [&quot;prog:8:in `c'&quot;, &quot;prog:12&quot;]
   c(3)   #=&gt; [&quot;prog:13&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006180_source')" id="l_M006180_source">show source</a> ]</p>
  <div id="M006180_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     caller(start=1)    =&gt; array
 *  
 *  Returns the current execution stack---an array containing strings in
 *  the form ``&lt;em&gt;file:line&lt;/em&gt;'' or ``&lt;em&gt;file:line: in
 *  `method'&lt;/em&gt;''. The optional _start_ parameter
 *  determines the number of initial stack entries to omit from the
 *  result.
 *     
 *     def a(skip)
 *       caller(skip)
 *     end
 *     def b(skip)
 *       a(skip)
 *     end
 *     def c(skip)
 *       b(skip)
 *     end
 *     c(0)   #=&gt; [&quot;prog:2:in `a'&quot;, &quot;prog:5:in `b'&quot;, &quot;prog:8:in `c'&quot;, &quot;prog:10&quot;]
 *     c(1)   #=&gt; [&quot;prog:5:in `b'&quot;, &quot;prog:8:in `c'&quot;, &quot;prog:11&quot;]
 *     c(2)   #=&gt; [&quot;prog:8:in `c'&quot;, &quot;prog:12&quot;]
 *     c(3)   #=&gt; [&quot;prog:13&quot;]
 */

static VALUE
rb_f_caller(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE level;
    int lev;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;level);

    if (NIL_P(level)) lev = 1;
    else lev = NUM2INT(level);
    if (lev &lt; 0) rb_raise(rb_eArgError, &quot;negative level (%d)&quot;, lev);

    return backtrace(lev);
}
</pre>
  </div>
</div>
</div>
<div id="M006184" class="method">
  <div id="M006184_title" class="title">
    <b>catch(symbol) {| | block }  > obj<br />
</b>
  </div>
  <div class="description">
  <p>
<tt>catch</tt> executes its block. If a <tt>throw</tt> is executed, Ruby
searches up its stack for a <tt>catch</tt> block with a tag corresponding
to the <tt>throw</tt>&#8217;s <em>symbol</em>. If found, that block is
terminated, and <tt>catch</tt> returns the value given to <tt>throw</tt>.
If <tt>throw</tt> is not called, the block terminates normally, and the
value of <tt>catch</tt> is the value of the last expression evaluated.
<tt>catch</tt> expressions may be nested, and the <tt>throw</tt> call need
not be in lexical scope.
</p>
<pre>
   def routine(n)
     puts n
     throw :done if n &lt;= 0
     routine(n-1)
   end

   catch(:done) { routine(3) }
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   3
   2
   1
   0
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006184_source')" id="l_M006184_source">show source</a> ]</p>
  <div id="M006184_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     catch(symbol) {| | block }  &gt; obj
 *  
 *  +catch+ executes its block. If a +throw+ is
 *  executed, Ruby searches up its stack for a +catch+ block
 *  with a tag corresponding to the +throw+'s
 *  _symbol_. If found, that block is terminated, and
 *  +catch+ returns the value given to +throw+. If
 *  +throw+ is not called, the block terminates normally, and
 *  the value of +catch+ is the value of the last expression
 *  evaluated. +catch+ expressions may be nested, and the
 *  +throw+ call need not be in lexical scope.
 *     
 *     def routine(n)
 *       puts n
 *       throw :done if n &lt;= 0
 *       routine(n-1)
 *     end
 *     
 *     
 *     catch(:done) { routine(3) }
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     3
 *     2
 *     1
 *     0
 */

static VALUE
rb_f_catch(dmy, tag)
    VALUE dmy, tag;
{
    int state;
    VALUE val = Qnil;           /* OK */

    tag = ID2SYM(rb_to_id(tag));
    PUSH_TAG(tag);
    if ((state = EXEC_TAG()) == 0) {
        val = rb_yield_0(tag, 0, 0, 0, Qfalse);
    }
    else if (state == TAG_THROW &amp;&amp; tag == prot_tag-&gt;dst) {
        val = prot_tag-&gt;retval;
        state = 0;
    }
    POP_TAG();
    if (state) JUMP_TAG(state);

    return val;
}
</pre>
  </div>
</div>
</div>
<div id="M006234" class="method">
  <div id="M006234_title" class="title">
    <b>chomp            => $_<br />
chomp(string)    => $_<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_ = $_.chomp(<em>string</em>)</tt>. See <tt><a
href="index.html?a=M000806&name=String#chomp">String#chomp</a></tt>.
</p>
<pre>
   $_ = &quot;now\n&quot;
   chomp         #=&gt; &quot;now&quot;
   $_            #=&gt; &quot;now&quot;
   chomp &quot;ow&quot;    #=&gt; &quot;n&quot;
   $_            #=&gt; &quot;n&quot;
   chomp &quot;xxx&quot;   #=&gt; &quot;n&quot;
   $_            #=&gt; &quot;n&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006234_source')" id="l_M006234_source">show source</a> ]</p>
  <div id="M006234_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     chomp            =&gt; $_
 *     chomp(string)    =&gt; $_
 *  
 *  Equivalent to &lt;code&gt;$_ = $_.chomp(&lt;em&gt;string&lt;/em&gt;)&lt;/code&gt;. See
 *  &lt;code&gt;String#chomp&lt;/code&gt;.
 *     
 *     $_ = &quot;now\n&quot;
 *     chomp         #=&gt; &quot;now&quot;
 *     $_            #=&gt; &quot;now&quot;
 *     chomp &quot;ow&quot;    #=&gt; &quot;n&quot;
 *     $_            #=&gt; &quot;n&quot;
 *     chomp &quot;xxx&quot;   #=&gt; &quot;n&quot;
 *     $_            #=&gt; &quot;n&quot;
 */

static VALUE
rb_f_chomp(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE str = uscore_get();
    VALUE dup = rb_str_dup(str);

    if (NIL_P(rb_str_chomp_bang(argc, argv, dup)))
        return str;
    rb_lastline_set(dup);
    return dup;
}
</pre>
  </div>
</div>
</div>
<div id="M006235" class="method">
  <div id="M006235_title" class="title">
    <b>chomp!             => $_ or nil<br />
chomp!(string)     => $_ or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.chomp!(<em>string</em>)</tt>. See <tt><a
href="index.html?a=M000806&name=String#chomp">String#chomp</a>!</tt>
</p>
<pre>
   $_ = &quot;now\n&quot;
   chomp!       #=&gt; &quot;now&quot;
   $_           #=&gt; &quot;now&quot;
   chomp! &quot;x&quot;   #=&gt; nil
   $_           #=&gt; &quot;now&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006235_source')" id="l_M006235_source">show source</a> ]</p>
  <div id="M006235_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     chomp!             =&gt; $_ or nil
 *     chomp!(string)     =&gt; $_ or nil
 *  
 *  Equivalent to &lt;code&gt;$_.chomp!(&lt;em&gt;string&lt;/em&gt;)&lt;/code&gt;. See
 *  &lt;code&gt;String#chomp!&lt;/code&gt;
 *     
 *     $_ = &quot;now\n&quot;
 *     chomp!       #=&gt; &quot;now&quot;
 *     $_           #=&gt; &quot;now&quot;
 *     chomp! &quot;x&quot;   #=&gt; nil
 *     $_           #=&gt; &quot;now&quot;
 */

static VALUE
rb_f_chomp_bang(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_chomp_bang(argc, argv, uscore_get());
}
</pre>
  </div>
</div>
</div>
<div id="M006232" class="method">
  <div id="M006232_title" class="title">
    <b>chop   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>($_.dup).chop!</tt>, except <tt>nil</tt> is never
returned. See <tt><a
href="index.html?a=M000805&name=String#chop">String#chop</a>!</tt>.
</p>
<pre>
   a  =  &quot;now\r\n&quot;
   $_ = a
   chop   #=&gt; &quot;now&quot;
   $_     #=&gt; &quot;now&quot;
   chop   #=&gt; &quot;no&quot;
   chop   #=&gt; &quot;n&quot;
   chop   #=&gt; &quot;&quot;
   chop   #=&gt; &quot;&quot;
   a      #=&gt; &quot;now\r\n&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006232_source')" id="l_M006232_source">show source</a> ]</p>
  <div id="M006232_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     chop   =&gt; string
 *  
 *  Equivalent to &lt;code&gt;($_.dup).chop!&lt;/code&gt;, except &lt;code&gt;nil&lt;/code&gt;
 *  is never returned. See &lt;code&gt;String#chop!&lt;/code&gt;.
 *     
 *     a  =  &quot;now\r\n&quot;
 *     $_ = a
 *     chop   #=&gt; &quot;now&quot;
 *     $_     #=&gt; &quot;now&quot;
 *     chop   #=&gt; &quot;no&quot;
 *     chop   #=&gt; &quot;n&quot;
 *     chop   #=&gt; &quot;&quot;
 *     chop   #=&gt; &quot;&quot;
 *     a      #=&gt; &quot;now\r\n&quot;
 */

static VALUE
rb_f_chop()
{
    VALUE str = uscore_get();

    if (RSTRING(str)-&gt;len &gt; 0) {
        str = rb_str_dup(str);
        rb_str_chop_bang(str);
        rb_lastline_set(str);
    }
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M006233" class="method">
  <div id="M006233_title" class="title">
    <b>chop!    => $_ or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.chop!</tt>.
</p>
<pre>
   a  = &quot;now\r\n&quot;
   $_ = a
   chop!   #=&gt; &quot;now&quot;
   chop!   #=&gt; &quot;no&quot;
   chop!   #=&gt; &quot;n&quot;
   chop!   #=&gt; &quot;&quot;
   chop!   #=&gt; nil
   $_      #=&gt; &quot;&quot;
   a       #=&gt; &quot;&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006233_source')" id="l_M006233_source">show source</a> ]</p>
  <div id="M006233_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     chop!    =&gt; $_ or nil
 *  
 *  Equivalent to &lt;code&gt;$_.chop!&lt;/code&gt;.
 *     
 *     a  = &quot;now\r\n&quot;
 *     $_ = a
 *     chop!   #=&gt; &quot;now&quot;
 *     chop!   #=&gt; &quot;no&quot;
 *     chop!   #=&gt; &quot;n&quot;
 *     chop!   #=&gt; &quot;&quot;
 *     chop!   #=&gt; nil
 *     $_      #=&gt; &quot;&quot;
 *     a       #=&gt; &quot;&quot;
 */

static VALUE
rb_f_chop_bang(str)
    VALUE str;
{
    return rb_str_chop_bang(uscore_get());
}
</pre>
  </div>
</div>
</div>
<div id="M006173" class="method">
  <div id="M006173_title" class="title">
    <b>eval(string [, binding [, filename [,lineno]]])  => obj<br />
</b>
  </div>
  <div class="description">
  <p>
Evaluates the Ruby expression(s) in <em>string</em>. If <em>binding</em> is
given, the evaluation is performed in its context. The binding may be a
<tt><a href="index.html?a=C00000021&name=Binding">Binding</a></tt> object
or a <tt><a href="index.html?a=C00000198&name=Proc">Proc</a></tt> object.
If the optional <em>filename</em> and <em>lineno</em> parameters are
present, they will be used when reporting syntax errors.
</p>
<pre>
   def getBinding(str)
     return binding
   end
   str = &quot;hello&quot;
   eval &quot;str + ' Fred'&quot;                      #=&gt; &quot;hello Fred&quot;
   eval &quot;str + ' Fred'&quot;, getBinding(&quot;bye&quot;)   #=&gt; &quot;bye Fred&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006173_source')" id="l_M006173_source">show source</a> ]</p>
  <div id="M006173_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     eval(string [, binding [, filename [,lineno]]])  =&gt; obj
 *  
 *  Evaluates the Ruby expression(s) in &lt;em&gt;string&lt;/em&gt;. If
 *  &lt;em&gt;binding&lt;/em&gt; is given, the evaluation is performed in its
 *  context. The binding may be a &lt;code&gt;Binding&lt;/code&gt; object or a
 *  &lt;code&gt;Proc&lt;/code&gt; object. If the optional &lt;em&gt;filename&lt;/em&gt; and
 *  &lt;em&gt;lineno&lt;/em&gt; parameters are present, they will be used when
 *  reporting syntax errors.
 *     
 *     def getBinding(str)
 *       return binding
 *     end
 *     str = &quot;hello&quot;
 *     eval &quot;str + ' Fred'&quot;                      #=&gt; &quot;hello Fred&quot;
 *     eval &quot;str + ' Fred'&quot;, getBinding(&quot;bye&quot;)   #=&gt; &quot;bye Fred&quot;
 */

static VALUE
rb_f_eval(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE src, scope, vfile, vline;
    const char *file = &quot;(eval)&quot;;
    int line = 1;

    rb_scan_args(argc, argv, &quot;13&quot;, &amp;src, &amp;scope, &amp;vfile, &amp;vline);
    if (ruby_safe_level &gt;= 4) {
        StringValue(src);
        if (!NIL_P(scope) &amp;&amp; !OBJ_TAINTED(scope)) {
            rb_raise(rb_eSecurityError, &quot;Insecure: can't modify trusted binding&quot;);
        }
    }
    else {
        SafeStringValue(src);
    }
    if (argc &gt;= 3) {
        StringValue(vfile);
    }
    if (argc &gt;= 4) {
        line = NUM2INT(vline);
    }

    if (!NIL_P(vfile)) file = RSTRING(vfile)-&gt;ptr;
    if (NIL_P(scope) &amp;&amp; ruby_frame-&gt;prev) {
        struct FRAME *prev;
        VALUE val;

        prev = ruby_frame;
        PUSH_FRAME();
        *ruby_frame = *prev-&gt;prev;
        ruby_frame-&gt;prev = prev;
        val = eval(self, src, scope, file, line);
        POP_FRAME();

        return val;
    }
    return eval(self, src, scope, file, line);
}
</pre>
  </div>
</div>
</div>
<div id="M006220" class="method">
  <div id="M006220_title" class="title">
    <b>exec(command [, arg, ...])<br />
</b>
  </div>
  <div class="description">
  <p>
Replaces the current process by running the given external
<em>command</em>. If <tt>exec</tt> is given a single argument, that
argument is taken as a line that is subject to shell expansion before being
executed. If multiple arguments are given, the second and subsequent
arguments are passed as parameters to <em>command</em> with no shell
expansion. If the first argument is a two-element array, the first element
is the command to be executed, and the second argument is used as the
<tt>argv[0]</tt> value, which may show up in process listings. In MSDOS
environments, the command is executed in a subshell; otherwise, one of the
<tt>exec(2)</tt> system calls is used, so the running command may inherit
some of the environment of the original program (including open file
descriptors).
</p>
<pre>
   exec &quot;echo *&quot;       # echoes list of files in current directory
   # never get here

   exec &quot;echo&quot;, &quot;*&quot;    # echoes an asterisk
   # never get here
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006220_source')" id="l_M006220_source">show source</a> ]</p>
  <div id="M006220_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     exec(command [, arg, ...])
 *
 *  Replaces the current process by running the given external _command_.
 *  If +exec+ is given a single argument, that argument is
 *  taken as a line that is subject to shell expansion before being
 *  executed. If multiple arguments are given, the second and subsequent
 *  arguments are passed as parameters to _command_ with no shell
 *  expansion. If the first argument is a two-element array, the first
 *  element is the command to be executed, and the second argument is
 *  used as the &lt;code&gt;argv[0]&lt;/code&gt; value, which may show up in process
 *  listings. In MSDOS environments, the command is executed in a
 *  subshell; otherwise, one of the &lt;code&gt;exec(2)&lt;/code&gt; system calls is
 *  used, so the running command may inherit some of the environment of
 *  the original program (including open file descriptors).
 *
 *     exec &quot;echo *&quot;       # echoes list of files in current directory
 *     # never get here
 *
 *
 *     exec &quot;echo&quot;, &quot;*&quot;    # echoes an asterisk
 *     # never get here
 */

VALUE
rb_f_exec(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE prog = 0;
    VALUE tmp;
    struct rb_exec_arg earg;

    if (argc == 0) {
        rb_last_status = Qnil;
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    tmp = rb_check_array_type(argv[0]);
    if (!NIL_P(tmp)) {
        if (RARRAY(tmp)-&gt;len != 2) {
            rb_raise(rb_eArgError, &quot;wrong first argument&quot;);
        }
        prog = RARRAY(tmp)-&gt;ptr[0];
        argv[0] = RARRAY(tmp)-&gt;ptr[1];
        SafeStringValue(prog);
    }
    proc_prepare_args(&amp;earg, argc, argv, prog);
    proc_exec_args((VALUE)&amp;earg);
    rb_sys_fail(RSTRING(argv[0])-&gt;ptr);
    return Qnil;                /* dummy */
}
</pre>
  </div>
</div>
</div>
<div id="M006181" class="method">
  <div id="M006181_title" class="title">
    <b>exit(integer=0)<br />
Kernel::exit(integer=0)<br />
Process::exit(integer=0)<br />
</b>
  </div>
  <div class="description">
  <p>
Initiates the termination of the Ruby script by raising the <tt><a
href="index.html?a=C00000098&name=SystemExit">SystemExit</a></tt>
exception. This exception may be caught. The optional parameter is used to
return a status code to the invoking environment.
</p>
<pre>
   begin
     exit
     puts &quot;never get here&quot;
   rescue SystemExit
     puts &quot;rescued a SystemExit exception&quot;
   end
   puts &quot;after begin block&quot;
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   rescued a SystemExit exception
   after begin block
</pre>
<p>
Just prior to termination, Ruby executes any <tt><a
href="index.html?a=M006183&name=at_exit">at_exit</a></tt> functions (see
Kernel::at_exit) and runs any object finalizers (see
ObjectSpace::define_finalizer).
</p>
<pre>
   at_exit { puts &quot;at_exit function&quot; }
   ObjectSpace.define_finalizer(&quot;string&quot;,  proc { puts &quot;in finalizer&quot; })
   exit
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   at_exit function
   in finalizer
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006181_source')" id="l_M006181_source">show source</a> ]</p>
  <div id="M006181_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     exit(integer=0)
 *     Kernel::exit(integer=0)
 *     Process::exit(integer=0)
 *  
 *  Initiates the termination of the Ruby script by raising the
 *  &lt;code&gt;SystemExit&lt;/code&gt; exception. This exception may be caught. The
 *  optional parameter is used to return a status code to the invoking
 *  environment.
 *     
 *     begin
 *       exit
 *       puts &quot;never get here&quot;
 *     rescue SystemExit
 *       puts &quot;rescued a SystemExit exception&quot;
 *     end
 *     puts &quot;after begin block&quot;
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     rescued a SystemExit exception
 *     after begin block
 *     
 *  Just prior to termination, Ruby executes any &lt;code&gt;at_exit&lt;/code&gt; functions
 *  (see Kernel::at_exit) and runs any object finalizers (see
 *  ObjectSpace::define_finalizer).
 *     
 *     at_exit { puts &quot;at_exit function&quot; }
 *     ObjectSpace.define_finalizer(&quot;string&quot;,  proc { puts &quot;in finalizer&quot; })
 *     exit
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     at_exit function
 *     in finalizer
 */

VALUE
rb_f_exit(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE status;
    int istatus;

    rb_secure(4);
    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;status) == 1) {
        switch (status) {
          case Qtrue:
            istatus = EXIT_SUCCESS;
            break;
          case Qfalse:
            istatus = EXIT_FAILURE;
            break;
          default:
            istatus = NUM2INT(status);
#if EXIT_SUCCESS != 0
            if (istatus == 0) istatus = EXIT_SUCCESS;
#endif
            break;
        }
    }
    else {
        istatus = EXIT_SUCCESS;
    }
    rb_exit(istatus);
    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006222" class="method">
  <div id="M006222_title" class="title">
    <b>Process.exit!(fixnum=-1)<br />
</b>
  </div>
  <div class="description">
  <p>
Exits the process immediately. No exit handlers are run. <em>fixnum</em> is
returned to the underlying system as the exit status.
</p>
<pre>
   Process.exit!(0)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006222_source')" id="l_M006222_source">show source</a> ]</p>
  <div id="M006222_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Process.exit!(fixnum=-1)
 *
 *  Exits the process immediately. No exit handlers are
 *  run. &lt;em&gt;fixnum&lt;/em&gt; is returned to the underlying system as the
 *  exit status.
 *
 *     Process.exit!(0)
 */

static VALUE
rb_f_exit_bang(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE status;
    int istatus;

    rb_secure(4);
    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;status) == 1) {
        switch (status) {
          case Qtrue:
            istatus = EXIT_SUCCESS;
            break;
          case Qfalse:
            istatus = EXIT_FAILURE;
            break;
          default:
            istatus = NUM2INT(status);
            break;
        }
    }
    else {
        istatus = EXIT_FAILURE;
    }
    _exit(istatus);

    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006179" class="method">
  <div id="M006179_title" class="title">
    <b>raise<br />
raise(string)<br />
raise(exception [, string [, array]])<br />
fail<br />
fail(string)<br />
fail(exception [, string [, array]])<br />
</b>
  </div>
  <div class="description">
  <p>
With no arguments, raises the exception in <tt>$!</tt> or raises a <tt><a
href="index.html?a=C00000218&name=RuntimeError">RuntimeError</a></tt> if
<tt>$!</tt> is <tt>nil</tt>. With a single <tt><a
href="index.html?a=M006218&name=String">String</a></tt> argument, raises a
<tt><a
href="index.html?a=C00000218&name=RuntimeError">RuntimeError</a></tt> with
the string as a message. Otherwise, the first parameter should be the name
of an <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> class (or
an object that returns an <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> object when
sent an <tt>exception</tt> message). The optional second parameter sets the
message associated with the exception, and the third parameter is an array
of callback information. Exceptions are caught by the <tt>rescue</tt>
clause of <tt>begin...end</tt> blocks.
</p>
<pre>
   raise &quot;Failed to create socket&quot;
   raise ArgumentError, &quot;No parameters&quot;, caller
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006179_source')" id="l_M006179_source">show source</a> ]</p>
  <div id="M006179_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     raise
 *     raise(string)
 *     raise(exception [, string [, array]])
 *     fail
 *     fail(string)
 *     fail(exception [, string [, array]])
 *  
 *  With no arguments, raises the exception in &lt;code&gt;$!&lt;/code&gt; or raises
 *  a &lt;code&gt;RuntimeError&lt;/code&gt; if &lt;code&gt;$!&lt;/code&gt; is +nil+.
 *  With a single +String+ argument, raises a
 *  +RuntimeError+ with the string as a message. Otherwise,
 *  the first parameter should be the name of an +Exception+
 *  class (or an object that returns an +Exception+ object when sent
 *  an +exception+ message). The optional second parameter sets the
 *  message associated with the exception, and the third parameter is an
 *  array of callback information. Exceptions are caught by the
 *  +rescue+ clause of &lt;code&gt;begin...end&lt;/code&gt; blocks.
 *     
 *     raise &quot;Failed to create socket&quot;
 *     raise ArgumentError, &quot;No parameters&quot;, caller
 */

static VALUE
rb_f_raise(argc, argv)
    int argc;
    VALUE *argv;
{
    rb_raise_jump(rb_make_exception(argc, argv));
    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006221" class="method">
  <div id="M006221_title" class="title">
    <b>Kernel.fork  [{ block }]   => fixnum or nil<br />
Process.fork [{ block }]   => fixnum or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a subprocess. If a block is specified, that block is run in the
subprocess, and the subprocess terminates with a status of zero. Otherwise,
the <tt>fork</tt> call returns twice, once in the parent, returning the
process ID of the child, and once in the child, returning <em>nil</em>. The
child process can exit using <tt><a
href="index.html?a=M006181&name=Kernel.exit">Kernel.exit</a>!</tt> to avoid
running any <tt><a
href="index.html?a=M006183&name=at_exit">at_exit</a></tt> functions. The
parent process should use <tt><a
href="index.html?a=M003127&name=Process.wait">Process.wait</a></tt> to
collect the termination statuses of its children or use <tt><a
href="index.html?a=M003132&name=Process.detach">Process.detach</a></tt> to
register disinterest in their status; otherwise, the operating system may
accumulate zombie processes.
</p>
<p>
The thread calling fork is the only thread in the created child process.
fork doesn&#8217;t copy other threads.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006221_source')" id="l_M006221_source">show source</a> ]</p>
  <div id="M006221_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Kernel.fork  [{ block }]   =&gt; fixnum or nil
 *     Process.fork [{ block }]   =&gt; fixnum or nil
 *
 *  Creates a subprocess. If a block is specified, that block is run
 *  in the subprocess, and the subprocess terminates with a status of
 *  zero. Otherwise, the +fork+ call returns twice, once in
 *  the parent, returning the process ID of the child, and once in
 *  the child, returning _nil_. The child process can exit using
 *  &lt;code&gt;Kernel.exit!&lt;/code&gt; to avoid running any
 *  &lt;code&gt;at_exit&lt;/code&gt; functions. The parent process should
 *  use &lt;code&gt;Process.wait&lt;/code&gt; to collect the termination statuses
 *  of its children or use &lt;code&gt;Process.detach&lt;/code&gt; to register
 *  disinterest in their status; otherwise, the operating system
 *  may accumulate zombie processes.
 *
 *  The thread calling fork is the only thread in the created child process.
 *  fork doesn't copy other threads.
 */

static VALUE
rb_f_fork(obj)
    VALUE obj;
{
#if !defined(__human68k__) &amp;&amp; !defined(_WIN32) &amp;&amp; !defined(__MACOS__) &amp;&amp; !defined(__EMX__) &amp;&amp; !defined(__VMS)
    int pid;

    rb_secure(2);

#ifndef __VMS
    fflush(stdout);
    fflush(stderr);
#endif

    switch (pid = fork()) {
      case 0:
#ifdef linux
        after_exec();
#endif
        rb_thread_atfork();
        if (rb_block_given_p()) {
            int status;

            rb_protect(rb_yield, Qundef, &amp;status);
            ruby_stop(status);
        }
        return Qnil;

      case -1:
        rb_sys_fail(&quot;fork(2)&quot;);
        return Qnil;

      default:
        return INT2FIX(pid);
    }
#else
    rb_notimplement();
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M006215" class="method">
  <div id="M006215_title" class="title">
    <b>format(format_string [, arguments...] )   => string<br />
sprintf(format_string [, arguments...] )  => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the string resulting from applying <em>format_string</em> to any
additional arguments. Within the format string, any characters other than
format sequences are copied to the result. A format sequence consists of a
percent sign, followed by optional flags, width, and precision indicators,
then terminated with a field type character. The field type controls how
the corresponding <tt>sprintf</tt> argument is to be interpreted, while the
flags modify that interpretation. The field type characters are listed in
the table at the end of this section. The flag characters are:
</p>
<pre>
  Flag     | Applies to   | Meaning
  ---------+--------------+-----------------------------------------
  space    | bdeEfgGiouxX | Leave a space at the start of
           |              | positive numbers.
  ---------+--------------+-----------------------------------------
  (digit)$ | all          | Specifies the absolute argument number
           |              | for this field. Absolute and relative
           |              | argument numbers cannot be mixed in a
           |              | sprintf string.
  ---------+--------------+-----------------------------------------
   #       | beEfgGoxX    | Use an alternative format. For the
           |              | conversions `o', `x', `X', and `b',
           |              | prefix the result with ``0'', ``0x'', ``0X'',
           |              |  and ``0b'', respectively. For `e',
           |              | `E', `f', `g', and 'G', force a decimal
           |              | point to be added, even if no digits follow.
           |              | For `g' and 'G', do not remove trailing zeros.
  ---------+--------------+-----------------------------------------
  +        | bdeEfgGiouxX | Add a leading plus sign to positive numbers.
  ---------+--------------+-----------------------------------------
  -        | all          | Left-justify the result of this conversion.
  ---------+--------------+-----------------------------------------
  0 (zero) | bdeEfgGiouxX | Pad with zeros, not spaces.
  ---------+--------------+-----------------------------------------
  *        | all          | Use the next argument as the field width.
           |              | If negative, left-justify the result. If the
           |              | asterisk is followed by a number and a dollar
           |              | sign, use the indicated argument as the width.
</pre>
<p>
The field width is an optional integer, followed optionally by a period and
a precision. The width specifies the minimum number of characters that will
be written to the result for this field. For numeric fields, the precision
controls the number of decimal places displayed. For string fields, the
precision determines the maximum number of characters to be copied from the
string. (Thus, the format sequence <tt>%10.10s</tt> will always contribute
exactly ten characters to the result.)
</p>
<p>
The field types are:
</p>
<pre>
    Field |  Conversion
    ------+--------------------------------------------------------------
      b   | Convert argument as a binary number.
      c   | Argument is the numeric code for a single character.
      d   | Convert argument as a decimal number.
      E   | Equivalent to `e', but uses an uppercase E to indicate
          | the exponent.
      e   | Convert floating point argument into exponential notation
          | with one digit before the decimal point. The precision
          | determines the number of fractional digits (defaulting to six).
      f   | Convert floating point argument as [-]ddd.ddd,
          |  where the precision determines the number of digits after
          | the decimal point.
      G   | Equivalent to `g', but use an uppercase `E' in exponent form.
      g   | Convert a floating point number using exponential form
          | if the exponent is less than -4 or greater than or
          | equal to the precision, or in d.dddd form otherwise.
      i   | Identical to `d'.
      o   | Convert argument as an octal number.
      p   | The valuing of argument.inspect.
      s   | Argument is a string to be substituted. If the format
          | sequence contains a precision, at most that many characters
          | will be copied.
      u   | Treat argument as an unsigned decimal number. Negative integers
          | are displayed as a 32 bit two's complement plus one for the
          | underlying architecture; that is, 2 ** 32 + n.  However, since
          | Ruby has no inherent limit on bits used to represent the
          | integer, this value is preceded by two dots (..) in order to
          | indicate a infinite number of leading sign bits.
      X   | Convert argument as a hexadecimal number using uppercase
          | letters. Negative numbers will be displayed with two
          | leading periods (representing an infinite string of
          | leading 'FF's.
      x   | Convert argument as a hexadecimal number.
          | Negative numbers will be displayed with two
          | leading periods (representing an infinite string of
          | leading 'ff's.
</pre>
<p>
Examples:
</p>
<pre>
   sprintf(&quot;%d %04x&quot;, 123, 123)               #=&gt; &quot;123 007b&quot;
   sprintf(&quot;%08b '%4s'&quot;, 123, 123)            #=&gt; &quot;01111011 ' 123'&quot;
   sprintf(&quot;%1$*2$s %2$d %1$s&quot;, &quot;hello&quot;, 8)   #=&gt; &quot;   hello 8 hello&quot;
   sprintf(&quot;%1$*2$s %2$d&quot;, &quot;hello&quot;, -8)       #=&gt; &quot;hello    -8&quot;
   sprintf(&quot;%+g:% g:%-g&quot;, 1.23, 1.23, 1.23)   #=&gt; &quot;+1.23: 1.23:1.23&quot;
   sprintf(&quot;%u&quot;, -123)                        #=&gt; &quot;..4294967173&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006215_source')" id="l_M006215_source">show source</a> ]</p>
  <div id="M006215_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     format(format_string [, arguments...] )   =&gt; string
 *     sprintf(format_string [, arguments...] )  =&gt; string
 *  
 *  Returns the string resulting from applying &lt;i&gt;format_string&lt;/i&gt; to
 *  any additional arguments. Within the format string, any characters
 *  other than format sequences are copied to the result. A format
 *  sequence consists of a percent sign, followed by optional flags,
 *  width, and precision indicators, then terminated with a field type
 *  character. The field type controls how the corresponding
 *  &lt;code&gt;sprintf&lt;/code&gt; argument is to be interpreted, while the flags
 *  modify that interpretation. The field type characters are listed
 *  in the table at the end of this section. The flag characters are:
 *
 *    Flag     | Applies to   | Meaning
 *    ---------+--------------+-----------------------------------------
 *    space    | bdeEfgGiouxX | Leave a space at the start of 
 *             |              | positive numbers.
 *    ---------+--------------+-----------------------------------------
 *    (digit)$ | all          | Specifies the absolute argument number
 *             |              | for this field. Absolute and relative
 *             |              | argument numbers cannot be mixed in a
 *             |              | sprintf string.
 *    ---------+--------------+-----------------------------------------
 *     #       | beEfgGoxX    | Use an alternative format. For the
 *             |              | conversions `o', `x', `X', and `b', 
 *             |              | prefix the result with ``0'', ``0x'', ``0X'',
 *             |              |  and ``0b'', respectively. For `e',
 *             |              | `E', `f', `g', and 'G', force a decimal
 *             |              | point to be added, even if no digits follow.
 *             |              | For `g' and 'G', do not remove trailing zeros.
 *    ---------+--------------+-----------------------------------------
 *    +        | bdeEfgGiouxX | Add a leading plus sign to positive numbers.
 *    ---------+--------------+-----------------------------------------
 *    -        | all          | Left-justify the result of this conversion.
 *    ---------+--------------+-----------------------------------------
 *    0 (zero) | bdeEfgGiouxX | Pad with zeros, not spaces.
 *    ---------+--------------+-----------------------------------------
 *    *        | all          | Use the next argument as the field width. 
 *             |              | If negative, left-justify the result. If the
 *             |              | asterisk is followed by a number and a dollar 
 *             |              | sign, use the indicated argument as the width.
 *
 *     
 *  The field width is an optional integer, followed optionally by a
 *  period and a precision. The width specifies the minimum number of
 *  characters that will be written to the result for this field. For
 *  numeric fields, the precision controls the number of decimal places
 *  displayed. For string fields, the precision determines the maximum
 *  number of characters to be copied from the string. (Thus, the format
 *  sequence &lt;code&gt;%10.10s&lt;/code&gt; will always contribute exactly ten
 *  characters to the result.)
 *
 *  The field types are:
 *
 *      Field |  Conversion
 *      ------+--------------------------------------------------------------
 *        b   | Convert argument as a binary number.
 *        c   | Argument is the numeric code for a single character.
 *        d   | Convert argument as a decimal number.
 *        E   | Equivalent to `e', but uses an uppercase E to indicate
 *            | the exponent.
 *        e   | Convert floating point argument into exponential notation 
 *            | with one digit before the decimal point. The precision
 *            | determines the number of fractional digits (defaulting to six).
 *        f   | Convert floating point argument as [-]ddd.ddd, 
 *            |  where the precision determines the number of digits after
 *            | the decimal point.
 *        G   | Equivalent to `g', but use an uppercase `E' in exponent form.
 *        g   | Convert a floating point number using exponential form
 *            | if the exponent is less than -4 or greater than or
 *            | equal to the precision, or in d.dddd form otherwise.
 *        i   | Identical to `d'.
 *        o   | Convert argument as an octal number.
 *        p   | The valuing of argument.inspect.
 *        s   | Argument is a string to be substituted. If the format
 *            | sequence contains a precision, at most that many characters
 *            | will be copied.
 *        u   | Treat argument as an unsigned decimal number. Negative integers
 *            | are displayed as a 32 bit two's complement plus one for the
 *            | underlying architecture; that is, 2 ** 32 + n.  However, since
 *            | Ruby has no inherent limit on bits used to represent the
 *            | integer, this value is preceded by two dots (..) in order to
 *            | indicate a infinite number of leading sign bits.
 *        X   | Convert argument as a hexadecimal number using uppercase
 *            | letters. Negative numbers will be displayed with two
 *            | leading periods (representing an infinite string of
 *            | leading 'FF's.
 *        x   | Convert argument as a hexadecimal number.
 *            | Negative numbers will be displayed with two
 *            | leading periods (representing an infinite string of
 *            | leading 'ff's.
 *     
 *  Examples:
 *
 *     sprintf(&quot;%d %04x&quot;, 123, 123)               #=&gt; &quot;123 007b&quot;
 *     sprintf(&quot;%08b '%4s'&quot;, 123, 123)            #=&gt; &quot;01111011 ' 123'&quot;
 *     sprintf(&quot;%1$*2$s %2$d %1$s&quot;, &quot;hello&quot;, 8)   #=&gt; &quot;   hello 8 hello&quot;
 *     sprintf(&quot;%1$*2$s %2$d&quot;, &quot;hello&quot;, -8)       #=&gt; &quot;hello    -8&quot;
 *     sprintf(&quot;%+g:% g:%-g&quot;, 1.23, 1.23, 1.23)   #=&gt; &quot;+1.23: 1.23:1.23&quot;
 *     sprintf(&quot;%u&quot;, -123)                        #=&gt; &quot;..4294967173&quot;
 */

VALUE
rb_f_sprintf(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_format(argc - 1, argv + 1, GETNTHARG(0));
}
</pre>
  </div>
</div>
</div>
<div id="M006209" class="method">
  <div id="M006209_title" class="title">
    <b>getc</b>()
  </div>
  <div class="description">
  <p>
obsolete
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006209_source')" id="l_M006209_source">show source</a> ]</p>
  <div id="M006209_source" class="dyn-source">
<pre>
/*
 * obsolete
 */

static VALUE
rb_f_getc()
{
    rb_warn(&quot;getc is obsolete; use STDIN.getc instead&quot;);
    if (TYPE(rb_stdin) != T_FILE) {
        return rb_funcall3(rb_stdin, rb_intern(&quot;getc&quot;), 0, 0);
    }
    return rb_io_getc(rb_stdin);
}
</pre>
  </div>
</div>
</div>
<div id="M006207" class="method">
  <div id="M006207_title" class="title">
    <b>gets(separator=$/)    => string or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Returns (and assigns to <tt>$_</tt>) the next line from the list of files
in <tt>ARGV</tt> (or <tt>$*</tt>), or from standard input if no files are
present on the command line. Returns <tt>nil</tt> at end of file. The
optional argument specifies the record separator. The separator is included
with the contents of each record. A separator of <tt>nil</tt> reads the
entire contents, and a zero-length separator reads the input one paragraph
at a time, where paragraphs are divided by two consecutive newlines. If
multiple filenames are present in <tt>ARGV</tt>, +gets(nil)+ will read the
contents one file at a time.
</p>
<pre>
   ARGV &lt;&lt; &quot;testfile&quot;
   print while gets
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   This is line one
   This is line two
   This is line three
   And so on...
</pre>
<p>
The style of programming using <tt>$_</tt> as an implicit parameter is
gradually losing favor in the Ruby community.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006207_source')" id="l_M006207_source">show source</a> ]</p>
  <div id="M006207_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     gets(separator=$/)    =&gt; string or nil
 *  
 *  Returns (and assigns to &lt;code&gt;$_&lt;/code&gt;) the next line from the list
 *  of files in +ARGV+ (or &lt;code&gt;$*&lt;/code&gt;), or from standard
 *  input if no files are present on the command line. Returns
 *  +nil+ at end of file. The optional argument specifies the
 *  record separator. The separator is included with the contents of
 *  each record. A separator of +nil+ reads the entire
 *  contents, and a zero-length separator reads the input one paragraph
 *  at a time, where paragraphs are divided by two consecutive newlines.
 *  If multiple filenames are present in +ARGV+,
 *  +gets(nil)+ will read the contents one file at a time.
 *     
 *     ARGV &lt;&lt; &quot;testfile&quot;
 *     print while gets
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     This is line one
 *     This is line two
 *     This is line three
 *     And so on...
 *     
 *  The style of programming using &lt;code&gt;$_&lt;/code&gt; as an implicit
 *  parameter is gradually losing favor in the Ruby community.
 */

static VALUE
rb_f_gets(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE line;

    if (!next_argv()) return Qnil;
    if (TYPE(current_file) != T_FILE) {
        line = rb_funcall3(current_file, rb_intern(&quot;gets&quot;), argc, argv);
    }
    else {
        line = argf_getline(argc, argv);
    }
    rb_lastline_set(line);
    return line;
}
</pre>
  </div>
</div>
</div>
<div id="M006186" class="method">
  <div id="M006186_title" class="title">
    <b>global_variables    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns an array of the names of global variables.
</p>
<pre>
   global_variables.grep /std/   #=&gt; [&quot;$stderr&quot;, &quot;$stdout&quot;, &quot;$stdin&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006186_source')" id="l_M006186_source">show source</a> ]</p>
  <div id="M006186_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     global_variables    =&gt; array
 *  
 *  Returns an array of the names of global variables.
 *     
 *     global_variables.grep /std/   #=&gt; [&quot;$stderr&quot;, &quot;$stdout&quot;, &quot;$stdin&quot;]
 */

VALUE
rb_f_global_variables()
{
    VALUE ary = rb_ary_new();
    char buf[4];
    const char *s = &quot;&amp;`'+123456789&quot;;

    st_foreach(rb_global_tbl, gvar_i, ary);
    if (!NIL_P(rb_backref_get())) {
	while (*s) {
	    sprintf(buf, &quot;$%c&quot;, *s++);
	    rb_ary_push(ary, rb_str_new2(buf));
	}
    }
    return ary;
}
</pre>
  </div>
</div>
</div>
<div id="M006229" class="method">
  <div id="M006229_title" class="title">
    <b>gsub(pattern, replacement)    => string<br />
gsub(pattern) {|...| block }  => string<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.gsub&#8230;</tt>, except that <tt>$_</tt> receives the
modified result.
</p>
<pre>
   $_ = &quot;quick brown fox&quot;
   gsub /[aeiou]/, '*'   #=&gt; &quot;q**ck br*wn f*x&quot;
   $_                    #=&gt; &quot;q**ck br*wn f*x&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006229_source')" id="l_M006229_source">show source</a> ]</p>
  <div id="M006229_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     gsub(pattern, replacement)    =&gt; string
 *     gsub(pattern) {|...| block }  =&gt; string
 *  
 *  Equivalent to &lt;code&gt;$_.gsub...&lt;/code&gt;, except that &lt;code&gt;$_&lt;/code&gt;
 *  receives the modified result.
 *     
 *     $_ = &quot;quick brown fox&quot;
 *     gsub /[aeiou]/, '*'   #=&gt; &quot;q**ck br*wn f*x&quot;
 *     $_                    #=&gt; &quot;q**ck br*wn f*x&quot;
 */

static VALUE
rb_f_gsub(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE str = rb_str_dup(uscore_get());

    if (NIL_P(rb_str_gsub_bang(argc, argv, str)))
        return str;
    rb_lastline_set(str);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M006231" class="method">
  <div id="M006231_title" class="title">
    <b>gsub!(pattern, replacement)    => string or nil<br />
gsub!(pattern) {|...| block }  => string or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>Kernel::gsub</tt>, except <tt>nil</tt> is returned if
<tt>$_</tt> is not modified.
</p>
<pre>
   $_ = &quot;quick brown fox&quot;
   gsub! /cat/, '*'   #=&gt; nil
   $_                 #=&gt; &quot;quick brown fox&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006231_source')" id="l_M006231_source">show source</a> ]</p>
  <div id="M006231_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     gsub!(pattern, replacement)    =&gt; string or nil
 *     gsub!(pattern) {|...| block }  =&gt; string or nil
 *  
 *  Equivalent to &lt;code&gt;Kernel::gsub&lt;/code&gt;, except &lt;code&gt;nil&lt;/code&gt; is
 *  returned if &lt;code&gt;$_&lt;/code&gt; is not modified.
 *     
 *     $_ = &quot;quick brown fox&quot;
 *     gsub! /cat/, '*'   #=&gt; nil
 *     $_                 #=&gt; &quot;quick brown fox&quot;
 */

static VALUE
rb_f_gsub_bang(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_gsub_bang(argc, argv, uscore_get());
}
</pre>
  </div>
</div>
</div>
<div id="M006174" class="method">
  <div id="M006174_title" class="title">
    <b>block_given?   => true or false<br />
iterator?      => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <tt>yield</tt> would execute a block in the
current context. The <tt>iterator?</tt> form is mildly deprecated.
</p>
<pre>
   def try
     if block_given?
       yield
     else
       &quot;no block&quot;
     end
   end
   try                  #=&gt; &quot;no block&quot;
   try { &quot;hello&quot; }      #=&gt; &quot;hello&quot;
   try do &quot;hello&quot; end   #=&gt; &quot;hello&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006174_source')" id="l_M006174_source">show source</a> ]</p>
  <div id="M006174_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     block_given?   =&gt; true or false
 *     iterator?      =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;code&gt;yield&lt;/code&gt; would execute a
 *  block in the current context. The &lt;code&gt;iterator?&lt;/code&gt; form
 *  is mildly deprecated.
 *     
 *     def try
 *       if block_given?
 *         yield
 *       else
 *         &quot;no block&quot;
 *       end
 *     end
 *     try                  #=&gt; &quot;no block&quot;
 *     try { &quot;hello&quot; }      #=&gt; &quot;hello&quot;
 *     try do &quot;hello&quot; end   #=&gt; &quot;hello&quot;
 */


static VALUE
rb_f_block_given_p()
{
    if (ruby_frame-&gt;prev &amp;&amp; ruby_frame-&gt;prev-&gt;iter == ITER_CUR &amp;&amp; ruby_block)
        return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M006197" class="method">
  <div id="M006197_title" class="title">
    <b>proc   { |...| block }  => a_proc<br />
lambda { |...| block }  => a_proc<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt><a
href="index.html?a=M001449&name=Proc.new">Proc.new</a></tt>, except the
resulting <a href="index.html?a=C00000198&name=Proc">Proc</a> objects check
the number of parameters passed when called.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006197_source')" id="l_M006197_source">show source</a> ]</p>
  <div id="M006197_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   proc   { |...| block }  =&gt; a_proc
 *   lambda { |...| block }  =&gt; a_proc
 *
 * Equivalent to &lt;code&gt;Proc.new&lt;/code&gt;, except the resulting Proc objects
 * check the number of parameters passed when called.
 */

static VALUE
proc_lambda()
{
    return proc_alloc(rb_cProc, Qtrue);
}
</pre>
  </div>
</div>
</div>
<div id="M006192" class="method">
  <div id="M006192_title" class="title">
    <b>load(filename, wrap=false)   => true<br />
</b>
  </div>
  <div class="description">
  <p>
Loads and executes the Ruby program in the file <em>filename</em>. If the
filename does not resolve to an absolute path, the file is searched for in
the library directories listed in <tt>$:</tt>. If the optional
<em>wrap</em> parameter is <tt>true</tt>, the loaded script will be
executed under an anonymous module, protecting the calling program&#8217;s
global namespace. In no circumstance will any local variables in the loaded
file be propagated to the loading environment.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006192_source')" id="l_M006192_source">show source</a> ]</p>
  <div id="M006192_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     load(filename, wrap=false)   =&gt; true
 *  
 *  Loads and executes the Ruby
 *  program in the file _filename_. If the filename does not
 *  resolve to an absolute path, the file is searched for in the library
 *  directories listed in &lt;code&gt;$:&lt;/code&gt;. If the optional _wrap_
 *  parameter is +true+, the loaded script will be executed
 *  under an anonymous module, protecting the calling program's global
 *  namespace. In no circumstance will any local variables in the loaded
 *  file be propagated to the loading environment.
 */


static VALUE
rb_f_load(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE fname, wrap;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;fname, &amp;wrap);
    rb_load(fname, RTEST(wrap));
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M006187" class="method">
  <div id="M006187_title" class="title">
    <b>local_variables    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the names of the current local variables.
</p>
<pre>
   fred = 1
   for i in 1..10
      # ...
   end
   local_variables   #=&gt; [&quot;fred&quot;, &quot;i&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006187_source')" id="l_M006187_source">show source</a> ]</p>
  <div id="M006187_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     local_variables    =&gt; array
 *  
 *  Returns the names of the current local variables.
 *     
 *     fred = 1
 *     for i in 1..10
 *        # ...
 *     end
 *     local_variables   #=&gt; [&quot;fred&quot;, &quot;i&quot;]
 */

static VALUE
rb_f_local_variables()
{
    ID *tbl;
    int n, i;
    VALUE ary = rb_ary_new();
    struct RVarmap *vars;

    tbl = ruby_scope-&gt;local_tbl;
    if (tbl) {
        n = *tbl++;
        for (i=2; i&lt;n; i++) {  /* skip first 2 ($_ and $~) */
            if (!rb_is_local_id(tbl[i])) continue; /* skip flip states */
            rb_ary_push(ary, rb_str_new2(rb_id2name(tbl[i])));
        }
    }

    vars = ruby_dyna_vars;
    while (vars) {
        if (vars-&gt;id &amp;&amp; rb_is_local_id(vars-&gt;id)) { /* skip $_, $~ and flip states */
            rb_ary_push(ary, rb_str_new2(rb_id2name(vars-&gt;id)));
        }
        vars = vars-&gt;next;
    }

    return ary;
}
</pre>
  </div>
</div>
</div>
<div id="M006177" class="method">
  <div id="M006177_title" class="title">
    <b>loop {|| block } <br />
</b>
  </div>
  <div class="description">
  <p>
Repeatedly executes the block.
</p>
<pre>
   loop do
     print &quot;Input: &quot;
     line = gets
     break if !line or line =~ /^qQ/
     # ...
   end
</pre>
<p>
<a href="index.html?a=C00000317&name=StopIteration">StopIteration</a>
raised in the block breaks the loop.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006177_source')" id="l_M006177_source">show source</a> ]</p>
  <div id="M006177_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     loop {|| block } 
 *  
 *  Repeatedly executes the block.
 *     
 *     loop do
 *       print &quot;Input: &quot;
 *       line = gets
 *       break if !line or line =~ /^qQ/
 *       # ...
 *     end
 *
 *  StopIteration raised in the block breaks the loop.
 */

static VALUE
rb_f_loop()
{
    rb_rescue2(loop_i, (VALUE)0, 0, 0, rb_eStopIteration, (VALUE)0);
    return Qnil;                /* dummy */
}
</pre>
  </div>
</div>
</div>
<div id="M006176" class="method">
  <div id="M006176_title" class="title">
    <b>obj.method_missing(symbol [, *args] )   => result<br />
</b>
  </div>
  <div class="description">
  <p>
Invoked by Ruby when <em>obj</em> is sent a message it cannot handle.
<em>symbol</em> is the symbol for the method called, and <em>args</em> are
any arguments that were passed to it. By default, the interpreter raises an
error when this method is called. However, it is possible to override the
method to provide more dynamic behavior. The example below creates a class
<tt>Roman</tt>, which responds to methods with names consisting of roman
numerals, returning the corresponding integer values.
</p>
<pre>
   class Roman
     def romanToInt(str)
       # ...
     end
     def method_missing(methId)
       str = methId.id2name
       romanToInt(str)
     end
   end

   r = Roman.new
   r.iv      #=&gt; 4
   r.xxiii   #=&gt; 23
   r.mm      #=&gt; 2000
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006176_source')" id="l_M006176_source">show source</a> ]</p>
  <div id="M006176_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     obj.method_missing(symbol [, *args] )   =&gt; result
 *  
 *  Invoked by Ruby when &lt;i&gt;obj&lt;/i&gt; is sent a message it cannot handle.
 *  &lt;i&gt;symbol&lt;/i&gt; is the symbol for the method called, and &lt;i&gt;args&lt;/i&gt;
 *  are any arguments that were passed to it. By default, the interpreter
 *  raises an error when this method is called. However, it is possible
 *  to override the method to provide more dynamic behavior.
 *  The example below creates
 *  a class &lt;code&gt;Roman&lt;/code&gt;, which responds to methods with names
 *  consisting of roman numerals, returning the corresponding integer
 *  values.
 *     
 *     class Roman
 *       def romanToInt(str)
 *         # ...
 *       end
 *       def method_missing(methId)
 *         str = methId.id2name
 *         romanToInt(str)
 *       end
 *     end
 *     
 *     r = Roman.new
 *     r.iv      #=&gt; 4
 *     r.xxiii   #=&gt; 23
 *     r.mm      #=&gt; 2000
 */

static VALUE
rb_method_missing(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    ID id;
    VALUE exc = rb_eNoMethodError;
    const char *format = 0;
    NODE *cnode = ruby_current_node;

    if (argc == 0 || !SYMBOL_P(argv[0])) {
        rb_raise(rb_eArgError, &quot;no id given&quot;);
    }

    stack_check();

    id = SYM2ID(argv[0]);

    if (last_call_status &amp; CSTAT_PRIV) {
        format = &quot;private method `%s' called for %s&quot;;
    }
    else if (last_call_status &amp; CSTAT_PROT) {
        format = &quot;protected method `%s' called for %s&quot;;
    }
    else if (last_call_status &amp; CSTAT_VCALL) {
        format = &quot;undefined local variable or method `%s' for %s&quot;;
        exc = rb_eNameError;
    }
    else if (last_call_status &amp; CSTAT_SUPER) {
        format = &quot;super: no superclass method `%s'&quot;;
    }
    if (!format) {
        format = &quot;undefined method `%s' for %s&quot;;
    }

    ruby_current_node = cnode;
    {
        int n = 0;
        VALUE args[3];

        args[n++] = rb_funcall(rb_const_get(exc, rb_intern(&quot;message&quot;)), '!',
                               3, rb_str_new2(format), obj, argv[0]);
        args[n++] = argv[0];
        if (exc == rb_eNoMethodError) {
            args[n++] = rb_ary_new4(argc-1, argv+1);
        }
        exc = rb_class_new_instance(n, args, exc);
        ruby_frame = ruby_frame-&gt;prev; /* pop frame for &quot;method_missing&quot; */
        rb_exc_raise(exc);
    }

    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006202" class="method">
  <div id="M006202_title" class="title">
    <b>open(path [, mode [, perm]] )                => io or nil<br />
open(path [, mode [, perm]] ) {|io| block }  => obj<br />
</b>
  </div>
  <div class="description">
  <p>
Creates an <tt><a href="index.html?a=C00000245&name=IO">IO</a></tt> object
connected to the given stream, file, or subprocess.
</p>
<p>
If <em>path</em> does not start with a pipe character
(``<tt>|</tt>&#8217;&#8217;), treat it as the name of a file to open using
the specified mode (defaulting to ``<tt>r</tt>&#8217;&#8217;). (See the
table of valid modes on page 331.) If a file is being created, its initial
permissions may be set using the integer third parameter.
</p>
<p>
If a block is specified, it will be invoked with the <tt><a
href="index.html?a=C00000276&name=File">File</a></tt> object as a
parameter, and the file will be automatically closed when the block
terminates. The call returns the value of the block.
</p>
<p>
If <em>path</em> starts with a pipe character, a subprocess is created,
connected to the caller by a pair of pipes. The returned <tt><a
href="index.html?a=C00000245&name=IO">IO</a></tt> object may be used to
write to the standard input and read from the standard output of this
subprocess. If the command following the ``<tt>|</tt>&#8217;&#8217; is a
single minus sign, Ruby forks, and this subprocess is connected to the
parent. In the subprocess, the <tt>open</tt> call returns <tt>nil</tt>. If
the command is not ``<tt>-</tt>&#8217;&#8217;, the subprocess runs the
command. If a block is associated with an <tt>open(&quot;|-&quot;)</tt>
call, that block will be run twice&#8212;once in the parent and once in the
child. The block parameter will be an <tt><a
href="index.html?a=C00000245&name=IO">IO</a></tt> object in the parent and
<tt>nil</tt> in the child. The parent&#8217;s <tt><a
href="index.html?a=C00000245&name=IO">IO</a></tt> object will be connected
to the child&#8217;s <tt>$stdin</tt> and <tt>$stdout</tt>. The subprocess
will be terminated at the end of the block.
</p>
<pre>
   open(&quot;testfile&quot;) do |f|
     print f.gets
   end
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   This is line one
</pre>
<p>
Open a subprocess and read its output:
</p>
<pre>
   cmd = open(&quot;|date&quot;)
   print cmd.gets
   cmd.close
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   Wed Apr  9 08:56:31 CDT 2003
</pre>
<p>
Open a subprocess running the same Ruby program:
</p>
<pre>
   f = open(&quot;|-&quot;, &quot;w+&quot;)
   if f == nil
     puts &quot;in Child&quot;
     exit
   else
     puts &quot;Got: #{f.gets}&quot;
   end
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   Got: in Child
</pre>
<p>
Open a subprocess using a block to receive the I/O object:
</p>
<pre>
   open(&quot;|-&quot;) do |f|
     if f == nil
       puts &quot;in Child&quot;
     else
       puts &quot;Got: #{f.gets}&quot;
     end
   end
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   Got: in Child
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006202_source')" id="l_M006202_source">show source</a> ]</p>
  <div id="M006202_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     open(path [, mode [, perm]] )                =&gt; io or nil
 *     open(path [, mode [, perm]] ) {|io| block }  =&gt; obj
 *  
 *  Creates an &lt;code&gt;IO&lt;/code&gt; object connected to the given stream,
 *  file, or subprocess.
 *     
 *  If &lt;i&gt;path&lt;/i&gt; does not start with a pipe character
 *  (``&lt;code&gt;|&lt;/code&gt;''), treat it as the name of a file to open using
 *  the specified mode (defaulting to ``&lt;code&gt;r&lt;/code&gt;''). (See the table
 *  of valid modes on page 331.) If a file is being created, its initial
 *  permissions may be set using the integer third parameter.
 *     
 *  If a block is specified, it will be invoked with the
 *  &lt;code&gt;File&lt;/code&gt; object as a parameter, and the file will be
 *  automatically closed when the block terminates. The call
 *  returns the value of the block.
 *     
 *  If &lt;i&gt;path&lt;/i&gt; starts with a pipe character, a subprocess is
 *  created, connected to the caller by a pair of pipes. The returned
 *  &lt;code&gt;IO&lt;/code&gt; object may be used to write to the standard input
 *  and read from the standard output of this subprocess. If the command
 *  following the ``&lt;code&gt;|&lt;/code&gt;'' is a single minus sign, Ruby forks,
 *  and this subprocess is connected to the parent. In the subprocess,
 *  the &lt;code&gt;open&lt;/code&gt; call returns &lt;code&gt;nil&lt;/code&gt;. If the command
 *  is not ``&lt;code&gt;-&lt;/code&gt;'', the subprocess runs the command. If a
 *  block is associated with an &lt;code&gt;open(&quot;|-&quot;)&lt;/code&gt; call, that block
 *  will be run twice---once in the parent and once in the child. The
 *  block parameter will be an &lt;code&gt;IO&lt;/code&gt; object in the parent and
 *  &lt;code&gt;nil&lt;/code&gt; in the child. The parent's &lt;code&gt;IO&lt;/code&gt; object
 *  will be connected to the child's &lt;code&gt;$stdin&lt;/code&gt; and
 *  &lt;code&gt;$stdout&lt;/code&gt;. The subprocess will be terminated at the end
 *  of the block.
 *     
 *     open(&quot;testfile&quot;) do |f|
 *       print f.gets
 *     end
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     This is line one
 *     
 *  Open a subprocess and read its output:
 *     
 *     cmd = open(&quot;|date&quot;)
 *     print cmd.gets
 *     cmd.close
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     Wed Apr  9 08:56:31 CDT 2003
 *     
 *  Open a subprocess running the same Ruby program:
 *     
 *     f = open(&quot;|-&quot;, &quot;w+&quot;)
 *     if f == nil
 *       puts &quot;in Child&quot;
 *       exit
 *     else
 *       puts &quot;Got: #{f.gets}&quot;
 *     end
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     Got: in Child
 *     
 *  Open a subprocess using a block to receive the I/O object:
 *     
 *     open(&quot;|-&quot;) do |f|
 *       if f == nil
 *         puts &quot;in Child&quot;
 *       else
 *         puts &quot;Got: #{f.gets}&quot;
 *       end
 *     end
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     Got: in Child
 */

static VALUE
rb_f_open(argc, argv)
    int argc;
    VALUE *argv;
{
    if (argc &gt;= 1) {
        char *str = StringValuePtr(argv[0]);

        if (str[0] == '|') {
            VALUE tmp = rb_str_new(str+1, RSTRING(argv[0])-&gt;len-1);
            OBJ_INFECT(tmp, argv[0]);
            argv[0] = tmp;
            return rb_io_s_popen(argc, argv, rb_cIO);
        }
    }
    return rb_io_s_open(argc, argv, rb_cFile);
}
</pre>
  </div>
</div>
</div>
<div id="M006213" class="method">
  <div id="M006213_title" class="title">
    <b>p(obj, ...)    => nil<br />
</b>
  </div>
  <div class="description">
  <p>
For each object, directly writes <em>obj</em>.<tt>inspect</tt> followed by
the current output record separator to the program&#8217;s standard output.
</p>
<pre>
   S = Struct.new(:name, :state)
   s = S['dave', 'TX']
   p s
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   #&lt;S name=&quot;dave&quot;, state=&quot;TX&quot;&gt;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006213_source')" id="l_M006213_source">show source</a> ]</p>
  <div id="M006213_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     p(obj, ...)    =&gt; nil
 *  
 *  For each object, directly writes
 *  _obj_.+inspect+ followed by the current output
 *  record separator to the program's standard output.
 *     
 *     S = Struct.new(:name, :state)
 *     s = S['dave', 'TX']
 *     p s
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     #&lt;S name=&quot;dave&quot;, state=&quot;TX&quot;&gt;
 */

static VALUE
rb_f_p(argc, argv)
    int argc;
    VALUE *argv;
{
    int i;

    for (i=0; i&lt;argc; i++) {
        rb_p(argv[i]);
    }
    if (TYPE(rb_stdout) == T_FILE) {
        rb_io_flush(rb_stdout);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006240" class="method">
  <div id="M006240_title" class="title">
    <b>pretty_inspect</b>()
  </div>
  <div class="description">
  <p>
returns a pretty printed object as a string.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006240_source')" id="l_M006240_source">show source</a> ]</p>
  <div id="M006240_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/pp.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pretty_inspect</span>
51:     <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-keyword kw">self</span>, <span class="ruby-value str">''</span>)
52:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006204" class="method">
  <div id="M006204_title" class="title">
    <b>print(obj, ...)    => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Prints each object in turn to <tt>$stdout</tt>. If the output field
separator (<tt>$,</tt>) is not <tt>nil</tt>, its contents will appear
between each field. If the output record separator (<tt>$\</tt>) is not
<tt>nil</tt>, it will be appended to the output. If no arguments are given,
prints <tt>$_</tt>. Objects that aren&#8217;t strings will be converted by
calling their <tt>to_s</tt> method.
</p>
<pre>
   print &quot;cat&quot;, [1,2,3], 99, &quot;\n&quot;
   $, = &quot;, &quot;
   $\ = &quot;\n&quot;
   print &quot;cat&quot;, [1,2,3], 99
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   cat12399
   cat, 1, 2, 3, 99
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006204_source')" id="l_M006204_source">show source</a> ]</p>
  <div id="M006204_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     print(obj, ...)    =&gt; nil
 *  
 *  Prints each object in turn to &lt;code&gt;$stdout&lt;/code&gt;. If the output
 *  field separator (&lt;code&gt;$,&lt;/code&gt;) is not +nil+, its
 *  contents will appear between each field. If the output record
 *  separator (&lt;code&gt;$\\&lt;/code&gt;) is not +nil+, it will be
 *  appended to the output. If no arguments are given, prints
 *  &lt;code&gt;$_&lt;/code&gt;. Objects that aren't strings will be converted by
 *  calling their &lt;code&gt;to_s&lt;/code&gt; method.
 *     
 *     print &quot;cat&quot;, [1,2,3], 99, &quot;\n&quot;
 *     $, = &quot;, &quot;
 *     $\ = &quot;\n&quot;
 *     print &quot;cat&quot;, [1,2,3], 99
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     cat12399
 *     cat, 1, 2, 3, 99
 */

static VALUE
rb_f_print(argc, argv)
    int argc;
    VALUE *argv;
{
    rb_io_print(argc, argv, rb_stdout);
    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006203" class="method">
  <div id="M006203_title" class="title">
    <b>printf(io, string [, obj ... ] )    => nil<br />
printf(string [, obj ... ] )        => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to:
</p>
<pre>
   io.write(sprintf(string, obj, ...)
</pre>
<p>
or
</p>
<pre>
   $stdout.write(sprintf(string, obj, ...)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006203_source')" id="l_M006203_source">show source</a> ]</p>
  <div id="M006203_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     printf(io, string [, obj ... ] )    =&gt; nil
 *     printf(string [, obj ... ] )        =&gt; nil
 *  
 *  Equivalent to:
 *     io.write(sprintf(string, obj, ...)
 *  or
 *     $stdout.write(sprintf(string, obj, ...)
 */

static VALUE
rb_f_printf(argc, argv)
    int argc;
    VALUE argv[];
{
    VALUE out;

    if (argc == 0) return Qnil;
    if (TYPE(argv[0]) == T_STRING) {
        out = rb_stdout;
    }
    else {
        out = argv[0];
        argv++;
        argc--;
    }
    rb_io_write(out, rb_f_sprintf(argc, argv));

    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006196" class="method">
  <div id="M006196_title" class="title">
    <b>proc   { |...| block }  => a_proc<br />
lambda { |...| block }  => a_proc<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt><a
href="index.html?a=M001449&name=Proc.new">Proc.new</a></tt>, except the
resulting <a href="index.html?a=C00000198&name=Proc">Proc</a> objects check
the number of parameters passed when called.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006196_source')" id="l_M006196_source">show source</a> ]</p>
  <div id="M006196_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   proc   { |...| block }  =&gt; a_proc
 *   lambda { |...| block }  =&gt; a_proc
 *
 * Equivalent to &lt;code&gt;Proc.new&lt;/code&gt;, except the resulting Proc objects
 * check the number of parameters passed when called.
 */

static VALUE
proc_lambda()
{
    return proc_alloc(rb_cProc, Qtrue);
}
</pre>
  </div>
</div>
</div>
<div id="M006205" class="method">
  <div id="M006205_title" class="title">
    <b>putc(int)   => int<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to:
</p>
<pre>
  $stdout.putc(int)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006205_source')" id="l_M006205_source">show source</a> ]</p>
  <div id="M006205_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     putc(int)   =&gt; int
 *  
 *  Equivalent to:
 *
 *    $stdout.putc(int)
 */

static VALUE
rb_f_putc(recv, ch)
    VALUE recv, ch;
{
    return rb_io_putc(rb_stdout, ch);
}
</pre>
  </div>
</div>
</div>
<div id="M006206" class="method">
  <div id="M006206_title" class="title">
    <b>puts(obj, ...)    => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to
</p>
<pre>
    $stdout.puts(obj, ...)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006206_source')" id="l_M006206_source">show source</a> ]</p>
  <div id="M006206_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     puts(obj, ...)    =&gt; nil
 *  
 *  Equivalent to 
 *
 *      $stdout.puts(obj, ...)
 */

static VALUE
rb_f_puts(argc, argv)
    int argc;
    VALUE *argv;
{
    rb_io_puts(argc, argv, rb_stdout);
    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006178" class="method">
  <div id="M006178_title" class="title">
    <b>raise<br />
raise(string)<br />
raise(exception [, string [, array]])<br />
fail<br />
fail(string)<br />
fail(exception [, string [, array]])<br />
</b>
  </div>
  <div class="description">
  <p>
With no arguments, raises the exception in <tt>$!</tt> or raises a <tt><a
href="index.html?a=C00000218&name=RuntimeError">RuntimeError</a></tt> if
<tt>$!</tt> is <tt>nil</tt>. With a single <tt><a
href="index.html?a=M006218&name=String">String</a></tt> argument, raises a
<tt><a
href="index.html?a=C00000218&name=RuntimeError">RuntimeError</a></tt> with
the string as a message. Otherwise, the first parameter should be the name
of an <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> class (or
an object that returns an <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> object when
sent an <tt>exception</tt> message). The optional second parameter sets the
message associated with the exception, and the third parameter is an array
of callback information. Exceptions are caught by the <tt>rescue</tt>
clause of <tt>begin...end</tt> blocks.
</p>
<pre>
   raise &quot;Failed to create socket&quot;
   raise ArgumentError, &quot;No parameters&quot;, caller
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006178_source')" id="l_M006178_source">show source</a> ]</p>
  <div id="M006178_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     raise
 *     raise(string)
 *     raise(exception [, string [, array]])
 *     fail
 *     fail(string)
 *     fail(exception [, string [, array]])
 *  
 *  With no arguments, raises the exception in &lt;code&gt;$!&lt;/code&gt; or raises
 *  a &lt;code&gt;RuntimeError&lt;/code&gt; if &lt;code&gt;$!&lt;/code&gt; is +nil+.
 *  With a single +String+ argument, raises a
 *  +RuntimeError+ with the string as a message. Otherwise,
 *  the first parameter should be the name of an +Exception+
 *  class (or an object that returns an +Exception+ object when sent
 *  an +exception+ message). The optional second parameter sets the
 *  message associated with the exception, and the third parameter is an
 *  array of callback information. Exceptions are caught by the
 *  +rescue+ clause of &lt;code&gt;begin...end&lt;/code&gt; blocks.
 *     
 *     raise &quot;Failed to create socket&quot;
 *     raise ArgumentError, &quot;No parameters&quot;, caller
 */

static VALUE
rb_f_raise(argc, argv)
    int argc;
    VALUE *argv;
{
    rb_raise_jump(rb_make_exception(argc, argv));
    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006226" class="method">
  <div id="M006226_title" class="title">
    <b>rand(max=0)    => number<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>max</em> to an integer using max1 = max<tt>.to_i.abs</tt>. If
the result is zero, returns a pseudorandom floating point number greater
than or equal to 0.0 and less than 1.0. Otherwise, returns a pseudorandom
integer greater than or equal to zero and less than max1.
<tt>Kernel::srand</tt> may be used to ensure repeatable sequences of random
numbers between different runs of the program. Ruby currently uses a
modified Mersenne Twister with a period of 2**19937-1.
</p>
<pre>
   srand 1234                 #=&gt; 0
   [ rand,  rand ]            #=&gt; [0.191519450163469, 0.49766366626136]
   [ rand(10), rand(1000) ]   #=&gt; [6, 817]
   srand 1234                 #=&gt; 1234
   [ rand,  rand ]            #=&gt; [0.191519450163469, 0.49766366626136]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006226_source')" id="l_M006226_source">show source</a> ]</p>
  <div id="M006226_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     rand(max=0)    =&gt; number
 *  
 *  Converts &lt;i&gt;max&lt;/i&gt; to an integer using max1 =
 *  max&lt;code&gt;.to_i.abs&lt;/code&gt;. If the result is zero, returns a
 *  pseudorandom floating point number greater than or equal to 0.0 and
 *  less than 1.0. Otherwise, returns a pseudorandom integer greater
 *  than or equal to zero and less than max1. &lt;code&gt;Kernel::srand&lt;/code&gt;
 *  may be used to ensure repeatable sequences of random numbers between
 *  different runs of the program. Ruby currently uses a modified
 *  Mersenne Twister with a period of 2**19937-1.
 *     
 *     srand 1234                 #=&gt; 0
 *     [ rand,  rand ]            #=&gt; [0.191519450163469, 0.49766366626136]
 *     [ rand(10), rand(1000) ]   #=&gt; [6, 817]
 *     srand 1234                 #=&gt; 1234
 *     [ rand,  rand ]            #=&gt; [0.191519450163469, 0.49766366626136]
 */

static VALUE
rb_f_rand(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE vmax;
    long val, max;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;vmax);
    if (first) {
        rand_init(random_seed());
    }
    switch (TYPE(vmax)) {
      case T_FLOAT:
        if (RFLOAT(vmax)-&gt;value &lt;= LONG_MAX &amp;&amp; RFLOAT(vmax)-&gt;value &gt;= LONG_MIN) {
            max = (long)RFLOAT(vmax)-&gt;value;
            break;
        }
        if (RFLOAT(vmax)-&gt;value &lt; 0)
            vmax = rb_dbl2big(-RFLOAT(vmax)-&gt;value);
        else
            vmax = rb_dbl2big(RFLOAT(vmax)-&gt;value);
        /* fall through */
      case T_BIGNUM:
      bignum:
        {
            struct RBignum *limit = (struct RBignum *)vmax;
            if (!limit-&gt;sign) {
                limit = (struct RBignum *)rb_big_clone(vmax);
                limit-&gt;sign = 1;
            }
            limit = (struct RBignum *)rb_big_minus((VALUE)limit, INT2FIX(1));
            if (FIXNUM_P((VALUE)limit)) {
                if (FIX2LONG((VALUE)limit) == -1)
                    return rb_float_new(rb_genrand_real());
                return LONG2NUM(limited_rand(FIX2LONG((VALUE)limit)));
            }
            return limited_big_rand(limit);
        }
      case T_NIL:
        max = 0;
        break;
      default:
        vmax = rb_Integer(vmax);
        if (TYPE(vmax) == T_BIGNUM) goto bignum;
        /* fall through */
      case T_FIXNUM:
        max = FIX2LONG(vmax);
        break;
    }

    if (max == 0) {
        return rb_float_new(rb_genrand_real());
    }
    if (max &lt; 0) max = -max;
    val = limited_rand(max-1);
    return LONG2NUM(val);
}
</pre>
  </div>
</div>
</div>
<div id="M006208" class="method">
  <div id="M006208_title" class="title">
    <b>readline(separator=$/)   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>Kernel::gets</tt>, except <tt>readline</tt> raises <tt><a
href="index.html?a=C00000298&name=EOFError">EOFError</a></tt> at end of
file.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006208_source')" id="l_M006208_source">show source</a> ]</p>
  <div id="M006208_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     readline(separator=$/)   =&gt; string
 *  
 *  Equivalent to &lt;code&gt;Kernel::gets&lt;/code&gt;, except
 *  +readline+ raises +EOFError+ at end of file.
 */

static VALUE
rb_f_readline(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE line;

    if (!next_argv()) rb_eof_error();
    ARGF_FORWARD(argc, argv);
    line = rb_f_gets(argc, argv);
    if (NIL_P(line)) {
        rb_eof_error();
    }

    return line;
}
</pre>
  </div>
</div>
</div>
<div id="M006211" class="method">
  <div id="M006211_title" class="title">
    <b>readlines(separator=$/)    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns an array containing the lines returned by calling <tt><a
href="index.html?a=M006207&name=Kernel.gets">Kernel.gets</a>(<em>separator</em>)</tt>
until the end of file.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006211_source')" id="l_M006211_source">show source</a> ]</p>
  <div id="M006211_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     readlines(separator=$/)    =&gt; array
 *  
 *  Returns an array containing the lines returned by calling
 *  &lt;code&gt;Kernel.gets(&lt;i&gt;separator&lt;/i&gt;)&lt;/code&gt; until the end of file.
 */

static VALUE
rb_f_readlines(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE line, ary;

    NEXT_ARGF_FORWARD(argc, argv);
    ary = rb_ary_new();
    while (!NIL_P(line = argf_getline(argc, argv))) {
        rb_ary_push(ary, line);
    }

    return ary;
}
</pre>
  </div>
</div>
</div>
<div id="M006193" class="method">
  <div id="M006193_title" class="title">
    <b>require(string)    => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Ruby tries to load the library named <em>string</em>, returning
<tt>true</tt> if successful. If the filename does not resolve to an
absolute path, it will be searched for in the directories listed in
<tt>$:</tt>. If the file has the extension ``.rb&#8217;&#8217;, it is
loaded as a source file; if the extension is ``.so&#8217;&#8217;,
``.o&#8217;&#8217;, or ``.dll&#8217;&#8217;, or whatever the default shared
library extension is on the current platform, Ruby loads the shared library
as a Ruby extension. Otherwise, Ruby tries adding ``.rb&#8217;&#8217;,
``.so&#8217;&#8217;, and so on to the name. The name of the loaded feature
is added to the array in <tt>$&quot;</tt>. A feature will not be loaded if
it&#8217;s name already appears in <tt>$&quot;</tt>. However, the file name
is not converted to an absolute path, so that ``<tt>require
&#8216;a&#8217;;require &#8217;./a&#8217;</tt>&#8217;&#8217; will load
<tt>a.rb</tt> twice.
</p>
<pre>
   require &quot;my-library.rb&quot;
   require &quot;db-driver&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006193_source')" id="l_M006193_source">show source</a> ]</p>
  <div id="M006193_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     require(string)    =&gt; true or false
 *  
 *  Ruby tries to load the library named _string_, returning
 *  +true+ if successful. If the filename does not resolve to
 *  an absolute path, it will be searched for in the directories listed
 *  in &lt;code&gt;$:&lt;/code&gt;. If the file has the extension ``.rb'', it is
 *  loaded as a source file; if the extension is ``.so'', ``.o'', or
 *  ``.dll'', or whatever the default shared library extension is on
 *  the current platform, Ruby loads the shared library as a Ruby
 *  extension. Otherwise, Ruby tries adding ``.rb'', ``.so'', and so on
 *  to the name. The name of the loaded feature is added to the array in
 *  &lt;code&gt;$&quot;&lt;/code&gt;. A feature will not be loaded if it's name already
 *  appears in &lt;code&gt;$&quot;&lt;/code&gt;. However, the file name is not converted
 *  to an absolute path, so that ``&lt;code&gt;require 'a';require
 *  './a'&lt;/code&gt;'' will load &lt;code&gt;a.rb&lt;/code&gt; twice.
 *     
 *     require &quot;my-library.rb&quot;
 *     require &quot;db-driver&quot;
 */

VALUE
rb_f_require(obj, fname)
    VALUE obj, fname;
{
    return rb_require_safe(fname, ruby_safe_level);
}
</pre>
  </div>
</div>
</div>
<div id="M006237" class="method">
  <div id="M006237_title" class="title">
    <b>scan(pattern)                   => array<br />
scan(pattern) {|///| block }    => $_<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to calling <tt>$_.scan</tt>. See <tt><a
href="index.html?a=M000799&name=String#scan">String#scan</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006237_source')" id="l_M006237_source">show source</a> ]</p>
  <div id="M006237_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     scan(pattern)                   =&gt; array
 *     scan(pattern) {|///| block }    =&gt; $_
 *  
 *  Equivalent to calling &lt;code&gt;$_.scan&lt;/code&gt;. See
 *  &lt;code&gt;String#scan&lt;/code&gt;.
 */

static VALUE
rb_f_scan(self, pat)
    VALUE self, pat;
{
    return rb_str_scan(uscore_get(), pat);
}
</pre>
  </div>
</div>
</div>
<div id="M006210" class="method">
  <div id="M006210_title" class="title">
    <b>IO.select(read_array <br />
[, write_array <br />
[, error_array <br />
[, timeout]]] ) =>  array  or  nil<br />
</b>
  </div>
  <div class="description">
  <p>
See <tt><a
href="index.html?a=M006210&name=Kernel#select">Kernel#select</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006210_source')" id="l_M006210_source">show source</a> ]</p>
  <div id="M006210_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     IO.select(read_array 
 *               [, write_array 
 *               [, error_array 
 *               [, timeout]]] ) =&gt;  array  or  nil
 *  
 *  See &lt;code&gt;Kernel#select&lt;/code&gt;.
 */

static VALUE
rb_f_select(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE read, write, except, timeout, res, list;
    fd_set rset, wset, eset, pset;
    fd_set *rp, *wp, *ep;
    struct timeval *tp, timerec;
    rb_io_t *fptr;
    long i;
    int max = 0, n;
    int interrupt_flag = 0;
    int pending = 0;

    rb_scan_args(argc, argv, &quot;13&quot;, &amp;read, &amp;write, &amp;except, &amp;timeout);
    if (NIL_P(timeout)) {
        tp = 0;
    }
    else {
        timerec = rb_time_interval(timeout);
        tp = &amp;timerec;
    }

    FD_ZERO(&amp;pset);
    if (!NIL_P(read)) {
        Check_Type(read, T_ARRAY);
        rp = &amp;rset;
        FD_ZERO(rp);
        for (i=0; i&lt;RARRAY(read)-&gt;len; i++) {
            GetOpenFile(rb_io_get_io(RARRAY(read)-&gt;ptr[i]), fptr);
            FD_SET(fileno(fptr-&gt;f), rp);
            if (READ_DATA_PENDING(fptr-&gt;f)) { /* check for buffered data */
                pending++;
                FD_SET(fileno(fptr-&gt;f), &amp;pset);
            }
            if (max &lt; fileno(fptr-&gt;f)) max = fileno(fptr-&gt;f);
        }
        if (pending) {         /* no blocking if there's buffered data */
            timerec.tv_sec = timerec.tv_usec = 0;
            tp = &amp;timerec;
        }
    }
    else
        rp = 0;

    if (!NIL_P(write)) {
        Check_Type(write, T_ARRAY);
        wp = &amp;wset;
        FD_ZERO(wp);
        for (i=0; i&lt;RARRAY(write)-&gt;len; i++) {
            GetOpenFile(rb_io_get_io(RARRAY(write)-&gt;ptr[i]), fptr);
            FD_SET(fileno(fptr-&gt;f), wp);
            if (max &lt; fileno(fptr-&gt;f)) max = fileno(fptr-&gt;f);
            if (fptr-&gt;f2) {
                FD_SET(fileno(fptr-&gt;f2), wp);
                if (max &lt; fileno(fptr-&gt;f2)) max = fileno(fptr-&gt;f2);
            }
        }
    }
    else
        wp = 0;

    if (!NIL_P(except)) {
        Check_Type(except, T_ARRAY);
        ep = &amp;eset;
        FD_ZERO(ep);
        for (i=0; i&lt;RARRAY(except)-&gt;len; i++) {
            GetOpenFile(rb_io_get_io(RARRAY(except)-&gt;ptr[i]), fptr);
            FD_SET(fileno(fptr-&gt;f), ep);
            if (max &lt; fileno(fptr-&gt;f)) max = fileno(fptr-&gt;f);
            if (fptr-&gt;f2) {
                FD_SET(fileno(fptr-&gt;f2), ep);
                if (max &lt; fileno(fptr-&gt;f2)) max = fileno(fptr-&gt;f2);
            }
        }
    }
    else {
        ep = 0;
    }

    max++;

    n = rb_thread_select(max, rp, wp, ep, tp);
    if (n &lt; 0) {
        rb_sys_fail(0);
    }
    if (!pending &amp;&amp; n == 0) return Qnil; /* returns nil on timeout */

    res = rb_ary_new2(3);
    rb_ary_push(res, rp?rb_ary_new():rb_ary_new2(0));
    rb_ary_push(res, wp?rb_ary_new():rb_ary_new2(0));
    rb_ary_push(res, ep?rb_ary_new():rb_ary_new2(0));

    if (interrupt_flag == 0) {
        if (rp) {
            list = RARRAY(res)-&gt;ptr[0];
            for (i=0; i&lt; RARRAY(read)-&gt;len; i++) {
                GetOpenFile(rb_io_get_io(RARRAY(read)-&gt;ptr[i]), fptr);
                if (FD_ISSET(fileno(fptr-&gt;f), rp)
                    || FD_ISSET(fileno(fptr-&gt;f), &amp;pset)) {
                    rb_ary_push(list, rb_ary_entry(read, i));
                }
            }
        }

        if (wp) {
            list = RARRAY(res)-&gt;ptr[1];
            for (i=0; i&lt; RARRAY(write)-&gt;len; i++) {
                GetOpenFile(rb_io_get_io(RARRAY(write)-&gt;ptr[i]), fptr);
                if (FD_ISSET(fileno(fptr-&gt;f), wp)) {
                    rb_ary_push(list, rb_ary_entry(write, i));
                }
                else if (fptr-&gt;f2 &amp;&amp; FD_ISSET(fileno(fptr-&gt;f2), wp)) {
                    rb_ary_push(list, rb_ary_entry(write, i));
                }
            }
        }

        if (ep) {
            list = RARRAY(res)-&gt;ptr[2];
            for (i=0; i&lt; RARRAY(except)-&gt;len; i++) {
                GetOpenFile(rb_io_get_io(RARRAY(except)-&gt;ptr[i]), fptr);
                if (FD_ISSET(fileno(fptr-&gt;f), ep)) {
                    rb_ary_push(list, rb_ary_entry(except, i));
                }
                else if (fptr-&gt;f2 &amp;&amp; FD_ISSET(fileno(fptr-&gt;f2), ep)) {
                    rb_ary_push(list, rb_ary_entry(except, i));
                }
            }
        }
    }

    return res;                 /* returns an empty array on interrupt */
}
</pre>
  </div>
</div>
</div>
<div id="M006191" class="method">
  <div id="M006191_title" class="title">
    <b>set_trace_func(proc)    => proc<br />
set_trace_func(nil)     => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Establishes <em>proc</em> as the handler for tracing, or disables tracing
if the parameter is <tt>nil</tt>. <em>proc</em> takes up to six parameters:
an event name, a filename, a line number, an object id, a binding, and the
name of a class. <em>proc</em> is invoked whenever an event occurs. Events
are: <tt>c-call</tt> (call a C-language routine), <tt>c-return</tt> (return
from a C-language routine), <tt>call</tt> (call a Ruby method),
<tt>class</tt> (start a class or module definition), <tt>end</tt> (finish a
class or module definition), <tt>line</tt> (execute code on a new line),
<tt>raise</tt> (raise an exception), and <tt>return</tt> (return from a
Ruby method). Tracing is disabled within the context of <em>proc</em>.
</p>
<pre>
    class Test
    def test
      a = 1
      b = 2
    end
    end

    set_trace_func proc { |event, file, line, id, binding, classname|
       printf &quot;%8s %s:%-2d %10s %8s\n&quot;, event, file, line, id, classname
    }
    t = Test.new
    t.test

      line prog.rb:11               false
    c-call prog.rb:11        new    Class
    c-call prog.rb:11 initialize   Object
  c-return prog.rb:11 initialize   Object
  c-return prog.rb:11        new    Class
      line prog.rb:12               false
      call prog.rb:2        test     Test
      line prog.rb:3        test     Test
      line prog.rb:4        test     Test
    return prog.rb:4        test     Test
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006191_source')" id="l_M006191_source">show source</a> ]</p>
  <div id="M006191_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     set_trace_func(proc)    =&gt; proc
 *     set_trace_func(nil)     =&gt; nil
 *  
 *  Establishes _proc_ as the handler for tracing, or disables
 *  tracing if the parameter is +nil+. _proc_ takes up
 *  to six parameters: an event name, a filename, a line number, an
 *  object id, a binding, and the name of a class. _proc_ is
 *  invoked whenever an event occurs. Events are: &lt;code&gt;c-call&lt;/code&gt;
 *  (call a C-language routine), &lt;code&gt;c-return&lt;/code&gt; (return from a
 *  C-language routine), &lt;code&gt;call&lt;/code&gt; (call a Ruby method),
 *  &lt;code&gt;class&lt;/code&gt; (start a class or module definition),
 *  &lt;code&gt;end&lt;/code&gt; (finish a class or module definition),
 *  &lt;code&gt;line&lt;/code&gt; (execute code on a new line), &lt;code&gt;raise&lt;/code&gt;
 *  (raise an exception), and &lt;code&gt;return&lt;/code&gt; (return from a Ruby
 *  method). Tracing is disabled within the context of _proc_.
 *
 *      class Test
 *      def test
 *        a = 1
 *        b = 2
 *      end
 *      end
 *
 *      set_trace_func proc { |event, file, line, id, binding, classname|
 *         printf &quot;%8s %s:%-2d %10s %8s\n&quot;, event, file, line, id, classname
 *      }
 *      t = Test.new
 *      t.test
 *
 *        line prog.rb:11               false
 *      c-call prog.rb:11        new    Class
 *      c-call prog.rb:11 initialize   Object
 *    c-return prog.rb:11 initialize   Object
 *    c-return prog.rb:11        new    Class
 *        line prog.rb:12               false
 *        call prog.rb:2        test     Test
 *        line prog.rb:3        test     Test
 *        line prog.rb:4        test     Test
 *      return prog.rb:4        test     Test
 */


static VALUE
set_trace_func(obj, trace)
    VALUE obj, trace;
{
    rb_event_hook_t *hook;

    rb_secure(4);
    if (NIL_P(trace)) {
        trace_func = 0;
        rb_remove_event_hook(call_trace_func);
        return Qnil;
    }
    if (!rb_obj_is_proc(trace)) {
        rb_raise(rb_eTypeError, &quot;trace_func needs to be Proc&quot;);
    }
    trace_func = trace;
    for (hook = event_hooks; hook; hook = hook-&gt;next) {
        if (hook-&gt;func == call_trace_func)
            return trace;
    }
    rb_add_event_hook(call_trace_func, RUBY_EVENT_ALL);
    return trace;
}
</pre>
  </div>
</div>
</div>
<div id="M006224" class="method">
  <div id="M006224_title" class="title">
    <b>sleep([duration])    => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Suspends the current thread for <em>duration</em> seconds (which may be any
number, including a <tt><a
href="index.html?a=M006217&name=Float">Float</a></tt> with fractional
seconds). Returns the actual number of seconds slept (rounded), which may
be less than that asked for if another thread calls <tt><a
href="index.html?a=M000429&name=Thread#run">Thread#run</a></tt>. Zero
arguments causes <tt>sleep</tt> to sleep forever.
</p>
<pre>
   Time.new    #=&gt; Wed Apr 09 08:56:32 CDT 2003
   sleep 1.2   #=&gt; 1
   Time.new    #=&gt; Wed Apr 09 08:56:33 CDT 2003
   sleep 1.9   #=&gt; 2
   Time.new    #=&gt; Wed Apr 09 08:56:35 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006224_source')" id="l_M006224_source">show source</a> ]</p>
  <div id="M006224_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     sleep([duration])    =&gt; fixnum
 *
 *  Suspends the current thread for _duration_ seconds (which may be any number,
 *  including a +Float+ with fractional seconds). Returns the actual number of
 *  seconds slept (rounded), which may be less than that asked for if another
 *  thread calls &lt;code&gt;Thread#run&lt;/code&gt;. Zero arguments causes +sleep+ to sleep
 *  forever.
 *
 *     Time.new    #=&gt; Wed Apr 09 08:56:32 CDT 2003
 *     sleep 1.2   #=&gt; 1
 *     Time.new    #=&gt; Wed Apr 09 08:56:33 CDT 2003
 *     sleep 1.9   #=&gt; 2
 *     Time.new    #=&gt; Wed Apr 09 08:56:35 CDT 2003
 */

static VALUE
rb_f_sleep(argc, argv)
    int argc;
    VALUE *argv;
{
    int beg, end;

    beg = time(0);
    if (argc == 0) {
        rb_thread_sleep_forever();
    }
    else if (argc == 1) {
        rb_thread_wait_for(rb_time_interval(argv[0]));
    }
    else {
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    end = time(0) - beg;

    return INT2FIX(end);
}
</pre>
  </div>
</div>
</div>
<div id="M006236" class="method">
  <div id="M006236_title" class="title">
    <b>split([pattern [, limit]])    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.split(<em>pattern</em>, <em>limit</em>)</tt>. See
<tt><a href="index.html?a=M000788&name=String#split">String#split</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006236_source')" id="l_M006236_source">show source</a> ]</p>
  <div id="M006236_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     split([pattern [, limit]])    =&gt; array
 *  
 *  Equivalent to &lt;code&gt;$_.split(&lt;i&gt;pattern&lt;/i&gt;, &lt;i&gt;limit&lt;/i&gt;)&lt;/code&gt;.
 *  See &lt;code&gt;String#split&lt;/code&gt;.
 */

static VALUE
rb_f_split(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_split_m(argc, argv, uscore_get());
}
</pre>
  </div>
</div>
</div>
<div id="M006214" class="method">
  <div id="M006214_title" class="title">
    <b>format(format_string [, arguments...] )   => string<br />
sprintf(format_string [, arguments...] )  => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the string resulting from applying <em>format_string</em> to any
additional arguments. Within the format string, any characters other than
format sequences are copied to the result. A format sequence consists of a
percent sign, followed by optional flags, width, and precision indicators,
then terminated with a field type character. The field type controls how
the corresponding <tt>sprintf</tt> argument is to be interpreted, while the
flags modify that interpretation. The field type characters are listed in
the table at the end of this section. The flag characters are:
</p>
<pre>
  Flag     | Applies to   | Meaning
  ---------+--------------+-----------------------------------------
  space    | bdeEfgGiouxX | Leave a space at the start of
           |              | positive numbers.
  ---------+--------------+-----------------------------------------
  (digit)$ | all          | Specifies the absolute argument number
           |              | for this field. Absolute and relative
           |              | argument numbers cannot be mixed in a
           |              | sprintf string.
  ---------+--------------+-----------------------------------------
   #       | beEfgGoxX    | Use an alternative format. For the
           |              | conversions `o', `x', `X', and `b',
           |              | prefix the result with ``0'', ``0x'', ``0X'',
           |              |  and ``0b'', respectively. For `e',
           |              | `E', `f', `g', and 'G', force a decimal
           |              | point to be added, even if no digits follow.
           |              | For `g' and 'G', do not remove trailing zeros.
  ---------+--------------+-----------------------------------------
  +        | bdeEfgGiouxX | Add a leading plus sign to positive numbers.
  ---------+--------------+-----------------------------------------
  -        | all          | Left-justify the result of this conversion.
  ---------+--------------+-----------------------------------------
  0 (zero) | bdeEfgGiouxX | Pad with zeros, not spaces.
  ---------+--------------+-----------------------------------------
  *        | all          | Use the next argument as the field width.
           |              | If negative, left-justify the result. If the
           |              | asterisk is followed by a number and a dollar
           |              | sign, use the indicated argument as the width.
</pre>
<p>
The field width is an optional integer, followed optionally by a period and
a precision. The width specifies the minimum number of characters that will
be written to the result for this field. For numeric fields, the precision
controls the number of decimal places displayed. For string fields, the
precision determines the maximum number of characters to be copied from the
string. (Thus, the format sequence <tt>%10.10s</tt> will always contribute
exactly ten characters to the result.)
</p>
<p>
The field types are:
</p>
<pre>
    Field |  Conversion
    ------+--------------------------------------------------------------
      b   | Convert argument as a binary number.
      c   | Argument is the numeric code for a single character.
      d   | Convert argument as a decimal number.
      E   | Equivalent to `e', but uses an uppercase E to indicate
          | the exponent.
      e   | Convert floating point argument into exponential notation
          | with one digit before the decimal point. The precision
          | determines the number of fractional digits (defaulting to six).
      f   | Convert floating point argument as [-]ddd.ddd,
          |  where the precision determines the number of digits after
          | the decimal point.
      G   | Equivalent to `g', but use an uppercase `E' in exponent form.
      g   | Convert a floating point number using exponential form
          | if the exponent is less than -4 or greater than or
          | equal to the precision, or in d.dddd form otherwise.
      i   | Identical to `d'.
      o   | Convert argument as an octal number.
      p   | The valuing of argument.inspect.
      s   | Argument is a string to be substituted. If the format
          | sequence contains a precision, at most that many characters
          | will be copied.
      u   | Treat argument as an unsigned decimal number. Negative integers
          | are displayed as a 32 bit two's complement plus one for the
          | underlying architecture; that is, 2 ** 32 + n.  However, since
          | Ruby has no inherent limit on bits used to represent the
          | integer, this value is preceded by two dots (..) in order to
          | indicate a infinite number of leading sign bits.
      X   | Convert argument as a hexadecimal number using uppercase
          | letters. Negative numbers will be displayed with two
          | leading periods (representing an infinite string of
          | leading 'FF's.
      x   | Convert argument as a hexadecimal number.
          | Negative numbers will be displayed with two
          | leading periods (representing an infinite string of
          | leading 'ff's.
</pre>
<p>
Examples:
</p>
<pre>
   sprintf(&quot;%d %04x&quot;, 123, 123)               #=&gt; &quot;123 007b&quot;
   sprintf(&quot;%08b '%4s'&quot;, 123, 123)            #=&gt; &quot;01111011 ' 123'&quot;
   sprintf(&quot;%1$*2$s %2$d %1$s&quot;, &quot;hello&quot;, 8)   #=&gt; &quot;   hello 8 hello&quot;
   sprintf(&quot;%1$*2$s %2$d&quot;, &quot;hello&quot;, -8)       #=&gt; &quot;hello    -8&quot;
   sprintf(&quot;%+g:% g:%-g&quot;, 1.23, 1.23, 1.23)   #=&gt; &quot;+1.23: 1.23:1.23&quot;
   sprintf(&quot;%u&quot;, -123)                        #=&gt; &quot;..4294967173&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006214_source')" id="l_M006214_source">show source</a> ]</p>
  <div id="M006214_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     format(format_string [, arguments...] )   =&gt; string
 *     sprintf(format_string [, arguments...] )  =&gt; string
 *  
 *  Returns the string resulting from applying &lt;i&gt;format_string&lt;/i&gt; to
 *  any additional arguments. Within the format string, any characters
 *  other than format sequences are copied to the result. A format
 *  sequence consists of a percent sign, followed by optional flags,
 *  width, and precision indicators, then terminated with a field type
 *  character. The field type controls how the corresponding
 *  &lt;code&gt;sprintf&lt;/code&gt; argument is to be interpreted, while the flags
 *  modify that interpretation. The field type characters are listed
 *  in the table at the end of this section. The flag characters are:
 *
 *    Flag     | Applies to   | Meaning
 *    ---------+--------------+-----------------------------------------
 *    space    | bdeEfgGiouxX | Leave a space at the start of 
 *             |              | positive numbers.
 *    ---------+--------------+-----------------------------------------
 *    (digit)$ | all          | Specifies the absolute argument number
 *             |              | for this field. Absolute and relative
 *             |              | argument numbers cannot be mixed in a
 *             |              | sprintf string.
 *    ---------+--------------+-----------------------------------------
 *     #       | beEfgGoxX    | Use an alternative format. For the
 *             |              | conversions `o', `x', `X', and `b', 
 *             |              | prefix the result with ``0'', ``0x'', ``0X'',
 *             |              |  and ``0b'', respectively. For `e',
 *             |              | `E', `f', `g', and 'G', force a decimal
 *             |              | point to be added, even if no digits follow.
 *             |              | For `g' and 'G', do not remove trailing zeros.
 *    ---------+--------------+-----------------------------------------
 *    +        | bdeEfgGiouxX | Add a leading plus sign to positive numbers.
 *    ---------+--------------+-----------------------------------------
 *    -        | all          | Left-justify the result of this conversion.
 *    ---------+--------------+-----------------------------------------
 *    0 (zero) | bdeEfgGiouxX | Pad with zeros, not spaces.
 *    ---------+--------------+-----------------------------------------
 *    *        | all          | Use the next argument as the field width. 
 *             |              | If negative, left-justify the result. If the
 *             |              | asterisk is followed by a number and a dollar 
 *             |              | sign, use the indicated argument as the width.
 *
 *     
 *  The field width is an optional integer, followed optionally by a
 *  period and a precision. The width specifies the minimum number of
 *  characters that will be written to the result for this field. For
 *  numeric fields, the precision controls the number of decimal places
 *  displayed. For string fields, the precision determines the maximum
 *  number of characters to be copied from the string. (Thus, the format
 *  sequence &lt;code&gt;%10.10s&lt;/code&gt; will always contribute exactly ten
 *  characters to the result.)
 *
 *  The field types are:
 *
 *      Field |  Conversion
 *      ------+--------------------------------------------------------------
 *        b   | Convert argument as a binary number.
 *        c   | Argument is the numeric code for a single character.
 *        d   | Convert argument as a decimal number.
 *        E   | Equivalent to `e', but uses an uppercase E to indicate
 *            | the exponent.
 *        e   | Convert floating point argument into exponential notation 
 *            | with one digit before the decimal point. The precision
 *            | determines the number of fractional digits (defaulting to six).
 *        f   | Convert floating point argument as [-]ddd.ddd, 
 *            |  where the precision determines the number of digits after
 *            | the decimal point.
 *        G   | Equivalent to `g', but use an uppercase `E' in exponent form.
 *        g   | Convert a floating point number using exponential form
 *            | if the exponent is less than -4 or greater than or
 *            | equal to the precision, or in d.dddd form otherwise.
 *        i   | Identical to `d'.
 *        o   | Convert argument as an octal number.
 *        p   | The valuing of argument.inspect.
 *        s   | Argument is a string to be substituted. If the format
 *            | sequence contains a precision, at most that many characters
 *            | will be copied.
 *        u   | Treat argument as an unsigned decimal number. Negative integers
 *            | are displayed as a 32 bit two's complement plus one for the
 *            | underlying architecture; that is, 2 ** 32 + n.  However, since
 *            | Ruby has no inherent limit on bits used to represent the
 *            | integer, this value is preceded by two dots (..) in order to
 *            | indicate a infinite number of leading sign bits.
 *        X   | Convert argument as a hexadecimal number using uppercase
 *            | letters. Negative numbers will be displayed with two
 *            | leading periods (representing an infinite string of
 *            | leading 'FF's.
 *        x   | Convert argument as a hexadecimal number.
 *            | Negative numbers will be displayed with two
 *            | leading periods (representing an infinite string of
 *            | leading 'ff's.
 *     
 *  Examples:
 *
 *     sprintf(&quot;%d %04x&quot;, 123, 123)               #=&gt; &quot;123 007b&quot;
 *     sprintf(&quot;%08b '%4s'&quot;, 123, 123)            #=&gt; &quot;01111011 ' 123'&quot;
 *     sprintf(&quot;%1$*2$s %2$d %1$s&quot;, &quot;hello&quot;, 8)   #=&gt; &quot;   hello 8 hello&quot;
 *     sprintf(&quot;%1$*2$s %2$d&quot;, &quot;hello&quot;, -8)       #=&gt; &quot;hello    -8&quot;
 *     sprintf(&quot;%+g:% g:%-g&quot;, 1.23, 1.23, 1.23)   #=&gt; &quot;+1.23: 1.23:1.23&quot;
 *     sprintf(&quot;%u&quot;, -123)                        #=&gt; &quot;..4294967173&quot;
 */

VALUE
rb_f_sprintf(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_format(argc - 1, argv + 1, GETNTHARG(0));
}
</pre>
  </div>
</div>
</div>
<div id="M006225" class="method">
  <div id="M006225_title" class="title">
    <b>srand(number=0)    => old_seed<br />
</b>
  </div>
  <div class="description">
  <p>
Seeds the pseudorandom number generator to the value of
<em>number</em>.<tt>to_i.abs</tt>. If <em>number</em> is omitted, seeds the
generator using a combination of the time, the process id, and a sequence
number. (This is also the behavior if <tt>Kernel::rand</tt> is called
without previously calling <tt>srand</tt>, but without the sequence.) By
setting the seed to a known value, scripts can be made deterministic during
testing. The previous seed value is returned. Also see
<tt>Kernel::rand</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006225_source')" id="l_M006225_source">show source</a> ]</p>
  <div id="M006225_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     srand(number=0)    =&gt; old_seed
 *  
 *  Seeds the pseudorandom number generator to the value of
 *  &lt;i&gt;number&lt;/i&gt;.&lt;code&gt;to_i.abs&lt;/code&gt;. If &lt;i&gt;number&lt;/i&gt; is omitted,
 *  seeds the generator using a combination of the time, the
 *  process id, and a sequence number. (This is also the behavior if
 *  &lt;code&gt;Kernel::rand&lt;/code&gt; is called without previously calling
 *  &lt;code&gt;srand&lt;/code&gt;, but without the sequence.) By setting the seed
 *  to a known value, scripts can be made deterministic during testing.
 *  The previous seed value is returned. Also see &lt;code&gt;Kernel::rand&lt;/code&gt;.
 */

static VALUE
rb_f_srand(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE seed, old;

    rb_secure(4);
    if (rb_scan_args(argc, argv, &quot;01&quot;, &amp;seed) == 0) {
        seed = random_seed();
    }
    old = rand_init(seed);

    return old;
}
</pre>
  </div>
</div>
</div>
<div id="M006228" class="method">
  <div id="M006228_title" class="title">
    <b>sub(pattern, replacement)   => $_<br />
sub(pattern) { block }      => $_<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.sub(<em>args</em>)</tt>, except that <tt>$_</tt> will
be updated if substitution occurs.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006228_source')" id="l_M006228_source">show source</a> ]</p>
  <div id="M006228_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     sub(pattern, replacement)   =&gt; $_
 *     sub(pattern) { block }      =&gt; $_
 *  
 *  Equivalent to &lt;code&gt;$_.sub(&lt;i&gt;args&lt;/i&gt;)&lt;/code&gt;, except that
 *  &lt;code&gt;$_&lt;/code&gt; will be updated if substitution occurs.
 */

static VALUE
rb_f_sub(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE str = rb_str_dup(uscore_get());

    if (NIL_P(rb_str_sub_bang(argc, argv, str)))
        return str;
    rb_lastline_set(str);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M006230" class="method">
  <div id="M006230_title" class="title">
    <b>sub!(pattern, replacement)    => $_ or nil<br />
sub!(pattern) {|...| block }  => $_ or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>$_.sub!(<em>args</em>)</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006230_source')" id="l_M006230_source">show source</a> ]</p>
  <div id="M006230_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     sub!(pattern, replacement)    =&gt; $_ or nil
 *     sub!(pattern) {|...| block }  =&gt; $_ or nil
 *  
 *  Equivalent to &lt;code&gt;$_.sub!(&lt;i&gt;args&lt;/i&gt;)&lt;/code&gt;.
 */

static VALUE
rb_f_sub_bang(argc, argv)
    int argc;
    VALUE *argv;
{
    return rb_str_sub_bang(argc, argv, uscore_get());
}
</pre>
  </div>
</div>
</div>
<div id="M006201" class="method">
  <div id="M006201_title" class="title">
    <b>syscall(fixnum [, args...])   => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Calls the operating system function identified by <em>fixnum</em>, passing
in the arguments, which must be either <tt><a
href="index.html?a=M006218&name=String">String</a></tt> objects, or <tt><a
href="index.html?a=M006216&name=Integer">Integer</a></tt> objects that
ultimately fit within a native <tt>long</tt>. Up to nine parameters may be
passed (14 on the Atari-ST). The function identified by <em>fixnum</em> is
system dependent. On some Unix systems, the numbers may be obtained from a
header file called <tt>syscall.h</tt>.
</p>
<pre>
   syscall 4, 1, &quot;hello\n&quot;, 6   # '4' is write(2) on our box
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   hello
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006201_source')" id="l_M006201_source">show source</a> ]</p>
  <div id="M006201_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     syscall(fixnum [, args...])   =&gt; integer
 *  
 *  Calls the operating system function identified by _fixnum_,
 *  passing in the arguments, which must be either +String+
 *  objects, or +Integer+ objects that ultimately fit within
 *  a native +long+. Up to nine parameters may be passed (14
 *  on the Atari-ST). The function identified by _fixnum_ is system
 *  dependent. On some Unix systems, the numbers may be obtained from a
 *  header file called &lt;code&gt;syscall.h&lt;/code&gt;.
 *     
 *     syscall 4, 1, &quot;hello\n&quot;, 6   # '4' is write(2) on our box
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     hello
 */

static VALUE
rb_f_syscall(argc, argv)
    int argc;
    VALUE *argv;
{
#if defined(HAVE_SYSCALL) &amp;&amp; !defined(__CHECKER__)
#ifdef atarist
    unsigned long arg[14]; /* yes, we really need that many ! */
#else
    unsigned long arg[8];
#endif
    int retval = -1;
    int i = 1;
    int items = argc - 1;

    /* This probably won't work on machines where sizeof(long) != sizeof(int)
     * or where sizeof(long) != sizeof(char*).  But such machines will
     * not likely have syscall implemented either, so who cares?
     */

    rb_secure(2);
    if (argc == 0)
        rb_raise(rb_eArgError, &quot;too few arguments for syscall&quot;);
    if (argc &gt; sizeof(arg) / sizeof(arg[0]))
        rb_raise(rb_eArgError, &quot;too many arguments for syscall&quot;);
    arg[0] = NUM2LONG(argv[0]); argv++;
    while (items--) {
        VALUE v = rb_check_string_type(*argv);

        if (!NIL_P(v)) {
            StringValue(v);
            rb_str_modify(v);
            arg[i] = (unsigned long)StringValueCStr(v);
        }
        else {
            arg[i] = (unsigned long)NUM2LONG(*argv);
        }
        argv++;
        i++;
    }
    TRAP_BEG;
    switch (argc) {
      case 1:
        retval = syscall(arg[0]);
        break;
      case 2:
        retval = syscall(arg[0],arg[1]);
        break;
      case 3:
        retval = syscall(arg[0],arg[1],arg[2]);
        break;
      case 4:
        retval = syscall(arg[0],arg[1],arg[2],arg[3]);
        break;
      case 5:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4]);
        break;
      case 6:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5]);
        break;
      case 7:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6]);
        break;
      case 8:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7]);
        break;
#ifdef atarist
      case 9:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8]);
        break;
      case 10:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8], arg[9]);
        break;
      case 11:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8], arg[9], arg[10]);
        break;
      case 12:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8], arg[9], arg[10], arg[11]);
        break;
      case 13:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8], arg[9], arg[10], arg[11], arg[12]);
        break;
      case 14:
        retval = syscall(arg[0],arg[1],arg[2],arg[3],arg[4],arg[5],arg[6],
          arg[7], arg[8], arg[9], arg[10], arg[11], arg[12], arg[13]);
        break;
#endif /* atarist */
    }
    TRAP_END;
    if (retval &lt; 0) rb_sys_fail(0);
    return INT2NUM(retval);
#else
    rb_notimplement();
    return Qnil;                /* not reached */
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M006223" class="method">
  <div id="M006223_title" class="title">
    <b>system(cmd [, arg, ...])    => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Executes <em>cmd</em> in a subshell, returning <tt>true</tt> if the command
was found and ran successfully, <tt>false</tt> otherwise. An error status
is available in <tt>$?</tt>. The arguments are processed in the same way as
for <tt>Kernel::exec</tt>.
</p>
<pre>
   system(&quot;echo *&quot;)
   system(&quot;echo&quot;, &quot;*&quot;)
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   config.h main.rb
   *
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006223_source')" id="l_M006223_source">show source</a> ]</p>
  <div id="M006223_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     system(cmd [, arg, ...])    =&gt; true or false
 *
 *  Executes _cmd_ in a subshell, returning +true+ if
 *  the command was found and ran successfully, +false+
 *  otherwise. An error status is available in &lt;code&gt;$?&lt;/code&gt;. The
 *  arguments are processed in the same way as for
 *  &lt;code&gt;Kernel::exec&lt;/code&gt;.
 *
 *     system(&quot;echo *&quot;)
 *     system(&quot;echo&quot;, &quot;*&quot;)
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     config.h main.rb
 *     *
 */

static VALUE
rb_f_system(argc, argv)
    int argc;
    VALUE *argv;
{
    int status;
#if defined(__EMX__)
    VALUE cmd;

    fflush(stdout);
    fflush(stderr);
    if (argc == 0) {
        rb_last_status = Qnil;
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    if (TYPE(argv[0]) == T_ARRAY) {
        if (RARRAY(argv[0])-&gt;len != 2) {
            rb_raise(rb_eArgError, &quot;wrong first argument&quot;);
        }
        argv[0] = RARRAY(argv[0])-&gt;ptr[0];
    }
    cmd = rb_ary_join(rb_ary_new4(argc, argv), rb_str_new2(&quot; &quot;));

    SafeStringValue(cmd);
    status = do_spawn(RSTRING(cmd)-&gt;ptr);
    last_status_set(status, 0);
#elif defined(__human68k__) || defined(__DJGPP__) || defined(_WIN32)
    volatile VALUE prog = 0;

    fflush(stdout);
    fflush(stderr);
    if (argc == 0) {
        rb_last_status = Qnil;
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    if (TYPE(argv[0]) == T_ARRAY) {
        if (RARRAY(argv[0])-&gt;len != 2) {
            rb_raise(rb_eArgError, &quot;wrong first argument&quot;);
        }
        prog = RARRAY(argv[0])-&gt;ptr[0];
        argv[0] = RARRAY(argv[0])-&gt;ptr[1];
    }

    if (argc == 1 &amp;&amp; prog == 0) {
#if defined(_WIN32)
        SafeStringValue(argv[0]);
        status = do_spawn(P_WAIT, StringValueCStr(argv[0]));
#else
        status = proc_spawn(argv[0]);
#endif
    }
    else {
        status = proc_spawn_n(argc, argv, prog);
    }
#if !defined(_WIN32)
    last_status_set(status == -1 ? 127 : status, 0);
#else
    if (status == -1)
        last_status_set(0x7f &lt;&lt; 8, 0);
#endif
#elif defined(__VMS)
    VALUE cmd;

    if (argc == 0) {
        rb_last_status = Qnil;
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    if (TYPE(argv[0]) == T_ARRAY) {
        if (RARRAY(argv[0])-&gt;len != 2) {
            rb_raise(rb_eArgError, &quot;wrong first argument&quot;);
        }
        argv[0] = RARRAY(argv[0])-&gt;ptr[0];
    }
    cmd = rb_ary_join(rb_ary_new4(argc, argv), rb_str_new2(&quot; &quot;));

    SafeStringValue(cmd);
    status = system(StringValueCStr(cmd));
    last_status_set((status &amp; 0xff) &lt;&lt; 8, 0);
#else
    volatile VALUE prog = 0;
    int pid;
    struct rb_exec_arg earg;
    RETSIGTYPE (*chfunc)(int);

    fflush(stdout);
    fflush(stderr);
    if (argc == 0) {
        rb_last_status = Qnil;
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }

    if (TYPE(argv[0]) == T_ARRAY) {
        if (RARRAY(argv[0])-&gt;len != 2) {
            rb_raise(rb_eArgError, &quot;wrong first argument&quot;);
        }
        prog = RARRAY(argv[0])-&gt;ptr[0];
        argv[0] = RARRAY(argv[0])-&gt;ptr[1];
    }
    proc_prepare_args(&amp;earg, argc, argv, prog);

    chfunc = signal(SIGCHLD, SIG_DFL);
  retry:
    pid = fork();
    if (pid == 0) {
        /* child process */
        rb_thread_atfork();
        rb_protect(proc_exec_args, (VALUE)&amp;earg, NULL);
        _exit(127);
    }
    if (pid &lt; 0) {
        if (errno == EAGAIN) {
            rb_thread_sleep(1);
            goto retry;
        }
    }
    else {
        rb_syswait(pid);
    }
    signal(SIGCHLD, chfunc);
    if (pid &lt; 0) rb_sys_fail(0);
    status = NUM2INT(rb_last_status);
#endif

    if (status == EXIT_SUCCESS) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M006200" class="method">
  <div id="M006200_title" class="title">
    <b>test(int_cmd, file1 [, file2] ) => obj<br />
</b>
  </div>
  <div class="description">
  <pre>
 Uses the integer &lt;i&gt;aCmd&lt;/i&gt; to perform various tests on
 &lt;i&gt;file1&lt;/i&gt; (first table below) or on &lt;i&gt;file1&lt;/i&gt; and
 &lt;i&gt;file2&lt;/i&gt; (second table).

 File tests on a single file:

   Test   Returns   Meaning
    ?A  | Time    | Last access time for file1
    ?b  | boolean | True if file1 is a block device
    ?c  | boolean | True if file1 is a character device
    ?C  | Time    | Last change time for file1
    ?d  | boolean | True if file1 exists and is a directory
    ?e  | boolean | True if file1 exists
    ?f  | boolean | True if file1 exists and is a regular file
    ?g  | boolean | True if file1 has the \CF{setgid} bit
        |         | set (false under NT)
    ?G  | boolean | True if file1 exists and has a group
        |         | ownership equal to the caller's group
    ?k  | boolean | True if file1 exists and has the sticky bit set
    ?l  | boolean | True if file1 exists and is a symbolic link
    ?M  | Time    | Last modification time for file1
    ?o  | boolean | True if file1 exists and is owned by
        |         | the caller's effective uid
    ?O  | boolean | True if file1 exists and is owned by
        |         | the caller's real uid
    ?p  | boolean | True if file1 exists and is a fifo
    ?r  | boolean | True if file1 is readable by the effective
        |         | uid/gid of the caller
    ?R  | boolean | True if file is readable by the real
        |         | uid/gid of the caller
    ?s  | int/nil | If file1 has nonzero size, return the size,
        |         | otherwise return nil
    ?S  | boolean | True if file1 exists and is a socket
    ?u  | boolean | True if file1 has the setuid bit set
    ?w  | boolean | True if file1 exists and is writable by
        |         | the effective uid/gid
    ?W  | boolean | True if file1 exists and is writable by
        |         | the real uid/gid
    ?x  | boolean | True if file1 exists and is executable by
        |         | the effective uid/gid
    ?X  | boolean | True if file1 exists and is executable by
        |         | the real uid/gid
    ?z  | boolean | True if file1 exists and has a zero length
</pre>
<p>
Tests that take two files:
</p>
<pre>
    ?-  | boolean | True if file1 and file2 are identical
    ?=  | boolean | True if the modification times of file1
        |         | and file2 are equal
    ?&lt;  | boolean | True if the modification time of file1
        |         | is prior to that of file2
    ?&gt;  | boolean | True if the modification time of file1
        |         | is after that of file2
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006200_source')" id="l_M006200_source">show source</a> ]</p>
  <div id="M006200_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     test(int_cmd, file1 [, file2] ) =&gt; obj
 *  
 *  Uses the integer &lt;i&gt;aCmd&lt;/i&gt; to perform various tests on
 *  &lt;i&gt;file1&lt;/i&gt; (first table below) or on &lt;i&gt;file1&lt;/i&gt; and
 *  &lt;i&gt;file2&lt;/i&gt; (second table).
 *     
 *  File tests on a single file:
 *
 *    Test   Returns   Meaning
 *     ?A  | Time    | Last access time for file1
 *     ?b  | boolean | True if file1 is a block device
 *     ?c  | boolean | True if file1 is a character device
 *     ?C  | Time    | Last change time for file1
 *     ?d  | boolean | True if file1 exists and is a directory
 *     ?e  | boolean | True if file1 exists
 *     ?f  | boolean | True if file1 exists and is a regular file
 *     ?g  | boolean | True if file1 has the \CF{setgid} bit
 *         |         | set (false under NT)
 *     ?G  | boolean | True if file1 exists and has a group
 *         |         | ownership equal to the caller's group
 *     ?k  | boolean | True if file1 exists and has the sticky bit set
 *     ?l  | boolean | True if file1 exists and is a symbolic link
 *     ?M  | Time    | Last modification time for file1
 *     ?o  | boolean | True if file1 exists and is owned by 
 *         |         | the caller's effective uid
 *     ?O  | boolean | True if file1 exists and is owned by
 *         |         | the caller's real uid
 *     ?p  | boolean | True if file1 exists and is a fifo
 *     ?r  | boolean | True if file1 is readable by the effective
 *         |         | uid/gid of the caller
 *     ?R  | boolean | True if file is readable by the real
 *         |         | uid/gid of the caller
 *     ?s  | int/nil | If file1 has nonzero size, return the size,
 *         |         | otherwise return nil
 *     ?S  | boolean | True if file1 exists and is a socket
 *     ?u  | boolean | True if file1 has the setuid bit set
 *     ?w  | boolean | True if file1 exists and is writable by
 *         |         | the effective uid/gid
 *     ?W  | boolean | True if file1 exists and is writable by
 *         |         | the real uid/gid
 *     ?x  | boolean | True if file1 exists and is executable by
 *         |         | the effective uid/gid
 *     ?X  | boolean | True if file1 exists and is executable by
 *         |         | the real uid/gid
 *     ?z  | boolean | True if file1 exists and has a zero length
 *
 * Tests that take two files:
 *
 *     ?-  | boolean | True if file1 and file2 are identical
 *     ?=  | boolean | True if the modification times of file1
 *         |         | and file2 are equal
 *     ?&lt;  | boolean | True if the modification time of file1
 *         |         | is prior to that of file2
 *     ?&gt;  | boolean | True if the modification time of file1
 *         |         | is after that of file2
 */

static VALUE
rb_f_test(argc, argv)
    int argc;
    VALUE *argv;
{
    int cmd;

    if (argc == 0) rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
#if 0 /* 1.7 behavior? */
    if (argc == 1) {
        return RTEST(argv[0]) ? Qtrue : Qfalse;
    }
#endif
    cmd = NUM2CHR(argv[0]);
    if (cmd == 0) return Qfalse;
    if (strchr(&quot;bcdefgGkloOprRsSuwWxXz&quot;, cmd)) {
        CHECK(1);
        switch (cmd) {
          case 'b':
            return test_b(0, argv[1]);

          case 'c':
            return test_c(0, argv[1]);

          case 'd':
            return test_d(0, argv[1]);

          case 'a':
          case 'e':
            return test_e(0, argv[1]);

          case 'f':
            return test_f(0, argv[1]);

          case 'g':
            return test_sgid(0, argv[1]);

          case 'G':
            return test_grpowned(0, argv[1]);

          case 'k':
            return test_sticky(0, argv[1]);

          case 'l':
            return test_l(0, argv[1]);

          case 'o':
            return test_owned(0, argv[1]);

          case 'O':
            return test_rowned(0, argv[1]);

          case 'p':
            return test_p(0, argv[1]);

          case 'r':
            return test_r(0, argv[1]);

          case 'R':
            return test_R(0, argv[1]);

          case 's':
            return test_s(0, argv[1]);

          case 'S':
            return test_S(0, argv[1]);

          case 'u':
            return test_suid(0, argv[1]);

          case 'w':
            return test_w(0, argv[1]);

          case 'W':
            return test_W(0, argv[1]);

          case 'x':
            return test_x(0, argv[1]);

          case 'X':
            return test_X(0, argv[1]);

          case 'z':
            return test_z(0, argv[1]);
        }
    }

    if (strchr(&quot;MAC&quot;, cmd)) {
        struct stat st;

        CHECK(1);
        if (rb_stat(argv[1], &amp;st) == -1) {
            rb_sys_fail(RSTRING(argv[1])-&gt;ptr);
        }

        switch (cmd) {
          case 'A':
            return rb_time_new(st.st_atime, 0);
          case 'M':
            return rb_time_new(st.st_mtime, 0);
          case 'C':
            return rb_time_new(st.st_ctime, 0);
        }
    }

    if (cmd == '-') {
        CHECK(2);
        return test_identical(0, argv[1], argv[2]);
    }

    if (strchr(&quot;=&lt;&gt;&quot;, cmd)) {
        struct stat st1, st2;

        CHECK(2);
        if (rb_stat(argv[1], &amp;st1) &lt; 0) return Qfalse;
        if (rb_stat(argv[2], &amp;st2) &lt; 0) return Qfalse;

        switch (cmd) {
          case '=':
            if (st1.st_mtime == st2.st_mtime) return Qtrue;
            return Qfalse;

          case '&gt;':
            if (st1.st_mtime &gt; st2.st_mtime) return Qtrue;
            return Qfalse;

          case '&lt;':
            if (st1.st_mtime &lt; st2.st_mtime) return Qtrue;
            return Qfalse;
        }
    }
    /* unknown command */
    rb_raise(rb_eArgError, &quot;unknown command ?%c&quot;, cmd);
    return Qnil;                /* not reached */
}
</pre>
  </div>
</div>
</div>
<div id="M006185" class="method">
  <div id="M006185_title" class="title">
    <b>throw(symbol [, obj])<br />
</b>
  </div>
  <div class="description">
  <p>
Transfers control to the end of the active <tt>catch</tt> block waiting for
<em>symbol</em>. Raises <tt><a
href="index.html?a=C00000001&name=NameError">NameError</a></tt> if there is
no <tt>catch</tt> block for the symbol. The optional second parameter
supplies a return value for the <tt>catch</tt> block, which otherwise
defaults to <tt>nil</tt>. For examples, see <tt>Kernel::catch</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006185_source')" id="l_M006185_source">show source</a> ]</p>
  <div id="M006185_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     throw(symbol [, obj])
 *  
 *  Transfers control to the end of the active +catch+ block
 *  waiting for _symbol_. Raises +NameError+ if there
 *  is no +catch+ block for the symbol. The optional second
 *  parameter supplies a return value for the +catch+ block,
 *  which otherwise defaults to +nil+. For examples, see
 *  &lt;code&gt;Kernel::catch&lt;/code&gt;.
 */

static VALUE
rb_f_throw(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE tag, value;
    struct tag *tt = prot_tag;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;tag, &amp;value);
    tag = ID2SYM(rb_to_id(tag));

    while (tt) {
        if (tt-&gt;tag == tag) {
            tt-&gt;dst = tag;
            tt-&gt;retval = value;
            break;
        }
        if (tt-&gt;tag == PROT_THREAD) {
            rb_raise(rb_eThreadError, &quot;uncaught throw `%s' in thread 0x%lx&quot;,
                     rb_id2name(SYM2ID(tag)),
                     curr_thread);
        }
        tt = tt-&gt;prev;
    }
    if (!tt) {
        rb_name_error(SYM2ID(tag), &quot;uncaught throw `%s'&quot;, rb_id2name(SYM2ID(tag)));
    }
    rb_trap_restore_mask();
    JUMP_TAG(TAG_THROW);
#ifndef __GNUC__
    return Qnil;                /* not reached */
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M006189" class="method">
  <div id="M006189_title" class="title">
    <b>trace_var(symbol, cmd )             => nil<br />
trace_var(symbol) {|val| block }    => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Controls tracing of assignments to global variables. The parameter +symbol_
identifies the variable (as either a string name or a symbol identifier).
<em>cmd</em> (which may be a string or a <tt><a
href="index.html?a=C00000198&name=Proc">Proc</a></tt> object) or block is
executed whenever the variable is assigned. The block or <tt><a
href="index.html?a=C00000198&name=Proc">Proc</a></tt> object receives the
variable&#8217;s new value as a parameter. Also see
<tt>Kernel::untrace_var</tt>.
</p>
<pre>
   trace_var :$_, proc {|v| puts &quot;$_ is now '#{v}'&quot; }
   $_ = &quot;hello&quot;
   $_ = ' there'
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   $_ is now 'hello'
   $_ is now ' there'
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006189_source')" id="l_M006189_source">show source</a> ]</p>
  <div id="M006189_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     trace_var(symbol, cmd )             =&gt; nil
 *     trace_var(symbol) {|val| block }    =&gt; nil
 *  
 *  Controls tracing of assignments to global variables. The parameter
 *  +symbol_ identifies the variable (as either a string name or a
 *  symbol identifier). _cmd_ (which may be a string or a
 *  +Proc+ object) or block is executed whenever the variable
 *  is assigned. The block or +Proc+ object receives the
 *  variable's new value as a parameter. Also see
 *  &lt;code&gt;Kernel::untrace_var&lt;/code&gt;.
 *     
 *     trace_var :$_, proc {|v| puts &quot;$_ is now '#{v}'&quot; }
 *     $_ = &quot;hello&quot;
 *     $_ = ' there'
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     $_ is now 'hello'
 *     $_ is now ' there'
 */

VALUE
rb_f_trace_var(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE var, cmd;
    struct global_entry *entry;
    struct trace_var *trace;

    rb_secure(4);
    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;var, &amp;cmd) == 1) {
	cmd = rb_block_proc();
    }
    if (NIL_P(cmd)) {
	return rb_f_untrace_var(argc, argv);
    }
    entry = rb_global_entry(rb_to_id(var));
    if (OBJ_TAINTED(cmd)) {
	rb_raise(rb_eSecurityError, &quot;Insecure: tainted variable trace&quot;);
    }
    trace = ALLOC(struct trace_var);
    trace-&gt;next = entry-&gt;var-&gt;trace;
    trace-&gt;func = rb_trace_eval;
    trace-&gt;data = cmd;
    trace-&gt;removed = 0;
    entry-&gt;var-&gt;trace = trace;

    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006227" class="method">
  <div id="M006227_title" class="title">
    <b>Signal.trap( signal, proc ) => obj<br />
Signal.trap( signal ) {| | block } => obj<br />
</b>
  </div>
  <div class="description">
  <p>
Specifies the handling of signals. The first parameter is a signal name (a
string such as ``SIGALRM&#8217;&#8217;, ``SIGUSR1&#8217;&#8217;, and so on)
or a signal number. The characters ``SIG&#8217;&#8217; may be omitted from
the signal name. The command or block specifies code to be run when the
signal is raised. If the command is the string ``IGNORE&#8217;&#8217; or
``SIG_IGN&#8217;&#8217;, the signal will be ignored. If the command is
``DEFAULT&#8217;&#8217; or ``SIG_DFL&#8217;&#8217;, the operating
system&#8217;s default handler will be invoked. If the command is
``EXIT&#8217;&#8217;, the script will be terminated by the signal.
Otherwise, the given command or block will be run. The special signal name
``EXIT&#8217;&#8217; or signal number zero will be invoked just prior to
program termination. trap returns the previous handler for the given
signal.
</p>
<pre>
    Signal.trap(0, proc { puts &quot;Terminating: #{$$}&quot; })
    Signal.trap(&quot;CLD&quot;)  { puts &quot;Child died&quot; }
    fork &amp;&amp; Process.wait
</pre>
<p>
produces:
</p>
<pre>
    Terminating: 27461
    Child died
    Terminating: 27460
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006227_source')" id="l_M006227_source">show source</a> ]</p>
  <div id="M006227_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   Signal.trap( signal, proc ) =&gt; obj
 *   Signal.trap( signal ) {| | block } =&gt; obj
 *
 * Specifies the handling of signals. The first parameter is a signal
 * name (a string such as ``SIGALRM'', ``SIGUSR1'', and so on) or a
 * signal number. The characters ``SIG'' may be omitted from the
 * signal name. The command or block specifies code to be run when the
 * signal is raised. If the command is the string ``IGNORE'' or
 * ``SIG_IGN'', the signal will be ignored. If the command is
 * ``DEFAULT'' or ``SIG_DFL'', the operating system's default handler
 * will be invoked. If the command is ``EXIT'', the script will be
 * terminated by the signal. Otherwise, the given command or block
 * will be run.
 * The special signal name ``EXIT'' or signal number zero will be
 * invoked just prior to program termination.
 * trap returns the previous handler for the given signal.
 *
 *     Signal.trap(0, proc { puts &quot;Terminating: #{$$}&quot; })
 *     Signal.trap(&quot;CLD&quot;)  { puts &quot;Child died&quot; }
 *     fork &amp;&amp; Process.wait
 *
 * produces:
 *     Terminating: 27461
 *     Child died
 *     Terminating: 27460
 */
static VALUE
sig_trap(argc, argv)
    int argc;
    VALUE *argv;
{
    struct trap_arg arg;

    rb_secure(2);
    if (argc == 0 || argc &gt; 2) {
        rb_raise(rb_eArgError, &quot;wrong number of arguments -- trap(sig, cmd)/trap(sig){...}&quot;);
    }

    arg.sig = argv[0];
    if (argc == 1) {
        arg.cmd = rb_block_proc();
    }
    else if (argc == 2) {
        arg.cmd = argv[1];
    }

    if (OBJ_TAINTED(arg.cmd)) {
        rb_raise(rb_eSecurityError, &quot;Insecure: tainted signal trap&quot;);
    }
#if USE_TRAP_MASK
    /* disable interrupt */
# ifdef HAVE_SIGPROCMASK
    sigfillset(&amp;arg.mask);
    sigprocmask(SIG_BLOCK, &amp;arg.mask, &amp;arg.mask);
# else
    arg.mask = sigblock(~0);
# endif

    return rb_ensure(trap, (VALUE)&amp;arg, trap_ensure, (VALUE)&amp;arg);
#else
    return trap(&amp;arg);
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M006190" class="method">
  <div id="M006190_title" class="title">
    <b>untrace_var(symbol [, cmd] )   => array or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Removes tracing for the specified command on the given global variable and
returns <tt>nil</tt>. If no command is specified, removes all tracing for
that variable and returns an array containing the commands actually
removed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006190_source')" id="l_M006190_source">show source</a> ]</p>
  <div id="M006190_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     untrace_var(symbol [, cmd] )   =&gt; array or nil
 *  
 *  Removes tracing for the specified command on the given global
 *  variable and returns +nil+. If no command is specified,
 *  removes all tracing for that variable and returns an array
 *  containing the commands actually removed.
 */

VALUE
rb_f_untrace_var(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE var, cmd;
    ID id;
    struct global_entry *entry;
    struct trace_var *trace;
    st_data_t data;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;var, &amp;cmd);
    id = rb_to_id(var);
    if (!st_lookup(rb_global_tbl, id, &amp;data)) {
	rb_name_error(id, &quot;undefined global variable %s&quot;, rb_id2name(id));
    }

    trace = (entry = (struct global_entry *)data)-&gt;var-&gt;trace;
    if (NIL_P(cmd)) {
	VALUE ary = rb_ary_new();

	while (trace) {
	    struct trace_var *next = trace-&gt;next;
	    rb_ary_push(ary, (VALUE)trace-&gt;data);
	    trace-&gt;removed = 1;
	    trace = next;
	}

	if (!entry-&gt;var-&gt;block_trace) remove_trace(entry-&gt;var);
	return ary;
    }
    else {
	while (trace) {
	    if (trace-&gt;data == cmd) {
		trace-&gt;removed = 1;
		if (!entry-&gt;var-&gt;block_trace) remove_trace(entry-&gt;var);
		return rb_ary_new3(1, cmd);
	    }
	    trace = trace-&gt;next;
	}
    }
    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M006242" class="method">
  <div id="M006242_title" class="title">
    <b>warn</b>(msg)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006242_source')" id="l_M006242_source">show source</a> ]</p>
  <div id="M006242_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/soap.rb, line 136</span>
136:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">warn</span>(<span class="ruby-identifier">msg</span>)
137:       <span class="ruby-constant">STDERR</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">msg</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$VERBOSE</span>.<span class="ruby-identifier">nil?</span>
138:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006172" class="method">
  <div id="M006172_title" class="title">
    <b>warn(msg)   => nil<br />
</b>
  </div>
  <div class="description">
  <p>
Display the given message (followed by a newline) on STDERR unless warnings
are disabled (for example with the <tt>-W0</tt> flag).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006172_source')" id="l_M006172_source">show source</a> ]</p>
  <div id="M006172_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    warn(msg)   =&gt; nil
 *
 * Display the given message (followed by a newline) on STDERR unless
 * warnings are disabled (for example with the &lt;code&gt;-W0&lt;/code&gt; flag).
 */

static VALUE
rb_warn_m(self, mesg)
    VALUE self, mesg;
{
    if (!NIL_P(ruby_verbose)) {
        rb_io_write(rb_stderr, mesg);
        rb_io_write(rb_stderr, rb_default_rs);
    }
    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Private Instance methods</div>
<div id="M006239" class="method">
  <div id="M006239_title" class="title">
    <b>Pathname</b>(path)
  </div>
  <div class="description">
  <p>
create a pathname object.
</p>
<p>
This method is available since 1.8.5.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006239_source')" id="l_M006239_source">show source</a> ]</p>
  <div id="M006239_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/pathname.rb, line 1058</span>
1058:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Pathname</span>(<span class="ruby-identifier">path</span>) <span class="ruby-comment cmt"># :doc:</span>
1059:     <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
1060:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006238" class="method">
  <div id="M006238_title" class="title">
    <b>open</b>(name, *rest, &amp;block)
  </div>
  <div class="description">
  <p>
makes possible to open various resources including URIs. If the first
argument respond to `open&#8217; method, the method is called with the rest
arguments.
</p>
<p>
If the first argument is a string which begins with xxx://, it is parsed by
<a href="index.html?a=M005060&name=URI.parse">URI.parse</a>. If the parsed
object respond to `open&#8217; method, the method is called with the rest
arguments.
</p>
<p>
Otherwise original open is called.
</p>
<p>
Since open-uri.rb provides URI::HTTP#open, URI::HTTPS#open and
URI::FTP#open, <a
href="index.html?a=C00001179&name=Kernel">Kernel</a>[#.]open can accepts
such URIs and strings which begins with http://, https:// and ftp://. In
these case, the opened file object is extended by <a
href="index.html?a=C00001611&name=OpenURI::Meta">OpenURI::Meta</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006238_source')" id="l_M006238_source">show source</a> ]</p>
  <div id="M006238_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/open-uri.rb, line 24</span>
24:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :doc:</span>
25:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:open</span>)
26:       <span class="ruby-identifier">name</span>.<span class="ruby-identifier">open</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
27:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>) <span class="ruby-operator">&amp;&amp;</span>
28:           <span class="ruby-regexp re">%r{\A[A-Za-z][A-Za-z0-9+\-\.]*://}</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">name</span> <span class="ruby-operator">&amp;&amp;</span>
29:           (<span class="ruby-identifier">uri</span> = <span class="ruby-constant">URI</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">name</span>)).<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:open</span>)
30:       <span class="ruby-identifier">uri</span>.<span class="ruby-identifier">open</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
31:     <span class="ruby-keyword kw">else</span>
32:       <span class="ruby-identifier">open_uri_original_open</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">rest</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
33:     <span class="ruby-keyword kw">end</span>
34:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006241" class="method">
  <div id="M006241_title" class="title">
    <b>pp</b>(*objs)
  </div>
  <div class="description">
  <p>
prints arguments in pretty form.
</p>
<p>
pp returns nil.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006241_source')" id="l_M006241_source">show source</a> ]</p>
  <div id="M006241_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/pp.rb, line 58</span>
58:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pp</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">objs</span>) <span class="ruby-comment cmt"># :doc:</span>
59:     <span class="ruby-identifier">objs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
60:       <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">obj</span>)
61:     }
62:     <span class="ruby-keyword kw">nil</span>
63:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>