  <div id="C00000068">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Context<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/debug_rb.html');">ruby-1.8.7-p22/lib/debug.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000953&name=break_points" >break_points</a></li>
  <li><a href="index.html?a=M000974&name=check_break_points" >check_break_points</a></li>
  <li><a href="index.html?a=M000949&name=check_suspend" >check_suspend</a></li>
  <li><a href="index.html?a=M000946&name=clear_suspend" >clear_suspend</a></li>
  <li><a href="index.html?a=M000955&name=context" >context</a></li>
  <li><a href="index.html?a=M000964&name=debug_command" >debug_command</a></li>
  <li><a href="index.html?a=M000958&name=debug_eval" >debug_eval</a></li>
  <li><a href="index.html?a=M000973&name=debug_funcname" >debug_funcname</a></li>
  <li><a href="index.html?a=M000962&name=debug_method_info" >debug_method_info</a></li>
  <li><a href="index.html?a=M000965&name=debug_print_help" >debug_print_help</a></li>
  <li><a href="index.html?a=M000959&name=debug_silent_eval" >debug_silent_eval</a></li>
  <li><a href="index.html?a=M000961&name=debug_variable_info" >debug_variable_info</a></li>
  <li><a href="index.html?a=M000954&name=display" >display</a></li>
  <li><a href="index.html?a=M000967&name=display_expression" >display_expression</a></li>
  <li><a href="index.html?a=M000966&name=display_expressions" >display_expressions</a></li>
  <li><a href="index.html?a=M000969&name=display_frames" >display_frames</a></li>
  <li><a href="index.html?a=M000971&name=display_list" >display_list</a></li>
  <li><a href="index.html?a=M000975&name=excn_handle" >excn_handle</a></li>
  <li><a href="index.html?a=M000970&name=format_frame" >format_frame</a></li>
  <li><a href="index.html?a=M000968&name=frame_set_pos" >frame_set_pos</a></li>
  <li><a href="index.html?a=M000972&name=line_at" >line_at</a></li>
  <li><a href="index.html?a=M000943&name=new" >new</a></li>
  <li><a href="index.html?a=M000941&name=readline" >readline</a></li>
  <li><a href="index.html?a=M000942&name=readline" >readline</a></li>
  <li><a href="index.html?a=M000948&name=resume_all" >resume_all</a></li>
  <li><a href="index.html?a=M000957&name=set_last_thread" >set_last_thread</a></li>
  <li><a href="index.html?a=M000945&name=set_suspend" >set_suspend</a></li>
  <li><a href="index.html?a=M000951&name=set_trace" >set_trace</a></li>
  <li><a href="index.html?a=M000956&name=set_trace_all" >set_trace_all</a></li>
  <li><a href="index.html?a=M000952&name=stdout" >stdout</a></li>
  <li><a href="index.html?a=M000944&name=stop_next" >stop_next</a></li>
  <li><a href="index.html?a=M000947&name=suspend_all" >suspend_all</a></li>
  <li><a href="index.html?a=M000963&name=thnum" >thnum</a></li>
  <li><a href="index.html?a=M000950&name=trace?" >trace?</a></li>
  <li><a href="index.html?a=M000976&name=trace_func" >trace_func</a></li>
  <li><a href="index.html?a=M000960&name=var_list" >var_list</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">DEBUG_LAST_CMD</td>
    <td>=</td>
    <td class="attr-value">[]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">USE_READLINE</td>
    <td>=</td>
    <td class="attr-value">false</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M000943" class="method">
  <div id="M000943_title" class="title">
    <b>new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000943_source')" id="l_M000943_source">show source</a> ]</p>
  <div id="M000943_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
84:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">main</span>
85:       <span class="ruby-ivar">@stop_next</span> = <span class="ruby-value">1</span>
86:     <span class="ruby-keyword kw">else</span>
87:       <span class="ruby-ivar">@stop_next</span> = <span class="ruby-value">0</span>
88:     <span class="ruby-keyword kw">end</span>
89:     <span class="ruby-ivar">@last_file</span> = <span class="ruby-keyword kw">nil</span>
90:     <span class="ruby-ivar">@file</span> = <span class="ruby-keyword kw">nil</span>
91:     <span class="ruby-ivar">@line</span> = <span class="ruby-keyword kw">nil</span>
92:     <span class="ruby-ivar">@no_step</span> = <span class="ruby-keyword kw">nil</span>
93:     <span class="ruby-ivar">@frames</span> = []
94:     <span class="ruby-ivar">@finish_pos</span> = <span class="ruby-value">0</span>
95:     <span class="ruby-ivar">@trace</span> = <span class="ruby-keyword kw">false</span>
96:     <span class="ruby-ivar">@catch</span> = <span class="ruby-value str">&quot;StandardError&quot;</span>
97:     <span class="ruby-ivar">@suspend_next</span> = <span class="ruby-keyword kw">false</span>
98:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000953" class="method">
  <div id="M000953_title" class="title">
    <b>break_points</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000953_source')" id="l_M000953_source">show source</a> ]</p>
  <div id="M000953_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">break_points</span>
143:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">break_points</span>
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000974" class="method">
  <div id="M000974_title" class="title">
    <b>check_break_points</b>(file, klass, pos, binding, id)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000974_source')" id="l_M000974_source">show source</a> ]</p>
  <div id="M000974_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 667</span>
667:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_break_points</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">pos</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">id</span>)
668:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">empty?</span>
669:     <span class="ruby-identifier">n</span> = <span class="ruby-value">1</span>
670:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">b</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">break_points</span>
671:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">0</span>]           <span class="ruby-comment cmt"># valid</span>
672:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0</span>   <span class="ruby-comment cmt"># breakpoint</span>
673:           <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">b</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">pos</span>) <span class="ruby-keyword kw">or</span>
674:               (<span class="ruby-identifier">klass</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">klass</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">pos</span>)
675:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Breakpoint %d, %s at %s:%s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">debug_funcname</span>(<span class="ruby-identifier">id</span>), <span class="ruby-identifier">file</span>, <span class="ruby-identifier">pos</span>
676:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
677:           <span class="ruby-keyword kw">end</span>
678:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span>        <span class="ruby-comment cmt"># watchpoint</span>
679:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">debug_silent_eval</span>(<span class="ruby-identifier">b</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">binding</span>)
680:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Watchpoint %d, %s at %s:%s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">debug_funcname</span>(<span class="ruby-identifier">id</span>), <span class="ruby-identifier">file</span>, <span class="ruby-identifier">pos</span>
681:             <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
682:           <span class="ruby-keyword kw">end</span>
683:         <span class="ruby-keyword kw">end</span>
684:       <span class="ruby-keyword kw">end</span>
685:       <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
686:     <span class="ruby-keyword kw">end</span>
687:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
688:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000949" class="method">
  <div id="M000949_title" class="title">
    <b>check_suspend</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000949_source')" id="l_M000949_source">show source</a> ]</p>
  <div id="M000949_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 120</span>
120:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">check_suspend</span>
121:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span>
122:     <span class="ruby-keyword kw">while</span> (<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span> = <span class="ruby-keyword kw">true</span>; <span class="ruby-ivar">@suspend_next</span>)
123:       <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">waiting</span>.<span class="ruby-identifier">push</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>
124:       <span class="ruby-ivar">@suspend_next</span> = <span class="ruby-keyword kw">false</span>
125:       <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">stop</span>
126:     <span class="ruby-keyword kw">end</span>
127:     <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">critical</span> = <span class="ruby-keyword kw">false</span>
128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000946" class="method">
  <div id="M000946_title" class="title">
    <b>clear_suspend</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000946_source')" id="l_M000946_source">show source</a> ]</p>
  <div id="M000946_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_suspend</span>
109:     <span class="ruby-ivar">@suspend_next</span> = <span class="ruby-keyword kw">false</span>
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000955" class="method">
  <div id="M000955_title" class="title">
    <b>context</b>(th)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000955_source')" id="l_M000955_source">show source</a> ]</p>
  <div id="M000955_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">context</span>(<span class="ruby-identifier">th</span>)
151:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">context</span>(<span class="ruby-identifier">th</span>)
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000964" class="method">
  <div id="M000964_title" class="title">
    <b>debug_command</b>(file, line, id, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000964_source')" id="l_M000964_source">show source</a> ]</p>
  <div id="M000964_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 256</span>
256:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_command</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
257:     <span class="ruby-constant">MUTEX</span>.<span class="ruby-identifier">lock</span>
258:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">$debugger_restart</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">$debugger_restart</span>
259:       <span class="ruby-identifier">callcc</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">$debugger_restart</span> = <span class="ruby-identifier">c</span>} 
260:     <span class="ruby-keyword kw">end</span>
261:     <span class="ruby-identifier">set_last_thread</span>(<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>)
262:     <span class="ruby-identifier">frame_pos</span> = <span class="ruby-value">0</span>
263:     <span class="ruby-identifier">binding_file</span> = <span class="ruby-identifier">file</span>
264:     <span class="ruby-identifier">binding_line</span> = <span class="ruby-identifier">line</span>
265:     <span class="ruby-identifier">previous_line</span> = <span class="ruby-keyword kw">nil</span>
266:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'EMACS'</span>]
267:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;\032\032%s:%d:\n&quot;</span>, <span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span>
268:     <span class="ruby-keyword kw">else</span>
269:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s:%d:%s&quot;</span>, <span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span>,
270:         <span class="ruby-identifier">line_at</span>(<span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span>)
271:     <span class="ruby-keyword kw">end</span>
272:     <span class="ruby-ivar">@frames</span>[<span class="ruby-value">0</span>] = [<span class="ruby-identifier">binding</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>]
273:     <span class="ruby-identifier">display_expressions</span>(<span class="ruby-identifier">binding</span>)
274:     <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">true</span>
275:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">prompt</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">input</span> = <span class="ruby-identifier">readline</span>(<span class="ruby-value str">&quot;(rdb:%d) &quot;</span><span class="ruby-operator">%</span><span class="ruby-identifier">thnum</span>(), <span class="ruby-keyword kw">true</span>)
276:       <span class="ruby-identifier">catch</span>(<span class="ruby-identifier">:debug_error</span>) <span class="ruby-keyword kw">do</span>
277:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;&quot;</span>
278:           <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">DEBUG_LAST_CMD</span>[<span class="ruby-value">0</span>]
279:           <span class="ruby-identifier">input</span> = <span class="ruby-constant">DEBUG_LAST_CMD</span>[<span class="ruby-value">0</span>]
280:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">input</span>, <span class="ruby-value str">&quot;\n&quot;</span>
281:         <span class="ruby-keyword kw">else</span>
282:           <span class="ruby-constant">DEBUG_LAST_CMD</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">input</span>
283:         <span class="ruby-keyword kw">end</span>
284: 
285:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">input</span>
286:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*tr(?:ace)?(?:\s+(on|off))?(?:\s+(all))?$/</span>
287:           <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>( <span class="ruby-identifier">$2</span> )
288:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'on'</span>
289:               <span class="ruby-identifier">set_trace_all</span> <span class="ruby-keyword kw">true</span>
290:             <span class="ruby-keyword kw">else</span>
291:               <span class="ruby-identifier">set_trace_all</span> <span class="ruby-keyword kw">false</span>
292:             <span class="ruby-keyword kw">end</span>
293:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-keyword kw">defined?</span>( <span class="ruby-identifier">$1</span> )
294:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'on'</span>
295:               <span class="ruby-identifier">set_trace</span> <span class="ruby-keyword kw">true</span>
296:             <span class="ruby-keyword kw">else</span>
297:               <span class="ruby-identifier">set_trace</span> <span class="ruby-keyword kw">false</span>
298:             <span class="ruby-keyword kw">end</span>
299:           <span class="ruby-keyword kw">end</span>
300:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trace?</span>
301:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Trace on.\n&quot;</span>
302:           <span class="ruby-keyword kw">else</span>
303:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Trace off.\n&quot;</span>
304:           <span class="ruby-keyword kw">end</span>
305: 
306:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*b(?:reak)?\s+(?:(.+):)?([^.:]+)$/</span>
307:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">$2</span>
308:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
309:             <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">debug_silent_eval</span>(<span class="ruby-identifier">$1</span>, <span class="ruby-identifier">binding</span>)
310:             <span class="ruby-identifier">file</span> = <span class="ruby-identifier">$1</span>
311:           <span class="ruby-keyword kw">end</span>
312:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^\d+$/</span>
313:             <span class="ruby-identifier">pname</span> = <span class="ruby-identifier">pos</span>
314:             <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">pos</span>.<span class="ruby-identifier">to_i</span>
315:           <span class="ruby-keyword kw">else</span>
316:             <span class="ruby-identifier">pname</span> = <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">pos</span>.<span class="ruby-identifier">intern</span>.<span class="ruby-identifier">id2name</span>
317:           <span class="ruby-keyword kw">end</span>
318:           <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">push</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">klass</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">file</span>, <span class="ruby-identifier">pos</span>]
319:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Set breakpoint %d at %s:%s\n&quot;</span>, <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">klass</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">file</span>, <span class="ruby-identifier">pname</span>
320: 
321:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*b(?:reak)?\s+(.+)[#.]([^.:]+)$/</span>
322:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">intern</span>.<span class="ruby-identifier">id2name</span>
323:           <span class="ruby-identifier">klass</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$1</span>, <span class="ruby-identifier">binding</span>)
324:           <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">push</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">pos</span>]
325:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Set breakpoint %d at %s.%s\n&quot;</span>, <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">pos</span>
326: 
327:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*wat(?:ch)?\s+(.+)$/</span>
328:           <span class="ruby-identifier">exp</span> = <span class="ruby-identifier">$1</span>
329:           <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">push</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">exp</span>]
330:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Set watchpoint %d:%s\n&quot;</span>, <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">exp</span>
331: 
332:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*b(?:reak)?$/</span>
333:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">find</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0</span>}
334:             <span class="ruby-identifier">n</span> = <span class="ruby-value">1</span>
335:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Breakpoints:\n&quot;</span>
336:             <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">b</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">break_points</span>
337:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
338:                 <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;  %d %s:%s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">b</span>[<span class="ruby-value">2</span>], <span class="ruby-identifier">b</span>[<span class="ruby-value">3</span>] 
339:               <span class="ruby-keyword kw">end</span>
340:               <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
341:             <span class="ruby-keyword kw">end</span>
342:           <span class="ruby-keyword kw">end</span>
343:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">find</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span>}
344:             <span class="ruby-identifier">n</span> = <span class="ruby-value">1</span>
345:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
346:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Watchpoints:\n&quot;</span>
347:             <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">b</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">break_points</span>
348:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">b</span>[<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
349:                 <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;  %d %s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">b</span>[<span class="ruby-value">2</span>]
350:               <span class="ruby-keyword kw">end</span>
351:               <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
352:             <span class="ruby-keyword kw">end</span>
353:           <span class="ruby-keyword kw">end</span>
354:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">break_points</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
355:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;No breakpoints\n&quot;</span>
356:           <span class="ruby-keyword kw">else</span>
357:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
358:           <span class="ruby-keyword kw">end</span>
359: 
360:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*del(?:ete)?(?:\s+(\d+))?$/</span>
361:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">$1</span>
362:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pos</span>
363:             <span class="ruby-identifier">input</span> = <span class="ruby-identifier">readline</span>(<span class="ruby-value str">&quot;Clear all breakpoints? (y/n) &quot;</span>, <span class="ruby-keyword kw">false</span>)
364:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;y&quot;</span>
365:               <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">b</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">break_points</span>
366:                 <span class="ruby-identifier">b</span>[<span class="ruby-value">0</span>] = <span class="ruby-keyword kw">false</span>
367:               <span class="ruby-keyword kw">end</span>
368:             <span class="ruby-keyword kw">end</span>
369:           <span class="ruby-keyword kw">else</span>
370:             <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">pos</span>.<span class="ruby-identifier">to_i</span>
371:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">break_points</span>[<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
372:               <span class="ruby-identifier">break_points</span>[<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>][<span class="ruby-value">0</span>] = <span class="ruby-keyword kw">false</span>
373:             <span class="ruby-keyword kw">else</span>
374:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Breakpoint %d is not defined\n&quot;</span>, <span class="ruby-identifier">pos</span>
375:             <span class="ruby-keyword kw">end</span>
376:           <span class="ruby-keyword kw">end</span>
377: 
378:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*disp(?:lay)?\s+(.+)$/</span>
379:           <span class="ruby-identifier">exp</span> = <span class="ruby-identifier">$1</span>
380:           <span class="ruby-identifier">display</span>.<span class="ruby-identifier">push</span> [<span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">exp</span>]
381:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%d: &quot;</span>, <span class="ruby-identifier">display</span>.<span class="ruby-identifier">size</span>
382:           <span class="ruby-identifier">display_expression</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">binding</span>)
383: 
384:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*disp(?:lay)?$/</span>
385:           <span class="ruby-identifier">display_expressions</span>(<span class="ruby-identifier">binding</span>)
386: 
387:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*undisp(?:lay)?(?:\s+(\d+))?$/</span>
388:           <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">$1</span>
389:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pos</span>
390:             <span class="ruby-identifier">input</span> = <span class="ruby-identifier">readline</span>(<span class="ruby-value str">&quot;Clear all expressions? (y/n) &quot;</span>, <span class="ruby-keyword kw">false</span>)
391:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;y&quot;</span>
392:               <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">display</span>
393:                 <span class="ruby-identifier">d</span>[<span class="ruby-value">0</span>] = <span class="ruby-keyword kw">false</span>
394:               <span class="ruby-keyword kw">end</span>
395:             <span class="ruby-keyword kw">end</span>
396:           <span class="ruby-keyword kw">else</span>
397:             <span class="ruby-identifier">pos</span> = <span class="ruby-identifier">pos</span>.<span class="ruby-identifier">to_i</span>
398:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">display</span>[<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
399:               <span class="ruby-identifier">display</span>[<span class="ruby-identifier">pos</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>][<span class="ruby-value">0</span>] = <span class="ruby-keyword kw">false</span>
400:             <span class="ruby-keyword kw">else</span>
401:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Display expression %d is not defined\n&quot;</span>, <span class="ruby-identifier">pos</span>
402:             <span class="ruby-keyword kw">end</span>
403:           <span class="ruby-keyword kw">end</span>
404: 
405:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*c(?:ont)?$/</span>
406:           <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">false</span>
407: 
408:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*s(?:tep)?(?:\s+(\d+))?$/</span>
409:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
410:             <span class="ruby-identifier">lev</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
411:           <span class="ruby-keyword kw">else</span>
412:             <span class="ruby-identifier">lev</span> = <span class="ruby-value">1</span>
413:           <span class="ruby-keyword kw">end</span>
414:           <span class="ruby-ivar">@stop_next</span> = <span class="ruby-identifier">lev</span>
415:           <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">false</span>
416: 
417:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*n(?:ext)?(?:\s+(\d+))?$/</span>
418:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
419:             <span class="ruby-identifier">lev</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
420:           <span class="ruby-keyword kw">else</span>
421:             <span class="ruby-identifier">lev</span> = <span class="ruby-value">1</span>
422:           <span class="ruby-keyword kw">end</span>
423:           <span class="ruby-ivar">@stop_next</span> = <span class="ruby-identifier">lev</span>
424:           <span class="ruby-ivar">@no_step</span> = <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">frame_pos</span>
425:           <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">false</span>
426: 
427:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*w(?:here)?$/</span>, <span class="ruby-regexp re">/^\s*f(?:rame)?$/</span>
428:           <span class="ruby-identifier">display_frames</span>(<span class="ruby-identifier">frame_pos</span>)
429: 
430:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*l(?:ist)?(?:\s+(.+))?$/</span>
431:           <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">$1</span>
432:             <span class="ruby-identifier">b</span> = <span class="ruby-identifier">previous_line</span> <span class="ruby-value">? </span><span class="ruby-identifier">previous_line</span> <span class="ruby-operator">+</span> <span class="ruby-value">10</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">binding_line</span> <span class="ruby-operator">-</span> <span class="ruby-value">5</span>
433:             <span class="ruby-identifier">e</span> = <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">9</span>
434:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">$1</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'-'</span>
435:             <span class="ruby-identifier">b</span> = <span class="ruby-identifier">previous_line</span> <span class="ruby-value">? </span><span class="ruby-identifier">previous_line</span> <span class="ruby-operator">-</span> <span class="ruby-value">10</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">binding_line</span> <span class="ruby-operator">-</span> <span class="ruby-value">5</span>
436:             <span class="ruby-identifier">e</span> = <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">9</span>
437:           <span class="ruby-keyword kw">else</span>
438:             <span class="ruby-identifier">b</span>, <span class="ruby-identifier">e</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">split</span>(<span class="ruby-regexp re">/[-,]/</span>)
439:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>
440:               <span class="ruby-identifier">b</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">to_i</span>
441:               <span class="ruby-identifier">e</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_i</span>
442:             <span class="ruby-keyword kw">else</span>
443:               <span class="ruby-identifier">b</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">-</span> <span class="ruby-value">5</span>
444:               <span class="ruby-identifier">e</span> = <span class="ruby-identifier">b</span> <span class="ruby-operator">+</span> <span class="ruby-value">9</span>
445:             <span class="ruby-keyword kw">end</span>
446:           <span class="ruby-keyword kw">end</span>
447:           <span class="ruby-identifier">previous_line</span> = <span class="ruby-identifier">b</span>
448:           <span class="ruby-identifier">display_list</span>(<span class="ruby-identifier">b</span>, <span class="ruby-identifier">e</span>, <span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span>)
449: 
450:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*up(?:\s+(\d+))?$/</span>
451:           <span class="ruby-identifier">previous_line</span> = <span class="ruby-keyword kw">nil</span>
452:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
453:             <span class="ruby-identifier">lev</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
454:           <span class="ruby-keyword kw">else</span>
455:             <span class="ruby-identifier">lev</span> = <span class="ruby-value">1</span>
456:           <span class="ruby-keyword kw">end</span>
457:           <span class="ruby-identifier">frame_pos</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">lev</span>
458:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">frame_pos</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span>
459:             <span class="ruby-identifier">frame_pos</span> = <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
460:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;At toplevel\n&quot;</span>
461:           <span class="ruby-keyword kw">end</span>
462:           <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span> = <span class="ruby-ivar">@frames</span>[<span class="ruby-identifier">frame_pos</span>]
463:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">format_frame</span>(<span class="ruby-identifier">frame_pos</span>)
464: 
465:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*down(?:\s+(\d+))?$/</span>
466:           <span class="ruby-identifier">previous_line</span> = <span class="ruby-keyword kw">nil</span>
467:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
468:             <span class="ruby-identifier">lev</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
469:           <span class="ruby-keyword kw">else</span>
470:             <span class="ruby-identifier">lev</span> = <span class="ruby-value">1</span>
471:           <span class="ruby-keyword kw">end</span>
472:           <span class="ruby-identifier">frame_pos</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">lev</span>
473:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">frame_pos</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
474:             <span class="ruby-identifier">frame_pos</span> = <span class="ruby-value">0</span>
475:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;At stack bottom\n&quot;</span>
476:           <span class="ruby-keyword kw">end</span>
477:           <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">binding_file</span>, <span class="ruby-identifier">binding_line</span> = <span class="ruby-ivar">@frames</span>[<span class="ruby-identifier">frame_pos</span>]
478:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">format_frame</span>(<span class="ruby-identifier">frame_pos</span>)
479: 
480:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*fin(?:ish)?$/</span>
481:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">frame_pos</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span>
482:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\&quot;finish\&quot; not meaningful in the outermost frame.\n&quot;</span>
483:           <span class="ruby-keyword kw">else</span>
484:             <span class="ruby-ivar">@finish_pos</span> = <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">frame_pos</span>
485:             <span class="ruby-identifier">frame_pos</span> = <span class="ruby-value">0</span>
486:             <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">false</span>
487:           <span class="ruby-keyword kw">end</span>
488: 
489:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*cat(?:ch)?(?:\s+(.+))?$/</span>
490:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$1</span>
491:             <span class="ruby-identifier">excn</span> = <span class="ruby-identifier">$1</span>
492:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">excn</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'off'</span>
493:               <span class="ruby-ivar">@catch</span> = <span class="ruby-keyword kw">nil</span>
494:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Clear catchpoint.\n&quot;</span>
495:             <span class="ruby-keyword kw">else</span>
496:               <span class="ruby-ivar">@catch</span> = <span class="ruby-identifier">excn</span>
497:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Set catchpoint %s.\n&quot;</span>, <span class="ruby-ivar">@catch</span>
498:             <span class="ruby-keyword kw">end</span>
499:           <span class="ruby-keyword kw">else</span>
500:             <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@catch</span>
501:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;Catchpoint %s.\n&quot;</span>, <span class="ruby-ivar">@catch</span>
502:             <span class="ruby-keyword kw">else</span>
503:               <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;No catchpoint.\n&quot;</span>
504:             <span class="ruby-keyword kw">end</span>
505:           <span class="ruby-keyword kw">end</span>
506: 
507:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*q(?:uit)?$/</span>
508:           <span class="ruby-identifier">input</span> = <span class="ruby-identifier">readline</span>(<span class="ruby-value str">&quot;Really quit? (y/n) &quot;</span>, <span class="ruby-keyword kw">false</span>)
509:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">input</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;y&quot;</span>
510:             <span class="ruby-identifier">exit!</span>      <span class="ruby-comment cmt"># exit -&gt; exit!: No graceful way to stop threads...</span>
511:           <span class="ruby-keyword kw">end</span>
512: 
513:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*v(?:ar)?\s+/</span>
514:           <span class="ruby-identifier">debug_variable_info</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>)
515: 
516:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*m(?:ethod)?\s+/</span>
517:           <span class="ruby-identifier">debug_method_info</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>)
518: 
519:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*th(?:read)?\s+/</span>
520:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">debug_thread_info</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>) <span class="ruby-operator">==</span> <span class="ruby-identifier">:cont</span>
521:             <span class="ruby-identifier">prompt</span> = <span class="ruby-keyword kw">false</span>
522:           <span class="ruby-keyword kw">end</span>
523: 
524:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*pp\s+/</span>
525:           <span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span>(<span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>), <span class="ruby-identifier">stdout</span>)
526: 
527:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*p\s+/</span>
528:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s\n&quot;</span>, <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>).<span class="ruby-identifier">inspect</span>
529: 
530:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*r(?:estart)?$/</span>
531:           <span class="ruby-identifier">$debugger_restart</span>.<span class="ruby-identifier">call</span>
532: 
533:         <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*h(?:elp)?$/</span>
534:           <span class="ruby-identifier">debug_print_help</span>()
535: 
536:         <span class="ruby-keyword kw">else</span>
537:           <span class="ruby-identifier">v</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">input</span>, <span class="ruby-identifier">binding</span>)
538:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s\n&quot;</span>, <span class="ruby-identifier">v</span>.<span class="ruby-identifier">inspect</span>
539:         <span class="ruby-keyword kw">end</span>
540:       <span class="ruby-keyword kw">end</span>
541:     <span class="ruby-keyword kw">end</span>
542:     <span class="ruby-constant">MUTEX</span>.<span class="ruby-identifier">unlock</span>
543:     <span class="ruby-identifier">resume_all</span>
544:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000958" class="method">
  <div id="M000958_title" class="title">
    <b>debug_eval</b>(str, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000958_source')" id="l_M000958_source">show source</a> ]</p>
  <div id="M000958_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">binding</span>)
163:     <span class="ruby-keyword kw">begin</span>
164:       <span class="ruby-identifier">val</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">binding</span>)
165:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">StandardError</span>, <span class="ruby-constant">ScriptError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
166:       <span class="ruby-identifier">at</span> = <span class="ruby-identifier">eval</span>(<span class="ruby-value str">&quot;caller(1)&quot;</span>, <span class="ruby-identifier">binding</span>)
167:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s:%s\n&quot;</span>, <span class="ruby-identifier">at</span>.<span class="ruby-identifier">shift</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/\(eval\):1:(in `.*?':)?/</span>, <span class="ruby-value str">''</span>)
168:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">at</span>
169:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;\tfrom %s\n&quot;</span>, <span class="ruby-identifier">i</span>
170:       <span class="ruby-keyword kw">end</span>
171:       <span class="ruby-identifier">throw</span> <span class="ruby-identifier">:debug_error</span>
172:     <span class="ruby-keyword kw">end</span>
173:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000973" class="method">
  <div id="M000973_title" class="title">
    <b>debug_funcname</b>(id)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000973_source')" id="l_M000973_source">show source</a> ]</p>
  <div id="M000973_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 659</span>
659:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_funcname</span>(<span class="ruby-identifier">id</span>)
660:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">id</span>.<span class="ruby-identifier">nil?</span>
661:       <span class="ruby-value str">&quot;toplevel&quot;</span>
662:     <span class="ruby-keyword kw">else</span>
663:       <span class="ruby-identifier">id</span>.<span class="ruby-identifier">id2name</span>
664:     <span class="ruby-keyword kw">end</span>
665:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000962" class="method">
  <div id="M000962_title" class="title">
    <b>debug_method_info</b>(input, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000962_source')" id="l_M000962_source">show source</a> ]</p>
  <div id="M000962_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 212</span>
212:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_method_info</span>(<span class="ruby-identifier">input</span>, <span class="ruby-identifier">binding</span>)
213:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">input</span>
214:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^i(:?nstance)?\s+/</span>
215:       <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>)
216: 
217:       <span class="ruby-identifier">len</span> = <span class="ruby-value">0</span>
218:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">methods</span>.<span class="ruby-identifier">sort</span>
219:         <span class="ruby-identifier">len</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
220:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">len</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">70</span>
221:           <span class="ruby-identifier">len</span> = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
222:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
223:         <span class="ruby-keyword kw">end</span>
224:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">v</span>, <span class="ruby-value str">&quot; &quot;</span>
225:       <span class="ruby-keyword kw">end</span>
226:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
227: 
228:     <span class="ruby-keyword kw">else</span>
229:       <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">input</span>, <span class="ruby-identifier">binding</span>)
230:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Module</span>
231:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Should be Class/Module: &quot;</span>, <span class="ruby-identifier">input</span>, <span class="ruby-value str">&quot;\n&quot;</span>
232:       <span class="ruby-keyword kw">else</span>
233:         <span class="ruby-identifier">len</span> = <span class="ruby-value">0</span>
234:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">instance_methods</span>(<span class="ruby-keyword kw">false</span>).<span class="ruby-identifier">sort</span>
235:           <span class="ruby-identifier">len</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">v</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
236:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">len</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">70</span>
237:             <span class="ruby-identifier">len</span> = <span class="ruby-identifier">v</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
238:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
239:           <span class="ruby-keyword kw">end</span>
240:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">v</span>, <span class="ruby-value str">&quot; &quot;</span>
241:         <span class="ruby-keyword kw">end</span>
242:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;\n&quot;</span>
243:       <span class="ruby-keyword kw">end</span>
244:     <span class="ruby-keyword kw">end</span>
245:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000965" class="method">
  <div id="M000965_title" class="title">
    <b>debug_print_help</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000965_source')" id="l_M000965_source">show source</a> ]</p>
  <div id="M000965_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 546</span>
546:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_print_help</span>
547:     <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Debugger help v.-0.002b\nCommands\n  b[reak] [file:|class:]&lt;line|method&gt;\n  b[reak] [class.]&lt;line|method&gt;\n                             set breakpoint to some position\n  wat[ch] &lt;expression&gt;       set watchpoint to some expression\n  cat[ch] (&lt;exception&gt;|off)  set catchpoint to an exception\n  b[reak]                    list breakpoints\n  cat[ch]                    show catchpoint\n  del[ete][ nnn]             delete some or all breakpoints\n  disp[lay] &lt;expression&gt;     add expression into display expression list\n  undisp[lay][ nnn]          delete one particular or all display expressions\n  c[ont]                     run until program ends or hit breakpoint\n  s[tep][ nnn]               step (into methods) one line or till line nnn\n  n[ext][ nnn]               go over one line or till line nnn\n  w[here]                    display frames\n  f[rame]                    alias for where\n  l[ist][ (-|nn-mm)]         list program, - lists backwards\n                             nn-mm lists given lines\n  up[ nn]                    move to higher frame\n  down[ nn]                  move to lower frame\n  fin[ish]                   return to outer frame\n  tr[ace] (on|off)           set trace mode of current thread\n  tr[ace] (on|off) all       set trace mode of all threads\n  q[uit]                     exit from debugger\n  v[ar] g[lobal]             show global variables\n  v[ar] l[ocal]              show local variables\n  v[ar] i[nstance] &lt;object&gt;  show instance variables of object\n  v[ar] c[onst] &lt;object&gt;     show constants of object\n  m[ethod] i[nstance] &lt;obj&gt;  show methods of object\n  m[ethod] &lt;class|module&gt;    show instance methods of class or module\n  th[read] l[ist]            list all threads\n  th[read] c[ur[rent]]       show current thread\n  th[read] [sw[itch]] &lt;nnn&gt;  switch thread context to nnn\n  th[read] stop &lt;nnn&gt;        stop thread nnn\n  th[read] resume &lt;nnn&gt;      resume thread nnn\n  p expression               evaluate expression and print its value\n  h[elp]                     print this help\n  &lt;everything else&gt;          evaluate\n&quot;</span>
548:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000959" class="method">
  <div id="M000959_title" class="title">
    <b>debug_silent_eval</b>(str, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000959_source')" id="l_M000959_source">show source</a> ]</p>
  <div id="M000959_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 175</span>
175:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_silent_eval</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">binding</span>)
176:     <span class="ruby-keyword kw">begin</span>
177:       <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">binding</span>)
178:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">StandardError</span>, <span class="ruby-constant">ScriptError</span>
179:       <span class="ruby-keyword kw">nil</span>
180:     <span class="ruby-keyword kw">end</span>
181:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000961" class="method">
  <div id="M000961_title" class="title">
    <b>debug_variable_info</b>(input, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000961_source')" id="l_M000961_source">show source</a> ]</p>
  <div id="M000961_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_variable_info</span>(<span class="ruby-identifier">input</span>, <span class="ruby-identifier">binding</span>)
191:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">input</span>
192:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*g(?:lobal)?\s*$/</span>
193:       <span class="ruby-identifier">var_list</span>(<span class="ruby-identifier">global_variables</span>, <span class="ruby-identifier">binding</span>)
194: 
195:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*l(?:ocal)?\s*$/</span>
196:       <span class="ruby-identifier">var_list</span>(<span class="ruby-identifier">eval</span>(<span class="ruby-value str">&quot;local_variables&quot;</span>, <span class="ruby-identifier">binding</span>), <span class="ruby-identifier">binding</span>)
197: 
198:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*i(?:nstance)?\s+/</span>
199:       <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>)
200:       <span class="ruby-identifier">var_list</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">instance_variables</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>()})
201: 
202:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^\s*c(?:onst(?:ant)?)?\s+/</span>
203:       <span class="ruby-identifier">obj</span> = <span class="ruby-identifier">debug_eval</span>(<span class="ruby-identifier">$'</span>, <span class="ruby-identifier">binding</span>)
204:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">kind_of?</span> <span class="ruby-constant">Module</span>
205:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;Should be Class/Module: &quot;</span>, <span class="ruby-identifier">$'</span>, <span class="ruby-value str">&quot;\n&quot;</span>
206:       <span class="ruby-keyword kw">else</span>
207:         <span class="ruby-identifier">var_list</span>(<span class="ruby-identifier">obj</span>.<span class="ruby-identifier">constants</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">module_eval</span>{<span class="ruby-identifier">binding</span>()})
208:       <span class="ruby-keyword kw">end</span>
209:     <span class="ruby-keyword kw">end</span>
210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000954" class="method">
  <div id="M000954_title" class="title">
    <b>display</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000954_source')" id="l_M000954_source">show source</a> ]</p>
  <div id="M000954_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display</span>
147:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">display</span>
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000967" class="method">
  <div id="M000967_title" class="title">
    <b>display_expression</b>(exp, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000967_source')" id="l_M000967_source">show source</a> ]</p>
  <div id="M000967_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 602</span>
602:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_expression</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">binding</span>)
603:     <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s = %s\n&quot;</span>, <span class="ruby-identifier">exp</span>, <span class="ruby-identifier">debug_silent_eval</span>(<span class="ruby-identifier">exp</span>, <span class="ruby-identifier">binding</span>).<span class="ruby-identifier">to_s</span>
604:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000966" class="method">
  <div id="M000966_title" class="title">
    <b>display_expressions</b>(binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000966_source')" id="l_M000966_source">show source</a> ]</p>
  <div id="M000966_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 591</span>
591:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_expressions</span>(<span class="ruby-identifier">binding</span>)
592:     <span class="ruby-identifier">n</span> = <span class="ruby-value">1</span>
593:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">display</span>
594:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>[<span class="ruby-value">0</span>]
595:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%d: &quot;</span>, <span class="ruby-identifier">n</span>
596:         <span class="ruby-identifier">display_expression</span>(<span class="ruby-identifier">d</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">binding</span>)
597:       <span class="ruby-keyword kw">end</span>
598:       <span class="ruby-identifier">n</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
599:     <span class="ruby-keyword kw">end</span>
600:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000969" class="method">
  <div id="M000969_title" class="title">
    <b>display_frames</b>(pos)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000969_source')" id="l_M000969_source">show source</a> ]</p>
  <div id="M000969_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 613</span>
613:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_frames</span>(<span class="ruby-identifier">pos</span>)
614:     <span class="ruby-value">0</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
615:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">pos</span>
616:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;--&gt; &quot;</span>
617:       <span class="ruby-keyword kw">else</span>
618:         <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;    &quot;</span>
619:       <span class="ruby-keyword kw">end</span>
620:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">format_frame</span>(<span class="ruby-identifier">n</span>)
621:     <span class="ruby-keyword kw">end</span>
622:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000971" class="method">
  <div id="M000971_title" class="title">
    <b>display_list</b>(b, e, file, line)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000971_source')" id="l_M000971_source">show source</a> ]</p>
  <div id="M000971_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 630</span>
630:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">display_list</span>(<span class="ruby-identifier">b</span>, <span class="ruby-identifier">e</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
631:     <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;[%d, %d] in %s\n&quot;</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">e</span>, <span class="ruby-identifier">file</span>
632:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span> = <span class="ruby-constant">SCRIPT_LINES__</span>[<span class="ruby-identifier">file</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">lines</span> <span class="ruby-operator">!=</span> <span class="ruby-keyword kw">true</span>
633:       <span class="ruby-identifier">n</span> = <span class="ruby-value">0</span>
634:       <span class="ruby-identifier">b</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">e</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
635:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">n</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
636:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">n</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">line</span>
637:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;=&gt; %d  %s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">n</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">chomp</span>
638:           <span class="ruby-keyword kw">else</span>
639:             <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;   %d  %s\n&quot;</span>, <span class="ruby-identifier">n</span>, <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">n</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">chomp</span>
640:           <span class="ruby-keyword kw">end</span>
641:         <span class="ruby-keyword kw">end</span>
642:       <span class="ruby-keyword kw">end</span>
643:     <span class="ruby-keyword kw">else</span>
644:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;No sourcefile available for %s\n&quot;</span>, <span class="ruby-identifier">file</span>
645:     <span class="ruby-keyword kw">end</span>
646:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000975" class="method">
  <div id="M000975_title" class="title">
    <b>excn_handle</b>(file, line, id, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000975_source')" id="l_M000975_source">show source</a> ]</p>
  <div id="M000975_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 690</span>
690:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">excn_handle</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
691:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-constant">SystemExit</span>
692:       <span class="ruby-identifier">set_trace_func</span> <span class="ruby-keyword kw">nil</span>
693:       <span class="ruby-identifier">exit</span>
694:     <span class="ruby-keyword kw">end</span>
695: 
696:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@catch</span> <span class="ruby-keyword kw">and</span> (<span class="ruby-identifier">$!</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@catch</span> })
697:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;%s:%d: `%s' (%s)\n&quot;</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">$!</span>, <span class="ruby-identifier">$!</span>.<span class="ruby-identifier">class</span>
698:       <span class="ruby-identifier">fs</span> = <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span>
699:       <span class="ruby-identifier">tb</span> = <span class="ruby-identifier">caller</span>(<span class="ruby-value">0</span>)[<span class="ruby-operator">-</span><span class="ruby-identifier">fs</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>]
700:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">tb</span>
701:         <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">tb</span>
702:           <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;\tfrom %s\n&quot;</span>, <span class="ruby-identifier">i</span>
703:         <span class="ruby-keyword kw">end</span>
704:       <span class="ruby-keyword kw">end</span>
705:       <span class="ruby-identifier">suspend_all</span>
706:       <span class="ruby-identifier">debug_command</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
707:     <span class="ruby-keyword kw">end</span>
708:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000970" class="method">
  <div id="M000970_title" class="title">
    <b>format_frame</b>(pos)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000970_source')" id="l_M000970_source">show source</a> ]</p>
  <div id="M000970_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 624</span>
624:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">format_frame</span>(<span class="ruby-identifier">pos</span>)
625:     <span class="ruby-identifier">bind</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span> = <span class="ruby-ivar">@frames</span>[<span class="ruby-identifier">pos</span>]
626:     <span class="ruby-identifier">sprintf</span> <span class="ruby-value str">&quot;#%d %s:%s%s\n&quot;</span>, <span class="ruby-identifier">pos</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>,
627:       (<span class="ruby-identifier">id</span> <span class="ruby-value">? </span><span class="ruby-node">&quot;:in `#{id.id2name}'&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;&quot;</span>)
628:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000968" class="method">
  <div id="M000968_title" class="title">
    <b>frame_set_pos</b>(file, line)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000968_source')" id="l_M000968_source">show source</a> ]</p>
  <div id="M000968_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 606</span>
606:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">frame_set_pos</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
607:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@frames</span>[<span class="ruby-value">0</span>]
608:       <span class="ruby-ivar">@frames</span>[<span class="ruby-value">0</span>][<span class="ruby-value">1</span>] = <span class="ruby-identifier">file</span>
609:       <span class="ruby-ivar">@frames</span>[<span class="ruby-value">0</span>][<span class="ruby-value">2</span>] = <span class="ruby-identifier">line</span>
610:     <span class="ruby-keyword kw">end</span>
611:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000972" class="method">
  <div id="M000972_title" class="title">
    <b>line_at</b>(file, line)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000972_source')" id="l_M000972_source">show source</a> ]</p>
  <div id="M000972_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 648</span>
648:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">line_at</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
649:     <span class="ruby-identifier">lines</span> = <span class="ruby-constant">SCRIPT_LINES__</span>[<span class="ruby-identifier">file</span>]
650:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span>
651:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">lines</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">true</span>
652:       <span class="ruby-identifier">line</span> = <span class="ruby-identifier">lines</span>[<span class="ruby-identifier">line</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
653:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span>
654:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">line</span>
655:     <span class="ruby-keyword kw">end</span>
656:     <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;\n&quot;</span>
657:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000941" class="method">
  <div id="M000941_title" class="title">
    <b>readline</b>(prompt, hist)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000941_source')" id="l_M000941_source">show source</a> ]</p>
  <div id="M000941_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 68</span>
68:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">hist</span>)
69:       <span class="ruby-constant">Readline</span><span class="ruby-operator">::</span><span class="ruby-identifier">readline</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">hist</span>)
70:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000942" class="method">
  <div id="M000942_title" class="title">
    <b>readline</b>(prompt, hist)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000942_source')" id="l_M000942_source">show source</a> ]</p>
  <div id="M000942_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 72</span>
72:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">readline</span>(<span class="ruby-identifier">prompt</span>, <span class="ruby-identifier">hist</span>)
73:       <span class="ruby-constant">STDOUT</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">prompt</span>
74:       <span class="ruby-constant">STDOUT</span>.<span class="ruby-identifier">flush</span>
75:       <span class="ruby-identifier">line</span> = <span class="ruby-constant">STDIN</span>.<span class="ruby-identifier">gets</span>
76:       <span class="ruby-identifier">exit</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">line</span>
77:       <span class="ruby-identifier">line</span>.<span class="ruby-identifier">chomp!</span>
78:       <span class="ruby-identifier">line</span>
79:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000948" class="method">
  <div id="M000948_title" class="title">
    <b>resume_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000948_source')" id="l_M000948_source">show source</a> ]</p>
  <div id="M000948_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">resume_all</span>
117:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">resume</span>
118:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000957" class="method">
  <div id="M000957_title" class="title">
    <b>set_last_thread</b>(th)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000957_source')" id="l_M000957_source">show source</a> ]</p>
  <div id="M000957_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_last_thread</span>(<span class="ruby-identifier">th</span>)
159:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">set_last_thread</span>(<span class="ruby-identifier">th</span>)
160:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000945" class="method">
  <div id="M000945_title" class="title">
    <b>set_suspend</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000945_source')" id="l_M000945_source">show source</a> ]</p>
  <div id="M000945_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_suspend</span>
105:     <span class="ruby-ivar">@suspend_next</span> = <span class="ruby-keyword kw">true</span>
106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000951" class="method">
  <div id="M000951_title" class="title">
    <b>set_trace</b>(arg)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000951_source')" id="l_M000951_source">show source</a> ]</p>
  <div id="M000951_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_trace</span>(<span class="ruby-identifier">arg</span>)
135:     <span class="ruby-ivar">@trace</span> = <span class="ruby-identifier">arg</span>
136:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000956" class="method">
  <div id="M000956_title" class="title">
    <b>set_trace_all</b>(arg)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000956_source')" id="l_M000956_source">show source</a> ]</p>
  <div id="M000956_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_trace_all</span>(<span class="ruby-identifier">arg</span>)
155:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">set_trace</span>(<span class="ruby-identifier">arg</span>)
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000952" class="method">
  <div id="M000952_title" class="title">
    <b>stdout</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000952_source')" id="l_M000952_source">show source</a> ]</p>
  <div id="M000952_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stdout</span>
139:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">stdout</span>
140:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000944" class="method">
  <div id="M000944_title" class="title">
    <b>stop_next</b>(n=1)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000944_source')" id="l_M000944_source">show source</a> ]</p>
  <div id="M000944_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">stop_next</span>(<span class="ruby-identifier">n</span>=<span class="ruby-value">1</span>)
101:     <span class="ruby-ivar">@stop_next</span> = <span class="ruby-identifier">n</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000947" class="method">
  <div id="M000947_title" class="title">
    <b>suspend_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000947_source')" id="l_M000947_source">show source</a> ]</p>
  <div id="M000947_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">suspend_all</span>
113:     <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">suspend</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000963" class="method">
  <div id="M000963_title" class="title">
    <b>thnum</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000963_source')" id="l_M000963_source">show source</a> ]</p>
  <div id="M000963_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 247</span>
247:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">thnum</span>
248:     <span class="ruby-identifier">num</span> = <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@thread_list</span>[<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>]}
249:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">num</span>
250:       <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">make_thread_list</span>
251:       <span class="ruby-identifier">num</span> = <span class="ruby-constant">DEBUGGER__</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-ivar">@thread_list</span>[<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>]}
252:     <span class="ruby-keyword kw">end</span>
253:     <span class="ruby-identifier">num</span>
254:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000950" class="method">
  <div id="M000950_title" class="title">
    <b>trace?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000950_source')" id="l_M000950_source">show source</a> ]</p>
  <div id="M000950_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trace?</span>
131:     <span class="ruby-ivar">@trace</span>
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000976" class="method">
  <div id="M000976_title" class="title">
    <b>trace_func</b>(event, file, line, id, binding, klass)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000976_source')" id="l_M000976_source">show source</a> ]</p>
  <div id="M000976_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 710</span>
710:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trace_func</span>(<span class="ruby-identifier">event</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">klass</span>)
711:     <span class="ruby-constant">Tracer</span>.<span class="ruby-identifier">trace_func</span>(<span class="ruby-identifier">event</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">klass</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">trace?</span>
712:     <span class="ruby-identifier">context</span>(<span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>).<span class="ruby-identifier">check_suspend</span>
713:     <span class="ruby-ivar">@file</span> = <span class="ruby-identifier">file</span>
714:     <span class="ruby-ivar">@line</span> = <span class="ruby-identifier">line</span>
715:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">event</span>
716:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'line'</span>
717:       <span class="ruby-identifier">frame_set_pos</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
718:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@no_step</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@no_step</span>
719:         <span class="ruby-ivar">@stop_next</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
720:         <span class="ruby-ivar">@stop_next</span> = <span class="ruby-value">-1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@stop_next</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
721:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@no_step</span>
722:         <span class="ruby-ivar">@stop_next</span> = <span class="ruby-value">0</span>         <span class="ruby-comment cmt"># break here before leaving...</span>
723:       <span class="ruby-keyword kw">else</span>
724:         <span class="ruby-comment cmt"># nothing to do. skipped.</span>
725:       <span class="ruby-keyword kw">end</span>
726:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@stop_next</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">check_break_points</span>(<span class="ruby-identifier">file</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">id</span>)
727:         <span class="ruby-ivar">@no_step</span> = <span class="ruby-keyword kw">nil</span>
728:         <span class="ruby-identifier">suspend_all</span>
729:         <span class="ruby-identifier">debug_command</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
730:       <span class="ruby-keyword kw">end</span>
731: 
732:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'call'</span>
733:       <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">unshift</span> [<span class="ruby-identifier">binding</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>]
734:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">check_break_points</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">id</span>.<span class="ruby-identifier">id2name</span>, <span class="ruby-identifier">binding</span>, <span class="ruby-identifier">id</span>)
735:         <span class="ruby-identifier">suspend_all</span>
736:         <span class="ruby-identifier">debug_command</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
737:       <span class="ruby-keyword kw">end</span>
738: 
739:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'c-call'</span>
740:       <span class="ruby-identifier">frame_set_pos</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>)
741: 
742:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'class'</span>
743:       <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">unshift</span> [<span class="ruby-identifier">binding</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>]
744: 
745:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'return'</span>, <span class="ruby-value str">'end'</span>
746:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@finish_pos</span>
747:         <span class="ruby-ivar">@stop_next</span> = <span class="ruby-value">1</span>
748:         <span class="ruby-ivar">@finish_pos</span> = <span class="ruby-value">0</span>
749:       <span class="ruby-keyword kw">end</span>
750:       <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">shift</span>
751: 
752:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'end'</span>
753:       <span class="ruby-ivar">@frames</span>.<span class="ruby-identifier">shift</span>
754: 
755:     <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'raise'</span> 
756:       <span class="ruby-identifier">excn_handle</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">id</span>, <span class="ruby-identifier">binding</span>)
757: 
758:     <span class="ruby-keyword kw">end</span>
759:     <span class="ruby-ivar">@last_file</span> = <span class="ruby-identifier">file</span>
760:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000960" class="method">
  <div id="M000960_title" class="title">
    <b>var_list</b>(ary, binding)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000960_source')" id="l_M000960_source">show source</a> ]</p>
  <div id="M000960_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/debug.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">var_list</span>(<span class="ruby-identifier">ary</span>, <span class="ruby-identifier">binding</span>)
184:     <span class="ruby-identifier">ary</span>.<span class="ruby-identifier">sort!</span>
185:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">v</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">ary</span>
186:       <span class="ruby-identifier">stdout</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;  %s =&gt; %s\n&quot;</span>, <span class="ruby-identifier">v</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">v</span>, <span class="ruby-identifier">binding</span>).<span class="ruby-identifier">inspect</span>
187:     <span class="ruby-keyword kw">end</span>
188:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>