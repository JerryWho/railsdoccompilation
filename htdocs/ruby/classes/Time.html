  <div id="C00000015">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Time<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/time_c.html');">ruby-1.8.7-p22/time.c</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/date_rb.html');">ruby-1.8.7-p22/lib/date.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/rss/rss_rb.html');">ruby-1.8.7-p22/lib/rss/rss.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/time_rb.html');">ruby-1.8.7-p22/lib/time.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/yaml/rubytypes_rb.html');">ruby-1.8.7-p22/lib/yaml/rubytypes.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
Implements the extensions to the <a
href="index.html?a=C00000015&name=Time">Time</a> class that are described
in the documentation for the time.rb library.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000229&name=+" >+</a></li>
  <li><a href="index.html?a=M000230&name=-" >-</a></li>
  <li><a href="index.html?a=M000214&name=&lt;=&gt;" >&lt;=&gt;</a></li>
  <li><a href="index.html?a=M000254&name=_dump" >_dump</a></li>
  <li><a href="index.html?a=M000255&name=_load" >_load</a></li>
  <li><a href="index.html?a=M000225&name=asctime" >asctime</a></li>
  <li><a href="index.html?a=M000206&name=at" >at</a></li>
  <li><a href="index.html?a=M000224&name=ctime" >ctime</a></li>
  <li><a href="index.html?a=M000236&name=day" >day</a></li>
  <li><a href="index.html?a=M000243&name=dst?" >dst?</a></li>
  <li><a href="index.html?a=M000215&name=eql?" >eql?</a></li>
  <li><a href="index.html?a=M000222&name=getgm" >getgm</a></li>
  <li><a href="index.html?a=M000221&name=getlocal" >getlocal</a></li>
  <li><a href="index.html?a=M000223&name=getutc" >getutc</a></li>
  <li><a href="index.html?a=M000208&name=gm" >gm</a></li>
  <li><a href="index.html?a=M000249&name=gmt?" >gmt?</a></li>
  <li><a href="index.html?a=M000246&name=gmt_offset" >gmt_offset</a></li>
  <li><a href="index.html?a=M000219&name=gmtime" >gmtime</a></li>
  <li><a href="index.html?a=M000245&name=gmtoff" >gmtoff</a></li>
  <li><a href="index.html?a=M000216&name=hash" >hash</a></li>
  <li><a href="index.html?a=M000234&name=hour" >hour</a></li>
  <li><a href="index.html?a=M000267&name=httpdate" >httpdate</a></li>
  <li><a href="index.html?a=M000263&name=httpdate" >httpdate</a></li>
  <li><a href="index.html?a=M000227&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M000242&name=isdst" >isdst</a></li>
  <li><a href="index.html?a=M000269&name=iso8601" >iso8601</a></li>
  <li><a href="index.html?a=M000209&name=local" >local</a></li>
  <li><a href="index.html?a=M000218&name=localtime" >localtime</a></li>
  <li><a href="index.html?a=M000256&name=marshal_dump" >marshal_dump</a></li>
  <li><a href="index.html?a=M000257&name=marshal_load" >marshal_load</a></li>
  <li><a href="index.html?a=M000235&name=mday" >mday</a></li>
  <li><a href="index.html?a=M000233&name=min" >min</a></li>
  <li><a href="index.html?a=M000210&name=mktime" >mktime</a></li>
  <li><a href="index.html?a=M000237&name=mon" >mon</a></li>
  <li><a href="index.html?a=M000238&name=month" >month</a></li>
  <li><a href="index.html?a=M000217&name=new" >new</a></li>
  <li><a href="index.html?a=M000205&name=now" >now</a></li>
  <li><a href="index.html?a=M000261&name=parse" >parse</a></li>
  <li><a href="index.html?a=M000262&name=rfc2822" >rfc2822</a></li>
  <li><a href="index.html?a=M000265&name=rfc2822" >rfc2822</a></li>
  <li><a href="index.html?a=M000266&name=rfc822" >rfc822</a></li>
  <li><a href="index.html?a=M000232&name=sec" >sec</a></li>
  <li><a href="index.html?a=M000253&name=strftime" >strftime</a></li>
  <li><a href="index.html?a=M000231&name=succ" >succ</a></li>
  <li><a href="index.html?a=M000211&name=times" >times</a></li>
  <li><a href="index.html?a=M000228&name=to_a" >to_a</a></li>
  <li><a href="index.html?a=M000213&name=to_f" >to_f</a></li>
  <li><a href="index.html?a=M000212&name=to_i" >to_i</a></li>
  <li><a href="index.html?a=M000226&name=to_s" >to_s</a></li>
  <li><a href="index.html?a=M000271&name=to_yaml" >to_yaml</a></li>
  <li><a href="index.html?a=M000250&name=tv_sec" >tv_sec</a></li>
  <li><a href="index.html?a=M000251&name=tv_usec" >tv_usec</a></li>
  <li><a href="index.html?a=M000252&name=usec" >usec</a></li>
  <li><a href="index.html?a=M000220&name=utc" >utc</a></li>
  <li><a href="index.html?a=M000207&name=utc" >utc</a></li>
  <li><a href="index.html?a=M000248&name=utc?" >utc?</a></li>
  <li><a href="index.html?a=M000247&name=utc_offset" >utc_offset</a></li>
  <li><a href="index.html?a=M000258&name=w3cdtf" >w3cdtf</a></li>
  <li><a href="index.html?a=M000259&name=w3cdtf" >w3cdtf</a></li>
  <li><a href="index.html?a=M000240&name=wday" >wday</a></li>
  <li><a href="index.html?a=M000264&name=xmlschema" >xmlschema</a></li>
  <li><a href="index.html?a=M000268&name=xmlschema" >xmlschema</a></li>
  <li><a href="index.html?a=M000270&name=yaml_new" >yaml_new</a></li>
  <li><a href="index.html?a=M000241&name=yday" >yday</a></li>
  <li><a href="index.html?a=M000239&name=year" >year</a></li>
  <li><a href="index.html?a=M000244&name=zone" >zone</a></li>
  <li><a href="index.html?a=M000260&name=zone_offset" >zone_offset</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Comparable.html');">Comparable</a></li>
</ul>



  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">ZoneOffset</td>
    <td>=</td>
    <td class="attr-value">{       'UTC' =&gt; 0,       # ISO 8601       'Z' =&gt; 0,       # RFC 822       'UT' =&gt; 0, 'GMT' =&gt; 0,       'EST' =&gt; -5, 'EDT' =&gt; -4,       'CST' =&gt; -6, 'CDT' =&gt; -5,       'MST' =&gt; -7, 'MDT' =&gt; -6,       'PST' =&gt; -8, 'PDT' =&gt; -7,       # Following definition of military zones is original one.       # See RFC 1123 and RFC 2822 for the error in RFC 822.       'A' =&gt; +1, 'B' =&gt; +2, 'C' =&gt; +3, 'D' =&gt; +4,  'E' =&gt; +5,  'F' =&gt; +6,        'G' =&gt; +7, 'H' =&gt; +8, 'I' =&gt; +9, 'K' =&gt; +10, 'L' =&gt; +11, 'M' =&gt; +12,       'N' =&gt; -1, 'O' =&gt; -2, 'P' =&gt; -3, 'Q' =&gt; -4,  'R' =&gt; -5,  'S' =&gt; -6,        'T' =&gt; -7, 'U' =&gt; -8, 'V' =&gt; -9, 'W' =&gt; -10, 'X' =&gt; -11, 'Y' =&gt; -12,     }</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">LeapYearMonthDays</td>
    <td>=</td>
    <td class="attr-value">[31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">CommonYearMonthDays</td>
    <td>=</td>
    <td class="attr-value">[31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MonthValue</td>
    <td>=</td>
    <td class="attr-value">{       'JAN' =&gt; 1, 'FEB' =&gt; 2, 'MAR' =&gt; 3, 'APR' =&gt; 4, 'MAY' =&gt; 5, 'JUN' =&gt; 6,       'JUL' =&gt; 7, 'AUG' =&gt; 8, 'SEP' =&gt; 9, 'OCT' =&gt;10, 'NOV' =&gt;11, 'DEC' =&gt;12</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">RFC2822_DAY_NAME</td>
    <td>=</td>
    <td class="attr-value">[     'Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">RFC2822_MONTH_NAME</td>
    <td>=</td>
    <td class="attr-value">[     'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',     'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M000255" class="method">
  <div id="M000255_title" class="title">
    <b>Time._load(string)   => time<br />
</b>
  </div>
  <div class="description">
  <p>
Unmarshal a dumped <tt><a
href="index.html?a=C00000015&name=Time">Time</a></tt> object.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000255_source')" id="l_M000255_source">show source</a> ]</p>
  <div id="M000255_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   Time._load(string)   =&gt; time
 *
 * Unmarshal a dumped +Time+ object.
 */

static VALUE
time_load(klass, str)
    VALUE klass, str;
{
    VALUE time = time_s_alloc(klass);

    if (FL_TEST(str, FL_EXIVAR)) {
        rb_copy_generic_ivar(time, str);
        FL_SET(time, FL_EXIVAR);
    }
    time_mload(time, str);
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000206" class="method">
  <div id="M000206_title" class="title">
    <b>Time.at( aTime ) => time<br />
Time.at( seconds [, microseconds] ) => time<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a new time object with the value given by <em>aTime</em>, or the
given number of <em>seconds</em> (and optional <em>microseconds</em>) from
epoch. A non-portable feature allows the offset to be negative on some
systems.
</p>
<pre>
   Time.at(0)            #=&gt; Wed Dec 31 18:00:00 CST 1969
   Time.at(946702800)    #=&gt; Fri Dec 31 23:00:00 CST 1999
   Time.at(-284061600)   #=&gt; Sat Dec 31 00:00:00 CST 1960
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000206_source')" id="l_M000206_source">show source</a> ]</p>
  <div id="M000206_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.at( aTime ) =&gt; time
 *     Time.at( seconds [, microseconds] ) =&gt; time
 *  
 *  Creates a new time object with the value given by &lt;i&gt;aTime&lt;/i&gt;, or
 *  the given number of &lt;i&gt;seconds&lt;/i&gt; (and optional
 *  &lt;i&gt;microseconds&lt;/i&gt;) from epoch. A non-portable feature allows the
 *  offset to be negative on some systems.
 *     
 *     Time.at(0)            #=&gt; Wed Dec 31 18:00:00 CST 1969
 *     Time.at(946702800)    #=&gt; Fri Dec 31 23:00:00 CST 1999
 *     Time.at(-284061600)   #=&gt; Sat Dec 31 00:00:00 CST 1960
 */

static VALUE
time_s_at(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    struct timeval tv;
    VALUE time, t;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;time, &amp;t) == 2) {
        tv.tv_sec = NUM2LONG(time);
        tv.tv_usec = NUM2LONG(t);
    }
    else {
        tv = rb_time_timeval(time);
    }
    t = time_new_internal(klass, tv.tv_sec, tv.tv_usec);
    if (TYPE(time) == T_DATA &amp;&amp; RDATA(time)-&gt;dfree == time_free) {
        struct time_object *tobj, *tobj2;

        GetTimeval(time, tobj);
        GetTimeval(t, tobj2);
        tobj2-&gt;gmt = tobj-&gt;gmt;
    }
    return t;
}
</pre>
  </div>
</div>
</div>
<div id="M000208" class="method">
  <div id="M000208_title" class="title">
    <b>Time.utc( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.utc( sec, min, hour, day, month, year, wday, yday, isdst, tz<br />
) => time<br />
Time.gm( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.gm( sec, min, hour, day, month, year, wday, yday, isdst, tz<br />
) => time<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a time based on given values, interpreted as UTC (GMT). The year
must be specified. Other values default to the minimum value for that field
(and may be <tt>nil</tt> or omitted). Months may be specified by numbers
from 1 to 12, or by the three-letter English month names. Hours are
specified on a 24-hour clock (0..23). Raises an <tt><a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a></tt> if
any values are out of range. Will also accept ten arguments in the order
output by <tt><a
href="index.html?a=M000228&name=Time#to_a">Time#to_a</a></tt>.
</p>
<pre>
   Time.utc(2000,&quot;jan&quot;,1,20,15,1)  #=&gt; Sat Jan 01 20:15:01 UTC 2000
   Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000208_source')" id="l_M000208_source">show source</a> ]</p>
  <div id="M000208_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.utc( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.utc( sec, min, hour, day, month, year, wday, yday, isdst, tz
 *     ) =&gt; time
 *     Time.gm( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.gm( sec, min, hour, day, month, year, wday, yday, isdst, tz
 *     ) =&gt; time
 *     
 *  Creates a time based on given values, interpreted as UTC (GMT). The
 *  year must be specified. Other values default to the minimum value
 *  for that field (and may be &lt;code&gt;nil&lt;/code&gt; or omitted). Months may
 *  be specified by numbers from 1 to 12, or by the three-letter English
 *  month names. Hours are specified on a 24-hour clock (0..23). Raises
 *  an &lt;code&gt;ArgumentError&lt;/code&gt; if any values are out of range. Will
 *  also accept ten arguments in the order output by
 *  &lt;code&gt;Time#to_a&lt;/code&gt;.
 *
 *     Time.utc(2000,&quot;jan&quot;,1,20,15,1)  #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 */
static VALUE
time_s_mkutc(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    return time_utc_or_local(argc, argv, Qtrue, klass);
}
</pre>
  </div>
</div>
</div>
<div id="M000263" class="method">
  <div id="M000263_title" class="title">
    <b>httpdate</b>(date)
  </div>
  <div class="description">
  <p>
Parses <tt>date</tt> as HTTP-date defined by RFC 2616 and converts it to a
<a href="index.html?a=C00000015&name=Time">Time</a> object.
</p>
<p>
<a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> is
raised if <tt>date</tt> is not compliant with RFC 2616 or <a
href="index.html?a=C00000015&name=Time">Time</a> class cannot represent
specified date.
</p>
<p>
See <a href="index.html?a=M000263&name=httpdate">httpdate</a> for more
information on this format.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000263_source')" id="l_M000263_source">show source</a> ]</p>
  <div id="M000263_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 310</span>
310:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">httpdate</span>(<span class="ruby-identifier">date</span>)
311:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\s*
312:           (?:Mon|Tue|Wed|Thu|Fri|Sat|Sun),\x20
313:           (\d{2})\x20
314:           (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\x20
315:           (\d{4})\x20
316:           (\d{2}):(\d{2}):(\d{2})\x20
317:           GMT
318:           \s*\z/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span>
319:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rfc2822</span>(<span class="ruby-identifier">date</span>)
320:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/\A\s*
321:              (?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday),\x20
322:              (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d)\x20
323:              (\d\d):(\d\d):(\d\d)\x20
324:              GMT
325:              \s*\z/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span>
326:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">date</span>)
327:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/\A\s*
328:              (?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)\x20
329:              (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\x20
330:              (\d\d|\x20\d)\x20
331:              (\d\d):(\d\d):(\d\d)\x20
332:              (\d{4})
333:              \s*\z/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span>
334:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-identifier">$6</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-constant">MonthValue</span>[<span class="ruby-identifier">$1</span>.<span class="ruby-identifier">upcase</span>], <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_i</span>,
335:                  <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$4</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$5</span>.<span class="ruby-identifier">to_i</span>)
336:       <span class="ruby-keyword kw">else</span>
337:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;not RFC 2616 compliant date: #{date.inspect}&quot;</span>)
338:       <span class="ruby-keyword kw">end</span>
339:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000209" class="method">
  <div id="M000209_title" class="title">
    <b>Time.local( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.local( sec, min, hour, day, month, year, wday, yday, isdst,<br />
tz ) => time<br />
Time.mktime( year, month, day, hour, min, sec, usec )   => time<br />
</b>
  </div>
  <div class="description">
  <p>
Same as <tt>Time::gm</tt>, but interprets the values in the local time
zone.
</p>
<pre>
   Time.local(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000209_source')" id="l_M000209_source">show source</a> ]</p>
  <div id="M000209_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.local( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.local( sec, min, hour, day, month, year, wday, yday, isdst,
 *     tz ) =&gt; time
 *     Time.mktime( year, month, day, hour, min, sec, usec )   =&gt; time
 *  
 *  Same as &lt;code&gt;Time::gm&lt;/code&gt;, but interprets the values in the
 *  local time zone.
 *     
 *     Time.local(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
 */

static VALUE
time_s_mktime(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    return time_utc_or_local(argc, argv, Qfalse, klass);
}
</pre>
  </div>
</div>
</div>
<div id="M000210" class="method">
  <div id="M000210_title" class="title">
    <b>Time.local( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.local( sec, min, hour, day, month, year, wday, yday, isdst,<br />
tz ) => time<br />
Time.mktime( year, month, day, hour, min, sec, usec )   => time<br />
</b>
  </div>
  <div class="description">
  <p>
Same as <tt>Time::gm</tt>, but interprets the values in the local time
zone.
</p>
<pre>
   Time.local(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000210_source')" id="l_M000210_source">show source</a> ]</p>
  <div id="M000210_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.local( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.local( sec, min, hour, day, month, year, wday, yday, isdst,
 *     tz ) =&gt; time
 *     Time.mktime( year, month, day, hour, min, sec, usec )   =&gt; time
 *  
 *  Same as &lt;code&gt;Time::gm&lt;/code&gt;, but interprets the values in the
 *  local time zone.
 *     
 *     Time.local(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
 */

static VALUE
time_s_mktime(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    return time_utc_or_local(argc, argv, Qfalse, klass);
}
</pre>
  </div>
</div>
</div>
<div id="M000217" class="method">
  <div id="M000217_title" class="title">
    <b>Time.new &rarr; time<br />
</b>
  </div>
  <div class="description">
  <p>
Document-method: now
</p>
<p>
Synonym for <tt><a
href="index.html?a=M000217&name=Time.new">Time.new</a></tt>. Returns a
<tt><a href="index.html?a=C00000015&name=Time">Time</a></tt> object
initialized tot he current system time.
</p>
<p>
Returns a <tt><a href="index.html?a=C00000015&name=Time">Time</a></tt>
object initialized to the current system time. <b>Note:</b> The object
created will be created using the resolution available on your system
clock, and so may include fractional seconds.
</p>
<pre>
   a = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
   b = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
   a == b            #=&gt; false
   &quot;%.6f&quot; % a.to_f   #=&gt; &quot;1049896563.230740&quot;
   &quot;%.6f&quot; % b.to_f   #=&gt; &quot;1049896563.231466&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000217_source')" id="l_M000217_source">show source</a> ]</p>
  <div id="M000217_source" class="dyn-source">
<pre>
/*
 *  Document-method: now
 *
 *  Synonym for &lt;code&gt;Time.new&lt;/code&gt;. Returns a +Time+ object
 *  initialized tot he current system time.
 *
 *  call-seq:
 *     Time.new -&gt; time
 *  
 *  Returns a &lt;code&gt;Time&lt;/code&gt; object initialized to the current system
 *  time. &lt;b&gt;Note:&lt;/b&gt; The object created will be created using the
 *  resolution available on your system clock, and so may include
 *  fractional seconds.
 *     
 *     a = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     b = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     a == b            #=&gt; false
 *     &quot;%.6f&quot; % a.to_f   #=&gt; &quot;1049896563.230740&quot;
 *     &quot;%.6f&quot; % b.to_f   #=&gt; &quot;1049896563.231466&quot;
 *     
 */

static VALUE
time_init(time)
    VALUE time;
{
    struct time_object *tobj;

    time_modify(time);
    GetTimeval(time, tobj);
    tobj-&gt;tm_got=0;
    tobj-&gt;tv.tv_sec = 0;
    tobj-&gt;tv.tv_usec = 0;
    if (gettimeofday(&amp;tobj-&gt;tv, 0) &lt; 0) {
        rb_sys_fail(&quot;gettimeofday&quot;);
    }

    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000205" class="method">
  <div id="M000205_title" class="title">
    <b>Time.new &rarr; time<br />
</b>
  </div>
  <div class="description">
  <p>
Synonym for <tt><a
href="index.html?a=M000217&name=Time.new">Time.new</a></tt>. Returns a
<tt><a href="index.html?a=C00000015&name=Time">Time</a></tt> object
initialized tot he current system time.
</p>
<p>
Returns a <tt><a href="index.html?a=C00000015&name=Time">Time</a></tt>
object initialized to the current system time. <b>Note:</b> The object
created will be created using the resolution available on your system
clock, and so may include fractional seconds.
</p>
<pre>
   a = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
   b = Time.new      #=&gt; Wed Apr 09 08:56:03 CDT 2003
   a == b            #=&gt; false
   &quot;%.6f&quot; % a.to_f   #=&gt; &quot;1049896563.230740&quot;
   &quot;%.6f&quot; % b.to_f   #=&gt; &quot;1049896563.231466&quot;
</pre>
  </div>
</div>
<div id="M000261" class="method">
  <div id="M000261_title" class="title">
    <b>parse</b>(date, now=self.now) {|year| ...}
  </div>
  <div class="description">
  <p>
Parses <tt>date</tt> using <a
href="index.html?a=M000589&name=Date._parse">Date._parse</a> and converts
it to a <a href="index.html?a=C00000015&name=Time">Time</a> object.
</p>
<p>
If a block is given, the year described in <tt>date</tt> is converted by
the block. For example:
</p>
<pre>
    Time.parse(...) {|y| y &lt; 100 ? (y &gt;= 69 ? y + 1900 : y + 2000) : y}
</pre>
<p>
If the upper components of the given time are broken or missing, they are
supplied with those of <tt>now</tt>. For the lower components, the minimum
values (1 or 0) are assumed if broken or missing. For example:
</p>
<pre>
    # Suppose it is &quot;Thu Nov 29 14:33:20 GMT 2001&quot; now and
    # your timezone is GMT:
    Time.parse(&quot;16:30&quot;)     #=&gt; Thu Nov 29 16:30:00 GMT 2001
    Time.parse(&quot;7/23&quot;)      #=&gt; Mon Jul 23 00:00:00 GMT 2001
    Time.parse(&quot;Aug 31&quot;)    #=&gt; Fri Aug 31 00:00:00 GMT 2001
</pre>
<p>
Since there are numerous conflicts among locally defined timezone
abbreviations all over the world, this method is not made to understand all
of them. For example, the abbreviation &quot;CST&quot; is used variously
as:
</p>
<pre>
    -06:00 in America/Chicago,
    -05:00 in America/Havana,
    +08:00 in Asia/Harbin,
    +09:30 in Australia/Darwin,
    +10:30 in Australia/Adelaide,
    etc.
</pre>
<p>
Based on the fact, this method only understands the timezone abbreviations
described in RFC 822 and the system timezone, in the order named. (i.e. a
definition in RFC 822 overrides the system timezone definition.) The system
timezone is taken from <tt><a
href="index.html?a=M000209&name=Time.local">Time.local</a>(year, 1,
1).zone</tt> and <tt><a
href="index.html?a=M000209&name=Time.local">Time.local</a>(year, 7,
1).zone</tt>. If the extracted timezone abbreviation does not match any of
them, it is ignored and the given time is regarded as a local time.
</p>
<p>
<a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> is
raised if <a href="index.html?a=M000589&name=Date._parse">Date._parse</a>
cannot extract information from <tt>date</tt> or <a
href="index.html?a=C00000015&name=Time">Time</a> class cannot represent
specified date.
</p>
<p>
This method can be used as fail-safe for other parsing methods as:
</p>
<pre>
  Time.rfc2822(date) rescue Time.parse(date)
  Time.httpdate(date) rescue Time.parse(date)
  Time.xmlschema(date) rescue Time.parse(date)
</pre>
<p>
A failure for <a href="index.html?a=M000261&name=Time.parse">Time.parse</a>
should be checked, though.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000261_source')" id="l_M000261_source">show source</a> ]</p>
  <div id="M000261_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 239</span>
239:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse</span>(<span class="ruby-identifier">date</span>, <span class="ruby-identifier">now</span>=<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">now</span>)
240:       <span class="ruby-identifier">d</span> = <span class="ruby-constant">Date</span>.<span class="ruby-identifier">_parse</span>(<span class="ruby-identifier">date</span>, <span class="ruby-keyword kw">false</span>)
241:       <span class="ruby-identifier">year</span> = <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:year</span>]
242:       <span class="ruby-identifier">year</span> = <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">year</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">year</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block_given?</span>
243:       <span class="ruby-identifier">make_time</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:mon</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:mday</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:hour</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:min</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:sec</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:sec_fraction</span>], <span class="ruby-identifier">d</span>[<span class="ruby-identifier">:zone</span>], <span class="ruby-identifier">now</span>)
244:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000262" class="method">
  <div id="M000262_title" class="title">
    <b>rfc2822</b>(date)
  </div>
  <div class="description">
  <p>
Parses <tt>date</tt> as date-time defined by RFC 2822 and converts it to a
<a href="index.html?a=C00000015&name=Time">Time</a> object. The format is
identical to the date format defined by RFC 822 and updated by RFC 1123.
</p>
<p>
<a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> is
raised if <tt>date</tt> is not compliant with RFC 2822 or <a
href="index.html?a=C00000015&name=Time">Time</a> class cannot represent
specified date.
</p>
<p>
See <a href="index.html?a=M000262&name=rfc2822">rfc2822</a> for more
information on this format.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000262_source')" id="l_M000262_source">show source</a> ]</p>
  <div id="M000262_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 261</span>
261:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rfc2822</span>(<span class="ruby-identifier">date</span>)
262:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\s*
263:           (?:(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)\s*,\s*)?
264:           (\d{1,2})\s+
265:           (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s+
266:           (\d{2,})\s+
267:           (\d{2})\s*
268:           :\s*(\d{2})\s*
269:           (?::\s*(\d{2}))?\s+
270:           ([+-]\d{4}|
271:            UT|GMT|EST|EDT|CST|CDT|MST|MDT|PST|PDT|[A-IK-Z])/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span>
272:         <span class="ruby-comment cmt"># Since RFC 2822 permit comments, the regexp has no right anchor.</span>
273:         <span class="ruby-identifier">day</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
274:         <span class="ruby-identifier">mon</span> = <span class="ruby-constant">MonthValue</span>[<span class="ruby-identifier">$2</span>.<span class="ruby-identifier">upcase</span>]
275:         <span class="ruby-identifier">year</span> = <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">to_i</span>
276:         <span class="ruby-identifier">hour</span> = <span class="ruby-identifier">$4</span>.<span class="ruby-identifier">to_i</span>
277:         <span class="ruby-identifier">min</span> = <span class="ruby-identifier">$5</span>.<span class="ruby-identifier">to_i</span>
278:         <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$6</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">$6</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">:</span> <span class="ruby-value">0</span>
279:         <span class="ruby-identifier">zone</span> = <span class="ruby-identifier">$7</span>
280: 
281:         <span class="ruby-comment cmt"># following year completion is compliant with RFC 2822.</span>
282:         <span class="ruby-identifier">year</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">year</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">50</span>
283:                  <span class="ruby-value">2000</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">year</span>
284:                <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">year</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">1000</span>
285:                  <span class="ruby-value">1900</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">year</span>
286:                <span class="ruby-keyword kw">else</span>
287:                  <span class="ruby-identifier">year</span>
288:                <span class="ruby-keyword kw">end</span>
289: 
290:         <span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span> =
291:           <span class="ruby-identifier">apply_offset</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>, <span class="ruby-identifier">zone_offset</span>(<span class="ruby-identifier">zone</span>))
292:         <span class="ruby-identifier">t</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>)
293:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">localtime</span> <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">zone_utc?</span>(<span class="ruby-identifier">zone</span>)
294:         <span class="ruby-identifier">t</span>
295:       <span class="ruby-keyword kw">else</span>
296:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;not RFC 2822 compliant date: #{date.inspect}&quot;</span>)
297:       <span class="ruby-keyword kw">end</span>
298:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000211" class="method">
  <div id="M000211_title" class="title">
    <b>Time.times => struct_tms<br />
</b>
  </div>
  <div class="description">
  <p>
Deprecated in favor of <tt>Process::times</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000211_source')" id="l_M000211_source">show source</a> ]</p>
  <div id="M000211_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.times =&gt; struct_tms
 *  
 *  Deprecated in favor of &lt;code&gt;Process::times&lt;/code&gt;
 */

static VALUE
time_s_times(obj)
    VALUE obj;
{
    rb_warn(&quot;obsolete method Time::times; use Process::times&quot;);
    return rb_proc_times(obj);
}
</pre>
  </div>
</div>
</div>
<div id="M000207" class="method">
  <div id="M000207_title" class="title">
    <b>Time.utc( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.utc( sec, min, hour, day, month, year, wday, yday, isdst, tz<br />
) => time<br />
Time.gm( year [, month, day, hour, min, sec, usec] ) => time<br />
Time.gm( sec, min, hour, day, month, year, wday, yday, isdst, tz<br />
) => time<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a time based on given values, interpreted as UTC (GMT). The year
must be specified. Other values default to the minimum value for that field
(and may be <tt>nil</tt> or omitted). Months may be specified by numbers
from 1 to 12, or by the three-letter English month names. Hours are
specified on a 24-hour clock (0..23). Raises an <tt><a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a></tt> if
any values are out of range. Will also accept ten arguments in the order
output by <tt><a
href="index.html?a=M000228&name=Time#to_a">Time#to_a</a></tt>.
</p>
<pre>
   Time.utc(2000,&quot;jan&quot;,1,20,15,1)  #=&gt; Sat Jan 01 20:15:01 UTC 2000
   Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000207_source')" id="l_M000207_source">show source</a> ]</p>
  <div id="M000207_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     Time.utc( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.utc( sec, min, hour, day, month, year, wday, yday, isdst, tz
 *     ) =&gt; time
 *     Time.gm( year [, month, day, hour, min, sec, usec] ) =&gt; time
 *     Time.gm( sec, min, hour, day, month, year, wday, yday, isdst, tz
 *     ) =&gt; time
 *     
 *  Creates a time based on given values, interpreted as UTC (GMT). The
 *  year must be specified. Other values default to the minimum value
 *  for that field (and may be &lt;code&gt;nil&lt;/code&gt; or omitted). Months may
 *  be specified by numbers from 1 to 12, or by the three-letter English
 *  month names. Hours are specified on a 24-hour clock (0..23). Raises
 *  an &lt;code&gt;ArgumentError&lt;/code&gt; if any values are out of range. Will
 *  also accept ten arguments in the order output by
 *  &lt;code&gt;Time#to_a&lt;/code&gt;.
 *
 *     Time.utc(2000,&quot;jan&quot;,1,20,15,1)  #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 */
static VALUE
time_s_mkutc(argc, argv, klass)
    int argc;
    VALUE *argv;
    VALUE klass;
{
    return time_utc_or_local(argc, argv, Qtrue, klass);
}
</pre>
  </div>
</div>
</div>
<div id="M000258" class="method">
  <div id="M000258_title" class="title">
    <b>w3cdtf</b>(date)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000258_source')" id="l_M000258_source">show source</a> ]</p>
  <div id="M000258_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rss/rss.rb, line 6</span>
 6:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">w3cdtf</span>(<span class="ruby-identifier">date</span>)
 7:         <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\s*
 8:             (-?\d+)-(\d\d)-(\d\d)
 9:             (?:T
10:             (\d\d):(\d\d)(?::(\d\d))?
11:             (\.\d+)?
12:             (Z|[+-]\d\d:\d\d)?)?
13:             \s*\z/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span> <span class="ruby-keyword kw">and</span> ((<span class="ruby-identifier">$5</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">$8</span>) <span class="ruby-keyword kw">or</span> (<span class="ruby-operator">!</span><span class="ruby-identifier">$5</span> <span class="ruby-keyword kw">and</span> <span class="ruby-operator">!</span><span class="ruby-identifier">$8</span>))
14:           <span class="ruby-identifier">datetime</span> = [<span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$4</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$5</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-identifier">$6</span>.<span class="ruby-identifier">to_i</span>]
15:           <span class="ruby-identifier">usec</span> = <span class="ruby-value">0</span>
16:           <span class="ruby-identifier">usec</span> = <span class="ruby-identifier">$7</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">1000000</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$7</span>
17:           <span class="ruby-identifier">zone</span> = <span class="ruby-identifier">$8</span>
18:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">zone</span>
19:             <span class="ruby-identifier">off</span> = <span class="ruby-identifier">zone_offset</span>(<span class="ruby-identifier">zone</span>, <span class="ruby-identifier">datetime</span>[<span class="ruby-value">0</span>])
20:             <span class="ruby-identifier">datetime</span> = <span class="ruby-identifier">apply_offset</span>(<span class="ruby-operator">*</span>(<span class="ruby-identifier">datetime</span> <span class="ruby-operator">+</span> [<span class="ruby-identifier">off</span>]))
21:             <span class="ruby-identifier">datetime</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">usec</span>
22:             <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">datetime</span>)
23:             <span class="ruby-identifier">time</span>.<span class="ruby-identifier">localtime</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">zone_utc?</span>(<span class="ruby-identifier">zone</span>)
24:             <span class="ruby-identifier">time</span>
25:           <span class="ruby-keyword kw">else</span>
26:             <span class="ruby-identifier">datetime</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">usec</span>
27:             <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">datetime</span>)
28:           <span class="ruby-keyword kw">end</span>
29:         <span class="ruby-keyword kw">else</span>
30:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;invalid date: #{date.inspect}&quot;</span>)
31:         <span class="ruby-keyword kw">end</span>
32:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000264" class="method">
  <div id="M000264_title" class="title">
    <b>xmlschema</b>(date)
  </div>
  <div class="description">
  <p>
Parses <tt>date</tt> as dateTime defined by <a
href="index.html?a=C00000959&name=XML">XML</a> Schema and converts it to a
<a href="index.html?a=C00000015&name=Time">Time</a> object. The format is
restricted version of the format defined by ISO 8601.
</p>
<p>
<a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> is
raised if <tt>date</tt> is not compliant with the format or <a
href="index.html?a=C00000015&name=Time">Time</a> class cannot represent
specified date.
</p>
<p>
See <a href="index.html?a=M000264&name=xmlschema">xmlschema</a> for more
information on this format.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000264_source')" id="l_M000264_source">show source</a> ]</p>
  <div id="M000264_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 351</span>
351:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xmlschema</span>(<span class="ruby-identifier">date</span>)
352:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A\s*
353:           (-?\d+)-(\d\d)-(\d\d)
354:           T
355:           (\d\d):(\d\d):(\d\d)
356:           (\.\d*)?
357:           (Z|[+-]\d\d:\d\d)?
358:           \s*\z/i</span><span class="ruby-identifier">x</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">date</span>
359:         <span class="ruby-identifier">year</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
360:         <span class="ruby-identifier">mon</span> = <span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_i</span>
361:         <span class="ruby-identifier">day</span> = <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">to_i</span>
362:         <span class="ruby-identifier">hour</span> = <span class="ruby-identifier">$4</span>.<span class="ruby-identifier">to_i</span>
363:         <span class="ruby-identifier">min</span> = <span class="ruby-identifier">$5</span>.<span class="ruby-identifier">to_i</span>
364:         <span class="ruby-identifier">sec</span> = <span class="ruby-identifier">$6</span>.<span class="ruby-identifier">to_i</span>
365:         <span class="ruby-identifier">usec</span> = <span class="ruby-value">0</span>
366:         <span class="ruby-identifier">usec</span> = (<span class="ruby-identifier">$7</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>] <span class="ruby-operator">+</span> <span class="ruby-value str">'000000'</span>)[<span class="ruby-value">0</span>,<span class="ruby-value">6</span>].<span class="ruby-identifier">to_i</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$7</span>
367:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$8</span>
368:           <span class="ruby-identifier">zone</span> = <span class="ruby-identifier">$8</span>
369:           <span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span> =
370:             <span class="ruby-identifier">apply_offset</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>, <span class="ruby-identifier">zone_offset</span>(<span class="ruby-identifier">zone</span>))
371:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>, <span class="ruby-identifier">usec</span>)
372:         <span class="ruby-keyword kw">else</span>
373:           <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">local</span>(<span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>, <span class="ruby-identifier">usec</span>)
374:         <span class="ruby-keyword kw">end</span>
375:       <span class="ruby-keyword kw">else</span>
376:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;invalid date: #{date.inspect}&quot;</span>)
377:       <span class="ruby-keyword kw">end</span>
378:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000270" class="method">
  <div id="M000270_title" class="title">
    <b>yaml_new</b>( klass, tag, val )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000270_source')" id="l_M000270_source">show source</a> ]</p>
  <div id="M000270_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/yaml/rubytypes.rb, line 303</span>
303:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">yaml_new</span>( <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">val</span> )
304:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Hash</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">val</span>
305:             <span class="ruby-identifier">t</span> = <span class="ruby-identifier">val</span>.<span class="ruby-identifier">delete</span>( <span class="ruby-value str">'at'</span> )
306:             <span class="ruby-identifier">val</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">instance_variable_set</span>( <span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span> ) }
307:             <span class="ruby-identifier">t</span>
308:         <span class="ruby-keyword kw">else</span>
309:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-constant">TypeError</span>, <span class="ruby-value str">&quot;Invalid Time: &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">inspect</span>
310:         <span class="ruby-keyword kw">end</span>
311:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000260" class="method">
  <div id="M000260_title" class="title">
    <b>zone_offset</b>(zone, year=self.now.year)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000260_source')" id="l_M000260_source">show source</a> ]</p>
  <div id="M000260_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 69</span>
69:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">zone_offset</span>(<span class="ruby-identifier">zone</span>, <span class="ruby-identifier">year</span>=<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">year</span>)
70:       <span class="ruby-identifier">off</span> = <span class="ruby-keyword kw">nil</span>
71:       <span class="ruby-identifier">zone</span> = <span class="ruby-identifier">zone</span>.<span class="ruby-identifier">upcase</span>
72:       <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/\A([+-])(\d\d):?(\d\d)\z/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">zone</span>
73:         <span class="ruby-identifier">off</span> = (<span class="ruby-identifier">$1</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">?</span> <span class="ruby-value">-1</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span>) <span class="ruby-operator">*</span> (<span class="ruby-identifier">$2</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">$3</span>.<span class="ruby-identifier">to_i</span>) <span class="ruby-operator">*</span> <span class="ruby-value">60</span>
74:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-regexp re">/\A[+-]\d\d\z/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">zone</span>
75:         <span class="ruby-identifier">off</span> = <span class="ruby-identifier">zone</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span>
76:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-constant">ZoneOffset</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">zone</span>)
77:         <span class="ruby-identifier">off</span> = <span class="ruby-constant">ZoneOffset</span>[<span class="ruby-identifier">zone</span>] <span class="ruby-operator">*</span> <span class="ruby-value">3600</span>
78:       <span class="ruby-keyword kw">elsif</span> ((<span class="ruby-identifier">t</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">local</span>(<span class="ruby-identifier">year</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)).<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">zone</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">false</span>)
79:         <span class="ruby-identifier">off</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">utc_offset</span>
80:       <span class="ruby-keyword kw">elsif</span> ((<span class="ruby-identifier">t</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">local</span>(<span class="ruby-identifier">year</span>, <span class="ruby-value">7</span>, <span class="ruby-value">1</span>)).<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">upcase</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">zone</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">false</span>)
81:         <span class="ruby-identifier">off</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">utc_offset</span>
82:       <span class="ruby-keyword kw">end</span>
83:       <span class="ruby-identifier">off</span>
84:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000229" class="method">
  <div id="M000229_title" class="title">
    <b>time + numeric => time<br />
</b>
  </div>
  <div class="description">
  <p>
Addition&#8212;Adds some number of seconds (possibly fractional) to
<em>time</em> and returns that value as a new time.
</p>
<pre>
   t = Time.now         #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t + (60 * 60 * 24)   #=&gt; Thu Apr 10 08:56:03 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000229_source')" id="l_M000229_source">show source</a> ]</p>
  <div id="M000229_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time + numeric =&gt; time
 *  
 *  Addition---Adds some number of seconds (possibly fractional) to
 *  &lt;i&gt;time&lt;/i&gt; and returns that value as a new time.
 *     
 *     t = Time.now         #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t + (60 * 60 * 24)   #=&gt; Thu Apr 10 08:56:03 CDT 2003
 */

static VALUE
time_plus(time1, time2)
    VALUE time1, time2;
{
    struct time_object *tobj;
    GetTimeval(time1, tobj);

    if (TYPE(time2) == T_DATA &amp;&amp; RDATA(time2)-&gt;dfree == time_free) {
        rb_raise(rb_eTypeError, &quot;time + time?&quot;);
    }
    return time_add(tobj, time2, 1);
}
</pre>
  </div>
</div>
</div>
<div id="M000230" class="method">
  <div id="M000230_title" class="title">
    <b>time - other_time => float<br />
time - numeric    => time<br />
</b>
  </div>
  <div class="description">
  <p>
Difference&#8212;Returns a new time that represents the difference between
two times, or subtracts the given number of seconds in <em>numeric</em>
from <em>time</em>.
</p>
<pre>
   t = Time.now       #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t2 = t + 2592000   #=&gt; Fri May 09 08:56:03 CDT 2003
   t2 - t             #=&gt; 2592000.0
   t2 - 2592000       #=&gt; Wed Apr 09 08:56:03 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000230_source')" id="l_M000230_source">show source</a> ]</p>
  <div id="M000230_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time - other_time =&gt; float
 *     time - numeric    =&gt; time
 *  
 *  Difference---Returns a new time that represents the difference
 *  between two times, or subtracts the given number of seconds in
 *  &lt;i&gt;numeric&lt;/i&gt; from &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now       #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t2 = t + 2592000   #=&gt; Fri May 09 08:56:03 CDT 2003
 *     t2 - t             #=&gt; 2592000.0
 *     t2 - 2592000       #=&gt; Wed Apr 09 08:56:03 CDT 2003
 */

static VALUE
time_minus(time1, time2)
    VALUE time1, time2;
{
    struct time_object *tobj;

    GetTimeval(time1, tobj);
    if (TYPE(time2) == T_DATA &amp;&amp; RDATA(time2)-&gt;dfree == time_free) {
        struct time_object *tobj2;
        double f;

        GetTimeval(time2, tobj2);
        f = (double)tobj-&gt;tv.tv_sec - (double)tobj2-&gt;tv.tv_sec;
        f += ((double)tobj-&gt;tv.tv_usec - (double)tobj2-&gt;tv.tv_usec)*1e-6;
        /* XXX: should check float overflow on 64bit time_t platforms */

        return rb_float_new(f);
    }
    return time_add(tobj, time2, -1);
}
</pre>
  </div>
</div>
</div>
<div id="M000214" class="method">
  <div id="M000214_title" class="title">
    <b>time <=> other_time => -1, 0, +1 <br />
time <=> numeric    => -1, 0, +1<br />
</b>
  </div>
  <div class="description">
  <p>
Comparison&#8212;Compares <em>time</em> with <em>other_time</em> or with
<em>numeric</em>, which is the number of seconds (possibly fractional)
since epoch.
</p>
<pre>
   t = Time.now       #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t2 = t + 2592000   #=&gt; Fri May 09 08:56:03 CDT 2003
   t &lt;=&gt; t2           #=&gt; -1
   t2 &lt;=&gt; t           #=&gt; 1
   t &lt;=&gt; t            #=&gt; 0
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000214_source')" id="l_M000214_source">show source</a> ]</p>
  <div id="M000214_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time &lt;=&gt; other_time =&gt; -1, 0, +1 
 *     time &lt;=&gt; numeric    =&gt; -1, 0, +1
 *  
 *  Comparison---Compares &lt;i&gt;time&lt;/i&gt; with &lt;i&gt;other_time&lt;/i&gt; or with
 *  &lt;i&gt;numeric&lt;/i&gt;, which is the number of seconds (possibly
 *  fractional) since epoch.
 *     
 *     t = Time.now       #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t2 = t + 2592000   #=&gt; Fri May 09 08:56:03 CDT 2003
 *     t &lt;=&gt; t2           #=&gt; -1
 *     t2 &lt;=&gt; t           #=&gt; 1
 *     t &lt;=&gt; t            #=&gt; 0
 */

static VALUE
time_cmp(time1, time2)
    VALUE time1, time2;
{
    struct time_object *tobj1, *tobj2;

    GetTimeval(time1, tobj1);
    if (TYPE(time2) == T_DATA &amp;&amp; RDATA(time2)-&gt;dfree == time_free) {
        GetTimeval(time2, tobj2);
        if (tobj1-&gt;tv.tv_sec == tobj2-&gt;tv.tv_sec) {
            if (tobj1-&gt;tv.tv_usec == tobj2-&gt;tv.tv_usec) return INT2FIX(0);
            if (tobj1-&gt;tv.tv_usec &gt; tobj2-&gt;tv.tv_usec) return INT2FIX(1);
            return INT2FIX(-1);
        }
        if (tobj1-&gt;tv.tv_sec &gt; tobj2-&gt;tv.tv_sec) return INT2FIX(1);
        return INT2FIX(-1);
    }

    return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M000254" class="method">
  <div id="M000254_title" class="title">
    <b>time._dump   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Dump <em>time</em> for marshaling.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000254_source')" id="l_M000254_source">show source</a> ]</p>
  <div id="M000254_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   time._dump   =&gt; string
 *
 * Dump _time_ for marshaling.
 */

static VALUE
time_dump(argc, argv, time)
    int argc;
    VALUE *argv;
    VALUE time;
{
    VALUE str;

    rb_scan_args(argc, argv, &quot;01&quot;, 0);
    str = time_mdump(time); 
    if (FL_TEST(time, FL_EXIVAR)) {
        rb_copy_generic_ivar(str, time);
        FL_SET(str, FL_EXIVAR);
    }

    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M000225" class="method">
  <div id="M000225_title" class="title">
    <b>time.asctime => string<br />
time.ctime   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a canonical string representation of <em>time</em>.
</p>
<pre>
   Time.now.asctime   #=&gt; &quot;Wed Apr  9 08:56:03 2003&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000225_source')" id="l_M000225_source">show source</a> ]</p>
  <div id="M000225_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.asctime =&gt; string
 *     time.ctime   =&gt; string
 *  
 *  Returns a canonical string representation of &lt;i&gt;time&lt;/i&gt;.
 *     
 *     Time.now.asctime   #=&gt; &quot;Wed Apr  9 08:56:03 2003&quot;
 */

static VALUE
time_asctime(time)
    VALUE time;
{
    struct time_object *tobj;
    char *s;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    s = asctime(&amp;tobj-&gt;tm);
    if (s[24] == '\n') s[24] = '\0';

    return rb_str_new2(s);
}
</pre>
  </div>
</div>
</div>
<div id="M000224" class="method">
  <div id="M000224_title" class="title">
    <b>time.asctime => string<br />
time.ctime   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a canonical string representation of <em>time</em>.
</p>
<pre>
   Time.now.asctime   #=&gt; &quot;Wed Apr  9 08:56:03 2003&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000224_source')" id="l_M000224_source">show source</a> ]</p>
  <div id="M000224_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.asctime =&gt; string
 *     time.ctime   =&gt; string
 *  
 *  Returns a canonical string representation of &lt;i&gt;time&lt;/i&gt;.
 *     
 *     Time.now.asctime   #=&gt; &quot;Wed Apr  9 08:56:03 2003&quot;
 */

static VALUE
time_asctime(time)
    VALUE time;
{
    struct time_object *tobj;
    char *s;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    s = asctime(&amp;tobj-&gt;tm);
    if (s[24] == '\n') s[24] = '\0';

    return rb_str_new2(s);
}
</pre>
  </div>
</div>
</div>
<div id="M000236" class="method">
  <div id="M000236_title" class="title">
    <b>time.day  => fixnum<br />
time.mday => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the day of the month (1..n) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.day          #=&gt; 9
   t.mday         #=&gt; 9
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000236_source')" id="l_M000236_source">show source</a> ]</p>
  <div id="M000236_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.day  =&gt; fixnum
 *     time.mday =&gt; fixnum
 *  
 *  Returns the day of the month (1..n) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.day          #=&gt; 9
 *     t.mday         #=&gt; 9
 */

static VALUE
time_mday(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_mday);
}
</pre>
  </div>
</div>
</div>
<div id="M000243" class="method">
  <div id="M000243_title" class="title">
    <b>time.isdst => true or false<br />
time.dst?  => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <em>time</em> occurs during Daylight Saving <a
href="index.html?a=C00000015&name=Time">Time</a> in its time zone.
</p>
<pre>
   Time.local(2000, 7, 1).isdst   #=&gt; true
   Time.local(2000, 1, 1).isdst   #=&gt; false
   Time.local(2000, 7, 1).dst?    #=&gt; true
   Time.local(2000, 1, 1).dst?    #=&gt; false
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000243_source')" id="l_M000243_source">show source</a> ]</p>
  <div id="M000243_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.isdst =&gt; true or false
 *     time.dst?  =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;time&lt;/i&gt; occurs during Daylight
 *  Saving Time in its time zone.
 *     
 *     Time.local(2000, 7, 1).isdst   #=&gt; true
 *     Time.local(2000, 1, 1).isdst   #=&gt; false
 *     Time.local(2000, 7, 1).dst?    #=&gt; true
 *     Time.local(2000, 1, 1).dst?    #=&gt; false
 */

static VALUE
time_isdst(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return tobj-&gt;tm.tm_isdst?Qtrue:Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M000215" class="method">
  <div id="M000215_title" class="title">
    <b>time.eql?(other_time)<br />
</b>
  </div>
  <div class="description">
  <p>
Return <tt>true</tt> if <em>time</em> and <em>other_time</em> are both
<tt><a href="index.html?a=C00000015&name=Time">Time</a></tt> objects with
the same seconds and fractional seconds.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000215_source')" id="l_M000215_source">show source</a> ]</p>
  <div id="M000215_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  time.eql?(other_time)
 *
 * Return &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;time&lt;/i&gt; and &lt;i&gt;other_time&lt;/i&gt; are
 * both &lt;code&gt;Time&lt;/code&gt; objects with the same seconds and fractional
 * seconds.
 */

static VALUE
time_eql(time1, time2)
    VALUE time1, time2;
{
    struct time_object *tobj1, *tobj2;

    GetTimeval(time1, tobj1);
    if (TYPE(time2) == T_DATA &amp;&amp; RDATA(time2)-&gt;dfree == time_free) {
        GetTimeval(time2, tobj2);
        if (tobj1-&gt;tv.tv_sec == tobj2-&gt;tv.tv_sec) {
            if (tobj1-&gt;tv.tv_usec == tobj2-&gt;tv.tv_usec) return Qtrue;
        }
    }
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M000222" class="method">
  <div id="M000222_title" class="title">
    <b>time.getgm  => new_time<br />
time.getutc => new_time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a new <tt>new_time</tt> object representing <em>time</em> in UTC.
</p>
<pre>
   t = Time.local(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
   t.gmt?                             #=&gt; false
   y = t.getgm                        #=&gt; Sun Jan 02 02:15:01 UTC 2000
   y.gmt?                             #=&gt; true
   t == y                             #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000222_source')" id="l_M000222_source">show source</a> ]</p>
  <div id="M000222_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.getgm  =&gt; new_time
 *     time.getutc =&gt; new_time
 *  
 *  Returns a new &lt;code&gt;new_time&lt;/code&gt; object representing &lt;i&gt;time&lt;/i&gt; in
 *  UTC.
 *     
 *     t = Time.local(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
 *     t.gmt?                             #=&gt; false
 *     y = t.getgm                        #=&gt; Sun Jan 02 02:15:01 UTC 2000
 *     y.gmt?                             #=&gt; true
 *     t == y                             #=&gt; true
 */

static VALUE
time_getgmtime(time)
    VALUE time;
{
    return time_gmtime(time_dup(time));
}
</pre>
  </div>
</div>
</div>
<div id="M000221" class="method">
  <div id="M000221_title" class="title">
    <b>time.getlocal => new_time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a new <tt>new_time</tt> object representing <em>time</em> in local
time (using the local time zone in effect for this process).
</p>
<pre>
   t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt?                          #=&gt; true
   l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
   l.gmt?                          #=&gt; false
   t == l                          #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000221_source')" id="l_M000221_source">show source</a> ]</p>
  <div id="M000221_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.getlocal =&gt; new_time
 *  
 *  Returns a new &lt;code&gt;new_time&lt;/code&gt; object representing &lt;i&gt;time&lt;/i&gt; in
 *  local time (using the local time zone in effect for this process).
 *     
 *     t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt?                          #=&gt; true
 *     l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
 *     l.gmt?                          #=&gt; false
 *     t == l                          #=&gt; true
 */

static VALUE
time_getlocaltime(time)
    VALUE time;
{
    return time_localtime(time_dup(time));
}
</pre>
  </div>
</div>
</div>
<div id="M000223" class="method">
  <div id="M000223_title" class="title">
    <b>time.getgm  => new_time<br />
time.getutc => new_time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a new <tt>new_time</tt> object representing <em>time</em> in UTC.
</p>
<pre>
   t = Time.local(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
   t.gmt?                             #=&gt; false
   y = t.getgm                        #=&gt; Sun Jan 02 02:15:01 UTC 2000
   y.gmt?                             #=&gt; true
   t == y                             #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000223_source')" id="l_M000223_source">show source</a> ]</p>
  <div id="M000223_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.getgm  =&gt; new_time
 *     time.getutc =&gt; new_time
 *  
 *  Returns a new &lt;code&gt;new_time&lt;/code&gt; object representing &lt;i&gt;time&lt;/i&gt; in
 *  UTC.
 *     
 *     t = Time.local(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 CST 2000
 *     t.gmt?                             #=&gt; false
 *     y = t.getgm                        #=&gt; Sun Jan 02 02:15:01 UTC 2000
 *     y.gmt?                             #=&gt; true
 *     t == y                             #=&gt; true
 */

static VALUE
time_getgmtime(time)
    VALUE time;
{
    return time_gmtime(time_dup(time));
}
</pre>
  </div>
</div>
</div>
<div id="M000249" class="method">
  <div id="M000249_title" class="title">
    <b>time.utc? => true or false<br />
time.gmt? => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <em>time</em> represents a time in UTC (GMT).
</p>
<pre>
   t = Time.now                        #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.utc?                              #=&gt; false
   t = Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.utc?                              #=&gt; true

   t = Time.now                        #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.gmt?                              #=&gt; false
   t = Time.gm(2000,1,1,20,15,1)       #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt?                              #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000249_source')" id="l_M000249_source">show source</a> ]</p>
  <div id="M000249_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.utc? =&gt; true or false
 *     time.gmt? =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;time&lt;/i&gt; represents a time in UTC
 *  (GMT).
 *     
 *     t = Time.now                        #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.utc?                              #=&gt; false
 *     t = Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.utc?                              #=&gt; true
 *
 *     t = Time.now                        #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.gmt?                              #=&gt; false
 *     t = Time.gm(2000,1,1,20,15,1)       #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt?                              #=&gt; true
 */

static VALUE
time_utc_p(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;gmt) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M000246" class="method">
  <div id="M000246_title" class="title">
    <b>time.gmt_offset => fixnum<br />
time.gmtoff     => fixnum<br />
time.utc_offset => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the offset in seconds between the timezone of <em>time</em> and
UTC.
</p>
<pre>
   t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt_offset                    #=&gt; 0
   l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
   l.gmt_offset                    #=&gt; -21600
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000246_source')" id="l_M000246_source">show source</a> ]</p>
  <div id="M000246_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.gmt_offset =&gt; fixnum
 *     time.gmtoff     =&gt; fixnum
 *     time.utc_offset =&gt; fixnum
 *  
 *  Returns the offset in seconds between the timezone of &lt;i&gt;time&lt;/i&gt;
 *  and UTC.
 *     
 *     t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt_offset                    #=&gt; 0
 *     l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
 *     l.gmt_offset                    #=&gt; -21600
 */

static VALUE
time_utc_offset(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }

    if (tobj-&gt;gmt == 1) {
        return INT2FIX(0);
    }
    else {
#if defined(HAVE_STRUCT_TM_TM_GMTOFF)
        return INT2NUM(tobj-&gt;tm.tm_gmtoff);
#else
        struct tm *u, *l;
        time_t t;
        long off;
        l = &amp;tobj-&gt;tm;
        t = tobj-&gt;tv.tv_sec;
        u = gmtime(&amp;t);
        if (!u)
            rb_raise(rb_eArgError, &quot;gmtime error&quot;);
        if (l-&gt;tm_year != u-&gt;tm_year)
            off = l-&gt;tm_year &lt; u-&gt;tm_year ? -1 : 1;
        else if (l-&gt;tm_mon != u-&gt;tm_mon)
            off = l-&gt;tm_mon &lt; u-&gt;tm_mon ? -1 : 1;
        else if (l-&gt;tm_mday != u-&gt;tm_mday)
            off = l-&gt;tm_mday &lt; u-&gt;tm_mday ? -1 : 1;
        else
            off = 0;
        off = off * 24 + l-&gt;tm_hour - u-&gt;tm_hour;
        off = off * 60 + l-&gt;tm_min - u-&gt;tm_min;
        off = off * 60 + l-&gt;tm_sec - u-&gt;tm_sec;
        return LONG2FIX(off);
#endif
    }
}
</pre>
  </div>
</div>
</div>
<div id="M000219" class="method">
  <div id="M000219_title" class="title">
    <b>time.gmtime    => time<br />
time.utc       => time<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>time</em> to UTC (GMT), modifying the receiver.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.gmt?         #=&gt; false
   t.gmtime       #=&gt; Wed Apr 09 13:56:03 UTC 2003
   t.gmt?         #=&gt; true

   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.utc?         #=&gt; false
   t.utc          #=&gt; Wed Apr 09 13:56:04 UTC 2003
   t.utc?         #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000219_source')" id="l_M000219_source">show source</a> ]</p>
  <div id="M000219_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.gmtime    =&gt; time
 *     time.utc       =&gt; time
 *  
 *  Converts &lt;i&gt;time&lt;/i&gt; to UTC (GMT), modifying the receiver.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.gmt?         #=&gt; false
 *     t.gmtime       #=&gt; Wed Apr 09 13:56:03 UTC 2003
 *     t.gmt?         #=&gt; true
 *
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.utc?         #=&gt; false
 *     t.utc          #=&gt; Wed Apr 09 13:56:04 UTC 2003
 *     t.utc?         #=&gt; true
 */

static VALUE
time_gmtime(time)
    VALUE time;
{
    struct time_object *tobj;
    struct tm *tm_tmp;
    time_t t;

    GetTimeval(time, tobj);
    if (tobj-&gt;gmt) {
        if (tobj-&gt;tm_got)
            return time;
    }
    else {
        time_modify(time);
    }
    t = tobj-&gt;tv.tv_sec;
    tm_tmp = gmtime(&amp;t);
    if (!tm_tmp)
        rb_raise(rb_eArgError, &quot;gmtime error&quot;);
    tobj-&gt;tm = *tm_tmp;
    tobj-&gt;tm_got = 1;
    tobj-&gt;gmt = 1;
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000245" class="method">
  <div id="M000245_title" class="title">
    <b>time.gmt_offset => fixnum<br />
time.gmtoff     => fixnum<br />
time.utc_offset => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the offset in seconds between the timezone of <em>time</em> and
UTC.
</p>
<pre>
   t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt_offset                    #=&gt; 0
   l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
   l.gmt_offset                    #=&gt; -21600
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000245_source')" id="l_M000245_source">show source</a> ]</p>
  <div id="M000245_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.gmt_offset =&gt; fixnum
 *     time.gmtoff     =&gt; fixnum
 *     time.utc_offset =&gt; fixnum
 *  
 *  Returns the offset in seconds between the timezone of &lt;i&gt;time&lt;/i&gt;
 *  and UTC.
 *     
 *     t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt_offset                    #=&gt; 0
 *     l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
 *     l.gmt_offset                    #=&gt; -21600
 */

static VALUE
time_utc_offset(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }

    if (tobj-&gt;gmt == 1) {
        return INT2FIX(0);
    }
    else {
#if defined(HAVE_STRUCT_TM_TM_GMTOFF)
        return INT2NUM(tobj-&gt;tm.tm_gmtoff);
#else
        struct tm *u, *l;
        time_t t;
        long off;
        l = &amp;tobj-&gt;tm;
        t = tobj-&gt;tv.tv_sec;
        u = gmtime(&amp;t);
        if (!u)
            rb_raise(rb_eArgError, &quot;gmtime error&quot;);
        if (l-&gt;tm_year != u-&gt;tm_year)
            off = l-&gt;tm_year &lt; u-&gt;tm_year ? -1 : 1;
        else if (l-&gt;tm_mon != u-&gt;tm_mon)
            off = l-&gt;tm_mon &lt; u-&gt;tm_mon ? -1 : 1;
        else if (l-&gt;tm_mday != u-&gt;tm_mday)
            off = l-&gt;tm_mday &lt; u-&gt;tm_mday ? -1 : 1;
        else
            off = 0;
        off = off * 24 + l-&gt;tm_hour - u-&gt;tm_hour;
        off = off * 60 + l-&gt;tm_min - u-&gt;tm_min;
        off = off * 60 + l-&gt;tm_sec - u-&gt;tm_sec;
        return LONG2FIX(off);
#endif
    }
}
</pre>
  </div>
</div>
</div>
<div id="M000216" class="method">
  <div id="M000216_title" class="title">
    <b>time.hash   => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Return a hash code for this time object.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000216_source')" id="l_M000216_source">show source</a> ]</p>
  <div id="M000216_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   time.hash   =&gt; fixnum
 *
 * Return a hash code for this time object.
 */

static VALUE
time_hash(time)
    VALUE time;
{
    struct time_object *tobj;
    long hash;

    GetTimeval(time, tobj);
    hash = tobj-&gt;tv.tv_sec ^ tobj-&gt;tv.tv_usec;
    return LONG2FIX(hash);
}
</pre>
  </div>
</div>
</div>
<div id="M000234" class="method">
  <div id="M000234_title" class="title">
    <b>time.hour => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the hour of the day (0..23) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.hour         #=&gt; 8
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000234_source')" id="l_M000234_source">show source</a> ]</p>
  <div id="M000234_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.hour =&gt; fixnum
 *  
 *  Returns the hour of the day (0..23) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.hour         #=&gt; 8
 */

static VALUE
time_hour(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_hour);
}
</pre>
  </div>
</div>
</div>
<div id="M000267" class="method">
  <div id="M000267_title" class="title">
    <b>httpdate</b>()
  </div>
  <div class="description">
  <p>
Returns a string which represents the time as rfc1123-date of HTTP-date
defined by RFC 2616:
</p>
<pre>
  day-of-week, DD month-name CCYY hh:mm:ss GMT
</pre>
<p>
Note that the result is always UTC (GMT).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000267_source')" id="l_M000267_source">show source</a> ]</p>
  <div id="M000267_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 422</span>
422:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">httpdate</span>
423:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">utc</span>
424:     <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%s, %02d %s %d %02d:%02d:%02d GMT'</span>,
425:       <span class="ruby-constant">RFC2822_DAY_NAME</span>[<span class="ruby-identifier">t</span>.<span class="ruby-identifier">wday</span>],
426:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">day</span>, <span class="ruby-constant">RFC2822_MONTH_NAME</span>[<span class="ruby-identifier">t</span>.<span class="ruby-identifier">mon</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>], <span class="ruby-identifier">t</span>.<span class="ruby-identifier">year</span>,
427:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">hour</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">min</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">sec</span>)
428:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000227" class="method">
  <div id="M000227_title" class="title">
    <b>time.inspect => string<br />
time.to_s    => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a string representing <em>time</em>. Equivalent to calling <tt><a
href="index.html?a=M000253&name=Time#strftime">Time#strftime</a></tt> with
a format string of ``<tt>%a</tt> <tt>%b</tt> <tt>%d</tt> <tt>%H:%M:%S</tt>
<tt>%Z</tt> <tt>%Y</tt>&#8217;&#8217;.
</p>
<pre>
   Time.now.to_s   #=&gt; &quot;Wed Apr 09 08:56:04 CDT 2003&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000227_source')" id="l_M000227_source">show source</a> ]</p>
  <div id="M000227_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.inspect =&gt; string
 *     time.to_s    =&gt; string
 *  
 *  Returns a string representing &lt;i&gt;time&lt;/i&gt;. Equivalent to calling
 *  &lt;code&gt;Time#strftime&lt;/code&gt; with a format string of ``&lt;code&gt;%a&lt;/code&gt;
 *  &lt;code&gt;%b&lt;/code&gt; &lt;code&gt;%d&lt;/code&gt; &lt;code&gt;%H:%M:%S&lt;/code&gt;
 *  &lt;code&gt;%Z&lt;/code&gt; &lt;code&gt;%Y&lt;/code&gt;''.
 *     
 *     Time.now.to_s   #=&gt; &quot;Wed Apr 09 08:56:04 CDT 2003&quot;
 */

static VALUE
time_to_s(time)
    VALUE time;
{
    struct time_object *tobj;
    char buf[128];
    int len;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    if (tobj-&gt;gmt == 1) {
        len = strftime(buf, 128, &quot;%a %b %d %H:%M:%S UTC %Y&quot;, &amp;tobj-&gt;tm);
    }
    else {
        time_t off;
        char buf2[32];
        char sign = '+';
#if defined(HAVE_STRUCT_TM_TM_GMTOFF)
        off = tobj-&gt;tm.tm_gmtoff;
#else
        VALUE tmp = time_utc_offset(time);
        off = NUM2INT(tmp);
#endif
        if (off &lt; 0) {
            sign = '-';
            off = -off;
        }
        sprintf(buf2, &quot;%%a %%b %%d %%H:%%M:%%S %c%02d%02d %%Y&quot;,
                sign, (int)(off/3600), (int)(off%3600/60));
        len = strftime(buf, 128, buf2, &amp;tobj-&gt;tm);
    }
    return rb_str_new(buf, len);
}
</pre>
  </div>
</div>
</div>
<div id="M000242" class="method">
  <div id="M000242_title" class="title">
    <b>time.isdst => true or false<br />
time.dst?  => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <em>time</em> occurs during Daylight Saving <a
href="index.html?a=C00000015&name=Time">Time</a> in its time zone.
</p>
<pre>
   Time.local(2000, 7, 1).isdst   #=&gt; true
   Time.local(2000, 1, 1).isdst   #=&gt; false
   Time.local(2000, 7, 1).dst?    #=&gt; true
   Time.local(2000, 1, 1).dst?    #=&gt; false
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000242_source')" id="l_M000242_source">show source</a> ]</p>
  <div id="M000242_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.isdst =&gt; true or false
 *     time.dst?  =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;time&lt;/i&gt; occurs during Daylight
 *  Saving Time in its time zone.
 *     
 *     Time.local(2000, 7, 1).isdst   #=&gt; true
 *     Time.local(2000, 1, 1).isdst   #=&gt; false
 *     Time.local(2000, 7, 1).dst?    #=&gt; true
 *     Time.local(2000, 1, 1).dst?    #=&gt; false
 */

static VALUE
time_isdst(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return tobj-&gt;tm.tm_isdst?Qtrue:Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M000269" class="method">
  <div id="M000269_title" class="title">
    <b>iso8601</b>(fraction_digits=0)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000264&name=xmlschema">xmlschema</a>
</p>
  </div>
</div>
<div id="M000218" class="method">
  <div id="M000218_title" class="title">
    <b>time.localtime => time<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>time</em> to local time (using the local time zone in effect
for this process) modifying the receiver.
</p>
<pre>
   t = Time.gm(2000, &quot;jan&quot;, 1, 20, 15, 1)
   t.gmt?        #=&gt; true
   t.localtime   #=&gt; Sat Jan 01 14:15:01 CST 2000
   t.gmt?        #=&gt; false
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000218_source')" id="l_M000218_source">show source</a> ]</p>
  <div id="M000218_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.localtime =&gt; time
 *  
 *  Converts &lt;i&gt;time&lt;/i&gt; to local time (using the local time zone in
 *  effect for this process) modifying the receiver.
 *     
 *     t = Time.gm(2000, &quot;jan&quot;, 1, 20, 15, 1)
 *     t.gmt?        #=&gt; true
 *     t.localtime   #=&gt; Sat Jan 01 14:15:01 CST 2000
 *     t.gmt?        #=&gt; false
 */

static VALUE
time_localtime(time)
    VALUE time;
{
    struct time_object *tobj;
    struct tm *tm_tmp;
    time_t t;

    GetTimeval(time, tobj);
    if (!tobj-&gt;gmt) {
        if (tobj-&gt;tm_got)
            return time;
    }
    else {
        time_modify(time);
    }
    t = tobj-&gt;tv.tv_sec;
    tm_tmp = localtime(&amp;t);
    if (!tm_tmp)
        rb_raise(rb_eArgError, &quot;localtime error&quot;);
    tobj-&gt;tm = *tm_tmp;
    tobj-&gt;tm_got = 1;
    tobj-&gt;gmt = 0;
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000256" class="method">
  <div id="M000256_title" class="title">
    <b>marshal_dump</b>()
  </div>
  <div class="description">
  <p>
undocumented
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000256_source')" id="l_M000256_source">show source</a> ]</p>
  <div id="M000256_source" class="dyn-source">
<pre>
/*
 * undocumented
 */

static VALUE
time_mdump(time)
    VALUE time;
{
    struct time_object *tobj;
    struct tm *tm;
    unsigned long p, s;
    char buf[8];
    time_t t;
    int i;

    GetTimeval(time, tobj);

    t = tobj-&gt;tv.tv_sec;
    tm = gmtime(&amp;t);

    if ((tm-&gt;tm_year &amp; 0xffff) != tm-&gt;tm_year)
        rb_raise(rb_eArgError, &quot;year too big to marshal&quot;);

    p = 0x1UL        &lt;&lt; 31 | /*  1 */
        tm-&gt;tm_year  &lt;&lt; 14 | /* 16 */
        tm-&gt;tm_mon   &lt;&lt; 10 | /*  4 */
        tm-&gt;tm_mday  &lt;&lt;  5 | /*  5 */
        tm-&gt;tm_hour;         /*  5 */
    s = tm-&gt;tm_min   &lt;&lt; 26 | /*  6 */
        tm-&gt;tm_sec   &lt;&lt; 20 | /*  6 */
        tobj-&gt;tv.tv_usec;    /* 20 */

    for (i=0; i&lt;4; i++) {
        buf[i] = p &amp; 0xff;
        p = RSHIFT(p, 8);
    }
    for (i=4; i&lt;8; i++) {
        buf[i] = s &amp; 0xff;
        s = RSHIFT(s, 8);
    }

    return rb_str_new(buf, 8);
}
</pre>
  </div>
</div>
</div>
<div id="M000257" class="method">
  <div id="M000257_title" class="title">
    <b>marshal_load</b>(p1)
  </div>
  <div class="description">
  <p>
undocumented
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000257_source')" id="l_M000257_source">show source</a> ]</p>
  <div id="M000257_source" class="dyn-source">
<pre>
/*
 * undocumented
 */

static VALUE
time_mload(time, str)
    VALUE time, str;
{
    struct time_object *tobj;
    unsigned long p, s;
    time_t sec, usec;
    unsigned char *buf;
    struct tm tm;
    int i;

    time_modify(time);
    StringValue(str);
    buf = (unsigned char *)RSTRING(str)-&gt;ptr;
    if (RSTRING(str)-&gt;len != 8) {
        rb_raise(rb_eTypeError, &quot;marshaled time format differ&quot;);
    }

    p = s = 0;
    for (i=0; i&lt;4; i++) {
        p |= buf[i]&lt;&lt;(8*i);
    }
    for (i=4; i&lt;8; i++) {
        s |= buf[i]&lt;&lt;(8*(i-4));
    }

    if ((p &amp; (1UL&lt;&lt;31)) == 0) {
        sec = p;
        usec = s;
    }
    else {
       p &amp;= ~(1UL&lt;&lt;31);
        tm.tm_year = (p &gt;&gt; 14) &amp; 0xffff;
        tm.tm_mon  = (p &gt;&gt; 10) &amp; 0xf;
        tm.tm_mday = (p &gt;&gt;  5) &amp; 0x1f;
        tm.tm_hour =  p        &amp; 0x1f;
        tm.tm_min  = (s &gt;&gt; 26) &amp; 0x3f;
        tm.tm_sec  = (s &gt;&gt; 20) &amp; 0x3f;
        tm.tm_isdst = 0;

        sec = make_time_t(&amp;tm, Qtrue);
        usec = (time_t)(s &amp; 0xfffff);
    }
    time_overflow_p(&amp;sec, &amp;usec);

    GetTimeval(time, tobj);
    tobj-&gt;tm_got = 0;
    tobj-&gt;tv.tv_sec = sec;
    tobj-&gt;tv.tv_usec = usec;
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000235" class="method">
  <div id="M000235_title" class="title">
    <b>time.day  => fixnum<br />
time.mday => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the day of the month (1..n) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.day          #=&gt; 9
   t.mday         #=&gt; 9
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000235_source')" id="l_M000235_source">show source</a> ]</p>
  <div id="M000235_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.day  =&gt; fixnum
 *     time.mday =&gt; fixnum
 *  
 *  Returns the day of the month (1..n) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.day          #=&gt; 9
 *     t.mday         #=&gt; 9
 */

static VALUE
time_mday(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_mday);
}
</pre>
  </div>
</div>
</div>
<div id="M000233" class="method">
  <div id="M000233_title" class="title">
    <b>time.min => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the minute of the hour (0..59) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.min          #=&gt; 56
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000233_source')" id="l_M000233_source">show source</a> ]</p>
  <div id="M000233_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.min =&gt; fixnum
 *  
 *  Returns the minute of the hour (0..59) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.min          #=&gt; 56
 */

static VALUE
time_min(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_min);
}
</pre>
  </div>
</div>
</div>
<div id="M000237" class="method">
  <div id="M000237_title" class="title">
    <b>time.mon   => fixnum<br />
time.month => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the month of the year (1..12) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.mon          #=&gt; 4
   t.month        #=&gt; 4
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000237_source')" id="l_M000237_source">show source</a> ]</p>
  <div id="M000237_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.mon   =&gt; fixnum
 *     time.month =&gt; fixnum
 *  
 *  Returns the month of the year (1..12) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.mon          #=&gt; 4
 *     t.month        #=&gt; 4
 */

static VALUE
time_mon(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_mon+1);
}
</pre>
  </div>
</div>
</div>
<div id="M000238" class="method">
  <div id="M000238_title" class="title">
    <b>time.mon   => fixnum<br />
time.month => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the month of the year (1..12) for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.mon          #=&gt; 4
   t.month        #=&gt; 4
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000238_source')" id="l_M000238_source">show source</a> ]</p>
  <div id="M000238_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.mon   =&gt; fixnum
 *     time.month =&gt; fixnum
 *  
 *  Returns the month of the year (1..12) for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.mon          #=&gt; 4
 *     t.month        #=&gt; 4
 */

static VALUE
time_mon(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_mon+1);
}
</pre>
  </div>
</div>
</div>
<div id="M000265" class="method">
  <div id="M000265_title" class="title">
    <b>rfc2822</b>()
  </div>
  <div class="description">
  <p>
Returns a string which represents the time as date-time defined by RFC
2822:
</p>
<pre>
  day-of-week, DD month-name CCYY hh:mm:ss zone
</pre>
<p>
where zone is [+-]hhmm.
</p>
<p>
If <tt>self</tt> is a UTC time, -0000 is used as zone.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000266&name=rfc822">rfc822</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000265_source')" id="l_M000265_source">show source</a> ]</p>
  <div id="M000265_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 391</span>
391:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rfc2822</span>
392:     <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%s, %02d %s %d %02d:%02d:%02d '</span>,
393:       <span class="ruby-constant">RFC2822_DAY_NAME</span>[<span class="ruby-identifier">wday</span>],
394:       <span class="ruby-identifier">day</span>, <span class="ruby-constant">RFC2822_MONTH_NAME</span>[<span class="ruby-identifier">mon</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>], <span class="ruby-identifier">year</span>,
395:       <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>) <span class="ruby-operator">+</span>
396:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">utc?</span>
397:       <span class="ruby-value str">'-0000'</span>
398:     <span class="ruby-keyword kw">else</span>
399:       <span class="ruby-identifier">off</span> = <span class="ruby-identifier">utc_offset</span>
400:       <span class="ruby-identifier">sign</span> = <span class="ruby-identifier">off</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'+'</span>
401:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%s%02d%02d'</span>, <span class="ruby-identifier">sign</span>, <span class="ruby-operator">*</span>(<span class="ruby-identifier">off</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">60</span>))
402:     <span class="ruby-keyword kw">end</span>
403:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000266" class="method">
  <div id="M000266_title" class="title">
    <b>rfc822</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000262&name=rfc2822">rfc2822</a>
</p>
  </div>
</div>
<div id="M000232" class="method">
  <div id="M000232_title" class="title">
    <b>time.sec => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the second of the minute (0..60)<em>[Yes, seconds really can range
from zero to 60. This allows the system to inject leap seconds every now
and then to correct for the fact that years are not really a convenient
number of hours long.]</em> for <em>time</em>.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.sec          #=&gt; 4
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000232_source')" id="l_M000232_source">show source</a> ]</p>
  <div id="M000232_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.sec =&gt; fixnum
 *  
 *  Returns the second of the minute (0..60)&lt;em&gt;[Yes, seconds really can
 *  range from zero to 60. This allows the system to inject leap seconds
 *  every now and then to correct for the fact that years are not really
 *  a convenient number of hours long.]&lt;/em&gt; for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.sec          #=&gt; 4
 */

static VALUE
time_sec(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_sec);
}
</pre>
  </div>
</div>
</div>
<div id="M000253" class="method">
  <div id="M000253_title" class="title">
    <b>time.strftime( string ) => string<br />
</b>
  </div>
  <div class="description">
  <p>
Formats <em>time</em> according to the directives in the given format
string. Any text not listed as a directive will be passed through to the
output string.
</p>
<p>
Format meaning:
</p>
<pre>
  %a - The abbreviated weekday name (``Sun'')
  %A - The  full  weekday  name (``Sunday'')
  %b - The abbreviated month name (``Jan'')
  %B - The  full  month  name (``January'')
  %c - The preferred local date and time representation
  %d - Day of the month (01..31)
  %H - Hour of the day, 24-hour clock (00..23)
  %I - Hour of the day, 12-hour clock (01..12)
  %j - Day of the year (001..366)
  %m - Month of the year (01..12)
  %M - Minute of the hour (00..59)
  %p - Meridian indicator (``AM''  or  ``PM'')
  %S - Second of the minute (00..60)
  %U - Week  number  of the current year,
          starting with the first Sunday as the first
          day of the first week (00..53)
  %W - Week  number  of the current year,
          starting with the first Monday as the first
          day of the first week (00..53)
  %w - Day of the week (Sunday is 0, 0..6)
  %x - Preferred representation for the date alone, no time
  %X - Preferred representation for the time alone, no date
  %y - Year without a century (00..99)
  %Y - Year with century
  %Z - Time zone name
  %% - Literal ``%'' character

   t = Time.now
   t.strftime(&quot;Printed on %m/%d/%Y&quot;)   #=&gt; &quot;Printed on 04/09/2003&quot;
   t.strftime(&quot;at %I:%M%p&quot;)            #=&gt; &quot;at 08:56AM&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000253_source')" id="l_M000253_source">show source</a> ]</p>
  <div id="M000253_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.strftime( string ) =&gt; string
 *  
 *  Formats &lt;i&gt;time&lt;/i&gt; according to the directives in the given format
 *  string. Any text not listed as a directive will be passed through
 *  to the output string.
 *
 *  Format meaning:
 *    %a - The abbreviated weekday name (``Sun'')
 *    %A - The  full  weekday  name (``Sunday'')
 *    %b - The abbreviated month name (``Jan'')
 *    %B - The  full  month  name (``January'')
 *    %c - The preferred local date and time representation
 *    %d - Day of the month (01..31)
 *    %H - Hour of the day, 24-hour clock (00..23)
 *    %I - Hour of the day, 12-hour clock (01..12)
 *    %j - Day of the year (001..366)
 *    %m - Month of the year (01..12)
 *    %M - Minute of the hour (00..59)
 *    %p - Meridian indicator (``AM''  or  ``PM'')
 *    %S - Second of the minute (00..60)
 *    %U - Week  number  of the current year,
 *            starting with the first Sunday as the first
 *            day of the first week (00..53)
 *    %W - Week  number  of the current year,
 *            starting with the first Monday as the first
 *            day of the first week (00..53)
 *    %w - Day of the week (Sunday is 0, 0..6)
 *    %x - Preferred representation for the date alone, no time
 *    %X - Preferred representation for the time alone, no date
 *    %y - Year without a century (00..99)
 *    %Y - Year with century
 *    %Z - Time zone name
 *    %% - Literal ``%'' character
 *     
 *     t = Time.now
 *     t.strftime(&quot;Printed on %m/%d/%Y&quot;)   #=&gt; &quot;Printed on 04/09/2003&quot;
 *     t.strftime(&quot;at %I:%M%p&quot;)            #=&gt; &quot;at 08:56AM&quot;
 */

static VALUE
time_strftime(time, format)
    VALUE time, format;
{
    struct time_object *tobj;
    char buffer[SMALLBUF], *buf = buffer;
    const char *fmt;
    long len;
    VALUE str;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    StringValue(format);
    format = rb_str_new4(format);
    fmt = RSTRING(format)-&gt;ptr;
    len = RSTRING(format)-&gt;len;
    if (len == 0) {
        rb_warning(&quot;strftime called with empty format string&quot;);
    }
    else if (strlen(fmt) &lt; len) {
        /* Ruby string may contain \0's. */
        const char *p = fmt, *pe = fmt + len;

        str = rb_str_new(0, 0);
        while (p &lt; pe) {
            len = rb_strftime(&amp;buf, p, &amp;tobj-&gt;tm);
            rb_str_cat(str, buf, len);
            p += strlen(p);
            if (buf != buffer) {
                free(buf);
                buf = buffer;
            }
            for (fmt = p; p &lt; pe &amp;&amp; !*p; ++p);
            if (p &gt; fmt) rb_str_cat(str, fmt, p - fmt);
        }
        return str;
    }
    else {
        len = rb_strftime(&amp;buf, RSTRING(format)-&gt;ptr, &amp;tobj-&gt;tm);
    }
    str = rb_str_new(buf, len);
    if (buf != buffer) free(buf);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M000231" class="method">
  <div id="M000231_title" class="title">
    <b>time.succ   => new_time<br />
</b>
  </div>
  <div class="description">
  <p>
Return a new time object, one second later than <tt>time</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000231_source')" id="l_M000231_source">show source</a> ]</p>
  <div id="M000231_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   time.succ   =&gt; new_time
 *
 * Return a new time object, one second later than &lt;code&gt;time&lt;/code&gt;.
 */

static VALUE
time_succ(time)
    VALUE time;
{
    struct time_object *tobj;
    int gmt;

    GetTimeval(time, tobj);
    gmt = tobj-&gt;gmt;
    time = rb_time_new(tobj-&gt;tv.tv_sec + 1, tobj-&gt;tv.tv_usec);
    GetTimeval(time, tobj);
    tobj-&gt;gmt = gmt;
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000228" class="method">
  <div id="M000228_title" class="title">
    <b>time.to_a => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a ten-element <em>array</em> of values for <em>time</em>: {<tt>[
sec, min, hour, day, month, year, wday, yday, isdst, zone ]</tt>}. See the
individual methods for an explanation of the valid ranges of each value.
The ten elements can be passed directly to <tt>Time::utc</tt> or
<tt>Time::local</tt> to create a new <tt><a
href="index.html?a=C00000015&name=Time">Time</a></tt>.
</p>
<pre>
   now = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t = now.to_a     #=&gt; [4, 56, 8, 9, 4, 2003, 3, 99, true, &quot;CDT&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000228_source')" id="l_M000228_source">show source</a> ]</p>
  <div id="M000228_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.to_a =&gt; array
 *  
 *  Returns a ten-element &lt;i&gt;array&lt;/i&gt; of values for &lt;i&gt;time&lt;/i&gt;:
 *  {&lt;code&gt;[ sec, min, hour, day, month, year, wday, yday, isdst, zone
 *  ]&lt;/code&gt;}. See the individual methods for an explanation of the
 *  valid ranges of each value. The ten elements can be passed directly
 *  to &lt;code&gt;Time::utc&lt;/code&gt; or &lt;code&gt;Time::local&lt;/code&gt; to create a
 *  new &lt;code&gt;Time&lt;/code&gt;.
 *     
 *     now = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t = now.to_a     #=&gt; [4, 56, 8, 9, 4, 2003, 3, 99, true, &quot;CDT&quot;]
 */

static VALUE
time_to_a(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return rb_ary_new3(10,
                    INT2FIX(tobj-&gt;tm.tm_sec),
                    INT2FIX(tobj-&gt;tm.tm_min),
                    INT2FIX(tobj-&gt;tm.tm_hour),
                    INT2FIX(tobj-&gt;tm.tm_mday),
                    INT2FIX(tobj-&gt;tm.tm_mon+1),
                    LONG2NUM((long)tobj-&gt;tm.tm_year+1900),
                    INT2FIX(tobj-&gt;tm.tm_wday),
                    INT2FIX(tobj-&gt;tm.tm_yday+1),
                    tobj-&gt;tm.tm_isdst?Qtrue:Qfalse,
                    time_zone(time));
}
</pre>
  </div>
</div>
</div>
<div id="M000213" class="method">
  <div id="M000213_title" class="title">
    <b>time.to_f => float<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the value of <em>time</em> as a floating point number of seconds
since epoch.
</p>
<pre>
   t = Time.now
   &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.13654&quot;
   t.to_i              #=&gt; 1049896564
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000213_source')" id="l_M000213_source">show source</a> ]</p>
  <div id="M000213_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.to_f =&gt; float
 *  
 *  Returns the value of &lt;i&gt;time&lt;/i&gt; as a floating point number of
 *  seconds since epoch.
 *     
 *     t = Time.now
 *     &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.13654&quot;
 *     t.to_i              #=&gt; 1049896564
 */

static VALUE
time_to_f(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    return rb_float_new((double)tobj-&gt;tv.tv_sec+(double)tobj-&gt;tv.tv_usec/1e6);
}
</pre>
  </div>
</div>
</div>
<div id="M000212" class="method">
  <div id="M000212_title" class="title">
    <b>time.to_i   => int<br />
time.tv_sec => int<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the value of <em>time</em> as an integer number of seconds since
epoch.
</p>
<pre>
   t = Time.now
   &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.17839&quot;
   t.to_i              #=&gt; 1049896564
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000212_source')" id="l_M000212_source">show source</a> ]</p>
  <div id="M000212_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.to_i   =&gt; int
 *     time.tv_sec =&gt; int
 *  
 *  Returns the value of &lt;i&gt;time&lt;/i&gt; as an integer number of seconds
 *  since epoch.
 *     
 *     t = Time.now
 *     &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.17839&quot;
 *     t.to_i              #=&gt; 1049896564
 */

static VALUE
time_to_i(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    return LONG2NUM(tobj-&gt;tv.tv_sec);
}
</pre>
  </div>
</div>
</div>
<div id="M000226" class="method">
  <div id="M000226_title" class="title">
    <b>time.inspect => string<br />
time.to_s    => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a string representing <em>time</em>. Equivalent to calling <tt><a
href="index.html?a=M000253&name=Time#strftime">Time#strftime</a></tt> with
a format string of ``<tt>%a</tt> <tt>%b</tt> <tt>%d</tt> <tt>%H:%M:%S</tt>
<tt>%Z</tt> <tt>%Y</tt>&#8217;&#8217;.
</p>
<pre>
   Time.now.to_s   #=&gt; &quot;Wed Apr 09 08:56:04 CDT 2003&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000226_source')" id="l_M000226_source">show source</a> ]</p>
  <div id="M000226_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.inspect =&gt; string
 *     time.to_s    =&gt; string
 *  
 *  Returns a string representing &lt;i&gt;time&lt;/i&gt;. Equivalent to calling
 *  &lt;code&gt;Time#strftime&lt;/code&gt; with a format string of ``&lt;code&gt;%a&lt;/code&gt;
 *  &lt;code&gt;%b&lt;/code&gt; &lt;code&gt;%d&lt;/code&gt; &lt;code&gt;%H:%M:%S&lt;/code&gt;
 *  &lt;code&gt;%Z&lt;/code&gt; &lt;code&gt;%Y&lt;/code&gt;''.
 *     
 *     Time.now.to_s   #=&gt; &quot;Wed Apr 09 08:56:04 CDT 2003&quot;
 */

static VALUE
time_to_s(time)
    VALUE time;
{
    struct time_object *tobj;
    char buf[128];
    int len;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    if (tobj-&gt;gmt == 1) {
        len = strftime(buf, 128, &quot;%a %b %d %H:%M:%S UTC %Y&quot;, &amp;tobj-&gt;tm);
    }
    else {
        time_t off;
        char buf2[32];
        char sign = '+';
#if defined(HAVE_STRUCT_TM_TM_GMTOFF)
        off = tobj-&gt;tm.tm_gmtoff;
#else
        VALUE tmp = time_utc_offset(time);
        off = NUM2INT(tmp);
#endif
        if (off &lt; 0) {
            sign = '-';
            off = -off;
        }
        sprintf(buf2, &quot;%%a %%b %%d %%H:%%M:%%S %c%02d%02d %%Y&quot;,
                sign, (int)(off/3600), (int)(off%3600/60));
        len = strftime(buf, 128, buf2, &amp;tobj-&gt;tm);
    }
    return rb_str_new(buf, len);
}
</pre>
  </div>
</div>
</div>
<div id="M000271" class="method">
  <div id="M000271_title" class="title">
    <b>to_yaml</b>( opts = {} )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000271_source')" id="l_M000271_source">show source</a> ]</p>
  <div id="M000271_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/yaml/rubytypes.rb, line 312</span>
312:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_yaml</span>( <span class="ruby-identifier">opts</span> = {} )
313:                 <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">quick_emit</span>( <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">opts</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
314:             <span class="ruby-identifier">tz</span> = <span class="ruby-value str">&quot;Z&quot;</span>
315:             <span class="ruby-comment cmt"># from the tidy Tobias Peters &lt;t-peters@gmx.de&gt; Thanks!</span>
316:             <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">utc?</span>
317:                 <span class="ruby-identifier">utc_same_instant</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">dup</span>.<span class="ruby-identifier">utc</span>
318:                 <span class="ruby-identifier">utc_same_writing</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-identifier">year</span>,<span class="ruby-identifier">month</span>,<span class="ruby-identifier">day</span>,<span class="ruby-identifier">hour</span>,<span class="ruby-identifier">min</span>,<span class="ruby-identifier">sec</span>,<span class="ruby-identifier">usec</span>)
319:                 <span class="ruby-identifier">difference_to_utc</span> = <span class="ruby-identifier">utc_same_writing</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">utc_same_instant</span>
320:                 <span class="ruby-keyword kw">if</span> (<span class="ruby-identifier">difference_to_utc</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>) 
321:                     <span class="ruby-identifier">difference_sign</span> = <span class="ruby-value str">'-'</span>
322:                     <span class="ruby-identifier">absolute_difference</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">difference_to_utc</span>
323:                 <span class="ruby-keyword kw">else</span>
324:                     <span class="ruby-identifier">difference_sign</span> = <span class="ruby-value str">'+'</span>
325:                     <span class="ruby-identifier">absolute_difference</span> = <span class="ruby-identifier">difference_to_utc</span>
326:                 <span class="ruby-keyword kw">end</span>
327:                 <span class="ruby-identifier">difference_minutes</span> = (<span class="ruby-identifier">absolute_difference</span><span class="ruby-operator">/</span><span class="ruby-value">60</span>).<span class="ruby-identifier">round</span>
328:                 <span class="ruby-identifier">tz</span> = <span class="ruby-value str">&quot;%s%02d:%02d&quot;</span> <span class="ruby-operator">%</span> [ <span class="ruby-identifier">difference_sign</span>, <span class="ruby-identifier">difference_minutes</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>, <span class="ruby-identifier">difference_minutes</span> <span class="ruby-operator">%</span> <span class="ruby-value">60</span>]
329:             <span class="ruby-keyword kw">end</span>
330:             <span class="ruby-identifier">standard</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">strftime</span>( <span class="ruby-value str">&quot;%Y-%m-%d %H:%M:%S&quot;</span> )
331:             <span class="ruby-identifier">standard</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;.%06d&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">usec</span>] <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">usec</span>.<span class="ruby-identifier">nonzero?</span>
332:             <span class="ruby-identifier">standard</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot; %s&quot;</span> <span class="ruby-operator">%</span> [<span class="ruby-identifier">tz</span>]
333:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">to_yaml_properties</span>.<span class="ruby-identifier">empty?</span>
334:                 <span class="ruby-identifier">out</span>.<span class="ruby-identifier">scalar</span>( <span class="ruby-identifier">taguri</span>, <span class="ruby-identifier">standard</span>, <span class="ruby-identifier">:plain</span> )
335:             <span class="ruby-keyword kw">else</span>
336:                 <span class="ruby-identifier">out</span>.<span class="ruby-identifier">map</span>( <span class="ruby-identifier">taguri</span>, <span class="ruby-identifier">to_yaml_style</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
337:                     <span class="ruby-identifier">map</span>.<span class="ruby-identifier">add</span>( <span class="ruby-value str">'at'</span>, <span class="ruby-identifier">standard</span> )
338:                     <span class="ruby-identifier">to_yaml_properties</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
339:                         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">add</span>( <span class="ruby-identifier">m</span>, <span class="ruby-identifier">instance_variable_get</span>( <span class="ruby-identifier">m</span> ) )
340:                     <span class="ruby-keyword kw">end</span>
341:                 <span class="ruby-keyword kw">end</span>
342:             <span class="ruby-keyword kw">end</span>
343:         <span class="ruby-keyword kw">end</span>
344:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000250" class="method">
  <div id="M000250_title" class="title">
    <b>time.to_i   => int<br />
time.tv_sec => int<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the value of <em>time</em> as an integer number of seconds since
epoch.
</p>
<pre>
   t = Time.now
   &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.17839&quot;
   t.to_i              #=&gt; 1049896564
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000250_source')" id="l_M000250_source">show source</a> ]</p>
  <div id="M000250_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.to_i   =&gt; int
 *     time.tv_sec =&gt; int
 *  
 *  Returns the value of &lt;i&gt;time&lt;/i&gt; as an integer number of seconds
 *  since epoch.
 *     
 *     t = Time.now
 *     &quot;%10.5f&quot; % t.to_f   #=&gt; &quot;1049896564.17839&quot;
 *     t.to_i              #=&gt; 1049896564
 */

static VALUE
time_to_i(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    return LONG2NUM(tobj-&gt;tv.tv_sec);
}
</pre>
  </div>
</div>
</div>
<div id="M000251" class="method">
  <div id="M000251_title" class="title">
    <b>time.usec    => int<br />
time.tv_usec => int<br />
</b>
  </div>
  <div class="description">
  <p>
Returns just the number of microseconds for <em>time</em>.
</p>
<pre>
   t = Time.now        #=&gt; Wed Apr 09 08:56:04 CDT 2003
   &quot;%10.6f&quot; % t.to_f   #=&gt; &quot;1049896564.259970&quot;
   t.usec              #=&gt; 259970
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000251_source')" id="l_M000251_source">show source</a> ]</p>
  <div id="M000251_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.usec    =&gt; int
 *     time.tv_usec =&gt; int
 *  
 *  Returns just the number of microseconds for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now        #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     &quot;%10.6f&quot; % t.to_f   #=&gt; &quot;1049896564.259970&quot;
 *     t.usec              #=&gt; 259970
 */

static VALUE
time_usec(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    return LONG2NUM(tobj-&gt;tv.tv_usec);
}
</pre>
  </div>
</div>
</div>
<div id="M000252" class="method">
  <div id="M000252_title" class="title">
    <b>time.usec    => int<br />
time.tv_usec => int<br />
</b>
  </div>
  <div class="description">
  <p>
Returns just the number of microseconds for <em>time</em>.
</p>
<pre>
   t = Time.now        #=&gt; Wed Apr 09 08:56:04 CDT 2003
   &quot;%10.6f&quot; % t.to_f   #=&gt; &quot;1049896564.259970&quot;
   t.usec              #=&gt; 259970
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000252_source')" id="l_M000252_source">show source</a> ]</p>
  <div id="M000252_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.usec    =&gt; int
 *     time.tv_usec =&gt; int
 *  
 *  Returns just the number of microseconds for &lt;i&gt;time&lt;/i&gt;.
 *     
 *     t = Time.now        #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     &quot;%10.6f&quot; % t.to_f   #=&gt; &quot;1049896564.259970&quot;
 *     t.usec              #=&gt; 259970
 */

static VALUE
time_usec(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    return LONG2NUM(tobj-&gt;tv.tv_usec);
}
</pre>
  </div>
</div>
</div>
<div id="M000220" class="method">
  <div id="M000220_title" class="title">
    <b>time.gmtime    => time<br />
time.utc       => time<br />
</b>
  </div>
  <div class="description">
  <p>
Converts <em>time</em> to UTC (GMT), modifying the receiver.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.gmt?         #=&gt; false
   t.gmtime       #=&gt; Wed Apr 09 13:56:03 UTC 2003
   t.gmt?         #=&gt; true

   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.utc?         #=&gt; false
   t.utc          #=&gt; Wed Apr 09 13:56:04 UTC 2003
   t.utc?         #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000220_source')" id="l_M000220_source">show source</a> ]</p>
  <div id="M000220_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.gmtime    =&gt; time
 *     time.utc       =&gt; time
 *  
 *  Converts &lt;i&gt;time&lt;/i&gt; to UTC (GMT), modifying the receiver.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.gmt?         #=&gt; false
 *     t.gmtime       #=&gt; Wed Apr 09 13:56:03 UTC 2003
 *     t.gmt?         #=&gt; true
 *
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.utc?         #=&gt; false
 *     t.utc          #=&gt; Wed Apr 09 13:56:04 UTC 2003
 *     t.utc?         #=&gt; true
 */

static VALUE
time_gmtime(time)
    VALUE time;
{
    struct time_object *tobj;
    struct tm *tm_tmp;
    time_t t;

    GetTimeval(time, tobj);
    if (tobj-&gt;gmt) {
        if (tobj-&gt;tm_got)
            return time;
    }
    else {
        time_modify(time);
    }
    t = tobj-&gt;tv.tv_sec;
    tm_tmp = gmtime(&amp;t);
    if (!tm_tmp)
        rb_raise(rb_eArgError, &quot;gmtime error&quot;);
    tobj-&gt;tm = *tm_tmp;
    tobj-&gt;tm_got = 1;
    tobj-&gt;gmt = 1;
    return time;
}
</pre>
  </div>
</div>
</div>
<div id="M000248" class="method">
  <div id="M000248_title" class="title">
    <b>time.utc? => true or false<br />
time.gmt? => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if <em>time</em> represents a time in UTC (GMT).
</p>
<pre>
   t = Time.now                        #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.utc?                              #=&gt; false
   t = Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.utc?                              #=&gt; true

   t = Time.now                        #=&gt; Wed Apr 09 08:56:03 CDT 2003
   t.gmt?                              #=&gt; false
   t = Time.gm(2000,1,1,20,15,1)       #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt?                              #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000248_source')" id="l_M000248_source">show source</a> ]</p>
  <div id="M000248_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.utc? =&gt; true or false
 *     time.gmt? =&gt; true or false
 *  
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;time&lt;/i&gt; represents a time in UTC
 *  (GMT).
 *     
 *     t = Time.now                        #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.utc?                              #=&gt; false
 *     t = Time.gm(2000,&quot;jan&quot;,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.utc?                              #=&gt; true
 *
 *     t = Time.now                        #=&gt; Wed Apr 09 08:56:03 CDT 2003
 *     t.gmt?                              #=&gt; false
 *     t = Time.gm(2000,1,1,20,15,1)       #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt?                              #=&gt; true
 */

static VALUE
time_utc_p(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;gmt) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M000247" class="method">
  <div id="M000247_title" class="title">
    <b>time.gmt_offset => fixnum<br />
time.gmtoff     => fixnum<br />
time.utc_offset => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the offset in seconds between the timezone of <em>time</em> and
UTC.
</p>
<pre>
   t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
   t.gmt_offset                    #=&gt; 0
   l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
   l.gmt_offset                    #=&gt; -21600
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000247_source')" id="l_M000247_source">show source</a> ]</p>
  <div id="M000247_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.gmt_offset =&gt; fixnum
 *     time.gmtoff     =&gt; fixnum
 *     time.utc_offset =&gt; fixnum
 *  
 *  Returns the offset in seconds between the timezone of &lt;i&gt;time&lt;/i&gt;
 *  and UTC.
 *     
 *     t = Time.gm(2000,1,1,20,15,1)   #=&gt; Sat Jan 01 20:15:01 UTC 2000
 *     t.gmt_offset                    #=&gt; 0
 *     l = t.getlocal                  #=&gt; Sat Jan 01 14:15:01 CST 2000
 *     l.gmt_offset                    #=&gt; -21600
 */

static VALUE
time_utc_offset(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }

    if (tobj-&gt;gmt == 1) {
        return INT2FIX(0);
    }
    else {
#if defined(HAVE_STRUCT_TM_TM_GMTOFF)
        return INT2NUM(tobj-&gt;tm.tm_gmtoff);
#else
        struct tm *u, *l;
        time_t t;
        long off;
        l = &amp;tobj-&gt;tm;
        t = tobj-&gt;tv.tv_sec;
        u = gmtime(&amp;t);
        if (!u)
            rb_raise(rb_eArgError, &quot;gmtime error&quot;);
        if (l-&gt;tm_year != u-&gt;tm_year)
            off = l-&gt;tm_year &lt; u-&gt;tm_year ? -1 : 1;
        else if (l-&gt;tm_mon != u-&gt;tm_mon)
            off = l-&gt;tm_mon &lt; u-&gt;tm_mon ? -1 : 1;
        else if (l-&gt;tm_mday != u-&gt;tm_mday)
            off = l-&gt;tm_mday &lt; u-&gt;tm_mday ? -1 : 1;
        else
            off = 0;
        off = off * 24 + l-&gt;tm_hour - u-&gt;tm_hour;
        off = off * 60 + l-&gt;tm_min - u-&gt;tm_min;
        off = off * 60 + l-&gt;tm_sec - u-&gt;tm_sec;
        return LONG2FIX(off);
#endif
    }
}
</pre>
  </div>
</div>
</div>
<div id="M000259" class="method">
  <div id="M000259_title" class="title">
    <b>w3cdtf</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000259_source')" id="l_M000259_source">show source</a> ]</p>
  <div id="M000259_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rss/rss.rb, line 37</span>
37:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">w3cdtf</span>
38:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">usec</span>.<span class="ruby-identifier">zero?</span>
39:         <span class="ruby-identifier">fraction_digits</span> = <span class="ruby-value">0</span>
40:       <span class="ruby-keyword kw">else</span>
41:         <span class="ruby-identifier">fraction_digits</span> = <span class="ruby-constant">Math</span>.<span class="ruby-identifier">log10</span>(<span class="ruby-identifier">usec</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">/0*$/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">to_i</span>).<span class="ruby-identifier">floor</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
42:       <span class="ruby-keyword kw">end</span>
43:       <span class="ruby-identifier">xmlschema</span>(<span class="ruby-identifier">fraction_digits</span>)
44:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000240" class="method">
  <div id="M000240_title" class="title">
    <b>time.wday => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns an integer representing the day of the week, 0..6, with Sunday ==
0.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.wday         #=&gt; 3
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000240_source')" id="l_M000240_source">show source</a> ]</p>
  <div id="M000240_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.wday =&gt; fixnum
 *  
 *  Returns an integer representing the day of the week, 0..6, with
 *  Sunday == 0.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.wday         #=&gt; 3
 */

static VALUE
time_wday(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_wday);
}
</pre>
  </div>
</div>
</div>
<div id="M000268" class="method">
  <div id="M000268_title" class="title">
    <b>xmlschema</b>(fraction_digits=0)
  </div>
  <div class="description">
  <p>
Returns a string which represents the time as dateTime defined by <a
href="index.html?a=C00000959&name=XML">XML</a> Schema:
</p>
<pre>
  CCYY-MM-DDThh:mm:ssTZD
  CCYY-MM-DDThh:mm:ss.sssTZD
</pre>
<p>
where TZD is Z or [+-]hh:mm.
</p>
<p>
If self is a UTC time, Z is used as TZD. [+-]hh:mm is used otherwise.
</p>
<p>
<tt>fractional_seconds</tt> specifies a number of digits of fractional
seconds. Its default value is 0.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000269&name=iso8601">iso8601</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000268_source')" id="l_M000268_source">show source</a> ]</p>
  <div id="M000268_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/time.rb, line 444</span>
444:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">xmlschema</span>(<span class="ruby-identifier">fraction_digits</span>=<span class="ruby-value">0</span>)
445:     <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%d-%02d-%02dT%02d:%02d:%02d'</span>,
446:       <span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">day</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>) <span class="ruby-operator">+</span>
447:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fraction_digits</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
448:       <span class="ruby-value str">''</span>
449:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">fraction_digits</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">6</span>
450:       <span class="ruby-value str">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%06d'</span>, <span class="ruby-identifier">usec</span>)[<span class="ruby-value">0</span>, <span class="ruby-identifier">fraction_digits</span>]
451:     <span class="ruby-keyword kw">else</span>
452:       <span class="ruby-value str">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%06d'</span>, <span class="ruby-identifier">usec</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'0'</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">fraction_digits</span> <span class="ruby-operator">-</span> <span class="ruby-value">6</span>)
453:     <span class="ruby-keyword kw">end</span> <span class="ruby-operator">+</span>
454:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">utc?</span>
455:       <span class="ruby-value str">'Z'</span>
456:     <span class="ruby-keyword kw">else</span>
457:       <span class="ruby-identifier">off</span> = <span class="ruby-identifier">utc_offset</span>
458:       <span class="ruby-identifier">sign</span> = <span class="ruby-identifier">off</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-operator">?</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">'+'</span>
459:       <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'%s%02d:%02d'</span>, <span class="ruby-identifier">sign</span>, <span class="ruby-operator">*</span>(<span class="ruby-identifier">off</span>.<span class="ruby-identifier">abs</span> <span class="ruby-operator">/</span> <span class="ruby-value">60</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">60</span>))
460:     <span class="ruby-keyword kw">end</span>
461:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000241" class="method">
  <div id="M000241_title" class="title">
    <b>time.yday => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns an integer representing the day of the year, 1..366.
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.yday         #=&gt; 99
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000241_source')" id="l_M000241_source">show source</a> ]</p>
  <div id="M000241_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.yday =&gt; fixnum
 *  
 *  Returns an integer representing the day of the year, 1..366.
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.yday         #=&gt; 99
 */

static VALUE
time_yday(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return INT2FIX(tobj-&gt;tm.tm_yday+1);
}
</pre>
  </div>
</div>
</div>
<div id="M000239" class="method">
  <div id="M000239_title" class="title">
    <b>time.year => fixnum<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the year for <em>time</em> (including the century).
</p>
<pre>
   t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
   t.year         #=&gt; 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000239_source')" id="l_M000239_source">show source</a> ]</p>
  <div id="M000239_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.year =&gt; fixnum
 *  
 *  Returns the year for &lt;i&gt;time&lt;/i&gt; (including the century).
 *     
 *     t = Time.now   #=&gt; Wed Apr 09 08:56:04 CDT 2003
 *     t.year         #=&gt; 2003
 */

static VALUE
time_year(time)
    VALUE time;
{
    struct time_object *tobj;

    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }
    return LONG2NUM((long)tobj-&gt;tm.tm_year+1900);
}
</pre>
  </div>
</div>
</div>
<div id="M000244" class="method">
  <div id="M000244_title" class="title">
    <b>time.zone => string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the name of the time zone used for <em>time</em>. As of Ruby 1.8,
returns ``UTC&#8217;&#8217; rather than ``GMT&#8217;&#8217; for UTC times.
</p>
<pre>
   t = Time.gm(2000, &quot;jan&quot;, 1, 20, 15, 1)
   t.zone   #=&gt; &quot;UTC&quot;
   t = Time.local(2000, &quot;jan&quot;, 1, 20, 15, 1)
   t.zone   #=&gt; &quot;CST&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000244_source')" id="l_M000244_source">show source</a> ]</p>
  <div id="M000244_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     time.zone =&gt; string
 *  
 *  Returns the name of the time zone used for &lt;i&gt;time&lt;/i&gt;. As of Ruby
 *  1.8, returns ``UTC'' rather than ``GMT'' for UTC times.
 *     
 *     t = Time.gm(2000, &quot;jan&quot;, 1, 20, 15, 1)
 *     t.zone   #=&gt; &quot;UTC&quot;
 *     t = Time.local(2000, &quot;jan&quot;, 1, 20, 15, 1)
 *     t.zone   #=&gt; &quot;CST&quot;
 */

static VALUE
time_zone(time)
    VALUE time;
{
    struct time_object *tobj;
#if !defined(HAVE_TM_ZONE) &amp;&amp; (!defined(HAVE_TZNAME) || !defined(HAVE_DAYLIGHT))
    char buf[64];
    int len;
#endif
    
    GetTimeval(time, tobj);
    if (tobj-&gt;tm_got == 0) {
        time_get_tm(time, tobj-&gt;gmt);
    }

    if (tobj-&gt;gmt == 1) {
        return rb_str_new2(&quot;UTC&quot;);
    }
#if defined(HAVE_TM_ZONE)
    return rb_str_new2(tobj-&gt;tm.tm_zone);
#elif defined(HAVE_TZNAME) &amp;&amp; defined(HAVE_DAYLIGHT)
    return rb_str_new2(tzname[daylight &amp;&amp; tobj-&gt;tm.tm_isdst]);
#else
    len = strftime(buf, 64, &quot;%Z&quot;, &amp;tobj-&gt;tm);
    return rb_str_new(buf, len);
#endif
}
</pre>
  </div>
</div>
</div>
</div>

  </div>