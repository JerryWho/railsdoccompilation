  <div id="C00000276">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />File<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/file_c.html');">ruby-1.8.7-p22/file.c</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/ftools_rb.html');">ruby-1.8.7-p22/lib/ftools.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/pp_rb.html');">ruby-1.8.7-p22/lib/pp.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><h1>ftools.rb: Extra tools for the <a href="index.html?a=C00000276&name=File">File</a> class</h1>
<table>
<tr><td valign="top">Author:</td><td>WATANABE, Hirofumi

</td></tr>
<tr><td valign="top">Documentation:</td><td>Zachary Landau

</td></tr>
</table>
<p>
This library can be distributed under the terms of the Ruby license. You
can freely distribute/modify this library.
</p>
<p>
It is included in the Ruby standard library.
</p>
<h2>Description</h2>
<p>
ftools adds several (class, not instance) methods to the <a
href="index.html?a=C00000276&name=File">File</a> class, for copying,
moving, deleting, installing, and comparing files, as well as creating a
directory path. See the <a href="index.html?a=C00000276&name=File">File</a>
class for details.
</p>
<p>
<a href="index.html?a=C00000904&name=FileUtils">FileUtils</a> contains all
or nearly all the same functionality and more, and is a recommended option
over ftools
</p>
<p>
When you
</p>
<pre>
  require 'ftools'
</pre>
<p>
then the <a href="index.html?a=C00000276&name=File">File</a> class aquires
some utility methods for copying, moving, and deleting files, and more.
</p>
<p>
See the method descriptions below, and consider using <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a> as it is more
comprehensive.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M002478&name=atime" >atime</a></li>
  <li><a href="index.html?a=M002455&name=atime" >atime</a></li>
  <li><a href="index.html?a=M002472&name=basename" >basename</a></li>
  <li><a href="index.html?a=M002504&name=blockdev?" >blockdev?</a></li>
  <li><a href="index.html?a=M002511&name=catname" >catname</a></li>
  <li><a href="index.html?a=M002505&name=chardev?" >chardev?</a></li>
  <li><a href="index.html?a=M002459&name=chmod" >chmod</a></li>
  <li><a href="index.html?a=M002519&name=chmod" >chmod</a></li>
  <li><a href="index.html?a=M002481&name=chmod" >chmod</a></li>
  <li><a href="index.html?a=M002482&name=chown" >chown</a></li>
  <li><a href="index.html?a=M002460&name=chown" >chown</a></li>
  <li><a href="index.html?a=M002515&name=compare" >compare</a></li>
  <li><a href="index.html?a=M002513&name=copy" >copy</a></li>
  <li><a href="index.html?a=M002480&name=ctime" >ctime</a></li>
  <li><a href="index.html?a=M002457&name=ctime" >ctime</a></li>
  <li><a href="index.html?a=M002467&name=delete" >delete</a></li>
  <li><a href="index.html?a=M002486&name=directory?" >directory?</a></li>
  <li><a href="index.html?a=M002473&name=dirname" >dirname</a></li>
  <li><a href="index.html?a=M002493&name=executable?" >executable?</a></li>
  <li><a href="index.html?a=M002494&name=executable_real?" >executable_real?</a></li>
  <li><a href="index.html?a=M002487&name=exist?" >exist?</a></li>
  <li><a href="index.html?a=M002488&name=exists?" >exists?</a></li>
  <li><a href="index.html?a=M002471&name=expand_path" >expand_path</a></li>
  <li><a href="index.html?a=M002474&name=extname" >extname</a></li>
  <li><a href="index.html?a=M002495&name=file?" >file?</a></li>
  <li><a href="index.html?a=M002484&name=flock" >flock</a></li>
  <li><a href="index.html?a=M002450&name=fnmatch" >fnmatch</a></li>
  <li><a href="index.html?a=M002451&name=fnmatch?" >fnmatch?</a></li>
  <li><a href="index.html?a=M002454&name=ftype" >ftype</a></li>
  <li><a href="index.html?a=M002500&name=grpowned?" >grpowned?</a></li>
  <li><a href="index.html?a=M002509&name=identical?" >identical?</a></li>
  <li><a href="index.html?a=M002520&name=install" >install</a></li>
  <li><a href="index.html?a=M002476&name=join" >join</a></li>
  <li><a href="index.html?a=M002461&name=lchmod" >lchmod</a></li>
  <li><a href="index.html?a=M002462&name=lchown" >lchown</a></li>
  <li><a href="index.html?a=M002463&name=link" >link</a></li>
  <li><a href="index.html?a=M002477&name=lstat" >lstat</a></li>
  <li><a href="index.html?a=M002453&name=lstat" >lstat</a></li>
  <li><a href="index.html?a=M002517&name=makedirs" >makedirs</a></li>
  <li><a href="index.html?a=M002514&name=move" >move</a></li>
  <li><a href="index.html?a=M002479&name=mtime" >mtime</a></li>
  <li><a href="index.html?a=M002456&name=mtime" >mtime</a></li>
  <li><a href="index.html?a=M002510&name=new" >new</a></li>
  <li><a href="index.html?a=M002518&name=o_chmod" >o_chmod</a></li>
  <li><a href="index.html?a=M002499&name=owned?" >owned?</a></li>
  <li><a href="index.html?a=M002485&name=path" >path</a></li>
  <li><a href="index.html?a=M002501&name=pipe?" >pipe?</a></li>
  <li><a href="index.html?a=M002489&name=readable?" >readable?</a></li>
  <li><a href="index.html?a=M002490&name=readable_real?" >readable_real?</a></li>
  <li><a href="index.html?a=M002465&name=readlink" >readlink</a></li>
  <li><a href="index.html?a=M002468&name=rename" >rename</a></li>
  <li><a href="index.html?a=M002516&name=safe_unlink" >safe_unlink</a></li>
  <li><a href="index.html?a=M002507&name=setgid?" >setgid?</a></li>
  <li><a href="index.html?a=M002506&name=setuid?" >setuid?</a></li>
  <li><a href="index.html?a=M002498&name=size" >size</a></li>
  <li><a href="index.html?a=M002497&name=size?" >size?</a></li>
  <li><a href="index.html?a=M002503&name=socket?" >socket?</a></li>
  <li><a href="index.html?a=M002475&name=split" >split</a></li>
  <li><a href="index.html?a=M002452&name=stat" >stat</a></li>
  <li><a href="index.html?a=M002508&name=sticky?" >sticky?</a></li>
  <li><a href="index.html?a=M002464&name=symlink" >symlink</a></li>
  <li><a href="index.html?a=M002502&name=symlink?" >symlink?</a></li>
  <li><a href="index.html?a=M002512&name=syscopy" >syscopy</a></li>
  <li><a href="index.html?a=M002470&name=truncate" >truncate</a></li>
  <li><a href="index.html?a=M002483&name=truncate" >truncate</a></li>
  <li><a href="index.html?a=M002469&name=umask" >umask</a></li>
  <li><a href="index.html?a=M002466&name=unlink" >unlink</a></li>
  <li><a href="index.html?a=M002458&name=utime" >utime</a></li>
  <li><a href="index.html?a=M002491&name=writable?" >writable?</a></li>
  <li><a href="index.html?a=M002492&name=writable_real?" >writable_real?</a></li>
  <li><a href="index.html?a=M002496&name=zero?" >zero?</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Module "<a href="#" onclick="jsHref('classes/File/Constants.html');" class="link">File::Constants</a>"<br />
Class "<a href="#" onclick="jsHref('classes/File/Stat.html');" class="link">File::Stat</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">Separator</td>
    <td>=</td>
    <td class="attr-value">separator</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">SEPARATOR</td>
    <td>=</td>
    <td class="attr-value">separator</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ALT_SEPARATOR</td>
    <td>=</td>
    <td class="attr-value">rb_obj_freeze(rb_str_new2(&quot;\\&quot;))</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ALT_SEPARATOR</td>
    <td>=</td>
    <td class="attr-value">Qnil</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">PATH_SEPARATOR</td>
    <td>=</td>
    <td class="attr-value">rb_obj_freeze(rb_str_new2(PATH_SEP))</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">BUFSIZE</td>
    <td>=</td>
    <td class="attr-value">8 * 1024</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M002455" class="method">
  <div id="M002455_title" class="title">
    <b>File.atime(file_name)  =>  time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the last access time for the named file as a <a
href="index.html?a=C00000015&name=Time">Time</a> object).
</p>
<pre>
   File.atime(&quot;testfile&quot;)   #=&gt; Wed Apr 09 08:51:48 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002455_source')" id="l_M002455_source">show source</a> ]</p>
  <div id="M002455_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.atime(file_name)  =&gt;  time
 *  
 *  Returns the last access time for the named file as a Time object).
 *     
 *     File.atime(&quot;testfile&quot;)   #=&gt; Wed Apr 09 08:51:48 CDT 2003
 *     
 */

static VALUE
rb_file_s_atime(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0)
        rb_sys_fail(StringValueCStr(fname));
    return rb_time_new(st.st_atime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002472" class="method">
  <div id="M002472_title" class="title">
    <b>File.basename(file_name [, suffix] ) &rarr; base_name<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the last component of the filename given in <em>file_name</em>,
which must be formed using forward slashes (``<tt>/</tt>&#8217;&#8217;)
regardless of the separator used on the local file system. If
<em>suffix</em> is given and present at the end of <em>file_name</em>, it
is removed.
</p>
<pre>
   File.basename(&quot;/home/gumby/work/ruby.rb&quot;)          #=&gt; &quot;ruby.rb&quot;
   File.basename(&quot;/home/gumby/work/ruby.rb&quot;, &quot;.rb&quot;)   #=&gt; &quot;ruby&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002472_source')" id="l_M002472_source">show source</a> ]</p>
  <div id="M002472_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.basename(file_name [, suffix] ) -&gt; base_name
 *  
 *  Returns the last component of the filename given in &lt;i&gt;file_name&lt;/i&gt;,
 *  which must be formed using forward slashes (``&lt;code&gt;/&lt;/code&gt;'')
 *  regardless of the separator used on the local file system. If
 *  &lt;i&gt;suffix&lt;/i&gt; is given and present at the end of &lt;i&gt;file_name&lt;/i&gt;,
 *  it is removed.
 *     
 *     File.basename(&quot;/home/gumby/work/ruby.rb&quot;)          #=&gt; &quot;ruby.rb&quot;
 *     File.basename(&quot;/home/gumby/work/ruby.rb&quot;, &quot;.rb&quot;)   #=&gt; &quot;ruby&quot;
 */

static VALUE
rb_file_s_basename(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE fname, fext, basename;
    const char *name, *p;
#if defined DOSISH_DRIVE_LETTER || defined DOSISH_UNC
    const char *root;
#endif
    int f, n;

    if (rb_scan_args(argc, argv, &quot;11&quot;, &amp;fname, &amp;fext) == 2) {
        StringValue(fext);
    }
    StringValue(fname);
    if (RSTRING(fname)-&gt;len == 0 || !*(name = RSTRING(fname)-&gt;ptr))
        return fname;
    name = skipprefix(name);
#if defined DOSISH_DRIVE_LETTER || defined DOSISH_UNC
    root = name;
#endif
    while (isdirsep(*name))
        name++;
    if (!*name) {
        p = name - 1;
        f = 1;
#if defined DOSISH_DRIVE_LETTER || defined DOSISH_UNC
        if (name != root) {
            /* has slashes */
        }
#ifdef DOSISH_DRIVE_LETTER
        else if (*p == ':') {
            p++;
            f = 0;
        }
#endif
#ifdef DOSISH_UNC
        else {
            p = &quot;/&quot;;
        }
#endif
#endif
    }
    else {
        if (!(p = strrdirsep(name))) {
            p = name;
        }
        else {
            while (isdirsep(*p)) p++; /* skip last / */
        }
#if USE_NTFS
        n = ntfs_tail(p) - p;
#else
        n = chompdirsep(p) - p;
#endif
        if (NIL_P(fext) || !(f = rmext(p, n, StringValueCStr(fext)))) {
            f = n;
        }
        if (f == RSTRING_LEN(fname)) return fname;
    }
    basename = rb_str_new(p, f);
    OBJ_INFECT(basename, fname);
    return basename;
}
</pre>
  </div>
</div>
</div>
<div id="M002504" class="method">
  <div id="M002504_title" class="title">
    <b>File.blockdev?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a block device.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002504_source')" id="l_M002504_source">show source</a> ]</p>
  <div id="M002504_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.blockdev?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a block device.
 */

static VALUE
test_b(obj, fname)
    VALUE obj, fname;
{
#ifndef S_ISBLK
#   ifdef S_IFBLK
#       define S_ISBLK(m) ((m &amp; S_IFMT) == S_IFBLK)
#   else
#       define S_ISBLK(m) (0)  /* anytime false */
#   endif
#endif

#ifdef S_ISBLK
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISBLK(st.st_mode)) return Qtrue;

#endif
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002511" class="method">
  <div id="M002511_title" class="title">
    <b>catname</b>(from, to)
  </div>
  <div class="description">
  <p>
If <tt>to</tt> is a valid directory, <tt>from</tt> will be appended to
<tt>to</tt>, adding and escaping backslashes as necessary. Otherwise,
<tt>to</tt> will be returned. Useful for appending <tt>from</tt> to
<tt>to</tt> only if the filename was not specified in <tt>to</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002511_source')" id="l_M002511_source">show source</a> ]</p>
  <div id="M002511_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 44</span>
44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">catname</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
45:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">directory?</span> <span class="ruby-identifier">to</span>
46:       <span class="ruby-identifier">join</span> <span class="ruby-identifier">to</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r([/\\]$)</span>, <span class="ruby-value str">''</span>), <span class="ruby-identifier">basename</span>(<span class="ruby-identifier">from</span>)
47:     <span class="ruby-keyword kw">else</span>
48:       <span class="ruby-identifier">to</span>
49:     <span class="ruby-keyword kw">end</span>
50:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002505" class="method">
  <div id="M002505_title" class="title">
    <b>File.chardev?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a character device.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002505_source')" id="l_M002505_source">show source</a> ]</p>
  <div id="M002505_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.chardev?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a character device.
 */
static VALUE
test_c(obj, fname)
    VALUE obj, fname;
{
#ifndef S_ISCHR
#   define S_ISCHR(m) ((m &amp; S_IFMT) == S_IFCHR)
#endif

    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISCHR(st.st_mode)) return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002459" class="method">
  <div id="M002459_title" class="title">
    <b>File.chmod(mode_int, file_name, ... ) &rarr; integer<br />
</b>
  </div>
  <div class="description">
  <p>
Changes permission bits on the named file(s) to the bit pattern represented
by <em>mode_int</em>. Actual effects are operating system dependent (see
the beginning of this section). On Unix systems, see <tt>chmod(2)</tt> for
details. Returns the number of files processed.
</p>
<pre>
   File.chmod(0644, &quot;testfile&quot;, &quot;out&quot;)   #=&gt; 2
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002459_source')" id="l_M002459_source">show source</a> ]</p>
  <div id="M002459_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.chmod(mode_int, file_name, ... ) -&gt; integer
 *  
 *  Changes permission bits on the named file(s) to the bit pattern
 *  represented by &lt;i&gt;mode_int&lt;/i&gt;. Actual effects are operating system
 *  dependent (see the beginning of this section). On Unix systems, see
 *  &lt;code&gt;chmod(2)&lt;/code&gt; for details. Returns the number of files
 *  processed.
 *     
 *     File.chmod(0644, &quot;testfile&quot;, &quot;out&quot;)   #=&gt; 2
 */

static VALUE
rb_file_s_chmod(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE vmode;
    VALUE rest;
    int mode;
    long n;

    rb_secure(2);
    rb_scan_args(argc, argv, &quot;1*&quot;, &amp;vmode, &amp;rest);
    mode = NUM2INT(vmode);

    n = apply2files(chmod_internal, rest, &amp;mode);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002519" class="method">
  <div id="M002519_title" class="title">
    <b>chmod</b>(mode, *files)
  </div>
  <div class="description">
  <p>
Changes permission bits on <tt>files</tt> to the bit pattern represented by
<tt>mode</tt>. If the last parameter isn&#8217;t a <a
href="index.html?a=C00000055&name=String">String</a>, verbose mode will be
enabled.
</p>
<pre>
  File.chmod 0755, 'somecommand'
  File.chmod 0644, 'my.rb', 'your.rb', true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002519_source')" id="l_M002519_source">show source</a> ]</p>
  <div id="M002519_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 237</span>
237:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>)
238:     <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">files</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword kw">end</span>
239:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">printf</span> <span class="ruby-value str">&quot;chmod %04o %s\n&quot;</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">files</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot; &quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
240:     <span class="ruby-identifier">o_chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">files</span>
241:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002460" class="method">
  <div id="M002460_title" class="title">
    <b>File.chown(owner_int, group_int, file_name,... ) &rarr; integer<br />
</b>
  </div>
  <div class="description">
  <p>
Changes the owner and group of the named file(s) to the given numeric owner
and group id&#8217;s. Only a process with superuser privileges may change
the owner of a file. The current owner of a file may change the
file&#8217;s group to any group to which the owner belongs. A <tt>nil</tt>
or -1 owner or group id is ignored. Returns the number of files processed.
</p>
<pre>
   File.chown(nil, 100, &quot;testfile&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002460_source')" id="l_M002460_source">show source</a> ]</p>
  <div id="M002460_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.chown(owner_int, group_int, file_name,... ) -&gt; integer
 *  
 *  Changes the owner and group of the named file(s) to the given
 *  numeric owner and group id's. Only a process with superuser
 *  privileges may change the owner of a file. The current owner of a
 *  file may change the file's group to any group to which the owner
 *  belongs. A &lt;code&gt;nil&lt;/code&gt; or -1 owner or group id is ignored.
 *  Returns the number of files processed.
 *     
 *     File.chown(nil, 100, &quot;testfile&quot;)
 *     
 */

static VALUE
rb_file_s_chown(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE o, g, rest;
    struct chown_args arg;
    long n;

    rb_secure(2);
    rb_scan_args(argc, argv, &quot;2*&quot;, &amp;o, &amp;g, &amp;rest);
    if (NIL_P(o)) {
        arg.owner = -1;
    }
    else {
        arg.owner = NUM2INT(o);
    }
    if (NIL_P(g)) {
        arg.group = -1;
    }
    else {
        arg.group = NUM2INT(g);
    }

    n = apply2files(chown_internal, rest, &amp;arg);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002515" class="method">
  <div id="M002515_title" class="title">
    <b>compare</b>(from, to, verbose = false)
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if and only if the contents of files <tt>from</tt>
and <tt>to</tt> are identical. If <tt>verbose</tt> is <tt>true</tt>,
<tt>from &lt;=&gt; to</tt> is printed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002515_source')" id="l_M002515_source">show source</a> ]</p>
  <div id="M002515_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">false</span>)
131:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">from</span>, <span class="ruby-value str">&quot; &lt;=&gt; &quot;</span>, <span class="ruby-identifier">to</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
132: 
133:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">from</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">to</span>).<span class="ruby-identifier">size</span>
134: 
135:     <span class="ruby-identifier">from</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">from</span>, <span class="ruby-value str">&quot;rb&quot;</span>)
136:     <span class="ruby-identifier">to</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">to</span>, <span class="ruby-value str">&quot;rb&quot;</span>)
137: 
138:     <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
139:     <span class="ruby-identifier">fr</span> = <span class="ruby-identifier">tr</span> = <span class="ruby-value str">''</span>
140: 
141:     <span class="ruby-keyword kw">begin</span>
142:       <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">fr</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">tr</span>
143:         <span class="ruby-identifier">fr</span> = <span class="ruby-identifier">from</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">BUFSIZE</span>)
144:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">fr</span>
145:           <span class="ruby-identifier">tr</span> = <span class="ruby-identifier">to</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">fr</span>.<span class="ruby-identifier">size</span>)
146:         <span class="ruby-keyword kw">else</span>
147:           <span class="ruby-identifier">ret</span> = <span class="ruby-identifier">to</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">BUFSIZE</span>)
148:           <span class="ruby-identifier">ret</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">ret</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">ret</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
149:           <span class="ruby-keyword kw">break</span>
150:         <span class="ruby-keyword kw">end</span>
151:       <span class="ruby-keyword kw">end</span>
152:     <span class="ruby-keyword kw">rescue</span>
153:       <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
154:     <span class="ruby-keyword kw">ensure</span>
155:       <span class="ruby-identifier">to</span>.<span class="ruby-identifier">close</span>
156:       <span class="ruby-identifier">from</span>.<span class="ruby-identifier">close</span>
157:     <span class="ruby-keyword kw">end</span>
158:     <span class="ruby-identifier">ret</span>
159:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002513" class="method">
  <div id="M002513_title" class="title">
    <b>copy</b>(from, to, verbose = false)
  </div>
  <div class="description">
  <p>
Copies a file <tt>from</tt> to <tt>to</tt> using <a
href="index.html?a=M002512&name=syscopy">syscopy</a>. If <tt>to</tt> is a
directory, copies <tt>from</tt> to <tt>to/from</tt>. If <tt>verbose</tt> is
true, <tt>from -&gt; to</tt> is printed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002513_source')" id="l_M002513_source">show source</a> ]</p>
  <div id="M002513_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">false</span>)
88:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">from</span>, <span class="ruby-value str">&quot; -&gt; &quot;</span>, <span class="ruby-identifier">catname</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>), <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
89:     <span class="ruby-identifier">syscopy</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>
90:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002457" class="method">
  <div id="M002457_title" class="title">
    <b>File.ctime(file_name)  => time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the change time for the named file (the time at which directory
information about the file was changed, not the file itself).
</p>
<pre>
   File.ctime(&quot;testfile&quot;)   #=&gt; Wed Apr 09 08:53:13 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002457_source')" id="l_M002457_source">show source</a> ]</p>
  <div id="M002457_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.ctime(file_name)  =&gt; time
 *  
 *  Returns the change time for the named file (the time at which
 *  directory information about the file was changed, not the file
 *  itself).
 *     
 *     File.ctime(&quot;testfile&quot;)   #=&gt; Wed Apr 09 08:53:13 CDT 2003
 *     
 */

static VALUE
rb_file_s_ctime(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0)
        rb_sys_fail(RSTRING(fname)-&gt;ptr);
    return rb_time_new(st.st_ctime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002467" class="method">
  <div id="M002467_title" class="title">
    <b>File.delete(file_name, ...)  => integer<br />
File.unlink(file_name, ...)  => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Deletes the named files, returning the number of names passed as arguments.
Raises an exception on any error. See also <tt>Dir::rmdir</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002467_source')" id="l_M002467_source">show source</a> ]</p>
  <div id="M002467_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.delete(file_name, ...)  =&gt; integer
 *     File.unlink(file_name, ...)  =&gt; integer
 *  
 *  Deletes the named files, returning the number of names
 *  passed as arguments. Raises an exception on any error.
 *  See also &lt;code&gt;Dir::rmdir&lt;/code&gt;.
 */

static VALUE
rb_file_s_unlink(klass, args)
    VALUE klass, args;
{
    long n;

    rb_secure(2);
    n = apply2files(unlink_internal, args, 0);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002486" class="method">
  <div id="M002486_title" class="title">
    <b>File.directory?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a directory, <tt>false</tt>
otherwise.
</p>
<pre>
   File.directory?(&quot;.&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002486_source')" id="l_M002486_source">show source</a> ]</p>
  <div id="M002486_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.directory?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a directory,
 * &lt;code&gt;false&lt;/code&gt; otherwise.
 *
 *    File.directory?(&quot;.&quot;)
 */

static VALUE
test_d(obj, fname)
    VALUE obj, fname;
{
#ifndef S_ISDIR
#   define S_ISDIR(m) ((m &amp; S_IFMT) == S_IFDIR)
#endif

    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISDIR(st.st_mode)) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002473" class="method">
  <div id="M002473_title" class="title">
    <b>File.dirname(file_name ) &rarr; dir_name<br />
</b>
  </div>
  <div class="description">
  <p>
Returns all components of the filename given in <em>file_name</em> except
the last one. The filename must be formed using forward slashes
(``<tt>/</tt>&#8217;&#8217;) regardless of the separator used on the local
file system.
</p>
<pre>
   File.dirname(&quot;/home/gumby/work/ruby.rb&quot;)   #=&gt; &quot;/home/gumby/work&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002473_source')" id="l_M002473_source">show source</a> ]</p>
  <div id="M002473_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.dirname(file_name ) -&gt; dir_name
 *  
 *  Returns all components of the filename given in &lt;i&gt;file_name&lt;/i&gt;
 *  except the last one. The filename must be formed using forward
 *  slashes (``&lt;code&gt;/&lt;/code&gt;'') regardless of the separator used on the
 *  local file system.
 *     
 *     File.dirname(&quot;/home/gumby/work/ruby.rb&quot;)   #=&gt; &quot;/home/gumby/work&quot;
 */

static VALUE
rb_file_s_dirname(klass, fname)
    VALUE klass, fname;
{
    const char *name, *root, *p;
    VALUE dirname;

    name = StringValueCStr(fname);
    root = skiproot(name);
#ifdef DOSISH_UNC
    if (root &gt; name + 1 &amp;&amp; isdirsep(*name))
        root = skipprefix(name = root - 2);
#else
    if (root &gt; name + 1)
        name = root - 1;
#endif
    p = strrdirsep(root);
    if (!p) {
        p = root;
    }
    if (p == name)
        return rb_str_new2(&quot;.&quot;);
#ifdef DOSISH_DRIVE_LETTER
    if (has_drive_letter(name) &amp;&amp; isdirsep(*(name + 2))) {
        const char *top = skiproot(name + 2);
        dirname = rb_str_new(name, 3);
        rb_str_cat(dirname, top, p - top);
    }
    else
#endif
    dirname = rb_str_new(name, p - name);
#ifdef DOSISH_DRIVE_LETTER
    if (has_drive_letter(name) &amp;&amp; root == name + 2 &amp;&amp; p - name == 2)
        rb_str_cat(dirname, &quot;.&quot;, 1);
#endif
    OBJ_INFECT(dirname, fname);
    return dirname;
}
</pre>
  </div>
</div>
</div>
<div id="M002493" class="method">
  <div id="M002493_title" class="title">
    <b>File.executable?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is executable by the effective user
id of this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002493_source')" id="l_M002493_source">show source</a> ]</p>
  <div id="M002493_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.executable?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is executable by the effective
 * user id of this process.
 */

static VALUE
test_x(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (eaccess(StringValueCStr(fname), X_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002494" class="method">
  <div id="M002494_title" class="title">
    <b>File.executable_real?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is executable by the real user id
of this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002494_source')" id="l_M002494_source">show source</a> ]</p>
  <div id="M002494_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.executable_real?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is executable by the real
 * user id of this process.
 */

static VALUE
test_X(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (access(StringValueCStr(fname), X_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002487" class="method">
  <div id="M002487_title" class="title">
    <b>File.exist?(file_name)    =>  true or false<br />
File.exists?(file_name)   =>  true or false    (obsolete)<br />
</b>
  </div>
  <div class="description">
  <p>
Return <tt>true</tt> if the named file exists.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002487_source')" id="l_M002487_source">show source</a> ]</p>
  <div id="M002487_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.exist?(file_name)    =&gt;  true or false
 *    File.exists?(file_name)   =&gt;  true or false    (obsolete)
 *
 * Return &lt;code&gt;true&lt;/code&gt; if the named file exists.
 */

static VALUE
test_e(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002488" class="method">
  <div id="M002488_title" class="title">
    <b>File.exist?(file_name)    =>  true or false<br />
File.exists?(file_name)   =>  true or false    (obsolete)<br />
</b>
  </div>
  <div class="description">
  <p>
Return <tt>true</tt> if the named file exists.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002488_source')" id="l_M002488_source">show source</a> ]</p>
  <div id="M002488_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.exist?(file_name)    =&gt;  true or false
 *    File.exists?(file_name)   =&gt;  true or false    (obsolete)
 *
 * Return &lt;code&gt;true&lt;/code&gt; if the named file exists.
 */

static VALUE
test_e(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002471" class="method">
  <div id="M002471_title" class="title">
    <b>File.expand_path(file_name [, dir_string] ) &rarr; abs_file_name<br />
</b>
  </div>
  <div class="description">
  <p>
Converts a pathname to an absolute pathname. Relative paths are referenced
from the current working directory of the process unless
<em>dir_string</em> is given, in which case it will be used as the starting
point. The given pathname may start with a ``<tt>~</tt>&#8217;&#8217;,
which expands to the process owner&#8217;s home directory (the environment
variable <tt>HOME</tt> must be set correctly).
``<tt>~</tt><em>user</em>&#8217;&#8217; expands to the named user&#8217;s
home directory.
</p>
<pre>
   File.expand_path(&quot;~oracle/bin&quot;)           #=&gt; &quot;/home/oracle/bin&quot;
   File.expand_path(&quot;../../bin&quot;, &quot;/tmp/x&quot;)   #=&gt; &quot;/bin&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002471_source')" id="l_M002471_source">show source</a> ]</p>
  <div id="M002471_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.expand_path(file_name [, dir_string] ) -&gt; abs_file_name
 *  
 *  Converts a pathname to an absolute pathname. Relative paths are
 *  referenced from the current working directory of the process unless
 *  &lt;i&gt;dir_string&lt;/i&gt; is given, in which case it will be used as the
 *  starting point. The given pathname may start with a
 *  ``&lt;code&gt;~&lt;/code&gt;'', which expands to the process owner's home
 *  directory (the environment variable &lt;code&gt;HOME&lt;/code&gt; must be set
 *  correctly). ``&lt;code&gt;~&lt;/code&gt;&lt;i&gt;user&lt;/i&gt;'' expands to the named
 *  user's home directory.
 *     
 *     File.expand_path(&quot;~oracle/bin&quot;)           #=&gt; &quot;/home/oracle/bin&quot;
 *     File.expand_path(&quot;../../bin&quot;, &quot;/tmp/x&quot;)   #=&gt; &quot;/bin&quot;
 */

VALUE
rb_file_s_expand_path(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE fname, dname;

    if (argc == 1) {
        return rb_file_expand_path(argv[0], Qnil);
    }
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;fname, &amp;dname);

    return rb_file_expand_path(fname, dname);
}
</pre>
  </div>
</div>
</div>
<div id="M002474" class="method">
  <div id="M002474_title" class="title">
    <b>File.extname(path) &rarr; string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the extension (the portion of file name in <em>path</em> after the
period).
</p>
<pre>
   File.extname(&quot;test.rb&quot;)         #=&gt; &quot;.rb&quot;
   File.extname(&quot;a/b/d/test.rb&quot;)   #=&gt; &quot;.rb&quot;
   File.extname(&quot;test&quot;)            #=&gt; &quot;&quot;
   File.extname(&quot;.profile&quot;)        #=&gt; &quot;&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002474_source')" id="l_M002474_source">show source</a> ]</p>
  <div id="M002474_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.extname(path) -&gt; string
 *  
 *  Returns the extension (the portion of file name in &lt;i&gt;path&lt;/i&gt;
 *  after the period).
 *     
 *     File.extname(&quot;test.rb&quot;)         #=&gt; &quot;.rb&quot;
 *     File.extname(&quot;a/b/d/test.rb&quot;)   #=&gt; &quot;.rb&quot;
 *     File.extname(&quot;test&quot;)            #=&gt; &quot;&quot;
 *     File.extname(&quot;.profile&quot;)        #=&gt; &quot;&quot;
 *     
 */

static VALUE
rb_file_s_extname(klass, fname)
    VALUE klass, fname;
{
    const char *name, *p, *e;
    VALUE extname;

    name = StringValueCStr(fname);
    p = strrdirsep(name);       /* get the last path component */
    if (!p)
        p = name;
    else
        name = ++p;

    e = 0;
    while (*p) {
        if (*p == '.' || istrailinggabage(*p)) {
#if USE_NTFS
            const char *last = p++, *dot = last;
            while (istrailinggabage(*p)) {
                if (*p == '.') dot = p;
                p++;
            }
            if (!*p || *p == ':') {
                p = last;
                break;
            }
            e = dot;
            continue;
#else
            e = p;       /* get the last dot of the last component */
#endif
        }
#if USE_NTFS
        else if (*p == ':') {
            break;
        }
#endif
        else if (isdirsep(*p))
            break;
        p = CharNext(p);
    }
    if (!e || e == name || e+1 == p)    /* no dot, or the only dot is first or end? */
        return rb_str_new(0, 0);
    extname = rb_str_new(e, p - e);     /* keep the dot, too! */
    OBJ_INFECT(extname, fname);
    return extname;
}
</pre>
  </div>
</div>
</div>
<div id="M002495" class="method">
  <div id="M002495_title" class="title">
    <b>File.file?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file exists and is a regular file.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002495_source')" id="l_M002495_source">show source</a> ]</p>
  <div id="M002495_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.file?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file exists and is a
 * regular file.
 */

static VALUE
test_f(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISREG(st.st_mode)) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002450" class="method">
  <div id="M002450_title" class="title">
    <b>File.fnmatch( pattern, path, [flags] ) => (true or false)<br />
File.fnmatch?( pattern, path, [flags] ) => (true or false)<br />
</b>
  </div>
  <div class="description">
  <p>
Returns true if <em>path</em> matches against <em>pattern</em> The pattern
is not a regular expression; instead it follows rules similar to shell
filename globbing. It may contain the following metacharacters:
</p>
<table>
<tr><td valign="top"><tt>*</tt>:</td><td>Matches any file. Can be restricted by other values in the glob. <tt>*</tt>
will match all files; <tt>c*</tt> will match all files beginning with
<tt>c</tt>; <tt>*c</tt> will match all files ending with <tt>c</tt>; and
<b><tt>c</tt></b> will match all files that have <tt>c</tt> in them
(including at the beginning or end). Equivalent to <tt>/ .* /x</tt> in
regexp.

</td></tr>
<tr><td valign="top"><tt>**</tt>:</td><td>Matches directories recursively or files expansively.

</td></tr>
<tr><td valign="top"><tt>?</tt>:</td><td>Matches any one character. Equivalent to <tt>/.{1}/</tt> in regexp.

</td></tr>
<tr><td valign="top"><tt>[set]</tt>:</td><td>Matches any one character in <tt>set</tt>. Behaves exactly like character
sets in <a href="index.html?a=C00000110&name=Regexp">Regexp</a>, including
set negation (<tt>[^a-z]</tt>).

</td></tr>
<tr><td valign="top">&lt;code&gt;&lt;/code&gt;:</td><td>Escapes the next metacharacter.

</td></tr>
</table>
<p>
<em>flags</em> is a bitwise OR of the <tt>FNM_xxx</tt> parameters. The same
glob pattern and flags are used by <tt>Dir::glob</tt>.
</p>
<pre>
   File.fnmatch('cat',       'cat')        #=&gt; true  : match entire string
   File.fnmatch('cat',       'category')   #=&gt; false : only match partial string
   File.fnmatch('c{at,ub}s', 'cats')       #=&gt; false : { } isn't supported

   File.fnmatch('c?t',     'cat')          #=&gt; true  : '?' match only 1 character
   File.fnmatch('c??t',    'cat')          #=&gt; false : ditto
   File.fnmatch('c*',      'cats')         #=&gt; true  : '*' match 0 or more characters
   File.fnmatch('c*t',     'c/a/b/t')      #=&gt; true  : ditto
   File.fnmatch('ca[a-z]', 'cat')          #=&gt; true  : inclusive bracket expression
   File.fnmatch('ca[^t]',  'cat')          #=&gt; false : exclusive bracket expression ('^' or '!')

   File.fnmatch('cat', 'CAT')                     #=&gt; false : case sensitive
   File.fnmatch('cat', 'CAT', File::FNM_CASEFOLD) #=&gt; true  : case insensitive

   File.fnmatch('?',   '/', File::FNM_PATHNAME)  #=&gt; false : wildcard doesn't match '/' on FNM_PATHNAME
   File.fnmatch('*',   '/', File::FNM_PATHNAME)  #=&gt; false : ditto
   File.fnmatch('[/]', '/', File::FNM_PATHNAME)  #=&gt; false : ditto

   File.fnmatch('\?',   '?')                       #=&gt; true  : escaped wildcard becomes ordinary
   File.fnmatch('\a',   'a')                       #=&gt; true  : escaped ordinary remains ordinary
   File.fnmatch('\a',   '\a', File::FNM_NOESCAPE)  #=&gt; true  : FNM_NOESACPE makes '\' ordinary
   File.fnmatch('[\?]', '?')                       #=&gt; true  : can escape inside bracket expression

   File.fnmatch('*',   '.profile')                      #=&gt; false : wildcard doesn't match leading
   File.fnmatch('*',   '.profile', File::FNM_DOTMATCH)  #=&gt; true    period by default.
   File.fnmatch('.*',  '.profile')                      #=&gt; true

   rbfiles = '**' '/' '*.rb' # you don't have to do like this. just write in single string.
   File.fnmatch(rbfiles, 'main.rb')                    #=&gt; false
   File.fnmatch(rbfiles, './main.rb')                  #=&gt; false
   File.fnmatch(rbfiles, 'lib/song.rb')                #=&gt; true
   File.fnmatch('**.rb', 'main.rb')                    #=&gt; true
   File.fnmatch('**.rb', './main.rb')                  #=&gt; false
   File.fnmatch('**.rb', 'lib/song.rb')                #=&gt; true
   File.fnmatch('*',           'dave/.profile')                      #=&gt; true

   pattern = '*' '/' '*'
   File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME)  #=&gt; false
   File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true

   pattern = '**' '/' 'foo'
   File.fnmatch(pattern, 'a/b/c/foo', File::FNM_PATHNAME)     #=&gt; true
   File.fnmatch(pattern, '/a/b/c/foo', File::FNM_PATHNAME)    #=&gt; true
   File.fnmatch(pattern, 'c:/a/b/c/foo', File::FNM_PATHNAME)  #=&gt; true
   File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME)    #=&gt; false
   File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002450_source')" id="l_M002450_source">show source</a> ]</p>
  <div id="M002450_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.fnmatch( pattern, path, [flags] ) =&gt; (true or false)
 *     File.fnmatch?( pattern, path, [flags] ) =&gt; (true or false)
 *
 *  Returns true if &lt;i&gt;path&lt;/i&gt; matches against &lt;i&gt;pattern&lt;/i&gt; The
 *  pattern is not a regular expression; instead it follows rules
 *  similar to shell filename globbing. It may contain the following
 *  metacharacters:
 *
 *  &lt;code&gt;*&lt;/code&gt;::        Matches any file. Can be restricted by
 *                          other values in the glob. &lt;code&gt;*&lt;/code&gt;
 *                          will match all files; &lt;code&gt;c*&lt;/code&gt; will
 *                          match all files beginning with
 *                          &lt;code&gt;c&lt;/code&gt;; &lt;code&gt;*c&lt;/code&gt; will match
 *                          all files ending with &lt;code&gt;c&lt;/code&gt;; and
 *                          &lt;code&gt;*c*&lt;/code&gt; will match all files that
 *                          have &lt;code&gt;c&lt;/code&gt; in them (including at
 *                          the beginning or end). Equivalent to
 *                          &lt;code&gt;/ .* /x&lt;/code&gt; in regexp.
 *  &lt;code&gt;**&lt;/code&gt;::       Matches directories recursively or files
 *                          expansively.
 *  &lt;code&gt;?&lt;/code&gt;::        Matches any one character. Equivalent to
 *                          &lt;code&gt;/.{1}/&lt;/code&gt; in regexp.
 *  &lt;code&gt;[set]&lt;/code&gt;::    Matches any one character in +set+.
 *                          Behaves exactly like character sets in
 *                          Regexp, including set negation
 *                          (&lt;code&gt;[^a-z]&lt;/code&gt;).
 *  &lt;code&gt;\&lt;/code&gt;::        Escapes the next metacharacter.
 *
 *  &lt;i&gt;flags&lt;/i&gt; is a bitwise OR of the &lt;code&gt;FNM_xxx&lt;/code&gt;
 *  parameters. The same glob pattern and flags are used by
 *  &lt;code&gt;Dir::glob&lt;/code&gt;.
 *
 *     File.fnmatch('cat',       'cat')        #=&gt; true  : match entire string
 *     File.fnmatch('cat',       'category')   #=&gt; false : only match partial string
 *     File.fnmatch('c{at,ub}s', 'cats')       #=&gt; false : { } isn't supported
 *
 *     File.fnmatch('c?t',     'cat')          #=&gt; true  : '?' match only 1 character
 *     File.fnmatch('c??t',    'cat')          #=&gt; false : ditto
 *     File.fnmatch('c*',      'cats')         #=&gt; true  : '*' match 0 or more characters
 *     File.fnmatch('c*t',     'c/a/b/t')      #=&gt; true  : ditto
 *     File.fnmatch('ca[a-z]', 'cat')          #=&gt; true  : inclusive bracket expression
 *     File.fnmatch('ca[^t]',  'cat')          #=&gt; false : exclusive bracket expression ('^' or '!')
 *
 *     File.fnmatch('cat', 'CAT')                     #=&gt; false : case sensitive
 *     File.fnmatch('cat', 'CAT', File::FNM_CASEFOLD) #=&gt; true  : case insensitive
 *
 *     File.fnmatch('?',   '/', File::FNM_PATHNAME)  #=&gt; false : wildcard doesn't match '/' on FNM_PATHNAME
 *     File.fnmatch('*',   '/', File::FNM_PATHNAME)  #=&gt; false : ditto
 *     File.fnmatch('[/]', '/', File::FNM_PATHNAME)  #=&gt; false : ditto
 *
 *     File.fnmatch('\?',   '?')                       #=&gt; true  : escaped wildcard becomes ordinary
 *     File.fnmatch('\a',   'a')                       #=&gt; true  : escaped ordinary remains ordinary
 *     File.fnmatch('\a',   '\a', File::FNM_NOESCAPE)  #=&gt; true  : FNM_NOESACPE makes '\' ordinary
 *     File.fnmatch('[\?]', '?')                       #=&gt; true  : can escape inside bracket expression
 *
 *     File.fnmatch('*',   '.profile')                      #=&gt; false : wildcard doesn't match leading
 *     File.fnmatch('*',   '.profile', File::FNM_DOTMATCH)  #=&gt; true    period by default.
 *     File.fnmatch('.*',  '.profile')                      #=&gt; true
 *
 *     rbfiles = '**' '/' '*.rb' # you don't have to do like this. just write in single string.
 *     File.fnmatch(rbfiles, 'main.rb')                    #=&gt; false
 *     File.fnmatch(rbfiles, './main.rb')                  #=&gt; false
 *     File.fnmatch(rbfiles, 'lib/song.rb')                #=&gt; true
 *     File.fnmatch('**.rb', 'main.rb')                    #=&gt; true
 *     File.fnmatch('**.rb', './main.rb')                  #=&gt; false
 *     File.fnmatch('**.rb', 'lib/song.rb')                #=&gt; true
 *     File.fnmatch('*',           'dave/.profile')                      #=&gt; true
 *
 *     pattern = '*' '/' '*'
 *     File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME)  #=&gt; false
 *     File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
 *
 *     pattern = '**' '/' 'foo'
 *     File.fnmatch(pattern, 'a/b/c/foo', File::FNM_PATHNAME)     #=&gt; true
 *     File.fnmatch(pattern, '/a/b/c/foo', File::FNM_PATHNAME)    #=&gt; true
 *     File.fnmatch(pattern, 'c:/a/b/c/foo', File::FNM_PATHNAME)  #=&gt; true
 *     File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME)    #=&gt; false
 *     File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
 */
static VALUE
file_s_fnmatch(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE pattern, path;
    VALUE rflags;
    int flags;

    if (rb_scan_args(argc, argv, &quot;21&quot;, &amp;pattern, &amp;path, &amp;rflags) == 3)
        flags = NUM2INT(rflags);
    else
        flags = 0;

    StringValue(pattern);
    StringValue(path);

    if (fnmatch(RSTRING(pattern)-&gt;ptr, RSTRING(path)-&gt;ptr, flags) == 0)
        return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002451" class="method">
  <div id="M002451_title" class="title">
    <b>File.fnmatch( pattern, path, [flags] ) => (true or false)<br />
File.fnmatch?( pattern, path, [flags] ) => (true or false)<br />
</b>
  </div>
  <div class="description">
  <p>
Returns true if <em>path</em> matches against <em>pattern</em> The pattern
is not a regular expression; instead it follows rules similar to shell
filename globbing. It may contain the following metacharacters:
</p>
<table>
<tr><td valign="top"><tt>*</tt>:</td><td>Matches any file. Can be restricted by other values in the glob. <tt>*</tt>
will match all files; <tt>c*</tt> will match all files beginning with
<tt>c</tt>; <tt>*c</tt> will match all files ending with <tt>c</tt>; and
<b><tt>c</tt></b> will match all files that have <tt>c</tt> in them
(including at the beginning or end). Equivalent to <tt>/ .* /x</tt> in
regexp.

</td></tr>
<tr><td valign="top"><tt>**</tt>:</td><td>Matches directories recursively or files expansively.

</td></tr>
<tr><td valign="top"><tt>?</tt>:</td><td>Matches any one character. Equivalent to <tt>/.{1}/</tt> in regexp.

</td></tr>
<tr><td valign="top"><tt>[set]</tt>:</td><td>Matches any one character in <tt>set</tt>. Behaves exactly like character
sets in <a href="index.html?a=C00000110&name=Regexp">Regexp</a>, including
set negation (<tt>[^a-z]</tt>).

</td></tr>
<tr><td valign="top">&lt;code&gt;&lt;/code&gt;:</td><td>Escapes the next metacharacter.

</td></tr>
</table>
<p>
<em>flags</em> is a bitwise OR of the <tt>FNM_xxx</tt> parameters. The same
glob pattern and flags are used by <tt>Dir::glob</tt>.
</p>
<pre>
   File.fnmatch('cat',       'cat')        #=&gt; true  : match entire string
   File.fnmatch('cat',       'category')   #=&gt; false : only match partial string
   File.fnmatch('c{at,ub}s', 'cats')       #=&gt; false : { } isn't supported

   File.fnmatch('c?t',     'cat')          #=&gt; true  : '?' match only 1 character
   File.fnmatch('c??t',    'cat')          #=&gt; false : ditto
   File.fnmatch('c*',      'cats')         #=&gt; true  : '*' match 0 or more characters
   File.fnmatch('c*t',     'c/a/b/t')      #=&gt; true  : ditto
   File.fnmatch('ca[a-z]', 'cat')          #=&gt; true  : inclusive bracket expression
   File.fnmatch('ca[^t]',  'cat')          #=&gt; false : exclusive bracket expression ('^' or '!')

   File.fnmatch('cat', 'CAT')                     #=&gt; false : case sensitive
   File.fnmatch('cat', 'CAT', File::FNM_CASEFOLD) #=&gt; true  : case insensitive

   File.fnmatch('?',   '/', File::FNM_PATHNAME)  #=&gt; false : wildcard doesn't match '/' on FNM_PATHNAME
   File.fnmatch('*',   '/', File::FNM_PATHNAME)  #=&gt; false : ditto
   File.fnmatch('[/]', '/', File::FNM_PATHNAME)  #=&gt; false : ditto

   File.fnmatch('\?',   '?')                       #=&gt; true  : escaped wildcard becomes ordinary
   File.fnmatch('\a',   'a')                       #=&gt; true  : escaped ordinary remains ordinary
   File.fnmatch('\a',   '\a', File::FNM_NOESCAPE)  #=&gt; true  : FNM_NOESACPE makes '\' ordinary
   File.fnmatch('[\?]', '?')                       #=&gt; true  : can escape inside bracket expression

   File.fnmatch('*',   '.profile')                      #=&gt; false : wildcard doesn't match leading
   File.fnmatch('*',   '.profile', File::FNM_DOTMATCH)  #=&gt; true    period by default.
   File.fnmatch('.*',  '.profile')                      #=&gt; true

   rbfiles = '**' '/' '*.rb' # you don't have to do like this. just write in single string.
   File.fnmatch(rbfiles, 'main.rb')                    #=&gt; false
   File.fnmatch(rbfiles, './main.rb')                  #=&gt; false
   File.fnmatch(rbfiles, 'lib/song.rb')                #=&gt; true
   File.fnmatch('**.rb', 'main.rb')                    #=&gt; true
   File.fnmatch('**.rb', './main.rb')                  #=&gt; false
   File.fnmatch('**.rb', 'lib/song.rb')                #=&gt; true
   File.fnmatch('*',           'dave/.profile')                      #=&gt; true

   pattern = '*' '/' '*'
   File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME)  #=&gt; false
   File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true

   pattern = '**' '/' 'foo'
   File.fnmatch(pattern, 'a/b/c/foo', File::FNM_PATHNAME)     #=&gt; true
   File.fnmatch(pattern, '/a/b/c/foo', File::FNM_PATHNAME)    #=&gt; true
   File.fnmatch(pattern, 'c:/a/b/c/foo', File::FNM_PATHNAME)  #=&gt; true
   File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME)    #=&gt; false
   File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002451_source')" id="l_M002451_source">show source</a> ]</p>
  <div id="M002451_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.fnmatch( pattern, path, [flags] ) =&gt; (true or false)
 *     File.fnmatch?( pattern, path, [flags] ) =&gt; (true or false)
 *
 *  Returns true if &lt;i&gt;path&lt;/i&gt; matches against &lt;i&gt;pattern&lt;/i&gt; The
 *  pattern is not a regular expression; instead it follows rules
 *  similar to shell filename globbing. It may contain the following
 *  metacharacters:
 *
 *  &lt;code&gt;*&lt;/code&gt;::        Matches any file. Can be restricted by
 *                          other values in the glob. &lt;code&gt;*&lt;/code&gt;
 *                          will match all files; &lt;code&gt;c*&lt;/code&gt; will
 *                          match all files beginning with
 *                          &lt;code&gt;c&lt;/code&gt;; &lt;code&gt;*c&lt;/code&gt; will match
 *                          all files ending with &lt;code&gt;c&lt;/code&gt;; and
 *                          &lt;code&gt;*c*&lt;/code&gt; will match all files that
 *                          have &lt;code&gt;c&lt;/code&gt; in them (including at
 *                          the beginning or end). Equivalent to
 *                          &lt;code&gt;/ .* /x&lt;/code&gt; in regexp.
 *  &lt;code&gt;**&lt;/code&gt;::       Matches directories recursively or files
 *                          expansively.
 *  &lt;code&gt;?&lt;/code&gt;::        Matches any one character. Equivalent to
 *                          &lt;code&gt;/.{1}/&lt;/code&gt; in regexp.
 *  &lt;code&gt;[set]&lt;/code&gt;::    Matches any one character in +set+.
 *                          Behaves exactly like character sets in
 *                          Regexp, including set negation
 *                          (&lt;code&gt;[^a-z]&lt;/code&gt;).
 *  &lt;code&gt;\&lt;/code&gt;::        Escapes the next metacharacter.
 *
 *  &lt;i&gt;flags&lt;/i&gt; is a bitwise OR of the &lt;code&gt;FNM_xxx&lt;/code&gt;
 *  parameters. The same glob pattern and flags are used by
 *  &lt;code&gt;Dir::glob&lt;/code&gt;.
 *
 *     File.fnmatch('cat',       'cat')        #=&gt; true  : match entire string
 *     File.fnmatch('cat',       'category')   #=&gt; false : only match partial string
 *     File.fnmatch('c{at,ub}s', 'cats')       #=&gt; false : { } isn't supported
 *
 *     File.fnmatch('c?t',     'cat')          #=&gt; true  : '?' match only 1 character
 *     File.fnmatch('c??t',    'cat')          #=&gt; false : ditto
 *     File.fnmatch('c*',      'cats')         #=&gt; true  : '*' match 0 or more characters
 *     File.fnmatch('c*t',     'c/a/b/t')      #=&gt; true  : ditto
 *     File.fnmatch('ca[a-z]', 'cat')          #=&gt; true  : inclusive bracket expression
 *     File.fnmatch('ca[^t]',  'cat')          #=&gt; false : exclusive bracket expression ('^' or '!')
 *
 *     File.fnmatch('cat', 'CAT')                     #=&gt; false : case sensitive
 *     File.fnmatch('cat', 'CAT', File::FNM_CASEFOLD) #=&gt; true  : case insensitive
 *
 *     File.fnmatch('?',   '/', File::FNM_PATHNAME)  #=&gt; false : wildcard doesn't match '/' on FNM_PATHNAME
 *     File.fnmatch('*',   '/', File::FNM_PATHNAME)  #=&gt; false : ditto
 *     File.fnmatch('[/]', '/', File::FNM_PATHNAME)  #=&gt; false : ditto
 *
 *     File.fnmatch('\?',   '?')                       #=&gt; true  : escaped wildcard becomes ordinary
 *     File.fnmatch('\a',   'a')                       #=&gt; true  : escaped ordinary remains ordinary
 *     File.fnmatch('\a',   '\a', File::FNM_NOESCAPE)  #=&gt; true  : FNM_NOESACPE makes '\' ordinary
 *     File.fnmatch('[\?]', '?')                       #=&gt; true  : can escape inside bracket expression
 *
 *     File.fnmatch('*',   '.profile')                      #=&gt; false : wildcard doesn't match leading
 *     File.fnmatch('*',   '.profile', File::FNM_DOTMATCH)  #=&gt; true    period by default.
 *     File.fnmatch('.*',  '.profile')                      #=&gt; true
 *
 *     rbfiles = '**' '/' '*.rb' # you don't have to do like this. just write in single string.
 *     File.fnmatch(rbfiles, 'main.rb')                    #=&gt; false
 *     File.fnmatch(rbfiles, './main.rb')                  #=&gt; false
 *     File.fnmatch(rbfiles, 'lib/song.rb')                #=&gt; true
 *     File.fnmatch('**.rb', 'main.rb')                    #=&gt; true
 *     File.fnmatch('**.rb', './main.rb')                  #=&gt; false
 *     File.fnmatch('**.rb', 'lib/song.rb')                #=&gt; true
 *     File.fnmatch('*',           'dave/.profile')                      #=&gt; true
 *
 *     pattern = '*' '/' '*'
 *     File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME)  #=&gt; false
 *     File.fnmatch(pattern, 'dave/.profile', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
 *
 *     pattern = '**' '/' 'foo'
 *     File.fnmatch(pattern, 'a/b/c/foo', File::FNM_PATHNAME)     #=&gt; true
 *     File.fnmatch(pattern, '/a/b/c/foo', File::FNM_PATHNAME)    #=&gt; true
 *     File.fnmatch(pattern, 'c:/a/b/c/foo', File::FNM_PATHNAME)  #=&gt; true
 *     File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME)    #=&gt; false
 *     File.fnmatch(pattern, 'a/.b/c/foo', File::FNM_PATHNAME | File::FNM_DOTMATCH) #=&gt; true
 */
static VALUE
file_s_fnmatch(argc, argv, obj)
    int argc;
    VALUE *argv;
    VALUE obj;
{
    VALUE pattern, path;
    VALUE rflags;
    int flags;

    if (rb_scan_args(argc, argv, &quot;21&quot;, &amp;pattern, &amp;path, &amp;rflags) == 3)
        flags = NUM2INT(rflags);
    else
        flags = 0;

    StringValue(pattern);
    StringValue(path);

    if (fnmatch(RSTRING(pattern)-&gt;ptr, RSTRING(path)-&gt;ptr, flags) == 0)
        return Qtrue;

    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002454" class="method">
  <div id="M002454_title" class="title">
    <b>File.ftype(file_name)   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Identifies the type of the named file; the return string is one of
``<tt>file</tt>&#8217;&#8217;, ``<tt>directory</tt>&#8217;&#8217;,
``<tt>characterSpecial</tt>&#8217;&#8217;,
``<tt>blockSpecial</tt>&#8217;&#8217;, ``<tt>fifo</tt>&#8217;&#8217;,
``<tt>link</tt>&#8217;&#8217;, ``<tt>socket</tt>&#8217;&#8217;, or
``<tt>unknown</tt>&#8217;&#8217;.
</p>
<pre>
   File.ftype(&quot;testfile&quot;)            #=&gt; &quot;file&quot;
   File.ftype(&quot;/dev/tty&quot;)            #=&gt; &quot;characterSpecial&quot;
   File.ftype(&quot;/tmp/.X11-unix/X0&quot;)   #=&gt; &quot;socket&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002454_source')" id="l_M002454_source">show source</a> ]</p>
  <div id="M002454_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.ftype(file_name)   =&gt; string
 *  
 *  Identifies the type of the named file; the return string is one of
 *  ``&lt;code&gt;file&lt;/code&gt;'', ``&lt;code&gt;directory&lt;/code&gt;'',
 *  ``&lt;code&gt;characterSpecial&lt;/code&gt;'', ``&lt;code&gt;blockSpecial&lt;/code&gt;'',
 *  ``&lt;code&gt;fifo&lt;/code&gt;'', ``&lt;code&gt;link&lt;/code&gt;'',
 *  ``&lt;code&gt;socket&lt;/code&gt;'', or ``&lt;code&gt;unknown&lt;/code&gt;''.
 *     
 *     File.ftype(&quot;testfile&quot;)            #=&gt; &quot;file&quot;
 *     File.ftype(&quot;/dev/tty&quot;)            #=&gt; &quot;characterSpecial&quot;
 *     File.ftype(&quot;/tmp/.X11-unix/X0&quot;)   #=&gt; &quot;socket&quot;
 */

static VALUE
rb_file_s_ftype(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    SafeStringValue(fname);
    if (lstat(StringValueCStr(fname), &amp;st) == -1) {
        rb_sys_fail(RSTRING(fname)-&gt;ptr);
    }

    return rb_file_ftype(&amp;st);
}
</pre>
  </div>
</div>
</div>
<div id="M002500" class="method">
  <div id="M002500_title" class="title">
    <b>File.grpowned?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file exists and the effective group id
of the calling process is the owner of the file. Returns <tt>false</tt> on
Windows.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002500_source')" id="l_M002500_source">show source</a> ]</p>
  <div id="M002500_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.grpowned?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file exists and the
 * effective group id of the calling process is the owner of
 * the file. Returns &lt;code&gt;false&lt;/code&gt; on Windows.
 */

static VALUE
test_grpowned(obj, fname)
    VALUE obj, fname;
{
#ifndef _WIN32
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (group_member(st.st_gid)) return Qtrue;
#endif
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002509" class="method">
  <div id="M002509_title" class="title">
    <b>File.identical?(file_1, file_2)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named files are identical.
</p>
<pre>
    open(&quot;a&quot;, &quot;w&quot;) {}
    p File.identical?(&quot;a&quot;, &quot;a&quot;)      #=&gt; true
    p File.identical?(&quot;a&quot;, &quot;./a&quot;)    #=&gt; true
    File.link(&quot;a&quot;, &quot;b&quot;)
    p File.identical?(&quot;a&quot;, &quot;b&quot;)      #=&gt; true
    File.symlink(&quot;a&quot;, &quot;c&quot;)
    p File.identical?(&quot;a&quot;, &quot;c&quot;)      #=&gt; true
    open(&quot;d&quot;, &quot;w&quot;) {}
    p File.identical?(&quot;a&quot;, &quot;d&quot;)      #=&gt; false
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002509_source')" id="l_M002509_source">show source</a> ]</p>
  <div id="M002509_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.identical?(file_1, file_2)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named files are identical.
 *
 *     open(&quot;a&quot;, &quot;w&quot;) {}
 *     p File.identical?(&quot;a&quot;, &quot;a&quot;)      #=&gt; true
 *     p File.identical?(&quot;a&quot;, &quot;./a&quot;)    #=&gt; true
 *     File.link(&quot;a&quot;, &quot;b&quot;)
 *     p File.identical?(&quot;a&quot;, &quot;b&quot;)      #=&gt; true
 *     File.symlink(&quot;a&quot;, &quot;c&quot;)
 *     p File.identical?(&quot;a&quot;, &quot;c&quot;)      #=&gt; true
 *     open(&quot;d&quot;, &quot;w&quot;) {}
 *     p File.identical?(&quot;a&quot;, &quot;d&quot;)      #=&gt; false
 */

static VALUE
test_identical(obj, fname1, fname2)
    VALUE obj, fname1, fname2;
{
#ifndef DOSISH
    struct stat st1, st2;

    if (rb_stat(fname1, &amp;st1) &lt; 0) return Qfalse;
    if (rb_stat(fname2, &amp;st2) &lt; 0) return Qfalse;
    if (st1.st_dev != st2.st_dev) return Qfalse;
    if (st1.st_ino != st2.st_ino) return Qfalse;
#else
#ifdef _WIN32
    BY_HANDLE_FILE_INFORMATION st1, st2;
    HANDLE f1 = 0, f2 = 0;
#endif

    rb_secure(2);
#ifdef _WIN32
    f1 = w32_io_info(&amp;fname1, &amp;st1);
    if (f1 == INVALID_HANDLE_VALUE) return Qfalse;
    f2 = w32_io_info(&amp;fname2, &amp;st2);
    if (f1) CloseHandle(f1);
    if (f2 == INVALID_HANDLE_VALUE) return Qfalse;
    if (f2) CloseHandle(f2);

    if (st1.dwVolumeSerialNumber == st2.dwVolumeSerialNumber &amp;&amp;
        st1.nFileIndexHigh == st2.nFileIndexHigh &amp;&amp;
        st1.nFileIndexLow == st2.nFileIndexLow)
        return Qtrue;
    if (!f1 || !f2) return Qfalse;
    if (rb_w32_iswin95()) return Qfalse;
#else
    SafeStringValue(fname1);
    fname1 = rb_str_new4(fname1);
    SafeStringValue(fname2);
    if (access(RSTRING(fname1)-&gt;ptr, 0)) return Qfalse;
    if (access(RSTRING(fname2)-&gt;ptr, 0)) return Qfalse;
#endif
    fname1 = rb_file_expand_path(fname1, Qnil);
    fname2 = rb_file_expand_path(fname2, Qnil);
    if (RSTRING(fname1)-&gt;len != RSTRING(fname2)-&gt;len) return Qfalse;
    if (rb_memcicmp(RSTRING(fname1)-&gt;ptr, RSTRING(fname2)-&gt;ptr, RSTRING(fname1)-&gt;len))
        return Qfalse;
#endif
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002520" class="method">
  <div id="M002520_title" class="title">
    <b>install</b>(from, to, mode = nil, verbose = false)
  </div>
  <div class="description">
  <p>
If <tt>src</tt> is not the same as <tt>dest</tt>, copies it and changes the
permission mode to <tt>mode</tt>. If <tt>dest</tt> is a directory,
destination is <tt>dest/src</tt>. If <tt>mode</tt> is not set, default is
used. If <tt>verbose</tt> is set to true, the name of each file copied will
be printed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002520_source')" id="l_M002520_source">show source</a> ]</p>
  <div id="M002520_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">mode</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">false</span>)
251:     <span class="ruby-identifier">to</span> = <span class="ruby-identifier">catname</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
252:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">exist?</span> <span class="ruby-identifier">to</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">cmp</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>
253:       <span class="ruby-identifier">safe_unlink</span> <span class="ruby-identifier">to</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">exist?</span> <span class="ruby-identifier">to</span>
254:       <span class="ruby-identifier">cp</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">verbose</span>
255:       <span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">verbose</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mode</span>
256:     <span class="ruby-keyword kw">end</span>
257:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002476" class="method">
  <div id="M002476_title" class="title">
    <b>File.join(string, ...) &rarr; path<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a new string formed by joining the strings using
<tt>File::SEPARATOR</tt>.
</p>
<pre>
   File.join(&quot;usr&quot;, &quot;mail&quot;, &quot;gumby&quot;)   #=&gt; &quot;usr/mail/gumby&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002476_source')" id="l_M002476_source">show source</a> ]</p>
  <div id="M002476_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.join(string, ...) -&gt; path
 *  
 *  Returns a new string formed by joining the strings using
 *  &lt;code&gt;File::SEPARATOR&lt;/code&gt;.
 *     
 *     File.join(&quot;usr&quot;, &quot;mail&quot;, &quot;gumby&quot;)   #=&gt; &quot;usr/mail/gumby&quot;
 *     
 */

static VALUE
rb_file_s_join(klass, args)
    VALUE klass, args;
{
    return rb_file_join(args, separator);
}
</pre>
  </div>
</div>
</div>
<div id="M002461" class="method">
  <div id="M002461_title" class="title">
    <b>File.lchmod(mode_int, file_name, ...)  => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>File::chmod</tt>, but does not follow symbolic links (so
it will change the permissions associated with the link, not the file
referenced by the link). Often not available.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002461_source')" id="l_M002461_source">show source</a> ]</p>
  <div id="M002461_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.lchmod(mode_int, file_name, ...)  =&gt; integer
 *  
 *  Equivalent to &lt;code&gt;File::chmod&lt;/code&gt;, but does not follow symbolic
 *  links (so it will change the permissions associated with the link,
 *  not the file referenced by the link). Often not available.
 *     
 */

static VALUE
rb_file_s_lchmod(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE vmode;
    VALUE rest;
    long mode, n;

    rb_secure(2);
    rb_scan_args(argc, argv, &quot;1*&quot;, &amp;vmode, &amp;rest);
    mode = NUM2INT(vmode);

    n = apply2files(lchmod_internal, rest, (void *)(long)mode);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002462" class="method">
  <div id="M002462_title" class="title">
    <b>file.lchown(owner_int, group_int, file_name,..) => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Equivalent to <tt>File::chown</tt>, but does not follow symbolic links (so
it will change the owner associated with the link, not the file referenced
by the link). Often not available. Returns number of files in the argument
list.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002462_source')" id="l_M002462_source">show source</a> ]</p>
  <div id="M002462_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.lchown(owner_int, group_int, file_name,..) =&gt; integer
 *  
 *  Equivalent to &lt;code&gt;File::chown&lt;/code&gt;, but does not follow symbolic
 *  links (so it will change the owner associated with the link, not the
 *  file referenced by the link). Often not available. Returns number
 *  of files in the argument list.
 *     
 */

static VALUE
rb_file_s_lchown(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE o, g, rest;
    struct chown_args arg;
    long n;

    rb_secure(2);
    rb_scan_args(argc, argv, &quot;2*&quot;, &amp;o, &amp;g, &amp;rest);
    if (NIL_P(o)) {
        arg.owner = -1;
    }
    else {
        arg.owner = NUM2INT(o);
    }
    if (NIL_P(g)) {
        arg.group = -1;
    }
    else {
        arg.group = NUM2INT(g);
    }

    n = apply2files(lchown_internal, rest, &amp;arg);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002463" class="method">
  <div id="M002463_title" class="title">
    <b>File.link(old_name, new_name)    => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a new name for an existing file using a hard link. Will not
overwrite <em>new_name</em> if it already exists (raising a subclass of
<tt><a
href="index.html?a=C00000005&name=SystemCallError">SystemCallError</a></tt>).
Not available on all platforms.
</p>
<pre>
   File.link(&quot;testfile&quot;, &quot;.testfile&quot;)   #=&gt; 0
   IO.readlines(&quot;.testfile&quot;)[0]         #=&gt; &quot;This is line one\n&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002463_source')" id="l_M002463_source">show source</a> ]</p>
  <div id="M002463_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.link(old_name, new_name)    =&gt; 0
 *  
 *  Creates a new name for an existing file using a hard link. Will not
 *  overwrite &lt;i&gt;new_name&lt;/i&gt; if it already exists (raising a subclass
 *  of &lt;code&gt;SystemCallError&lt;/code&gt;). Not available on all platforms.
 *     
 *     File.link(&quot;testfile&quot;, &quot;.testfile&quot;)   #=&gt; 0
 *     IO.readlines(&quot;.testfile&quot;)[0]         #=&gt; &quot;This is line one\n&quot;
 */

static VALUE
rb_file_s_link(klass, from, to)
    VALUE klass, from, to;
{
#ifdef HAVE_LINK
    SafeStringValue(from);
    SafeStringValue(to);

    if (link(StringValueCStr(from), StringValueCStr(to)) &lt; 0) {
        sys_fail2(from, to);
    }
    return INT2FIX(0);
#else
    rb_notimplement();
    return Qnil;                /* not reached */
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002453" class="method">
  <div id="M002453_title" class="title">
    <b>File.lstat(file_name)   => stat<br />
</b>
  </div>
  <div class="description">
  <p>
Same as <tt>File::stat</tt>, but does not follow the last symbolic link.
Instead, reports on the link itself.
</p>
<pre>
   File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
   File.stat(&quot;testfile&quot;).size              #=&gt; 66
   File.lstat(&quot;link2test&quot;).size            #=&gt; 8
   File.stat(&quot;link2test&quot;).size             #=&gt; 66
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002453_source')" id="l_M002453_source">show source</a> ]</p>
  <div id="M002453_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.lstat(file_name)   =&gt; stat
 *  
 *  Same as &lt;code&gt;File::stat&lt;/code&gt;, but does not follow the last symbolic
 *  link. Instead, reports on the link itself.
 *     
 *     File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
 *     File.stat(&quot;testfile&quot;).size              #=&gt; 66
 *     File.lstat(&quot;link2test&quot;).size            #=&gt; 8
 *     File.stat(&quot;link2test&quot;).size             #=&gt; 66
 *     
 */

static VALUE
rb_file_s_lstat(klass, fname)
    VALUE klass, fname;
{
#ifdef HAVE_LSTAT
    struct stat st;

    SafeStringValue(fname);
    if (lstat(StringValueCStr(fname), &amp;st) == -1) {
        rb_sys_fail(RSTRING(fname)-&gt;ptr);
    }
    return stat_new(&amp;st);
#else
    return rb_file_s_stat(klass, fname);
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002517" class="method">
  <div id="M002517_title" class="title">
    <b>makedirs</b>(*dirs)
  </div>
  <div class="description">
  <p>
Creates a directory and all its parent directories. For example,
</p>
<pre>
    File.makedirs '/usr/lib/ruby'
</pre>
<p>
causes the following directories to be made, if they do not exist.
</p>
<pre>
    * /usr
    * /usr/lib
    * /usr/lib/ruby
</pre>
<p>
You can pass several directories, each as a parameter. If the last
parameter isn&#8217;t a <a
href="index.html?a=C00000055&name=String">String</a>, verbose mode will be
enabled.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002517_source')" id="l_M002517_source">show source</a> ]</p>
  <div id="M002517_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">makedirs</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">dirs</span>)
206:     <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dirs</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">dirs</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword kw">end</span>
207:     <span class="ruby-identifier">mode</span> = <span class="ruby-value">0755</span>
208:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">dirs</span>
209:       <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">dir</span>)
210:       <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">dir</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>
211:       <span class="ruby-identifier">makedirs</span> <span class="ruby-identifier">parent</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">directory?</span> <span class="ruby-identifier">parent</span>
212:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;mkdir &quot;</span>, <span class="ruby-identifier">dir</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
213:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">basename</span>(<span class="ruby-identifier">dir</span>) <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;&quot;</span>
214:         <span class="ruby-keyword kw">begin</span>
215:           <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">mode</span>
216:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
217:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">directory?</span> <span class="ruby-identifier">dir</span>
218:         <span class="ruby-keyword kw">end</span>
219:       <span class="ruby-keyword kw">end</span>
220:     <span class="ruby-keyword kw">end</span>
221:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002514" class="method">
  <div id="M002514_title" class="title">
    <b>move</b>(from, to, verbose = false)
  </div>
  <div class="description">
  <p>
Moves a file <tt>from</tt> to <tt>to</tt> using <a
href="index.html?a=M002512&name=syscopy">syscopy</a>. If <tt>to</tt> is a
directory, copies from <tt>from</tt> to <tt>to/from</tt>. If
<tt>verbose</tt> is true, <tt>from -&gt; to</tt> is printed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002514_source')" id="l_M002514_source">show source</a> ]</p>
  <div id="M002514_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">move</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>, <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">false</span>)
100:     <span class="ruby-identifier">to</span> = <span class="ruby-identifier">catname</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
101:     <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-identifier">from</span>, <span class="ruby-value str">&quot; -&gt; &quot;</span>, <span class="ruby-identifier">to</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
102: 
103:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_PLATFORM</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/djgpp|(cyg|ms|bcc)win|mingw/</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">file?</span> <span class="ruby-identifier">to</span>
104:       <span class="ruby-identifier">unlink</span> <span class="ruby-identifier">to</span>
105:     <span class="ruby-keyword kw">end</span>
106:     <span class="ruby-identifier">fstat</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">from</span>)
107:     <span class="ruby-keyword kw">begin</span>
108:       <span class="ruby-identifier">rename</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>
109:     <span class="ruby-keyword kw">rescue</span>
110:       <span class="ruby-keyword kw">begin</span>
111:         <span class="ruby-identifier">symlink</span> <span class="ruby-identifier">readlink</span>(<span class="ruby-identifier">from</span>), <span class="ruby-identifier">to</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">unlink</span> <span class="ruby-identifier">from</span>
112:       <span class="ruby-keyword kw">rescue</span>
113:         <span class="ruby-identifier">from_stat</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">from</span>)
114:         <span class="ruby-identifier">syscopy</span> <span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">unlink</span> <span class="ruby-identifier">from</span>
115:         <span class="ruby-identifier">utime</span>(<span class="ruby-identifier">from_stat</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">from_stat</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">to</span>)
116:         <span class="ruby-keyword kw">begin</span>
117:           <span class="ruby-identifier">chown</span>(<span class="ruby-identifier">fstat</span>.<span class="ruby-identifier">uid</span>, <span class="ruby-identifier">fstat</span>.<span class="ruby-identifier">gid</span>, <span class="ruby-identifier">to</span>)
118:         <span class="ruby-keyword kw">rescue</span>
119:         <span class="ruby-keyword kw">end</span>
120:       <span class="ruby-keyword kw">end</span>
121:     <span class="ruby-keyword kw">end</span>
122:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002456" class="method">
  <div id="M002456_title" class="title">
    <b>File.mtime(file_name)  =>  time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the modification time for the named file as a <a
href="index.html?a=C00000015&name=Time">Time</a> object.
</p>
<pre>
   File.mtime(&quot;testfile&quot;)   #=&gt; Tue Apr 08 12:58:04 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002456_source')" id="l_M002456_source">show source</a> ]</p>
  <div id="M002456_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.mtime(file_name)  =&gt;  time
 *  
 *  Returns the modification time for the named file as a Time object.
 *     
 *     File.mtime(&quot;testfile&quot;)   #=&gt; Tue Apr 08 12:58:04 CDT 2003
 *     
 */

static VALUE
rb_file_s_mtime(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0)
        rb_sys_fail(RSTRING(fname)-&gt;ptr);
    return rb_time_new(st.st_mtime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002510" class="method">
  <div id="M002510_title" class="title">
    <b>File.new(filename, mode="r")            => file<br />
File.new(filename [, mode [, perm]])    => file<br />
</b>
  </div>
  <div class="description">
  <p>
Opens the file named by <em>filename</em> according to <em>mode</em>
(default is ``r&#8217;&#8217;) and returns a new <tt><a
href="index.html?a=C00000276&name=File">File</a></tt> object. See the
description of class <tt><a
href="index.html?a=C00000245&name=IO">IO</a></tt> for a description of
<em>mode</em>. The file mode may optionally be specified as a <tt><a
href="index.html?a=C00000089&name=Fixnum">Fixnum</a></tt> by
<em>or</em>-ing together the flags (O_RDONLY etc, again described under
<tt><a href="index.html?a=C00000245&name=IO">IO</a></tt>). Optional
permission bits may be given in <em>perm</em>. These mode and permission
bits are platform dependent; on Unix systems, see <tt>open(2)</tt> for
details.
</p>
<pre>
   f = File.new(&quot;testfile&quot;, &quot;r&quot;)
   f = File.new(&quot;newfile&quot;,  &quot;w+&quot;)
   f = File.new(&quot;newfile&quot;, File::CREAT|File::TRUNC|File::RDWR, 0644)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002510_source')" id="l_M002510_source">show source</a> ]</p>
  <div id="M002510_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.new(filename, mode=&quot;r&quot;)            =&gt; file
 *     File.new(filename [, mode [, perm]])    =&gt; file
 *  

 *  Opens the file named by _filename_ according to
 *  _mode_ (default is ``r'') and returns a new
 *  &lt;code&gt;File&lt;/code&gt; object. See the description of class +IO+ for
 *  a description of _mode_. The file mode may optionally be
 *  specified as a +Fixnum+ by _or_-ing together the
 *  flags (O_RDONLY etc, again described under +IO+). Optional
 *  permission bits may be given in _perm_. These mode and permission
 *  bits are platform dependent; on Unix systems, see
 *  &lt;code&gt;open(2)&lt;/code&gt; for details.
 *
 *     f = File.new(&quot;testfile&quot;, &quot;r&quot;)
 *     f = File.new(&quot;newfile&quot;,  &quot;w+&quot;)
 *     f = File.new(&quot;newfile&quot;, File::CREAT|File::TRUNC|File::RDWR, 0644)
 */

static VALUE
rb_file_initialize(argc, argv, io)
    int argc;
    VALUE *argv;
    VALUE io;
{
    if (RFILE(io)-&gt;fptr) {
        rb_raise(rb_eRuntimeError, &quot;reinitializing File&quot;);
    }
    if (0 &lt; argc &amp;&amp; argc &lt; 3) {
        VALUE fd = rb_check_convert_type(argv[0], T_FIXNUM, &quot;Fixnum&quot;, &quot;to_int&quot;);

        if (!NIL_P(fd)) {
            argv[0] = fd;
            return rb_io_initialize(argc, argv, io);
        }
    }
    rb_open_file(argc, argv, io);

    return io;
}
</pre>
  </div>
</div>
</div>
<div id="M002499" class="method">
  <div id="M002499_title" class="title">
    <b>File.owned?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file exists and the effective used id of
the calling process is the owner of the file.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002499_source')" id="l_M002499_source">show source</a> ]</p>
  <div id="M002499_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.owned?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file exists and the
 * effective used id of the calling process is the owner of
 * the file.
 */

static VALUE
test_owned(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (st.st_uid == geteuid()) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002501" class="method">
  <div id="M002501_title" class="title">
    <b>File.pipe?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a pipe.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002501_source')" id="l_M002501_source">show source</a> ]</p>
  <div id="M002501_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.pipe?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a pipe.
 */

static VALUE
test_p(obj, fname)
    VALUE obj, fname;
{
#ifdef S_IFIFO
#  ifndef S_ISFIFO
#    define S_ISFIFO(m) ((m &amp; S_IFMT) == S_IFIFO)
#  endif

    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISFIFO(st.st_mode)) return Qtrue;

#endif
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002489" class="method">
  <div id="M002489_title" class="title">
    <b>File.readable?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is readable by the effective user
id of this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002489_source')" id="l_M002489_source">show source</a> ]</p>
  <div id="M002489_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.readable?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is readable by the effective
 * user id of this process.
 */

static VALUE
test_r(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (eaccess(StringValueCStr(fname), R_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002490" class="method">
  <div id="M002490_title" class="title">
    <b>File.readable_real?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is readable by the real user id of
this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002490_source')" id="l_M002490_source">show source</a> ]</p>
  <div id="M002490_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.readable_real?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is readable by the real
 * user id of this process.
 */

static VALUE
test_R(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (access(StringValueCStr(fname), R_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002465" class="method">
  <div id="M002465_title" class="title">
    <b>File.readlink(link_name) &rarr; file_name<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the name of the file referenced by the given link. Not available on
all platforms.
</p>
<pre>
   File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
   File.readlink(&quot;link2test&quot;)              #=&gt; &quot;testfile&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002465_source')" id="l_M002465_source">show source</a> ]</p>
  <div id="M002465_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.readlink(link_name) -&gt; file_name
 *  
 *  Returns the name of the file referenced by the given link.
 *  Not available on all platforms.
 *     
 *     File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
 *     File.readlink(&quot;link2test&quot;)              #=&gt; &quot;testfile&quot;
 */

static VALUE
rb_file_s_readlink(klass, path)
    VALUE klass, path;
{
#ifdef HAVE_READLINK
    char *buf;
    int size = 100;
    int rv;
    VALUE v;

    SafeStringValue(path);
    buf = xmalloc(size);
    while ((rv = readlink(RSTRING(path)-&gt;ptr, buf, size)) == size
#ifdef _AIX
            || (rv &lt; 0 &amp;&amp; errno == ERANGE) /* quirky behavior of GPFS */
#endif
        ) {
        size *= 2;
        buf = xrealloc(buf, size);
    }
    if (rv &lt; 0) {
        free(buf);
        rb_sys_fail(RSTRING(path)-&gt;ptr);
    }
    v = rb_tainted_str_new(buf, rv);
    free(buf);

    return v;
#else
    rb_notimplement();
    return Qnil;                /* not reached */
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002468" class="method">
  <div id="M002468_title" class="title">
    <b>File.rename(old_name, new_name)   => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Renames the given file to the new name. Raises a <tt><a
href="index.html?a=C00000005&name=SystemCallError">SystemCallError</a></tt>
if the file cannot be renamed.
</p>
<pre>
   File.rename(&quot;afile&quot;, &quot;afile.bak&quot;)   #=&gt; 0
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002468_source')" id="l_M002468_source">show source</a> ]</p>
  <div id="M002468_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.rename(old_name, new_name)   =&gt; 0
 *  
 *  Renames the given file to the new name. Raises a
 *  &lt;code&gt;SystemCallError&lt;/code&gt; if the file cannot be renamed.
 *     
 *     File.rename(&quot;afile&quot;, &quot;afile.bak&quot;)   #=&gt; 0
 */

static VALUE
rb_file_s_rename(klass, from, to)
    VALUE klass, from, to;
{
    const char *src, *dst;
    SafeStringValue(from);
    SafeStringValue(to);

    src = StringValueCStr(from);
    dst = StringValueCStr(to);
#if defined __CYGWIN__
    errno = 0;
#endif
    if (rename(src, dst) &lt; 0) {
#if defined DOSISH &amp;&amp; !defined _WIN32
        switch (errno) {
          case EEXIST:
#if defined (__EMX__)
          case EACCES:
#endif
            if (chmod(dst, 0666) == 0 &amp;&amp;
                unlink(dst) == 0 &amp;&amp;
                rename(src, dst) == 0)
                return INT2FIX(0);
        }
#endif
        sys_fail2(from, to);
    }

    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
<div id="M002516" class="method">
  <div id="M002516_title" class="title">
    <b>safe_unlink</b>(*files)
  </div>
  <div class="description">
  <p>
Removes a list of files. Each parameter should be the name of the file to
delete. If the last parameter isn&#8217;t a <a
href="index.html?a=C00000055&name=String">String</a>, verbose mode will be
enabled. Returns the number of files deleted.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002516_source')" id="l_M002516_source">show source</a> ]</p>
  <div id="M002516_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 168</span>
168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">safe_unlink</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">files</span>)
169:     <span class="ruby-identifier">verbose</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">files</span>[<span class="ruby-value">-1</span>].<span class="ruby-identifier">is_a?</span> <span class="ruby-constant">String</span> <span class="ruby-keyword kw">then</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">files</span>.<span class="ruby-identifier">pop</span> <span class="ruby-keyword kw">end</span>
170:     <span class="ruby-identifier">files</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">file</span><span class="ruby-operator">|</span>
171:       <span class="ruby-keyword kw">begin</span>
172:         <span class="ruby-identifier">unlink</span> <span class="ruby-identifier">file</span>
173:         <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;removing &quot;</span>, <span class="ruby-identifier">file</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
174:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EACCES</span> <span class="ruby-comment cmt"># for Windows</span>
175:         <span class="ruby-identifier">continue</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">symlink?</span> <span class="ruby-identifier">file</span>
176:         <span class="ruby-keyword kw">begin</span>
177:           <span class="ruby-identifier">mode</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">file</span>).<span class="ruby-identifier">mode</span>
178:           <span class="ruby-identifier">o_chmod</span> <span class="ruby-identifier">mode</span> <span class="ruby-operator">|</span> <span class="ruby-value">0200</span>, <span class="ruby-identifier">file</span>
179:           <span class="ruby-identifier">unlink</span> <span class="ruby-identifier">file</span>
180:           <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;removing &quot;</span>, <span class="ruby-identifier">file</span>, <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">verbose</span>
181:         <span class="ruby-keyword kw">rescue</span>
182:           <span class="ruby-identifier">o_chmod</span> <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">file</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
183:         <span class="ruby-keyword kw">end</span>
184:       <span class="ruby-keyword kw">rescue</span>
185:       <span class="ruby-keyword kw">end</span>
186:     <span class="ruby-keyword kw">end</span>
187:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002507" class="method">
  <div id="M002507_title" class="title">
    <b>File.setgid?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file has the setgid bit set.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002507_source')" id="l_M002507_source">show source</a> ]</p>
  <div id="M002507_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.setgid?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file has the setgid bit set.
 */

static VALUE
test_sgid(obj, fname)
    VALUE obj, fname;
{
#ifdef S_ISGID
    return check3rdbyte(fname, S_ISGID);
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002506" class="method">
  <div id="M002506_title" class="title">
    <b>File.setuid?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file has the setuid bit set.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002506_source')" id="l_M002506_source">show source</a> ]</p>
  <div id="M002506_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.setuid?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file has the setuid bit set.
 */

static VALUE
test_suid(obj, fname)
    VALUE obj, fname;
{
#ifdef S_ISUID
    return check3rdbyte(fname, S_ISUID);
#else
    return Qfalse;
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002498" class="method">
  <div id="M002498_title" class="title">
    <b>File.size(file_name)   => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the size of <tt>file_name</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002498_source')" id="l_M002498_source">show source</a> ]</p>
  <div id="M002498_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.size(file_name)   =&gt; integer
 *
 * Returns the size of &lt;code&gt;file_name&lt;/code&gt;.
 */

static VALUE
rb_file_s_size(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0)
        rb_sys_fail(StringValueCStr(fname));
    return OFFT2NUM(st.st_size);
}
</pre>
  </div>
</div>
</div>
<div id="M002497" class="method">
  <div id="M002497_title" class="title">
    <b>File.size?(file_name)   => Integer or nil<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>nil</tt> if <tt>file_name</tt> doesn&#8217;t exist or has zero
size, the size of the file otherwise.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002497_source')" id="l_M002497_source">show source</a> ]</p>
  <div id="M002497_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.size?(file_name)   =&gt; Integer or nil
 *
 * Returns +nil+ if +file_name+ doesn't exist or has zero size, the size of the
 * file otherwise.
 */

static VALUE
test_s(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qnil;
    if (st.st_size == 0) return Qnil;
    return OFFT2NUM(st.st_size);
}
</pre>
  </div>
</div>
</div>
<div id="M002503" class="method">
  <div id="M002503_title" class="title">
    <b>File.socket?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a socket.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002503_source')" id="l_M002503_source">show source</a> ]</p>
  <div id="M002503_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.socket?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a socket.
 */

static VALUE
test_S(obj, fname)
    VALUE obj, fname;
{
#ifndef S_ISSOCK
#  ifdef _S_ISSOCK
#    define S_ISSOCK(m) _S_ISSOCK(m)
#  elif defined __BORLANDC__
#    ifdef _S_IFSOCK
#      define S_ISSOCK(m) (((unsigned short)(m) &amp; S_IFMT) == _S_IFSOCK)
#    else
#      ifdef S_IFSOCK
#        define S_ISSOCK(m) (((unsigned short)(m) &amp; S_IFMT) == S_IFSOCK)
#      endif
#    endif
#  else
#    ifdef _S_IFSOCK
#      define S_ISSOCK(m) ((m &amp; S_IFMT) == _S_IFSOCK)
#    else
#      ifdef S_IFSOCK
#        define S_ISSOCK(m) ((m &amp; S_IFMT) == S_IFSOCK)
#      endif
#    endif
#  endif
#endif

#ifdef S_ISSOCK
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (S_ISSOCK(st.st_mode)) return Qtrue;

#endif
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002475" class="method">
  <div id="M002475_title" class="title">
    <b>File.split(file_name)   => array<br />
</b>
  </div>
  <div class="description">
  <p>
Splits the given string into a directory and a file component and returns
them in a two-element array. See also <tt>File::dirname</tt> and
<tt>File::basename</tt>.
</p>
<pre>
   File.split(&quot;/home/gumby/.profile&quot;)   #=&gt; [&quot;/home/gumby&quot;, &quot;.profile&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002475_source')" id="l_M002475_source">show source</a> ]</p>
  <div id="M002475_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.split(file_name)   =&gt; array
 *  
 *  Splits the given string into a directory and a file component and
 *  returns them in a two-element array. See also
 *  &lt;code&gt;File::dirname&lt;/code&gt; and &lt;code&gt;File::basename&lt;/code&gt;.
 *     
 *     File.split(&quot;/home/gumby/.profile&quot;)   #=&gt; [&quot;/home/gumby&quot;, &quot;.profile&quot;]
 */

static VALUE
rb_file_s_split(klass, path)
    VALUE klass, path;
{
    StringValue(path);          /* get rid of converting twice */
    return rb_assoc_new(rb_file_s_dirname(Qnil, path), rb_file_s_basename(1,&amp;path));
}
</pre>
  </div>
</div>
</div>
<div id="M002452" class="method">
  <div id="M002452_title" class="title">
    <b>File.stat(file_name)   =>  stat<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a <tt><a
href="index.html?a=C00000278&name=File::Stat">File::Stat</a></tt> object
for the named file (see <tt><a
href="index.html?a=C00000278&name=File::Stat">File::Stat</a></tt>).
</p>
<pre>
   File.stat(&quot;testfile&quot;).mtime   #=&gt; Tue Apr 08 12:58:04 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002452_source')" id="l_M002452_source">show source</a> ]</p>
  <div id="M002452_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.stat(file_name)   =&gt;  stat
 *  
 *  Returns a &lt;code&gt;File::Stat&lt;/code&gt; object for the named file (see
 *  &lt;code&gt;File::Stat&lt;/code&gt;).
 *     
 *     File.stat(&quot;testfile&quot;).mtime   #=&gt; Tue Apr 08 12:58:04 CDT 2003
 *     
 */

static VALUE
rb_file_s_stat(klass, fname)
    VALUE klass, fname;
{
    struct stat st;

    SafeStringValue(fname);
    if (rb_stat(fname, &amp;st) &lt; 0) {
        rb_sys_fail(StringValueCStr(fname));
    }
    return stat_new(&amp;st);
}
</pre>
  </div>
</div>
</div>
<div id="M002508" class="method">
  <div id="M002508_title" class="title">
    <b>File.sticky?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file has the sticky bit set.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002508_source')" id="l_M002508_source">show source</a> ]</p>
  <div id="M002508_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.sticky?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file has the sticky bit set.
 */

static VALUE
test_sticky(obj, fname)
    VALUE obj, fname;
{
#ifdef S_ISVTX
    return check3rdbyte(fname, S_ISVTX);
#else
    return Qnil;
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002464" class="method">
  <div id="M002464_title" class="title">
    <b>File.symlink(old_name, new_name)   => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Creates a symbolic link called <em>new_name</em> for the existing file
<em>old_name</em>. Raises a <tt>NotImplemented</tt> exception on platforms
that do not support symbolic links.
</p>
<pre>
   File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002464_source')" id="l_M002464_source">show source</a> ]</p>
  <div id="M002464_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.symlink(old_name, new_name)   =&gt; 0
 *  
 *  Creates a symbolic link called &lt;i&gt;new_name&lt;/i&gt; for the existing file
 *  &lt;i&gt;old_name&lt;/i&gt;. Raises a &lt;code&gt;NotImplemented&lt;/code&gt; exception on
 *  platforms that do not support symbolic links.
 *     
 *     File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
 *     
 */

static VALUE
rb_file_s_symlink(klass, from, to)
    VALUE klass, from, to;
{
#ifdef HAVE_SYMLINK
    SafeStringValue(from);
    SafeStringValue(to);

    if (symlink(StringValueCStr(from), StringValueCStr(to)) &lt; 0) {
        sys_fail2(from, to);
    }
    return INT2FIX(0);
#else
    rb_notimplement();
    return Qnil;                /* not reached */
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002502" class="method">
  <div id="M002502_title" class="title">
    <b>File.symlink?(file_name)   =>  true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is a symbolic link.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002502_source')" id="l_M002502_source">show source</a> ]</p>
  <div id="M002502_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   File.symlink?(file_name)   =&gt;  true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is a symbolic link.
 */

static VALUE
test_l(obj, fname)
    VALUE obj, fname;
{
#ifndef S_ISLNK
#  ifdef _S_ISLNK
#    define S_ISLNK(m) _S_ISLNK(m)
#  elif defined __BORLANDC__
#    ifdef _S_IFLNK
#      define S_ISLNK(m) (((unsigned short)(m) &amp; S_IFMT) == _S_IFLNK)
#    else
#      ifdef S_IFLNK
#        define S_ISLNK(m) (((unsigned short)(m) &amp; S_IFMT) == S_IFLNK)
#      endif
#    endif
#  else
#    ifdef _S_IFLNK
#      define S_ISLNK(m) ((m &amp; S_IFMT) == _S_IFLNK)
#    else
#      ifdef S_IFLNK
#        define S_ISLNK(m) ((m &amp; S_IFMT) == S_IFLNK)
#      endif
#    endif
#  endif
#endif

#ifdef S_ISLNK
    struct stat st;

    SafeStringValue(fname);
    if (lstat(StringValueCStr(fname), &amp;st) &lt; 0) return Qfalse;
    if (S_ISLNK(st.st_mode)) return Qtrue;
#endif

    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div id="M002512" class="method">
  <div id="M002512_title" class="title">
    <b>syscopy</b>(from, to)
  </div>
  <div class="description">
  <p>
Copies a file <tt>from</tt> to <tt>to</tt>. If <tt>to</tt> is a directory,
copies <tt>from</tt> to <tt>to/from</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002512_source')" id="l_M002512_source">show source</a> ]</p>
  <div id="M002512_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ftools.rb, line 56</span>
56:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">syscopy</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
57:     <span class="ruby-identifier">to</span> = <span class="ruby-identifier">catname</span>(<span class="ruby-identifier">from</span>, <span class="ruby-identifier">to</span>)
58: 
59:     <span class="ruby-identifier">fmode</span> = <span class="ruby-identifier">stat</span>(<span class="ruby-identifier">from</span>).<span class="ruby-identifier">mode</span>
60:     <span class="ruby-identifier">tpath</span> = <span class="ruby-identifier">to</span>
61:     <span class="ruby-identifier">not_exist</span> = <span class="ruby-operator">!</span><span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">tpath</span>)
62: 
63:     <span class="ruby-identifier">from</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">from</span>, <span class="ruby-value str">&quot;rb&quot;</span>)
64:     <span class="ruby-identifier">to</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">to</span>, <span class="ruby-value str">&quot;wb&quot;</span>)
65: 
66:     <span class="ruby-keyword kw">begin</span>
67:       <span class="ruby-keyword kw">while</span> <span class="ruby-keyword kw">true</span>
68:         <span class="ruby-identifier">to</span>.<span class="ruby-identifier">syswrite</span> <span class="ruby-identifier">from</span>.<span class="ruby-identifier">sysread</span>(<span class="ruby-constant">BUFSIZE</span>)
69:       <span class="ruby-keyword kw">end</span>
70:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">EOFError</span>
71:       <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">true</span>
72:     <span class="ruby-keyword kw">rescue</span>
73:       <span class="ruby-identifier">ret</span> = <span class="ruby-keyword kw">false</span>
74:     <span class="ruby-keyword kw">ensure</span>
75:       <span class="ruby-identifier">to</span>.<span class="ruby-identifier">close</span>
76:       <span class="ruby-identifier">from</span>.<span class="ruby-identifier">close</span>
77:     <span class="ruby-keyword kw">end</span>
78:     <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">fmode</span>, <span class="ruby-identifier">tpath</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">not_exist</span>
79:     <span class="ruby-identifier">ret</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002470" class="method">
  <div id="M002470_title" class="title">
    <b>File.truncate(file_name, integer)  => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Truncates the file <em>file_name</em> to be at most <em>integer</em> bytes
long. Not available on all platforms.
</p>
<pre>
   f = File.new(&quot;out&quot;, &quot;w&quot;)
   f.write(&quot;1234567890&quot;)     #=&gt; 10
   f.close                   #=&gt; nil
   File.truncate(&quot;out&quot;, 5)   #=&gt; 0
   File.size(&quot;out&quot;)          #=&gt; 5
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002470_source')" id="l_M002470_source">show source</a> ]</p>
  <div id="M002470_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.truncate(file_name, integer)  =&gt; 0
 *  
 *  Truncates the file &lt;i&gt;file_name&lt;/i&gt; to be at most &lt;i&gt;integer&lt;/i&gt;
 *  bytes long. Not available on all platforms.
 *     
 *     f = File.new(&quot;out&quot;, &quot;w&quot;)
 *     f.write(&quot;1234567890&quot;)     #=&gt; 10
 *     f.close                   #=&gt; nil
 *     File.truncate(&quot;out&quot;, 5)   #=&gt; 0
 *     File.size(&quot;out&quot;)          #=&gt; 5
 *     
 */

static VALUE
rb_file_s_truncate(klass, path, len)
    VALUE klass, path, len;
{
    off_t pos;

    rb_secure(2);
    pos = NUM2OFFT(len);
    SafeStringValue(path);

#ifdef HAVE_TRUNCATE
    if (truncate(StringValueCStr(path), pos) &lt; 0)
        rb_sys_fail(RSTRING(path)-&gt;ptr);
#else
# ifdef HAVE_CHSIZE
    {
        int tmpfd;

#  ifdef _WIN32
        if ((tmpfd = open(StringValueCStr(path), O_RDWR)) &lt; 0) {
            rb_sys_fail(RSTRING(path)-&gt;ptr);
        }
#  else
        if ((tmpfd = open(StringValueCStr(path), 0)) &lt; 0) {
            rb_sys_fail(RSTRING(path)-&gt;ptr);
        }
#  endif
        if (chsize(tmpfd, pos) &lt; 0) {
            close(tmpfd);
            rb_sys_fail(RSTRING(path)-&gt;ptr);
        }
        close(tmpfd);
    }
# else
    rb_notimplement();
# endif
#endif
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
<div id="M002469" class="method">
  <div id="M002469_title" class="title">
    <b>File.umask()          => integer<br />
File.umask(integer)   => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the current umask value for this process. If the optional argument
is given, set the umask to that value and return the previous value. Umask
values are <em>subtracted</em> from the default permissions, so a umask of
<tt>0222</tt> would make a file read-only for everyone.
</p>
<pre>
   File.umask(0006)   #=&gt; 18
   File.umask         #=&gt; 6
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002469_source')" id="l_M002469_source">show source</a> ]</p>
  <div id="M002469_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.umask()          =&gt; integer
 *     File.umask(integer)   =&gt; integer
 *  
 *  Returns the current umask value for this process. If the optional
 *  argument is given, set the umask to that value and return the
 *  previous value. Umask values are &lt;em&gt;subtracted&lt;/em&gt; from the
 *  default permissions, so a umask of &lt;code&gt;0222&lt;/code&gt; would make a
 *  file read-only for everyone.
 *     
 *     File.umask(0006)   #=&gt; 18
 *     File.umask         #=&gt; 6
 */

static VALUE
rb_file_s_umask(argc, argv)
    int argc;
    VALUE *argv;
{
    int omask = 0;

    rb_secure(2);
    if (argc == 0) {
        omask = umask(0);
        umask(omask);
    }
    else if (argc == 1) {
        omask = umask(NUM2INT(argv[0]));
    }
    else {
        rb_raise(rb_eArgError, &quot;wrong number of arguments&quot;);
    }
    return INT2FIX(omask);
}
</pre>
  </div>
</div>
</div>
<div id="M002466" class="method">
  <div id="M002466_title" class="title">
    <b>File.delete(file_name, ...)  => integer<br />
File.unlink(file_name, ...)  => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Deletes the named files, returning the number of names passed as arguments.
Raises an exception on any error. See also <tt>Dir::rmdir</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002466_source')" id="l_M002466_source">show source</a> ]</p>
  <div id="M002466_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     File.delete(file_name, ...)  =&gt; integer
 *     File.unlink(file_name, ...)  =&gt; integer
 *  
 *  Deletes the named files, returning the number of names
 *  passed as arguments. Raises an exception on any error.
 *  See also &lt;code&gt;Dir::rmdir&lt;/code&gt;.
 */

static VALUE
rb_file_s_unlink(klass, args)
    VALUE klass, args;
{
    long n;

    rb_secure(2);
    n = apply2files(unlink_internal, args, 0);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002458" class="method">
  <div id="M002458_title" class="title">
    <b>File.utime(atime, mtime, file_name,...)   =>  integer<br />
</b>
  </div>
  <div class="description">
  <p>
Sets the access and modification times of each named file to the first two
arguments. Returns the number of file names in the argument list.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002458_source')" id="l_M002458_source">show source</a> ]</p>
  <div id="M002458_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  File.utime(atime, mtime, file_name,...)   =&gt;  integer
 *
 * Sets the access and modification times of each
 * named file to the first two arguments. Returns
 * the number of file names in the argument list.
 */

static VALUE
rb_file_s_utime(argc, argv)
    int argc;
    VALUE *argv;
{
    VALUE atime, mtime, rest;
    struct timeval tvs[2], *tvp = NULL;
    long n;

    rb_secure(2);
    rb_scan_args(argc, argv, &quot;2*&quot;, &amp;atime, &amp;mtime, &amp;rest);

    if (!NIL_P(atime) || !NIL_P(mtime)) {
        tvp = tvs;
        tvp[0] = rb_time_timeval(atime);
        tvp[1] = rb_time_timeval(mtime);
    }

    n = apply2files(utime_internal, rest, tvp);
    return LONG2FIX(n);
}
</pre>
  </div>
</div>
</div>
<div id="M002491" class="method">
  <div id="M002491_title" class="title">
    <b>File.writable?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is writable by the effective user
id of this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002491_source')" id="l_M002491_source">show source</a> ]</p>
  <div id="M002491_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.writable?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is writable by the effective
 * user id of this process.
 */

static VALUE
test_w(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (eaccess(StringValueCStr(fname), W_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002492" class="method">
  <div id="M002492_title" class="title">
    <b>File.writable_real?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file is writable by the real user id of
this process.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002492_source')" id="l_M002492_source">show source</a> ]</p>
  <div id="M002492_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.writable_real?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file is writable by the real
 * user id of this process.
 */

static VALUE
test_W(obj, fname)
    VALUE obj, fname;
{
    SafeStringValue(fname);
    if (access(StringValueCStr(fname), W_OK) &lt; 0) return Qfalse;
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M002496" class="method">
  <div id="M002496_title" class="title">
    <b>File.zero?(file_name)   => true or false<br />
</b>
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> if the named file exists and has a zero size.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002496_source')" id="l_M002496_source">show source</a> ]</p>
  <div id="M002496_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    File.zero?(file_name)   =&gt; true or false
 *
 * Returns &lt;code&gt;true&lt;/code&gt; if the named file exists and has
 * a zero size.
 */

static VALUE
test_z(obj, fname)
    VALUE obj, fname;
{
    struct stat st;

    if (rb_stat(fname, &amp;st) &lt; 0) return Qfalse;
    if (st.st_size == 0) return Qtrue;
    return Qfalse;
}
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M002478" class="method">
  <div id="M002478_title" class="title">
    <b>file.atime    => time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the last access time (a <tt><a
href="index.html?a=C00000015&name=Time">Time</a></tt> object)
</p>
<pre>
 for &lt;i&gt;file&lt;/i&gt;, or epoch if &lt;i&gt;file&lt;/i&gt; has not been accessed.

   File.new(&quot;testfile&quot;).atime   #=&gt; Wed Dec 31 18:00:00 CST 1969
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002478_source')" id="l_M002478_source">show source</a> ]</p>
  <div id="M002478_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.atime    =&gt; time
 *  
 *  Returns the last access time (a &lt;code&gt;Time&lt;/code&gt; object)
 *   for &lt;i&gt;file&lt;/i&gt;, or epoch if &lt;i&gt;file&lt;/i&gt; has not been accessed.
 *     
 *     File.new(&quot;testfile&quot;).atime   #=&gt; Wed Dec 31 18:00:00 CST 1969
 *     
 */

static VALUE
rb_file_atime(obj)
    VALUE obj;
{
    rb_io_t *fptr;
    struct stat st;

    GetOpenFile(obj, fptr);
    if (fstat(fileno(fptr-&gt;f), &amp;st) == -1) {
        rb_sys_fail(fptr-&gt;path);
    }
    return rb_time_new(st.st_atime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002481" class="method">
  <div id="M002481_title" class="title">
    <b>file.chmod(mode_int)   => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Changes permission bits on <em>file</em> to the bit pattern represented by
<em>mode_int</em>. Actual effects are platform dependent; on Unix systems,
see <tt>chmod(2)</tt> for details. Follows symbolic links. Also see <tt><a
href="index.html?a=M002461&name=File#lchmod">File#lchmod</a></tt>.
</p>
<pre>
   f = File.new(&quot;out&quot;, &quot;w&quot;);
   f.chmod(0644)   #=&gt; 0
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M002518&name=o_chmod">o_chmod</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002481_source')" id="l_M002481_source">show source</a> ]</p>
  <div id="M002481_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.chmod(mode_int)   =&gt; 0
 *  
 *  Changes permission bits on &lt;i&gt;file&lt;/i&gt; to the bit pattern
 *  represented by &lt;i&gt;mode_int&lt;/i&gt;. Actual effects are platform
 *  dependent; on Unix systems, see &lt;code&gt;chmod(2)&lt;/code&gt; for details.
 *  Follows symbolic links. Also see &lt;code&gt;File#lchmod&lt;/code&gt;.
 *     
 *     f = File.new(&quot;out&quot;, &quot;w&quot;);
 *     f.chmod(0644)   #=&gt; 0
 */

static VALUE
rb_file_chmod(obj, vmode)
    VALUE obj, vmode;
{
    rb_io_t *fptr;
    int mode;

    rb_secure(2);
    mode = NUM2INT(vmode);

    GetOpenFile(obj, fptr);
#ifdef HAVE_FCHMOD
    if (fchmod(fileno(fptr-&gt;f), mode) == -1)
        rb_sys_fail(fptr-&gt;path);
#else
    if (!fptr-&gt;path) return Qnil;
    if (chmod(fptr-&gt;path, mode) == -1)
        rb_sys_fail(fptr-&gt;path);
#endif

    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
<div id="M002482" class="method">
  <div id="M002482_title" class="title">
    <b>file.chown(owner_int, group_int )   => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Changes the owner and group of <em>file</em> to the given numeric owner and
group id&#8217;s. Only a process with superuser privileges may change the
owner of a file. The current owner of a file may change the file&#8217;s
group to any group to which the owner belongs. A <tt>nil</tt> or -1 owner
or group id is ignored. Follows symbolic links. See also <tt><a
href="index.html?a=M002462&name=File#lchown">File#lchown</a></tt>.
</p>
<pre>
   File.new(&quot;testfile&quot;).chown(502, 1000)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002482_source')" id="l_M002482_source">show source</a> ]</p>
  <div id="M002482_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.chown(owner_int, group_int )   =&gt; 0
 *  
 *  Changes the owner and group of &lt;i&gt;file&lt;/i&gt; to the given numeric
 *  owner and group id's. Only a process with superuser privileges may
 *  change the owner of a file. The current owner of a file may change
 *  the file's group to any group to which the owner belongs. A
 *  &lt;code&gt;nil&lt;/code&gt; or -1 owner or group id is ignored. Follows
 *  symbolic links. See also &lt;code&gt;File#lchown&lt;/code&gt;.
 *     
 *     File.new(&quot;testfile&quot;).chown(502, 1000)
 *     
 */

static VALUE
rb_file_chown(obj, owner, group)
    VALUE obj, owner, group;
{
    rb_io_t *fptr;
    int o, g;

    rb_secure(2);
    o = NIL_P(owner) ? -1 : NUM2INT(owner);
    g = NIL_P(group) ? -1 : NUM2INT(group);
    GetOpenFile(obj, fptr);
#if defined(DJGPP) || defined(__CYGWIN32__) || defined(_WIN32) || defined(__EMX__)
    if (!fptr-&gt;path) return Qnil;
    if (chown(fptr-&gt;path, o, g) == -1)
        rb_sys_fail(fptr-&gt;path);
#else
    if (fchown(fileno(fptr-&gt;f), o, g) == -1)
        rb_sys_fail(fptr-&gt;path);
#endif

    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
<div id="M002480" class="method">
  <div id="M002480_title" class="title">
    <b>file.ctime &rarr; time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the change time for <em>file</em> (that is, the time directory
information about the file was changed, not the file itself).
</p>
<pre>
   File.new(&quot;testfile&quot;).ctime   #=&gt; Wed Apr 09 08:53:14 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002480_source')" id="l_M002480_source">show source</a> ]</p>
  <div id="M002480_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.ctime -&gt; time
 *  
 *  Returns the change time for &lt;i&gt;file&lt;/i&gt; (that is, the time directory
 *  information about the file was changed, not the file itself).
 *     
 *     File.new(&quot;testfile&quot;).ctime   #=&gt; Wed Apr 09 08:53:14 CDT 2003
 *     
 */

static VALUE
rb_file_ctime(obj)
    VALUE obj;
{
    rb_io_t *fptr;
    struct stat st;

    GetOpenFile(obj, fptr);
    if (fstat(fileno(fptr-&gt;f), &amp;st) == -1) {
        rb_sys_fail(fptr-&gt;path);
    }
    return rb_time_new(st.st_ctime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002484" class="method">
  <div id="M002484_title" class="title">
    <b>file.flock (locking_constant ) =>  0 or false<br />
</b>
  </div>
  <div class="description">
  <p>
Locks or unlocks a file according to <em>locking_constant</em> (a logical
<em>or</em> of the values in the table below). Returns <tt>false</tt> if
<tt>File::LOCK_NB</tt> is specified and the operation would otherwise have
blocked. Not available on all platforms.
</p>
<p>
Locking constants (in class <a
href="index.html?a=C00000276&name=File">File</a>):
</p>
<pre>
   LOCK_EX   | Exclusive lock. Only one process may hold an
             | exclusive lock for a given file at a time.
   ----------+------------------------------------------------
   LOCK_NB   | Don't block when locking. May be combined
             | with other lock options using logical or.
   ----------+------------------------------------------------
   LOCK_SH   | Shared lock. Multiple processes may each hold a
             | shared lock for a given file at the same time.
   ----------+------------------------------------------------
   LOCK_UN   | Unlock.
</pre>
<p>
Example:
</p>
<pre>
   File.new(&quot;testfile&quot;).flock(File::LOCK_UN)   #=&gt; 0
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002484_source')" id="l_M002484_source">show source</a> ]</p>
  <div id="M002484_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.flock (locking_constant ) =&gt;  0 or false
 *  
 *  Locks or unlocks a file according to &lt;i&gt;locking_constant&lt;/i&gt; (a
 *  logical &lt;em&gt;or&lt;/em&gt; of the values in the table below).
 *  Returns &lt;code&gt;false&lt;/code&gt; if &lt;code&gt;File::LOCK_NB&lt;/code&gt; is
 *  specified and the operation would otherwise have blocked. Not
 *  available on all platforms.
 *     
 *  Locking constants (in class File):
 *
 *     LOCK_EX   | Exclusive lock. Only one process may hold an
 *               | exclusive lock for a given file at a time.
 *     ----------+------------------------------------------------
 *     LOCK_NB   | Don't block when locking. May be combined
 *               | with other lock options using logical or.
 *     ----------+------------------------------------------------
 *     LOCK_SH   | Shared lock. Multiple processes may each hold a
 *               | shared lock for a given file at the same time.
 *     ----------+------------------------------------------------
 *     LOCK_UN   | Unlock.
 *
 *  Example:
 *
 *     File.new(&quot;testfile&quot;).flock(File::LOCK_UN)   #=&gt; 0
 *     
 */

static VALUE
rb_file_flock(obj, operation)
    VALUE obj;
    VALUE operation;
{
#ifndef __CHECKER__
    rb_io_t *fptr;
    int op;

    rb_secure(2);
    op = NUM2INT(operation);
    GetOpenFile(obj, fptr);

    if (fptr-&gt;mode &amp; FMODE_WRITABLE) {
        fflush(GetWriteFile(fptr));
    }
  retry:
    if (flock(fileno(fptr-&gt;f), op) &lt; 0) {
        switch (errno) {
          case EAGAIN:
          case EACCES:
#if defined(EWOULDBLOCK) &amp;&amp; EWOULDBLOCK != EAGAIN
          case EWOULDBLOCK:
#endif
              return Qfalse;
          case EINTR:
#if defined(ERESTART)
          case ERESTART:
#endif
            goto retry;
        }
        rb_sys_fail(fptr-&gt;path);
    }
#endif
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
<div id="M002477" class="method">
  <div id="M002477_title" class="title">
    <b>file.lstat   =>  stat<br />
</b>
  </div>
  <div class="description">
  <p>
Same as <tt><a href="index.html?a=M002155&name=IO#stat">IO#stat</a></tt>,
but does not follow the last symbolic link. Instead, reports on the link
itself.
</p>
<pre>
   File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
   File.stat(&quot;testfile&quot;).size              #=&gt; 66
   f = File.new(&quot;link2test&quot;)
   f.lstat.size                            #=&gt; 8
   f.stat.size                             #=&gt; 66
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002477_source')" id="l_M002477_source">show source</a> ]</p>
  <div id="M002477_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.lstat   =&gt;  stat
 *  
 *  Same as &lt;code&gt;IO#stat&lt;/code&gt;, but does not follow the last symbolic
 *  link. Instead, reports on the link itself.
 *     
 *     File.symlink(&quot;testfile&quot;, &quot;link2test&quot;)   #=&gt; 0
 *     File.stat(&quot;testfile&quot;).size              #=&gt; 66
 *     f = File.new(&quot;link2test&quot;)
 *     f.lstat.size                            #=&gt; 8
 *     f.stat.size                             #=&gt; 66
 */

static VALUE
rb_file_lstat(obj)
    VALUE obj;
{
#ifdef HAVE_LSTAT
    rb_io_t *fptr;
    struct stat st;

    rb_secure(2);
    GetOpenFile(obj, fptr);
    if (!fptr-&gt;path) return Qnil;
    if (lstat(fptr-&gt;path, &amp;st) == -1) {
        rb_sys_fail(fptr-&gt;path);
    }
    return stat_new(&amp;st);
#else
    return rb_io_stat(obj);
#endif
}
</pre>
  </div>
</div>
</div>
<div id="M002479" class="method">
  <div id="M002479_title" class="title">
    <b>file.mtime &rarr; time<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the modification time for <em>file</em>.
</p>
<pre>
   File.new(&quot;testfile&quot;).mtime   #=&gt; Wed Apr 09 08:53:14 CDT 2003
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002479_source')" id="l_M002479_source">show source</a> ]</p>
  <div id="M002479_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.mtime -&gt; time
 *  
 *  Returns the modification time for &lt;i&gt;file&lt;/i&gt;.
 *     
 *     File.new(&quot;testfile&quot;).mtime   #=&gt; Wed Apr 09 08:53:14 CDT 2003
 *     
 */

static VALUE
rb_file_mtime(obj)
    VALUE obj;
{
    rb_io_t *fptr;
    struct stat st;

    GetOpenFile(obj, fptr);
    if (fstat(fileno(fptr-&gt;f), &amp;st) == -1) {
        rb_sys_fail(fptr-&gt;path);
    }
    return rb_time_new(st.st_mtime, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M002518" class="method">
  <div id="M002518_title" class="title">
    <b>o_chmod</b>(p1)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M002459&name=chmod">chmod</a>
</p>
  </div>
</div>
<div id="M002485" class="method">
  <div id="M002485_title" class="title">
    <b>file.path &rarr; filename<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the pathname used to create <em>file</em> as a string. Does not
normalize the name.
</p>
<pre>
   File.new(&quot;testfile&quot;).path               #=&gt; &quot;testfile&quot;
   File.new(&quot;/tmp/../tmp/xxx&quot;, &quot;w&quot;).path   #=&gt; &quot;/tmp/../tmp/xxx&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002485_source')" id="l_M002485_source">show source</a> ]</p>
  <div id="M002485_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.path -&gt; filename
 *  
 *  Returns the pathname used to create &lt;i&gt;file&lt;/i&gt; as a string. Does
 *  not normalize the name.
 *     
 *     File.new(&quot;testfile&quot;).path               #=&gt; &quot;testfile&quot;
 *     File.new(&quot;/tmp/../tmp/xxx&quot;, &quot;w&quot;).path   #=&gt; &quot;/tmp/../tmp/xxx&quot;
 *     
 */

static VALUE
rb_file_path(obj)
    VALUE obj;
{
    rb_io_t *fptr;

    fptr = RFILE(rb_io_taint_check(obj))-&gt;fptr;
    rb_io_check_initialized(fptr);
    if (!fptr-&gt;path) return Qnil;
    return rb_tainted_str_new2(fptr-&gt;path);
}
</pre>
  </div>
</div>
</div>
<div id="M002483" class="method">
  <div id="M002483_title" class="title">
    <b>file.truncate(integer)    => 0<br />
</b>
  </div>
  <div class="description">
  <p>
Truncates <em>file</em> to at most <em>integer</em> bytes. The file must be
opened for writing. Not available on all platforms.
</p>
<pre>
   f = File.new(&quot;out&quot;, &quot;w&quot;)
   f.syswrite(&quot;1234567890&quot;)   #=&gt; 10
   f.truncate(5)              #=&gt; 0
   f.close()                  #=&gt; nil
   File.size(&quot;out&quot;)           #=&gt; 5
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002483_source')" id="l_M002483_source">show source</a> ]</p>
  <div id="M002483_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     file.truncate(integer)    =&gt; 0
 *  
 *  Truncates &lt;i&gt;file&lt;/i&gt; to at most &lt;i&gt;integer&lt;/i&gt; bytes. The file
 *  must be opened for writing. Not available on all platforms.
 *     
 *     f = File.new(&quot;out&quot;, &quot;w&quot;)
 *     f.syswrite(&quot;1234567890&quot;)   #=&gt; 10
 *     f.truncate(5)              #=&gt; 0
 *     f.close()                  #=&gt; nil
 *     File.size(&quot;out&quot;)           #=&gt; 5
 */

static VALUE
rb_file_truncate(obj, len)
    VALUE obj, len;
{
    rb_io_t *fptr;
    FILE *f;
    off_t pos;

    rb_secure(2);
    pos = NUM2OFFT(len);
    GetOpenFile(obj, fptr);
    if (!(fptr-&gt;mode &amp; FMODE_WRITABLE)) {
        rb_raise(rb_eIOError, &quot;not opened for writing&quot;);
    }
    f = GetWriteFile(fptr);
    fflush(f);
    fseeko(f, (off_t)0, SEEK_CUR);
#ifdef HAVE_FTRUNCATE
    if (ftruncate(fileno(f), pos) &lt; 0)
        rb_sys_fail(fptr-&gt;path);
#else
# ifdef HAVE_CHSIZE
    if (chsize(fileno(f), pos) &lt; 0)
        rb_sys_fail(fptr-&gt;path);
# else
    rb_notimplement();
# endif
#endif
    return INT2FIX(0);
}
</pre>
  </div>
</div>
</div>
</div>

  </div>