  <div id="C00000904">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />FileUtils<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/fileutils_rb.html');">ruby-1.8.7-p22/lib/fileutils.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/un_rb.html');">ruby-1.8.7-p22/lib/un.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><h1>fileutils.rb</h1>
<p>
Copyright &#169; 2000-2006 Minero Aoki
</p>
<p>
This program is free software. You can distribute/modify this program under
the same terms of ruby.
</p>
<h2>module <a href="index.html?a=C00000904&name=FileUtils">FileUtils</a></h2>
<p>
Namespace for several file utility methods for copying, moving, removing,
etc.
</p>
<h3>Module Functions</h3>
<pre>
  cd(dir, options)
  cd(dir, options) {|dir| .... }
  pwd()
  mkdir(dir, options)
  mkdir(list, options)
  mkdir_p(dir, options)
  mkdir_p(list, options)
  rmdir(dir, options)
  rmdir(list, options)
  ln(old, new, options)
  ln(list, destdir, options)
  ln_s(old, new, options)
  ln_s(list, destdir, options)
  ln_sf(src, dest, options)
  cp(src, dest, options)
  cp(list, dir, options)
  cp_r(src, dest, options)
  cp_r(list, dir, options)
  mv(src, dest, options)
  mv(list, dir, options)
  rm(list, options)
  rm_r(list, options)
  rm_rf(list, options)
  install(src, dest, mode = &lt;src's&gt;, options)
  chmod(mode, list, options)
  chmod_R(mode, list, options)
  chown(user, group, list, options)
  chown_R(user, group, list, options)
  touch(list, options)
</pre>
<p>
The <tt>options</tt> parameter is a hash of options, taken from the list
<tt>:force</tt>, <tt>:noop</tt>, <tt>:preserve</tt>, and <tt>:verbose</tt>.
<tt>:noop</tt> means that no changes are made. The other two are obvious.
Each method documents the options that it honours.
</p>
<p>
All methods that have the concept of a &quot;source&quot; file or directory
can take either one file or a list of files in that argument. See the
method documentation for examples.
</p>
<p>
There are some `low level&#8217; methods, which do not accept any option:
</p>
<pre>
  copy_entry(src, dest, preserve = false, dereference = false)
  copy_file(src, dest, preserve = false, dereference = true)
  copy_stream(srcstream, deststream)
  remove_entry(path, force = false)
  remove_entry_secure(path, force = false)
  remove_file(path, force = false)
  compare_file(path_a, path_b)
  compare_stream(stream_a, stream_b)
  uptodate?(file, cmp_list)
</pre>
<h2>module <a href="index.html?a=C00000908&name=FileUtils::Verbose">FileUtils::Verbose</a></h2>
<p>
This module has all methods of <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a> module, but it
outputs messages before acting. This equates to passing the
<tt>:verbose</tt> flag to methods in <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a>.
</p>
<h2>module <a href="index.html?a=C00000906&name=FileUtils::NoWrite">FileUtils::NoWrite</a></h2>
<p>
This module has all methods of <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a> module, but
never changes files/directories. This equates to passing the <tt>:noop</tt>
flag to methods in <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a>.
</p>
<h2>module <a href="index.html?a=C00000905&name=FileUtils::DryRun">FileUtils::DryRun</a></h2>
<p>
This module has all methods of <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a> module, but
never changes files/directories. This equates to passing the <tt>:noop</tt>
and <tt>:verbose</tt> flags to methods in <a
href="index.html?a=C00000904&name=FileUtils">FileUtils</a>.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004564&name=cd" >cd</a></li>
  <li><a href="index.html?a=M004565&name=chdir" >chdir</a></li>
  <li><a href="index.html?a=M004603&name=chmod" >chmod</a></li>
  <li><a href="index.html?a=M004604&name=chmod_R" >chmod_R</a></li>
  <li><a href="index.html?a=M004605&name=chown" >chown</a></li>
  <li><a href="index.html?a=M004606&name=chown_R" >chown_R</a></li>
  <li><a href="index.html?a=M004600&name=cmp" >cmp</a></li>
  <li><a href="index.html?a=M004598&name=compare_file" >compare_file</a></li>
  <li><a href="index.html?a=M004601&name=compare_stream" >compare_stream</a></li>
  <li><a href="index.html?a=M004578&name=copy" >copy</a></li>
  <li><a href="index.html?a=M004580&name=copy_entry" >copy_entry</a></li>
  <li><a href="index.html?a=M004581&name=copy_file" >copy_file</a></li>
  <li><a href="index.html?a=M004582&name=copy_stream" >copy_stream</a></li>
  <li><a href="index.html?a=M004577&name=cp" >cp</a></li>
  <li><a href="index.html?a=M004579&name=cp_r" >cp_r</a></li>
  <li><a href="index.html?a=M004594&name=fu_have_symlink?" >fu_have_symlink?</a></li>
  <li><a href="index.html?a=M004593&name=fu_world_writable?" >fu_world_writable?</a></li>
  <li><a href="index.html?a=M004563&name=getwd" >getwd</a></li>
  <li><a href="index.html?a=M004599&name=identical?" >identical?</a></li>
  <li><a href="index.html?a=M004602&name=install" >install</a></li>
  <li><a href="index.html?a=M004573&name=link" >link</a></li>
  <li><a href="index.html?a=M004572&name=ln" >ln</a></li>
  <li><a href="index.html?a=M004574&name=ln_s" >ln_s</a></li>
  <li><a href="index.html?a=M004576&name=ln_sf" >ln_sf</a></li>
  <li><a href="index.html?a=M004570&name=makedirs" >makedirs</a></li>
  <li><a href="index.html?a=M004567&name=mkdir" >mkdir</a></li>
  <li><a href="index.html?a=M004568&name=mkdir_p" >mkdir_p</a></li>
  <li><a href="index.html?a=M004569&name=mkpath" >mkpath</a></li>
  <li><a href="index.html?a=M004584&name=move" >move</a></li>
  <li><a href="index.html?a=M004583&name=mv" >mv</a></li>
  <li><a href="index.html?a=M004562&name=pwd" >pwd</a></li>
  <li><a href="index.html?a=M004586&name=remove" >remove</a></li>
  <li><a href="index.html?a=M004597&name=remove_dir" >remove_dir</a></li>
  <li><a href="index.html?a=M004595&name=remove_entry" >remove_entry</a></li>
  <li><a href="index.html?a=M004592&name=remove_entry_secure" >remove_entry_secure</a></li>
  <li><a href="index.html?a=M004596&name=remove_file" >remove_file</a></li>
  <li><a href="index.html?a=M004585&name=rm" >rm</a></li>
  <li><a href="index.html?a=M004587&name=rm_f" >rm_f</a></li>
  <li><a href="index.html?a=M004589&name=rm_r" >rm_r</a></li>
  <li><a href="index.html?a=M004590&name=rm_rf" >rm_rf</a></li>
  <li><a href="index.html?a=M004571&name=rmdir" >rmdir</a></li>
  <li><a href="index.html?a=M004591&name=rmtree" >rmtree</a></li>
  <li><a href="index.html?a=M004588&name=safe_unlink" >safe_unlink</a></li>
  <li><a href="index.html?a=M004575&name=symlink" >symlink</a></li>
  <li><a href="index.html?a=M004607&name=touch" >touch</a></li>
  <li><a href="index.html?a=M004566&name=uptodate?" >uptodate?</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/FileUtils/StreamUtils_.html');">StreamUtils_</a></li>
</ul>


  <div class="sectiontitle">Classes and Modules</div>
  Module "<a href="#" onclick="jsHref('classes/FileUtils/DryRun.html');" class="link">FileUtils::DryRun</a>"<br />
Module "<a href="#" onclick="jsHref('classes/FileUtils/NoWrite.html');" class="link">FileUtils::NoWrite</a>"<br />
Module "<a href="#" onclick="jsHref('classes/FileUtils/StreamUtils_.html');" class="link">FileUtils::StreamUtils_</a>"<br />
Module "<a href="#" onclick="jsHref('classes/FileUtils/Verbose.html');" class="link">FileUtils::Verbose</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">METHODS</td>
    <td>=</td>
    <td class="attr-value">singleton_methods() - %w( private_module_function       commands options have_option? options_of collect_method )</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M004564" class="method">
  <div id="M004564_title" class="title">
    <b>cd</b>(dir, options = {}) {|dir| ...}
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: verbose
</p>
<p>
Changes the current directory to the directory <tt>dir</tt>.
</p>
<p>
If this method is called with block, resumes to the old working directory
after the block execution finished.
</p>
<pre>
  FileUtils.cd('/', :verbose =&gt; true)   # chdir and report it
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004565&name=chdir">chdir</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004564_source')" id="l_M004564_source">show source</a> ]</p>
  <div id="M004564_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cd</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: dir</span>
119:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cd'</span>]
120:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cd #{dir}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
121:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
122:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-value str">'cd -'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>] <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">block</span>
123:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004565" class="method">
  <div id="M004565_title" class="title">
    <b>chdir</b>(dir, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004564&name=cd">cd</a>
</p>
  </div>
</div>
<div id="M004603" class="method">
  <div id="M004603_title" class="title">
    <b>chmod</b>(mode, list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod 0755, 'somecommand'
  FileUtils.chmod 0644, %w(my.rb your.rb his.rb her.rb)
  FileUtils.chmod 0755, '/usr/bin/ruby', :verbose =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004603_source')" id="l_M004603_source">show source</a> ]</p>
  <div id="M004603_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 864</span>
864:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
865:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod'</span>]
866:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
867:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod %o %s'</span>, <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
868:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
869:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
870:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
871:     <span class="ruby-keyword kw">end</span>
872:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004604" class="method">
  <div id="M004604_title" class="title">
    <b>chmod_R</b>(mode, list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
force
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre>
  FileUtils.chmod_R 0700, &quot;/tmp/app.#{$$}&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004604_source')" id="l_M004604_source">show source</a> ]</p>
  <div id="M004604_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 885</span>
885:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chmod_R</span>(<span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
886:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chmod_R'</span>]
887:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
888:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chmod -R%s %o %s'</span>,
889:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
890:                               <span class="ruby-identifier">mode</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
891:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
892:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
893:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
894:         <span class="ruby-keyword kw">begin</span>
895:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">mode</span>
896:         <span class="ruby-keyword kw">rescue</span>
897:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
898:         <span class="ruby-keyword kw">end</span>
899:       <span class="ruby-keyword kw">end</span>
900:     <span class="ruby-keyword kw">end</span>
901:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004605" class="method">
  <div id="M004605_title" class="title">
    <b>chown</b>(user, group, list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt>. <tt>user</tt> and
<tt>group</tt> may be an ID (<a
href="index.html?a=C00000099&name=Integer">Integer</a>/<a
href="index.html?a=C00000055&name=String">String</a>) or a name (<a
href="index.html?a=C00000055&name=String">String</a>). If <tt>user</tt> or
<tt>group</tt> is nil, this method does not change the attribute.
</p>
<pre>
  FileUtils.chown 'root', 'staff', '/usr/local/bin/ruby'
  FileUtils.chown nil, 'bin', Dir.glob('/usr/bin/*'), :verbose =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004605_source')" id="l_M004605_source">show source</a> ]</p>
  <div id="M004605_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 918</span>
918:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
919:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown'</span>]
920:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
921:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown %s%s'</span>,
922:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
923:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
924:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
925:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
926:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
927:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
928:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
929:     <span class="ruby-keyword kw">end</span>
930:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004606" class="method">
  <div id="M004606_title" class="title">
    <b>chown_R</b>(user, group, list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
force
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt> recursively. <tt>user</tt> and
<tt>group</tt> may be an ID (<a
href="index.html?a=C00000099&name=Integer">Integer</a>/<a
href="index.html?a=C00000055&name=String">String</a>) or a name (<a
href="index.html?a=C00000055&name=String">String</a>). If <tt>user</tt> or
<tt>group</tt> is nil, this method does not change the attribute.
</p>
<pre>
  FileUtils.chown_R 'www', 'www', '/var/www/htdocs'
  FileUtils.chown_R 'cvs', 'cvs', '/var/cvs', :verbose =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004606_source')" id="l_M004606_source">show source</a> ]</p>
  <div id="M004606_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 947</span>
947:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chown_R</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">group</span>, <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
948:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'chown_R'</span>]
949:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
950:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">'chown -R%s %s%s'</span>,
951:                               (<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">'f'</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>),
952:                               [<span class="ruby-identifier">user</span>,<span class="ruby-identifier">group</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">':'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">' '</span>,
953:                               <span class="ruby-identifier">list</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
954:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
955:     <span class="ruby-identifier">uid</span> = <span class="ruby-identifier">fu_get_uid</span>(<span class="ruby-identifier">user</span>)
956:     <span class="ruby-identifier">gid</span> = <span class="ruby-identifier">fu_get_gid</span>(<span class="ruby-identifier">group</span>)
957:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">uid</span> <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">gid</span>
958:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">root</span><span class="ruby-operator">|</span>
959:       <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
960:         <span class="ruby-keyword kw">begin</span>
961:           <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">uid</span>, <span class="ruby-identifier">gid</span>
962:         <span class="ruby-keyword kw">rescue</span>
963:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
964:         <span class="ruby-keyword kw">end</span>
965:       <span class="ruby-keyword kw">end</span>
966:     <span class="ruby-keyword kw">end</span>
967:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004600" class="method">
  <div id="M004600_title" class="title">
    <b>cmp</b>(a, b)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004598&name=compare_file">compare_file</a>
</p>
  </div>
</div>
<div id="M004598" class="method">
  <div id="M004598_title" class="title">
    <b>compare_file</b>(a, b)
  </div>
  <div class="description">
  <p>
Returns true if the contents of a file A and a file B are identical.
</p>
<pre>
  FileUtils.compare_file('somefile', 'somefile')  #=&gt; true
  FileUtils.compare_file('/bin/cp', '/bin/mv')    #=&gt; maybe false
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004599&name=identical?">identical?</a>
  <a href="index.html?a=M004600&name=cmp">cmp</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004598_source')" id="l_M004598_source">show source</a> ]</p>
  <div id="M004598_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 792</span>
792:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
793:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">a</span>) <span class="ruby-operator">==</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">size</span>(<span class="ruby-identifier">b</span>)
794:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">a</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fa</span><span class="ruby-operator">|</span>
795:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">b</span>, <span class="ruby-value str">'rb'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">fb</span><span class="ruby-operator">|</span>
796:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">fa</span>, <span class="ruby-identifier">fb</span>)
797:       }
798:     }
799:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004601" class="method">
  <div id="M004601_title" class="title">
    <b>compare_stream</b>(a, b)
  </div>
  <div class="description">
  <p>
Returns true if the contents of a stream <tt>a</tt> and <tt>b</tt> are
identical.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004601_source')" id="l_M004601_source">show source</a> ]</p>
  <div id="M004601_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 810</span>
810:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compare_stream</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
811:     <span class="ruby-identifier">bsize</span> = <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)
812:     <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">sb</span> = <span class="ruby-keyword kw">nil</span>
813:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">sa</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">sb</span>
814:       <span class="ruby-identifier">sa</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
815:       <span class="ruby-identifier">sb</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">bsize</span>)
816:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">sa</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>
817:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">sa</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">sb</span>.<span class="ruby-identifier">nil?</span>
818:           <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
819:         <span class="ruby-keyword kw">end</span>
820:       <span class="ruby-keyword kw">end</span>
821:     <span class="ruby-keyword kw">end</span>
822:     <span class="ruby-keyword kw">false</span>
823:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004578" class="method">
  <div id="M004578_title" class="title">
    <b>copy</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004577&name=cp">cp</a>
</p>
  </div>
</div>
<div id="M004580" class="method">
  <div id="M004580_title" class="title">
    <b>copy_entry</b>(src, dest, preserve = false, dereference_root = false, remove_destination = false)
  </div>
  <div class="description">
  <p>
Copies a file system entry <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt>
is a directory, this method copies its contents recursively. This method
preserves file types, c.f. symlink, directory&#8230; (FIFO, device files
and etc. are not supported yet)
</p>
<p>
Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.
</p>
<p>
If <tt>preserve</tt> is true, this method preserves owner, group,
permissions and modified time.
</p>
<p>
If <tt>dereference_root</tt> is true, this method dereference tree root.
</p>
<p>
If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004580_source')" id="l_M004580_source">show source</a> ]</p>
  <div id="M004580_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 447</span>
447:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_entry</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference_root</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">remove_destination</span> = <span class="ruby-keyword kw">false</span>)
448:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference_root</span>).<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
449:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">dest</span>, <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">rel</span>, <span class="ruby-keyword kw">false</span>)
450:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">remove_destination</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">file?</span>(<span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>)
451:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span>
452:       <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">path</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
453:     <span class="ruby-keyword kw">end</span>
454:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004581" class="method">
  <div id="M004581_title" class="title">
    <b>copy_file</b>(src, dest, preserve = false, dereference = true)
  </div>
  <div class="description">
  <p>
Copies file contents of <tt>src</tt> to <tt>dest</tt>. Both of <tt>src</tt>
and <tt>dest</tt> must be a path name.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004581_source')" id="l_M004581_source">show source</a> ]</p>
  <div id="M004581_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 461</span>
461:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_file</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">preserve</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">dereference</span> = <span class="ruby-keyword kw">true</span>)
462:     <span class="ruby-identifier">ent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">src</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">dereference</span>)
463:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">dest</span>
464:     <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">copy_metadata</span> <span class="ruby-identifier">dest</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">preserve</span>
465:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004582" class="method">
  <div id="M004582_title" class="title">
    <b>copy_stream</b>(src, dest)
  </div>
  <div class="description">
  <p>
Copies stream <tt>src</tt> to <tt>dest</tt>. <tt>src</tt> must respond to
read(n) and <tt>dest</tt> must respond to write(str).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004582_source')" id="l_M004582_source">show source</a> ]</p>
  <div id="M004582_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 473</span>
473:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">copy_stream</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
474:     <span class="ruby-identifier">fu_copy_stream0</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">fu_stream_blksize</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>)
475:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004577" class="method">
  <div id="M004577_title" class="title">
    <b>cp</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: preserve noop
verbose
</p>
<p>
Copies a file content <tt>src</tt> to <tt>dest</tt>. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to +dest/src+.
</p>
<p>
If <tt>src</tt> is a list of files, then <tt>dest</tt> must be a directory.
</p>
<pre>
  FileUtils.cp 'eval.c', 'eval.c.org'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6'
  FileUtils.cp %w(cgi.rb complex.rb date.rb), '/usr/lib/ruby/1.6', :verbose =&gt; true
  FileUtils.cp 'symlink', 'dest'   # copy content, &quot;dest&quot; is not a symlink
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004578&name=copy">copy</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004577_source')" id="l_M004577_source">show source</a> ]</p>
  <div id="M004577_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 378</span>
378:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
379:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp'</span>]
380:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp#{options[:preserve] ? ' -p' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
381:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
382:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
383:       <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
384:     <span class="ruby-keyword kw">end</span>
385:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004579" class="method">
  <div id="M004579_title" class="title">
    <b>cp_r</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: preserve noop
verbose dereference_root remove_destination
</p>
<p>
Copies <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory, this
method copies all its contents recursively. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to +dest/src+.
</p>
<p>
<tt>src</tt> can be a list of files.
</p>
<pre>
  # Installing ruby library &quot;mylib&quot; under the site_ruby
  FileUtils.rm_r site_ruby + '/mylib', :force
  FileUtils.cp_r 'lib/', site_ruby + '/mylib'

  # Examples of copying several files to target directory.
  FileUtils.cp_r %w(mail.rb field.rb debug/), site_ruby + '/tmail'
  FileUtils.cp_r Dir.glob('*.rb'), '/home/aamine/lib/ruby', :noop =&gt; true, :verbose =&gt; true

  # If you want to copy all contents of a directory instead of the
  # directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
  # use following code.
  FileUtils.cp_r 'src/.', 'dest'     # cp_r('src', 'dest') makes src/dest,
                                     # but this doesn't.
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004579_source')" id="l_M004579_source">show source</a> ]</p>
  <div id="M004579_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 417</span>
417:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cp_r</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
418:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'cp_r'</span>]
419:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;cp -r#{options[:preserve] ? 'p' : ''}#{options[:remove_destination] ? ' --remove-destination' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
420:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
421:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>] = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">:dereference_root</span>)
422:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
423:       <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:dereference_root</span>], <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:remove_destination</span>]
424:     <span class="ruby-keyword kw">end</span>
425:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004594" class="method">
  <div id="M004594_title" class="title">
    <b>fu_have_symlink?</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004594_source')" id="l_M004594_source">show source</a> ]</p>
  <div id="M004594_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 732</span>
732:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fu_have_symlink?</span>   <span class="ruby-comment cmt">#:nodoc</span>
733:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>
734:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NotImplementedError</span>
735:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
736:   <span class="ruby-keyword kw">rescue</span>
737:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
738:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004593" class="method">
  <div id="M004593_title" class="title">
    <b>fu_world_writable?</b>(st)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004593_source')" id="l_M004593_source">show source</a> ]</p>
  <div id="M004593_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 727</span>
727:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">fu_world_writable?</span>(<span class="ruby-identifier">st</span>)
728:     (<span class="ruby-identifier">st</span>.<span class="ruby-identifier">mode</span> <span class="ruby-operator">&amp;</span> <span class="ruby-value">0002</span>) <span class="ruby-operator">!=</span> <span class="ruby-value">0</span>
729:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004563" class="method">
  <div id="M004563_title" class="title">
    <b>getwd</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004562&name=pwd">pwd</a>
</p>
  </div>
</div>
<div id="M004599" class="method">
  <div id="M004599_title" class="title">
    <b>identical?</b>(a, b)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004598&name=compare_file">compare_file</a>
</p>
  </div>
</div>
<div id="M004602" class="method">
  <div id="M004602_title" class="title">
    <b>install</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: mode preserve
noop verbose
</p>
<p>
If <tt>src</tt> is not same as <tt>dest</tt>, copies it and changes the
permission mode to <tt>mode</tt>. If <tt>dest</tt> is a directory,
destination is <tt>dest</tt>/<tt>src</tt>. This method removes destination
before copy.
</p>
<pre>
  FileUtils.install 'ruby', '/usr/local/bin/ruby', :mode =&gt; 0755, :verbose =&gt; true
  FileUtils.install 'lib.rb', '/usr/local/lib/ruby/site_ruby', :verbose =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004602_source')" id="l_M004602_source">show source</a> ]</p>
  <div id="M004602_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 836</span>
836:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">install</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
837:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'install'</span>]
838:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;install -c#{options[:preserve] &amp;&amp; ' -p'}#{options[:mode] ? (' -m 0%o' % options[:mode]) : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
839:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
840:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
841:       <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">d</span>) <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">compare_file</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>)
842:         <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
843:         <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-identifier">s</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
844:         <span class="ruby-identifier">copy_file</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
845:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">atime</span>, <span class="ruby-identifier">st</span>.<span class="ruby-identifier">mtime</span>, <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:preserve</span>]
846:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>], <span class="ruby-identifier">d</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
847:       <span class="ruby-keyword kw">end</span>
848:     <span class="ruby-keyword kw">end</span>
849:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004573" class="method">
  <div id="M004573_title" class="title">
    <b>link</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004572&name=ln">ln</a>
</p>
  </div>
</div>
<div id="M004572" class="method">
  <div id="M004572_title" class="title">
    <b>ln</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: force noop
verbose
</p>
<p>
<b><tt>ln(old, new, options = {})</tt></b>
</p>
<p>
Creates a hard link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a link
+new/old+. If <tt>new</tt> already exists and it is not a directory, raises
Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln 'gcc', 'cc', :verbose =&gt; true
  FileUtils.ln '/usr/bin/emacs21', '/usr/bin/emacs'
</pre>
<p>
<b><tt>ln(list, destdir, options = {})</tt></b>
</p>
<p>
Creates several hard links in a directory, with each one pointing to the
item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<pre>
  include FileUtils
  cd '/sbin'
  FileUtils.ln %w(cp mv mkdir), '/bin'   # Now /sbin/cp and /bin/cp are linked.
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004573&name=link">link</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004572_source')" id="l_M004572_source">show source</a> ]</p>
  <div id="M004572_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 293</span>
293:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
294:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln'</span>]
295:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
296:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
297:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
298:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
299:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">link</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
300:     <span class="ruby-keyword kw">end</span>
301:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004574" class="method">
  <div id="M004574_title" class="title">
    <b>ln_s</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: force noop
verbose
</p>
<p>
<b><tt><a href="index.html?a=M004574&name=ln_s">ln_s</a>(old, new, options
= {})</tt></b>
</p>
<p>
Creates a symbolic link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a symbolic link
+new/old+. If <tt>new</tt> already exists and it is not a directory, raises
Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre>
  FileUtils.ln_s '/usr/bin/ruby', '/usr/local/bin/ruby'
  FileUtils.ln_s 'verylongsourcefilename.c', 'c', :force =&gt; true
</pre>
<p>
<b><tt><a href="index.html?a=M004574&name=ln_s">ln_s</a>(list, destdir,
options = {})</tt></b>
</p>
<p>
Creates several symbolic links in a directory, with each one pointing to
the item in <tt>list</tt>. If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<p>
If <tt>destdir</tt> is not a directory, raises Errno::ENOTDIR.
</p>
<pre>
  FileUtils.ln_s Dir.glob('bin/*.rb'), '/home/aamine/bin'
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004575&name=symlink">symlink</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004574_source')" id="l_M004574_source">show source</a> ]</p>
  <div id="M004574_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 332</span>
332:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_s</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
333:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_s'</span>]
334:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;ln -s#{options[:force] ? 'f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
335:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
336:     <span class="ruby-identifier">fu_each_src_dest0</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>,<span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
337:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
338:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">symlink</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
339:     <span class="ruby-keyword kw">end</span>
340:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004576" class="method">
  <div id="M004576_title" class="title">
    <b>ln_sf</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
</p>
<p>
Same as
</p>
<pre>
  #ln_s(src, dest, :force)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004576_source')" id="l_M004576_source">show source</a> ]</p>
  <div id="M004576_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 355</span>
355:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ln_sf</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
356:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'ln_sf'</span>]
357:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
358:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
359:     <span class="ruby-identifier">ln_s</span> <span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span>
360:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004570" class="method">
  <div id="M004570_title" class="title">
    <b>makedirs</b>(list, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004568&name=mkdir_p">mkdir_p</a>
</p>
  </div>
</div>
<div id="M004567" class="method">
  <div id="M004567_title" class="title">
    <b>mkdir</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: mode noop
verbose
</p>
<p>
Creates one or more directories.
</p>
<pre>
  FileUtils.mkdir 'test'
  FileUtils.mkdir %w( tmp data )
  FileUtils.mkdir 'notexist', :noop =&gt; true  # Does not really create.
  FileUtils.mkdir 'tmp', :mode =&gt; 0700
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004567_source')" id="l_M004567_source">show source</a> ]</p>
  <div id="M004567_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
166:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir'</span>]
167:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
168:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
169:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
170: 
171:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
172:       <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">dir</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
173:     <span class="ruby-keyword kw">end</span>
174:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004568" class="method">
  <div id="M004568_title" class="title">
    <b>mkdir_p</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: mode noop
verbose
</p>
<p>
Creates a directory and all its parent directories. For example,
</p>
<pre>
  FileUtils.mkdir_p '/usr/local/lib/ruby'
</pre>
<p>
causes to make following directories, if it does not exist.
</p>
<pre>
    * /usr
    * /usr/local
    * /usr/local/lib
    * /usr/local/lib/ruby
</pre>
<p>
You can pass several directories at a time in a list.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004569&name=mkpath">mkpath</a>
  <a href="index.html?a=M004570&name=makedirs">makedirs</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004568_source')" id="l_M004568_source">show source</a> ]</p>
  <div id="M004568_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
196:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mkdir_p'</span>]
197:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
198:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mkdir -p #{options[:mode] ? ('-m %03o ' % options[:mode]) : ''}#{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
199:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
200: 
201:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">path</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>) }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
202:       <span class="ruby-comment cmt"># optimize for the most common case</span>
203:       <span class="ruby-keyword kw">begin</span>
204:         <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
205:         <span class="ruby-keyword kw">next</span>
206:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
207:         <span class="ruby-keyword kw">next</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
208:       <span class="ruby-keyword kw">end</span>
209: 
210:       <span class="ruby-identifier">stack</span> = []
211:       <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">path</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">last</span>   <span class="ruby-comment cmt"># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;</span>
212:         <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">push</span> <span class="ruby-identifier">path</span>
213:         <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">path</span>)
214:       <span class="ruby-keyword kw">end</span>
215:       <span class="ruby-identifier">stack</span>.<span class="ruby-identifier">reverse_each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
216:         <span class="ruby-keyword kw">begin</span>
217:           <span class="ruby-identifier">fu_mkdir</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mode</span>]
218:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">err</span>
219:           <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">directory?</span>(<span class="ruby-identifier">path</span>)
220:         <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-keyword kw">end</span>
222:     <span class="ruby-keyword kw">end</span>
223: 
224:     <span class="ruby-keyword kw">return</span> <span class="ruby-operator">*</span><span class="ruby-identifier">list</span>
225:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004569" class="method">
  <div id="M004569_title" class="title">
    <b>mkpath</b>(list, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004568&name=mkdir_p">mkdir_p</a>
</p>
  </div>
</div>
<div id="M004584" class="method">
  <div id="M004584_title" class="title">
    <b>move</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004583&name=mv">mv</a>
</p>
  </div>
</div>
<div id="M004583" class="method">
  <div id="M004583_title" class="title">
    <b>mv</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: force noop
verbose
</p>
<p>
Moves file(s) <tt>src</tt> to <tt>dest</tt>. If <tt>file</tt> and
<tt>dest</tt> exist on the different disk partition, the file is copied
instead.
</p>
<pre>
  FileUtils.mv 'badname.rb', 'goodname.rb'
  FileUtils.mv 'stuff.rb', '/notexist/lib/ruby', :force =&gt; true  # no error

  FileUtils.mv %w(junk.txt dust.txt), '/home/aamine/.trash/'
  FileUtils.mv Dir.glob('test*.rb'), 'test', :noop =&gt; true, :verbose =&gt; true
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004584&name=move">move</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004583_source')" id="l_M004583_source">show source</a> ]</p>
  <div id="M004583_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 490</span>
490:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mv</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>, <span class="ruby-identifier">options</span> = {})
491:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'mv'</span>]
492:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;mv#{options[:force] ? ' -f' : ''} #{[src,dest].flatten.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
493:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
494:     <span class="ruby-identifier">fu_each_src_dest</span>(<span class="ruby-identifier">src</span>, <span class="ruby-identifier">dest</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span><span class="ruby-operator">|</span>
495:       <span class="ruby-identifier">destent</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">true</span>)
496:       <span class="ruby-keyword kw">begin</span>
497:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">exist?</span>
498:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">directory?</span>
499:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EEXIST</span>, <span class="ruby-identifier">dest</span>
500:           <span class="ruby-keyword kw">else</span>
501:             <span class="ruby-identifier">destent</span>.<span class="ruby-identifier">remove_file</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rename_cannot_overwrite_file?</span>
502:           <span class="ruby-keyword kw">end</span>
503:         <span class="ruby-keyword kw">end</span>
504:         <span class="ruby-keyword kw">begin</span>
505:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>
506:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EXDEV</span>
507:           <span class="ruby-identifier">copy_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">d</span>, <span class="ruby-keyword kw">true</span>
508:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
509:             <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
510:           <span class="ruby-keyword kw">else</span>
511:             <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">s</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
512:           <span class="ruby-keyword kw">end</span>
513:         <span class="ruby-keyword kw">end</span>
514:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">SystemCallError</span>
515:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
516:       <span class="ruby-keyword kw">end</span>
517:     <span class="ruby-keyword kw">end</span>
518:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004562" class="method">
  <div id="M004562_title" class="title">
    <b>pwd</b>()
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: (none)
</p>
<p>
Returns the name of the current directory.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004563&name=getwd">getwd</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004562_source')" id="l_M004562_source">show source</a> ]</p>
  <div id="M004562_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
101:     <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">pwd</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004586" class="method">
  <div id="M004586_title" class="title">
    <b>remove</b>(list, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004585&name=rm">rm</a>
</p>
  </div>
</div>
<div id="M004597" class="method">
  <div id="M004597_title" class="title">
    <b>remove_dir</b>(path, force = false)
  </div>
  <div class="description">
  <p>
Removes a directory <tt>dir</tt> and its contents recursively. This method
ignores <a
href="index.html?a=C00000014&name=StandardError">StandardError</a> if
<tt>force</tt> is true.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004597_source')" id="l_M004597_source">show source</a> ]</p>
  <div id="M004597_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 781</span>
781:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_dir</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
782:     <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>   <span class="ruby-comment cmt"># FIXME?? check if it is a directory</span>
783:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004595" class="method">
  <div id="M004595_title" class="title">
    <b>remove_entry</b>(path, force = false)
  </div>
  <div class="description">
  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> might
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively.
</p>
<p>
See also <a
href="index.html?a=M004592&name=remove_entry_secure">remove_entry_secure</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004595_source')" id="l_M004595_source">show source</a> ]</p>
  <div id="M004595_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 753</span>
753:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
754:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
755:       <span class="ruby-keyword kw">begin</span>
756:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
757:       <span class="ruby-keyword kw">rescue</span>
758:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
759:       <span class="ruby-keyword kw">end</span>
760:     <span class="ruby-keyword kw">end</span>
761:   <span class="ruby-keyword kw">rescue</span>
762:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
763:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004592" class="method">
  <div id="M004592_title" class="title">
    <b>remove_entry_secure</b>(path, force = false)
  </div>
  <div class="description">
  <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> shall
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively. This method is required to avoid TOCTTOU
(time-of-check-to-time-of-use) local security vulnerability of <a
href="index.html?a=M004589&name=rm_r">rm_r</a>. <a
href="index.html?a=M004589&name=rm_r">rm_r</a> causes security hole when:
</p>
<pre>
  * Parent directory is world writable (including /tmp).
  * Removing directory tree includes world writable directory.
  * The system has symbolic link.
</pre>
<p>
To avoid this security hole, this method applies special preprocess. If
<tt>path</tt> is a directory, this method chown(2) and chmod(2) all
removing directories. This requires the current process is the owner of the
removing whole directory tree, or is the super user (root).
</p>
<p>
WARNING: You must ensure that <b>ALL</b> parent directories are not world
writable. Otherwise this method does not work. Only exception is temporary
directory like /tmp and /var/tmp, whose permission is 1777.
</p>
<p>
WARNING: Only the owner of the removing directory tree, or Unix super user
(root) should invoke this method. Otherwise this method does not work.
</p>
<p>
For details of this security vulnerability, see Perl&#8217;s case:
</p>
<pre>
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452
</pre>
<p>
For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004592_source')" id="l_M004592_source">show source</a> ]</p>
  <div id="M004592_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 676</span>
676:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_entry_secure</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
677:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_have_symlink?</span>
678:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
679:       <span class="ruby-keyword kw">return</span>
680:     <span class="ruby-keyword kw">end</span>
681:     <span class="ruby-identifier">fullpath</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">path</span>)
682:     <span class="ruby-identifier">st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">lstat</span>(<span class="ruby-identifier">fullpath</span>)
683:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">st</span>.<span class="ruby-identifier">directory?</span>
684:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
685:       <span class="ruby-keyword kw">return</span>
686:     <span class="ruby-keyword kw">end</span>
687:     <span class="ruby-comment cmt"># is a directory.</span>
688:     <span class="ruby-identifier">parent_st</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">stat</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">fullpath</span>))
689:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_world_writable?</span>(<span class="ruby-identifier">parent_st</span>)
690:       <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span>
691:       <span class="ruby-keyword kw">return</span>
692:     <span class="ruby-keyword kw">end</span>
693:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent_st</span>.<span class="ruby-identifier">sticky?</span>
694:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: #{path.inspect} (parent directory mode #{'%o' % parent_st.mode})&quot;</span>
695:     <span class="ruby-keyword kw">end</span>
696:     <span class="ruby-comment cmt"># freeze tree root</span>
697:     <span class="ruby-identifier">euid</span> = <span class="ruby-constant">Process</span>.<span class="ruby-identifier">euid</span>
698:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">fullpath</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/.'</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
699:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">fu_stat_identical_entry?</span>(<span class="ruby-identifier">st</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">stat</span>)
700:         <span class="ruby-comment cmt"># symlink (TOC-to-TOU attack?)</span>
701:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">unlink</span> <span class="ruby-identifier">fullpath</span>
702:         <span class="ruby-keyword kw">return</span>
703:       <span class="ruby-keyword kw">end</span>
704:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
705:       <span class="ruby-identifier">f</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
706:     }
707:     <span class="ruby-comment cmt"># ---- tree root is frozen ----</span>
708:     <span class="ruby-identifier">root</span> = <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>)
709:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">preorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
710:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">directory?</span>
711:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chown</span> <span class="ruby-identifier">euid</span>, <span class="ruby-value">-1</span>
712:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">chmod</span> <span class="ruby-value">0700</span>
713:       <span class="ruby-keyword kw">end</span>
714:     <span class="ruby-keyword kw">end</span>
715:     <span class="ruby-identifier">root</span>.<span class="ruby-identifier">postorder_traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">ent</span><span class="ruby-operator">|</span>
716:       <span class="ruby-keyword kw">begin</span>
717:         <span class="ruby-identifier">ent</span>.<span class="ruby-identifier">remove</span>
718:       <span class="ruby-keyword kw">rescue</span>
719:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
720:       <span class="ruby-keyword kw">end</span>
721:     <span class="ruby-keyword kw">end</span>
722:   <span class="ruby-keyword kw">rescue</span>
723:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
724:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004596" class="method">
  <div id="M004596_title" class="title">
    <b>remove_file</b>(path, force = false)
  </div>
  <div class="description">
  <p>
Removes a file <tt>path</tt>. This method ignores <a
href="index.html?a=C00000014&name=StandardError">StandardError</a> if
<tt>force</tt> is true.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004596_source')" id="l_M004596_source">show source</a> ]</p>
  <div id="M004596_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 770</span>
770:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_file</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
771:     <span class="ruby-constant">Entry_</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">path</span>).<span class="ruby-identifier">remove_file</span>
772:   <span class="ruby-keyword kw">rescue</span>
773:     <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">force</span>
774:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004585" class="method">
  <div id="M004585_title" class="title">
    <b>rm</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: force noop
verbose
</p>
<p>
Remove file(s) specified in <tt>list</tt>. This method cannot remove
directories. All StandardErrors are ignored when the :force option is set.
</p>
<pre>
  FileUtils.rm %w( junk.txt dust.txt )
  FileUtils.rm Dir.glob('*.so')
  FileUtils.rm 'NotExistFile', :force =&gt; true   # never raises exception
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004586&name=remove">remove</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004585_source')" id="l_M004585_source">show source</a> ]</p>
  <div id="M004585_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 542</span>
542:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
543:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm'</span>]
544:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
545:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm#{options[:force] ? ' -f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
546:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
547: 
548:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
549:       <span class="ruby-identifier">remove_file</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
550:     <span class="ruby-keyword kw">end</span>
551:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004587" class="method">
  <div id="M004587_title" class="title">
    <b>rm_f</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
</p>
<p>
Equivalent to
</p>
<pre>
  #rm(list, :force =&gt; true)
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004588&name=safe_unlink">safe_unlink</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004587_source')" id="l_M004587_source">show source</a> ]</p>
  <div id="M004587_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 567</span>
567:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_f</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
568:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_f'</span>]
569:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
570:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
571:     <span class="ruby-identifier">rm</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
572:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004589" class="method">
  <div id="M004589_title" class="title">
    <b>rm_r</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: force noop
verbose secure
</p>
<p>
remove files <tt>list</tt>[0] <tt>list</tt>[1]&#8230; If <tt>list</tt>[n]
is a directory, removes its all contents recursively. This method ignores
<a href="index.html?a=C00000014&name=StandardError">StandardError</a> when
:force option is set.
</p>
<pre>
  FileUtils.rm_r Dir.glob('/tmp/*')
  FileUtils.rm_r '/', :force =&gt; true          #  :-)
</pre>
<p>
WARNING: This method causes local vulnerability if one of parent
directories or removing directory tree are world writable (including /tmp,
whose permission is 1777), and the current process has strong privilege
such as Unix super user (root), and the system has symbolic link. For
secure removing, read the documentation of <a
href="index.html?a=M004592&name=remove_entry_secure">remove_entry_secure</a>
carefully, and set :secure option to true. Default is :secure=&gt;false.
</p>
<p>
NOTE: This method calls <a
href="index.html?a=M004592&name=remove_entry_secure">remove_entry_secure</a>
if :secure option is set. See also <a
href="index.html?a=M004592&name=remove_entry_secure">remove_entry_secure</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004589_source')" id="l_M004589_source">show source</a> ]</p>
  <div id="M004589_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 602</span>
602:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_r</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
603:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_r'</span>]
604:     <span class="ruby-comment cmt"># options[:secure] = true unless options.key?(:secure)</span>
605:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
606:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rm -r#{options[:force] ? 'f' : ''} #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
607:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
608:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
609:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:secure</span>]
610:         <span class="ruby-identifier">remove_entry_secure</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
611:       <span class="ruby-keyword kw">else</span>
612:         <span class="ruby-identifier">remove_entry</span> <span class="ruby-identifier">path</span>, <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>]
613:       <span class="ruby-keyword kw">end</span>
614:     <span class="ruby-keyword kw">end</span>
615:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004590" class="method">
  <div id="M004590_title" class="title">
    <b>rm_rf</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
secure
</p>
<p>
Equivalent to
</p>
<pre>
  #rm_r(list, :force =&gt; true)
</pre>
<p>
WARNING: This method causes local vulnerability. Read the documentation of
<a href="index.html?a=M004589&name=rm_r">rm_r</a> first.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004591&name=rmtree">rmtree</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004590_source')" id="l_M004590_source">show source</a> ]</p>
  <div id="M004590_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 630</span>
630:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
631:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rm_rf'</span>]
632:     <span class="ruby-identifier">options</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dup</span>
633:     <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:force</span>] = <span class="ruby-keyword kw">true</span>
634:     <span class="ruby-identifier">rm_r</span> <span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span>
635:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004571" class="method">
  <div id="M004571_title" class="title">
    <b>rmdir</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop, verbose
</p>
<p>
Removes one or more directories.
</p>
<pre>
  FileUtils.rmdir 'somedir'
  FileUtils.rmdir %w(somedir anydir otherdir)
  # Does not really remove directory; outputs message.
  FileUtils.rmdir 'somedir', :verbose =&gt; true, :noop =&gt; true
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004571_source')" id="l_M004571_source">show source</a> ]</p>
  <div id="M004571_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
259:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'rmdir'</span>]
260:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
261:     <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;rmdir #{list.join ' '}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
262:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
263:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">dir</span><span class="ruby-operator">|</span>
264:       <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">rmdir</span> <span class="ruby-identifier">dir</span>.<span class="ruby-identifier">sub</span>(<span class="ruby-regexp re">%r&lt;/\z&gt;</span>, <span class="ruby-value str">''</span>)
265:     <span class="ruby-keyword kw">end</span>
266:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004591" class="method">
  <div id="M004591_title" class="title">
    <b>rmtree</b>(list, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004590&name=rm_rf">rm_rf</a>
</p>
  </div>
</div>
<div id="M004588" class="method">
  <div id="M004588_title" class="title">
    <b>safe_unlink</b>(list, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004587&name=rm_f">rm_f</a>
</p>
  </div>
</div>
<div id="M004575" class="method">
  <div id="M004575_title" class="title">
    <b>symlink</b>(src, dest, options = {})
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004574&name=ln_s">ln_s</a>
</p>
  </div>
</div>
<div id="M004607" class="method">
  <div id="M004607_title" class="title">
    <b>touch</b>(list, options = {})
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: noop verbose
</p>
<p>
Updates modification time (mtime) and access time (atime) of file(s) in
<tt>list</tt>. Files are created if they don&#8217;t exist.
</p>
<pre>
  FileUtils.touch 'timestamp'
  FileUtils.touch Dir.glob('*.c');  system 'make'
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004607_source')" id="l_M004607_source">show source</a> ]</p>
  <div id="M004607_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 1017</span>
1017:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">touch</span>(<span class="ruby-identifier">list</span>, <span class="ruby-identifier">options</span> = {})
1018:     <span class="ruby-identifier">fu_check_options</span> <span class="ruby-identifier">options</span>, <span class="ruby-constant">OPT_TABLE</span>[<span class="ruby-value str">'touch'</span>]
1019:     <span class="ruby-identifier">list</span> = <span class="ruby-identifier">fu_list</span>(<span class="ruby-identifier">list</span>)
1020:     <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:nocreate</span>]
1021:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:mtime</span>]
1022:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:verbose</span>]
1023:       <span class="ruby-identifier">fu_output_message</span> <span class="ruby-node">&quot;touch #{nocreate ? ' -c' : ''}#{t ? t.strftime(' -t %Y%m%d%H%M.%S') : ''}#{list.join ' '}&quot;</span>
1024:     <span class="ruby-keyword kw">end</span>
1025:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:noop</span>]
1026:     <span class="ruby-identifier">list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
1027:       <span class="ruby-identifier">created</span> = <span class="ruby-identifier">nocreate</span>
1028:       <span class="ruby-keyword kw">begin</span>
1029:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">utime</span>(<span class="ruby-identifier">t</span>, <span class="ruby-identifier">t</span>, <span class="ruby-identifier">path</span>)
1030:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>
1031:         <span class="ruby-identifier">raise</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">created</span>
1032:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">path</span>, <span class="ruby-value str">'a'</span>) {
1033:           ;
1034:         }
1035:         <span class="ruby-identifier">created</span> = <span class="ruby-keyword kw">true</span>
1036:         <span class="ruby-keyword kw">retry</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span>
1037:       <span class="ruby-keyword kw">end</span>
1038:     <span class="ruby-keyword kw">end</span>
1039:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004566" class="method">
  <div id="M004566_title" class="title">
    <b>uptodate?</b>(new, old_list, options = nil)
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000202&name=Options">Options</a>: (none)
</p>
<p>
Returns true if <tt>newer</tt> is newer than all <tt>old_list</tt>.
Non-existent files are older than any file.
</p>
<pre>
  FileUtils.uptodate?('hello.o', %w(hello.c hello.h)) or    #       system 'make hello.o'
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004566_source')" id="l_M004566_source">show source</a> ]</p>
  <div id="M004566_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/fileutils.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">uptodate?</span>(<span class="ruby-identifier">new</span>, <span class="ruby-identifier">old_list</span>, <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>)
142:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'uptodate? does not accept any option'</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>
143: 
144:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">new</span>)
145:     <span class="ruby-identifier">new_time</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">new</span>)
146:     <span class="ruby-identifier">old_list</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">old</span><span class="ruby-operator">|</span>
147:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">old</span>)
148:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">new_time</span> <span class="ruby-operator">&gt;</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">old</span>)
149:       <span class="ruby-keyword kw">end</span>
150:     <span class="ruby-keyword kw">end</span>
151:     <span class="ruby-keyword kw">true</span>
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>