  <div id="C00000841">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />FTP<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/net/ftp_rb.html');">ruby-1.8.7-p22/lib/net/ftp.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
This class implements the <a
href="index.html?a=C00000276&name=File">File</a> Transfer Protocol. If you
have used a command-line <a href="index.html?a=C00000841&name=FTP">FTP</a>
program, and are familiar with the commands, you will be able to use this
class easily. Some extra features are included to take advantage of
Ruby&#8217;s style and strengths.
</p>
<h2>Example</h2>
<pre>
  require 'net/ftp'
</pre>
<h3>Example 1</h3>
<pre>
  ftp = Net::FTP.new('ftp.netlab.co.jp')
  ftp.login
  files = ftp.chdir('pub/lang/ruby/contrib')
  files = ftp.list('n*')
  ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  ftp.close
</pre>
<h3>Example 2</h3>
<pre>
  Net::FTP.open('ftp.netlab.co.jp') do |ftp|
    ftp.login
    files = ftp.chdir('pub/lang/ruby/contrib')
    files = ftp.list('n*')
    ftp.getbinaryfile('nif.rb-0.91.gz', 'nif.gz', 1024)
  end
</pre>
<h2>Major Methods</h2>
<p>
The following are the methods most likely to be useful to users:
</p>
<ul>
<li><a href="index.html?a=M004324&name=FTP.open">FTP.open</a>

</li>
<li><a href="index.html?a=M004337&name=getbinaryfile">getbinaryfile</a>

</li>
<li><a href="index.html?a=M004338&name=gettextfile">gettextfile</a>

</li>
<li><a href="index.html?a=M004340&name=putbinaryfile">putbinaryfile</a>

</li>
<li><a href="index.html?a=M004341&name=puttextfile">puttextfile</a>

</li>
<li><a href="index.html?a=M004350&name=chdir">chdir</a>

</li>
<li><a href="index.html?a=M004344&name=nlst">nlst</a>

</li>
<li><a href="index.html?a=M004351&name=size">size</a>

</li>
<li><a href="index.html?a=M004348&name=rename">rename</a>

</li>
<li><a href="index.html?a=M004349&name=delete">delete</a>

</li>
</ul>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004358&name=abort" >abort</a></li>
  <li><a href="index.html?a=M004343&name=acct" >acct</a></li>
  <li><a href="index.html?a=M004350&name=chdir" >chdir</a></li>
  <li><a href="index.html?a=M004365&name=close" >close</a></li>
  <li><a href="index.html?a=M004366&name=closed?" >closed?</a></li>
  <li><a href="index.html?a=M004328&name=connect" >connect</a></li>
  <li><a href="index.html?a=M004349&name=delete" >delete</a></li>
  <li><a href="index.html?a=M004347&name=dir" >dir</a></li>
  <li><a href="index.html?a=M004339&name=get" >get</a></li>
  <li><a href="index.html?a=M004337&name=getbinaryfile" >getbinaryfile</a></li>
  <li><a href="index.html?a=M004356&name=getdir" >getdir</a></li>
  <li><a href="index.html?a=M004338&name=gettextfile" >gettextfile</a></li>
  <li><a href="index.html?a=M004361&name=help" >help</a></li>
  <li><a href="index.html?a=M004345&name=list" >list</a></li>
  <li><a href="index.html?a=M004332&name=login" >login</a></li>
  <li><a href="index.html?a=M004346&name=ls" >ls</a></li>
  <li><a href="index.html?a=M004360&name=mdtm" >mdtm</a></li>
  <li><a href="index.html?a=M004353&name=mkdir" >mkdir</a></li>
  <li><a href="index.html?a=M004352&name=mtime" >mtime</a></li>
  <li><a href="index.html?a=M004325&name=new" >new</a></li>
  <li><a href="index.html?a=M004344&name=nlst" >nlst</a></li>
  <li><a href="index.html?a=M004363&name=noop" >noop</a></li>
  <li><a href="index.html?a=M004324&name=open" >open</a></li>
  <li><a href="index.html?a=M004342&name=put" >put</a></li>
  <li><a href="index.html?a=M004340&name=putbinaryfile" >putbinaryfile</a></li>
  <li><a href="index.html?a=M004341&name=puttextfile" >puttextfile</a></li>
  <li><a href="index.html?a=M004355&name=pwd" >pwd</a></li>
  <li><a href="index.html?a=M004362&name=quit" >quit</a></li>
  <li><a href="index.html?a=M004348&name=rename" >rename</a></li>
  <li><a href="index.html?a=M004333&name=retrbinary" >retrbinary</a></li>
  <li><a href="index.html?a=M004334&name=retrlines" >retrlines</a></li>
  <li><a href="index.html?a=M004326&name=return_code" >return_code</a></li>
  <li><a href="index.html?a=M004327&name=return_code=" >return_code=</a></li>
  <li><a href="index.html?a=M004354&name=rmdir" >rmdir</a></li>
  <li><a href="index.html?a=M004330&name=sendcmd" >sendcmd</a></li>
  <li><a href="index.html?a=M004329&name=set_socket" >set_socket</a></li>
  <li><a href="index.html?a=M004364&name=site" >site</a></li>
  <li><a href="index.html?a=M004351&name=size" >size</a></li>
  <li><a href="index.html?a=M004359&name=status" >status</a></li>
  <li><a href="index.html?a=M004335&name=storbinary" >storbinary</a></li>
  <li><a href="index.html?a=M004336&name=storlines" >storlines</a></li>
  <li><a href="index.html?a=M004357&name=system" >system</a></li>
  <li><a href="index.html?a=M004331&name=voidcmd" >voidcmd</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/MonitorMixin.html');">MonitorMixin</a></li>
</ul>




  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>binary</td>
    <td class='attr-desc'>
When <tt>true</tt>, transfers are performed in binary mode. Default:
<tt>true</tt>.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>debug_mode</td>
    <td class='attr-desc'>
When <tt>true</tt>, all traffic to and from the server is written to
+$stdout+. Default: <tt>false</tt>.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>last_response</td>
    <td class='attr-desc'>
The server&#8217;s last response.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>last_response_code</td>
    <td class='attr-desc'>
The server&#8217;s last response code.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>passive</td>
    <td class='attr-desc'>
When <tt>true</tt>, the connection is in passive mode. Default:
<tt>false</tt>.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>resume</td>
    <td class='attr-desc'>
Sets or retrieves the <tt>resume</tt> status, which decides whether
incomplete transfers are resumed or restarted. Default: <tt>false</tt>.

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>welcome</td>
    <td class='attr-desc'>
The server&#8217;s welcome message.

</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M004325" class="method">
  <div id="M004325_title" class="title">
    <b>new</b>(host = nil, user = nil, passwd = nil, acct = nil)
  </div>
  <div class="description">
  <p>
Creates and returns a new <tt><a
href="index.html?a=C00000841&name=FTP">FTP</a></tt> object. If a
<tt>host</tt> is given, a connection is made. Additionally, if the
<tt>user</tt> is given, the given user name, password, and (optionally)
account are used to log in. See <a
href="index.html?a=M004332&name=login">login</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004325_source')" id="l_M004325_source">show source</a> ]</p>
  <div id="M004325_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">host</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
130:       <span class="ruby-keyword kw">super</span>()
131:       <span class="ruby-ivar">@binary</span> = <span class="ruby-keyword kw">true</span>
132:       <span class="ruby-ivar">@passive</span> = <span class="ruby-keyword kw">false</span>
133:       <span class="ruby-ivar">@debug_mode</span> = <span class="ruby-keyword kw">false</span>
134:       <span class="ruby-ivar">@resume</span> = <span class="ruby-keyword kw">false</span>
135:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">host</span>
136:         <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>)
137:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span>
138:           <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
139:         <span class="ruby-keyword kw">end</span>
140:       <span class="ruby-keyword kw">end</span>
141:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004324" class="method">
  <div id="M004324_title" class="title">
    <b>open</b>(host, user = nil, passwd = nil, acct = nil) {|ftp| ...}
  </div>
  <div class="description">
  <p>
A synonym for <tt><a
href="index.html?a=M004325&name=FTP.new">FTP.new</a></tt>, but with a
mandatory host parameter.
</p>
<p>
If a block is given, it is passed the <tt><a
href="index.html?a=C00000841&name=FTP">FTP</a></tt> object, which will be
closed when the block finishes, or when an exception is raised.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004324_source')" id="l_M004324_source">show source</a> ]</p>
  <div id="M004324_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">FTP</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
112:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
113:         <span class="ruby-identifier">ftp</span> = <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
114:         <span class="ruby-keyword kw">begin</span>
115:           <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">ftp</span>
116:         <span class="ruby-keyword kw">ensure</span>
117:           <span class="ruby-identifier">ftp</span>.<span class="ruby-identifier">close</span>
118:         <span class="ruby-keyword kw">end</span>
119:       <span class="ruby-keyword kw">else</span>
120:         <span class="ruby-identifier">new</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">user</span>, <span class="ruby-identifier">passwd</span>, <span class="ruby-identifier">acct</span>)
121:       <span class="ruby-keyword kw">end</span>
122:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M004358" class="method">
  <div id="M004358_title" class="title">
    <b>abort</b>()
  </div>
  <div class="description">
  <p>
Aborts the previous command (ABOR command).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004358_source')" id="l_M004358_source">show source</a> ]</p>
  <div id="M004358_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 746</span>
746:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">abort</span>
747:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;ABOR&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
748:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: ABOR\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
749:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
750:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">getmultiline</span>
751:       <span class="ruby-keyword kw">unless</span> [<span class="ruby-value str">&quot;426&quot;</span>, <span class="ruby-value str">&quot;226&quot;</span>, <span class="ruby-value str">&quot;225&quot;</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>])
752:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPProtoError</span>, <span class="ruby-identifier">resp</span>
753:       <span class="ruby-keyword kw">end</span>
754:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>
755:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004343" class="method">
  <div id="M004343_title" class="title">
    <b>acct</b>(account)
  </div>
  <div class="description">
  <p>
Sends the ACCT command. TODO: more info.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004343_source')" id="l_M004343_source">show source</a> ]</p>
  <div id="M004343_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 599</span>
599:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">acct</span>(<span class="ruby-identifier">account</span>)
600:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;ACCT &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">account</span>
601:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
602:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004350" class="method">
  <div id="M004350_title" class="title">
    <b>chdir</b>(dirname)
  </div>
  <div class="description">
  <p>
Changes the (remote) directory.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004350_source')" id="l_M004350_source">show source</a> ]</p>
  <div id="M004350_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 669</span>
669:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">chdir</span>(<span class="ruby-identifier">dirname</span>)
670:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dirname</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;..&quot;</span>
671:         <span class="ruby-keyword kw">begin</span>
672:           <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;CDUP&quot;</span>)
673:           <span class="ruby-keyword kw">return</span>
674:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">FTPPermError</span>
675:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$!</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;500&quot;</span>
676:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-identifier">$!</span>
677:           <span class="ruby-keyword kw">end</span>
678:         <span class="ruby-keyword kw">end</span>
679:       <span class="ruby-keyword kw">end</span>
680:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;CWD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>
681:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
682:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004365" class="method">
  <div id="M004365_title" class="title">
    <b>close</b>()
  </div>
  <div class="description">
  <p>
Closes the connection. Further operations are impossible until you open a
new connection with <a
href="index.html?a=M004328&name=connect">connect</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004365_source')" id="l_M004365_source">show source</a> ]</p>
  <div id="M004365_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 814</span>
814:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
815:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">close</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@sock</span> <span class="ruby-keyword kw">and</span> <span class="ruby-keyword kw">not</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
816:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004366" class="method">
  <div id="M004366_title" class="title">
    <b>closed?</b>()
  </div>
  <div class="description">
  <p>
Returns <tt>true</tt> iff the connection is closed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004366_source')" id="l_M004366_source">show source</a> ]</p>
  <div id="M004366_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 821</span>
821:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">closed?</span>
822:       <span class="ruby-ivar">@sock</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">or</span> <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">closed?</span>
823:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004328" class="method">
  <div id="M004328_title" class="title">
    <b>connect</b>(host, port = FTP_PORT)
  </div>
  <div class="description">
  <p>
Establishes an <a href="index.html?a=C00000841&name=FTP">FTP</a> connection
to host, optionally overriding the default port. If the environment
variable <tt>SOCKS_SERVER</tt> is set, sets up the connection through a
SOCKS proxy. Raises an exception (typically <tt>Errno::ECONNREFUSED</tt>)
if the connection cannot be established.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004328_source')" id="l_M004328_source">show source</a> ]</p>
  <div id="M004328_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 170</span>
170:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">connect</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span> = <span class="ruby-constant">FTP_PORT</span>)
171:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
172:         <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;connect: &quot;</span>, <span class="ruby-identifier">host</span>, <span class="ruby-value str">&quot;, &quot;</span>, <span class="ruby-identifier">port</span>, <span class="ruby-value str">&quot;\n&quot;</span>
173:       <span class="ruby-keyword kw">end</span>
174:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
175:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">open_socket</span>(<span class="ruby-identifier">host</span>, <span class="ruby-identifier">port</span>)
176:         <span class="ruby-identifier">voidresp</span>
177:       <span class="ruby-keyword kw">end</span>
178:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004349" class="method">
  <div id="M004349_title" class="title">
    <b>delete</b>(filename)
  </div>
  <div class="description">
  <p>
Deletes a file on the server.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004349_source')" id="l_M004349_source">show source</a> ]</p>
  <div id="M004349_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 655</span>
655:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>(<span class="ruby-identifier">filename</span>)
656:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;DELE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
657:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;250&quot;</span>
658:         <span class="ruby-keyword kw">return</span>
659:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?5</span>
660:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPPermError</span>, <span class="ruby-identifier">resp</span>
661:       <span class="ruby-keyword kw">else</span>
662:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
663:       <span class="ruby-keyword kw">end</span>
664:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004347" class="method">
  <div id="M004347_title" class="title">
    <b>dir</b>(*args)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004345&name=list">list</a>
</p>
  </div>
</div>
<div id="M004339" class="method">
  <div id="M004339_title" class="title">
    <b>get</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE) {|data| ...}
  </div>
  <div class="description">
  <p>
Retrieves <tt>remotefile</tt> in whatever mode the session is set (text or
binary). See <a
href="index.html?a=M004338&name=gettextfile">gettextfile</a> and <a
href="index.html?a=M004337&name=getbinaryfile">getbinaryfile</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004339_source')" id="l_M004339_source">show source</a> ]</p>
  <div id="M004339_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 535</span>
535:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
536:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
537:       <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@binary</span>
538:         <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
539:       <span class="ruby-keyword kw">else</span>
540:         <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
541:       <span class="ruby-keyword kw">end</span>
542:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004337" class="method">
  <div id="M004337_title" class="title">
    <b>getbinaryfile</b>(remotefile, localfile = File.basename(remotefile), blocksize = DEFAULT_BLOCKSIZE) {|data| ...}
  </div>
  <div class="description">
  <p>
Retrieves <tt>remotefile</tt> in binary mode, storing the result in
<tt>localfile</tt>. If a block is supplied, it is passed the retrieved data
in <tt>blocksize</tt> chunks.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004337_source')" id="l_M004337_source">show source</a> ]</p>
  <div id="M004337_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 494</span>
494:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">getbinaryfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>),
495:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
496:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
497:         <span class="ruby-identifier">rest_offset</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">size?</span>(<span class="ruby-identifier">localfile</span>)
498:         <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;a&quot;</span>)
499:       <span class="ruby-keyword kw">else</span>
500:         <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
501:         <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
502:       <span class="ruby-keyword kw">end</span>
503:       <span class="ruby-keyword kw">begin</span>
504:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span>
505:         <span class="ruby-identifier">retrbinary</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span>
506:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">data</span>)
507:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
508:         <span class="ruby-keyword kw">end</span>
509:       <span class="ruby-keyword kw">ensure</span>
510:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
511:       <span class="ruby-keyword kw">end</span>
512:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004356" class="method">
  <div id="M004356_title" class="title">
    <b>getdir</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004355&name=pwd">pwd</a>
</p>
  </div>
</div>
<div id="M004338" class="method">
  <div id="M004338_title" class="title">
    <b>gettextfile</b>(remotefile, localfile = File.basename(remotefile)) {|line| ...}
  </div>
  <div class="description">
  <p>
Retrieves <tt>remotefile</tt> in ASCII (text) mode, storing the result in
<tt>localfile</tt>. If a block is supplied, it is passed the retrieved data
one line at a time.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004338_source')" id="l_M004338_source">show source</a> ]</p>
  <div id="M004338_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 519</span>
519:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gettextfile</span>(<span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">localfile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">remotefile</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
520:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-value str">&quot;w&quot;</span>)
521:       <span class="ruby-keyword kw">begin</span>
522:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-value str">&quot;RETR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
523:           <span class="ruby-identifier">f</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-identifier">line</span>)
524:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
525:         <span class="ruby-keyword kw">end</span>
526:       <span class="ruby-keyword kw">ensure</span>
527:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
528:       <span class="ruby-keyword kw">end</span>
529:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004361" class="method">
  <div id="M004361_title" class="title">
    <b>help</b>(arg = nil)
  </div>
  <div class="description">
  <p>
Issues the HELP command.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004361_source')" id="l_M004361_source">show source</a> ]</p>
  <div id="M004361_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 780</span>
780:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">help</span>(<span class="ruby-identifier">arg</span> = <span class="ruby-keyword kw">nil</span>)
781:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;HELP&quot;</span>
782:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>
783:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
784:       <span class="ruby-keyword kw">end</span>
785:       <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
786:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004345" class="method">
  <div id="M004345_title" class="title">
    <b>list</b>(*args) {|line| ...}
  </div>
  <div class="description">
  <p>
Returns an array of file information in the directory (the output is like
`ls -l`). If a block is given, it iterates through the listing.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004346&name=ls">ls</a>
  <a href="index.html?a=M004347&name=dir">dir</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004345_source')" id="l_M004345_source">show source</a> ]</p>
  <div id="M004345_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 623</span>
623:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">list</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
624:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;LIST&quot;</span>
625:       <span class="ruby-identifier">args</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>
626:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
627:       <span class="ruby-keyword kw">end</span>
628:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
629:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
630:       <span class="ruby-keyword kw">else</span>
631:         <span class="ruby-identifier">lines</span> = []
632:         <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
633:           <span class="ruby-identifier">lines</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">line</span>
634:         <span class="ruby-keyword kw">end</span>
635:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">lines</span>
636:       <span class="ruby-keyword kw">end</span>
637:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004332" class="method">
  <div id="M004332_title" class="title">
    <b>login</b>(user = &quot;anonymous&quot;, passwd = nil, acct = nil)
  </div>
  <div class="description">
  <p>
Logs in to the remote host. The session must have been previously
connected. If <tt>user</tt> is the string &quot;anonymous&quot; and the
<tt>password</tt> is <tt>nil</tt>, a password of <tt>user@host</tt> is
synthesized. If the <tt>acct</tt> parameter is not <tt>nil</tt>, an <a
href="index.html?a=C00000841&name=FTP">FTP</a> ACCT command is sent
following the successful login. Raises an exception on error (typically
<tt>Net::FTPPermError</tt>).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004332_source')" id="l_M004332_source">show source</a> ]</p>
  <div id="M004332_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 375</span>
375:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">login</span>(<span class="ruby-identifier">user</span> = <span class="ruby-value str">&quot;anonymous&quot;</span>, <span class="ruby-identifier">passwd</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">acct</span> = <span class="ruby-keyword kw">nil</span>)
376:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">user</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;anonymous&quot;</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">passwd</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
377:         <span class="ruby-identifier">passwd</span> = <span class="ruby-identifier">getaddress</span>
378:       <span class="ruby-keyword kw">end</span>
379:       
380:       <span class="ruby-identifier">resp</span> = <span class="ruby-value str">&quot;&quot;</span>
381:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
382:         <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'USER '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">user</span>)
383:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
384:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'PASS '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">passwd</span>)
385:         <span class="ruby-keyword kw">end</span>
386:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?3</span>
387:           <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">'ACCT '</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">acct</span>)
388:         <span class="ruby-keyword kw">end</span>
389:       <span class="ruby-keyword kw">end</span>
390:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?2</span>
391:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
392:       <span class="ruby-keyword kw">end</span>
393:       <span class="ruby-ivar">@welcome</span> = <span class="ruby-identifier">resp</span>
394:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004346" class="method">
  <div id="M004346_title" class="title">
    <b>ls</b>(*args)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M004345&name=list">list</a>
</p>
  </div>
</div>
<div id="M004360" class="method">
  <div id="M004360_title" class="title">
    <b>mdtm</b>(filename)
  </div>
  <div class="description">
  <p>
Issues the MDTM command. TODO: more info.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004360_source')" id="l_M004360_source">show source</a> ]</p>
  <div id="M004360_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 770</span>
770:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
771:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MDTM &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
772:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;213&quot;</span>
773:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>
774:       <span class="ruby-keyword kw">end</span>
775:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004353" class="method">
  <div id="M004353_title" class="title">
    <b>mkdir</b>(dirname)
  </div>
  <div class="description">
  <p>
Creates a remote directory.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004353_source')" id="l_M004353_source">show source</a> ]</p>
  <div id="M004353_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 711</span>
711:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mkdir</span>(<span class="ruby-identifier">dirname</span>)
712:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;MKD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
713:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
714:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004352" class="method">
  <div id="M004352_title" class="title">
    <b>mtime</b>(filename, local = false)
  </div>
  <div class="description">
  <p>
Returns the last modification time of the (remote) file. If <tt>local</tt>
is <tt>true</tt>, it is returned as a local time, otherwise it&#8217;s a
UTC time.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004352_source')" id="l_M004352_source">show source</a> ]</p>
  <div id="M004352_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 702</span>
702:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mtime</span>(<span class="ruby-identifier">filename</span>, <span class="ruby-identifier">local</span> = <span class="ruby-keyword kw">false</span>)
703:       <span class="ruby-identifier">str</span> = <span class="ruby-identifier">mdtm</span>(<span class="ruby-identifier">filename</span>)
704:       <span class="ruby-identifier">ary</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-constant">MDTM_REGEXP</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_i</span>}
705:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">local</span> <span class="ruby-operator">?</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>) <span class="ruby-operator">:</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">gm</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">ary</span>)
706:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004344" class="method">
  <div id="M004344_title" class="title">
    <b>nlst</b>(dir = nil)
  </div>
  <div class="description">
  <p>
Returns an array of filenames in the remote directory.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004344_source')" id="l_M004344_source">show source</a> ]</p>
  <div id="M004344_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 607</span>
607:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nlst</span>(<span class="ruby-identifier">dir</span> = <span class="ruby-keyword kw">nil</span>)
608:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;NLST&quot;</span>
609:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">dir</span>
610:         <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">cmd</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot; &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dir</span>
611:       <span class="ruby-keyword kw">end</span>
612:       <span class="ruby-identifier">files</span> = []
613:       <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
614:         <span class="ruby-identifier">files</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">line</span>)
615:       <span class="ruby-keyword kw">end</span>
616:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">files</span>
617:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004363" class="method">
  <div id="M004363_title" class="title">
    <b>noop</b>()
  </div>
  <div class="description">
  <p>
Issues a NOOP command.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004363_source')" id="l_M004363_source">show source</a> ]</p>
  <div id="M004363_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 798</span>
798:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">noop</span>
799:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;NOOP&quot;</span>)
800:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004342" class="method">
  <div id="M004342_title" class="title">
    <b>put</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE, &amp;block)
  </div>
  <div class="description">
  <p>
Transfers <tt>localfile</tt> to the server in whatever mode the session is
set (text or binary). See <a
href="index.html?a=M004341&name=puttextfile">puttextfile</a> and <a
href="index.html?a=M004340&name=putbinaryfile">putbinaryfile</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004342_source')" id="l_M004342_source">show source</a> ]</p>
  <div id="M004342_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 587</span>
587:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">put</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
588:             <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
589:       <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@binary</span>
590:         <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
591:       <span class="ruby-keyword kw">else</span>
592:         <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
593:       <span class="ruby-keyword kw">end</span>
594:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004340" class="method">
  <div id="M004340_title" class="title">
    <b>putbinaryfile</b>(localfile, remotefile = File.basename(localfile), blocksize = DEFAULT_BLOCKSIZE) {|data| ...}
  </div>
  <div class="description">
  <p>
Transfers <tt>localfile</tt> to the server in binary mode, storing the
result in <tt>remotefile</tt>. If a block is supplied, calls it, passing in
the transmitted data in <tt>blocksize</tt> chunks.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004340_source')" id="l_M004340_source">show source</a> ]</p>
  <div id="M004340_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 549</span>
549:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">putbinaryfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>),
550:                       <span class="ruby-identifier">blocksize</span> = <span class="ruby-constant">DEFAULT_BLOCKSIZE</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
551:       <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@resume</span>
552:         <span class="ruby-keyword kw">begin</span>
553:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-identifier">size</span>(<span class="ruby-identifier">remotefile</span>)
554:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Net</span><span class="ruby-operator">::</span><span class="ruby-constant">FTPPermError</span>
555:           <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
556:         <span class="ruby-keyword kw">end</span>
557:       <span class="ruby-keyword kw">else</span>
558:         <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>
559:       <span class="ruby-keyword kw">end</span>
560:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
561:       <span class="ruby-keyword kw">begin</span>
562:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">binmode</span>
563:         <span class="ruby-identifier">storbinary</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
564:       <span class="ruby-keyword kw">ensure</span>
565:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
566:       <span class="ruby-keyword kw">end</span>
567:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004341" class="method">
  <div id="M004341_title" class="title">
    <b>puttextfile</b>(localfile, remotefile = File.basename(localfile)) {|line| ...}
  </div>
  <div class="description">
  <p>
Transfers <tt>localfile</tt> to the server in ASCII (text) mode, storing
the result in <tt>remotefile</tt>. If callback or an associated block is
supplied, calls it, passing in the transmitted data one line at a time.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004341_source')" id="l_M004341_source">show source</a> ]</p>
  <div id="M004341_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 574</span>
574:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">puttextfile</span>(<span class="ruby-identifier">localfile</span>, <span class="ruby-identifier">remotefile</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">localfile</span>), <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
575:       <span class="ruby-identifier">f</span> = <span class="ruby-identifier">open</span>(<span class="ruby-identifier">localfile</span>)
576:       <span class="ruby-keyword kw">begin</span>
577:         <span class="ruby-identifier">storlines</span>(<span class="ruby-value str">&quot;STOR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">remotefile</span>, <span class="ruby-identifier">f</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
578:       <span class="ruby-keyword kw">ensure</span>
579:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">close</span>
580:       <span class="ruby-keyword kw">end</span>
581:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004355" class="method">
  <div id="M004355_title" class="title">
    <b>pwd</b>()
  </div>
  <div class="description">
  <p>
Returns the current remote directory.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M004356&name=getdir">getdir</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004355_source')" id="l_M004355_source">show source</a> ]</p>
  <div id="M004355_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 726</span>
726:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pwd</span>
727:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;PWD&quot;</span>)
728:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">parse257</span>(<span class="ruby-identifier">resp</span>)
729:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004362" class="method">
  <div id="M004362_title" class="title">
    <b>quit</b>()
  </div>
  <div class="description">
  <p>
Exits the <a href="index.html?a=C00000841&name=FTP">FTP</a> session.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004362_source')" id="l_M004362_source">show source</a> ]</p>
  <div id="M004362_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 791</span>
791:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quit</span>
792:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;QUIT&quot;</span>)
793:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004348" class="method">
  <div id="M004348_title" class="title">
    <b>rename</b>(fromname, toname)
  </div>
  <div class="description">
  <p>
Renames a file on the server.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004348_source')" id="l_M004348_source">show source</a> ]</p>
  <div id="M004348_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 644</span>
644:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">fromname</span>, <span class="ruby-identifier">toname</span>)
645:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;RNFR &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">fromname</span>)
646:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">!=</span> <span class="ruby-value">?3</span>
647:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
648:       <span class="ruby-keyword kw">end</span>
649:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RNTO &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">toname</span>)
650:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004333" class="method">
  <div id="M004333_title" class="title">
    <b>retrbinary</b>(cmd, blocksize, rest_offset = nil) {|data| ...}
  </div>
  <div class="description">
  <p>
Puts the connection into binary (image) mode, issues the given command, and
fetches the data returned, passing it to the associated block in chunks of
<tt>blocksize</tt> characters. Note that <tt>cmd</tt> is a server command
(such as &quot;RETR myfile&quot;).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004333_source')" id="l_M004333_source">show source</a> ]</p>
  <div id="M004333_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 402</span>
402:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>) <span class="ruby-comment cmt"># :yield: data</span>
403:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
404:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE I&quot;</span>)
405:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span>)
406:         <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
407:           <span class="ruby-identifier">data</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
408:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">data</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
409:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">data</span>)
410:         <span class="ruby-keyword kw">end</span>
411:         <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
412:         <span class="ruby-identifier">voidresp</span>
413:       <span class="ruby-keyword kw">end</span>
414:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004334" class="method">
  <div id="M004334_title" class="title">
    <b>retrlines</b>(cmd) {|line| ...}
  </div>
  <div class="description">
  <p>
Puts the connection into ASCII (text) mode, issues the given command, and
passes the resulting data, one line at a time, to the associated block. If
no block is given, prints the lines. Note that <tt>cmd</tt> is a server
command (such as &quot;RETR myfile&quot;).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004334_source')" id="l_M004334_source">show source</a> ]</p>
  <div id="M004334_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 422</span>
422:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">retrlines</span>(<span class="ruby-identifier">cmd</span>) <span class="ruby-comment cmt"># :yield: line</span>
423:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
424:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE A&quot;</span>)
425:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
426:         <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
427:           <span class="ruby-identifier">line</span> = <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">gets</span>
428:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
429:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">-2</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">==</span> <span class="ruby-constant">CRLF</span>
430:             <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span> <span class="ruby-operator">..</span> <span class="ruby-value">-3</span>]
431:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">line</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?\n</span>
432:             <span class="ruby-identifier">line</span> = <span class="ruby-identifier">line</span>[<span class="ruby-value">0</span> <span class="ruby-operator">..</span> <span class="ruby-value">-2</span>]
433:           <span class="ruby-keyword kw">end</span>
434:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>)
435:         <span class="ruby-keyword kw">end</span>
436:         <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
437:         <span class="ruby-identifier">voidresp</span>
438:       <span class="ruby-keyword kw">end</span>
439:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004326" class="method">
  <div id="M004326_title" class="title">
    <b>return_code</b>()
  </div>
  <div class="description">
  <p>
Obsolete
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004326_source')" id="l_M004326_source">show source</a> ]</p>
  <div id="M004326_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 144</span>
144:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">return_code</span>
145:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-value str">&quot;warning: Net::FTP#return_code is obsolete and do nothing&quot;</span>)
146:       <span class="ruby-keyword kw">return</span> <span class="ruby-value str">&quot;\n&quot;</span>
147:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004327" class="method">
  <div id="M004327_title" class="title">
    <b>return_code=</b>(s)
  </div>
  <div class="description">
  <p>
Obsolete
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004327_source')" id="l_M004327_source">show source</a> ]</p>
  <div id="M004327_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 150</span>
150:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">return_code=</span>(<span class="ruby-identifier">s</span>)
151:       <span class="ruby-identifier">$stderr</span>.<span class="ruby-identifier">puts</span>(<span class="ruby-value str">&quot;warning: Net::FTP#return_code= is obsolete and do nothing&quot;</span>)
152:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004354" class="method">
  <div id="M004354_title" class="title">
    <b>rmdir</b>(dirname)
  </div>
  <div class="description">
  <p>
Removes a remote directory.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004354_source')" id="l_M004354_source">show source</a> ]</p>
  <div id="M004354_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 719</span>
719:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rmdir</span>(<span class="ruby-identifier">dirname</span>)
720:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;RMD &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">dirname</span>)
721:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004330" class="method">
  <div id="M004330_title" class="title">
    <b>sendcmd</b>(cmd)
  </div>
  <div class="description">
  <p>
Sends a command and returns the response.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004330_source')" id="l_M004330_source">show source</a> ]</p>
  <div id="M004330_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 261</span>
261:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sendcmd</span>(<span class="ruby-identifier">cmd</span>)
262:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
263:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
264:         <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
265:       <span class="ruby-keyword kw">end</span>
266:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004329" class="method">
  <div id="M004329_title" class="title">
    <b>set_socket</b>(sock, get_greeting = true)
  </div>
  <div class="description">
  <p>
WRITEME or make private
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004329_source')" id="l_M004329_source">show source</a> ]</p>
  <div id="M004329_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 183</span>
183:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">set_socket</span>(<span class="ruby-identifier">sock</span>, <span class="ruby-identifier">get_greeting</span> = <span class="ruby-keyword kw">true</span>)
184:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
185:         <span class="ruby-ivar">@sock</span> = <span class="ruby-identifier">sock</span>
186:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">get_greeting</span>
187:           <span class="ruby-identifier">voidresp</span>
188:         <span class="ruby-keyword kw">end</span>
189:       <span class="ruby-keyword kw">end</span>
190:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004364" class="method">
  <div id="M004364_title" class="title">
    <b>site</b>(arg)
  </div>
  <div class="description">
  <p>
Issues a SITE command.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004364_source')" id="l_M004364_source">show source</a> ]</p>
  <div id="M004364_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 805</span>
805:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">site</span>(<span class="ruby-identifier">arg</span>)
806:       <span class="ruby-identifier">cmd</span> = <span class="ruby-value str">&quot;SITE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">arg</span>
807:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
808:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004351" class="method">
  <div id="M004351_title" class="title">
    <b>size</b>(filename)
  </div>
  <div class="description">
  <p>
Returns the size of the given (remote) filename.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004351_source')" id="l_M004351_source">show source</a> ]</p>
  <div id="M004351_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 687</span>
687:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">size</span>(<span class="ruby-identifier">filename</span>)
688:       <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE I&quot;</span>)
689:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SIZE &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">filename</span>)
690:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;213&quot;</span> 
691:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
692:       <span class="ruby-keyword kw">end</span>
693:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">3</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">strip</span>.<span class="ruby-identifier">to_i</span>
694:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004359" class="method">
  <div id="M004359_title" class="title">
    <b>status</b>()
  </div>
  <div class="description">
  <p>
Returns the status (STAT command).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004359_source')" id="l_M004359_source">show source</a> ]</p>
  <div id="M004359_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 760</span>
760:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">status</span>
761:       <span class="ruby-identifier">line</span> = <span class="ruby-value str">&quot;STAT&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
762:       <span class="ruby-identifier">print</span> <span class="ruby-value str">&quot;put: STAT\n&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@debug_mode</span>
763:       <span class="ruby-ivar">@sock</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">line</span>, <span class="ruby-constant">Socket</span><span class="ruby-operator">::</span><span class="ruby-constant">MSG_OOB</span>)
764:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">getresp</span>
765:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004335" class="method">
  <div id="M004335_title" class="title">
    <b>storbinary</b>(cmd, file, blocksize, rest_offset = nil) {|data| ...}
  </div>
  <div class="description">
  <p>
Puts the connection into binary (image) mode, issues the given server-side
command (such as &quot;STOR myfile&quot;), and sends the contents of the
file named <tt>file</tt> to the server. If the optional block is given, it
also passes it the data, in chunks of <tt>blocksize</tt> characters.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004335_source')" id="l_M004335_source">show source</a> ]</p>
  <div id="M004335_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 447</span>
447:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storbinary</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-identifier">blocksize</span>, <span class="ruby-identifier">rest_offset</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: data</span>
448:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">rest_offset</span>
449:         <span class="ruby-identifier">file</span>.<span class="ruby-identifier">seek</span>(<span class="ruby-identifier">rest_offset</span>, <span class="ruby-constant">IO</span><span class="ruby-operator">::</span><span class="ruby-constant">SEEK_SET</span>)
450:       <span class="ruby-keyword kw">end</span>
451:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
452:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE I&quot;</span>)
453:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">rest_offset</span>)
454:         <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
455:           <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">blocksize</span>)
456:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
457:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
458:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
459:         <span class="ruby-keyword kw">end</span>
460:         <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
461:         <span class="ruby-identifier">voidresp</span>
462:       <span class="ruby-keyword kw">end</span>
463:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004336" class="method">
  <div id="M004336_title" class="title">
    <b>storlines</b>(cmd, file) {|line| ...}
  </div>
  <div class="description">
  <p>
Puts the connection into ASCII (text) mode, issues the given server-side
command (such as &quot;STOR myfile&quot;), and sends the contents of the
file named <tt>file</tt> to the server, one line at a time. If the optional
block is given, it also passes it the lines.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004336_source')" id="l_M004336_source">show source</a> ]</p>
  <div id="M004336_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 471</span>
471:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">storlines</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">file</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: line</span>
472:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
473:         <span class="ruby-identifier">voidcmd</span>(<span class="ruby-value str">&quot;TYPE A&quot;</span>)
474:         <span class="ruby-identifier">conn</span> = <span class="ruby-identifier">transfercmd</span>(<span class="ruby-identifier">cmd</span>)
475:         <span class="ruby-identifier">loop</span> <span class="ruby-keyword kw">do</span>
476:           <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">file</span>.<span class="ruby-identifier">gets</span>
477:           <span class="ruby-keyword kw">break</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">nil</span>
478:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">buf</span>[<span class="ruby-value">-2</span>, <span class="ruby-value">2</span>] <span class="ruby-operator">!=</span> <span class="ruby-constant">CRLF</span>
479:             <span class="ruby-identifier">buf</span> = <span class="ruby-identifier">buf</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-operator">+</span> <span class="ruby-constant">CRLF</span>
480:           <span class="ruby-keyword kw">end</span>
481:           <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">buf</span>)
482:           <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">buf</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block</span>
483:         <span class="ruby-keyword kw">end</span>
484:         <span class="ruby-identifier">conn</span>.<span class="ruby-identifier">close</span>
485:         <span class="ruby-identifier">voidresp</span>
486:       <span class="ruby-keyword kw">end</span>
487:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004357" class="method">
  <div id="M004357_title" class="title">
    <b>system</b>()
  </div>
  <div class="description">
  <p>
Returns system information.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004357_source')" id="l_M004357_source">show source</a> ]</p>
  <div id="M004357_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 735</span>
735:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">system</span>
736:       <span class="ruby-identifier">resp</span> = <span class="ruby-identifier">sendcmd</span>(<span class="ruby-value str">&quot;SYST&quot;</span>)
737:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">0</span>, <span class="ruby-value">3</span>] <span class="ruby-operator">!=</span> <span class="ruby-value str">&quot;215&quot;</span>
738:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">FTPReplyError</span>, <span class="ruby-identifier">resp</span>
739:       <span class="ruby-keyword kw">end</span>
740:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">resp</span>[<span class="ruby-value">4</span> <span class="ruby-operator">..</span> <span class="ruby-value">-1</span>]
741:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004331" class="method">
  <div id="M004331_title" class="title">
    <b>voidcmd</b>(cmd)
  </div>
  <div class="description">
  <p>
Sends a command and expect a response beginning with &#8216;2&#8217;.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004331_source')" id="l_M004331_source">show source</a> ]</p>
  <div id="M004331_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/net/ftp.rb, line 271</span>
271:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">voidcmd</span>(<span class="ruby-identifier">cmd</span>)
272:       <span class="ruby-identifier">synchronize</span> <span class="ruby-keyword kw">do</span>
273:         <span class="ruby-identifier">putline</span>(<span class="ruby-identifier">cmd</span>)
274:         <span class="ruby-identifier">voidresp</span>
275:       <span class="ruby-keyword kw">end</span>
276:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>