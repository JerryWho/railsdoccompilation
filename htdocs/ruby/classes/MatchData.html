  <div id="C00000118">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />MatchData<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/re_c.html');">ruby-1.8.7-p22/re.c</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/pp_rb.html');">ruby-1.8.7-p22/lib/pp.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<tt><a href="index.html?a=C00000118&name=MatchData">MatchData</a></tt> is
the type of the special variable <tt>$~</tt>, and is the type of the object
returned by <tt><a
href="index.html?a=M001219&name=Regexp#match">Regexp#match</a></tt> and
<tt><a
href="index.html?a=M001211&name=Regexp#last_match">Regexp#last_match</a></tt>.
It encapsulates all the results of a pattern match, results normally
accessed through the special variables <tt>$&amp;</tt>, <tt>$&#8217;</tt>,
<tt>$`</tt>, <tt>$1</tt>, <tt>$2</tt>, and so on. <tt>Matchdata</tt> is
also known as <tt>MatchingData</tt>.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001295&name=[]" >[]</a></li>
  <li><a href="index.html?a=M001292&name=begin" >begin</a></li>
  <li><a href="index.html?a=M001296&name=captures" >captures</a></li>
  <li><a href="index.html?a=M001293&name=end" >end</a></li>
  <li><a href="index.html?a=M001302&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M001290&name=length" >length</a></li>
  <li><a href="index.html?a=M001291&name=offset" >offset</a></li>
  <li><a href="index.html?a=M001300&name=post_match" >post_match</a></li>
  <li><a href="index.html?a=M001299&name=pre_match" >pre_match</a></li>
  <li><a href="index.html?a=M001304&name=pretty_print" >pretty_print</a></li>
  <li><a href="index.html?a=M001298&name=select" >select</a></li>
  <li><a href="index.html?a=M001289&name=size" >size</a></li>
  <li><a href="index.html?a=M001303&name=string" >string</a></li>
  <li><a href="index.html?a=M001294&name=to_a" >to_a</a></li>
  <li><a href="index.html?a=M001301&name=to_s" >to_s</a></li>
  <li><a href="index.html?a=M001297&name=values_at" >values_at</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M001295" class="method">
  <div id="M001295_title" class="title">
    <b>mtch[i]               => obj<br />
mtch[start, length]   => array<br />
mtch[range]           => array<br />
</b>
  </div>
  <div class="description">
  <p>
Match Reference&#8212;<tt><a
href="index.html?a=C00000118&name=MatchData">MatchData</a></tt> acts as an
array, and may be accessed using the normal array indexing techniques.
<em>mtch</em>[0] is equivalent to the special variable <tt>$&amp;</tt>, and
returns the entire matched string. <em>mtch</em>[1], <em>mtch</em>[2], and
so on return the values of the matched backreferences (portions of the
pattern between parentheses).
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m[0]       #=&gt; &quot;HX1138&quot;
   m[1, 2]    #=&gt; [&quot;H&quot;, &quot;X&quot;]
   m[1..3]    #=&gt; [&quot;H&quot;, &quot;X&quot;, &quot;113&quot;]
   m[-3, 2]   #=&gt; [&quot;X&quot;, &quot;113&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001295_source')" id="l_M001295_source">show source</a> ]</p>
  <div id="M001295_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch[i]               =&gt; obj
 *     mtch[start, length]   =&gt; array
 *     mtch[range]           =&gt; array
 *  
 *  Match Reference---&lt;code&gt;MatchData&lt;/code&gt; acts as an array, and may be
 *  accessed using the normal array indexing techniques.  &lt;i&gt;mtch&lt;/i&gt;[0] is
 *  equivalent to the special variable &lt;code&gt;$&amp;&lt;/code&gt;, and returns the entire
 *  matched string.  &lt;i&gt;mtch&lt;/i&gt;[1], &lt;i&gt;mtch&lt;/i&gt;[2], and so on return the values
 *  of the matched backreferences (portions of the pattern between parentheses).
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m[0]       #=&gt; &quot;HX1138&quot;
 *     m[1, 2]    #=&gt; [&quot;H&quot;, &quot;X&quot;]
 *     m[1..3]    #=&gt; [&quot;H&quot;, &quot;X&quot;, &quot;113&quot;]
 *     m[-3, 2]   #=&gt; [&quot;X&quot;, &quot;113&quot;]
 */

static VALUE
match_aref(argc, argv, match)
    int argc;
    VALUE *argv;
    VALUE match;
{
    VALUE idx, rest;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;idx, &amp;rest);

    if (!NIL_P(rest) || !FIXNUM_P(idx) || FIX2INT(idx) &lt; 0) {
        return rb_ary_aref(argc, argv, match_to_a(match));
    }
    return rb_reg_nth_match(FIX2INT(idx), match);
}
</pre>
  </div>
</div>
</div>
<div id="M001292" class="method">
  <div id="M001292_title" class="title">
    <b>mtch.begin(n)   => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the offset of the start of the <em>n</em>th element of the match
array in the string.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.begin(0)   #=&gt; 1
   m.begin(2)   #=&gt; 2
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001292_source')" id="l_M001292_source">show source</a> ]</p>
  <div id="M001292_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.begin(n)   =&gt; integer
 *  
 *  Returns the offset of the start of the &lt;em&gt;n&lt;/em&gt;th element of the match
 *  array in the string.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.begin(0)   #=&gt; 1
 *     m.begin(2)   #=&gt; 2
 */

static VALUE
match_begin(match, n)
    VALUE match, n;
{
    int i = NUM2INT(n);

    if (i &lt; 0 || RMATCH(match)-&gt;regs-&gt;num_regs &lt;= i)
        rb_raise(rb_eIndexError, &quot;index %d out of matches&quot;, i);

    if (RMATCH(match)-&gt;regs-&gt;beg[i] &lt; 0)
        return Qnil;

    return INT2FIX(RMATCH(match)-&gt;regs-&gt;beg[i]);
}
</pre>
  </div>
</div>
</div>
<div id="M001296" class="method">
  <div id="M001296_title" class="title">
    <b>mtch.captures   => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the array of captures; equivalent to <tt><a href="http://1..-1"
target="_blank">mtch.to_a</a></tt>.
</p>
<pre>
   f1,f2,f3,f4 = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;).captures
   f1    #=&gt; &quot;H&quot;
   f2    #=&gt; &quot;X&quot;
   f3    #=&gt; &quot;113&quot;
   f4    #=&gt; &quot;8&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001296_source')" id="l_M001296_source">show source</a> ]</p>
  <div id="M001296_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.captures   =&gt; array
 *
 *  Returns the array of captures; equivalent to &lt;code&gt;mtch.to_a[1..-1]&lt;/code&gt;.
 *
 *     f1,f2,f3,f4 = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;).captures
 *     f1    #=&gt; &quot;H&quot;
 *     f2    #=&gt; &quot;X&quot;
 *     f3    #=&gt; &quot;113&quot;
 *     f4    #=&gt; &quot;8&quot;
 */
static VALUE
match_captures(match)
    VALUE match;
{
    return match_array(match, 1);
}
</pre>
  </div>
</div>
</div>
<div id="M001293" class="method">
  <div id="M001293_title" class="title">
    <b>mtch.end(n)   => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the offset of the character immediately following the end of the
<em>n</em>th element of the match array in the string.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.end(0)   #=&gt; 7
   m.end(2)   #=&gt; 3
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001293_source')" id="l_M001293_source">show source</a> ]</p>
  <div id="M001293_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.end(n)   =&gt; integer
 *  
 *  Returns the offset of the character immediately following the end of the
 *  &lt;em&gt;n&lt;/em&gt;th element of the match array in the string.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.end(0)   #=&gt; 7
 *     m.end(2)   #=&gt; 3
 */

static VALUE
match_end(match, n)
    VALUE match, n;
{
    int i = NUM2INT(n);

    if (i &lt; 0 || RMATCH(match)-&gt;regs-&gt;num_regs &lt;= i)
        rb_raise(rb_eIndexError, &quot;index %d out of matches&quot;, i);

    if (RMATCH(match)-&gt;regs-&gt;beg[i] &lt; 0)
        return Qnil;

    return INT2FIX(RMATCH(match)-&gt;regs-&gt;end[i]);
}
</pre>
  </div>
</div>
</div>
<div id="M001302" class="method">
  <div id="M001302_title" class="title">
    <b>mtch.inspect   => str<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a printable version of <em>mtch</em>.
</p>
<pre>
    puts /.$/.match(&quot;foo&quot;).inspect
    #=&gt; #&lt;MatchData &quot;o&quot;&gt;

    puts /(.)(.)(.)/.match(&quot;foo&quot;).inspect
    #=&gt; #&lt;MatchData &quot;foo&quot; 1:&quot;f&quot; 2:&quot;o&quot; 3:&quot;o&quot;&gt;

    puts /(.)(.)?(.)/.match(&quot;fo&quot;).inspect
    #=&gt; #&lt;MatchData &quot;fo&quot; 1:&quot;f&quot; 2:nil 3:&quot;o&quot;&gt;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001302_source')" id="l_M001302_source">show source</a> ]</p>
  <div id="M001302_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    mtch.inspect   =&gt; str
 *
 * Returns a printable version of &lt;i&gt;mtch&lt;/i&gt;.
 *
 *     puts /.$/.match(&quot;foo&quot;).inspect
 *     #=&gt; #&lt;MatchData &quot;o&quot;&gt;
 *
 *     puts /(.)(.)(.)/.match(&quot;foo&quot;).inspect
 *     #=&gt; #&lt;MatchData &quot;foo&quot; 1:&quot;f&quot; 2:&quot;o&quot; 3:&quot;o&quot;&gt;
 *
 *     puts /(.)(.)?(.)/.match(&quot;fo&quot;).inspect
 *     #=&gt; #&lt;MatchData &quot;fo&quot; 1:&quot;f&quot; 2:nil 3:&quot;o&quot;&gt;
 *
 */

static VALUE
match_inspect(VALUE match)
{
    const char *cname = rb_obj_classname(match);
    VALUE str;
    int i;
    struct re_registers *regs = RMATCH(match)-&gt;regs;
    int num_regs = regs-&gt;num_regs;

    str = rb_str_buf_new2(&quot;#&lt;&quot;);
    rb_str_buf_cat2(str, cname);

    for (i = 0; i &lt; num_regs; i++) {
        VALUE v;
        rb_str_buf_cat2(str, &quot; &quot;);
        if (0 &lt; i) {
            char buf[sizeof(i)*3+1];
            snprintf(buf, sizeof(buf), &quot;%d&quot;, i);
            rb_str_buf_cat2(str, buf);
            rb_str_buf_cat2(str, &quot;:&quot;);
        }
        v = rb_reg_nth_match(i, match);
        if (v == Qnil)
            rb_str_buf_cat2(str, &quot;nil&quot;);
        else
            rb_str_buf_append(str, rb_str_inspect(v));
    }
    rb_str_buf_cat2(str, &quot;&gt;&quot;);

    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M001290" class="method">
  <div id="M001290_title" class="title">
    <b>mtch.length   => integer<br />
mtch.size     => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the number of elements in the match array.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.length   #=&gt; 5
   m.size     #=&gt; 5
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001290_source')" id="l_M001290_source">show source</a> ]</p>
  <div id="M001290_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.length   =&gt; integer
 *     mtch.size     =&gt; integer
 *  
 *  Returns the number of elements in the match array.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.length   #=&gt; 5
 *     m.size     #=&gt; 5
 */

static VALUE
match_size(match)
    VALUE match;
{
    return INT2FIX(RMATCH(match)-&gt;regs-&gt;num_regs);
}
</pre>
  </div>
</div>
</div>
<div id="M001291" class="method">
  <div id="M001291_title" class="title">
    <b>mtch.offset(n)   => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a two-element array containing the beginning and ending offsets of
the <em>n</em>th match.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.offset(0)   #=&gt; [1, 7]
   m.offset(4)   #=&gt; [6, 7]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001291_source')" id="l_M001291_source">show source</a> ]</p>
  <div id="M001291_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.offset(n)   =&gt; array
 *  
 *  Returns a two-element array containing the beginning and ending offsets of
 *  the &lt;em&gt;n&lt;/em&gt;th match.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.offset(0)   #=&gt; [1, 7]
 *     m.offset(4)   #=&gt; [6, 7]
 */

static VALUE
match_offset(match, n)
    VALUE match, n;
{
    int i = NUM2INT(n);

    if (i &lt; 0 || RMATCH(match)-&gt;regs-&gt;num_regs &lt;= i)
        rb_raise(rb_eIndexError, &quot;index %d out of matches&quot;, i);

    if (RMATCH(match)-&gt;regs-&gt;beg[i] &lt; 0)
        return rb_assoc_new(Qnil, Qnil);

    return rb_assoc_new(INT2FIX(RMATCH(match)-&gt;regs-&gt;beg[i]),
                        INT2FIX(RMATCH(match)-&gt;regs-&gt;end[i]));
}
</pre>
  </div>
</div>
</div>
<div id="M001300" class="method">
  <div id="M001300_title" class="title">
    <b>mtch.post_match   => str<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the portion of the original string after the current match.
Equivalent to the special variable <tt>$&#8217;</tt>.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
   m.post_match   #=&gt; &quot;: The Movie&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001300_source')" id="l_M001300_source">show source</a> ]</p>
  <div id="M001300_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.post_match   =&gt; str
 *  
 *  Returns the portion of the original string after the current match.
 *  Equivalent to the special variable &lt;code&gt;$'&lt;/code&gt;.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
 *     m.post_match   #=&gt; &quot;: The Movie&quot;
 */

VALUE
rb_reg_match_post(match)
    VALUE match;
{
    VALUE str;
    long pos;

    if (NIL_P(match)) return Qnil;
    if (RMATCH(match)-&gt;BEG(0) == -1) return Qnil;
    str = RMATCH(match)-&gt;str;
    pos = RMATCH(match)-&gt;END(0);
    str = rb_str_substr(str, pos, RSTRING(str)-&gt;len - pos);
    if (OBJ_TAINTED(match)) OBJ_TAINT(str);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M001299" class="method">
  <div id="M001299_title" class="title">
    <b>mtch.pre_match   => str<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the portion of the original string before the current match.
Equivalent to the special variable <tt>$`</tt>.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.pre_match   #=&gt; &quot;T&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001299_source')" id="l_M001299_source">show source</a> ]</p>
  <div id="M001299_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.pre_match   =&gt; str
 *  
 *  Returns the portion of the original string before the current match.
 *  Equivalent to the special variable &lt;code&gt;$`&lt;/code&gt;.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.pre_match   #=&gt; &quot;T&quot;
 */

VALUE
rb_reg_match_pre(match)
    VALUE match;
{
    VALUE str;

    if (NIL_P(match)) return Qnil;
    if (RMATCH(match)-&gt;BEG(0) == -1) return Qnil;
    str = rb_str_substr(RMATCH(match)-&gt;str, 0, RMATCH(match)-&gt;BEG(0));
    if (OBJ_TAINTED(match)) OBJ_TAINT(str);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M001304" class="method">
  <div id="M001304_title" class="title">
    <b>pretty_print</b>(q)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001304_source')" id="l_M001304_source">show source</a> ]</p>
  <div id="M001304_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/pp.rb, line 443</span>
443:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pretty_print</span>(<span class="ruby-identifier">q</span>)
444:     <span class="ruby-identifier">q</span>.<span class="ruby-identifier">object_group</span>(<span class="ruby-keyword kw">self</span>) {
445:       <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span>
446:       <span class="ruby-identifier">q</span>.<span class="ruby-identifier">seplist</span>(<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">lambda</span> { <span class="ruby-identifier">q</span>.<span class="ruby-identifier">breakable</span> }) {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
447:         <span class="ruby-identifier">q</span>.<span class="ruby-identifier">pp</span> <span class="ruby-keyword kw">self</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>]
448:       }
449:     }
450:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001298" class="method">
  <div id="M001298_title" class="title">
    <b>mtch.select{|obj| block}   => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns an array containing match strings for which <em>block</em> gives
<tt>true</tt>. <a
href="index.html?a=M001298&name=MatchData#select">MatchData#select</a> will
be removed from Ruby 1.9.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
   p m.select{|x| /X/ =~ x}   #=&gt; [&quot;HX1138&quot;, &quot;X&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001298_source')" id="l_M001298_source">show source</a> ]</p>
  <div id="M001298_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.select{|obj| block}   =&gt; array
 *  
 *  Returns an array containing match strings for which &lt;em&gt;block&lt;/em&gt;
 *  gives &lt;code&gt;true&lt;/code&gt;.  MatchData#select will be removed from Ruby 1.9.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
 *     p m.select{|x| /X/ =~ x}   #=&gt; [&quot;HX1138&quot;, &quot;X&quot;]
 */

static VALUE
match_select(argc, argv, match)
    int argc;
    VALUE *argv;
    VALUE match;
{
    if (argc &gt; 0) {
        rb_raise(rb_eArgError, &quot;wrong number of arguments (%d for 0)&quot;, argc);
    }
    else {
        struct re_registers *regs = RMATCH(match)-&gt;regs;
        VALUE target = RMATCH(match)-&gt;str;
        VALUE result = rb_ary_new();
        int i;
        int taint = OBJ_TAINTED(match);

        for (i=0; i&lt;regs-&gt;num_regs; i++) {
            VALUE str = rb_str_substr(target, regs-&gt;beg[i], regs-&gt;end[i]-regs-&gt;beg[i]);
            if (taint) OBJ_TAINT(str);
            if (RTEST(rb_yield(str))) {
                rb_ary_push(result, str);
            }
        }
        return result;
    }
}
</pre>
  </div>
</div>
</div>
<div id="M001289" class="method">
  <div id="M001289_title" class="title">
    <b>mtch.length   => integer<br />
mtch.size     => integer<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the number of elements in the match array.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.length   #=&gt; 5
   m.size     #=&gt; 5
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001289_source')" id="l_M001289_source">show source</a> ]</p>
  <div id="M001289_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.length   =&gt; integer
 *     mtch.size     =&gt; integer
 *  
 *  Returns the number of elements in the match array.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.length   #=&gt; 5
 *     m.size     #=&gt; 5
 */

static VALUE
match_size(match)
    VALUE match;
{
    return INT2FIX(RMATCH(match)-&gt;regs-&gt;num_regs);
}
</pre>
  </div>
</div>
</div>
<div id="M001303" class="method">
  <div id="M001303_title" class="title">
    <b>mtch.string   => str<br />
</b>
  </div>
  <div class="description">
  <p>
Returns a frozen copy of the string passed in to <tt>match</tt>.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.string   #=&gt; &quot;THX1138.&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001303_source')" id="l_M001303_source">show source</a> ]</p>
  <div id="M001303_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.string   =&gt; str
 *  
 *  Returns a frozen copy of the string passed in to &lt;code&gt;match&lt;/code&gt;.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.string   #=&gt; &quot;THX1138.&quot;
 */

static VALUE
match_string(match)
    VALUE match;
{
    return RMATCH(match)-&gt;str;  /* str is frozen */
}
</pre>
  </div>
</div>
</div>
<div id="M001294" class="method">
  <div id="M001294_title" class="title">
    <b>mtch.to_a   => anArray<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the array of matches.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.to_a   #=&gt; [&quot;HX1138&quot;, &quot;H&quot;, &quot;X&quot;, &quot;113&quot;, &quot;8&quot;]
</pre>
<p>
Because <tt><a href="index.html?a=M001294&name=to_a">to_a</a></tt> is
called when expanding <tt>*</tt><em>variable</em>, there&#8217;s a useful
assignment shortcut for extracting matched fields. This is slightly slower
than accessing the fields directly (as an intermediate array is generated).
</p>
<pre>
   all,f1,f2,f3 = *(/(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;))
   all   #=&gt; &quot;HX1138&quot;
   f1    #=&gt; &quot;H&quot;
   f2    #=&gt; &quot;X&quot;
   f3    #=&gt; &quot;113&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001294_source')" id="l_M001294_source">show source</a> ]</p>
  <div id="M001294_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.to_a   =&gt; anArray
 *  
 *  Returns the array of matches.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.to_a   #=&gt; [&quot;HX1138&quot;, &quot;H&quot;, &quot;X&quot;, &quot;113&quot;, &quot;8&quot;]
 *     
 *  Because &lt;code&gt;to_a&lt;/code&gt; is called when expanding
 *  &lt;code&gt;*&lt;/code&gt;&lt;em&gt;variable&lt;/em&gt;, there's a useful assignment
 *  shortcut for extracting matched fields. This is slightly slower than
 *  accessing the fields directly (as an intermediate array is
 *  generated).
 *     
 *     all,f1,f2,f3 = *(/(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;))
 *     all   #=&gt; &quot;HX1138&quot;
 *     f1    #=&gt; &quot;H&quot;
 *     f2    #=&gt; &quot;X&quot;
 *     f3    #=&gt; &quot;113&quot;
 */

static VALUE
match_to_a(match)
    VALUE match;
{
    return match_array(match, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M001301" class="method">
  <div id="M001301_title" class="title">
    <b>mtch.to_s   => str<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the entire matched string.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
   m.to_s   #=&gt; &quot;HX1138&quot;
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001301_source')" id="l_M001301_source">show source</a> ]</p>
  <div id="M001301_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.to_s   =&gt; str
 *  
 *  Returns the entire matched string.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138.&quot;)
 *     m.to_s   #=&gt; &quot;HX1138&quot;
 */

static VALUE
match_to_s(match)
    VALUE match;
{
    VALUE str = rb_reg_last_match(match);

    if (NIL_P(str)) str = rb_str_new(0,0);
    if (OBJ_TAINTED(match)) OBJ_TAINT(str);
    if (OBJ_TAINTED(RMATCH(match)-&gt;str)) OBJ_TAINT(str);
    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M001297" class="method">
  <div id="M001297_title" class="title">
    <b>mtch.values_at([index]*)   => array<br />
</b>
  </div>
  <div class="description">
  <p>
Uses each <em>index</em> to access the matching values, returning an array
of the corresponding matches.
</p>
<pre>
   m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
   m.to_a               #=&gt; [&quot;HX1138&quot;, &quot;H&quot;, &quot;X&quot;, &quot;113&quot;, &quot;8&quot;]
   m.values_at(0, 2, -2)   #=&gt; [&quot;HX1138&quot;, &quot;X&quot;, &quot;113&quot;]
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001297_source')" id="l_M001297_source">show source</a> ]</p>
  <div id="M001297_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     mtch.values_at([index]*)   =&gt; array
 *  
 *  Uses each &lt;i&gt;index&lt;/i&gt; to access the matching values, returning an array of
 *  the corresponding matches.
 *     
 *     m = /(.)(.)(\d+)(\d)/.match(&quot;THX1138: The Movie&quot;)
 *     m.to_a               #=&gt; [&quot;HX1138&quot;, &quot;H&quot;, &quot;X&quot;, &quot;113&quot;, &quot;8&quot;]
 *     m.values_at(0, 2, -2)   #=&gt; [&quot;HX1138&quot;, &quot;X&quot;, &quot;113&quot;]
 */

static VALUE
match_values_at(argc, argv, match)
    int argc;
    VALUE *argv;
    VALUE match;
{
    return rb_values_at(match, RMATCH(match)-&gt;regs-&gt;num_regs, argc, argv, match_entry);
}
</pre>
  </div>
</div>
</div>
</div>

  </div>