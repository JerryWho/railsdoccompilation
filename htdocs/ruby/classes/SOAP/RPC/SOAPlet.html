  <div id="C00001233">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />SOAPlet<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/soap/rpc/soaplet_rb.html');">ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb</a>

Parent:&nbsp;
WEBrick::HTTPServlet::AbstractServlet
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006493&name=add_servant" >add_servant</a></li>
  <li><a href="index.html?a=M006494&name=allow_content_encoding_gzip=" >allow_content_encoding_gzip=</a></li>
  <li><a href="index.html?a=M006492&name=app_scope_router" >app_scope_router</a></li>
  <li><a href="index.html?a=M006497&name=do_GET" >do_GET</a></li>
  <li><a href="index.html?a=M006498&name=do_POST" >do_POST</a></li>
  <li><a href="index.html?a=M006495&name=get_instance" >get_instance</a></li>
  <li><a href="index.html?a=M006491&name=new" >new</a></li>
  <li><a href="index.html?a=M006496&name=require_path_info?" >require_path_info?</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>options</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M006491" class="method">
  <div id="M006491_title" class="title">
    <b>new</b>(router = nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006491_source')" id="l_M006491_source">show source</a> ]</p>
  <div id="M006491_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">router</span> = <span class="ruby-keyword kw">nil</span>)
46:     <span class="ruby-ivar">@router</span> = <span class="ruby-identifier">router</span> <span class="ruby-operator">||</span> <span class="ruby-operator">::</span><span class="ruby-constant">SOAP</span><span class="ruby-operator">::</span><span class="ruby-constant">RPC</span><span class="ruby-operator">::</span><span class="ruby-constant">Router</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>)
47:     <span class="ruby-ivar">@options</span> = {}
48:     <span class="ruby-ivar">@config</span> = {}
49:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M006493" class="method">
  <div id="M006493_title" class="title">
    <b>add_servant</b>(obj, namespace)
  </div>
  <div class="description">
  <p>
for backward compatibility
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006493_source')" id="l_M006493_source">show source</a> ]</p>
  <div id="M006493_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_servant</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">namespace</span>)
58:     <span class="ruby-ivar">@router</span>.<span class="ruby-identifier">add_rpc_servant</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">namespace</span>)
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006494" class="method">
  <div id="M006494_title" class="title">
    <b>allow_content_encoding_gzip=</b>(allow)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006494_source')" id="l_M006494_source">show source</a> ]</p>
  <div id="M006494_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">allow_content_encoding_gzip=</span>(<span class="ruby-identifier">allow</span>)
62:     <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:allow_content_encoding_gzip</span>] = <span class="ruby-identifier">allow</span>
63:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006492" class="method">
  <div id="M006492_title" class="title">
    <b>app_scope_router</b>()
  </div>
  <div class="description">
  <p>
for backward compatibility
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006492_source')" id="l_M006492_source">show source</a> ]</p>
  <div id="M006492_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 52</span>
52:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">app_scope_router</span>
53:     <span class="ruby-ivar">@router</span>
54:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006497" class="method">
  <div id="M006497_title" class="title">
    <b>do_GET</b>(req, res)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006497_source')" id="l_M006497_source">show source</a> ]</p>
  <div id="M006497_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_GET</span>(<span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>)
78:     <span class="ruby-identifier">res</span>.<span class="ruby-identifier">header</span>[<span class="ruby-value str">'Allow'</span>] = <span class="ruby-value str">'POST'</span>
79:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">MethodNotAllowed</span>, <span class="ruby-value str">&quot;GET request not allowed&quot;</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006498" class="method">
  <div id="M006498_title" class="title">
    <b>do_POST</b>(req, res)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006498_source')" id="l_M006498_source">show source</a> ]</p>
  <div id="M006498_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 82</span>
 82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_POST</span>(<span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>)
 83:     <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;SOAP request: &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">req</span>.<span class="ruby-identifier">body</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
 84:     <span class="ruby-keyword kw">begin</span>
 85:       <span class="ruby-identifier">conn_data</span> = <span class="ruby-operator">::</span><span class="ruby-constant">SOAP</span><span class="ruby-operator">::</span><span class="ruby-constant">StreamHandler</span><span class="ruby-operator">::</span><span class="ruby-constant">ConnectionData</span>.<span class="ruby-identifier">new</span>
 86:       <span class="ruby-identifier">setup_req</span>(<span class="ruby-identifier">conn_data</span>, <span class="ruby-identifier">req</span>)
 87:       <span class="ruby-ivar">@router</span>.<span class="ruby-identifier">external_ces</span> = <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:external_ces</span>]
 88:       <span class="ruby-identifier">conn_data</span> = <span class="ruby-ivar">@router</span>.<span class="ruby-identifier">route</span>(<span class="ruby-identifier">conn_data</span>)
 89:       <span class="ruby-identifier">setup_res</span>(<span class="ruby-identifier">conn_data</span>, <span class="ruby-identifier">req</span>, <span class="ruby-identifier">res</span>)
 90:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
 91:       <span class="ruby-identifier">conn_data</span> = <span class="ruby-ivar">@router</span>.<span class="ruby-identifier">create_fault_response</span>(<span class="ruby-identifier">e</span>)
 92:       <span class="ruby-identifier">res</span>.<span class="ruby-identifier">status</span> = <span class="ruby-constant">WEBrick</span><span class="ruby-operator">::</span><span class="ruby-constant">HTTPStatus</span><span class="ruby-operator">::</span><span class="ruby-constant">RC_INTERNAL_SERVER_ERROR</span>
 93:       <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> = <span class="ruby-identifier">conn_data</span>.<span class="ruby-identifier">send_string</span>
 94:       <span class="ruby-identifier">res</span>[<span class="ruby-value str">'content-type'</span>] = <span class="ruby-identifier">conn_data</span>.<span class="ruby-identifier">send_contenttype</span> <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;text/xml&quot;</span>
 95:     <span class="ruby-keyword kw">end</span>
 96:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">IO</span>)
 97:       <span class="ruby-identifier">res</span>.<span class="ruby-identifier">chunked</span> = <span class="ruby-keyword kw">true</span>
 98:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;SOAP response: (chunked response not logged)&quot;</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
 99:     <span class="ruby-keyword kw">else</span>
100:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> { <span class="ruby-value str">&quot;SOAP response: &quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">body</span> } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">logger</span>
101:     <span class="ruby-keyword kw">end</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006495" class="method">
  <div id="M006495_title" class="title">
    <b>get_instance</b>(config, *options)
  </div>
  <div class="description">
  <p>
Servlet interfaces for <a
href="index.html?a=C00001127&name=WEBrick">WEBrick</a>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006495_source')" id="l_M006495_source">show source</a> ]</p>
  <div id="M006495_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 68</span>
68:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">get_instance</span>(<span class="ruby-identifier">config</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">options</span>)
69:     <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span>
70:     <span class="ruby-keyword kw">self</span>
71:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006496" class="method">
  <div id="M006496_title" class="title">
    <b>require_path_info?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006496_source')" id="l_M006496_source">show source</a> ]</p>
  <div id="M006496_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/rpc/soaplet.rb, line 73</span>
73:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_path_info?</span>
74:     <span class="ruby-keyword kw">false</span>
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>