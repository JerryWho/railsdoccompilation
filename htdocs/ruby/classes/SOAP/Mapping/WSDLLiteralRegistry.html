  <div id="C00001216">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />WSDLLiteralRegistry<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/soap/mapping/wsdlliteralregistry_rb.html');">ruby-1.8.7-p22/lib/soap/mapping/wsdlliteralregistry.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/SOAP/Mapping/Registry.html');">
Registry
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006402&name=new" >new</a></li>
  <li><a href="index.html?a=M006403&name=obj2soap" >obj2soap</a></li>
  <li><a href="index.html?a=M006404&name=soap2obj" >soap2obj</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">MAPPING_OPT</td>
    <td>=</td>
    <td class="attr-value">{ :no_reference =&gt; true }</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>definedelements</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>definedtypes</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>excn_handler_obj2soap</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>excn_handler_soap2obj</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M006402" class="method">
  <div id="M006402_title" class="title">
    <b>new</b>(definedtypes = XSD::NamedElements::Empty, definedelements = XSD::NamedElements::Empty)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006402_source')" id="l_M006402_source">show source</a> ]</p>
  <div id="M006402_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlliteralregistry.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">definedtypes</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedElements</span><span class="ruby-operator">::</span><span class="ruby-constant">Empty</span>,
27:       <span class="ruby-identifier">definedelements</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedElements</span><span class="ruby-operator">::</span><span class="ruby-constant">Empty</span>)
28:     <span class="ruby-ivar">@definedtypes</span> = <span class="ruby-identifier">definedtypes</span>
29:     <span class="ruby-ivar">@definedelements</span> = <span class="ruby-identifier">definedelements</span>
30:     <span class="ruby-ivar">@excn_handler_obj2soap</span> = <span class="ruby-keyword kw">nil</span>
31:     <span class="ruby-ivar">@excn_handler_soap2obj</span> = <span class="ruby-keyword kw">nil</span>
32:     <span class="ruby-ivar">@schema_element_cache</span> = {}
33:     <span class="ruby-ivar">@schema_attribute_cache</span> = {}
34:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M006403" class="method">
  <div id="M006403_title" class="title">
    <b>obj2soap</b>(obj, qname)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006403_source')" id="l_M006403_source">show source</a> ]</p>
  <div id="M006403_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlliteralregistry.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
37:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-keyword kw">nil</span>
38:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">ele</span> = <span class="ruby-ivar">@definedelements</span>[<span class="ruby-identifier">qname</span>]
39:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj2elesoap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">ele</span>)
40:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">type</span> = <span class="ruby-ivar">@definedtypes</span>[<span class="ruby-identifier">qname</span>]
41:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj2typesoap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>, <span class="ruby-keyword kw">true</span>)
42:     <span class="ruby-keyword kw">else</span>
43:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">any2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
44:     <span class="ruby-keyword kw">end</span>
45:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
46:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_obj2soap</span>
47:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-ivar">@excn_handler_obj2soap</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_obj</span><span class="ruby-operator">|</span>
48:         <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">obj2soap</span>(<span class="ruby-identifier">yield_obj</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">MAPPING_OPT</span>)
49:       }
50:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
51:     <span class="ruby-keyword kw">end</span>
52:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{obj.class.name} as #{qname}&quot;</span>)
53:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006404" class="method">
  <div id="M006404_title" class="title">
    <b>soap2obj</b>(node, obj_class = nil)
  </div>
  <div class="description">
  <p>
node should be a <a
href="index.html?a=C00001287&name=SOAPElement">SOAPElement</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006404_source')" id="l_M006404_source">show source</a> ]</p>
  <div id="M006404_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlliteralregistry.rb, line 56</span>
56:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">soap2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span> = <span class="ruby-keyword kw">nil</span>)
57:     <span class="ruby-comment cmt"># obj_class is given when rpc/literal service.  but ignored for now.</span>
58:     <span class="ruby-keyword kw">begin</span>
59:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">any2obj</span>(<span class="ruby-identifier">node</span>)
60:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">MappingError</span>
61:     <span class="ruby-keyword kw">end</span>
62:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>
63:       <span class="ruby-keyword kw">begin</span>
64:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">node</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_node</span><span class="ruby-operator">|</span>
65:             <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">soap2obj</span>(<span class="ruby-identifier">yield_node</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">MAPPING_OPT</span>)
66:           }
67:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
68:       <span class="ruby-keyword kw">end</span>
69:     <span class="ruby-keyword kw">end</span>
70:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:type</span>)
71:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{node.type.name} to Ruby object&quot;</span>)
72:     <span class="ruby-keyword kw">else</span>
73:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{node.elename.name} to Ruby object&quot;</span>)
74:     <span class="ruby-keyword kw">end</span>
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>