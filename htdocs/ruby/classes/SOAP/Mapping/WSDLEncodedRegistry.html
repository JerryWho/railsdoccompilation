  <div id="C00001201">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />WSDLEncodedRegistry<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/soap/mapping/wsdlencodedregistry_rb.html');">ruby-1.8.7-p22/lib/soap/mapping/wsdlencodedregistry.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/SOAP/Mapping/Registry.html');">
Registry
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006350&name=new" >new</a></li>
  <li><a href="index.html?a=M006351&name=obj2soap" >obj2soap</a></li>
  <li><a href="index.html?a=M006352&name=soap2obj" >soap2obj</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/SOAP/Mapping/TraverseSupport.html');">TraverseSupport</a></li>
</ul>



  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">MapKeyName</td>
    <td>=</td>
    <td class="attr-value">XSD::QName.new(nil, &quot;key&quot;)</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MapValueName</td>
    <td>=</td>
    <td class="attr-value">XSD::QName.new(nil, &quot;value&quot;)</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>definedelements</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>definedtypes</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>excn_handler_obj2soap</td>
    <td class='attr-desc'></td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>excn_handler_soap2obj</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M006350" class="method">
  <div id="M006350_title" class="title">
    <b>new</b>(definedtypes = XSD::NamedElements::Empty)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006350_source')" id="l_M006350_source">show source</a> ]</p>
  <div id="M006350_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlencodedregistry.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">definedtypes</span> = <span class="ruby-constant">XSD</span><span class="ruby-operator">::</span><span class="ruby-constant">NamedElements</span><span class="ruby-operator">::</span><span class="ruby-constant">Empty</span>)
29:     <span class="ruby-ivar">@definedtypes</span> = <span class="ruby-identifier">definedtypes</span>
30:     <span class="ruby-comment cmt"># @definedelements = definedelements  needed?</span>
31:     <span class="ruby-ivar">@excn_handler_obj2soap</span> = <span class="ruby-keyword kw">nil</span>
32:     <span class="ruby-ivar">@excn_handler_soap2obj</span> = <span class="ruby-keyword kw">nil</span>
33:     <span class="ruby-comment cmt"># For mapping AnyType element.</span>
34:     <span class="ruby-ivar">@rubytype_factory</span> = <span class="ruby-constant">RubytypeFactory</span>.<span class="ruby-identifier">new</span>(
35:       <span class="ruby-identifier">:allow_untyped_struct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
36:       <span class="ruby-identifier">:allow_original_mapping</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
37:     )
38:     <span class="ruby-ivar">@schema_element_cache</span> = {}
39:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M006351" class="method">
  <div id="M006351_title" class="title">
    <b>obj2soap</b>(obj, qname = nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006351_source')" id="l_M006351_source">show source</a> ]</p>
  <div id="M006351_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlencodedregistry.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">obj2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span> = <span class="ruby-keyword kw">nil</span>)
42:     <span class="ruby-identifier">soap_obj</span> = <span class="ruby-keyword kw">nil</span>
43:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">type</span> = <span class="ruby-ivar">@definedtypes</span>[<span class="ruby-identifier">qname</span>]
44:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">obj2typesoap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">type</span>)
45:     <span class="ruby-keyword kw">else</span>
46:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-identifier">any2soap</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">qname</span>)
47:     <span class="ruby-keyword kw">end</span>
48:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
49:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_obj2soap</span>
50:       <span class="ruby-identifier">soap_obj</span> = <span class="ruby-ivar">@excn_handler_obj2soap</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">obj</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_obj</span><span class="ruby-operator">|</span>
51:         <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_obj2soap</span>(<span class="ruby-identifier">yield_obj</span>, <span class="ruby-keyword kw">self</span>)
52:       }
53:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">soap_obj</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">soap_obj</span>
54:     <span class="ruby-keyword kw">end</span>
55:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">qname</span>
56:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{obj.class.name} as #{qname}&quot;</span>)
57:     <span class="ruby-keyword kw">else</span>
58:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{obj.class.name} to SOAP/OM&quot;</span>)
59:     <span class="ruby-keyword kw">end</span>
60:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006352" class="method">
  <div id="M006352_title" class="title">
    <b>soap2obj</b>(node, obj_class = nil)
  </div>
  <div class="description">
  <p>
map anything for now: must refer <a
href="index.html?a=C00000744&name=WSDL">WSDL</a> while mapping. [ToDo]
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006352_source')" id="l_M006352_source">show source</a> ]</p>
  <div id="M006352_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/soap/mapping/wsdlencodedregistry.rb, line 63</span>
63:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">soap2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span> = <span class="ruby-keyword kw">nil</span>)
64:     <span class="ruby-keyword kw">begin</span>
65:       <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">any2obj</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">obj_class</span>)
66:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">MappingError</span>
67:     <span class="ruby-keyword kw">end</span>
68:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>
69:       <span class="ruby-keyword kw">begin</span>
70:         <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@excn_handler_soap2obj</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">node</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">yield_node</span><span class="ruby-operator">|</span>
71:             <span class="ruby-constant">Mapping</span>.<span class="ruby-identifier">_soap2obj</span>(<span class="ruby-identifier">yield_node</span>, <span class="ruby-keyword kw">self</span>)
72:           }
73:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
74:       <span class="ruby-keyword kw">end</span>
75:     <span class="ruby-keyword kw">end</span>
76:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">MappingError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;cannot map #{node.type.name} to Ruby object&quot;</span>)
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>