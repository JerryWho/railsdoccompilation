  <div id="C00000242">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />OpenStruct<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/ostruct_rb.html');">ruby-1.8.7-p22/lib/ostruct.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<a href="index.html?a=C00000242&name=OpenStruct">OpenStruct</a> allows you
to create data objects and set arbitrary attributes. For example:
</p>
<pre>
  require 'ostruct'

  record = OpenStruct.new
  record.name    = &quot;John Smith&quot;
  record.age     = 70
  record.pension = 300

  puts record.name     # -&gt; &quot;John Smith&quot;
  puts record.address  # -&gt; nil
</pre>
<p>
It is like a hash with a different way to access the data. In fact, it is
implemented with a hash, and you can initialize it with one.
</p>
<pre>
  hash = { &quot;country&quot; =&gt; &quot;Australia&quot;, :population =&gt; 20_000_000 }
  data = OpenStruct.new(hash)

  p data        # -&gt; &lt;OpenStruct country=&quot;Australia&quot; population=20000000&gt;
</pre>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M002051&name===" >==</a></li>
  <li><a href="index.html?a=M002048&name=delete_field" >delete_field</a></li>
  <li><a href="index.html?a=M002044&name=initialize_copy" >initialize_copy</a></li>
  <li><a href="index.html?a=M002049&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M002045&name=marshal_dump" >marshal_dump</a></li>
  <li><a href="index.html?a=M002046&name=marshal_load" >marshal_load</a></li>
  <li><a href="index.html?a=M002043&name=new" >new</a></li>
  <li><a href="index.html?a=M002047&name=new_ostruct_member" >new_ostruct_member</a></li>
  <li><a href="index.html?a=M002050&name=to_s" >to_s</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M002043" class="method">
  <div id="M002043_title" class="title">
    <b>new</b>(hash=nil)
  </div>
  <div class="description">
  <p>
Create a new <a
href="index.html?a=C00000242&name=OpenStruct">OpenStruct</a> object. The
optional <tt>hash</tt>, if given, will generate attributes and values. For
example.
</p>
<pre>
  require 'ostruct'
  hash = { &quot;country&quot; =&gt; &quot;Australia&quot;, :population =&gt; 20_000_000 }
  data = OpenStruct.new(hash)

  p data        # -&gt; &lt;OpenStruct country=&quot;Australia&quot; population=20000000&gt;
</pre>
<p>
By default, the resulting <a
href="index.html?a=C00000242&name=OpenStruct">OpenStruct</a> object will
have no attributes.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002043_source')" id="l_M002043_source">show source</a> ]</p>
  <div id="M002043_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 46</span>
46:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">hash</span>=<span class="ruby-keyword kw">nil</span>)
47:     <span class="ruby-ivar">@table</span> = {}
48:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hash</span>
49:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span> <span class="ruby-keyword kw">in</span> <span class="ruby-identifier">hash</span>
50:         <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_sym</span>] = <span class="ruby-identifier">v</span>
51:         <span class="ruby-identifier">new_ostruct_member</span>(<span class="ruby-identifier">k</span>)
52:       <span class="ruby-keyword kw">end</span>
53:     <span class="ruby-keyword kw">end</span>
54:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M002051" class="method">
  <div id="M002051_title" class="title">
    <b>==</b>(other)
  </div>
  <div class="description">
  <p>
Compare this object and <tt>other</tt> for equality.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002051_source')" id="l_M002051_source">show source</a> ]</p>
  <div id="M002051_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
143:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span>(<span class="ruby-identifier">other</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-constant">OpenStruct</span>))
144:     <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@table</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">table</span>
145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002048" class="method">
  <div id="M002048_title" class="title">
    <b>delete_field</b>(name)
  </div>
  <div class="description">
  <p>
Remove the named field from the object.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002048_source')" id="l_M002048_source">show source</a> ]</p>
  <div id="M002048_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_field</span>(<span class="ruby-identifier">name</span>)
103:     <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>
104:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002044" class="method">
  <div id="M002044_title" class="title">
    <b>initialize_copy</b>(orig)
  </div>
  <div class="description">
  <p>
Duplicate an <a
href="index.html?a=C00000242&name=OpenStruct">OpenStruct</a> object
members.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002044_source')" id="l_M002044_source">show source</a> ]</p>
  <div id="M002044_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_copy</span>(<span class="ruby-identifier">orig</span>)
58:     <span class="ruby-keyword kw">super</span>
59:     <span class="ruby-ivar">@table</span> = <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">dup</span>
60:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002049" class="method">
  <div id="M002049_title" class="title">
    <b>inspect</b>()
  </div>
  <div class="description">
  <p>
Returns a string containing a detailed summary of the keys and values.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M002050&name=to_s">to_s</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002049_source')" id="l_M002049_source">show source</a> ]</p>
  <div id="M002049_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>
112:     <span class="ruby-identifier">str</span> = <span class="ruby-node">&quot;#&lt;#{self.class}&quot;</span>
113: 
114:     <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-constant">InspectKey</span>] <span class="ruby-operator">||=</span> []
115:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-constant">InspectKey</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-keyword kw">self</span>) <span class="ruby-keyword kw">then</span>
116:       <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; ...&quot;</span>
117:     <span class="ruby-keyword kw">else</span>
118:       <span class="ruby-identifier">first</span> = <span class="ruby-keyword kw">true</span>
119:       <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span> <span class="ruby-keyword kw">in</span> <span class="ruby-ivar">@table</span>
120:         <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;,&quot;</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">first</span>
121:         <span class="ruby-identifier">first</span> = <span class="ruby-keyword kw">false</span>
122: 
123:         <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-constant">InspectKey</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">v</span>
124:         <span class="ruby-keyword kw">begin</span>
125:           <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot; #{k}=#{v.inspect}&quot;</span>
126:         <span class="ruby-keyword kw">ensure</span>
127:           <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">current</span>[<span class="ruby-constant">InspectKey</span>].<span class="ruby-identifier">pop</span>
128:         <span class="ruby-keyword kw">end</span>
129:       <span class="ruby-keyword kw">end</span>
130:     <span class="ruby-keyword kw">end</span>
131: 
132:     <span class="ruby-identifier">str</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;&gt;&quot;</span>
133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002045" class="method">
  <div id="M002045_title" class="title">
    <b>marshal_dump</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002045_source')" id="l_M002045_source">show source</a> ]</p>
  <div id="M002045_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 62</span>
62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">marshal_dump</span>
63:     <span class="ruby-ivar">@table</span>
64:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002046" class="method">
  <div id="M002046_title" class="title">
    <b>marshal_load</b>(x)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002046_source')" id="l_M002046_source">show source</a> ]</p>
  <div id="M002046_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">marshal_load</span>(<span class="ruby-identifier">x</span>)
66:     <span class="ruby-ivar">@table</span> = <span class="ruby-identifier">x</span>
67:     <span class="ruby-ivar">@table</span>.<span class="ruby-identifier">each_key</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-identifier">new_ostruct_member</span>(<span class="ruby-identifier">key</span>)}
68:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002047" class="method">
  <div id="M002047_title" class="title">
    <b>new_ostruct_member</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002047_source')" id="l_M002047_source">show source</a> ]</p>
  <div id="M002047_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/ostruct.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_ostruct_member</span>(<span class="ruby-identifier">name</span>)
71:     <span class="ruby-identifier">name</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>
72:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">name</span>)
73:       <span class="ruby-identifier">meta</span> = <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>
74:       <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_method</span>, <span class="ruby-identifier">name</span>) { <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">name</span>] }
75:       <span class="ruby-identifier">meta</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_method</span>, <span class="ruby-node">&quot;#{name}=&quot;</span><span class="ruby-node">&quot;#{name}=&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@table</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-identifier">x</span> }
76:     <span class="ruby-keyword kw">end</span>
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002050" class="method">
  <div id="M002050_title" class="title">
    <b>to_s</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M002049&name=inspect">inspect</a>
</p>
  </div>
</div>
</div>

  </div>