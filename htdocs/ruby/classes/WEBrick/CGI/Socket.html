  <div id="C00001173">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Socket<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/webrick/cgi_rb.html');">ruby-1.8.7-p22/lib/webrick/cgi.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006111&name=&lt;&lt;" >&lt;&lt;</a></li>
  <li><a href="index.html?a=M006107&name=addr" >addr</a></li>
  <li><a href="index.html?a=M006112&name=cert" >cert</a></li>
  <li><a href="index.html?a=M006115&name=cipher" >cipher</a></li>
  <li><a href="index.html?a=M006110&name=each" >each</a></li>
  <li><a href="index.html?a=M006108&name=gets" >gets</a></li>
  <li><a href="index.html?a=M006105&name=new" >new</a></li>
  <li><a href="index.html?a=M006113&name=peer_cert" >peer_cert</a></li>
  <li><a href="index.html?a=M006114&name=peer_cert_chain" >peer_cert_chain</a></li>
  <li><a href="index.html?a=M006106&name=peeraddr" >peeraddr</a></li>
  <li><a href="index.html?a=M006109&name=read" >read</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Enumerable.html');">Enumerable</a></li>
</ul>





<div class="sectiontitle">Public Class methods</div>
<div id="M006105" class="method">
  <div id="M006105_title" class="title">
    <b>new</b>(config, env, stdin, stdout)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006105_source')" id="l_M006105_source">show source</a> ]</p>
  <div id="M006105_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">config</span>, <span class="ruby-identifier">env</span>, <span class="ruby-identifier">stdin</span>, <span class="ruby-identifier">stdout</span>)
127:         <span class="ruby-ivar">@config</span> = <span class="ruby-identifier">config</span>
128:         <span class="ruby-ivar">@env</span> = <span class="ruby-identifier">env</span>
129:         <span class="ruby-ivar">@header_part</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
130:         <span class="ruby-ivar">@body_part</span> = <span class="ruby-identifier">stdin</span>
131:         <span class="ruby-ivar">@out_port</span> = <span class="ruby-identifier">stdout</span>
132:         <span class="ruby-ivar">@out_port</span>.<span class="ruby-identifier">binmode</span>
133:   
134:         <span class="ruby-ivar">@server_addr</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SERVER_ADDR&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-value str">&quot;0.0.0.0&quot;</span>
135:         <span class="ruby-ivar">@server_name</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SERVER_NAME&quot;</span>]
136:         <span class="ruby-ivar">@server_port</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SERVER_PORT&quot;</span>]
137:         <span class="ruby-ivar">@remote_addr</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;REMOTE_ADDR&quot;</span>]
138:         <span class="ruby-ivar">@remote_host</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;REMOTE_HOST&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@remote_addr</span>
139:         <span class="ruby-ivar">@remote_port</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;REMOTE_PORT&quot;</span>] <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
140: 
141:         <span class="ruby-keyword kw">begin</span>
142:           <span class="ruby-ivar">@header_part</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">request_line</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CRLF</span>
143:           <span class="ruby-identifier">setup_header</span>
144:           <span class="ruby-ivar">@header_part</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">CRLF</span>
145:           <span class="ruby-ivar">@header_part</span>.<span class="ruby-identifier">rewind</span>
146:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
147:           <span class="ruby-identifier">raise</span> <span class="ruby-constant">CGIError</span>, <span class="ruby-value str">&quot;invalid CGI environment&quot;</span>
148:         <span class="ruby-keyword kw">end</span>
149:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M006111" class="method">
  <div id="M006111_title" class="title">
    <b>&lt;&lt;</b>(data)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006111_source')" id="l_M006111_source">show source</a> ]</p>
  <div id="M006111_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 212</span>
212:       <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span>(<span class="ruby-identifier">data</span>)
213:         <span class="ruby-ivar">@out_port</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">data</span>
214:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006107" class="method">
  <div id="M006107_title" class="title">
    <b>addr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006107_source')" id="l_M006107_source">show source</a> ]</p>
  <div id="M006107_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 196</span>
196:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">addr</span>
197:         [<span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@server_port</span>, <span class="ruby-ivar">@server_name</span>, <span class="ruby-ivar">@server_addr</span>]
198:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006112" class="method">
  <div id="M006112_title" class="title">
    <b>cert</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006112_source')" id="l_M006112_source">show source</a> ]</p>
  <div id="M006112_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 216</span>
216:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cert</span>
217:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">OpenSSL</span>)
218:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pem</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_SERVER_CERT&quot;</span>]
219:           <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">X509</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pem</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pem</span>.<span class="ruby-identifier">empty?</span>
220:         <span class="ruby-keyword kw">end</span>
221:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006115" class="method">
  <div id="M006115_title" class="title">
    <b>cipher</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006115_source')" id="l_M006115_source">show source</a> ]</p>
  <div id="M006115_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 245</span>
245:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cipher</span>
246:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">OpenSSL</span>)
247:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">cipher</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_CIPHER&quot;</span>]
248:           <span class="ruby-identifier">ret</span> = [ <span class="ruby-identifier">cipher</span> ]
249:           <span class="ruby-identifier">ret</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_PROTOCOL&quot;</span>]
250:           <span class="ruby-identifier">ret</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_CIPHER_USEKEYSIZE&quot;</span>]
251:           <span class="ruby-identifier">ret</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_CIPHER_ALGKEYSIZE&quot;</span>]
252:           <span class="ruby-identifier">ret</span>
253:         <span class="ruby-keyword kw">end</span>
254:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006110" class="method">
  <div id="M006110_title" class="title">
    <b>each</b>() {|line| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006110_source')" id="l_M006110_source">show source</a> ]</p>
  <div id="M006110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span>
209:         <span class="ruby-identifier">input</span>.<span class="ruby-identifier">each</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">line</span>) }
210:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006108" class="method">
  <div id="M006108_title" class="title">
    <b>gets</b>(eol=LF)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006108_source')" id="l_M006108_source">show source</a> ]</p>
  <div id="M006108_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 200</span>
200:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gets</span>(<span class="ruby-identifier">eol</span>=<span class="ruby-constant">LF</span>)
201:         <span class="ruby-identifier">input</span>.<span class="ruby-identifier">gets</span>(<span class="ruby-identifier">eol</span>)
202:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006113" class="method">
  <div id="M006113_title" class="title">
    <b>peer_cert</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006113_source')" id="l_M006113_source">show source</a> ]</p>
  <div id="M006113_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 223</span>
223:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peer_cert</span>
224:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">OpenSSL</span>)
225:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pem</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_CLIENT_CERT&quot;</span>]
226:           <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">X509</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pem</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pem</span>.<span class="ruby-identifier">empty?</span>
227:         <span class="ruby-keyword kw">end</span>
228:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006114" class="method">
  <div id="M006114_title" class="title">
    <b>peer_cert_chain</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006114_source')" id="l_M006114_source">show source</a> ]</p>
  <div id="M006114_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 230</span>
230:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peer_cert_chain</span>
231:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">OpenSSL</span>)
232:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@env</span>[<span class="ruby-value str">&quot;SSL_CLIENT_CERT_CHAIN_0&quot;</span>]
233:           <span class="ruby-identifier">keys</span> = <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">keys</span>
234:           <span class="ruby-identifier">certs</span> = <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
235:             <span class="ruby-keyword kw">if</span> <span class="ruby-regexp re">/^SSL_CLIENT_CERT_CHAIN_\d+$/</span> <span class="ruby-operator">=~</span> <span class="ruby-identifier">k</span>
236:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">pem</span> = <span class="ruby-ivar">@env</span>[<span class="ruby-identifier">k</span>]
237:                 <span class="ruby-constant">OpenSSL</span><span class="ruby-operator">::</span><span class="ruby-constant">X509</span><span class="ruby-operator">::</span><span class="ruby-constant">Certificate</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">pem</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">pem</span>.<span class="ruby-identifier">empty?</span>
238:               <span class="ruby-keyword kw">end</span>
239:             <span class="ruby-keyword kw">end</span>
240:           }
241:           <span class="ruby-identifier">certs</span>.<span class="ruby-identifier">compact</span>
242:         <span class="ruby-keyword kw">end</span>
243:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006106" class="method">
  <div id="M006106_title" class="title">
    <b>peeraddr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006106_source')" id="l_M006106_source">show source</a> ]</p>
  <div id="M006106_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 192</span>
192:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">peeraddr</span>
193:         [<span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@remote_port</span>, <span class="ruby-ivar">@remote_host</span>, <span class="ruby-ivar">@remote_addr</span>]
194:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006109" class="method">
  <div id="M006109_title" class="title">
    <b>read</b>(size=nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006109_source')" id="l_M006109_source">show source</a> ]</p>
  <div id="M006109_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/webrick/cgi.rb, line 204</span>
204:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">read</span>(<span class="ruby-identifier">size</span>=<span class="ruby-keyword kw">nil</span>)
205:         <span class="ruby-identifier">input</span>.<span class="ruby-identifier">read</span>(<span class="ruby-identifier">size</span>)
206:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>