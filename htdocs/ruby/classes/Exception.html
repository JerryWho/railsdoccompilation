  <div id="C00000131">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Exception<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/error_c.html');">ruby-1.8.7-p22/error.c</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/yaml/rubytypes_rb.html');">ruby-1.8.7-p22/lib/yaml/rubytypes.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
Descendents of class <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> are used to
communicate between <tt>raise</tt> methods and <tt>rescue</tt> statements
in <tt>begin/end</tt> blocks. <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> objects
carry information about the exception&#8212;its type (the exception&#8217;s
class name), an optional descriptive string, and optional traceback
information. Programs may subclass <tt><a
href="index.html?a=C00000131&name=Exception">Exception</a></tt> to add
additional information.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001332&name=backtrace" >backtrace</a></li>
  <li><a href="index.html?a=M001325&name=exception" >exception</a></li>
  <li><a href="index.html?a=M001326&name=exception" >exception</a></li>
  <li><a href="index.html?a=M001331&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M001330&name=message" >message</a></li>
  <li><a href="index.html?a=M001327&name=new" >new</a></li>
  <li><a href="index.html?a=M001333&name=set_backtrace" >set_backtrace</a></li>
  <li><a href="index.html?a=M001328&name=to_s" >to_s</a></li>
  <li><a href="index.html?a=M001329&name=to_str" >to_str</a></li>
  <li><a href="index.html?a=M001335&name=to_yaml" >to_yaml</a></li>
  <li><a href="index.html?a=M001334&name=yaml_new" >yaml_new</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M001325" class="method">
  <div id="M001325_title" class="title">
    <b>exc.exception(string) &rarr; an_exception or exc<br />
</b>
  </div>
  <div class="description">
  <p>
With no argument, or if the argument is the same as the receiver, return
the receiver. Otherwise, create a new exception object of the same class as
the receiver, but with a message equal to <tt>string.to_str</tt>.
</p>
  </div>
</div>
<div id="M001327" class="method">
  <div id="M001327_title" class="title">
    <b>Exception.new(msg = nil)   =>  exception<br />
</b>
  </div>
  <div class="description">
  <p>
Construct a new <a
href="index.html?a=C00000131&name=Exception">Exception</a> object,
optionally passing in a message.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001327_source')" id="l_M001327_source">show source</a> ]</p>
  <div id="M001327_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *    Exception.new(msg = nil)   =&gt;  exception
 *
 *  Construct a new Exception object, optionally passing in 
 *  a message.
 */

static VALUE
exc_initialize(argc, argv, exc)
    int argc;
    VALUE *argv;
    VALUE exc;
{
    VALUE arg;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;arg);
    rb_iv_set(exc, &quot;mesg&quot;, arg);
    rb_iv_set(exc, &quot;bt&quot;, Qnil);

    return exc;
}
</pre>
  </div>
</div>
</div>
<div id="M001334" class="method">
  <div id="M001334_title" class="title">
    <b>yaml_new</b>( klass, tag, val )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001334_source')" id="l_M001334_source">show source</a> ]</p>
  <div id="M001334_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/yaml/rubytypes.rb, line 119</span>
119:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Exception</span>.<span class="ruby-identifier">yaml_new</span>( <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">tag</span>, <span class="ruby-identifier">val</span> )
120:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">object_maker</span>( <span class="ruby-identifier">klass</span>, { <span class="ruby-value str">'mesg'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">val</span>.<span class="ruby-identifier">delete</span>( <span class="ruby-value str">'message'</span> ) } )
121:         <span class="ruby-identifier">val</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
122:             <span class="ruby-identifier">o</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-node">&quot;@#{k}&quot;</span>, <span class="ruby-identifier">v</span>)
123:         <span class="ruby-keyword kw">end</span>
124:         <span class="ruby-identifier">o</span>
125:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M001332" class="method">
  <div id="M001332_title" class="title">
    <b>exception.backtrace    => array<br />
</b>
  </div>
  <div class="description">
  <p>
Returns any backtrace associated with the exception. The backtrace is an
array of strings, each containing either ``filename:lineNo: in
`method&#8217;&#8217;&#8217; or ``filename:lineNo.&#8217;&#8216;
</p>
<pre>
   def a
     raise &quot;boom&quot;
   end

   def b
     a()
   end

   begin
     b()
   rescue =&gt; detail
     print detail.backtrace.join(&quot;\n&quot;)
   end
</pre>
<p>
<em>produces:</em>
</p>
<pre>
   prog.rb:2:in `a'
   prog.rb:6:in `b'
   prog.rb:10
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001332_source')" id="l_M001332_source">show source</a> ]</p>
  <div id="M001332_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     exception.backtrace    =&gt; array
 *  
 *  Returns any backtrace associated with the exception. The backtrace
 *  is an array of strings, each containing either ``filename:lineNo: in
 *  `method''' or ``filename:lineNo.''
 *     
 *     def a
 *       raise &quot;boom&quot;
 *     end
 *     
 *     def b
 *       a()
 *     end
 *     
 *     begin
 *       b()
 *     rescue =&gt; detail
 *       print detail.backtrace.join(&quot;\n&quot;)
 *     end
 *     
 *  &lt;em&gt;produces:&lt;/em&gt;
 *     
 *     prog.rb:2:in `a'
 *     prog.rb:6:in `b'
 *     prog.rb:10
*/

static VALUE
exc_backtrace(exc)
    VALUE exc;
{
    static ID bt;

    if (!bt) bt = rb_intern(&quot;bt&quot;);
    return rb_attr_get(exc, bt);
}
</pre>
  </div>
</div>
</div>
<div id="M001326" class="method">
  <div id="M001326_title" class="title">
    <b>exc.exception(string) &rarr; an_exception or exc<br />
</b>
  </div>
  <div class="description">
  <p>
With no argument, or if the argument is the same as the receiver, return
the receiver. Otherwise, create a new exception object of the same class as
the receiver, but with a message equal to <tt>string.to_str</tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001326_source')" id="l_M001326_source">show source</a> ]</p>
  <div id="M001326_source" class="dyn-source">
<pre>
/*
 *  Document-method: exception
 *
 *  call-seq:
 *     exc.exception(string) -&gt; an_exception or exc
 *  
 *  With no argument, or if the argument is the same as the receiver,
 *  return the receiver. Otherwise, create a new
 *  exception object of the same class as the receiver, but with a
 *  message equal to &lt;code&gt;string.to_str&lt;/code&gt;.
 *     
 */

static VALUE
exc_exception(argc, argv, self)
    int argc;
    VALUE *argv;
    VALUE self;
{
    VALUE exc;

    if (argc == 0) return self;
    if (argc == 1 &amp;&amp; self == argv[0]) return self;
    exc = rb_obj_clone(self);
    exc_initialize(argc, argv, exc);

    return exc;
}
</pre>
  </div>
</div>
</div>
<div id="M001331" class="method">
  <div id="M001331_title" class="title">
    <b>exception.inspect   => string<br />
</b>
  </div>
  <div class="description">
  <p>
Return this exception&#8217;s class name an message
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001331_source')" id="l_M001331_source">show source</a> ]</p>
  <div id="M001331_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   exception.inspect   =&gt; string
 *
 * Return this exception's class name an message
 */

static VALUE
exc_inspect(exc)
    VALUE exc;
{
    VALUE str, klass;

    klass = CLASS_OF(exc);
    exc = rb_obj_as_string(exc);
    if (RSTRING(exc)-&gt;len == 0) {
        return rb_str_dup(rb_class_name(klass));
    }

    str = rb_str_buf_new2(&quot;#&lt;&quot;);
    klass = rb_class_name(klass);
    rb_str_buf_append(str, klass);
    rb_str_buf_cat(str, &quot;: &quot;, 2);
    rb_str_buf_append(str, exc);
    rb_str_buf_cat(str, &quot;&gt;&quot;, 1);

    return str;
}
</pre>
  </div>
</div>
</div>
<div id="M001330" class="method">
  <div id="M001330_title" class="title">
    <b>exception.message   =>  string<br />
exception.to_str    =>  string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the result of invoking <tt>exception.to_s</tt>. Normally this
returns the exception&#8217;s message or name. By supplying a <a
href="index.html?a=M001329&name=to_str">to_str</a> method, exceptions are
agreeing to be used where Strings are expected.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001330_source')" id="l_M001330_source">show source</a> ]</p>
  <div id="M001330_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   exception.message   =&gt;  string
 *   exception.to_str    =&gt;  string
 *
 * Returns the result of invoking &lt;code&gt;exception.to_s&lt;/code&gt;.
 * Normally this returns the exception's message or name. By
 * supplying a to_str method, exceptions are agreeing to
 * be used where Strings are expected.
 */

static VALUE
exc_to_str(exc)
    VALUE exc;
{
    return rb_funcall(exc, rb_intern(&quot;to_s&quot;), 0, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M001333" class="method">
  <div id="M001333_title" class="title">
    <b>exc.set_backtrace(array)   =>  array<br />
</b>
  </div>
  <div class="description">
  <p>
Sets the backtrace information associated with <em>exc</em>. The argument
must be an array of <tt><a
href="index.html?a=C00000055&name=String">String</a></tt> objects in the
format described in <tt><a
href="index.html?a=M001332&name=Exception#backtrace">Exception#backtrace</a></tt>.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001333_source')" id="l_M001333_source">show source</a> ]</p>
  <div id="M001333_source" class="dyn-source">
<pre>
/*
 *  call-seq:
 *     exc.set_backtrace(array)   =&gt;  array
 *  
 *  Sets the backtrace information associated with &lt;i&gt;exc&lt;/i&gt;. The
 *  argument must be an array of &lt;code&gt;String&lt;/code&gt; objects in the
 *  format described in &lt;code&gt;Exception#backtrace&lt;/code&gt;.
 *     
 */

static VALUE
exc_set_backtrace(exc, bt)
    VALUE exc;
    VALUE bt;
{
    return rb_iv_set(exc, &quot;bt&quot;, rb_check_backtrace(bt));
}
</pre>
  </div>
</div>
</div>
<div id="M001328" class="method">
  <div id="M001328_title" class="title">
    <b>exception.to_s   =>  string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns exception&#8217;s message (or the name of the exception if no
message is set).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001328_source')" id="l_M001328_source">show source</a> ]</p>
  <div id="M001328_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   exception.to_s   =&gt;  string
 *
 * Returns exception's message (or the name of the exception if
 * no message is set).
 */

static VALUE
exc_to_s(exc)
    VALUE exc;
{
    VALUE mesg = rb_attr_get(exc, rb_intern(&quot;mesg&quot;));

    if (NIL_P(mesg)) return rb_class_name(CLASS_OF(exc));
    if (OBJ_TAINTED(exc)) OBJ_TAINT(mesg);
    return mesg;
}
</pre>
  </div>
</div>
</div>
<div id="M001329" class="method">
  <div id="M001329_title" class="title">
    <b>exception.message   =>  string<br />
exception.to_str    =>  string<br />
</b>
  </div>
  <div class="description">
  <p>
Returns the result of invoking <tt>exception.to_s</tt>. Normally this
returns the exception&#8217;s message or name. By supplying a <a
href="index.html?a=M001329&name=to_str">to_str</a> method, exceptions are
agreeing to be used where Strings are expected.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001329_source')" id="l_M001329_source">show source</a> ]</p>
  <div id="M001329_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   exception.message   =&gt;  string
 *   exception.to_str    =&gt;  string
 *
 * Returns the result of invoking &lt;code&gt;exception.to_s&lt;/code&gt;.
 * Normally this returns the exception's message or name. By
 * supplying a to_str method, exceptions are agreeing to
 * be used where Strings are expected.
 */

static VALUE
exc_to_str(exc)
    VALUE exc;
{
    return rb_funcall(exc, rb_intern(&quot;to_s&quot;), 0, 0);
}
</pre>
  </div>
</div>
</div>
<div id="M001335" class="method">
  <div id="M001335_title" class="title">
    <b>to_yaml</b>( opts = {} )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001335_source')" id="l_M001335_source">show source</a> ]</p>
  <div id="M001335_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/yaml/rubytypes.rb, line 126</span>
126:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_yaml</span>( <span class="ruby-identifier">opts</span> = {} )
127:                 <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">quick_emit</span>( <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">opts</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
128:             <span class="ruby-identifier">out</span>.<span class="ruby-identifier">map</span>( <span class="ruby-identifier">taguri</span>, <span class="ruby-identifier">to_yaml_style</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
129:                 <span class="ruby-identifier">map</span>.<span class="ruby-identifier">add</span>( <span class="ruby-value str">'message'</span>, <span class="ruby-identifier">message</span> )
130:                                 <span class="ruby-identifier">to_yaml_properties</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
131:                     <span class="ruby-identifier">map</span>.<span class="ruby-identifier">add</span>( <span class="ruby-identifier">m</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>], <span class="ruby-identifier">instance_variable_get</span>( <span class="ruby-identifier">m</span> ) )
132:                 <span class="ruby-keyword kw">end</span>
133:             <span class="ruby-keyword kw">end</span>
134:         <span class="ruby-keyword kw">end</span>
135:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>