  <div id="C00001503">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RiWriter<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/rdoc/ri/ri_writer_rb.html');">ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M007436&name=add_class" >add_class</a></li>
  <li><a href="index.html?a=M007437&name=add_method" >add_method</a></li>
  <li><a href="index.html?a=M007431&name=class_desc_path" >class_desc_path</a></li>
  <li><a href="index.html?a=M007433&name=external_to_internal" >external_to_internal</a></li>
  <li><a href="index.html?a=M007432&name=internal_to_external" >internal_to_external</a></li>
  <li><a href="index.html?a=M007434&name=new" >new</a></li>
  <li><a href="index.html?a=M007435&name=remove_class" >remove_class</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M007431" class="method">
  <div id="M007431_title" class="title">
    <b>class_desc_path</b>(dir, class_desc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007431_source')" id="l_M007431_source">show source</a> ]</p>
  <div id="M007431_source" class="dyn-source">
<pre>
   <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 6</span>
6:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RiWriter</span>.<span class="ruby-identifier">class_desc_path</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">class_desc</span>)
7:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-value str">&quot;cdesc-&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">class_desc</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;.yaml&quot;</span>)
8:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M007433" class="method">
  <div id="M007433_title" class="title">
    <b>external_to_internal</b>(name)
  </div>
  <div class="description">
  <p>
And the reverse operation
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007433_source')" id="l_M007433_source">show source</a> ]</p>
  <div id="M007433_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 20</span>
20:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RiWriter</span>.<span class="ruby-identifier">external_to_internal</span>(<span class="ruby-identifier">name</span>)
21:       <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%([0-9a-f]{2,2})/</span>) { <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>(<span class="ruby-value">16</span>).<span class="ruby-identifier">chr</span> }
22:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M007432" class="method">
  <div id="M007432_title" class="title">
    <b>internal_to_external</b>(name)
  </div>
  <div class="description">
  <p>
Convert a name from internal form (containing punctuation) to an external
form (where punctuation is replaced by %xx)
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007432_source')" id="l_M007432_source">show source</a> ]</p>
  <div id="M007432_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-constant">RiWriter</span>.<span class="ruby-identifier">internal_to_external</span>(<span class="ruby-identifier">name</span>)
16:       <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\W/</span>) { <span class="ruby-identifier">sprintf</span>(<span class="ruby-value str">&quot;%%%02x&quot;</span>, <span class="ruby-identifier">$&amp;</span>[<span class="ruby-value">0</span>]) }
17:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M007434" class="method">
  <div id="M007434_title" class="title">
    <b>new</b>(base_dir)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007434_source')" id="l_M007434_source">show source</a> ]</p>
  <div id="M007434_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 24</span>
24:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">base_dir</span>)
25:       <span class="ruby-ivar">@base_dir</span> = <span class="ruby-identifier">base_dir</span>
26:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M007436" class="method">
  <div id="M007436_title" class="title">
    <b>add_class</b>(class_desc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007436_source')" id="l_M007436_source">show source</a> ]</p>
  <div id="M007436_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 32</span>
32:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_class</span>(<span class="ruby-identifier">class_desc</span>)
33:       <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">path_to_dir</span>(<span class="ruby-identifier">class_desc</span>.<span class="ruby-identifier">full_name</span>)
34:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">mkdir_p</span>(<span class="ruby-identifier">dir</span>)
35:       <span class="ruby-identifier">class_file_name</span> = <span class="ruby-constant">RiWriter</span>.<span class="ruby-identifier">class_desc_path</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">class_desc</span>)
36:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">class_file_name</span>, <span class="ruby-value str">&quot;w&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
37:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">class_desc</span>.<span class="ruby-identifier">serialize</span>)
38:       <span class="ruby-keyword kw">end</span>
39:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M007437" class="method">
  <div id="M007437_title" class="title">
    <b>add_method</b>(class_desc, method_desc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007437_source')" id="l_M007437_source">show source</a> ]</p>
  <div id="M007437_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 41</span>
41:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_method</span>(<span class="ruby-identifier">class_desc</span>, <span class="ruby-identifier">method_desc</span>)
42:       <span class="ruby-identifier">dir</span> = <span class="ruby-identifier">path_to_dir</span>(<span class="ruby-identifier">class_desc</span>.<span class="ruby-identifier">full_name</span>)
43:       <span class="ruby-identifier">file_name</span> = <span class="ruby-constant">RiWriter</span>.<span class="ruby-identifier">internal_to_external</span>(<span class="ruby-identifier">method_desc</span>.<span class="ruby-identifier">name</span>)
44:       <span class="ruby-identifier">meth_file_name</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">dir</span>, <span class="ruby-identifier">file_name</span>)
45:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_desc</span>.<span class="ruby-identifier">is_singleton</span>
46:         <span class="ruby-identifier">meth_file_name</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;-c.yaml&quot;</span>
47:       <span class="ruby-keyword kw">else</span>
48:         <span class="ruby-identifier">meth_file_name</span> <span class="ruby-operator">+=</span> <span class="ruby-value str">&quot;-i.yaml&quot;</span>
49:       <span class="ruby-keyword kw">end</span>
50: 
51:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-identifier">meth_file_name</span>, <span class="ruby-value str">&quot;w&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
52:         <span class="ruby-identifier">f</span>.<span class="ruby-identifier">write</span>(<span class="ruby-identifier">method_desc</span>.<span class="ruby-identifier">serialize</span>)
53:       <span class="ruby-keyword kw">end</span>
54:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M007435" class="method">
  <div id="M007435_title" class="title">
    <b>remove_class</b>(class_desc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M007435_source')" id="l_M007435_source">show source</a> ]</p>
  <div id="M007435_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/rdoc/ri/ri_writer.rb, line 28</span>
28:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">remove_class</span>(<span class="ruby-identifier">class_desc</span>)
29:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">rm_rf</span>(<span class="ruby-identifier">path_to_dir</span>(<span class="ruby-identifier">class_desc</span>.<span class="ruby-identifier">full_name</span>))
30:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>