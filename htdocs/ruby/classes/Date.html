  <div id="C00000047">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Date<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/date/format_rb.html');">ruby-1.8.7-p22/lib/date/format.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/date_rb.html');">ruby-1.8.7-p22/lib/date.rb</a>
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/yaml/rubytypes_rb.html');">ruby-1.8.7-p22/lib/yaml/rubytypes.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<a href="index.html?a=C00000299&name=Class">Class</a> representing a date.
</p>
<p>
See the documentation to the file date.rb for an overview.
</p>
<p>
Internally, the date is represented as an Astronomical Julian Day Number,
<tt>ajd</tt>. The Day of Calendar Reform, <tt>sg</tt>, is also stored, for
conversions to other date formats. (There is also an <tt>of</tt> field for
a time zone offset, but this is only for the use of the <a
href="index.html?a=C00000300&name=DateTime">DateTime</a> subclass.)
</p>
<p>
A new <a href="index.html?a=C00000047&name=Date">Date</a> object is created
using one of the object creation class methods named after the
corresponding date format, and the arguments appropriate to that date
format; for instance, Date::civil() (aliased to Date::new()) with year,
month, and day-of-month, or Date::ordinal() with year and day-of-year. All
of these object creation class methods also take the Day of Calendar Reform
as an optional argument.
</p>
<p>
<a href="index.html?a=C00000047&name=Date">Date</a> objects are immutable
once created.
</p>
<p>
Once a <a href="index.html?a=C00000047&name=Date">Date</a> has been
created, date values can be retrieved for the different date formats
supported using instance methods. For instance, <a
href="index.html?a=M000632&name=mon">mon</a>() gives the Civil month, <a
href="index.html?a=M000638&name=cwday">cwday</a>() gives the Commercial day
of the week, and <a href="index.html?a=M000631&name=yday">yday</a>() gives
the Ordinal day of the year. <a
href="index.html?a=C00000047&name=Date">Date</a> values can be retrieved in
any format, regardless of what format was used to create the <a
href="index.html?a=C00000047&name=Date">Date</a> instance.
</p>
<p>
The <a href="index.html?a=C00000047&name=Date">Date</a> class includes the
<a href="index.html?a=C00001584&name=Comparable">Comparable</a> module,
allowing date objects to be compared and sorted, ranges of dates to be
created, and so forth.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000649&name=+" >+</a></li>
  <li><a href="index.html?a=M000650&name=-" >-</a></li>
  <li><a href="index.html?a=M000656&name=&lt;&lt;" >&lt;&lt;</a></li>
  <li><a href="index.html?a=M000651&name=&lt;=&gt;" >&lt;=&gt;</a></li>
  <li><a href="index.html?a=M000652&name====" >===</a></li>
  <li><a href="index.html?a=M000655&name=&gt;&gt;" >&gt;&gt;</a></li>
  <li><a href="index.html?a=M000664&name=_dump" >_dump</a></li>
  <li><a href="index.html?a=M000665&name=_load" >_load</a></li>
  <li><a href="index.html?a=M000589&name=_parse" >_parse</a></li>
  <li><a href="index.html?a=M000588&name=_strptime" >_strptime</a></li>
  <li><a href="index.html?a=M000624&name=ajd" >ajd</a></li>
  <li><a href="index.html?a=M000604&name=ajd_to_amjd" >ajd_to_amjd</a></li>
  <li><a href="index.html?a=M000598&name=ajd_to_jd" >ajd_to_jd</a></li>
  <li><a href="index.html?a=M000625&name=amjd" >amjd</a></li>
  <li><a href="index.html?a=M000603&name=amjd_to_ajd" >amjd_to_ajd</a></li>
  <li><a href="index.html?a=M000586&name=asctime" >asctime</a></li>
  <li><a href="index.html?a=M000619&name=civil" >civil</a></li>
  <li><a href="index.html?a=M000594&name=civil_to_jd" >civil_to_jd</a></li>
  <li><a href="index.html?a=M000620&name=commercial" >commercial</a></li>
  <li><a href="index.html?a=M000596&name=commercial_to_jd" >commercial_to_jd</a></li>
  <li><a href="index.html?a=M000587&name=ctime" >ctime</a></li>
  <li><a href="index.html?a=M000638&name=cwday" >cwday</a></li>
  <li><a href="index.html?a=M000637&name=cweek" >cweek</a></li>
  <li><a href="index.html?a=M000636&name=cwyear" >cwyear</a></li>
  <li><a href="index.html?a=M000635&name=day" >day</a></li>
  <li><a href="index.html?a=M000627&name=day_fraction" >day_fraction</a></li>
  <li><a href="index.html?a=M000600&name=day_fraction_to_time" >day_fraction_to_time</a></li>
  <li><a href="index.html?a=M000659&name=downto" >downto</a></li>
  <li><a href="index.html?a=M000646&name=england" >england</a></li>
  <li><a href="index.html?a=M000660&name=eql?" >eql?</a></li>
  <li><a href="index.html?a=M000648&name=gregorian" >gregorian</a></li>
  <li><a href="index.html?a=M000591&name=gregorian?" >gregorian?</a></li>
  <li><a href="index.html?a=M000641&name=gregorian?" >gregorian?</a></li>
  <li><a href="index.html?a=M000611&name=gregorian_leap?" >gregorian_leap?</a></li>
  <li><a href="index.html?a=M000661&name=hash" >hash</a></li>
  <li><a href="index.html?a=M000662&name=inspect" >inspect</a></li>
  <li><a href="index.html?a=M000645&name=italy" >italy</a></li>
  <li><a href="index.html?a=M000617&name=jd" >jd</a></li>
  <li><a href="index.html?a=M000626&name=jd" >jd</a></li>
  <li><a href="index.html?a=M000599&name=jd_to_ajd" >jd_to_ajd</a></li>
  <li><a href="index.html?a=M000595&name=jd_to_civil" >jd_to_civil</a></li>
  <li><a href="index.html?a=M000597&name=jd_to_commercial" >jd_to_commercial</a></li>
  <li><a href="index.html?a=M000608&name=jd_to_ld" >jd_to_ld</a></li>
  <li><a href="index.html?a=M000606&name=jd_to_mjd" >jd_to_mjd</a></li>
  <li><a href="index.html?a=M000593&name=jd_to_ordinal" >jd_to_ordinal</a></li>
  <li><a href="index.html?a=M000609&name=jd_to_wday" >jd_to_wday</a></li>
  <li><a href="index.html?a=M000647&name=julian" >julian</a></li>
  <li><a href="index.html?a=M000590&name=julian?" >julian?</a></li>
  <li><a href="index.html?a=M000640&name=julian?" >julian?</a></li>
  <li><a href="index.html?a=M000610&name=julian_leap?" >julian_leap?</a></li>
  <li><a href="index.html?a=M000629&name=ld" >ld</a></li>
  <li><a href="index.html?a=M000607&name=ld_to_jd" >ld_to_jd</a></li>
  <li><a href="index.html?a=M000642&name=leap?" >leap?</a></li>
  <li><a href="index.html?a=M000633&name=mday" >mday</a></li>
  <li><a href="index.html?a=M000628&name=mjd" >mjd</a></li>
  <li><a href="index.html?a=M000605&name=mjd_to_jd" >mjd_to_jd</a></li>
  <li><a href="index.html?a=M000632&name=mon" >mon</a></li>
  <li><a href="index.html?a=M000634&name=month" >month</a></li>
  <li><a href="index.html?a=M000623&name=new" >new</a></li>
  <li><a href="index.html?a=M000644&name=new_start" >new_start</a></li>
  <li><a href="index.html?a=M000653&name=next" >next</a></li>
  <li><a href="index.html?a=M000618&name=ordinal" >ordinal</a></li>
  <li><a href="index.html?a=M000592&name=ordinal_to_jd" >ordinal_to_jd</a></li>
  <li><a href="index.html?a=M000622&name=parse" >parse</a></li>
  <li><a href="index.html?a=M000643&name=start" >start</a></li>
  <li><a href="index.html?a=M000657&name=step" >step</a></li>
  <li><a href="index.html?a=M000585&name=strftime" >strftime</a></li>
  <li><a href="index.html?a=M000621&name=strptime" >strptime</a></li>
  <li><a href="index.html?a=M000654&name=succ" >succ</a></li>
  <li><a href="index.html?a=M000602&name=time_to_day_fraction" >time_to_day_fraction</a></li>
  <li><a href="index.html?a=M000601&name=time_to_day_fraction" >time_to_day_fraction</a></li>
  <li><a href="index.html?a=M000663&name=to_s" >to_s</a></li>
  <li><a href="index.html?a=M000667&name=to_yaml" >to_yaml</a></li>
  <li><a href="index.html?a=M000666&name=today" >today</a></li>
  <li><a href="index.html?a=M000658&name=upto" >upto</a></li>
  <li><a href="index.html?a=M000614&name=valid_civil?" >valid_civil?</a></li>
  <li><a href="index.html?a=M000615&name=valid_commercial?" >valid_commercial?</a></li>
  <li><a href="index.html?a=M000612&name=valid_jd?" >valid_jd?</a></li>
  <li><a href="index.html?a=M000613&name=valid_ordinal?" >valid_ordinal?</a></li>
  <li><a href="index.html?a=M000616&name=valid_time?" >valid_time?</a></li>
  <li><a href="index.html?a=M000639&name=wday" >wday</a></li>
  <li><a href="index.html?a=M000631&name=yday" >yday</a></li>
  <li><a href="index.html?a=M000630&name=year" >year</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Comparable.html');">Comparable</a></li>
</ul>



  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">MONTHNAMES</td>
    <td>=</td>
    <td class="attr-value">[nil] + %w(January February March April May June July                           August September October November December)</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
Full month names, in English. Months count from 1 to 12; a month&#8217;s
numerical representation indexed into this array gives the name of that
month (hence the first element is nil).

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">DAYNAMES</td>
    <td>=</td>
    <td class="attr-value">%w(Sunday Monday Tuesday Wednesday Thursday Friday Saturday)</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
Full names of days of the week, in English. Days of the week count from 0
to 6 (except in the commercial week); a day&#8217;s numerical
representation indexed into this array gives the name of that day.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ABBR_MONTHNAMES</td>
    <td>=</td>
    <td class="attr-value">[nil] + %w(Jan Feb Mar Apr May Jun                                Jul Aug Sep Oct Nov Dec)</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
Abbreviated month names, in English.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ABBR_DAYNAMES</td>
    <td>=</td>
    <td class="attr-value">%w(Sun Mon Tue Wed Thu Fri Sat)</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
Abbreviated day names, in English.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ITALY</td>
    <td>=</td>
    <td class="attr-value">2299161</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
The Julian Day Number of the Day of Calendar Reform for Italy and the
Catholic countries.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ENGLAND</td>
    <td>=</td>
    <td class="attr-value">2361222</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
The Julian Day Number of the Day of Calendar Reform for England and her
Colonies.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">JULIAN</td>
    <td>=</td>
    <td class="attr-value">Infinity.new</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
A constant used to indicate that a <a
href="index.html?a=C00000047&name=Date">Date</a> should always use the
Julian calendar.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">GREGORIAN</td>
    <td>=</td>
    <td class="attr-value">-Infinity.new</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
A constant used to indicate that a <a
href="index.html?a=C00000047&name=Date">Date</a> should always use the
Gregorian calendar.

</td>
  </tr>
  </table>


<div class="sectiontitle">Public Class methods</div>
<div id="M000665" class="method">
  <div id="M000665_title" class="title">
    <b>_load</b>(str)
  </div>
  <div class="description">
  <p>
Load from <a href="index.html?a=C00001016&name=Marshal">Marshal</a> format.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000665_source')" id="l_M000665_source">show source</a> ]</p>
  <div id="M000665_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1389</span>
1389:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">_load</span>(<span class="ruby-identifier">str</span>)
1390:     <span class="ruby-identifier">a</span> = <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">str</span>)
1391:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
1392:       <span class="ruby-identifier">ajd</span>,     <span class="ruby-identifier">sg</span> = <span class="ruby-identifier">a</span>
1393:            <span class="ruby-identifier">of</span> = <span class="ruby-value">0</span>
1394:       <span class="ruby-identifier">ajd</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>.<span class="ruby-identifier">to_r</span><span class="ruby-operator">/</span><span class="ruby-value">2</span>
1395:     <span class="ruby-keyword kw">else</span>
1396:       <span class="ruby-identifier">ajd</span>, <span class="ruby-identifier">of</span>, <span class="ruby-identifier">sg</span> = <span class="ruby-identifier">a</span>
1397:     <span class="ruby-keyword kw">end</span>
1398:     <span class="ruby-identifier">new!</span>(<span class="ruby-identifier">ajd</span>, <span class="ruby-identifier">of</span>, <span class="ruby-identifier">sg</span>)
1399:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000589" class="method">
  <div id="M000589_title" class="title">
    <b>_parse</b>(str, comp=false)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000589_source')" id="l_M000589_source">show source</a> ]</p>
  <div id="M000589_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date/format.rb, line 1054</span>
1054:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">_parse</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">comp</span>=<span class="ruby-keyword kw">false</span>)
1055:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">dup</span>
1056: 
1057:     <span class="ruby-identifier">e</span> = <span class="ruby-constant">Format</span><span class="ruby-operator">::</span><span class="ruby-constant">Bag</span>.<span class="ruby-identifier">new</span>
1058: 
1059:     <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_comp</span> = <span class="ruby-identifier">comp</span>
1060: 
1061:     <span class="ruby-identifier">str</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/[^-+',.\/:@[:alnum:]\[\]\x80-\xff]+/n</span>, <span class="ruby-value str">' '</span>)
1062: 
1063:     <span class="ruby-identifier">_parse_time</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>) <span class="ruby-comment cmt"># || _parse_beat(str, e)</span>
1064:     <span class="ruby-identifier">_parse_day</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)
1065: 
1066:     <span class="ruby-identifier">_parse_eu</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)     <span class="ruby-operator">||</span>
1067:     <span class="ruby-identifier">_parse_us</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)     <span class="ruby-operator">||</span>
1068:     <span class="ruby-identifier">_parse_iso</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1069:     <span class="ruby-identifier">_parse_jis</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1070:     <span class="ruby-identifier">_parse_vms</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1071:     <span class="ruby-identifier">_parse_sla</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1072:     <span class="ruby-identifier">_parse_dot</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1073:     <span class="ruby-identifier">_parse_iso2</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)   <span class="ruby-operator">||</span>
1074:     <span class="ruby-identifier">_parse_year</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)   <span class="ruby-operator">||</span>
1075:     <span class="ruby-identifier">_parse_mon</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)    <span class="ruby-operator">||</span>
1076:     <span class="ruby-identifier">_parse_mday</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)   <span class="ruby-operator">||</span>
1077:     <span class="ruby-identifier">_parse_ddd</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">e</span>)
1078: 
1079:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\b(bc\b|bce\b|b\.c\.|b\.c\.e\.)/i</span><span class="ruby-identifier">n</span>, <span class="ruby-value str">' '</span>)
1080:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span>
1081:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>
1082:       <span class="ruby-keyword kw">end</span>
1083:     <span class="ruby-keyword kw">end</span>
1084: 
1085:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">sub!</span>(<span class="ruby-regexp re">/\A\s*(\d{1,2})\s*\z/n</span>, <span class="ruby-value str">' '</span>)
1086:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">e</span>.<span class="ruby-identifier">mday</span>
1087:         <span class="ruby-identifier">v</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
1088:         <span class="ruby-keyword kw">if</span> (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">31</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">v</span>
1089:           <span class="ruby-identifier">e</span>.<span class="ruby-identifier">mday</span> = <span class="ruby-identifier">v</span>
1090:         <span class="ruby-keyword kw">end</span>
1091:       <span class="ruby-keyword kw">end</span>
1092:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">mday</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span>
1093:         <span class="ruby-identifier">v</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">to_i</span>
1094:         <span class="ruby-keyword kw">if</span> (<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">24</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">v</span>
1095:           <span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span> = <span class="ruby-identifier">v</span>
1096:         <span class="ruby-keyword kw">end</span>
1097:       <span class="ruby-keyword kw">end</span>
1098:     <span class="ruby-keyword kw">end</span>
1099: 
1100:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_comp</span>
1101:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span>
1102:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">99</span>
1103:           <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">69</span>
1104:                       <span class="ruby-keyword kw">then</span> <span class="ruby-value">1900</span> <span class="ruby-keyword kw">else</span> <span class="ruby-value">2000</span> <span class="ruby-keyword kw">end</span>
1105:         <span class="ruby-keyword kw">end</span>
1106:       <span class="ruby-keyword kw">end</span>
1107:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span>
1108:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">99</span>
1109:           <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">+=</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">69</span>
1110:                     <span class="ruby-keyword kw">then</span> <span class="ruby-value">1900</span> <span class="ruby-keyword kw">else</span> <span class="ruby-value">2000</span> <span class="ruby-keyword kw">end</span>
1111:         <span class="ruby-keyword kw">end</span>
1112:       <span class="ruby-keyword kw">end</span>
1113:     <span class="ruby-keyword kw">end</span>
1114: 
1115:     <span class="ruby-identifier">e</span>.<span class="ruby-identifier">offset</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">zone_to_diff</span>(<span class="ruby-identifier">e</span>.<span class="ruby-identifier">zone</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">zone</span>
1116: 
1117:     <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_hash</span>
1118:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000588" class="method">
  <div id="M000588_title" class="title">
    <b>_strptime</b>(str, fmt='%F')
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000588_source')" id="l_M000588_source">show source</a> ]</p>
  <div id="M000588_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date/format.rb, line 598</span>
598:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">_strptime</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">fmt</span>=<span class="ruby-value str">'%F'</span>)
599:     <span class="ruby-identifier">str</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">dup</span>
600:     <span class="ruby-identifier">e</span> = <span class="ruby-constant">Format</span><span class="ruby-operator">::</span><span class="ruby-constant">Bag</span>.<span class="ruby-identifier">new</span>
601:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">_strptime_i</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">fmt</span>, <span class="ruby-identifier">e</span>)
602: 
603:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_cent</span>
604:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span>
605:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_cent</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span>
606:       <span class="ruby-keyword kw">end</span>
607:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">year</span>
608:         <span class="ruby-identifier">e</span>.  <span class="ruby-identifier">year</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_cent</span> <span class="ruby-operator">*</span> <span class="ruby-value">100</span>
609:       <span class="ruby-keyword kw">end</span>
610:     <span class="ruby-keyword kw">end</span>
611: 
612:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_merid</span>
613:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span>
614:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span> <span class="ruby-operator">%=</span> <span class="ruby-value">12</span>
615:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">hour</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">_merid</span>
616:       <span class="ruby-keyword kw">end</span>
617:     <span class="ruby-keyword kw">end</span>
618: 
619:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">str</span>.<span class="ruby-identifier">empty?</span>
620:       <span class="ruby-identifier">e</span>.<span class="ruby-identifier">leftover</span> = <span class="ruby-identifier">str</span>
621:     <span class="ruby-keyword kw">end</span>
622: 
623:     <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_hash</span>
624:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000604" class="method">
  <div id="M000604_title" class="title">
    <b>ajd_to_amjd</b>(ajd)
  </div>
  <div class="description">
  <p>
Convert an Astronomical Julian Day Number to an Astronomical Modified
Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000604_source')" id="l_M000604_source">show source</a> ]</p>
  <div id="M000604_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 538</span>
538:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ajd_to_amjd</span>(<span class="ruby-identifier">ajd</span>) <span class="ruby-identifier">ajd</span> <span class="ruby-operator">-</span> <span class="ruby-constant">MJD_EPOCH_IN_AJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000598" class="method">
  <div id="M000598_title" class="title">
    <b>ajd_to_jd</b>(ajd, of=0)
  </div>
  <div class="description">
  <p>
Convert an Astronomical Julian Day Number to a (civil) Julian Day Number.
</p>
<p>
<tt>ajd</tt> is the Astronomical Julian Day Number to convert. <tt>of</tt>
is the offset from UTC as a fraction of a day (defaults to 0).
</p>
<p>
Returns the (civil) Julian Day Number as [day_number, fraction] where
<tt>fraction</tt> is always 1/2.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000598_source')" id="l_M000598_source">show source</a> ]</p>
  <div id="M000598_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 492</span>
492:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ajd_to_jd</span>(<span class="ruby-identifier">ajd</span>, <span class="ruby-identifier">of</span>=<span class="ruby-value">0</span>) (<span class="ruby-identifier">ajd</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">of</span> <span class="ruby-operator">+</span> <span class="ruby-constant">HALF_DAYS_IN_DAY</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000603" class="method">
  <div id="M000603_title" class="title">
    <b>amjd_to_ajd</b>(amjd)
  </div>
  <div class="description">
  <p>
Convert an Astronomical Modified Julian Day Number to an Astronomical
Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000603_source')" id="l_M000603_source">show source</a> ]</p>
  <div id="M000603_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 534</span>
534:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">amjd_to_ajd</span>(<span class="ruby-identifier">amjd</span>) <span class="ruby-identifier">amjd</span> <span class="ruby-operator">+</span> <span class="ruby-constant">MJD_EPOCH_IN_AJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000619" class="method">
  <div id="M000619_title" class="title">
    <b>civil</b>(y=-4712, m=1, d=1, sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object for
the Civil <a href="index.html?a=C00000047&name=Date">Date</a> specified by
year <tt>y</tt>, month <tt>m</tt>, and day-of-month <tt>d</tt>.
</p>
<p>
<tt>m</tt> and <tt>d</tt> can be negative, in which case they count
backwards from the end of the year and the end of the month respectively.
No wraparound is performed, however, and invalid values cause an <a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> to be
raised. can be negative
</p>
<p>
<tt>y</tt> defaults to -4712, <tt>m</tt> to 1, and <tt>d</tt> to 1; this is
Julian Day Number day 0.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000619_source')" id="l_M000619_source">show source</a> ]</p>
  <div id="M000619_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 750</span>
750:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">civil</span>(<span class="ruby-identifier">y</span>=<span class="ruby-value">-4712</span>, <span class="ruby-identifier">m</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">d</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
751:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">valid_civil?</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
752:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'invalid date'</span>
753:     <span class="ruby-keyword kw">end</span>
754:     <span class="ruby-identifier">new!</span>(<span class="ruby-identifier">jd_to_ajd</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>)
755:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000594" class="method">
  <div id="M000594_title" class="title">
    <b>civil_to_jd</b>(y, m, d, sg=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert a Civil <a href="index.html?a=C00000047&name=Date">Date</a> to a
Julian Day Number. <tt>y</tt>, <tt>m</tt>, and <tt>d</tt> are the year,
month, and day of the month. <tt>sg</tt> specifies the Day of Calendar
Reform.
</p>
<p>
Returns the corresponding Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000594_source')" id="l_M000594_source">show source</a> ]</p>
  <div id="M000594_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 396</span>
396:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">GREGORIAN</span>)
397:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">2</span>
398:       <span class="ruby-identifier">y</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span>
399:       <span class="ruby-identifier">m</span> <span class="ruby-operator">+=</span> <span class="ruby-value">12</span>
400:     <span class="ruby-keyword kw">end</span>
401:     <span class="ruby-identifier">a</span> = (<span class="ruby-identifier">y</span> <span class="ruby-operator">/</span> <span class="ruby-value">100.0</span>).<span class="ruby-identifier">floor</span>
402:     <span class="ruby-identifier">b</span> = <span class="ruby-value">2</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">a</span> <span class="ruby-operator">/</span> <span class="ruby-value">4.0</span>).<span class="ruby-identifier">floor</span>
403:     <span class="ruby-identifier">jd</span> = (<span class="ruby-value">365.25</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> <span class="ruby-value">4716</span>)).<span class="ruby-identifier">floor</span> <span class="ruby-operator">+</span>
404:       (<span class="ruby-value">30.6001</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">m</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)).<span class="ruby-identifier">floor</span> <span class="ruby-operator">+</span>
405:       <span class="ruby-identifier">d</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">b</span> <span class="ruby-operator">-</span> <span class="ruby-value">1524</span>
406:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">julian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
407:       <span class="ruby-identifier">jd</span> <span class="ruby-operator">-=</span> <span class="ruby-identifier">b</span>
408:     <span class="ruby-keyword kw">end</span>
409:     <span class="ruby-identifier">jd</span>
410:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000620" class="method">
  <div id="M000620_title" class="title">
    <b>commercial</b>(y=1582, w=41, d=5, sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object for
the Commercial <a href="index.html?a=C00000047&name=Date">Date</a>
specified by year <tt>y</tt>, week-of-year <tt>w</tt>, and day-of-week
<tt>d</tt>.
</p>
<p>
Monday is day-of-week 1; Sunday is day-of-week 7.
</p>
<p>
<tt>w</tt> and <tt>d</tt> can be negative, in which case they count
backwards from the end of the year and the end of the week respectively. No
wraparound is performed, however, and invalid values cause an <a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> to be
raised.
</p>
<p>
<tt>y</tt> defaults to 1582, <tt>w</tt> to 41, and <tt>d</tt> to 5, the Day
of Calendar Reform for Italy and the Catholic countries.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000620_source')" id="l_M000620_source">show source</a> ]</p>
  <div id="M000620_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 773</span>
773:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">commercial</span>(<span class="ruby-identifier">y</span>=<span class="ruby-value">1582</span>, <span class="ruby-identifier">w</span>=<span class="ruby-value">41</span>, <span class="ruby-identifier">d</span>=<span class="ruby-value">5</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
774:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">valid_commercial?</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
775:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'invalid date'</span>
776:     <span class="ruby-keyword kw">end</span>
777:     <span class="ruby-identifier">new!</span>(<span class="ruby-identifier">jd_to_ajd</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>)
778:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000596" class="method">
  <div id="M000596_title" class="title">
    <b>commercial_to_jd</b>(y, w, d, ns=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert a Commercial <a href="index.html?a=C00000047&name=Date">Date</a> to
a Julian Day Number.
</p>
<p>
<tt>y</tt>, <tt>w</tt>, and <tt>d</tt> are the (commercial) year, week of
the year, and day of the week of the Commercial <a
href="index.html?a=C00000047&name=Date">Date</a> to convert. <tt>sg</tt>
specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000596_source')" id="l_M000596_source">show source</a> ]</p>
  <div id="M000596_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 445</span>
445:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">commercial_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">ns</span>=<span class="ruby-constant">GREGORIAN</span>)
446:     <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-value">1</span>, <span class="ruby-value">4</span>, <span class="ruby-identifier">ns</span>)
447:     (<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> (((<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">7</span>)) <span class="ruby-operator">+</span>
448:       <span class="ruby-value">7</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">w</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">+</span>
449:       (<span class="ruby-identifier">d</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
450:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000600" class="method">
  <div id="M000600_title" class="title">
    <b>day_fraction_to_time</b>(fr)
  </div>
  <div class="description">
  <p>
Convert a fractional day <tt>fr</tt> to [hours, minutes, seconds,
fraction_of_a_second]
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000600_source')" id="l_M000600_source">show source</a> ]</p>
  <div id="M000600_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">day_fraction_to_time</span>(<span class="ruby-identifier">fr</span>)
508:     <span class="ruby-identifier">ss</span>,  <span class="ruby-identifier">fr</span> = <span class="ruby-identifier">fr</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-constant">SECONDS_IN_DAY</span>) <span class="ruby-comment cmt"># 4p</span>
509:     <span class="ruby-identifier">h</span>,   <span class="ruby-identifier">ss</span> = <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-value">3600</span>)
510:     <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>  = <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-value">60</span>)
511:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">h</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>, <span class="ruby-identifier">fr</span>
512:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000591" class="method">
  <div id="M000591_title" class="title">
    <b>gregorian?</b>(jd, sg)
  </div>
  <div class="description">
  <p>
Does a given Julian Day Number fall inside the new-style (Gregorian)
calendar?
</p>
<p>
The reverse of self.os? See the documentation for that method for more
details.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000591_source')" id="l_M000591_source">show source</a> ]</p>
  <div id="M000591_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 358</span>
358:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">gregorian?</span> (<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>) <span class="ruby-operator">!</span><span class="ruby-identifier">julian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000611" class="method">
  <div id="M000611_title" class="title">
    <b>gregorian_leap?</b>(y)
  </div>
  <div class="description">
  <p>
Is a year a leap year in the Gregorian calendar?
</p>
<p>
All years divisible by 4 are leap years in the Gregorian calendar, except
for years divisible by 100 and not by 400.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000611_source')" id="l_M000611_source">show source</a> ]</p>
  <div id="M000611_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 570</span>
570:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">gregorian_leap?</span> (<span class="ruby-identifier">y</span>) <span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">4</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span> <span class="ruby-operator">!=</span> <span class="ruby-value">0</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">400</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000617" class="method">
  <div id="M000617_title" class="title">
    <b>jd</b>(jd=0, sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object
from a Julian Day Number.
</p>
<p>
<tt>jd</tt> is the Julian Day Number; if not specified, it defaults to 0.
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000617_source')" id="l_M000617_source">show source</a> ]</p>
  <div id="M000617_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 715</span>
715:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd</span>(<span class="ruby-identifier">jd</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
716:     <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">valid_jd?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
717:     <span class="ruby-identifier">new!</span>(<span class="ruby-identifier">jd_to_ajd</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>)
718:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000599" class="method">
  <div id="M000599_title" class="title">
    <b>jd_to_ajd</b>(jd, fr, of=0)
  </div>
  <div class="description">
  <p>
Convert a (civil) Julian Day Number to an Astronomical Julian Day Number.
</p>
<p>
<tt>jd</tt> is the Julian Day Number to convert, and <tt>fr</tt> is a
fractional day. <tt>of</tt> is the offset from UTC as a fraction of a day
(defaults to 0).
</p>
<p>
Returns the Astronomical Julian Day Number as a single numeric value.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000599_source')" id="l_M000599_source">show source</a> ]</p>
  <div id="M000599_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 503</span>
503:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_ajd</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">fr</span>, <span class="ruby-identifier">of</span>=<span class="ruby-value">0</span>) <span class="ruby-identifier">jd</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">fr</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">of</span> <span class="ruby-operator">-</span> <span class="ruby-constant">HALF_DAYS_IN_DAY</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000595" class="method">
  <div id="M000595_title" class="title">
    <b>jd_to_civil</b>(jd, sg=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to a Civil <a
href="index.html?a=C00000047&name=Date">Date</a>. <tt>jd</tt> is the Julian
Day Number. <tt>sg</tt> specifies the Day of Calendar Reform.
</p>
<p>
Returns the corresponding [year, month, day_of_month] as a three-element
array.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000595_source')" id="l_M000595_source">show source</a> ]</p>
  <div id="M000595_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 418</span>
418:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">GREGORIAN</span>)
419:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">julian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
420:       <span class="ruby-identifier">a</span> = <span class="ruby-identifier">jd</span>
421:     <span class="ruby-keyword kw">else</span>
422:       <span class="ruby-identifier">x</span> = ((<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-value">1867216.25</span>) <span class="ruby-operator">/</span> <span class="ruby-value">36524.25</span>).<span class="ruby-identifier">floor</span>
423:       <span class="ruby-identifier">a</span> = <span class="ruby-identifier">jd</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">x</span> <span class="ruby-operator">/</span> <span class="ruby-value">4.0</span>).<span class="ruby-identifier">floor</span>
424:     <span class="ruby-keyword kw">end</span>
425:     <span class="ruby-identifier">b</span> = <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-value">1524</span>
426:     <span class="ruby-identifier">c</span> = ((<span class="ruby-identifier">b</span> <span class="ruby-operator">-</span> <span class="ruby-value">122.1</span>) <span class="ruby-operator">/</span> <span class="ruby-value">365.25</span>).<span class="ruby-identifier">floor</span>
427:     <span class="ruby-identifier">d</span> = (<span class="ruby-value">365.25</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">c</span>).<span class="ruby-identifier">floor</span>
428:     <span class="ruby-identifier">e</span> = ((<span class="ruby-identifier">b</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">d</span>) <span class="ruby-operator">/</span> <span class="ruby-value">30.6001</span>).<span class="ruby-identifier">floor</span>
429:     <span class="ruby-identifier">dom</span> = <span class="ruby-identifier">b</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">-</span> (<span class="ruby-value">30.6001</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">e</span>).<span class="ruby-identifier">floor</span>
430:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span> <span class="ruby-operator">&lt;=</span> <span class="ruby-value">13</span>
431:       <span class="ruby-identifier">m</span> = <span class="ruby-identifier">e</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>
432:       <span class="ruby-identifier">y</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">-</span> <span class="ruby-value">4716</span>
433:     <span class="ruby-keyword kw">else</span>
434:       <span class="ruby-identifier">m</span> = <span class="ruby-identifier">e</span> <span class="ruby-operator">-</span> <span class="ruby-value">13</span>
435:       <span class="ruby-identifier">y</span> = <span class="ruby-identifier">c</span> <span class="ruby-operator">-</span> <span class="ruby-value">4715</span>
436:     <span class="ruby-keyword kw">end</span>
437:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">dom</span>
438:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000597" class="method">
  <div id="M000597_title" class="title">
    <b>jd_to_commercial</b>(jd, sg=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to a Commercial <a
href="index.html?a=C00000047&name=Date">Date</a>
</p>
<p>
<tt>jd</tt> is the Julian Day Number to convert. <tt>sg</tt> specifies the
Day of Calendar Reform.
</p>
<p>
Returns the corresponding Commercial <a
href="index.html?a=C00000047&name=Date">Date</a> as [commercial_year,
week_of_year, day_of_week]
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000597_source')" id="l_M000597_source">show source</a> ]</p>
  <div id="M000597_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 459</span>
459:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_commercial</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">GREGORIAN</span>)
460:     <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">fix_style</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
461:     <span class="ruby-identifier">a</span> = <span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">ns</span>)[<span class="ruby-value">0</span>]
462:     <span class="ruby-identifier">y</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">jd</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">commercial_to_jd</span>(<span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">ns</span>) <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">a</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">a</span> <span class="ruby-keyword kw">end</span>
463:     <span class="ruby-identifier">w</span> = <span class="ruby-value">1</span> <span class="ruby-operator">+</span> ((<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">commercial_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">ns</span>)) <span class="ruby-operator">/</span> <span class="ruby-value">7</span>).<span class="ruby-identifier">floor</span>
464:     <span class="ruby-identifier">d</span> = (<span class="ruby-identifier">jd</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">7</span>
465:     <span class="ruby-identifier">d</span> = <span class="ruby-value">7</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
466:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>
467:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000608" class="method">
  <div id="M000608_title" class="title">
    <b>jd_to_ld</b>(jd)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to the number of days since the adoption of the
Gregorian Calendar (in Italy).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000608_source')" id="l_M000608_source">show source</a> ]</p>
  <div id="M000608_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 554</span>
554:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_ld</span>(<span class="ruby-identifier">jd</span>) <span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-constant">LD_EPOCH_IN_CJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000606" class="method">
  <div id="M000606_title" class="title">
    <b>jd_to_mjd</b>(jd)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to a Modified Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000606_source')" id="l_M000606_source">show source</a> ]</p>
  <div id="M000606_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 546</span>
546:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_mjd</span>(<span class="ruby-identifier">jd</span>) <span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-constant">MJD_EPOCH_IN_CJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000593" class="method">
  <div id="M000593_title" class="title">
    <b>jd_to_ordinal</b>(jd, sg=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to an Ordinal <a
href="index.html?a=C00000047&name=Date">Date</a>.
</p>
<p>
<tt>jd</tt> is the Julian Day Number to convert. <tt>sg</tt> specifies the
Day of Calendar Reform.
</p>
<p>
Returns the corresponding Ordinal <a
href="index.html?a=C00000047&name=Date">Date</a> as [year, day_of_year]
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000593_source')" id="l_M000593_source">show source</a> ]</p>
  <div id="M000593_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 385</span>
385:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_ordinal</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">GREGORIAN</span>)
386:     <span class="ruby-identifier">y</span> = <span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)[<span class="ruby-value">0</span>]
387:     <span class="ruby-identifier">doy</span> = <span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>, <span class="ruby-value">12</span>, <span class="ruby-value">31</span>, <span class="ruby-identifier">fix_style</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>))
388:     <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">y</span>, <span class="ruby-identifier">doy</span>
389:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000609" class="method">
  <div id="M000609_title" class="title">
    <b>jd_to_wday</b>(jd)
  </div>
  <div class="description">
  <p>
Convert a Julian Day Number to the day of the week.
</p>
<p>
Sunday is day-of-week 0; Saturday is day-of-week 6.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000609_source')" id="l_M000609_source">show source</a> ]</p>
  <div id="M000609_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 559</span>
559:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">jd_to_wday</span>(<span class="ruby-identifier">jd</span>) (<span class="ruby-identifier">jd</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) <span class="ruby-operator">%</span> <span class="ruby-value">7</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000590" class="method">
  <div id="M000590_title" class="title">
    <b>julian?</b>(jd, sg)
  </div>
  <div class="description">
  <p>
Does a given Julian Day Number fall inside the old-style (Julian) calendar?
</p>
<p>
<tt>jd</tt> is the Julian Day Number in question. <tt>sg</tt> may be
Date::GREGORIAN, in which case the answer is false; it may be Date::JULIAN,
in which case the answer is true; or it may a number representing the Day
of Calendar Reform. Date::ENGLAND and Date::ITALY are two possible such
days.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000590_source')" id="l_M000590_source">show source</a> ]</p>
  <div id="M000590_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">julian?</span> (<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
341:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">sg</span>
342:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Numeric</span>
343:       <span class="ruby-identifier">jd</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">sg</span>
344:     <span class="ruby-keyword kw">else</span>
345:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
346:         <span class="ruby-identifier">warn</span>(<span class="ruby-node">&quot;#{caller.shift.sub(/:in .*/, '')}: &quot;</span> \
347: <span class="ruby-value str">&quot;warning: do not use non-numerical object as julian day number anymore&quot;</span>)
348:       <span class="ruby-keyword kw">end</span>
349:       <span class="ruby-keyword kw">not</span> <span class="ruby-identifier">sg</span>
350:     <span class="ruby-keyword kw">end</span>
351:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000610" class="method">
  <div id="M000610_title" class="title">
    <b>julian_leap?</b>(y)
  </div>
  <div class="description">
  <p>
Is a year a leap year in the Julian calendar?
</p>
<p>
All years divisible by 4 are leap years in the Julian calendar.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000610_source')" id="l_M000610_source">show source</a> ]</p>
  <div id="M000610_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 564</span>
564:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">julian_leap?</span> (<span class="ruby-identifier">y</span>) <span class="ruby-identifier">y</span> <span class="ruby-operator">%</span> <span class="ruby-value">4</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000607" class="method">
  <div id="M000607_title" class="title">
    <b>ld_to_jd</b>(ld)
  </div>
  <div class="description">
  <p>
Convert a count of the number of days since the adoption of the Gregorian
Calendar (in Italy) to a Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000607_source')" id="l_M000607_source">show source</a> ]</p>
  <div id="M000607_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 550</span>
550:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ld_to_jd</span>(<span class="ruby-identifier">ld</span>) <span class="ruby-identifier">ld</span> <span class="ruby-operator">+</span> <span class="ruby-constant">LD_EPOCH_IN_CJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000605" class="method">
  <div id="M000605_title" class="title">
    <b>mjd_to_jd</b>(mjd)
  </div>
  <div class="description">
  <p>
Convert a Modified Julian Day Number to a Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000605_source')" id="l_M000605_source">show source</a> ]</p>
  <div id="M000605_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 542</span>
542:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">mjd_to_jd</span>(<span class="ruby-identifier">mjd</span>) <span class="ruby-identifier">mjd</span> <span class="ruby-operator">+</span> <span class="ruby-constant">MJD_EPOCH_IN_CJD</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000623" class="method">
  <div id="M000623_title" class="title">
    <b>new</b>(ajd=0, of=0, sg=ITALY)
  </div>
  <div class="description">
  <p>
<b>NOTE</b> this is the documentation for the method new!(). If you are
reading this as the documentation for new(), that is because rdoc
doesn&#8217;t fully support the aliasing of the initialize() method. new()
is in fact an alias for <a
href="index.html?a=M000619&name=civil">civil</a>(): read the documentation
for that method instead.
</p>
<p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object.
</p>
<p>
<tt>ajd</tt> is the Astronomical Julian Day Number. <tt>of</tt> is the
offset from UTC as a fraction of a day. Both default to 0.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform to use for this <a
href="index.html?a=C00000047&name=Date">Date</a> object.
</p>
<p>
Using one of the factory methods such as Date::civil is generally easier
and safer.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000623_source')" id="l_M000623_source">show source</a> ]</p>
  <div id="M000623_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1041</span>
1041:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">ajd</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">of</span>=<span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>) <span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-ivar">@sg</span> = <span class="ruby-identifier">ajd</span>, <span class="ruby-identifier">of</span>, <span class="ruby-identifier">sg</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000618" class="method">
  <div id="M000618_title" class="title">
    <b>ordinal</b>(y=-4712, d=1, sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object
from an Ordinal <a href="index.html?a=C00000047&name=Date">Date</a>,
specified by year <tt>y</tt> and day-of-year <tt>d</tt>. <tt>d</tt> can be
negative, in which it counts backwards from the end of the year. No year
wraparound is performed, however. An invalid value for <tt>d</tt> results
in an <a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a>
being raised.
</p>
<p>
<tt>y</tt> defaults to -4712, and <tt>d</tt> to 1; this is Julian Day
Number day 0.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000618_source')" id="l_M000618_source">show source</a> ]</p>
  <div id="M000618_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 730</span>
730:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ordinal</span>(<span class="ruby-identifier">y</span>=<span class="ruby-value">-4712</span>, <span class="ruby-identifier">d</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
731:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">valid_ordinal?</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
732:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">'invalid date'</span>
733:     <span class="ruby-keyword kw">end</span>
734:     <span class="ruby-identifier">new!</span>(<span class="ruby-identifier">jd_to_ajd</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-value">0</span>, <span class="ruby-value">0</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">sg</span>)
735:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000592" class="method">
  <div id="M000592_title" class="title">
    <b>ordinal_to_jd</b>(y, d, sg=GREGORIAN)
  </div>
  <div class="description">
  <p>
Convert an Ordinal <a href="index.html?a=C00000047&name=Date">Date</a> to a
Julian Day Number.
</p>
<p>
<tt>y</tt> and <tt>d</tt> are the year and day-of-year to convert.
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
<p>
Returns the corresponding Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000592_source')" id="l_M000592_source">show source</a> ]</p>
  <div id="M000592_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 374</span>
374:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">ordinal_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">GREGORIAN</span>)
375:     <span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
376:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000622" class="method">
  <div id="M000622_title" class="title">
    <b>parse</b>(str='-4712-01-01', comp=false, sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object by
parsing from a <a href="index.html?a=C00000055&name=String">String</a>,
without specifying the format.
</p>
<p>
<tt>str</tt> is a <a href="index.html?a=C00000055&name=String">String</a>
holding a date representation. <tt>comp</tt> specifies whether to interpret
2-digit years as 19XX (&gt;= 69) or 20XX (&lt; 69); the default is not to.
The method will attempt to parse a date from the <a
href="index.html?a=C00000055&name=String">String</a> using various
heuristics; see <a href="index.html?a=M000589&name=_parse">_parse</a> in
date/format.rb for more details. If parsing fails, an <a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> will be
raised.
</p>
<p>
The default <tt>str</tt> is &#8217;-4712-01-01&#8217;; this is Julian Day
Number day 0.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000622_source')" id="l_M000622_source">show source</a> ]</p>
  <div id="M000622_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 998</span>
 998:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">str</span>=<span class="ruby-value str">'-4712-01-01'</span>, <span class="ruby-identifier">comp</span>=<span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
 999:     <span class="ruby-identifier">elem</span> = <span class="ruby-identifier">_parse</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">comp</span>)
1000:     <span class="ruby-identifier">new_by_frags</span>(<span class="ruby-identifier">elem</span>, <span class="ruby-identifier">sg</span>)
1001:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000621" class="method">
  <div id="M000621_title" class="title">
    <b>strptime</b>(str='-4712-01-01', fmt='%F', sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object by
parsing from a <a href="index.html?a=C00000055&name=String">String</a>
according to a specified format.
</p>
<p>
<tt>str</tt> is a <a href="index.html?a=C00000055&name=String">String</a>
holding a date representation. <tt>fmt</tt> is the format that the date is
in. See date/format.rb for details on supported formats.
</p>
<p>
The default <tt>str</tt> is &#8217;-4712-01-01&#8217;, and the default
<tt>fmt</tt> is &#8217;%F&#8217;, which means Year-Month-Day_of_Month. This
gives Julian Day Number day 0.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
<p>
An <a href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a>
will be raised if <tt>str</tt> cannot be parsed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000621_source')" id="l_M000621_source">show source</a> ]</p>
  <div id="M000621_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 978</span>
978:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">strptime</span>(<span class="ruby-identifier">str</span>=<span class="ruby-value str">'-4712-01-01'</span>, <span class="ruby-identifier">fmt</span>=<span class="ruby-value str">'%F'</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
979:     <span class="ruby-identifier">elem</span> = <span class="ruby-identifier">_strptime</span>(<span class="ruby-identifier">str</span>, <span class="ruby-identifier">fmt</span>)
980:     <span class="ruby-identifier">new_by_frags</span>(<span class="ruby-identifier">elem</span>, <span class="ruby-identifier">sg</span>)
981:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000602" class="method">
  <div id="M000602_title" class="title">
    <b>time_to_day_fraction</b>(h, min, s)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000602_source')" id="l_M000602_source">show source</a> ]</p>
  <div id="M000602_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 523</span>
523:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">time_to_day_fraction</span>(<span class="ruby-identifier">h</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>)
524:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Integer</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">h</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Integer</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">Integer</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">s</span>
525:           <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">h</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">s</span>, <span class="ruby-value">86400</span>) <span class="ruby-comment cmt"># 4p</span>
526:         <span class="ruby-keyword kw">else</span>
527:           (<span class="ruby-identifier">h</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">s</span>).<span class="ruby-identifier">to_r</span><span class="ruby-operator">/</span><span class="ruby-value">86400</span> <span class="ruby-comment cmt"># 4p</span>
528:         <span class="ruby-keyword kw">end</span>
529:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000601" class="method">
  <div id="M000601_title" class="title">
    <b>time_to_day_fraction</b>(h, min, s)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000601_source')" id="l_M000601_source">show source</a> ]</p>
  <div id="M000601_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 519</span>
519:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">time_to_day_fraction</span>(<span class="ruby-identifier">h</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>)
520:       <span class="ruby-constant">Rational</span>(<span class="ruby-identifier">h</span> <span class="ruby-operator">*</span> <span class="ruby-value">3600</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">*</span> <span class="ruby-value">60</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">s</span>, <span class="ruby-value">86400</span>) <span class="ruby-comment cmt"># 4p</span>
521:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000666" class="method">
  <div id="M000666_title" class="title">
    <b>today</b>(sg=ITALY)
  </div>
  <div class="description">
  <p>
Create a new <a href="index.html?a=C00000047&name=Date">Date</a> object
representing today.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000666_source')" id="l_M000666_source">show source</a> ]</p>
  <div id="M000666_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1664</span>
1664:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">today</span>(<span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>) <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:to_date</span>)    .<span class="ruby-identifier">new_start</span>(<span class="ruby-identifier">sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000614" class="method">
  <div id="M000614_title" class="title">
    <b>valid_civil?</b>(y, m, d, sg=ITALY)
  </div>
  <div class="description">
  <p>
Do year <tt>y</tt>, month <tt>m</tt>, and day-of-month <tt>d</tt> make a
valid Civil <a href="index.html?a=C00000047&name=Date">Date</a>? Returns
the corresponding Julian Day Number if they do, nil if they don&#8217;t.
</p>
<p>
<tt>m</tt> and <tt>d</tt> can be negative, in which case they count
backwards from the end of the year and the end of the month respectively.
No wraparound is performed, however, and invalid values cause an <a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> to be
raised. A date falling in the period skipped in the Day of Calendar Reform
adjustment is not valid.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000614_source')" id="l_M000614_source">show source</a> ]</p>
  <div id="M000614_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 620</span>
620:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">valid_civil?</span> (<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
621:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
622:       <span class="ruby-identifier">m</span> <span class="ruby-operator">+=</span> <span class="ruby-value">13</span>
623:     <span class="ruby-keyword kw">end</span>
624:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
625:       <span class="ruby-identifier">ny</span>, <span class="ruby-identifier">nm</span> = (<span class="ruby-identifier">y</span> <span class="ruby-operator">*</span> <span class="ruby-value">12</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">m</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">12</span>)
626:       <span class="ruby-identifier">nm</span>,    = (<span class="ruby-identifier">nm</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">1</span>)
627:       <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">ny</span>, <span class="ruby-identifier">nm</span>, <span class="ruby-identifier">d</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">sg</span>)
628:       <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">fix_style</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
629:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
630:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">ny</span>, <span class="ruby-identifier">nm</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">d</span>, <span class="ruby-identifier">ns</span>)
631:     <span class="ruby-keyword kw">else</span>
632:       <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
633:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
634:     <span class="ruby-keyword kw">end</span>
635:     <span class="ruby-identifier">jd</span>
636:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000615" class="method">
  <div id="M000615_title" class="title">
    <b>valid_commercial?</b>(y, w, d, sg=ITALY)
  </div>
  <div class="description">
  <p>
Do year <tt>y</tt>, week-of-year <tt>w</tt>, and day-of-week <tt>d</tt>
make a valid Commercial <a
href="index.html?a=C00000047&name=Date">Date</a>? Returns the corresponding
Julian Day Number if they do, nil if they don&#8217;t.
</p>
<p>
Monday is day-of-week 1; Sunday is day-of-week 7.
</p>
<p>
<tt>w</tt> and <tt>d</tt> can be negative, in which case they count
backwards from the end of the year and the end of the week respectively. No
wraparound is performed, however, and invalid values cause an <a
href="index.html?a=C00000316&name=ArgumentError">ArgumentError</a> to be
raised. A date falling in the period skipped in the Day of Calendar Reform
adjustment is not valid.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000615_source')" id="l_M000615_source">show source</a> ]</p>
  <div id="M000615_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 654</span>
654:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">valid_commercial?</span> (<span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
655:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
656:       <span class="ruby-identifier">d</span> <span class="ruby-operator">+=</span> <span class="ruby-value">8</span>
657:     <span class="ruby-keyword kw">end</span>
658:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">w</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
659:       <span class="ruby-identifier">ny</span>, <span class="ruby-identifier">nw</span>, <span class="ruby-identifier">nd</span> =
660:         <span class="ruby-identifier">jd_to_commercial</span>(<span class="ruby-identifier">commercial_to_jd</span>(<span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">w</span> <span class="ruby-operator">*</span> <span class="ruby-value">7</span>)
661:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">ny</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">y</span>
662:       <span class="ruby-identifier">w</span> = <span class="ruby-identifier">nw</span>
663:     <span class="ruby-keyword kw">end</span>
664:     <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">commercial_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>)
665:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">gregorian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
666:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">d</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_commercial</span>(<span class="ruby-identifier">jd</span>)
667:     <span class="ruby-identifier">jd</span>
668:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000612" class="method">
  <div id="M000612_title" class="title">
    <b>valid_jd?</b>(jd, sg=ITALY)
  </div>
  <div class="description">
  <p>
Is <tt>jd</tt> a valid Julian Day Number?
</p>
<p>
If it is, returns it. In fact, any value is treated as a valid Julian Day
Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000612_source')" id="l_M000612_source">show source</a> ]</p>
  <div id="M000612_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 579</span>
579:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">valid_jd?</span> (<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>) <span class="ruby-identifier">jd</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000613" class="method">
  <div id="M000613_title" class="title">
    <b>valid_ordinal?</b>(y, d, sg=ITALY)
  </div>
  <div class="description">
  <p>
Do the year <tt>y</tt> and day-of-year <tt>d</tt> make a valid Ordinal <a
href="index.html?a=C00000047&name=Date">Date</a>? Returns the corresponding
Julian Day Number if they do, or nil if they don&#8217;t.
</p>
<p>
<tt>d</tt> can be a negative number, in which case it counts backwards from
the end of the year (-1 being the last day of the year). No year wraparound
is performed, however, so valid values of <tt>d</tt> are -365 .. -1, 1 ..
365 on a non-leap-year, -366 .. -1, 1 .. 366 on a leap year. A date falling
in the period skipped in the Day of Calendar Reform adjustment is not
valid.
</p>
<p>
<tt>sg</tt> specifies the Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000613_source')" id="l_M000613_source">show source</a> ]</p>
  <div id="M000613_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 594</span>
594:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">valid_ordinal?</span> (<span class="ruby-identifier">y</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>=<span class="ruby-constant">ITALY</span>)
595:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
596:       <span class="ruby-identifier">ny</span>, = (<span class="ruby-identifier">y</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">1</span>)
597:       <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">ordinal_to_jd</span>(<span class="ruby-identifier">ny</span>, <span class="ruby-identifier">d</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">sg</span>)
598:       <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">fix_style</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
599:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">y</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_ordinal</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">0</span>]
600:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">ny</span>, <span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_ordinal</span>(<span class="ruby-identifier">jd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">d</span>, <span class="ruby-identifier">ns</span>)
601:     <span class="ruby-keyword kw">else</span>
602:       <span class="ruby-identifier">jd</span> = <span class="ruby-identifier">ordinal_to_jd</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">sg</span>)
603:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">y</span>, <span class="ruby-identifier">d</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">jd_to_ordinal</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-identifier">sg</span>)
604:     <span class="ruby-keyword kw">end</span>
605:     <span class="ruby-identifier">jd</span>
606:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000616" class="method">
  <div id="M000616_title" class="title">
    <b>valid_time?</b>(h, min, s)
  </div>
  <div class="description">
  <p>
Do hour <tt>h</tt>, minute <tt>min</tt>, and second <tt>s</tt> constitute a
valid time?
</p>
<p>
If they do, returns their value as a fraction of a day. If not, returns
nil.
</p>
<p>
The 24-hour clock is used. Negative values of <tt>h</tt>, <tt>min</tt>, and
<tt>sec</tt> are treating as counting backwards from the end of the next
larger unit (e.g. a <tt>min</tt> of -2 is treated as 58). No wraparound is
performed.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000616_source')" id="l_M000616_source">show source</a> ]</p>
  <div id="M000616_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 697</span>
697:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">valid_time?</span> (<span class="ruby-identifier">h</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>)
698:     <span class="ruby-identifier">h</span>   <span class="ruby-operator">+=</span> <span class="ruby-value">24</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">h</span>   <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
699:     <span class="ruby-identifier">min</span> <span class="ruby-operator">+=</span> <span class="ruby-value">60</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
700:     <span class="ruby-identifier">s</span>   <span class="ruby-operator">+=</span> <span class="ruby-value">60</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>   <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span>
701:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">unless</span> ((<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">24</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">h</span> <span class="ruby-operator">&amp;&amp;</span>
702:                    (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">60</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&amp;&amp;</span>
703:                    (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-value">60</span>) <span class="ruby-operator">===</span> <span class="ruby-identifier">s</span>) <span class="ruby-operator">||</span>
704:                   (<span class="ruby-value">24</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">h</span> <span class="ruby-operator">&amp;&amp;</span>
705:                     <span class="ruby-value">0</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">min</span> <span class="ruby-operator">&amp;&amp;</span>
706:                     <span class="ruby-value">0</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">s</span>)
707:     <span class="ruby-identifier">time_to_day_fraction</span>(<span class="ruby-identifier">h</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">s</span>)
708:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000649" class="method">
  <div id="M000649_title" class="title">
    <b>+</b>(n)
  </div>
  <div class="description">
  <p>
Return a new <a href="index.html?a=C00000047&name=Date">Date</a> object
that is <tt>n</tt> days later than the current one.
</p>
<p>
<tt>n</tt> may be a negative value, in which case the new <a
href="index.html?a=C00000047&name=Date">Date</a> is earlier than the
current one; however, #-() might be more intuitive.
</p>
<p>
If <tt>n</tt> is not a <a
href="index.html?a=C00000009&name=Numeric">Numeric</a>, a <a
href="index.html?a=C00000091&name=TypeError">TypeError</a> will be thrown.
In particular, two Dates cannot be added to each other.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000649_source')" id="l_M000649_source">show source</a> ]</p>
  <div id="M000649_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1233</span>
1233:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">n</span>)
1234:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">n</span>
1235:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Numeric</span>; <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new!</span>(<span class="ruby-ivar">@ajd</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">n</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-ivar">@sg</span>)
1236:     <span class="ruby-keyword kw">end</span>
1237:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-value str">'expected numeric'</span>
1238:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000650" class="method">
  <div id="M000650_title" class="title">
    <b>-</b>(x)
  </div>
  <div class="description">
  <p>
If <tt>x</tt> is a <a
href="index.html?a=C00000009&name=Numeric">Numeric</a> value, create a new
<a href="index.html?a=C00000047&name=Date">Date</a> object that is
<tt>x</tt> days earlier than the current one.
</p>
<p>
If <tt>x</tt> is a <a href="index.html?a=C00000047&name=Date">Date</a>,
return the number of days between the two dates; or, more precisely, how
many days later the current date is than <tt>x</tt>.
</p>
<p>
If <tt>x</tt> is neither <a
href="index.html?a=C00000009&name=Numeric">Numeric</a> nor a <a
href="index.html?a=C00000047&name=Date">Date</a>, a <a
href="index.html?a=C00000091&name=TypeError">TypeError</a> is raised.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000650_source')" id="l_M000650_source">show source</a> ]</p>
  <div id="M000650_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1248</span>
1248:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">x</span>)
1249:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">x</span>
1250:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Numeric</span>; <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new!</span>(<span class="ruby-ivar">@ajd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">x</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-ivar">@sg</span>)
1251:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Date</span>;    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@ajd</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">ajd</span>
1252:     <span class="ruby-keyword kw">end</span>
1253:     <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>, <span class="ruby-value str">'expected numeric or date'</span>
1254:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000656" class="method">
  <div id="M000656_title" class="title">
    <b>&lt;&lt;</b>(n)
  </div>
  <div class="description">
  <p>
Return a new <a href="index.html?a=C00000047&name=Date">Date</a> object
that is <tt>n</tt> months earlier than the current one.
</p>
<p>
If the day-of-the-month of the current <a
href="index.html?a=C00000047&name=Date">Date</a> is greater than the last
day of the target month, the day-of-the-month of the returned <a
href="index.html?a=C00000047&name=Date">Date</a> will be the last day of
the target month.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000656_source')" id="l_M000656_source">show source</a> ]</p>
  <div id="M000656_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1319</span>
1319:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-identifier">n</span>) <span class="ruby-keyword kw">self</span> <span class="ruby-operator">&gt;&gt;</span> <span class="ruby-operator">-</span><span class="ruby-identifier">n</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000651" class="method">
  <div id="M000651_title" class="title">
    <b>&lt;=&gt;</b>(other)
  </div>
  <div class="description">
  <p>
Compare this date with another date.
</p>
<p>
<tt>other</tt> can also be a <a
href="index.html?a=C00000009&name=Numeric">Numeric</a> value, in which case
it is interpreted as an Astronomical Julian Day Number.
</p>
<p>
Comparison is by Astronomical Julian Day Number, including fractional days.
This means that both the time and the timezone offset are taken into
account when comparing two <a
href="index.html?a=C00000300&name=DateTime">DateTime</a> instances. When
comparing a <a href="index.html?a=C00000300&name=DateTime">DateTime</a>
instance with a <a href="index.html?a=C00000047&name=Date">Date</a>
instance, the time of the latter will be considered as falling on midnight
UTC.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000651_source')" id="l_M000651_source">show source</a> ]</p>
  <div id="M000651_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1267</span>
1267:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&lt;=&gt;</span> (<span class="ruby-identifier">other</span>)
1268:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
1269:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Numeric</span>; <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@ajd</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>
1270:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Date</span>;    <span class="ruby-keyword kw">return</span> <span class="ruby-ivar">@ajd</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">ajd</span>
1271:     <span class="ruby-keyword kw">end</span>
1272:     <span class="ruby-keyword kw">nil</span>
1273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000652" class="method">
  <div id="M000652_title" class="title">
    <b>===</b>(other)
  </div>
  <div class="description">
  <p>
The relationship operator for <a
href="index.html?a=C00000047&name=Date">Date</a>.
</p>
<p>
Compares dates by Julian Day Number. When comparing two <a
href="index.html?a=C00000300&name=DateTime">DateTime</a> instances, or a <a
href="index.html?a=C00000300&name=DateTime">DateTime</a> with a <a
href="index.html?a=C00000047&name=Date">Date</a>, the instances will be
regarded as equivalent if they fall on the same date in local time.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000652_source')" id="l_M000652_source">show source</a> ]</p>
  <div id="M000652_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1281</span>
1281:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">===</span> (<span class="ruby-identifier">other</span>)
1282:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">other</span>
1283:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Numeric</span>; <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">jd</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>
1284:     <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Date</span>;    <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">jd</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">jd</span>
1285:     <span class="ruby-keyword kw">end</span>
1286:     <span class="ruby-keyword kw">false</span>
1287:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000655" class="method">
  <div id="M000655_title" class="title">
    <b>&gt;&gt;</b>(n)
  </div>
  <div class="description">
  <p>
Return a new <a href="index.html?a=C00000047&name=Date">Date</a> object
that is <tt>n</tt> months later than the current one.
</p>
<p>
If the day-of-the-month of the current <a
href="index.html?a=C00000047&name=Date">Date</a> is greater than the last
day of the target month, the day-of-the-month of the returned <a
href="index.html?a=C00000047&name=Date">Date</a> will be the last day of
the target month.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000655_source')" id="l_M000655_source">show source</a> ]</p>
  <div id="M000655_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1305</span>
1305:   <span class="ruby-keyword kw">def</span> <span class="ruby-operator">&gt;&gt;</span> (<span class="ruby-identifier">n</span>)
1306:     <span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span> = (<span class="ruby-identifier">year</span> <span class="ruby-operator">*</span> <span class="ruby-value">12</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">mon</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">n</span>).<span class="ruby-identifier">divmod</span>(<span class="ruby-value">12</span>)
1307:     <span class="ruby-identifier">m</span>,   = (<span class="ruby-identifier">m</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>)                    .<span class="ruby-identifier">divmod</span>(<span class="ruby-value">1</span>)
1308:     <span class="ruby-identifier">d</span> = <span class="ruby-identifier">mday</span>
1309:     <span class="ruby-identifier">d</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">jd2</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">valid_civil?</span>(<span class="ruby-identifier">y</span>, <span class="ruby-identifier">m</span>, <span class="ruby-identifier">d</span>, <span class="ruby-identifier">fix_style</span>)
1310:     <span class="ruby-keyword kw">self</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">jd2</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">jd</span>)
1311:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000664" class="method">
  <div id="M000664_title" class="title">
    <b>_dump</b>(limit)
  </div>
  <div class="description">
  <p>
Dump to <a href="index.html?a=C00001016&name=Marshal">Marshal</a> format.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000664_source')" id="l_M000664_source">show source</a> ]</p>
  <div id="M000664_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1384</span>
1384:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_dump</span>(<span class="ruby-identifier">limit</span>) <span class="ruby-constant">Marshal</span>.<span class="ruby-identifier">dump</span>([<span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-ivar">@sg</span>], <span class="ruby-value">-1</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000624" class="method">
  <div id="M000624_title" class="title">
    <b>ajd</b>()
  </div>
  <div class="description">
  <p>
Get the date as an Astronomical Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000624_source')" id="l_M000624_source">show source</a> ]</p>
  <div id="M000624_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1044</span>
1044:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ajd</span>() <span class="ruby-ivar">@ajd</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000625" class="method">
  <div id="M000625_title" class="title">
    <b>amjd</b>()
  </div>
  <div class="description">
  <p>
Get the date as an Astronomical Modified Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000625_source')" id="l_M000625_source">show source</a> ]</p>
  <div id="M000625_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1047</span>
1047:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">amjd</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ajd_to_amjd</span>(<span class="ruby-ivar">@ajd</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000586" class="method">
  <div id="M000586_title" class="title">
    <b>asctime</b>()
  </div>
  <div class="description">
  <p>
alias_method :format, :strftime
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000587&name=ctime">ctime</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000586_source')" id="l_M000586_source">show source</a> ]</p>
  <div id="M000586_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date/format.rb, line 352</span>
352:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">asctime</span>() <span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%c'</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000587" class="method">
  <div id="M000587_title" class="title">
    <b>ctime</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000586&name=asctime">asctime</a>
</p>
  </div>
</div>
<div id="M000638" class="method">
  <div id="M000638_title" class="title">
    <b>cwday</b>()
  </div>
  <div class="description">
  <p>
Get the commercial day of the week of this date. Monday is commercial
day-of-week 1; Sunday is commercial day-of-week 7.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000638_source')" id="l_M000638_source">show source</a> ]</p>
  <div id="M000638_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1147</span>
1147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cwday</span>() <span class="ruby-identifier">commercial</span>[<span class="ruby-value">2</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000637" class="method">
  <div id="M000637_title" class="title">
    <b>cweek</b>()
  </div>
  <div class="description">
  <p>
Get the commercial week of the year of this date.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000637_source')" id="l_M000637_source">show source</a> ]</p>
  <div id="M000637_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1143</span>
1143:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cweek</span>() <span class="ruby-identifier">commercial</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000636" class="method">
  <div id="M000636_title" class="title">
    <b>cwyear</b>()
  </div>
  <div class="description">
  <p>
Get the commercial year of this date. See <b>Commercial</b> <b><a
href="index.html?a=C00000047&name=Date">Date</a></b> in the introduction
for how this differs from the normal year.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000636_source')" id="l_M000636_source">show source</a> ]</p>
  <div id="M000636_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1140</span>
1140:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cwyear</span>() <span class="ruby-identifier">commercial</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000635" class="method">
  <div id="M000635_title" class="title">
    <b>day</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000633&name=mday">mday</a>
</p>
  </div>
</div>
<div id="M000627" class="method">
  <div id="M000627_title" class="title">
    <b>day_fraction</b>()
  </div>
  <div class="description">
  <p>
Get any fractional day part of the date.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000627_source')" id="l_M000627_source">show source</a> ]</p>
  <div id="M000627_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1055</span>
1055:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">day_fraction</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ajd_to_jd</span>(<span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>)[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000659" class="method">
  <div id="M000659_title" class="title">
    <b>downto</b>(min) {|date| ...}
  </div>
  <div class="description">
  <p>
Step backward one day at a time until we reach <tt>min</tt> (inclusive),
yielding each date as we go.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000659_source')" id="l_M000659_source">show source</a> ]</p>
  <div id="M000659_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1363</span>
1363:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">downto</span>(<span class="ruby-identifier">min</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: date</span>
1364:     <span class="ruby-identifier">step</span>(<span class="ruby-identifier">min</span>, <span class="ruby-value">-1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1365:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000646" class="method">
  <div id="M000646_title" class="title">
    <b>england</b>()
  </div>
  <div class="description">
  <p>
Create a copy of this <a href="index.html?a=C00000047&name=Date">Date</a>
object that uses the English/Colonial Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000646_source')" id="l_M000646_source">show source</a> ]</p>
  <div id="M000646_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1203</span>
1203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">england</span>() <span class="ruby-identifier">new_start</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">ENGLAND</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000660" class="method">
  <div id="M000660_title" class="title">
    <b>eql?</b>(other)
  </div>
  <div class="description">
  <p>
Is this <a href="index.html?a=C00000047&name=Date">Date</a> equal to
<tt>other</tt>?
</p>
<p>
<tt>other</tt> must both be a <a
href="index.html?a=C00000047&name=Date">Date</a> object, and represent the
same date.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000660_source')" id="l_M000660_source">show source</a> ]</p>
  <div id="M000660_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1370</span>
1370:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql?</span> (<span class="ruby-identifier">other</span>) <span class="ruby-constant">Date</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">other</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">self</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000648" class="method">
  <div id="M000648_title" class="title">
    <b>gregorian</b>()
  </div>
  <div class="description">
  <p>
Create a copy of this <a href="index.html?a=C00000047&name=Date">Date</a>
object that always uses the Gregorian Calendar.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000648_source')" id="l_M000648_source">show source</a> ]</p>
  <div id="M000648_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1211</span>
1211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gregorian</span>() <span class="ruby-identifier">new_start</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">GREGORIAN</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000641" class="method">
  <div id="M000641_title" class="title">
    <b>gregorian?</b>()
  </div>
  <div class="description">
  <p>
Is the current date new-style (Gregorian Calendar)?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000641_source')" id="l_M000641_source">show source</a> ]</p>
  <div id="M000641_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1171</span>
1171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">gregorian?</span> () <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">gregorian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-ivar">@sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000661" class="method">
  <div id="M000661_title" class="title">
    <b>hash</b>()
  </div>
  <div class="description">
  <p>
Calculate a hash value for this date.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000661_source')" id="l_M000661_source">show source</a> ]</p>
  <div id="M000661_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1373</span>
1373:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hash</span>() <span class="ruby-ivar">@ajd</span>.<span class="ruby-identifier">hash</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000662" class="method">
  <div id="M000662_title" class="title">
    <b>inspect</b>()
  </div>
  <div class="description">
  <p>
Return internal object state as a programmer-readable string.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000662_source')" id="l_M000662_source">show source</a> ]</p>
  <div id="M000662_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1376</span>
1376:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect</span>() <span class="ruby-identifier">format</span>(<span class="ruby-value str">'#&lt;%s: %s,%s,%s&gt;'</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>, <span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-ivar">@sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000645" class="method">
  <div id="M000645_title" class="title">
    <b>italy</b>()
  </div>
  <div class="description">
  <p>
Create a copy of this <a href="index.html?a=C00000047&name=Date">Date</a>
object that uses the Italian/Catholic Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000645_source')" id="l_M000645_source">show source</a> ]</p>
  <div id="M000645_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1199</span>
1199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">italy</span>() <span class="ruby-identifier">new_start</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">ITALY</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000626" class="method">
  <div id="M000626_title" class="title">
    <b>jd</b>()
  </div>
  <div class="description">
  <p>
Get the date as a Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000626_source')" id="l_M000626_source">show source</a> ]</p>
  <div id="M000626_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1052</span>
1052:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">jd</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">ajd_to_jd</span>(<span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>)[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000647" class="method">
  <div id="M000647_title" class="title">
    <b>julian</b>()
  </div>
  <div class="description">
  <p>
Create a copy of this <a href="index.html?a=C00000047&name=Date">Date</a>
object that always uses the Julian Calendar.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000647_source')" id="l_M000647_source">show source</a> ]</p>
  <div id="M000647_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1207</span>
1207:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">julian</span>() <span class="ruby-identifier">new_start</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">JULIAN</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000640" class="method">
  <div id="M000640_title" class="title">
    <b>julian?</b>()
  </div>
  <div class="description">
  <p>
Is the current date old-style (Julian Calendar)?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000640_source')" id="l_M000640_source">show source</a> ]</p>
  <div id="M000640_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1168</span>
1168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">julian?</span> () <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">julian?</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-ivar">@sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000629" class="method">
  <div id="M000629_title" class="title">
    <b>ld</b>()
  </div>
  <div class="description">
  <p>
Get the date as the number of days since the Day of Calendar Reform (in
Italy and the Catholic countries).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000629_source')" id="l_M000629_source">show source</a> ]</p>
  <div id="M000629_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1062</span>
1062:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ld</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">jd_to_ld</span>(<span class="ruby-identifier">jd</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000642" class="method">
  <div id="M000642_title" class="title">
    <b>leap?</b>()
  </div>
  <div class="description">
  <p>
Is this a leap year?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000642_source')" id="l_M000642_source">show source</a> ]</p>
  <div id="M000642_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1184</span>
1184:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">leap?</span>
1185:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">jd_to_civil</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">civil_to_jd</span>(<span class="ruby-identifier">year</span>, <span class="ruby-value">3</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">fix_style</span>) <span class="ruby-operator">-</span> <span class="ruby-value">1</span>,
1186:                      <span class="ruby-identifier">fix_style</span>)[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">29</span>
1187:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000633" class="method">
  <div id="M000633_title" class="title">
    <b>mday</b>()
  </div>
  <div class="description">
  <p>
Get the day-of-the-month of this date.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000635&name=day">day</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000633_source')" id="l_M000633_source">show source</a> ]</p>
  <div id="M000633_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1095</span>
1095:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mday</span>() <span class="ruby-identifier">civil</span>[<span class="ruby-value">2</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000628" class="method">
  <div id="M000628_title" class="title">
    <b>mjd</b>()
  </div>
  <div class="description">
  <p>
Get the date as a Modified Julian Day Number.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000628_source')" id="l_M000628_source">show source</a> ]</p>
  <div id="M000628_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1058</span>
1058:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mjd</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">jd_to_mjd</span>(<span class="ruby-identifier">jd</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000632" class="method">
  <div id="M000632_title" class="title">
    <b>mon</b>()
  </div>
  <div class="description">
  <p>
Get the month of this date.
</p>
<p>
January is month 1.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000634&name=month">month</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000632_source')" id="l_M000632_source">show source</a> ]</p>
  <div id="M000632_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1092</span>
1092:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">mon</span>() <span class="ruby-identifier">civil</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000634" class="method">
  <div id="M000634_title" class="title">
    <b>month</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000632&name=mon">mon</a>
</p>
  </div>
</div>
<div id="M000644" class="method">
  <div id="M000644_title" class="title">
    <b>new_start</b>(sg=self.class::ITALY)
  </div>
  <div class="description">
  <p>
Create a copy of this <a href="index.html?a=C00000047&name=Date">Date</a>
object using a new Day of Calendar Reform.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000644_source')" id="l_M000644_source">show source</a> ]</p>
  <div id="M000644_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1195</span>
1195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">new_start</span>(<span class="ruby-identifier">sg</span>=<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span><span class="ruby-operator">::</span><span class="ruby-constant">ITALY</span>) <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">new!</span>(<span class="ruby-ivar">@ajd</span>, <span class="ruby-ivar">@of</span>, <span class="ruby-identifier">sg</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000653" class="method">
  <div id="M000653_title" class="title">
    <b>next</b>()
  </div>
  <div class="description">
  <p>
Return a new <a href="index.html?a=C00000047&name=Date">Date</a> one day
after this one.
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000654&name=succ">succ</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000653_source')" id="l_M000653_source">show source</a> ]</p>
  <div id="M000653_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1295</span>
1295:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">next</span>() <span class="ruby-identifier">next_day</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000643" class="method">
  <div id="M000643_title" class="title">
    <b>start</b>()
  </div>
  <div class="description">
  <p>
When is the Day of Calendar Reform for this <a
href="index.html?a=C00000047&name=Date">Date</a> object?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000643_source')" id="l_M000643_source">show source</a> ]</p>
  <div id="M000643_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1192</span>
1192:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">start</span>() <span class="ruby-ivar">@sg</span> <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000657" class="method">
  <div id="M000657_title" class="title">
    <b>step</b>(limit, step=1) {|date| ...}
  </div>
  <div class="description">
  <p>
Step the current date forward <tt>step</tt> days at a time (or backward, if
<tt>step</tt> is negative) until we reach <tt>limit</tt> (inclusive),
yielding the resultant date at each step.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000657_source')" id="l_M000657_source">show source</a> ]</p>
  <div id="M000657_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1335</span>
1335:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">step</span>(<span class="ruby-identifier">limit</span>, <span class="ruby-identifier">step</span>=<span class="ruby-value">1</span>) <span class="ruby-comment cmt"># :yield: date</span>
1336: ??
1337: ??
1338:     <span class="ruby-identifier">da</span> = <span class="ruby-keyword kw">self</span>
1339:     <span class="ruby-identifier">op</span> = <span class="ruby-node">%w(- &lt;= &gt;=)</span>[<span class="ruby-identifier">step</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-value">0</span>]
1340:     <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">da</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">op</span>, <span class="ruby-identifier">limit</span>)
1341:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">da</span>
1342:       <span class="ruby-identifier">da</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">step</span>
1343:     <span class="ruby-keyword kw">end</span>
1344:     <span class="ruby-keyword kw">self</span>
1345:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000585" class="method">
  <div id="M000585_title" class="title">
    <b>strftime</b>(fmt='%F')
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000585_source')" id="l_M000585_source">show source</a> ]</p>
  <div id="M000585_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date/format.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">strftime</span>(<span class="ruby-identifier">fmt</span>=<span class="ruby-value str">'%F'</span>)
218:     <span class="ruby-identifier">fmt</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/%([-_0^#]+)?(\d+)?([EO]?(?::{1,3}z|.))/</span><span class="ruby-identifier">m</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span>
219:       <span class="ruby-identifier">f</span> = {}
220:       <span class="ruby-identifier">a</span> = <span class="ruby-identifier">$&amp;</span>
221:       <span class="ruby-identifier">s</span>, <span class="ruby-identifier">w</span>, <span class="ruby-identifier">c</span> = <span class="ruby-identifier">$1</span>, <span class="ruby-identifier">$2</span>, <span class="ruby-identifier">$3</span>
222:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">s</span>
223:         <span class="ruby-identifier">s</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/./</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span>
224:           <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">k</span>
225:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'-'</span>; <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:p</span>] = <span class="ruby-value str">'-'</span>
226:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'_'</span>; <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:p</span>] = <span class="ruby-value str">&quot;\s&quot;</span>
227:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'0'</span>; <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:p</span>] = <span class="ruby-value str">'0'</span>
228:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'^'</span>; <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:u</span>] = <span class="ruby-keyword kw">true</span>
229:           <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'#'</span>; <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:x</span>] = <span class="ruby-keyword kw">true</span>
230:           <span class="ruby-keyword kw">end</span>
231:         <span class="ruby-keyword kw">end</span>
232:       <span class="ruby-keyword kw">end</span>
233:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">w</span>
234:         <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>] = <span class="ruby-identifier">w</span>.<span class="ruby-identifier">to_i</span>
235:       <span class="ruby-keyword kw">end</span>
236:       <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">c</span>
237:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'A'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-constant">DAYNAMES</span>[<span class="ruby-identifier">wday</span>], <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
238:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'a'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-constant">ABBR_DAYNAMES</span>[<span class="ruby-identifier">wday</span>], <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
239:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'B'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-constant">MONTHNAMES</span>[<span class="ruby-identifier">mon</span>], <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
240:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'b'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-constant">ABBR_MONTHNAMES</span>[<span class="ruby-identifier">mon</span>], <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
241:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'C'</span>, <span class="ruby-value str">'EC'</span>; <span class="ruby-identifier">emit_sn</span>((<span class="ruby-identifier">year</span> <span class="ruby-operator">/</span> <span class="ruby-value">100</span>).<span class="ruby-identifier">floor</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
242:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'c'</span>, <span class="ruby-value str">'Ec'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%a %b %e %H:%M:%S %Y'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
243:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'D'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%m/%d/%y'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
244:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'d'</span>, <span class="ruby-value str">'Od'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">mday</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
245:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'e'</span>, <span class="ruby-value str">'Oe'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">mday</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
246:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'F'</span>
247:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'%F'</span>
248:           <span class="ruby-identifier">format</span>(<span class="ruby-value str">'%.4d-%02d-%02d'</span>, <span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">mday</span>) <span class="ruby-comment cmt"># 4p</span>
249:         <span class="ruby-keyword kw">else</span>
250:           <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%Y-%m-%d'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
251:         <span class="ruby-keyword kw">end</span>
252:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'G'</span>; <span class="ruby-identifier">emit_sn</span>(<span class="ruby-identifier">cwyear</span>, <span class="ruby-value">4</span>, <span class="ruby-identifier">f</span>)
253:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'g'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">cwyear</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
254:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'H'</span>, <span class="ruby-value str">'OH'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">hour</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
255:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'h'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%b'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
256:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'I'</span>, <span class="ruby-value str">'OI'</span>; <span class="ruby-identifier">emit_n</span>((<span class="ruby-identifier">hour</span> <span class="ruby-operator">%</span> <span class="ruby-value">12</span>).<span class="ruby-identifier">nonzero?</span> <span class="ruby-operator">||</span> <span class="ruby-value">12</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
257:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'j'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">yday</span>, <span class="ruby-value">3</span>, <span class="ruby-identifier">f</span>)
258:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'k'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">hour</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
259:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'L'</span>
260:         <span class="ruby-identifier">emit_n</span>((<span class="ruby-identifier">sec_fraction</span> <span class="ruby-operator">/</span> <span class="ruby-constant">MILLISECONDS_IN_DAY</span>).<span class="ruby-identifier">floor</span>, <span class="ruby-value">3</span>, <span class="ruby-identifier">f</span>)
261:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'l'</span>; <span class="ruby-identifier">emit_a</span>((<span class="ruby-identifier">hour</span> <span class="ruby-operator">%</span> <span class="ruby-value">12</span>).<span class="ruby-identifier">nonzero?</span> <span class="ruby-operator">||</span> <span class="ruby-value">12</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
262:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'M'</span>, <span class="ruby-value str">'OM'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">min</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
263:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'m'</span>, <span class="ruby-value str">'Om'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">mon</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
264:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'N'</span>
265:         <span class="ruby-identifier">emit_n</span>((<span class="ruby-identifier">sec_fraction</span> <span class="ruby-operator">/</span> <span class="ruby-constant">NANOSECONDS_IN_DAY</span>).<span class="ruby-identifier">floor</span>, <span class="ruby-value">9</span>, <span class="ruby-identifier">f</span>)
266:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'n'</span>; <span class="ruby-value str">&quot;\n&quot;</span>
267:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'P'</span>; <span class="ruby-identifier">emit_ad</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%p'</span>).<span class="ruby-identifier">downcase</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
268:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'p'</span>; <span class="ruby-identifier">emit_au</span>(<span class="ruby-keyword kw">if</span> <span class="ruby-identifier">hour</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">12</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value str">'AM'</span> <span class="ruby-keyword kw">else</span> <span class="ruby-value str">'PM'</span> <span class="ruby-keyword kw">end</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
269:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Q'</span>
270:         <span class="ruby-identifier">s</span> = ((<span class="ruby-identifier">ajd</span> <span class="ruby-operator">-</span> <span class="ruby-constant">UNIX_EPOCH_IN_AJD</span>) <span class="ruby-operator">/</span> <span class="ruby-constant">MILLISECONDS_IN_DAY</span>).<span class="ruby-identifier">round</span>
271:         <span class="ruby-identifier">emit_sn</span>(<span class="ruby-identifier">s</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">f</span>)
272:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'R'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%H:%M'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
273:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'r'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%I:%M:%S %p'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
274:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'S'</span>, <span class="ruby-value str">'OS'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">sec</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
275:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'s'</span>
276:         <span class="ruby-identifier">s</span> = ((<span class="ruby-identifier">ajd</span> <span class="ruby-operator">-</span> <span class="ruby-constant">UNIX_EPOCH_IN_AJD</span>) <span class="ruby-operator">/</span> <span class="ruby-constant">SECONDS_IN_DAY</span>).<span class="ruby-identifier">round</span>
277:         <span class="ruby-identifier">emit_sn</span>(<span class="ruby-identifier">s</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">f</span>)
278:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'T'</span>
279:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">m</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'%T'</span>
280:           <span class="ruby-identifier">format</span>(<span class="ruby-value str">'%02d:%02d:%02d'</span>, <span class="ruby-identifier">hour</span>, <span class="ruby-identifier">min</span>, <span class="ruby-identifier">sec</span>) <span class="ruby-comment cmt"># 4p</span>
281:         <span class="ruby-keyword kw">else</span>
282:           <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%H:%M:%S'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
283:         <span class="ruby-keyword kw">end</span>
284:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'t'</span>; <span class="ruby-value str">&quot;\t&quot;</span>
285:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'U'</span>, <span class="ruby-value str">'W'</span>, <span class="ruby-value str">'OU'</span>, <span class="ruby-value str">'OW'</span>
286:         <span class="ruby-identifier">emit_n</span>(<span class="ruby-keyword kw">if</span> <span class="ruby-identifier">c</span>[<span class="ruby-value">-1</span>,<span class="ruby-value">1</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'U'</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">wnum0</span> <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">wnum1</span> <span class="ruby-keyword kw">end</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
287:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'u'</span>, <span class="ruby-value str">'Ou'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">cwday</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">f</span>)
288:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'V'</span>, <span class="ruby-value str">'OV'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">cweek</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
289:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'v'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%e-%b-%Y'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
290:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'w'</span>, <span class="ruby-value str">'Ow'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">wday</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">f</span>)
291:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'X'</span>, <span class="ruby-value str">'EX'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%H:%M:%S'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
292:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'x'</span>, <span class="ruby-value str">'Ex'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%m/%d/%y'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
293:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Y'</span>, <span class="ruby-value str">'EY'</span>; <span class="ruby-identifier">emit_sn</span>(<span class="ruby-identifier">year</span>, <span class="ruby-value">4</span>, <span class="ruby-identifier">f</span>)
294:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'y'</span>, <span class="ruby-value str">'Ey'</span>, <span class="ruby-value str">'Oy'</span>; <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">year</span> <span class="ruby-operator">%</span> <span class="ruby-value">100</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)
295:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'Z'</span>; <span class="ruby-identifier">emit_au</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%:z'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
296:       <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/\A(:{0,3})z/</span>
297:         <span class="ruby-identifier">t</span> = <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">size</span>
298:         <span class="ruby-identifier">sign</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">offset</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">0</span> <span class="ruby-keyword kw">then</span> <span class="ruby-value">-1</span> <span class="ruby-keyword kw">else</span> <span class="ruby-value">+1</span> <span class="ruby-keyword kw">end</span>
299:         <span class="ruby-identifier">fr</span> = <span class="ruby-identifier">offset</span>.<span class="ruby-identifier">abs</span>
300:         <span class="ruby-identifier">ss</span> = <span class="ruby-identifier">fr</span>.<span class="ruby-identifier">div</span>(<span class="ruby-constant">SECONDS_IN_DAY</span>) <span class="ruby-comment cmt"># 4p</span>
301:         <span class="ruby-identifier">hh</span>, <span class="ruby-identifier">ss</span> = <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-value">3600</span>)
302:         <span class="ruby-identifier">mm</span>, <span class="ruby-identifier">ss</span> = <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">divmod</span>(<span class="ruby-value">60</span>)
303:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">t</span> <span class="ruby-operator">==</span> <span class="ruby-value">3</span>
304:           <span class="ruby-keyword kw">if</span>    <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">nonzero?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">t</span> =  <span class="ruby-value">2</span>
305:           <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">mm</span>.<span class="ruby-identifier">nonzero?</span> <span class="ruby-keyword kw">then</span> <span class="ruby-identifier">t</span> =  <span class="ruby-value">1</span>
306:           <span class="ruby-keyword kw">else</span>                   <span class="ruby-identifier">t</span> = <span class="ruby-value">-1</span>
307:           <span class="ruby-keyword kw">end</span>
308:         <span class="ruby-keyword kw">end</span>
309:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">t</span>
310:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">-1</span>
311:           <span class="ruby-identifier">tail</span> = []
312:           <span class="ruby-identifier">sep</span> = <span class="ruby-value str">''</span>
313:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">0</span>
314:           <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>] <span class="ruby-operator">-=</span> <span class="ruby-value">2</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>]
315:           <span class="ruby-identifier">tail</span> = [<span class="ruby-value str">'%02d'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">mm</span>]
316:           <span class="ruby-identifier">sep</span> = <span class="ruby-value str">''</span>
317:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">1</span>
318:           <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>] <span class="ruby-operator">-=</span> <span class="ruby-value">3</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>]
319:           <span class="ruby-identifier">tail</span> = [<span class="ruby-value str">'%02d'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">mm</span>]
320:           <span class="ruby-identifier">sep</span> = <span class="ruby-value str">':'</span>
321:         <span class="ruby-keyword kw">when</span> <span class="ruby-value">2</span>
322:           <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>] <span class="ruby-operator">-=</span> <span class="ruby-value">6</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">f</span>[<span class="ruby-identifier">:w</span>]
323:           <span class="ruby-identifier">tail</span> = [<span class="ruby-value str">'%02d'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">mm</span>, <span class="ruby-value str">'%02d'</span> <span class="ruby-operator">%</span> <span class="ruby-identifier">ss</span>]
324:           <span class="ruby-identifier">sep</span> = <span class="ruby-value str">':'</span>
325:         <span class="ruby-keyword kw">end</span>
326:         ([<span class="ruby-identifier">emit_z</span>(<span class="ruby-identifier">sign</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">hh</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">f</span>)] <span class="ruby-operator">+</span> <span class="ruby-identifier">tail</span>).<span class="ruby-identifier">join</span>(<span class="ruby-identifier">sep</span>)
327:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'%'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-value str">'%'</span>, <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
328:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'+'</span>; <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%a %b %e %H:%M:%S %Z %Y'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
329:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'1'</span>
330:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
331:           <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;warning: strftime: %1 is deprecated; forget this&quot;</span>)
332:         <span class="ruby-keyword kw">end</span>
333:         <span class="ruby-identifier">emit_n</span>(<span class="ruby-identifier">jd</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">f</span>)
334:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'2'</span>
335:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
336:           <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;warning: strftime: %2 is deprecated; use '%Y-%j'&quot;</span>)
337:         <span class="ruby-keyword kw">end</span>
338:         <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%Y-%j'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
339:       <span class="ruby-keyword kw">when</span> <span class="ruby-value str">'3'</span>
340:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$VERBOSE</span>
341:           <span class="ruby-identifier">warn</span>(<span class="ruby-value str">&quot;warning: strftime: %3 is deprecated; use '%F'&quot;</span>)
342:         <span class="ruby-keyword kw">end</span>
343:         <span class="ruby-identifier">emit_a</span>(<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">'%F'</span>), <span class="ruby-value">0</span>, <span class="ruby-identifier">f</span>)
344:       <span class="ruby-keyword kw">else</span>
345:         <span class="ruby-identifier">a</span>
346:       <span class="ruby-keyword kw">end</span>
347:     <span class="ruby-keyword kw">end</span>
348:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000654" class="method">
  <div id="M000654_title" class="title">
    <b>succ</b>()
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000653&name=next">next</a>
</p>
  </div>
</div>
<div id="M000663" class="method">
  <div id="M000663_title" class="title">
    <b>to_s</b>()
  </div>
  <div class="description">
  <p>
Return the date as a human-readable string.
</p>
<p>
The format used is YYYY-MM-DD.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000663_source')" id="l_M000663_source">show source</a> ]</p>
  <div id="M000663_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1381</span>
1381:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_s</span>() <span class="ruby-identifier">format</span>(<span class="ruby-value str">'%.4d-%02d-%02d'</span>, <span class="ruby-identifier">year</span>, <span class="ruby-identifier">mon</span>, <span class="ruby-identifier">mday</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000667" class="method">
  <div id="M000667_title" class="title">
    <b>to_yaml</b>( opts = {} )
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000667_source')" id="l_M000667_source">show source</a> ]</p>
  <div id="M000667_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/yaml/rubytypes.rb, line 349</span>
349:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_yaml</span>( <span class="ruby-identifier">opts</span> = {} )
350:                 <span class="ruby-constant">YAML</span><span class="ruby-operator">::</span><span class="ruby-identifier">quick_emit</span>( <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">opts</span> ) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">out</span><span class="ruby-operator">|</span>
351:             <span class="ruby-identifier">out</span>.<span class="ruby-identifier">scalar</span>( <span class="ruby-value str">&quot;tag:yaml.org,2002:timestamp&quot;</span>, <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">:plain</span> )
352:         <span class="ruby-keyword kw">end</span>
353:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000658" class="method">
  <div id="M000658_title" class="title">
    <b>upto</b>(max) {|date| ...}
  </div>
  <div class="description">
  <p>
Step forward one day at a time until we reach <tt>max</tt> (inclusive),
yielding each date as we go.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000658_source')" id="l_M000658_source">show source</a> ]</p>
  <div id="M000658_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1357</span>
1357:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">upto</span>(<span class="ruby-identifier">max</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>) <span class="ruby-comment cmt"># :yield: date</span>
1358:     <span class="ruby-identifier">step</span>(<span class="ruby-identifier">max</span>, <span class="ruby-value">+1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
1359:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000639" class="method">
  <div id="M000639_title" class="title">
    <b>wday</b>()
  </div>
  <div class="description">
  <p>
Get the week day of this date. Sunday is day-of-week 0; Saturday is
day-of-week 6.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000639_source')" id="l_M000639_source">show source</a> ]</p>
  <div id="M000639_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1151</span>
1151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wday</span>() <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">jd_to_wday</span>(<span class="ruby-identifier">jd</span>) <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000631" class="method">
  <div id="M000631_title" class="title">
    <b>yday</b>()
  </div>
  <div class="description">
  <p>
Get the day-of-the-year of this date.
</p>
<p>
January 1 is day-of-the-year 1
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000631_source')" id="l_M000631_source">show source</a> ]</p>
  <div id="M000631_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1087</span>
1087:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">yday</span>() <span class="ruby-identifier">ordinal</span>[<span class="ruby-value">1</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000630" class="method">
  <div id="M000630_title" class="title">
    <b>year</b>()
  </div>
  <div class="description">
  <p>
Get the year of this date.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000630_source')" id="l_M000630_source">show source</a> ]</p>
  <div id="M000630_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/date.rb, line 1082</span>
1082:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">year</span>() <span class="ruby-identifier">civil</span>[<span class="ruby-value">0</span>] <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>