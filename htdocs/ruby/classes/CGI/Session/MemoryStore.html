  <div id="C00000044">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />MemoryStore<br/>
  In:
<a href="#" onclick="jsHref('files/ruby-1_8_7-p22/lib/cgi/session_rb.html');">ruby-1.8.7-p22/lib/cgi/session.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/YAML/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
In-memory session storage class.
</p>
<p>
Implements session storage as a global in-memory hash. <a
href="index.html?a=C00000042&name=Session">Session</a> data will only
persist for as long as the ruby interpreter instance does.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000574&name=close" >close</a></li>
  <li><a href="index.html?a=M000575&name=delete" >delete</a></li>
  <li><a href="index.html?a=M000571&name=new" >new</a></li>
  <li><a href="index.html?a=M000572&name=restore" >restore</a></li>
  <li><a href="index.html?a=M000573&name=update" >update</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M000571" class="method">
  <div id="M000571_title" class="title">
    <b>new</b>(session, option=nil)
  </div>
  <div class="description">
  <p>
Create a new <a
href="index.html?a=C00000044&name=MemoryStore">MemoryStore</a> instance.
</p>
<p>
<tt>session</tt> is the session this instance is associated with.
<tt>option</tt> is a list of initialisation options. None are currently
recognised.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000571_source')" id="l_M000571_source">show source</a> ]</p>
  <div id="M000571_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/cgi/session.rb, line 461</span>
461:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">session</span>, <span class="ruby-identifier">option</span>=<span class="ruby-keyword kw">nil</span>)
462:         <span class="ruby-ivar">@session_id</span> = <span class="ruby-identifier">session</span>.<span class="ruby-identifier">session_id</span>
463:         <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">GLOBAL_HASH_TABLE</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-ivar">@session_id</span>)
464:           <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">session</span>.<span class="ruby-identifier">new_session</span>
465:             <span class="ruby-identifier">raise</span> <span class="ruby-constant">CGI</span><span class="ruby-operator">::</span><span class="ruby-constant">Session</span><span class="ruby-operator">::</span><span class="ruby-constant">NoSession</span>, <span class="ruby-value str">&quot;uninitialized session&quot;</span>
466:           <span class="ruby-keyword kw">end</span>
467:           <span class="ruby-constant">GLOBAL_HASH_TABLE</span>[<span class="ruby-ivar">@session_id</span>] = {}
468:         <span class="ruby-keyword kw">end</span>
469:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000574" class="method">
  <div id="M000574_title" class="title">
    <b>close</b>()
  </div>
  <div class="description">
  <p>
Close session storage.
</p>
<p>
A no-op.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000574_source')" id="l_M000574_source">show source</a> ]</p>
  <div id="M000574_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/cgi/session.rb, line 488</span>
488:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">close</span>
489:         <span class="ruby-comment cmt"># don't need to close</span>
490:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000575" class="method">
  <div id="M000575_title" class="title">
    <b>delete</b>()
  </div>
  <div class="description">
  <p>
Delete the session state.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000575_source')" id="l_M000575_source">show source</a> ]</p>
  <div id="M000575_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/cgi/session.rb, line 493</span>
493:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete</span>
494:         <span class="ruby-constant">GLOBAL_HASH_TABLE</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-ivar">@session_id</span>)
495:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000572" class="method">
  <div id="M000572_title" class="title">
    <b>restore</b>()
  </div>
  <div class="description">
  <p>
Restore session state.
</p>
<p>
Returns session data as a hash.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000572_source')" id="l_M000572_source">show source</a> ]</p>
  <div id="M000572_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/cgi/session.rb, line 474</span>
474:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">restore</span>
475:         <span class="ruby-constant">GLOBAL_HASH_TABLE</span>[<span class="ruby-ivar">@session_id</span>]
476:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000573" class="method">
  <div id="M000573_title" class="title">
    <b>update</b>()
  </div>
  <div class="description">
  <p>
Update session state.
</p>
<p>
A no-op.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000573_source')" id="l_M000573_source">show source</a> ]</p>
  <div id="M000573_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File ruby-1.8.7-p22/lib/cgi/session.rb, line 481</span>
481:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update</span>
482:         <span class="ruby-comment cmt"># don't need to update; hash is shared</span>
483:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>