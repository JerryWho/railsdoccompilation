  <div id="fileHeader">
    <h1>ar_be_valid.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/spec/rails/matchers/ar_be_valid.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:09:13 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Spec
  module Rails
    module Matchers
    
      class ArBeValid  #:nodoc:
        
        def initialize
          @matcher = Spec::Matchers::Be.new :be_valid
          @matcher.__send__ :handling_predicate!
        end

        def matches?(actual)
          @actual = actual
          @matcher.matches? @actual
        end
      
        def failure_message_for_should
          if @actual.respond_to?(:errors) &amp;&amp;
              ActiveRecord::Errors === @actual.errors
            &quot;Expected #{@actual.inspect} to be valid, but it was not\nErrors: &quot; + @actual.errors.full_messages.join(&quot;, &quot;)            
          else
            @matcher.failure_message_for_should
          end
        end
        
        def failure_message_for_should_not
          @matcher.failure_message_for_should_not
        end
        
        def description
          &quot;be valid&quot;
        end
      end

      # :call-seq:
      #   response.should be_valid
      #   response.should_not be_valid
      def be_valid
        ArBeValid.new
      end
    
    end
  end
end
</pre>
    </div>