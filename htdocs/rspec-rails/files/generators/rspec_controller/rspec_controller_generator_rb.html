  <div id="fileHeader">
    <h1>rspec_controller_generator.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>generators/rspec_controller/rspec_controller_generator.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'rails_generator/generators/components/controller/controller_generator'

class RspecControllerGenerator &lt; ControllerGenerator

  def manifest
    record do |m|
      # Check for class naming collisions.
      m.class_collisions class_path, &quot;#{class_name}Controller&quot;, &quot;#{class_name}Helper&quot;

      # Controller, helper, views, and spec directories.
      m.directory File.join('app/controllers', class_path)
      m.directory File.join('app/helpers', class_path)
      m.directory File.join('app/views', class_path, file_name)
      m.directory File.join('spec/controllers', class_path)
      m.directory File.join('spec/helpers', class_path)
      m.directory File.join('spec/views', class_path, file_name)

			if Rails::VERSION::STRING &lt; &quot;2.0.0&quot;
        @default_file_extension = &quot;rhtml&quot;
      else
        @default_file_extension = &quot;html.erb&quot;
      end

      # Controller spec, class, and helper.
      m.template 'controller_spec.rb',
        File.join('spec/controllers', class_path, &quot;#{file_name}_controller_spec.rb&quot;)

      m.template 'helper_spec.rb',
        File.join('spec/helpers', class_path, &quot;#{file_name}_helper_spec.rb&quot;)

      m.template 'controller:controller.rb',
        File.join('app/controllers', class_path, &quot;#{file_name}_controller.rb&quot;)

      m.template 'controller:helper.rb',
        File.join('app/helpers', class_path, &quot;#{file_name}_helper.rb&quot;)

      # Spec and view template for each action.
      actions.each do |action|
        m.template 'view_spec.rb',
          File.join('spec/views', class_path, file_name, &quot;#{action}.#{@default_file_extension}_spec.rb&quot;),
          :assigns =&gt; { :action =&gt; action, :model =&gt; file_name }
        path = File.join('app/views', class_path, file_name, &quot;#{action}.#{@default_file_extension}&quot;)
        m.template &quot;controller:view.#{@default_file_extension}&quot;,
          path,
          :assigns =&gt; { :action =&gt; action, :path =&gt; path }
      end
    end
  end
end
</pre>
    </div>