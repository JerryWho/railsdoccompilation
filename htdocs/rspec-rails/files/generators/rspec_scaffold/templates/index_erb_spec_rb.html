  <div id="fileHeader">
    <h1>index_erb_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>generators/rspec_scaffold/templates/index_erb_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.expand_path(File.dirname(__FILE__) + '&lt;%= '/..' * class_nesting_depth %&gt;/../../spec_helper')

&lt;% output_attributes = attributes.reject{|attribute| [:datetime, :timestamp, :time, :date].index(attribute.type) } -%&gt;
describe &quot;/&lt;%= table_name %&gt;/index.&lt;%= default_file_extension %&gt;&quot; do
  include &lt;%= controller_class_name %&gt;Helper
  
  before(:each) do
    assigns[:&lt;%= table_name %&gt;] = [
&lt;% [1,2].each_with_index do |id, model_index| -%&gt;
      stub_model(&lt;%= class_name %&gt;&lt;%= output_attributes.empty? ? (model_index == 1 ? ')' : '),') : ',' %&gt;
&lt;% output_attributes.each_with_index do |attribute, attribute_index| -%&gt;
        :&lt;%= attribute.name %&gt; =&gt; &lt;%= attribute.default_value %&gt;&lt;%= attribute_index == output_attributes.length - 1 ? '' : ','%&gt;
&lt;% end -%&gt;
&lt;% if !output_attributes.empty? -%&gt;
      &lt;%= model_index == 1 ? ')' : '),' %&gt;
&lt;% end -%&gt;
&lt;% end -%&gt;
    ]
  end

  it &quot;should render list of &lt;%= table_name %&gt;&quot; do
    render &quot;/&lt;%= table_name %&gt;/index.&lt;%= default_file_extension %&gt;&quot;
&lt;% for attribute in output_attributes -%&gt;
    response.should have_tag(&quot;tr&gt;td&quot;, &lt;%= attribute.default_value %&gt;.to_s, 2)
&lt;% end -%&gt;
  end
end

</pre>
    </div>