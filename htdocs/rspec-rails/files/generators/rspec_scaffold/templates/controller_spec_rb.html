  <div id="fileHeader">
    <h1>controller_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>generators/rspec_scaffold/templates/controller_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.expand_path(File.dirname(__FILE__) + '&lt;%= '/..' * class_nesting_depth %&gt;/../spec_helper')

describe &lt;%= controller_class_name %&gt;Controller do

  def mock_&lt;%= file_name %&gt;(stubs={})
    @mock_&lt;%= file_name %&gt; ||= mock_model(&lt;%= class_name %&gt;, stubs)
  end
  
  describe &quot;responding to GET index&quot; do

    it &quot;should expose all &lt;%= table_name.pluralize %&gt; as @&lt;%= table_name.pluralize %&gt;&quot; do
      &lt;%= class_name %&gt;.should_receive(:find).with(:all).and_return([mock_&lt;%= file_name %&gt;])
      get :index
      assigns[:&lt;%= table_name %&gt;].should == [mock_&lt;%= file_name %&gt;]
    end

    describe &quot;with mime type of xml&quot; do
  
      it &quot;should render all &lt;%= table_name.pluralize %&gt; as xml&quot; do
        request.env[&quot;HTTP_ACCEPT&quot;] = &quot;application/xml&quot;
        &lt;%= class_name %&gt;.should_receive(:find).with(:all).and_return(&lt;%= file_name.pluralize %&gt; = mock(&quot;Array of &lt;%= class_name.pluralize %&gt;&quot;))
        &lt;%= file_name.pluralize %&gt;.should_receive(:to_xml).and_return(&quot;generated XML&quot;)
        get :index
        response.body.should == &quot;generated XML&quot;
      end
    
    end

  end

  describe &quot;responding to GET show&quot; do

    it &quot;should expose the requested &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
      &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
      get :show, :id =&gt; &quot;37&quot;
      assigns[:&lt;%= file_name %&gt;].should equal(mock_&lt;%= file_name %&gt;)
    end
    
    describe &quot;with mime type of xml&quot; do

      it &quot;should render the requested &lt;%= file_name %&gt; as xml&quot; do
        request.env[&quot;HTTP_ACCEPT&quot;] = &quot;application/xml&quot;
        &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
        mock_&lt;%= file_name %&gt;.should_receive(:to_xml).and_return(&quot;generated XML&quot;)
        get :show, :id =&gt; &quot;37&quot;
        response.body.should == &quot;generated XML&quot;
      end

    end
    
  end

  describe &quot;responding to GET new&quot; do
  
    it &quot;should expose a new &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
      &lt;%= class_name %&gt;.should_receive(:new).and_return(mock_&lt;%= file_name %&gt;)
      get :new
      assigns[:&lt;%= file_name %&gt;].should equal(mock_&lt;%= file_name %&gt;)
    end

  end

  describe &quot;responding to GET edit&quot; do
  
    it &quot;should expose the requested &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
      &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
      get :edit, :id =&gt; &quot;37&quot;
      assigns[:&lt;%= file_name %&gt;].should equal(mock_&lt;%= file_name %&gt;)
    end

  end

  describe &quot;responding to POST create&quot; do

    describe &quot;with valid params&quot; do
      
      it &quot;should expose a newly created &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.should_receive(:new).with({'these' =&gt; 'params'}).and_return(mock_&lt;%= file_name %&gt;(:save =&gt; true))
        post :create, :&lt;%= file_name %&gt; =&gt; {:these =&gt; 'params'}
        assigns(:&lt;%= file_name %&gt;).should equal(mock_&lt;%= file_name %&gt;)
      end

      it &quot;should redirect to the created &lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.stub!(:new).and_return(mock_&lt;%= file_name %&gt;(:save =&gt; true))
        post :create, :&lt;%= file_name %&gt; =&gt; {}
        response.should redirect_to(&lt;%= table_name.singularize %&gt;_url(mock_&lt;%= file_name %&gt;))
      end
      
    end
    
    describe &quot;with invalid params&quot; do

      it &quot;should expose a newly created but unsaved &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.stub!(:new).with({'these' =&gt; 'params'}).and_return(mock_&lt;%= file_name %&gt;(:save =&gt; false))
        post :create, :&lt;%= file_name %&gt; =&gt; {:these =&gt; 'params'}
        assigns(:&lt;%= file_name %&gt;).should equal(mock_&lt;%= file_name %&gt;)
      end

      it &quot;should re-render the 'new' template&quot; do
        &lt;%= class_name %&gt;.stub!(:new).and_return(mock_&lt;%= file_name %&gt;(:save =&gt; false))
        post :create, :&lt;%= file_name %&gt; =&gt; {}
        response.should render_template('new')
      end
      
    end
    
  end

  describe &quot;responding to PUT udpate&quot; do

    describe &quot;with valid params&quot; do

      it &quot;should update the requested &lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
        mock_&lt;%= file_name %&gt;.should_receive(:update_attributes).with({'these' =&gt; 'params'})
        put :update, :id =&gt; &quot;37&quot;, :&lt;%= file_name %&gt; =&gt; {:these =&gt; 'params'}
      end

      it &quot;should expose the requested &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.stub!(:find).and_return(mock_&lt;%= file_name %&gt;(:update_attributes =&gt; true))
        put :update, :id =&gt; &quot;1&quot;
        assigns(:&lt;%= file_name %&gt;).should equal(mock_&lt;%= file_name %&gt;)
      end

      it &quot;should redirect to the &lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.stub!(:find).and_return(mock_&lt;%= file_name %&gt;(:update_attributes =&gt; true))
        put :update, :id =&gt; &quot;1&quot;
        response.should redirect_to(&lt;%= table_name.singularize %&gt;_url(mock_&lt;%= file_name %&gt;))
      end

    end
    
    describe &quot;with invalid params&quot; do

      it &quot;should update the requested &lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
        mock_&lt;%= file_name %&gt;.should_receive(:update_attributes).with({'these' =&gt; 'params'})
        put :update, :id =&gt; &quot;37&quot;, :&lt;%= file_name %&gt; =&gt; {:these =&gt; 'params'}
      end

      it &quot;should expose the &lt;%= file_name %&gt; as @&lt;%= file_name %&gt;&quot; do
        &lt;%= class_name %&gt;.stub!(:find).and_return(mock_&lt;%= file_name %&gt;(:update_attributes =&gt; false))
        put :update, :id =&gt; &quot;1&quot;
        assigns(:&lt;%= file_name %&gt;).should equal(mock_&lt;%= file_name %&gt;)
      end

      it &quot;should re-render the 'edit' template&quot; do
        &lt;%= class_name %&gt;.stub!(:find).and_return(mock_&lt;%= file_name %&gt;(:update_attributes =&gt; false))
        put :update, :id =&gt; &quot;1&quot;
        response.should render_template('edit')
      end

    end

  end

  describe &quot;responding to DELETE destroy&quot; do

    it &quot;should destroy the requested &lt;%= file_name %&gt;&quot; do
      &lt;%= class_name %&gt;.should_receive(:find).with(&quot;37&quot;).and_return(mock_&lt;%= file_name %&gt;)
      mock_&lt;%= file_name %&gt;.should_receive(:destroy)
      delete :destroy, :id =&gt; &quot;37&quot;
    end
  
    it &quot;should redirect to the &lt;%= table_name %&gt; list&quot; do
      &lt;%= class_name %&gt;.stub!(:find).and_return(mock_&lt;%= file_name %&gt;(:destroy =&gt; true))
      delete :destroy, :id =&gt; &quot;1&quot;
      response.should redirect_to(&lt;%= table_name %&gt;_url)
    end

  end

end
</pre>
    </div>