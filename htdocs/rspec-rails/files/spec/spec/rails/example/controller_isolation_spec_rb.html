  <div id="fileHeader">
    <h1>controller_isolation_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/rails/example/controller_isolation_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../../spec_helper'
require 'controller_spec_controller'

describe &quot;a controller spec running in isolation mode&quot;, :type =&gt; :controller do
  controller_name :controller_spec

  it &quot;should not care if the template doesn't exist&quot; do
    get 'some_action'
    response.should be_success
    response.should render_template(&quot;template/that/does/not/actually/exist&quot;)
  end

  it &quot;should not care if the template has errors&quot; do
    get 'action_with_errors_in_template'
    response.should be_success
    response.should render_template(&quot;action_with_errors_in_template&quot;)
  end
end

describe &quot;a controller spec running in integration mode&quot;, :type =&gt; :controller do
  controller_name :controller_spec
  integrate_views
  
  before(:each) do
    controller.class.send(:define_method, :rescue_action) { |e| raise e }
  end

  it &quot;should render a template&quot; do
    get 'action_with_template'
    response.should be_success
    response.should have_tag('div', 'This is action_with_template.rhtml')
  end

  it &quot;should choke if the template doesn't exist&quot; do
    error = defined?(ActionController::MissingTemplate) ? ActionController::MissingTemplate : ActionView::MissingTemplate    
    lambda { get 'some_action' }.should raise_error(error)
    response.should_not be_success
  end

  it &quot;should choke if the template has errors&quot; do
    lambda { get 'action_with_errors_in_template' }.should raise_error(ActionView::TemplateError)
    response.should_not be_success
  end
  
  describe &quot;nested&quot; do
    it &quot;should render a template&quot; do
      get 'action_with_template'
      response.should be_success
      response.should have_tag('div', 'This is action_with_template.rhtml')
    end
    
    describe &quot;with integrate_views turned off&quot; do
      integrate_views false
      
      it &quot;should not care if the template doesn't exist&quot; do
        get 'some_action'
        response.should be_success
        response.should render_template(&quot;template/that/does/not/actually/exist&quot;)
      end
    end
  end
end
</pre>
    </div>