  <div id="fileHeader">
    <h1>assigns_hash_proxy_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/rails/example/assigns_hash_proxy_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../../spec_helper'

describe &quot;AssignsHashProxy&quot; do
  def orig_assigns
    @object.assigns
  end
  
  before(:each) do
    @object = Class.new do
      attr_accessor :assigns
    end.new
    @object.assigns = Hash.new
    @proxy = Spec::Rails::Example::AssignsHashProxy.new self do
      @object
    end
  end
  
  it &quot;should set ivars on object using string&quot; do
    @proxy['foo'] = 'bar'
    @object.instance_eval{@foo}.should == 'bar'
  end
  
  it &quot;should set ivars on object using symbol&quot; do
    @proxy[:foo] = 'bar'
    @object.instance_eval{@foo}.should == 'bar'
  end
  
  it &quot;should access object's assigns with a string&quot; do
    @object.assigns['foo'] = 'bar'
    @proxy['foo'].should == 'bar'
  end
  
  it &quot;should access object's assigns with a symbol&quot; do
    @object.assigns['foo'] = 'bar'
    @proxy[:foo].should == 'bar'
  end

  it &quot;should access object's ivars with a string&quot; do
    @object.instance_variable_set('@foo', 'bar')
    @proxy['foo'].should == 'bar'
  end
  
  it &quot;should access object's ivars with a symbol&quot; do
    @object.instance_variable_set('@foo', 'bar')
    @proxy[:foo].should == 'bar'
  end

  it &quot;should iterate through each element like a Hash&quot; do
    values = {
      'foo' =&gt; 1,
      'bar' =&gt; 2,
      'baz' =&gt; 3
    }
    @proxy['foo'] = values['foo']
    @proxy['bar'] = values['bar']
    @proxy['baz'] = values['baz']
  
    @proxy.each do |key, value|
      key.should == key
      value.should == values[key]
    end
  end
  
  it &quot;should delete the ivar of passed in key&quot; do
    @object.instance_variable_set('@foo', 'bar')
    @proxy.delete('foo')
    @proxy['foo'].should be_nil
  end
  
  it &quot;should delete the assigned element of passed in key&quot; do
    @object.assigns['foo'] = 'bar'
    @proxy.delete('foo')
    @proxy['foo'].should be_nil
  end
  
  it &quot;should detect the presence of a key in assigns&quot; do
    @object.assigns['foo'] = 'bar'
    @proxy.has_key?('foo').should == true
    @proxy.has_key?('bar').should == false
  end
  
  it &quot;should expose values set in example back to the example&quot; do
    @proxy[:foo] = 'bar'
    @proxy[:foo].should == 'bar'
  end
  
  it &quot;should allow assignment of false via proxy&quot; do
    @proxy['foo'] = false
    @proxy['foo'].should be_false
  end
  
  it &quot;should allow assignment of false&quot; do
    @object.instance_variable_set('@foo',false)
    @proxy['foo'].should be_false
  end
end
</pre>
    </div>