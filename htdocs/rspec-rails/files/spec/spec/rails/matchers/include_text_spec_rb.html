  <div id="fileHeader">
    <h1>include_text_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/rails/matchers/include_text_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../../spec_helper'

describe &quot;include_text&quot; do

  describe &quot;where target is a String&quot; do
    it 'should match submitted text using a string' do
      string = 'foo'
      string.should include_text('foo')
    end

    it 'should match if the text is contained' do
      string = 'I am a big piece of text'
      string.should include_text('big piece')
    end

    it 'should not match if text is not contained' do
      string = 'I am a big piece of text'
      string.should_not include_text('corey')
    end
  end

end

describe &quot;include_text&quot;, :type =&gt; :controller do
  ['isolation','integration'].each do |mode|
    if mode == 'integration'
      integrate_views
    end

    describe &quot;where target is a response (in #{mode} mode)&quot; do
      controller_name :render_spec

      it &quot;should pass with exactly matching text&quot; do
        post 'text_action'
        response.should include_text(&quot;this is the text for this action&quot;)
      end

      it 'should pass with substring matching text' do
        post 'text_action'
        response.should include_text('text for this')
      end

      it &quot;should fail with incorrect text&quot; do
        post 'text_action'
        lambda {
          response.should include_text(&quot;the accordian guy&quot;)
        }.should fail_with(&quot;expected to find \&quot;the accordian guy\&quot; in \&quot;this is the text for this action\&quot;&quot;)
      end

      it &quot;should pass using should_not with incorrect text&quot; do
        post 'text_action'
        response.should_not include_text(&quot;the accordian guy&quot;)
      end

      it &quot;should fail when a template is rendered&quot; do
        get 'some_action'
        lambda {
          response.should include_text(&quot;this is the text for this action&quot;)
        }.should fail_with(/expected to find \&quot;this is the text for this action\&quot;/)
      end
    end
  end
end

</pre>
    </div>