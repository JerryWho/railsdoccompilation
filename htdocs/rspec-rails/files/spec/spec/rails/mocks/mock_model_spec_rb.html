  <div id="fileHeader">
    <h1>mock_model_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/rails/mocks/mock_model_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../../spec_helper'
require File.dirname(__FILE__) + '/ar_classes'

describe &quot;mock_model&quot; do
  describe &quot;responding to interrogation&quot; do
    before(:each) do
      @model = mock_model(SubMockableModel)
    end
    it &quot;should say it is_a? if it is&quot; do
      @model.is_a?(SubMockableModel).should be(true)
    end
    it &quot;should say it is_a? if it's ancestor is&quot; do
      @model.is_a?(MockableModel).should be(true)
    end
    it &quot;should say it is kind_of? if it is&quot; do
      @model.kind_of?(SubMockableModel).should be(true)
    end
    it &quot;should say it is kind_of? if it's ancestor is&quot; do
      @model.kind_of?(MockableModel).should be(true)
    end
    it &quot;should say it is instance_of? if it is&quot; do
      @model.instance_of?(SubMockableModel).should be(true)
    end
    it &quot;should not say it instance_of? if it isn't, even if it's ancestor is&quot; do
      @model.instance_of?(MockableModel).should be(false)
    end
  end

  describe &quot;with params&quot; do
    it &quot;should not mutate its parameters&quot; do
      params = {:a =&gt; 'b'}
      model = mock_model(MockableModel, params)
      params.should == {:a =&gt; 'b'}
    end
  end

  describe &quot;with #id stubbed&quot;, :type =&gt; :view do
    before(:each) do
      @model = mock_model(MockableModel, :id =&gt; 1)
    end
    it &quot;should be named using the stubbed id value&quot; do
      @model.instance_variable_get(:@name).should == &quot;MockableModel_1&quot;
    end
    it &quot;should return string of id value for to_param&quot; do
      @model.to_param.should == &quot;1&quot;
    end
  end

  describe &quot;as association&quot;, :type =&gt; :view do
    before(:each) do
      @real = AssociatedModel.create!
      @mock_model = mock_model(MockableModel)
      @real.mockable_model = @mock_model
    end

    it &quot;should pass associated_model == mock&quot; do
        @mock_model.should == @real.mockable_model
    end

    it &quot;should pass mock == associated_model&quot; do
        @real.mockable_model.should == @mock_model
    end
  end

  describe &quot;with :null_object =&gt; true&quot;, :type =&gt; :view do
    before(:each) do
      @model = mock_model(MockableModel, :null_object =&gt; true, :mocked_method =&gt; &quot;mocked&quot;)
    end

    it &quot;should be able to mock methods&quot; do
      @model.mocked_method.should == &quot;mocked&quot;
    end
    it &quot;should return itself to unmocked methods&quot; do
      @model.unmocked_method.should equal(@model)
    end
  end

  describe &quot;#as_null_object&quot;, :type =&gt; :view do
    before(:each) do
      @model = mock_model(MockableModel, :mocked_method =&gt; &quot;mocked&quot;).as_null_object
    end

    it &quot;should be able to mock methods&quot; do
      @model.mocked_method.should == &quot;mocked&quot;
    end
    it &quot;should return itself to unmocked methods&quot; do
      @model.unmocked_method.should equal(@model)
    end
  end

  describe &quot;#as_new_record&quot; do
    it &quot;should say it is a new record&quot; do
      mock_model(MockableModel).as_new_record.should be_new_record
    end

    it &quot;should have a nil id&quot; do
      mock_model(MockableModel).as_new_record.id.should be(nil)
    end

    it &quot;should return nil for #to_param&quot; do
      mock_model(MockableModel).as_new_record.to_param.should be(nil)
    end
  end
end


</pre>
    </div>