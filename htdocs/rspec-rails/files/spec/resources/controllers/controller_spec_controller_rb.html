  <div id="fileHeader">
    <h1>controller_spec_controller.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/resources/controllers/controller_spec_controller.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:13:00 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>class ControllerSpecController &lt; ActionController::Base
  before_filter :raise_error, :only =&gt; :action_with_skipped_before_filter
  
  def raise_error
    raise &quot;from a before filter&quot;
  end
  
  skip_before_filter :raise_error
  
  if ['edge','2.0.0'].include?(ENV['RSPEC_RAILS_VERSION'])
    set_view_path [File.join(File.dirname(__FILE__), &quot;..&quot;, &quot;views&quot;)]
  else
    set_view_path File.join(File.dirname(__FILE__), &quot;..&quot;, &quot;views&quot;)
  end
  
  def some_action
    render :template =&gt; &quot;template/that/does/not/actually/exist&quot;
  end
  
  def action_with_template
    render :template =&gt; &quot;controller_spec/action_with_template&quot;
  end
  
  def action_which_sets_flash
    flash[:flash_key] = &quot;flash value&quot;
    render :text =&gt; &quot;&quot;
  end
  
  def action_which_gets_session
    raise &quot;expected #{params[:session_key].inspect}\ngot #{session[:session_key].inspect}&quot; unless (session[:session_key] == params[:expected])
    render :text =&gt; &quot;&quot;
  end
  
  def action_which_sets_session
    session[:session_key] = &quot;session value&quot;
  end
      
  def action_which_gets_cookie
    raise &quot;expected #{params[:expected].inspect}, got #{cookies[:cookie_key].inspect}&quot; unless (cookies[:cookie_key] == params[:expected])
    render :text =&gt; &quot;&quot;
  end
      
  def action_which_sets_cookie
    cookies['cookie_key'] = params[:value]
    render :text =&gt; &quot;&quot;
  end
      
  def action_with_partial
    render :partial =&gt; &quot;controller_spec/partial&quot;
  end
  
  def action_with_partial_with_object
    render :partial =&gt; &quot;controller_spec/partial&quot;, :object =&gt; params[:thing]
  end
  
  def action_with_partial_with_locals
    render :partial =&gt; &quot;controller_spec/partial&quot;, :locals =&gt; {:thing =&gt; params[:thing]}
  end
  
  def action_with_errors_in_template
    render :template =&gt; &quot;controller_spec/action_with_errors_in_template&quot;
  end

  def action_setting_the_assigns_hash
    @indirect_assigns_key = :indirect_assigns_key_value
  end
  
  def action_setting_flash_after_session_reset
    reset_session
    flash[:after_reset] = &quot;available&quot;
  end
  
  def action_setting_flash_before_session_reset
    flash[:before_reset] = 'available'
    reset_session
  end
  
  def action_with_render_update
    render :update do |page|
      page.replace :bottom, 'replace_me',
                            :partial =&gt; 'non_existent_partial'
    end
  end
  
  def action_with_skipped_before_filter
    render :text =&gt; &quot;&quot;
  end
  
  def action_that_assigns_false_to_a_variable
    @a_variable = false
    render :text =&gt; &quot;&quot;
  end
end

class ControllerInheritingFromApplicationControllerController &lt; ApplicationController
  def action_with_inherited_before_filter
    render :text =&gt; &quot;&quot;
  end
end</pre>
    </div>