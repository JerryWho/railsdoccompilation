  <div id="fileHeader">
    <h1>manifest.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>railties/lib/rails_generator/manifest.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Nov 27 16:38:16 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Rails
  module Generator

    # Manifest captures the actions a generator performs.  Instantiate
    # a manifest with an optional target object, hammer it with actions,
    # then replay or rewind on the object of your choice.
    #
    # Example:
    #   manifest = Manifest.new { |m|
    #     m.make_directory '/foo'
    #     m.create_file '/foo/bar.txt'
    #   }
    #   manifest.replay(creator)
    #   manifest.rewind(destroyer)
    class Manifest
      attr_reader :target

      # Take a default action target.  Yield self if block given.
      def initialize(target = nil)
        @target, @actions = target, []
        yield self if block_given?
      end

      # Record an action.
      def method_missing(action, *args, &amp;block)
        @actions &lt;&lt; [action, args, block]
      end

      # Replay recorded actions.
      def replay(target = nil)
        send_actions(target || @target, @actions)
      end

      # Rewind recorded actions.
      def rewind(target = nil)
        send_actions(target || @target, @actions.reverse)
      end

      # Erase recorded actions.
      def erase
        @actions = []
      end

      private
        def send_actions(target, actions)
          actions.each do |method, args, block|
            target.send(method, *args, &amp;block)
          end
        end
    end

  end
end
</pre>
    </div>