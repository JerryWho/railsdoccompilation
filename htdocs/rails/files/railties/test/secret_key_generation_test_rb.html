  <div id="fileHeader">
    <h1>secret_key_generation_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>railties/test/secret_key_generation_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 19:55:10 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'abstract_unit'

# Must set before requiring generator libs.
if defined?(RAILS_ROOT)
  RAILS_ROOT.replace &quot;#{File.dirname(__FILE__)}/fixtures&quot;
else
  RAILS_ROOT = &quot;#{File.dirname(__FILE__)}/fixtures&quot;
end

$LOAD_PATH.unshift &quot;#{File.dirname(__FILE__)}/../lib&quot;

require 'initializer'

# Mocks out the configuration
module Rails
  def self.configuration
    Rails::Configuration.new
  end
end

require 'rails_generator'
require 'rails_generator/secret_key_generator'
require 'rails_generator/generators/applications/app/app_generator'

class SecretKeyGenerationTest &lt; ActiveSupport::TestCase
  SECRET_KEY_MIN_LENGTH = 128
  APP_NAME = &quot;foo&quot;

  def setup
    @generator = Rails::SecretKeyGenerator.new(APP_NAME)
  end

  def test_secret_key_generation
    assert_deprecated /ActiveSupport::SecureRandom\.hex\(64\)/ do
      assert @generator.generate_secret.length &gt;= SECRET_KEY_MIN_LENGTH
    end
  end
end
</pre>
    </div>