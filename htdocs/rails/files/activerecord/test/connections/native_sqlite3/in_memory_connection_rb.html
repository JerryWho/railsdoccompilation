  <div id="fileHeader">
    <h1>in_memory_connection.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/test/connections/native_sqlite3/in_memory_connection.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:59:08 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>print &quot;Using native SQLite3\n&quot;
require_dependency 'models/course'
require 'logger'
ActiveRecord::Base.logger = Logger.new(&quot;debug.log&quot;)

class SqliteError &lt; StandardError
end

def make_connection(clazz, db_definitions_file)
  clazz.establish_connection(:adapter =&gt; 'sqlite3', :database  =&gt; ':memory:')
  File.read(SCHEMA_ROOT + &quot;/#{db_definitions_file}&quot;).split(';').each do |command|
    clazz.connection.execute(command) unless command.strip.empty?
  end
end

make_connection(ActiveRecord::Base, 'sqlite.sql')
make_connection(Course, 'sqlite2.sql')
load(SCHEMA_ROOT + &quot;/schema.rb&quot;)
</pre>
    </div>