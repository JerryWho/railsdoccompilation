  <div id="fileHeader">
    <h1>sanitize_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/test/cases/sanitize_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:59:08 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require &quot;cases/helper&quot;
require 'models/binary'

class SanitizeTest &lt; ActiveRecord::TestCase
  def setup
  end

  def test_sanitize_sql_array_handles_string_interpolation
    quoted_bambi = ActiveRecord::Base.connection.quote_string(&quot;Bambi&quot;)
    assert_equal &quot;name=#{quoted_bambi}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=%s&quot;, &quot;Bambi&quot;])
    assert_equal &quot;name=#{quoted_bambi}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=%s&quot;, &quot;Bambi&quot;.mb_chars])
    quoted_bambi_and_thumper = ActiveRecord::Base.connection.quote_string(&quot;Bambi\nand\nThumper&quot;)
    assert_equal &quot;name=#{quoted_bambi_and_thumper}&quot;,Binary.send(:sanitize_sql_array, [&quot;name=%s&quot;, &quot;Bambi\nand\nThumper&quot;])
    assert_equal &quot;name=#{quoted_bambi_and_thumper}&quot;,Binary.send(:sanitize_sql_array, [&quot;name=%s&quot;, &quot;Bambi\nand\nThumper&quot;.mb_chars])
  end

  def test_sanitize_sql_array_handles_bind_variables
    quoted_bambi = ActiveRecord::Base.connection.quote(&quot;Bambi&quot;)
    assert_equal &quot;name=#{quoted_bambi}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=?&quot;, &quot;Bambi&quot;])
    assert_equal &quot;name=#{quoted_bambi}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=?&quot;, &quot;Bambi&quot;.mb_chars])
    quoted_bambi_and_thumper = ActiveRecord::Base.connection.quote(&quot;Bambi\nand\nThumper&quot;)
    assert_equal &quot;name=#{quoted_bambi_and_thumper}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=?&quot;, &quot;Bambi\nand\nThumper&quot;])
    assert_equal &quot;name=#{quoted_bambi_and_thumper}&quot;, Binary.send(:sanitize_sql_array, [&quot;name=?&quot;, &quot;Bambi\nand\nThumper&quot;.mb_chars])
  end
end
</pre>
    </div>