  <div id="fileHeader">
    <h1>developer.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/test/models/developer.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:59:08 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module DeveloperProjectsAssociationExtension
  def find_most_recent
    find(:first, :order =&gt; &quot;id DESC&quot;)
  end
end

module DeveloperProjectsAssociationExtension2
  def find_least_recent
    find(:first, :order =&gt; &quot;id ASC&quot;)
  end
end

class Developer &lt; ActiveRecord::Base
  has_and_belongs_to_many :projects do
    def find_most_recent
      find(:first, :order =&gt; &quot;id DESC&quot;)
    end
  end

  has_and_belongs_to_many :projects_extended_by_name,
      :class_name =&gt; &quot;Project&quot;,
      :join_table =&gt; &quot;developers_projects&quot;,
      :association_foreign_key =&gt; &quot;project_id&quot;,
      :extend =&gt; DeveloperProjectsAssociationExtension

  has_and_belongs_to_many :projects_extended_by_name_twice,
      :class_name =&gt; &quot;Project&quot;,
      :join_table =&gt; &quot;developers_projects&quot;,
      :association_foreign_key =&gt; &quot;project_id&quot;,
      :extend =&gt; [DeveloperProjectsAssociationExtension, DeveloperProjectsAssociationExtension2]

  has_and_belongs_to_many :projects_extended_by_name_and_block,
      :class_name =&gt; &quot;Project&quot;,
      :join_table =&gt; &quot;developers_projects&quot;,
      :association_foreign_key =&gt; &quot;project_id&quot;,
      :extend =&gt; DeveloperProjectsAssociationExtension do
        def find_least_recent
          find(:first, :order =&gt; &quot;id ASC&quot;)
        end
      end

  has_and_belongs_to_many :special_projects, :join_table =&gt; 'developers_projects', :association_foreign_key =&gt; 'project_id'

  has_many :audit_logs

  named_scope :jamises, :conditions =&gt; {:name =&gt; 'Jamis'}

  validates_inclusion_of :salary, :in =&gt; 50000..200000
  validates_length_of    :name, :within =&gt; 3..20

  before_create do |developer|
    developer.audit_logs.build :message =&gt; &quot;Computer created&quot;
  end

  def log=(message)
    audit_logs.build :message =&gt; message
  end
end

class AuditLog &lt; ActiveRecord::Base
  belongs_to :developer, :validate =&gt; true
  belongs_to :unvalidated_developer, :class_name =&gt; 'Developer'
end

DeveloperSalary = Struct.new(:amount)
class DeveloperWithAggregate &lt; ActiveRecord::Base
  self.table_name = 'developers'
  composed_of :salary, :class_name =&gt; 'DeveloperSalary', :mapping =&gt; [%w(salary amount)]
end

class DeveloperWithBeforeDestroyRaise &lt; ActiveRecord::Base
  self.table_name = 'developers'
  has_and_belongs_to_many :projects, :join_table =&gt; 'developers_projects', :foreign_key =&gt; 'developer_id'
  before_destroy :raise_if_projects_empty!

  def raise_if_projects_empty!
    raise if projects.empty?
  end
end

class DeveloperOrderedBySalary &lt; ActiveRecord::Base
  self.table_name = 'developers'
  default_scope :order =&gt; 'salary DESC'
  named_scope :by_name, :order =&gt; 'name DESC'

  def self.all_ordered_by_name
    with_scope(:find =&gt; { :order =&gt; 'name DESC' }) do
      find(:all)
    end
  end
end

class DeveloperCalledDavid &lt; ActiveRecord::Base
  self.table_name = 'developers'
  default_scope :conditions =&gt; &quot;name = 'David'&quot;
end

class DeveloperCalledJamis &lt; ActiveRecord::Base
  self.table_name = 'developers'
  default_scope :conditions =&gt; { :name =&gt; 'Jamis' }
end
</pre>
    </div>