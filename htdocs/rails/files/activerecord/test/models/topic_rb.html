  <div id="fileHeader">
    <h1>topic.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/test/models/topic.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 11:32:53 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>class Topic &lt; ActiveRecord::Base
  named_scope :base
  named_scope :written_before, lambda { |time|
    if time
      { :conditions =&gt; ['written_on &lt; ?', time] }
    end
  }
  named_scope :approved, :conditions =&gt; {:approved =&gt; true}
  named_scope :rejected, :conditions =&gt; {:approved =&gt; false}

  named_scope :by_lifo, :conditions =&gt; {:author_name =&gt; 'lifo'}
  
  named_scope :approved_as_hash_condition, :conditions =&gt; {:topics =&gt; {:approved =&gt; true}}
  named_scope 'approved_as_string', :conditions =&gt; {:approved =&gt; true}
  named_scope :replied, :conditions =&gt; ['replies_count &gt; 0']
  named_scope :anonymous_extension do
    def one
      1
    end
  end
  module NamedExtension
    def two
      2
    end
  end
  module MultipleExtensionOne
    def extension_one
      1
    end
  end
  module MultipleExtensionTwo
    def extension_two
      2
    end
  end
  named_scope :named_extension, :extend =&gt; NamedExtension
  named_scope :multiple_extensions, :extend =&gt; [MultipleExtensionTwo, MultipleExtensionOne]

  has_many :replies, :dependent =&gt; :destroy, :foreign_key =&gt; &quot;parent_id&quot;
  has_many :replies_with_primary_key, :class_name =&gt; &quot;Reply&quot;, :dependent =&gt; :destroy, :primary_key =&gt; &quot;title&quot;, :foreign_key =&gt; &quot;parent_title&quot;
  serialize :content

  before_create  :default_written_on
  before_destroy :destroy_children

  def parent
    Topic.find(parent_id)
  end

  # trivial method for testing Array#to_xml with :methods
  def topic_id
    id
  end

  protected
    def approved=(val)
      @custom_approved = val
      write_attribute(:approved, val)
    end

    def default_written_on
      self.written_on = Time.now unless attribute_present?(&quot;written_on&quot;)
    end

    def destroy_children
      self.class.delete_all &quot;parent_id = #{id}&quot;
    end

    def after_initialize
      if self.new_record?
        self.author_email_address = 'test@test.com'
      end
    end
end

module Web
  class Topic &lt; ActiveRecord::Base
    has_many :replies, :dependent =&gt; :destroy, :foreign_key =&gt; &quot;parent_id&quot;, :class_name =&gt; 'Web::Reply'
  end
end</pre>
    </div>