  <div id="fileHeader">
    <h1>customer.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activerecord/test/models/customer.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:59:08 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>class Customer &lt; ActiveRecord::Base
  composed_of :address, :mapping =&gt; [ %w(address_street street), %w(address_city city), %w(address_country country) ], :allow_nil =&gt; true
  composed_of :balance, :class_name =&gt; &quot;Money&quot;, :mapping =&gt; %w(balance amount), :converter =&gt; Proc.new { |balance| balance.to_money }
  composed_of :gps_location, :allow_nil =&gt; true
  composed_of :fullname, :mapping =&gt; %w(name to_s), :constructor =&gt; Proc.new { |name| Fullname.parse(name) }, :converter =&gt; :parse
end

class Address
  attr_reader :street, :city, :country

  def initialize(street, city, country)
    @street, @city, @country = street, city, country
  end

  def close_to?(other_address)
    city == other_address.city &amp;&amp; country == other_address.country
  end

  def ==(other)
    other.is_a?(self.class) &amp;&amp; other.street == street &amp;&amp; other.city == city &amp;&amp; other.country == country
  end
end

class Money
  attr_reader :amount, :currency

  EXCHANGE_RATES = { &quot;USD_TO_DKK&quot; =&gt; 6, &quot;DKK_TO_USD&quot; =&gt; 0.6 }

  def initialize(amount, currency = &quot;USD&quot;)
    @amount, @currency = amount, currency
  end

  def exchange_to(other_currency)
    Money.new((amount * EXCHANGE_RATES[&quot;#{currency}_TO_#{other_currency}&quot;]).floor, other_currency)
  end
end

class GpsLocation
  attr_reader :gps_location

  def initialize(gps_location)
    @gps_location = gps_location
  end

  def latitude
    gps_location.split(&quot;x&quot;).first
  end

  def longitude
    gps_location.split(&quot;x&quot;).last
  end

  def ==(other)
    self.latitude == other.latitude &amp;&amp; self.longitude == other.longitude
  end
end

class Fullname
  attr_reader :first, :last

  def self.parse(str)
    return nil unless str
    new(*str.to_s.split)
  end

  def initialize(first, last = nil)
    @first, @last = first, last
  end

  def to_s
    &quot;#{first} #{last.upcase}&quot;
  end
end</pre>
    </div>