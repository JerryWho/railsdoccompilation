  <div id="fileHeader">
    <h1>i18n_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>activesupport/test/i18n_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Nov 27 16:38:16 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'abstract_unit'

class I18nTest &lt; Test::Unit::TestCase
  def setup
    @date = Date.parse(&quot;2008-7-2&quot;)
    @time = Time.utc(2008, 7, 2, 16, 47, 1)
  end
  
  def test_time_zone_localization_with_default_format
    Time.zone.stubs(:now).returns Time.local(2000)
    assert_equal Time.zone.now.strftime(&quot;%a, %d %b %Y %H:%M:%S %z&quot;), I18n.localize(Time.zone.now)
  end
  
  def test_date_localization_should_use_default_format
    assert_equal @date.strftime(&quot;%Y-%m-%d&quot;), I18n.localize(@date)
  end
  
  def test_date_localization_with_default_format
    assert_equal @date.strftime(&quot;%Y-%m-%d&quot;), I18n.localize(@date, :format =&gt; :default)
  end
  
  def test_date_localization_with_short_format
    assert_equal @date.strftime(&quot;%b %d&quot;), I18n.localize(@date, :format =&gt; :short)
  end
  
  def test_date_localization_with_long_format
    assert_equal @date.strftime(&quot;%B %d, %Y&quot;), I18n.localize(@date, :format =&gt; :long)
  end
  
  def test_time_localization_should_use_default_format    
    assert_equal @time.strftime(&quot;%a, %d %b %Y %H:%M:%S %z&quot;), I18n.localize(@time)
  end
  
  def test_time_localization_with_default_format
    assert_equal @time.strftime(&quot;%a, %d %b %Y %H:%M:%S %z&quot;), I18n.localize(@time, :format =&gt; :default)
  end
  
  def test_time_localization_with_short_format
    assert_equal @time.strftime(&quot;%d %b %H:%M&quot;), I18n.localize(@time, :format =&gt; :short)
  end
  
  def test_time_localization_with_long_format
    assert_equal @time.strftime(&quot;%B %d, %Y %H:%M&quot;), I18n.localize(@time, :format =&gt; :long)
  end
    
  def test_day_names
    assert_equal Date::DAYNAMES, I18n.translate(:'date.day_names')
  end
  
  def test_abbr_day_names
    assert_equal Date::ABBR_DAYNAMES, I18n.translate(:'date.abbr_day_names')
  end
  
  def test_month_names
    assert_equal Date::MONTHNAMES, I18n.translate(:'date.month_names')
  end
  
  def test_abbr_month_names
    assert_equal Date::ABBR_MONTHNAMES, I18n.translate(:'date.abbr_month_names')
  end
  
  def test_date_order
    assert_equal [:year, :month, :day], I18n.translate(:'date.order')
  end
  
  def test_time_am
    assert_equal 'am', I18n.translate(:'time.am')
  end
  
  def test_time_pm
    assert_equal 'pm', I18n.translate(:'time.pm')
  end

  def test_words_connector
    assert_equal ', ', I18n.translate(:'support.array.words_connector')
  end

  def test_two_words_connector
    assert_equal ' and ', I18n.translate(:'support.array.two_words_connector')
  end

  def test_last_word_connector
    assert_equal ', and ', I18n.translate(:'support.array.last_word_connector')
  end

  def test_to_sentence
    default_two_words_connector = I18n.translate(:'support.array.two_words_connector')
    default_last_word_connector = I18n.translate(:'support.array.last_word_connector')
    assert_equal 'a, b, and c', %w[a b c].to_sentence
    I18n.backend.store_translations 'en', :support =&gt; { :array =&gt; { :two_words_connector =&gt; ' &amp; ' } }
    assert_equal 'a &amp; b', %w[a b].to_sentence
    I18n.backend.store_translations 'en', :support =&gt; { :array =&gt; { :last_word_connector =&gt; ' and ' } }
    assert_equal 'a, b and c', %w[a b c].to_sentence
  ensure
    I18n.backend.store_translations 'en', :support =&gt; { :array =&gt; { :two_words_connector =&gt; default_two_words_connector } }
    I18n.backend.store_translations 'en', :support =&gt; { :array =&gt; { :last_word_connector =&gt; default_last_word_connector } }
  end
end
</pre>
    </div>