  <div id="fileHeader">
    <h1>erb.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/lib/action_view/template_handlers/erb.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 11:32:52 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module ActionView
  module TemplateHandlers
    class ERB &lt; TemplateHandler
      include Compilable

      ##
      # :singleton-method:
      # Specify trim mode for the ERB compiler. Defaults to '-'.
      # See ERb documentation for suitable values.
      cattr_accessor :erb_trim_mode
      self.erb_trim_mode = '-'

      def compile(template)
        magic = $1 if template.source =~ /\A(&lt;%#.*coding[:=]\s*(\S+)\s*-?%&gt;)/
        erb = &quot;#{magic}&lt;% __in_erb_template=true %&gt;#{template.source}&quot;

        if erb.respond_to?(:force_encoding)
          erb.force_encoding(template.source.encoding)
        end

        ::ERB.new(erb, nil, erb_trim_mode, '@output_buffer').src
      end
    end
  end
end
</pre>
    </div>