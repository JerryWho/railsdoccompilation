  <div id="fileHeader">
    <h1>record_tag_helper_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/test/template/record_tag_helper_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Nov 27 16:38:16 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'abstract_unit'

class Post
  def id
     45
  end
  def body
    &quot;What a wonderful world!&quot;
  end
end

class RecordTagHelperTest &lt; ActionView::TestCase
  tests ActionView::Helpers::RecordTagHelper

  def setup
    @post = Post.new
  end

  def test_content_tag_for
    expected = %(&lt;li class=&quot;post bar&quot; id=&quot;post_45&quot;&gt;&lt;/li&gt;)
    actual = content_tag_for(:li, @post, :class =&gt; 'bar') { }
    assert_dom_equal expected, actual
  end

  def test_content_tag_for_prefix
    expected = %(&lt;ul class=&quot;post&quot; id=&quot;archived_post_45&quot;&gt;&lt;/ul&gt;)
    actual = content_tag_for(:ul, @post, :archived) { }
    assert_dom_equal expected, actual
  end

  def test_content_tag_for_with_extra_html_tags
    expected = %(&lt;tr class=&quot;post bar&quot; id=&quot;post_45&quot; style='background-color: #f0f0f0'&gt;&lt;/tr&gt;)
    actual = content_tag_for(:tr, @post, {:class =&gt; &quot;bar&quot;, :style =&gt; &quot;background-color: #f0f0f0&quot;}) { }
    assert_dom_equal expected, actual
  end

  def test_block_not_in_erb_multiple_calls
    expected = %(&lt;div class=&quot;post bar&quot; id=&quot;post_45&quot;&gt;#{@post.body}&lt;/div&gt;)
    actual = div_for(@post, :class =&gt; &quot;bar&quot;) { @post.body }
    assert_dom_equal expected, actual
    actual = div_for(@post, :class =&gt; &quot;bar&quot;) { @post.body }
    assert_dom_equal expected, actual
  end

  def test_block_works_with_content_tag_for_in_erb
    __in_erb_template = ''
    expected = %(&lt;tr class=&quot;post&quot; id=&quot;post_45&quot;&gt;#{@post.body}&lt;/tr&gt;)
    actual = content_tag_for(:tr, @post) { concat @post.body }
    assert_dom_equal expected, actual
  end

  def test_div_for_in_erb
    __in_erb_template = ''
    expected = %(&lt;div class=&quot;post bar&quot; id=&quot;post_45&quot;&gt;#{@post.body}&lt;/div&gt;)
    actual = div_for(@post, :class =&gt; &quot;bar&quot;) { concat @post.body }
    assert_dom_equal expected, actual
  end
end
</pre>
    </div>