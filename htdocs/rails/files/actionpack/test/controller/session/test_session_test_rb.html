  <div id="fileHeader">
    <h1>test_session_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/test/controller/session/test_session_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 19:55:10 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'abstract_unit'
require 'stringio'

class ActionController::TestSessionTest &lt; ActiveSupport::TestCase
  
  def test_calling_delete_without_parameters_raises_deprecation_warning_and_calls_to_clear_test_session
    assert_deprecated(/use clear instead/){ ActionController::TestSession.new.delete }
  end
  
  def test_calling_update_without_parameters_raises_deprecation_warning_and_calls_to_clear_test_session
    assert_deprecated(/use replace instead/){ ActionController::TestSession.new.update }
  end
  
  def test_calling_close_raises_deprecation_warning
    assert_deprecated(/sessions should no longer be closed/){ ActionController::TestSession.new.close }
  end
  
  def test_defaults
    session = ActionController::TestSession.new
    assert_equal({}, session.data)
    assert_equal('', session.session_id)
  end
  
  def test_ctor_allows_setting
    session = ActionController::TestSession.new({:one =&gt; 'one', :two =&gt; 'two'})
    assert_equal('one', session[:one])
    assert_equal('two', session[:two])
  end
  
  def test_setting_session_item_sets_item
    session = ActionController::TestSession.new
    session[:key] = 'value'
    assert_equal('value', session[:key])
  end
  
  def test_calling_delete_removes_item
    session = ActionController::TestSession.new
    session[:key] = 'value'
    assert_equal('value', session[:key])
    session.delete(:key)
    assert_nil(session[:key])
  end
  
  def test_calling_update_with_params_passes_to_attributes
    session = ActionController::TestSession.new()
    session.update('key' =&gt; 'value')
    assert_equal('value', session[:key])
  end
  
  def test_clear_emptys_session
    params = {:one =&gt; 'one', :two =&gt; 'two'}
    session = ActionController::TestSession.new({:one =&gt; 'one', :two =&gt; 'two'})
    session.clear
    assert_nil(session[:one])
    assert_nil(session[:two])
  end
  
end</pre>
    </div>