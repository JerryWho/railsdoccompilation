  <div id="fileHeader">
    <h1>safe_buffer_test.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>actionpack/test/view/safe_buffer_test.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Fri Nov 27 16:38:16 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'abstract_unit'

class SafeBufferTest &lt; ActionView::TestCase
  def setup
    @buffer = ActionView::SafeBuffer.new
  end

  test &quot;Should look like a string&quot; do
    assert @buffer.is_a?(String)
    assert_equal &quot;&quot;, @buffer
  end

  test &quot;Should escape a raw string which is passed to them&quot; do
    @buffer &lt;&lt; &quot;&lt;script&gt;&quot;
    assert_equal &quot;&amp;lt;script&amp;gt;&quot;, @buffer
  end

  test &quot;Should NOT escape a safe value passed to it&quot; do
    @buffer &lt;&lt; &quot;&lt;script&gt;&quot;.html_safe!
    assert_equal &quot;&lt;script&gt;&quot;, @buffer
  end

  test &quot;Should not mess with an innocuous string&quot; do
    @buffer &lt;&lt; &quot;Hello&quot;
    assert_equal &quot;Hello&quot;, @buffer
  end

  test &quot;Should be considered safe&quot; do
    assert @buffer.html_safe?
  end

  test &quot;Should return a safe buffer when calling to_s&quot; do
    new_buffer = @buffer.to_s
    assert_equal ActionView::SafeBuffer, new_buffer.class
  end
end
</pre>
    </div>