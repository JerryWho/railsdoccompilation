<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveRecord::Relation</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (R)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
     &raquo; 
    <span class="title">Relation</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveRecord::Relation
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">ActiveRecord::Relation</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Batches.html" title="ActiveRecord::Batches (module)">Batches</a></span>, <span class='object_link'><a href="Calculations.html" title="ActiveRecord::Calculations (module)">Calculations</a></span>, <span class='object_link'><a href="FinderMethods.html" title="ActiveRecord::FinderMethods (module)">FinderMethods</a></span>, <span class='object_link'><a href="QueryMethods.html" title="ActiveRecord::QueryMethods (module)">QueryMethods</a></span>, <span class='object_link'><a href="SpawnMethods.html" title="ActiveRecord::SpawnMethods (module)">SpawnMethods</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">activerecord/lib/active_record/relation.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>Active Record Relation</h1>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Relation/JoinOperation.html" title="ActiveRecord::Relation::JoinOperation (class)">JoinOperation</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ASSOCIATION_METHODS-constant" class="">ASSOCIATION_METHODS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:includes</span><span class='comma'>,</span> <span class='symbol'>:eager_load</span><span class='comma'>,</span> <span class='symbol'>:preload</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="MULTI_VALUE_METHODS-constant" class="">MULTI_VALUE_METHODS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:select</span><span class='comma'>,</span> <span class='symbol'>:group</span><span class='comma'>,</span> <span class='symbol'>:order</span><span class='comma'>,</span> <span class='symbol'>:joins</span><span class='comma'>,</span> <span class='symbol'>:where</span><span class='comma'>,</span> <span class='symbol'>:having</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="SINGLE_VALUE_METHODS-constant" class="">SINGLE_VALUE_METHODS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:limit</span><span class='comma'>,</span> <span class='symbol'>:offset</span><span class='comma'>,</span> <span class='symbol'>:lock</span><span class='comma'>,</span> <span class='symbol'>:readonly</span><span class='comma'>,</span> <span class='symbol'>:create_with</span><span class='comma'>,</span> <span class='symbol'>:from</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="SpawnMethods.html" title="ActiveRecord::SpawnMethods (module)">SpawnMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SpawnMethods.html#VALID_FIND_OPTIONS-constant" title="ActiveRecord::SpawnMethods::VALID_FIND_OPTIONS (constant)">VALID_FIND_OPTIONS</a></span></p>

  
  
  
  
  
  
  
  
  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#extensions-instance_method" title="#extensions (instance method)">- (Object) <strong>extensions</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute extensions.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#klass-instance_method" title="#klass (instance method)">- (Object) <strong>klass</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute klass.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#loaded-instance_method" title="#loaded (instance method)">- (Object) <strong>loaded</strong> </a>
    

    
      (also: #loaded?)
    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute loaded.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#table-instance_method" title="#table (instance method)">- (Object) <strong>table</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute table.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Object) <strong>==</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#any%3F-instance_method" title="#any? (instance method)">- (Boolean) <strong>any?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">- (Object) <strong>as_json</strong>(options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-instance_method" title="#create (instance method)">- (Object) <strong>create</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create%21-instance_method" title="#create! (instance method)">- (Object) <strong>create!</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong>(id_or_array) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes the row with a primary key matching the <tt>id</tt> argument, using
a SQL <tt>DELETE</tt> statement, and returns the number of rows deleted.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_all-instance_method" title="#delete_all (instance method)">- (Object) <strong>delete_all</strong>(conditions = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the <tt>destroy</tt> method nor
invoking callbacks.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy-instance_method" title="#destroy (instance method)">- (Object) <strong>destroy</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Destroy an object (or multiple objects) that has the given id, the object
is instantiated first, therefore all callbacks and filters are fired off
before the object is deleted.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#destroy_all-instance_method" title="#destroy_all (instance method)">- (Object) <strong>destroy_all</strong>(conditions = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling its <tt>destroy</tt> method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eager_loading%3F-instance_method" title="#eager_loading? (instance method)">- (Boolean) <strong>eager_loading?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">- (Boolean) <strong>empty?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if there are no records.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Relation) <strong>initialize</strong>(klass, table) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Relation.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">- (Object) <strong>initialize_copy</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#many%3F-instance_method" title="#many? (instance method)">- (Boolean) <strong>many?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-instance_method" title="#new (instance method)">- (Object) <strong>new</strong>(*args, &amp;block) </a>
    

    
      (also: #build)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#primary_key-instance_method" title="#primary_key (instance method)">- (Object) <strong>primary_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reload-instance_method" title="#reload (instance method)">- (Object) <strong>reload</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">- (Object) <strong>reset</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to%3F-instance_method" title="#respond_to? (instance method)">- (Boolean) <strong>respond_to?</strong>(method, include_private = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scope_for_create-instance_method" title="#scope_for_create (instance method)">- (Object) <strong>scope_for_create</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scoping-instance_method" title="#scoping (instance method)">- (Object) <strong>scoping</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Scope all queries to the current scope.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">- (Object) <strong>size</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns size of the records.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">- (Object) <strong>to_a</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_sql-instance_method" title="#to_sql (instance method)">- (Object) <strong>to_sql</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update-instance_method" title="#update (instance method)">- (Object) <strong>update</strong>(id, attributes) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_all-instance_method" title="#update_all (instance method)">- (Object) <strong>update_all</strong>(updates, conditions = nil, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#where_values_hash-instance_method" title="#where_values_hash (instance method)">- (Object) <strong>where_values_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Batches.html" title="ActiveRecord::Batches (module)">Batches</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Batches.html#find_each-instance_method" title="ActiveRecord::Batches#find_each (method)">#find_each</a></span>, <span class='object_link'><a href="Batches.html#find_in_batches-instance_method" title="ActiveRecord::Batches#find_in_batches (method)">#find_in_batches</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="QueryMethods.html" title="ActiveRecord::QueryMethods (module)">QueryMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="QueryMethods.html#arel-instance_method" title="ActiveRecord::QueryMethods#arel (method)">#arel</a></span>, <span class='object_link'><a href="QueryMethods.html#build_arel-instance_method" title="ActiveRecord::QueryMethods#build_arel (method)">#build_arel</a></span>, <span class='object_link'><a href="QueryMethods.html#build_where-instance_method" title="ActiveRecord::QueryMethods#build_where (method)">#build_where</a></span>, <span class='object_link'><a href="QueryMethods.html#create_with-instance_method" title="ActiveRecord::QueryMethods#create_with (method)">#create_with</a></span>, <span class='object_link'><a href="QueryMethods.html#custom_join_sql-instance_method" title="ActiveRecord::QueryMethods#custom_join_sql (method)">#custom_join_sql</a></span>, <span class='object_link'><a href="QueryMethods.html#eager_load-instance_method" title="ActiveRecord::QueryMethods#eager_load (method)">#eager_load</a></span>, <span class='object_link'><a href="QueryMethods.html#extending-instance_method" title="ActiveRecord::QueryMethods#extending (method)">#extending</a></span>, <span class='object_link'><a href="QueryMethods.html#from-instance_method" title="ActiveRecord::QueryMethods#from (method)">#from</a></span>, <span class='object_link'><a href="QueryMethods.html#group-instance_method" title="ActiveRecord::QueryMethods#group (method)">#group</a></span>, <span class='object_link'><a href="QueryMethods.html#having-instance_method" title="ActiveRecord::QueryMethods#having (method)">#having</a></span>, <span class='object_link'><a href="QueryMethods.html#includes-instance_method" title="ActiveRecord::QueryMethods#includes (method)">#includes</a></span>, <span class='object_link'><a href="QueryMethods.html#joins-instance_method" title="ActiveRecord::QueryMethods#joins (method)">#joins</a></span>, <span class='object_link'><a href="QueryMethods.html#limit-instance_method" title="ActiveRecord::QueryMethods#limit (method)">#limit</a></span>, <span class='object_link'><a href="QueryMethods.html#lock-instance_method" title="ActiveRecord::QueryMethods#lock (method)">#lock</a></span>, <span class='object_link'><a href="QueryMethods.html#offset-instance_method" title="ActiveRecord::QueryMethods#offset (method)">#offset</a></span>, <span class='object_link'><a href="QueryMethods.html#order-instance_method" title="ActiveRecord::QueryMethods#order (method)">#order</a></span>, <span class='object_link'><a href="QueryMethods.html#preload-instance_method" title="ActiveRecord::QueryMethods#preload (method)">#preload</a></span>, <span class='object_link'><a href="QueryMethods.html#readonly-instance_method" title="ActiveRecord::QueryMethods#readonly (method)">#readonly</a></span>, <span class='object_link'><a href="QueryMethods.html#reorder-instance_method" title="ActiveRecord::QueryMethods#reorder (method)">#reorder</a></span>, <span class='object_link'><a href="QueryMethods.html#reverse_order-instance_method" title="ActiveRecord::QueryMethods#reverse_order (method)">#reverse_order</a></span>, <span class='object_link'><a href="QueryMethods.html#select-instance_method" title="ActiveRecord::QueryMethods#select (method)">#select</a></span>, <span class='object_link'><a href="QueryMethods.html#where-instance_method" title="ActiveRecord::QueryMethods#where (method)">#where</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">#append_features</a></span>, <span class='object_link'><a href="../ActiveSupport/Concern.html#extended-class_method" title="ActiveSupport::Concern.extended (method)">extended</a></span>, <span class='object_link'><a href="../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">#included</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SpawnMethods.html" title="ActiveRecord::SpawnMethods (module)">SpawnMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SpawnMethods.html#apply_finder_options-instance_method" title="ActiveRecord::SpawnMethods#apply_finder_options (method)">#apply_finder_options</a></span>, <span class='object_link'><a href="SpawnMethods.html#except-instance_method" title="ActiveRecord::SpawnMethods#except (method)">#except</a></span>, <span class='object_link'><a href="SpawnMethods.html#merge-instance_method" title="ActiveRecord::SpawnMethods#merge (method)">#merge</a></span>, <span class='object_link'><a href="SpawnMethods.html#only-instance_method" title="ActiveRecord::SpawnMethods#only (method)">#only</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="Calculations.html" title="ActiveRecord::Calculations (module)">Calculations</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Calculations.html#average-instance_method" title="ActiveRecord::Calculations#average (method)">#average</a></span>, <span class='object_link'><a href="Calculations.html#calculate-instance_method" title="ActiveRecord::Calculations#calculate (method)">#calculate</a></span>, <span class='object_link'><a href="Calculations.html#count-instance_method" title="ActiveRecord::Calculations#count (method)">#count</a></span>, <span class='object_link'><a href="Calculations.html#maximum-instance_method" title="ActiveRecord::Calculations#maximum (method)">#maximum</a></span>, <span class='object_link'><a href="Calculations.html#minimum-instance_method" title="ActiveRecord::Calculations#minimum (method)">#minimum</a></span>, <span class='object_link'><a href="Calculations.html#sum-instance_method" title="ActiveRecord::Calculations#sum (method)">#sum</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="FinderMethods.html" title="ActiveRecord::FinderMethods (module)">FinderMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="FinderMethods.html#all-instance_method" title="ActiveRecord::FinderMethods#all (method)">#all</a></span>, <span class='object_link'><a href="FinderMethods.html#exists%3F-instance_method" title="ActiveRecord::FinderMethods#exists? (method)">#exists?</a></span>, <span class='object_link'><a href="FinderMethods.html#find-instance_method" title="ActiveRecord::FinderMethods#find (method)">#find</a></span>, <span class='object_link'><a href="FinderMethods.html#first-instance_method" title="ActiveRecord::FinderMethods#first (method)">#first</a></span>, <span class='object_link'><a href="FinderMethods.html#last-instance_method" title="ActiveRecord::FinderMethods#last (method)">#last</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ActiveRecord::Relation (class)">Relation</a></span></tt>) <strong>initialize</strong>(klass, table) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Relation
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24
25
26
27
28
29</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 20</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id klass'>klass</span><span class='comma'>,</span> <span class='id table'>table</span><span class='rparen'>)</span>
  <span class='ivar'>@klass</span><span class='comma'>,</span> <span class='ivar'>@table</span> <span class='op'>=</span> <span class='id klass'>klass</span><span class='comma'>,</span> <span class='id table'>table</span>

  <span class='ivar'>@implicit_readonly</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@loaded</span>            <span class='op'>=</span> <span class='kw'>false</span>

  <span class='const'>SINGLE_VALUE_METHODS</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@</span><span class='embexpr_beg'>#{</span><span class='id v'>v</span><span class='rbrace'>}</span><span class='tstring_content'>_value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='lparen'>(</span><span class='const'>ASSOCIATION_METHODS</span> <span class='op'>+</span> <span class='const'>MULTI_VALUE_METHODS</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='symbol'>:@</span><span class='embexpr_beg'>#{</span><span class='id v'>v</span><span class='rbrace'>}</span><span class='tstring_content'>_values</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span>
  <span class='ivar'>@extensions</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice this">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>
  
    <div class="method_details first">
  <p class="signature first" id="method_missing-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>method_missing</strong>(method, *args, &amp;block)  <span class="extras">(protected)</span>
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


354
355
356
357
358
359
360
361
362
363
364
365
366
367
368
369
370
371
372
373
374
375</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 354</span>

<span class='kw'>def</span> <span class='id method_missing'>method_missing</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='const'>Array</span><span class='period'>.</span><span class='id method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id scopes'>scopes</span><span class='lbracket'>[</span><span class='id method'>method</span><span class='rbracket'>]</span>
    <span class='id merge'>merge</span><span class='lparen'>(</span><span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='id scoping'>scoping</span> <span class='lbrace'>{</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>elsif</span> <span class='id arel'>arel</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='id arel'>arel</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>DynamicFinderMatch</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='id match'>match</span><span class='period'>.</span><span class='id attribute_names'>attribute_names</span>
    <span class='kw'>super</span> <span class='kw'>unless</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:all_attributes_exists?</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id match'>match</span><span class='period'>.</span><span class='id finder?'>finder?</span>
      <span class='id find_by_attributes'>find_by_attributes</span><span class='lparen'>(</span><span class='id match'>match</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
    <span class='kw'>elsif</span> <span class='id match'>match</span><span class='period'>.</span><span class='id instantiator?'>instantiator?</span>
      <span class='id find_or_instantiator_by_attributes'>find_or_instantiator_by_attributes</span><span class='lparen'>(</span><span class='id match'>match</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="extensions=-instance_method"></span>
      <span id="extensions-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="extensions-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>extensions</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute extensions
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


17
18
19</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 17</span>

<span class='kw'>def</span> <span class='id extensions'>extensions</span>
  <span class='ivar'>@extensions</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="klass-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="klass-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>klass</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute klass
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 16</span>

<span class='kw'>def</span> <span class='id klass'>klass</span>
  <span class='ivar'>@klass</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="loaded-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="loaded-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>loaded</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='loaded?-instance_method'>loaded?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute loaded
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 16</span>

<span class='kw'>def</span> <span class='id loaded'>loaded</span>
  <span class='ivar'>@loaded</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="table-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="table-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>table</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute table
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 16</span>

<span class='kw'>def</span> <span class='id table'>table</span>
  <span class='ivar'>@table</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="==-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>==</strong>(other) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 339</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id other'>other</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id other'>other</span>
  <span class='kw'>when</span> <span class='const'>Relation</span>
    <span class='id other'>other</span><span class='period'>.</span><span class='id to_sql'>to_sql</span> <span class='op'>==</span> <span class='id to_sql'>to_sql</span>
  <span class='kw'>when</span> <span class='const'>Array</span>
    <span class='id to_a'>to_a</span> <span class='op'>==</span> <span class='id other'>other</span><span class='period'>.</span><span class='id to_a'>to_a</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="any?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>any?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


91
92
93
94
95
96
97</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 91</span>

<span class='kw'>def</span> <span class='id any?'>any?</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id any?'>any?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='op'>*</span><span class='id block_args'>block_args</span><span class='op'>|</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='op'>*</span><span class='id block_args'>block_args</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='op'>!</span><span class='id empty?'>empty?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="as_json-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>as_json</strong>(options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


79</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 79</span>

<span class='kw'>def</span> <span class='id as_json'>as_json</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='id to_a'>to_a</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create</strong>(*args, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 41</span>

<span class='kw'>def</span> <span class='id create'>create</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id scoping'>scoping</span> <span class='lbrace'>{</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create!</strong>(*args, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 45</span>

<span class='kw'>def</span> <span class='id create!'>create!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id scoping'>scoping</span> <span class='lbrace'>{</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id create!'>create!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete</strong>(id_or_array) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes the row with a primary key matching the <tt>id</tt> argument, using
a SQL <tt>DELETE</tt> statement, and returns the number of rows deleted.
Active Record objects are not instantiated, so the object&#8217;s callbacks
are not executed, including any <tt>:dependent</tt> association options or
Observer methods.
</p>
<p>
You can delete multiple rows at once by passing an Array of <tt>id</tt>s.
</p>
<p>
Note: Although it is often much faster than the alternative,
<tt>#destroy</tt>, skipping callbacks might bypass business logic in your
application that ensures referential integrity or performs other essential
jobs.
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='comment'># Delete a single row
</span>  <span class='const'>Todo</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>

  <span class='comment'># Delete multiple rows
</span>  <span class='const'>Todo</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='comma'>,</span><span class='int'>4</span><span class='rbracket'>]</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


294
295
296</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 294</span>

<span class='kw'>def</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id id_or_array'>id_or_array</span><span class='rparen'>)</span>
  <span class='id where'>where</span><span class='lparen'>(</span><span class='ivar'>@klass</span><span class='period'>.</span><span class='id primary_key'>primary_key</span> <span class='op'>=&gt;</span> <span class='id id_or_array'>id_or_array</span><span class='rparen'>)</span><span class='period'>.</span><span class='id delete_all'>delete_all</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete_all-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete_all</strong>(conditions = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes the records matching <tt>conditions</tt> without instantiating the
records first, and hence not calling the <tt>destroy</tt> method nor
invoking callbacks. This is a single SQL DELETE statement that goes
straight to the database, much more efficient than <tt>destroy_all</tt>. Be
careful with relations though, in particular <tt>:dependent</tt> rules
defined on associations are not honored.  Returns the number of rows
affected.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>conditions</tt> - Conditions are specified the same way as with
<tt>find</tt> method.
</p>
</li>
</ul>
<h4>Example</h4>
<pre class="code">
  <span class='const'>Post</span><span class='period'>.</span><span class='id delete_all'>delete_all</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id = 5 AND (category = 'Something' OR category = 'Else')</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Post</span><span class='period'>.</span><span class='id delete_all'>delete_all</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id = ? AND (category = ? OR category = ?)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='int'>5</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Something</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Else</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
</pre>
<p>
Both calls delete the affected posts all at once with a single DELETE
statement. If you need to destroy dependent associations or call your
<tt>before_*</tt> or <tt>after_destroy</tt> callbacks, use the
<tt>destroy_all</tt> method instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


270
271
272</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 270</span>

<span class='kw'>def</span> <span class='id delete_all'>delete_all</span><span class='lparen'>(</span><span class='id conditions'>conditions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id conditions'>conditions</span> <span class='op'>?</span> <span class='id where'>where</span><span class='lparen'>(</span><span class='id conditions'>conditions</span><span class='rparen'>)</span><span class='period'>.</span><span class='id delete_all'>delete_all</span> <span class='op'>:</span> <span class='id arel'>arel</span><span class='period'>.</span><span class='id delete'>delete</span><span class='period'>.</span><span class='id tap'>tap</span> <span class='lbrace'>{</span> <span class='id reset'>reset</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>destroy</strong>(id) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Destroy an object (or multiple objects) that has the given id, the object
is instantiated first, therefore all callbacks and filters are fired off
before the object is deleted.  This method is less efficient than
ActiveRecord#delete but allows cleanup methods and other actions to be run.
</p>
<p>
This essentially finds the object (or multiple objects) with the given id,
creates a new object from the attributes, and then calls destroy on it.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>id</tt> - Can be either an Integer or an Array of Integers.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
  <span class='comment'># Destroy a single object
</span>  <span class='const'>Todo</span><span class='period'>.</span><span class='id destroy'>destroy</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span>

  <span class='comment'># Destroy multiple objects
</span>  <span class='id todos'>todos</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='int'>1</span><span class='comma'>,</span><span class='int'>2</span><span class='comma'>,</span><span class='int'>3</span><span class='rbracket'>]</span>
  <span class='const'>Todo</span><span class='period'>.</span><span class='id destroy'>destroy</span><span class='lparen'>(</span><span class='id todos'>todos</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


244
245
246
247
248
249
250</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 244</span>

<span class='kw'>def</span> <span class='id destroy'>destroy</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id id'>id</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id id'>id</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id one_id'>one_id</span><span class='op'>|</span> <span class='id destroy'>destroy</span><span class='lparen'>(</span><span class='id one_id'>one_id</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id find'>find</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id destroy'>destroy</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="destroy_all-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>destroy_all</strong>(conditions = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Destroys the records matching <tt>conditions</tt> by instantiating each
record and calling its <tt>destroy</tt> method. Each object&#8217;s
callbacks are executed (including <tt>:dependent</tt> association options
and <tt>before_destroy</tt>/<tt>after_destroy</tt> Observer methods).
Returns the collection of objects that were destroyed; each will be frozen,
to reflect that no changes should be made (since they can&#8217;t be
persisted).
</p>
<p>
Note: Instantiation, callback execution, and deletion of each record can be
time consuming when you&#8217;re removing many records at once. It
generates at least one SQL <tt>DELETE</tt> query per record (or possibly
more, to enforce your callbacks). If you want to delete many rows quickly,
without concern for their associations or callbacks, use
<tt>delete_all</tt> instead.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>conditions</tt> - A string, array, or hash that specifies which records
to destroy. If omitted, all records are destroyed. See the Conditions
section in the introduction to ActiveRecord::Base for more information.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
  <span class='const'>Person</span><span class='period'>.</span><span class='id destroy_all'>destroy_all</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>last_login &lt; '2004-04-04'</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='const'>Person</span><span class='period'>.</span><span class='id destroy_all'>destroy_all</span><span class='lparen'>(</span><span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>inactive</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219
220
221
222
223</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 217</span>

<span class='kw'>def</span> <span class='id destroy_all'>destroy_all</span><span class='lparen'>(</span><span class='id conditions'>conditions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id conditions'>conditions</span>
    <span class='id where'>where</span><span class='lparen'>(</span><span class='id conditions'>conditions</span><span class='rparen'>)</span><span class='period'>.</span><span class='id destroy_all'>destroy_all</span>
  <span class='kw'>else</span>
    <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id object'>object</span><span class='op'>|</span> <span class='id object'>object</span><span class='period'>.</span><span class='id destroy'>destroy</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id tap'>tap</span> <span class='lbrace'>{</span> <span class='id reset'>reset</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="eager_loading?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>eager_loading?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


335
336
337</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 335</span>

<span class='kw'>def</span> <span class='id eager_loading?'>eager_loading?</span>
  <span class='ivar'>@should_eager_load</span> <span class='op'>||=</span> <span class='lparen'>(</span><span class='ivar'>@eager_load_values</span><span class='period'>.</span><span class='id any?'>any?</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='ivar'>@includes_values</span><span class='period'>.</span><span class='id any?'>any?</span> <span class='op'>&amp;&amp;</span> <span class='id references_eager_loaded_tables?'>references_eager_loaded_tables?</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="empty?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>empty?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if there are no records.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 87</span>

<span class='kw'>def</span> <span class='id empty?'>empty?</span>
  <span class='id loaded?'>loaded?</span> <span class='op'>?</span> <span class='ivar'>@records</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>:</span> <span class='id count'>count</span><span class='period'>.</span><span class='id zero?'>zero?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="initialize_copy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>initialize_copy</strong>(other) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 35</span>

<span class='kw'>def</span> <span class='id initialize_copy'>initialize_copy</span><span class='lparen'>(</span><span class='id other'>other</span><span class='rparen'>)</span>
  <span class='id reset'>reset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 348</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id inspect'>inspect</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="many?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>many?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


99
100
101
102
103
104
105</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 99</span>

<span class='kw'>def</span> <span class='id many?'>many?</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id many?'>many?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='op'>*</span><span class='id block_args'>block_args</span><span class='op'>|</span> <span class='kw'>yield</span><span class='lparen'>(</span><span class='op'>*</span><span class='id block_args'>block_args</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='ivar'>@limit_value</span> <span class='op'>?</span> <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id many?'>many?</span> <span class='op'>:</span> <span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>new</strong>(*args, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='build-instance_method'>build</span></span>
    </span>
  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 31</span>

<span class='kw'>def</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id scoping'>scoping</span> <span class='lbrace'>{</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="primary_key-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>primary_key</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 311</span>

<span class='kw'>def</span> <span class='id primary_key'>primary_key</span>
  <span class='ivar'>@primary_key</span> <span class='op'>||=</span> <span class='id table'>table</span><span class='lbracket'>[</span><span class='ivar'>@klass</span><span class='period'>.</span><span class='id primary_key'>primary_key</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reload-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reload</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


298
299
300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 298</span>

<span class='kw'>def</span> <span class='id reload'>reload</span>
  <span class='id reset'>reset</span>
  <span class='id to_a'>to_a</span> <span class='comment'># force reload
</span>  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 304</span>

<span class='kw'>def</span> <span class='id reset'>reset</span>
  <span class='ivar'>@first</span> <span class='op'>=</span> <span class='ivar'>@last</span> <span class='op'>=</span> <span class='ivar'>@to_sql</span> <span class='op'>=</span> <span class='ivar'>@order_clause</span> <span class='op'>=</span> <span class='ivar'>@scope_for_create</span> <span class='op'>=</span> <span class='ivar'>@arel</span> <span class='op'>=</span> <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@should_eager_load</span> <span class='op'>=</span> <span class='ivar'>@join_dependency</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@records</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="respond_to?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>respond_to?</strong>(method, include_private = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 49</span>

<span class='kw'>def</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='id include_private'>include_private</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id arel'>arel</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='id include_private'>include_private</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='const'>Array</span><span class='period'>.</span><span class='id method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='id include_private'>include_private</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>DynamicFinderMatch</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:all_attributes_exists?</span><span class='comma'>,</span> <span class='id match'>match</span><span class='period'>.</span><span class='id attribute_names'>attribute_names</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>DynamicScopeMatch</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id method'>method</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:all_attributes_exists?</span><span class='comma'>,</span> <span class='id match'>match</span><span class='period'>.</span><span class='id attribute_names'>attribute_names</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>super</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scope_for_create-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>scope_for_create</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


329
330
331
332
333</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 329</span>

<span class='kw'>def</span> <span class='id scope_for_create'>scope_for_create</span>
  <span class='ivar'>@scope_for_create</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='ivar'>@create_with_value</span> <span class='op'>||</span> <span class='id where_values_hash'>where_values_hash</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scoping-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>scoping</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Scope all queries to the current scope.
</p>
<h4>Example</h4>
<pre class="code">
  <span class='const'>Comment</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:post_id</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id scoping'>scoping</span> <span class='kw'>do</span>
    <span class='const'>Comment</span><span class='period'>.</span><span class='id first'>first</span> <span class='comment'># SELECT * FROM comments WHERE post_id = 1
</span>  <span class='kw'>end</span>
</pre>
<p>
Please check unscoped if you want to remove all previous scopes (including
the default_scope) during the execution of a block.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


117
118
119
120
121
122
123
124</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 117</span>

<span class='kw'>def</span> <span class='id scoping'>scoping</span>
  <span class='ivar'>@klass</span><span class='period'>.</span><span class='id scoped_methods'>scoped_methods</span> <span class='op'>&lt;&lt;</span> <span class='kw'>self</span>
  <span class='kw'>begin</span>
    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@klass</span><span class='period'>.</span><span class='id scoped_methods'>scoped_methods</span><span class='period'>.</span><span class='id pop'>pop</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="size-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>size</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns size of the records.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


82
83
84</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 82</span>

<span class='kw'>def</span> <span class='id size'>size</span>
  <span class='id loaded?'>loaded?</span> <span class='op'>?</span> <span class='ivar'>@records</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>:</span> <span class='id count'>count</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_a-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_a</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 61</span>

<span class='kw'>def</span> <span class='id to_a'>to_a</span>
  <span class='kw'>return</span> <span class='ivar'>@records</span> <span class='kw'>if</span> <span class='id loaded?'>loaded?</span>

  <span class='ivar'>@records</span> <span class='op'>=</span> <span class='id eager_loading?'>eager_loading?</span> <span class='op'>?</span> <span class='id find_with_associations'>find_with_associations</span> <span class='op'>:</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id find_by_sql'>find_by_sql</span><span class='lparen'>(</span><span class='id arel'>arel</span><span class='period'>.</span><span class='id to_sql'>to_sql</span><span class='rparen'>)</span>

  <span class='id preload'>preload</span> <span class='op'>=</span> <span class='ivar'>@preload_values</span>
  <span class='id preload'>preload</span> <span class='op'>+=</span>  <span class='ivar'>@includes_values</span> <span class='kw'>unless</span> <span class='id eager_loading?'>eager_loading?</span>
  <span class='id preload'>preload</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id associations'>associations</span><span class='op'>|</span> <span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:preload_associations</span><span class='comma'>,</span> <span class='ivar'>@records</span><span class='comma'>,</span> <span class='id associations'>associations</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='comment'># @readonly_value is true only if set explicitly. @implicit_readonly is true if there
</span>  <span class='comment'># are JOINS and no explicit SELECT.
</span>  <span class='id readonly'>readonly</span> <span class='op'>=</span> <span class='ivar'>@readonly_value</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>?</span> <span class='ivar'>@implicit_readonly</span> <span class='op'>:</span> <span class='ivar'>@readonly_value</span>
  <span class='ivar'>@records</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id record'>record</span><span class='op'>|</span> <span class='id record'>record</span><span class='period'>.</span><span class='id readonly!'>readonly!</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id readonly'>readonly</span>

  <span class='ivar'>@loaded</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@records</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_sql-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_sql</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


315
316
317</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 315</span>

<span class='kw'>def</span> <span class='id to_sql'>to_sql</span>
  <span class='ivar'>@to_sql</span> <span class='op'>||=</span> <span class='id arel'>arel</span><span class='period'>.</span><span class='id to_sql'>to_sql</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update</strong>(id, attributes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>id</tt> - This should be the id or an array of ids to be updated.
</p>
</li>
<li><p>
<tt>attributes</tt> - This should be a hash of attributes or an array of
hashes.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
  <span class='comment'># Updates one record
</span>  <span class='const'>Person</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='int'>15</span><span class='comma'>,</span> <span class='symbol'>:user_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Samuel</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:group</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>expert</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

  <span class='comment'># Updates multiple records
</span>  <span class='id people'>people</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>first_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='int'>2</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>first_name</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Jeremy</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>
  <span class='const'>Person</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='id people'>people</span><span class='period'>.</span><span class='id keys'>keys</span><span class='comma'>,</span> <span class='id people'>people</span><span class='period'>.</span><span class='id values'>values</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 180</span>

<span class='kw'>def</span> <span class='id update'>update</span><span class='lparen'>(</span><span class='id id'>id</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id id'>id</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id idx'>idx</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id id'>id</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id one_id'>one_id</span><span class='op'>|</span> <span class='id idx'>idx</span> <span class='op'>+=</span> <span class='int'>1</span><span class='semicolon'>;</span> <span class='id update'>update</span><span class='lparen'>(</span><span class='id one_id'>one_id</span><span class='comma'>,</span> <span class='id attributes'>attributes</span><span class='lbracket'>[</span><span class='id idx'>idx</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id object'>object</span> <span class='op'>=</span> <span class='id find'>find</span><span class='lparen'>(</span><span class='id id'>id</span><span class='rparen'>)</span>
    <span class='id object'>object</span><span class='period'>.</span><span class='id update_attributes'>update_attributes</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='rparen'>)</span>
    <span class='id object'>object</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_all-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_all</strong>(updates, conditions = nil, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates all records with details given if they match a set of conditions
supplied, limits and order can also be supplied. This method constructs a
single SQL UPDATE statement and sends it straight to the database. It does
not instantiate the involved models and it does not trigger Active Record
callbacks or validations.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>updates</tt> - A string, array, or hash representing the SET part of an
SQL statement.
</p>
</li>
<li><p>
<tt>conditions</tt> - A string, array, or hash representing the WHERE part
of an SQL statement. See conditions in the intro.
</p>
</li>
<li><p>
<tt>options</tt> - Additional options are <tt>:limit</tt> and
<tt>:order</tt>, see the examples for usage.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
  <span class='comment'># Update all customers with the given attributes
</span>  <span class='const'>Customer</span><span class='period'>.</span><span class='id update_all'>update_all</span> <span class='symbol'>:wants_email</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>

  <span class='comment'># Update all books with 'Rails' in their title
</span>  <span class='const'>Book</span><span class='period'>.</span><span class='id update_all'>update_all</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>author = 'David'</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>title LIKE '%Rails%'</span><span class='tstring_end'>&quot;</span></span>

  <span class='comment'># Update all avatars migrated more than a week ago
</span>  <span class='const'>Avatar</span><span class='period'>.</span><span class='id update_all'>update_all</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>migrated_at = ?</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id utc'>utc</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>migrated_at &gt; ?</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='period'>.</span><span class='id week'>week</span><span class='period'>.</span><span class='id ago'>ago</span><span class='rbracket'>]</span>

  <span class='comment'># Update all books that match conditions, but limit it to 5 ordered by date
</span>  <span class='const'>Book</span><span class='period'>.</span><span class='id update_all'>update_all</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>author = 'David'</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>title LIKE '%Rails%'</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:order</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>created_at</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:limit</span> <span class='op'>=&gt;</span> <span class='int'>5</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 151</span>

<span class='kw'>def</span> <span class='id update_all'>update_all</span><span class='lparen'>(</span><span class='id updates'>updates</span><span class='comma'>,</span> <span class='id conditions'>conditions</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id conditions'>conditions</span> <span class='op'>||</span> <span class='id options'>options</span><span class='period'>.</span><span class='id present?'>present?</span>
    <span class='id where'>where</span><span class='lparen'>(</span><span class='id conditions'>conditions</span><span class='rparen'>)</span><span class='period'>.</span><span class='id apply_finder_options'>apply_finder_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='period'>.</span><span class='id slice'>slice</span><span class='lparen'>(</span><span class='symbol'>:limit</span><span class='comma'>,</span> <span class='symbol'>:order</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id update_all'>update_all</span><span class='lparen'>(</span><span class='id updates'>updates</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='comment'># Apply limit and order only if they're both present
</span>    <span class='kw'>if</span> <span class='ivar'>@limit_value</span><span class='period'>.</span><span class='id present?'>present?</span> <span class='op'>==</span> <span class='ivar'>@order_values</span><span class='period'>.</span><span class='id present?'>present?</span>
      <span class='id arel'>arel</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='const'>Arel</span><span class='op'>::</span><span class='const'>SqlLiteral</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='ivar'>@klass</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:sanitize_sql_for_assignment</span><span class='comma'>,</span> <span class='id updates'>updates</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id except'>except</span><span class='lparen'>(</span><span class='symbol'>:limit</span><span class='comma'>,</span> <span class='symbol'>:order</span><span class='rparen'>)</span><span class='period'>.</span><span class='id update_all'>update_all</span><span class='lparen'>(</span><span class='id updates'>updates</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="where_values_hash-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>where_values_hash</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325
326
327</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/relation.rb', line 319</span>

<span class='kw'>def</span> <span class='id where_values_hash'>where_values_hash</span>
      <span class='const'>Hash</span><span class='lbracket'>[</span><span class='ivar'>@where_values</span><span class='period'>.</span><span class='id find_all'>find_all</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id w'>w</span><span class='op'>|</span>
        <span class='id w'>w</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:operator</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id w'>w</span><span class='period'>.</span><span class='id operator'>operator</span> <span class='op'>==</span> <span class='symbol'>:==</span>
      <span class='rbrace'>}</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id where'>where</span><span class='op'>|</span>
        <span class='lbracket'>[</span><span class='id where'>where</span><span class='period'>.</span><span class='id operand1'>operand1</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span>
         <span class='id where'>where</span><span class='period'>.</span><span class='id operand2'>operand2</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:value</span><span class='rparen'>)</span> <span class='op'>?</span>
         <span class='id where'>where</span><span class='period'>.</span><span class='id operand2'>operand2</span><span class='period'>.</span><span class='id value'>value</span> <span class='op'>:</span> <span class='id where'>where</span><span class='period'>.</span><span class='id operand2'>operand2</span><span class='rbracket'>]</span>
    <span class='rbrace'>}</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:28 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>