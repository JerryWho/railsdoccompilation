<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveRecord::Schema</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
     &raquo; 
    <span class="title">Schema</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveRecord::Schema
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span></li>
          
            <li class="next">ActiveRecord::Schema</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activerecord/lib/active_record/schema.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>Active Record Schema</h1>
<p>
Allows programmers to programmatically define a schema in a portable DSL.
This means you can define tables, indexes, etc. without using SQL directly,
so your applications can more easily support multiple databases.
</p>
<p>
Usage:
</p>
<pre class="code">
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Schema</span><span class='period'>.</span><span class='id define'>define</span> <span class='kw'>do</span>
    <span class='id create_table'>create_table</span> <span class='symbol'>:authors</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
      <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:null</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id add_index'>add_index</span> <span class='symbol'>:authors</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:unique</span>

    <span class='id create_table'>create_table</span> <span class='symbol'>:posts</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
      <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:author_id</span><span class='comma'>,</span> <span class='symbol'>:null</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
      <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span> <span class='symbol'>:subject</span>
      <span class='id t'>t</span><span class='period'>.</span><span class='id text'>text</span> <span class='symbol'>:body</span>
      <span class='id t'>t</span><span class='period'>.</span><span class='id boolean'>boolean</span> <span class='symbol'>:private</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
    <span class='kw'>end</span>

    <span class='id add_index'>add_index</span> <span class='symbol'>:posts</span><span class='comma'>,</span> <span class='symbol'>:author_id</span>
  <span class='kw'>end</span>
</pre>
<p>
ActiveRecord::Schema is only supported by database adapters that also
support migrations, the two features being very similar.
</p>


  </div>
</div>
<div class="tags">
  
</div>

  
  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define-class_method" title="define (class method)">+ (Object) <strong>define</strong>(info = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Eval the given block.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#migrations_path-class_method" title="migrations_path (class method)">+ (Object) <strong>migrations_path</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="Migration.html" title="ActiveRecord::Migration (class)">Migration</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="Migration.html#announce-class_method" title="ActiveRecord::Migration.announce (method)">announce</a></span>, <span class='object_link'><a href="Migration.html#connection-class_method" title="ActiveRecord::Migration.connection (method)">connection</a></span>, <span class='object_link'><a href="Migration.html#down_with_benchmarks-class_method" title="ActiveRecord::Migration.down_with_benchmarks (method)">down_with_benchmarks</a></span>, <span class='object_link'><a href="Migration.html#method_missing-class_method" title="ActiveRecord::Migration.method_missing (method)">method_missing</a></span>, <span class='object_link'><a href="Migration.html#migrate-class_method" title="ActiveRecord::Migration.migrate (method)">migrate</a></span>, <span class='object_link'><a href="Migration.html#say-class_method" title="ActiveRecord::Migration.say (method)">say</a></span>, <span class='object_link'><a href="Migration.html#say_with_time-class_method" title="ActiveRecord::Migration.say_with_time (method)">say_with_time</a></span>, <span class='object_link'><a href="Migration.html#singleton_method_added-class_method" title="ActiveRecord::Migration.singleton_method_added (method)">singleton_method_added</a></span>, <span class='object_link'><a href="Migration.html#suppress_messages-class_method" title="ActiveRecord::Migration.suppress_messages (method)">suppress_messages</a></span>, <span class='object_link'><a href="Migration.html#up_with_benchmarks-class_method" title="ActiveRecord::Migration.up_with_benchmarks (method)">up_with_benchmarks</a></span>, <span class='object_link'><a href="Migration.html#write-class_method" title="ActiveRecord::Migration.write (method)">write</a></span></p>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="define-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>define</strong>(info = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Eval the given block. All methods available to the current connection
adapter are available within the block, so you can easily use the database
definition DSL to build up your schema (<tt>create_table</tt>,
<tt>add_index</tt>, etc.).
</p>
<p>
The <tt>info</tt> hash is optional, and if given is used to define metadata
about the current schema (currently, only the schema&#8217;s version):
</p>
<pre class="code">
  ActiveRecord::Schema.define(:version =&gt; 20380119000001) do
    ...
  end</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


50
51
52
53
54
55
56
57</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/schema.rb', line 50</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id define'>define</span><span class='lparen'>(</span><span class='id info'>info</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id instance_eval'>instance_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>

  <span class='kw'>unless</span> <span class='id info'>info</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id blank?'>blank?</span>
    <span class='id initialize_schema_migrations_table'>initialize_schema_migrations_table</span>
    <span class='id assume_migrated_upto_version'>assume_migrated_upto_version</span><span class='lparen'>(</span><span class='id info'>info</span><span class='lbracket'>[</span><span class='symbol'>:version</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id migrations_path'>migrations_path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="migrations_path-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>migrations_path</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/schema.rb', line 35</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id migrations_path'>migrations_path</span>
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Migrator</span><span class='period'>.</span><span class='id migrations_path'>migrations_path</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:25 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>