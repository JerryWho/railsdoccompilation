<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActiveRecord::TestFixtures</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
     &raquo; 
    <span class="title">TestFixtures</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActiveRecord::TestFixtures
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1"><span class='object_link'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></dd>
      
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activerecord/lib/active_record/fixtures.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="TestFixtures/ClassMethods.html" title="ActiveRecord::TestFixtures::ClassMethods (module)">ClassMethods</a></span>
    
   
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="required_fixture_classes-classvariable" class="">@@required_fixture_classes =
          <div class="docstring">
  <div class="discussion">
    <p>
for pre_loaded_fixtures, only require the classes once. huge speed
improvement
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='kw'>false</span></pre></dd>
      
    </dl>
  


  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_in_transaction%3F-instance_method" title="#run_in_transaction? (instance method)">- (Boolean) <strong>run_in_transaction?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#setup_fixtures-instance_method" title="#setup_fixtures (instance method)">- (Object) <strong>setup_fixtures</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#teardown_fixtures-instance_method" title="#teardown_fixtures (instance method)">- (Object) <strong>teardown_fixtures</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">append_features</a></span>, <span class='object_link'><a href="../ActiveSupport/Concern.html#extended-class_method" title="ActiveSupport::Concern.extended (method)">extended</a></span>, <span class='object_link'><a href="../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">included</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="run_in_transaction?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>run_in_transaction?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


920
921
922
923</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 920</span>

<span class='kw'>def</span> <span class='id run_in_transaction?'>run_in_transaction?</span>
  <span class='id use_transactional_fixtures'>use_transactional_fixtures</span> <span class='op'>&amp;&amp;</span>
    <span class='op'>!</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id uses_transaction?'>uses_transaction?</span><span class='lparen'>(</span><span class='id method_name'>method_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="setup_fixtures-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>setup_fixtures</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940
941
942
943
944
945
946
947
948
949
950
951
952
953
954
955</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 925</span>

<span class='kw'>def</span> <span class='id setup_fixtures'>setup_fixtures</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id configurations'>configurations</span><span class='period'>.</span><span class='id blank?'>blank?</span>

  <span class='kw'>if</span> <span class='id pre_loaded_fixtures'>pre_loaded_fixtures</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id use_transactional_fixtures'>use_transactional_fixtures</span>
    <span class='id raise'>raise</span> <span class='const'>RuntimeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pre_loaded_fixtures requires use_transactional_fixtures</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@fixture_cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='cvar'>@@already_loaded_fixtures</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='comment'># Load fixtures once and begin transaction.
</span>  <span class='kw'>if</span> <span class='id run_in_transaction?'>run_in_transaction?</span>
    <span class='kw'>if</span> <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbracket'>]</span>
      <span class='ivar'>@loaded_fixtures</span> <span class='op'>=</span> <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id load_fixtures'>load_fixtures</span>
      <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@loaded_fixtures</span>
    <span class='kw'>end</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id increment_open_transactions'>increment_open_transactions</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id transaction_joinable'>transaction_joinable</span> <span class='op'>=</span> <span class='kw'>false</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id begin_db_transaction'>begin_db_transaction</span>
  <span class='comment'># Load fixtures for every test.
</span>  <span class='kw'>else</span>
    <span class='const'>Fixtures</span><span class='period'>.</span><span class='id reset_cache'>reset_cache</span>
    <span class='cvar'>@@already_loaded_fixtures</span><span class='lbracket'>[</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='id load_fixtures'>load_fixtures</span>
  <span class='kw'>end</span>

  <span class='comment'># Instantiate fixtures for every test if requested.
</span>  <span class='id instantiate_fixtures'>instantiate_fixtures</span> <span class='kw'>if</span> <span class='id use_instantiated_fixtures'>use_instantiated_fixtures</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="teardown_fixtures-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>teardown_fixtures</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


957
958
959
960
961
962
963
964
965
966
967
968
969
970</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 957</span>

<span class='kw'>def</span> <span class='id teardown_fixtures'>teardown_fixtures</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id configurations'>configurations</span><span class='period'>.</span><span class='id blank?'>blank?</span>

  <span class='kw'>unless</span> <span class='id run_in_transaction?'>run_in_transaction?</span>
    <span class='const'>Fixtures</span><span class='period'>.</span><span class='id reset_cache'>reset_cache</span>
  <span class='kw'>end</span>

  <span class='comment'># Rollback changes if a transaction is active.
</span>  <span class='kw'>if</span> <span class='id run_in_transaction?'>run_in_transaction?</span> <span class='op'>&amp;&amp;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id open_transactions'>open_transactions</span> <span class='op'>!=</span> <span class='int'>0</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id rollback_db_transaction'>rollback_db_transaction</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id decrement_open_transactions'>decrement_open_transactions</span>
  <span class='kw'>end</span>
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id clear_active_connections!'>clear_active_connections!</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:27 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>