<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveRecord::Base</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ActiveRecord.html" title="ActiveRecord (module)">ActiveRecord</a></span></span>
     &raquo; 
    <span class="title">Base</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveRecord::Base
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">ActiveRecord::Base</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activerecord/lib/active_record/base.rb<span class="defines">,<br />
  activerecord/lib/active_record/connection_adapters/mysql_adapter.rb,<br /> activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb,<br /> activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb,<br /> activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>Active Record</h1>
<p>
Active Record objects don&#8217;t specify their attributes directly, but
rather infer them from the table definition with which they&#8217;re
linked. Adding, removing, and changing attributes and their type is done
directly in the database. Any change is instantly reflected in the Active
Record objects. The mapping that binds a given Active Record class to a
certain database table will happen automatically in most common cases, but
can be overwritten for the uncommon ones.
</p>
<p>
See the mapping rules in table_name and the full example in <a
href="files/activerecord/README_rdoc.html">files/activerecord/README_rdoc.html</a>
for more insight.
</p>
<h2>Creation</h2>
<p>
Active Records accept constructor parameters either in a hash or as a
block. The hash method is especially useful when you&#8217;re receiving the
data from somewhere else, like an HTTP request. It works like this:
</p>
<pre class="code">
  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:occupation</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Code Artist</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id name'>name</span> <span class='comment'># =&gt; &quot;David&quot;
</span></pre>
<p>
You can also use block initialization:
</p>
<pre class="code">
  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span>
    <span class='id u'>u</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span>
    <span class='id u'>u</span><span class='period'>.</span><span class='id occupation'>occupation</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Code Artist</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
</pre>
<p>
And of course you can just create a bare object and specify the attributes
after the fact:
</p>
<pre class="code">
  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id occupation'>occupation</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Code Artist</span><span class='tstring_end'>&quot;</span></span>
</pre>
<h2>Conditions</h2>
<p>
Conditions can either be specified as a string, array, or hash representing
the WHERE-part of an SQL statement. The array form is to be used when the
condition input is tainted and requires sanitization. The string form can
be used for statements that don&#8217;t involve tainted data. The hash form
works much like the array form, except only equality and range is possible.
Examples:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id authenticate_unsafely'>authenticate_unsafely</span><span class='lparen'>(</span><span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
      <span class='id where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_name = '</span><span class='embexpr_beg'>#{</span><span class='id user_name'>user_name</span><span class='rbrace'>}</span><span class='tstring_content'>' AND password = '</span><span class='embexpr_beg'>#{</span><span class='id password'>password</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id authenticate_safely'>authenticate_safely</span><span class='lparen'>(</span><span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
      <span class='id where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user_name = ? AND password = ?</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id authenticate_safely_simply'>authenticate_safely_simply</span><span class='lparen'>(</span><span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rparen'>)</span>
      <span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:user_name</span> <span class='op'>=&gt;</span> <span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='id password'>password</span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
The <tt>authenticate_unsafely</tt> method inserts the parameters directly
into the query and is thus susceptible to SQL-injection attacks if the
<tt>user_name</tt> and <tt>password</tt> parameters come directly from an
HTTP request. The <tt>authenticate_safely</tt>  and
<tt>authenticate_safely_simply</tt> both will sanitize the
<tt>user_name</tt> and <tt>password</tt> before inserting them in the
query, which will ensure that an attacker can&#8217;t escape the query and
fake the login (or worse).
</p>
<p>
When using multiple parameters in the conditions, it can easily become hard
to read exactly what the fourth or fifth question mark is supposed to
represent. In those cases, you can resort to named bind variables instead.
That&#8217;s done by replacing the question marks with symbols and
supplying a hash with values for the matching symbol keys:
</p>
<pre class="code">
  <span class='const'>Company</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>id = :id AND name = :name AND division = :division AND created_at &gt; :accounting_date</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='lbrace'>{</span> <span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='int'>3</span><span class='comma'>,</span> <span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>37signals</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:division</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>First</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:accounting_date</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>2005-01-01</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span>
  <span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
</pre>
<p>
Similarly, a simple hash without a statement will generate conditions based
on equality with the SQL AND operator. For instance:
</p>
<pre class="code">
  <span class='const'>Student</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Harvey</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:status</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='const'>Student</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:student</span><span class='rbracket'>]</span><span class='rparen'>)</span>
</pre>
<p>
A range may be used in the hash to use the SQL BETWEEN operator:
</p>
<pre class="code">
  <span class='const'>Student</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:grade</span> <span class='op'>=&gt;</span> <span class='int'>9</span><span class='op'>..</span><span class='int'>12</span><span class='rparen'>)</span>
</pre>
<p>
An array may be used in the hash to use the SQL IN operator:
</p>
<pre class="code">
  <span class='const'>Student</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:grade</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='int'>9</span><span class='comma'>,</span><span class='int'>11</span><span class='comma'>,</span><span class='int'>12</span><span class='rbracket'>]</span><span class='rparen'>)</span>
</pre>
<p>
When joining tables, nested hashes or keys written in the form
&#8216;table_name.column_name&#8217; can be used to qualify the table name
of a particular condition. For instance:
</p>
<pre class="code">
  <span class='const'>Student</span><span class='period'>.</span><span class='id joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:schools</span><span class='rparen'>)</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:schools</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:type</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>public</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>Student</span><span class='period'>.</span><span class='id joins'>joins</span><span class='lparen'>(</span><span class='symbol'>:schools</span><span class='rparen'>)</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>schools.type</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>public</span><span class='tstring_end'>'</span></span> <span class='rparen'>)</span>
</pre>
<h2>Overwriting default accessors</h2>
<p>
All column values are automatically available through basic accessors on
the Active Record object, but sometimes you want to specialize this
behavior. This can be done by overwriting the default accessors (using the
same name as the attribute) and calling <tt>read_attribute(attr_name)</tt>
and <tt>write_attribute(attr_name, value)</tt> to actually change things.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Song</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='comment'># Uses an integer of seconds to hold the length of the song
</span>
    <span class='kw'>def</span> <span class='id length='>length=</span><span class='lparen'>(</span><span class='id minutes'>minutes</span><span class='rparen'>)</span>
      <span class='id write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='symbol'>:length</span><span class='comma'>,</span> <span class='id minutes'>minutes</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>*</span> <span class='int'>60</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='id length'>length</span>
      <span class='id read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='symbol'>:length</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='int'>60</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
You can alternatively use <tt>self[:attribute]=(value)</tt> and
<tt>self[:attribute]</tt> instead of <tt>write_attribute(:attribute,
value)</tt> and <tt>read_attribute(:attribute)</tt>.
</p>
<h2>Attribute query methods</h2>
<p>
In addition to the basic accessors, query methods are also automatically
available on the Active Record object. Query methods allow you to test
whether an attribute value is present.
</p>
<p>
For example, an Active Record User with the <tt>name</tt> attribute has a
<tt>name?</tt> method that you can call to determine whether the user has a
name:
</p>
<pre class="code">
  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id name?'>name?</span> <span class='comment'># =&gt; true
</span>
  <span class='id anonymous'>anonymous</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id anonymous'>anonymous</span><span class='period'>.</span><span class='id name?'>name?</span> <span class='comment'># =&gt; false
</span></pre>
<h2>Accessing attributes before they have been typecasted</h2>
<p>
Sometimes you want to be able to read the raw attribute data without having
the column-determined typecast run its course first. That can be done by
using the <tt>&lt;attribute&gt;_before_type_cast</tt> accessors that all
attributes have. For example, if your Account model has a <tt>balance</tt>
attribute, you can call <tt>account.balance_before_type_cast</tt> or
<tt>account.id_before_type_cast</tt>.
</p>
<p>
This is especially useful in validation situations where the user might
supply a string for an integer field and you want to display the original
string back in an error message. Accessing the attribute normally would
typecast the string to 0, which isn&#8217;t what you want.
</p>
<h2>Dynamic attribute-based finders</h2>
<p>
Dynamic attribute-based finders are a cleaner way of getting (and/or
creating) objects by simple queries without turning to SQL. They work by
appending the name of an attribute to <tt>find_by_</tt>,
<tt>find_last_by_</tt>, or <tt>find_all_by_</tt> and thus produces finders
like <tt>Person.find_by_user_name</tt>,
<tt>Person.find_all_by_last_name</tt>, and
<tt>Payment.find_by_transaction_id</tt>. Instead of writing
<tt>Person.where(:user_name =&gt; user_name).first</tt>, you just do
<tt>Person.find_by_user_name(user_name)</tt>. And instead of writing
<tt>Person.where(:last_name =&gt; last_name).all</tt>, you just do
<tt>Person.find_all_by_last_name(last_name)</tt>.
</p>
<p>
It&#8217;s also possible to use multiple attributes in the same find by
separating them with &#8220;<em>and</em>&#8220;.
</p>
<pre class="code">
 <span class='const'>Person</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:user_name</span> <span class='op'>=&gt;</span> <span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='id password'>password</span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
 <span class='const'>Person</span><span class='period'>.</span><span class='id find_by_user_name_and_password'>find_by_user_name_and_password</span> <span class='comment'>#with dynamic finder
</span>
 <span class='const'>Person</span><span class='period'>.</span><span class='id where'>where</span><span class='lparen'>(</span><span class='symbol'>:user_name</span> <span class='op'>=&gt;</span> <span class='id user_name'>user_name</span><span class='comma'>,</span> <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='id password'>password</span><span class='comma'>,</span> <span class='symbol'>:gender</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>male</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id first'>first</span>
 <span class='const'>Payment</span><span class='period'>.</span><span class='id find_by_user_name_and_password_and_gender'>find_by_user_name_and_password_and_gender</span>
</pre>
<p>
It&#8217;s even possible to call these dynamic finder methods on relations
and named scopes.
</p>
<pre class="code">
  <span class='const'>Payment</span><span class='period'>.</span><span class='id order'>order</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>created_on</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id find_all_by_amount'>find_all_by_amount</span><span class='lparen'>(</span><span class='int'>50</span><span class='rparen'>)</span>
  <span class='const'>Payment</span><span class='period'>.</span><span class='id pending'>pending</span><span class='period'>.</span><span class='id find_last_by_amount'>find_last_by_amount</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span>
</pre>
<p>
The same dynamic finder style can be used to create the object if it
doesn&#8217;t already exist. This dynamic finder is called with
<tt>find_or_create_by_</tt> and will return the object if it already exists
and otherwise creates it, then returns it. Protected attributes won&#8217;t
be set unless they are given in a block.
</p>
<pre class="code">
  <span class='comment'># No 'Summer' tag exists
</span>  <span class='const'>Tag</span><span class='period'>.</span><span class='id find_or_create_by_name'>find_or_create_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Summer</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># equal to Tag.create(:name =&gt; &quot;Summer&quot;)
</span>
  <span class='comment'># Now the 'Summer' tag does exist
</span>  <span class='const'>Tag</span><span class='period'>.</span><span class='id find_or_create_by_name'>find_or_create_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Summer</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># equal to Tag.find_by_name(&quot;Summer&quot;)
</span>
  <span class='comment'># Now 'Bob' exist and is an 'admin'
</span>  <span class='const'>User</span><span class='period'>.</span><span class='id find_or_create_by_name'>find_or_create_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Bob</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:age</span> <span class='op'>=&gt;</span> <span class='int'>40</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span> <span class='id u'>u</span><span class='period'>.</span><span class='id admin'>admin</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
</pre>
<p>
Use the <tt>find_or_initialize_by_</tt> finder if you want to return a new
record without saving it first. Protected attributes won&#8217;t be set
unless they are given in a block.
</p>
<pre class="code">
  <span class='comment'># No 'Winter' tag exists
</span>  <span class='id winter'>winter</span> <span class='op'>=</span> <span class='const'>Tag</span><span class='period'>.</span><span class='id find_or_initialize_by_name'>find_or_initialize_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Winter</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id winter'>winter</span><span class='period'>.</span><span class='id new_record?'>new_record?</span> <span class='comment'># true
</span></pre>
<p>
To find by a subset of the attributes to be used for instantiating a new
object, pass a hash instead of a list of parameters.
</p>
<pre class="code">
  <span class='const'>Tag</span><span class='period'>.</span><span class='id find_or_create_by_name'>find_or_create_by_name</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:creator</span> <span class='op'>=&gt;</span> <span class='id current_user'>current_user</span><span class='rparen'>)</span>
</pre>
<p>
That will either find an existing tag named &#8220;rails&#8221;, or create
a new one while setting the user that created it.
</p>
<p>
Just like <tt>find_by_*</tt>, you can also use <tt>scoped_by_*</tt> to
retrieve data. The good thing about using this feature is that the very
first time result is returned using <tt>method_missing</tt> technique but
after that the method is declared on the class. Henceforth
<tt>method_missing</tt> will not be hit.
</p>
<pre class="code">
 <span class='const'>User</span><span class='period'>.</span><span class='id scoped_by_user_name'>scoped_by_user_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>David</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
</pre>
<h2>Saving arrays, hashes, and other non-mappable objects in text columns</h2>
<p>
Active Record can serialize any object in text columns using YAML. To do
so, you must specify this with a call to the class method
<tt>serialize</tt>. This makes it possible to store arrays, hashes, and
other non-mappable objects without doing any additional work.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id serialize'>serialize</span> <span class='symbol'>:preferences</span>
  <span class='kw'>end</span>

  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:preferences</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>background</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>black</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>display</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id large'>large</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='id user'>user</span><span class='period'>.</span><span class='id id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id preferences'>preferences</span> <span class='comment'># =&gt; { &quot;background&quot; =&gt; &quot;black&quot;, &quot;display&quot; =&gt; large }
</span></pre>
<p>
You can also specify a class option as the second parameter that&#8217;ll
raise an exception if a serialized object is retrieved as a descendant of a
class not in the hierarchy.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id serialize'>serialize</span> <span class='symbol'>:preferences</span><span class='comma'>,</span> <span class='const'>Hash</span>
  <span class='kw'>end</span>

  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:preferences</span> <span class='op'>=&gt;</span> <span class='qwords_beg'>%w( </span><span class='tstring_content'>one</span><span class='words_sep'> </span><span class='tstring_content'>two</span><span class='words_sep'> </span><span class='tstring_content'>three</span><span class='words_sep'> )</span><span class='rparen'>)</span>
  <span class='const'>User</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='id user'>user</span><span class='period'>.</span><span class='id id'>id</span><span class='rparen'>)</span><span class='period'>.</span><span class='id preferences'>preferences</span>    <span class='comment'># raises SerializationTypeMismatch
</span></pre>
<h2>Single table inheritance</h2>
<p>
Active Record allows inheritance by storing the name of the class in a
column that by default is named &#8220;type&#8221; (can be changed by
overwriting <tt>Base.inheritance_column</tt>). This means that an
inheritance looking like this:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Company</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>Firm</span> <span class='op'>&lt;</span> <span class='const'>Company</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>Client</span> <span class='op'>&lt;</span> <span class='const'>Company</span><span class='semicolon'>;</span> <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>PriorityClient</span> <span class='op'>&lt;</span> <span class='const'>Client</span><span class='semicolon'>;</span> <span class='kw'>end</span>
</pre>
<p>
When you do <tt>Firm.create(:name =&gt; &quot;37signals&quot;)</tt>, this
record will be saved in the companies table with type = &#8220;Firm&#8221;.
You can then fetch this row again using <tt>Company.where(:name =&gt;
'37signals').first</tt> and it will return a Firm object.
</p>
<p>
If you don&#8217;t have a type column defined in your table, single-table
inheritance won&#8217;t be triggered. In that case, it&#8217;ll work just
like normal subclasses with no special magic for differentiating between
them or reloading the right type with find.
</p>
<p>
Note, all the attributes for all the cases are kept in the same table. Read
more: <a
href="http://www.martinfowler.com/eaaCatalog/singleTableInheritance.html">www.martinfowler.com/eaaCatalog/singleTableInheritance.html</a>
</p>
<h2>Connection to multiple databases in different models</h2>
<p>
Connections are usually created through
ActiveRecord::Base.establish_connection and retrieved by
ActiveRecord::Base.connection. All classes inheriting from
ActiveRecord::Base will use this connection. But you can also set a
class-specific connection. For example, if Course is an ActiveRecord::Base,
but resides in a different database, you can just say
<tt>Course.establish_connection</tt> and Course and all of its subclasses
will use this connection instead.
</p>
<p>
This feature is implemented by keeping a connection pool in
ActiveRecord::Base that is a Hash indexed by the class. If a connection is
requested, the retrieve_connection method will go up the class-hierarchy
until a connection is found in the connection pool.
</p>
<h2>Exceptions</h2>
<ul>
<li><p>
ActiveRecordError - Generic error class and superclass of all other errors
raised by Active Record.
</p>
</li>
<li><p>
AdapterNotSpecified - The configuration hash used in
<tt>establish_connection</tt> didn&#8217;t include an <tt>:adapter</tt>
key.
</p>
</li>
<li><p>
AdapterNotFound - The <tt>:adapter</tt> key used in
<tt>establish_connection</tt> specified a non-existent adapter (or a bad
spelling of an existing one).
</p>
</li>
<li><p>
AssociationTypeMismatch - The object assigned to the association
wasn&#8217;t of the type specified in the association definition.
</p>
</li>
<li><p>
SerializationTypeMismatch - The serialized object wasn&#8217;t of the class
specified as the second parameter.
</p>
</li>
<li><p>
ConnectionNotEstablished+ - No connection has been established. Use
<tt>establish_connection</tt> before querying.
</p>
</li>
<li><p>
RecordNotFound - No record responded to the <tt>find</tt> method. Either
the row with the given ID doesn&#8217;t exist or the row didn&#8217;t meet
the additional restrictions. Some <tt>find</tt> calls do not raise this
exception to signal nothing was found, please check its documentation for
further details.
</p>
</li>
<li><p>
StatementInvalid - The database server rejected the SQL statement. The
precise error is added in the message.
</p>
</li>
<li><p>
MultiparameterAssignmentErrors - Collection of errors that occurred during
a mass assignment using the <tt>attributes=</tt> method. The
<tt>errors</tt> property of this exception contains an array of
AttributeAssignmentError objects that should be inspected to determine
which attributes triggered the errors.
</p>
</li>
<li><p>
AttributeAssignmentError - An error occurred while doing a mass assignment
through the <tt>attributes=</tt> method. You can inspect the
<tt>attribute</tt> property of the exception object to determine which
attribute triggered the error.
</p>
</li>
</ul>
<p>
<b>Note</b>: The attributes listed are class-level attributes (accessible
from both the class and instance level). So it&#8217;s possible to assign a
logger to the class through <tt>Base.logger=</tt> which will then be used
by all instances in the current object space.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="SessionStore/Session.html" title="ActiveRecord::SessionStore::Session (class)">SessionStore::Session</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Base/ConnectionSpecification.html" title="ActiveRecord::Base::ConnectionSpecification (class)">ConnectionSpecification</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="configurations-classvariable" class="">@@configurations =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="primary_key_prefix_type-classvariable" class="">@@primary_key_prefix_type =
          
        </dt>
        <dd><pre class="code"><span class='kw'>nil</span></pre></dd>
      
        <dt id="pluralize_table_names-classvariable" class="">@@pluralize_table_names =
          
        </dt>
        <dd><pre class="code"><span class='kw'>true</span></pre></dd>
      
        <dt id="default_timezone-classvariable" class="">@@default_timezone =
          
        </dt>
        <dd><pre class="code"><span class='symbol'>:local</span></pre></dd>
      
        <dt id="schema_format-classvariable" class="">@@schema_format =
          
        </dt>
        <dd><pre class="code"><span class='symbol'>:ruby</span></pre></dd>
      
        <dt id="timestamped_migrations-classvariable" class="">@@timestamped_migrations =
          
        </dt>
        <dd><pre class="code"><span class='kw'>true</span></pre></dd>
      
    </dl>
  


  <h2>Class Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#abstract_class-class_method" title="abstract_class (class method)">+ (Object) <strong>abstract_class</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set this to true if this is an abstract class (see
<tt>abstract_class?</tt>).
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D%3D-class_method" title="=== (class method)">+ (Object) <strong>===</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Overwrite the default class equality method to provide support for
association proxies.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abstract_class%3F-class_method" title="abstract_class? (class method)">+ (Boolean) <strong>abstract_class?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns whether this class is an abstract class or not.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#arel_engine-class_method" title="arel_engine (class method)">+ (Object) <strong>arel_engine</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#arel_table-class_method" title="arel_table (class method)">+ (Object) <strong>arel_table</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attr_readonly-class_method" title="attr_readonly (class method)">+ (Object) <strong>attr_readonly</strong>(*attributes) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attributes listed as readonly will be used to create a new record but
update operations will ignore these fields.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attribute_method%3F-class_method" title="attribute_method? (class method)">+ (Boolean) <strong>attribute_method?</strong>(attribute) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#base_class-class_method" title="base_class (class method)">+ (Object) <strong>base_class</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the base AR subclass that this class descends from.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#colorize_logging-class_method" title="colorize_logging (class method)">+ (Object) <strong>colorize_logging</strong>(*args) </a>
    

    
      (also: colorize_logging=)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_methods_hash-class_method" title="column_methods_hash (class method)">+ (Object) <strong>column_methods_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of all the methods added to query each of the columns in the
table with the name of the method as the key and true as the value.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_names-class_method" title="column_names (class method)">+ (Object) <strong>column_names</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of column names as strings.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#columns-class_method" title="columns (class method)">+ (Object) <strong>columns</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of column objects for the table associated with this
class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#columns_hash-class_method" title="columns_hash (class method)">+ (Object) <strong>columns_hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of column objects for the table associated with this class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connected%3F-class_method" title="connected? (class method)">+ (Boolean) <strong>connected?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if Active Record is connected.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection-class_method" title="connection (class method)">+ (Object) <strong>connection</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the connection currently associated with the class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection_pool-class_method" title="connection_pool (class method)">+ (Object) <strong>connection_pool</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#content_columns-class_method" title="content_columns (class method)">+ (Object) <strong>content_columns</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of column objects where the primary id, all columns ending
in &#8220;_id&#8221; or &#8220;_count&#8221;, and columns used for single
table inheritance have been removed.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_by_sql-class_method" title="count_by_sql (class method)">+ (Object) <strong>count_by_sql</strong>(sql) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">+ (Object) <strong>create</strong>(attributes = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#descends_from_active_record%3F-class_method" title="descends_from_active_record? (class method)">+ (Boolean) <strong>descends_from_active_record?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
True if this isn&#8217;t a concrete subclass needing a STI type condition.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#establish_connection-class_method" title="establish_connection (class method)">+ (Object) <strong>establish_connection</strong>(spec = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes the connection to the database.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_by_sql-class_method" title="find_by_sql (class method)">+ (Object) <strong>find_by_sql</strong>(sql) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Executes a custom SQL query against your database and returns all the
results.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#finder_needs_type_condition%3F-class_method" title="finder_needs_type_condition? (class method)">+ (Boolean) <strong>finder_needs_type_condition?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_table_name_prefix-class_method" title="full_table_name_prefix (class method)">+ (Object) <strong>full_table_name_prefix</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#i18n_scope-class_method" title="i18n_scope (class method)">+ (Object) <strong>i18n_scope</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the i18n scope to overwrite ActiveModel.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inheritance_column-class_method" title="inheritance_column (class method)">+ (Object) <strong>inheritance_column</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines the column name for use with single table inheritance.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-class_method" title="inspect (class method)">+ (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string like &#8216;Post id:integer, title:string,
body:text&#8217;.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lookup_ancestors-class_method" title="lookup_ancestors (class method)">+ (Object) <strong>lookup_ancestors</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the lookup ancestors for ActiveModel.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mysql_connection-class_method" title="mysql_connection (class method)">+ (Object) <strong>mysql_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#postgresql_connection-class_method" title="postgresql_connection (class method)">+ (Object) <strong>postgresql_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quote_value-class_method" title="quote_value (class method)">+ (Object) <strong>quote_value</strong>(value, column = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quoted_table_name-class_method" title="quoted_table_name (class method)">+ (Object) <strong>quoted_table_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a quoted version of the table name, used to construct SQL
statements.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#readonly_attributes-class_method" title="readonly_attributes (class method)">+ (Object) <strong>readonly_attributes</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of all the attributes that have been specified as
readonly.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_connection-class_method" title="remove_connection (class method)">+ (Object) <strong>remove_connection</strong>(klass = self) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_column_information-class_method" title="reset_column_information (class method)">+ (Object) <strong>reset_column_information</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Resets all the cached information about columns, which will cause them to
be reloaded on the next request.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_column_information_and_inheritable_attributes_for_all_subclasses-class_method" title="reset_column_information_and_inheritable_attributes_for_all_subclasses (class method)">+ (Object) <strong>reset_column_information_and_inheritable_attributes_for_all_subclasses</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_sequence_name-class_method" title="reset_sequence_name (class method)">+ (Object) <strong>reset_sequence_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_subclasses-class_method" title="reset_subclasses (class method)">+ (Object) <strong>reset_subclasses</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_table_name-class_method" title="reset_table_name (class method)">+ (Object) <strong>reset_table_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Computes the table name, (re)sets it internally, and returns it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#respond_to%3F-class_method" title="respond_to? (class method)">+ (Boolean) <strong>respond_to?</strong>(method_id, include_private = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#retrieve_connection-class_method" title="retrieve_connection (class method)">+ (Object) <strong>retrieve_connection</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sanitize-class_method" title="sanitize (class method)">+ (Object) <strong>sanitize</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Used to sanitize objects before they&#8217;re used in an SQL SELECT
statement.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scoped_methods-class_method" title="scoped_methods (class method)">+ (Object) <strong>scoped_methods</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequence_name-class_method" title="sequence_name (class method)">+ (Object) <strong>sequence_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Lazy-set the sequence name to the connection&#8217;s default.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialize-class_method" title="serialize (class method)">+ (Object) <strong>serialize</strong>(attr_name, class_name = Object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#serialized_attributes-class_method" title="serialized_attributes (class method)">+ (Object) <strong>serialized_attributes</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of all the attributes that have been specified for
serialization as keys and their class restriction as values.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_inheritance_column-class_method" title="set_inheritance_column (class method)">+ (Object) <strong>set_inheritance_column</strong>(value = nil, &amp;block) </a>
    

    
      (also: inheritance_column=)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_sequence_name-class_method" title="set_sequence_name (class method)">+ (Object) <strong>set_sequence_name</strong>(value = nil, &amp;block) </a>
    

    
      (also: sequence_name=)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_table_name-class_method" title="set_table_name (class method)">+ (Object) <strong>set_table_name</strong>(value = nil, &amp;block) </a>
    

    
      (also: table_name=)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the table name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sqlite3_connection-class_method" title="sqlite3_connection (class method)">+ (Object) <strong>sqlite3_connection</strong>(config) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
sqlite3 adapter reuses sqlite_connection.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sti_name-class_method" title="sti_name (class method)">+ (Object) <strong>sti_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#subclasses-class_method" title="subclasses (class method)">+ (Object) <strong>subclasses</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#table_exists%3F-class_method" title="table_exists? (class method)">+ (Boolean) <strong>table_exists?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Indicates whether the table associated with this class exists.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#table_name-class_method" title="table_name (class method)">+ (Object) <strong>table_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from
ActiveRecord::Base.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unscoped-class_method" title="unscoped (class method)">+ (Object) <strong>unscoped</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a scope for this class without taking into account the
default_scope.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3D%3D-instance_method" title="#== (instance method)">- (Object) <strong>==</strong>(comparison_object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same id.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(attr_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &#8220;2004-12-12&#8221; in a data
column is cast to a date object, like Date.new(2004, 12, 12)).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(attr_name, value) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attribute_for_inspect-instance_method" title="#attribute_for_inspect (instance method)">- (Object) <strong>attribute_for_inspect</strong>(attr_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an <tt>#inspect</tt>-like string for the value of the attribute
<tt>attr_name</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attribute_names-instance_method" title="#attribute_names (instance method)">- (Object) <strong>attribute_names</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of names for the attributes available on this object
sorted alphabetically.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attribute_present%3F-instance_method" title="#attribute_present? (instance method)">- (Boolean) <strong>attribute_present?</strong>(attribute) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">- (Object) <strong>attributes</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a hash of all the attributes with their names as keys and the
values of the attributes as values.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes%3D-instance_method" title="#attributes= (instance method)">- (Object) <strong>attributes=</strong>(new_attributes, guard_protected_attributes = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Allows you to set all the attributes at once by passing in a hash with keys
matching the attribute names (which again matches the column names).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_key-instance_method" title="#cache_key (instance method)">- (Object) <strong>cache_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a cache key that can be used to identify this record.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_for_attribute-instance_method" title="#column_for_attribute (instance method)">- (Object) <strong>column_for_attribute</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the column object for the named attribute.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connection-instance_method" title="#connection (instance method)">- (Object) <strong>connection</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the connection currently associated with the class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#dup-instance_method" title="#dup (instance method)">- (Object) <strong>dup</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns duplicated record with unfreezed attributes.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eql%3F-instance_method" title="#eql? (instance method)">- (Boolean) <strong>eql?</strong>(comparison_object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Delegates to ==.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#freeze-instance_method" title="#freeze (instance method)">- (Object) <strong>freeze</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Freeze the attributes hash such that associations are still accessible,
even on destroyed records.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#frozen%3F-instance_method" title="#frozen? (instance method)">- (Boolean) <strong>frozen?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if the attributes hash has been frozen.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_attribute%3F-instance_method" title="#has_attribute? (instance method)">- (Boolean) <strong>has_attribute?</strong>(attr_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the given attribute is in the attributes hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#hash-instance_method" title="#hash (instance method)">- (Object) <strong>hash</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Delegates to id in order to allow two records of the same type and id to
work with something like:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Base) <strong>initialize</strong>(attributes = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">- (Object) <strong>initialize_copy</strong>(other) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Cloned objects have no id assigned and are treated as new records.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the contents of the record as a nicely formatted string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#quoted_id-instance_method" title="#quoted_id (instance method)">- (Object) <strong>quoted_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#readonly%21-instance_method" title="#readonly! (instance method)">- (Object) <strong>readonly!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Marks this record as read only.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#readonly%3F-instance_method" title="#readonly? (instance method)">- (Boolean) <strong>readonly?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if the record is read only.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_param-instance_method" title="#to_param (instance method)">- (Object) <strong>to_param</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a String, which Action Pack uses for constructing an URL to this
object.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ActiveRecord::Base (class)">Base</a></span></tt>) <strong>initialize</strong>(attributes = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
New objects can be instantiated as either empty (pass no construction
parameter) or pre-set with attributes but not yet saved (pass a hash with
key names matching the associated table column names). In both instances,
valid attribute keys are determined by the column names of the associated
table &#8212; hence you can&#8217;t have attributes that aren&#8217;t part
of the table columns.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1395
1396
1397
1398
1399
1400
1401
1402
1403
1404
1405
1406
1407
1408
1409
1410
1411
1412
1413
1414
1415
1416</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1395</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id attributes_from_column_definition'>attributes_from_column_definition</span>
  <span class='ivar'>@attributes_cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@new_record</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='ivar'>@readonly</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@destroyed</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@marked_for_destruction</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='ivar'>@previously_changed</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@changed_attributes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

  <span class='id ensure_proper_type'>ensure_proper_type</span>

  <span class='kw'>if</span> <span class='id scope'>scope</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:current_scoped_methods</span><span class='rparen'>)</span>
    <span class='id create_with'>create_with</span> <span class='op'>=</span> <span class='id scope'>scope</span><span class='period'>.</span><span class='id scope_for_create'>scope_for_create</span>
    <span class='id create_with'>create_with</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id att'>att</span><span class='comma'>,</span><span class='id value'>value</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id att'>att</span><span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id create_with'>create_with</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='id attributes'>attributes</span> <span class='kw'>unless</span> <span class='id attributes'>attributes</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='id result'>result</span> <span class='op'>=</span> <span class='kw'>yield</span> <span class='kw'>self</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='id _run_initialize_callbacks'>_run_initialize_callbacks</span>
  <span class='id result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id="abstract_class=-class_method"></span>
      <span id="abstract_class-class_method"></span>
      <div class="method_details first">
  <p class="signature first" id="abstract_class-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>abstract_class</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set this to true if this is an abstract class (see
<tt>abstract_class?</tt>).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


828
829
830</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 828</span>

<span class='kw'>def</span> <span class='id abstract_class'>abstract_class</span>
  <span class='ivar'>@abstract_class</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="===-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>===</strong>(object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Overwrite the default class equality method to provide support for
association proxies.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


813
814
815</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 813</span>

<span class='kw'>def</span> <span class='op'>===</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span>
  <span class='id object'>object</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abstract_class?-class_method">
  
    + (<tt>Boolean</tt>) <strong>abstract_class?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns whether this class is an abstract class or not.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


831
832
833</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 831</span>

<span class='kw'>def</span> <span class='id abstract_class?'>abstract_class?</span>
  <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@abstract_class</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@abstract_class</span> <span class='op'>==</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="arel_engine-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>arel_engine</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


853
854
855
856
857
858
859
860
861</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 853</span>

<span class='kw'>def</span> <span class='id arel_engine'>arel_engine</span>
  <span class='ivar'>@arel_engine</span> <span class='op'>||=</span> <span class='kw'>begin</span>
    <span class='kw'>if</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
      <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Table</span><span class='period'>.</span><span class='id engine'>engine</span>
    <span class='kw'>else</span>
      <span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id connection_pools'>connection_pools</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Sql</span><span class='op'>::</span><span class='const'>Engine</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id superclass'>superclass</span><span class='period'>.</span><span class='id arel_engine'>arel_engine</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="arel_table-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>arel_table</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


849
850
851</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 849</span>

<span class='kw'>def</span> <span class='id arel_table'>arel_table</span>
  <span class='ivar'>@arel_table</span> <span class='op'>||=</span> <span class='const'>Arel</span><span class='op'>::</span><span class='const'>Table</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id arel_engine'>arel_engine</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attr_readonly-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>attr_readonly</strong>(*attributes) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attributes listed as readonly will be used to create a new record but
update operations will ignore these fields.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


521
522
523</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 521</span>

<span class='kw'>def</span> <span class='id attr_readonly'>attr_readonly</span><span class='lparen'>(</span><span class='op'>*</span><span class='id attributes'>attributes</span><span class='rparen'>)</span>
  <span class='id write_inheritable_attribute'>write_inheritable_attribute</span><span class='lparen'>(</span><span class='symbol'>:attr_readonly</span><span class='comma'>,</span> <span class='const'>Set</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id a'>a</span><span class='op'>|</span> <span class='id a'>a</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='rbrace'>}</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='id readonly_attributes'>readonly_attributes</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attribute_method?-class_method">
  
    + (<tt>Boolean</tt>) <strong>attribute_method?</strong>(attribute) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


751
752
753</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 751</span>

<span class='kw'>def</span> <span class='id attribute_method?'>attribute_method?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span>
  <span class='kw'>super</span> <span class='op'>||</span> <span class='lparen'>(</span><span class='id table_exists?'>table_exists?</span> <span class='op'>&amp;&amp;</span> <span class='id column_names'>column_names</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>=$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="base_class-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>base_class</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the base AR subclass that this class descends from. If A extends
AR::Base, A.base_class will return A. If B descends from A through some
arbitrarily deep hierarchy, B.base_class will return A.
</p>
<p>
If B < A and C < B and if A is an abstract_class then both B.base_class and
C.base_class would return B as the answer since A is an abstract_class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


823
824
825</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 823</span>

<span class='kw'>def</span> <span class='id base_class'>base_class</span>
  <span class='id class_of_active_record_descendant'>class_of_active_record_descendant</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="colorize_logging-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>colorize_logging</strong>(*args) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='colorize_logging=-class_method'>colorize_logging=</span></span>
    </span>
  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


432
433
434
435
436</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 432</span>

<span class='kw'>def</span> <span class='id colorize_logging'>colorize_logging</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ActiveRecord::Base.colorize_logging and </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>config.active_record.colorize_logging are deprecated. Please use </span><span class='tstring_end'>&quot;</span></span> <span class='op'>&lt;&lt;</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Rails::LogSubscriber.colorize_logging or config.colorize_logging instead</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id caller'>caller</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="column_methods_hash-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>column_methods_hash</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of all the methods added to query each of the columns in the
table with the name of the method as the key and true as the value. This
makes it possible to do O(1) lookups in respond_to? to check if a given
method for attribute is available.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


704
705
706
707
708
709
710
711
712
713</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 704</span>

<span class='kw'>def</span> <span class='id column_methods_hash'>column_methods_hash</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@dynamic_methods_hash</span> <span class='op'>||=</span> <span class='id column_names'>column_names</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id methods'>methods</span><span class='comma'>,</span> <span class='id attr'>attr</span><span class='op'>|</span>
    <span class='id attr_name'>attr_name</span> <span class='op'>=</span> <span class='id attr'>attr</span><span class='period'>.</span><span class='id to_s'>to_s</span>
    <span class='id methods'>methods</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span>       <span class='op'>=</span> <span class='id attr_name'>attr_name</span>
    <span class='id methods'>methods</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id attr'>attr</span><span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id attr_name'>attr_name</span>
    <span class='id methods'>methods</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id attr'>attr</span><span class='rbrace'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id attr_name'>attr_name</span>
    <span class='id methods'>methods</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id attr'>attr</span><span class='rbrace'>}</span><span class='tstring_content'>_before_type_cast</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id attr_name'>attr_name</span>
    <span class='id methods'>methods</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="column_names-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>column_names</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of column names as strings.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


691
692
693</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 691</span>

<span class='kw'>def</span> <span class='id column_names'>column_names</span>
  <span class='ivar'>@column_names</span> <span class='op'>||=</span> <span class='id columns'>columns</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id column'>column</span><span class='op'>|</span> <span class='id column'>column</span><span class='period'>.</span><span class='id name'>name</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="columns-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>columns</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of column objects for the table associated with this
class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


677
678
679
680
681
682
683</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 677</span>

<span class='kw'>def</span> <span class='id columns'>columns</span>
  <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@columns</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@columns</span>
    <span class='ivar'>@columns</span> <span class='op'>=</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id columns'>columns</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> Columns</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='ivar'>@columns</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id column'>column</span><span class='op'>|</span> <span class='id column'>column</span><span class='period'>.</span><span class='id primary'>primary</span> <span class='op'>=</span> <span class='id column'>column</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='id primary_key'>primary_key</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='ivar'>@columns</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="columns_hash-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>columns_hash</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of column objects for the table associated with this class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


686
687
688</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 686</span>

<span class='kw'>def</span> <span class='id columns_hash'>columns_hash</span>
  <span class='ivar'>@columns_hash</span> <span class='op'>||=</span> <span class='id columns'>columns</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id hash'>hash</span><span class='comma'>,</span> <span class='id column'>column</span><span class='op'>|</span> <span class='id hash'>hash</span><span class='lbracket'>[</span><span class='id column'>column</span><span class='period'>.</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id column'>column</span><span class='semicolon'>;</span> <span class='id hash'>hash</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connected?-class_method">
  
    + (<tt>Boolean</tt>) <strong>connected?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if Active Record is connected.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


101
102
103</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 101</span>

<span class='kw'>def</span> <span class='id connected?'>connected?</span>
  <span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id connected?'>connected?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>connection</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the connection currently associated with the class. This can also
be used to &#8220;borrow&#8221; the connection to do database work
unrelated to any of the specific Active Records.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 88</span>

<span class='kw'>def</span> <span class='id connection'>connection</span>
  <span class='id retrieve_connection'>retrieve_connection</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection_pool-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>connection_pool</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 92</span>

<span class='kw'>def</span> <span class='id connection_pool'>connection_pool</span>
  <span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id retrieve_connection_pool'>retrieve_connection_pool</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="content_columns-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>content_columns</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of column objects where the primary id, all columns ending
in &#8220;_id&#8221; or &#8220;_count&#8221;, and columns used for single
table inheritance have been removed.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


697
698
699</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 697</span>

<span class='kw'>def</span> <span class='id content_columns'>content_columns</span>
  <span class='ivar'>@content_columns</span> <span class='op'>||=</span> <span class='id columns'>columns</span><span class='period'>.</span><span class='id reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='id c'>c</span><span class='period'>.</span><span class='id primary'>primary</span> <span class='op'>||</span> <span class='id c'>c</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(_id|_count)$</span><span class='regexp_end'>/</span></span> <span class='op'>||</span> <span class='id c'>c</span><span class='period'>.</span><span class='id name'>name</span> <span class='op'>==</span> <span class='id inheritance_column'>inheritance_column</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="count_by_sql-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>count_by_sql</strong>(sql) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the result of an SQL statement that should only include a COUNT(*)
in the SELECT part. The use of this method should be restricted to
complicated SQL queries that can&#8217;t be executed using the
ActiveRecord::Calculations class methods.  Look into those before using
this.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>sql</tt> - An SQL statement which should return a count query from the
database, see the example below.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
  <span class='const'>Product</span><span class='period'>.</span><span class='id count_by_sql'>count_by_sql</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SELECT COUNT(*) FROM sales s, customers c WHERE s.customer_id = c.id</span><span class='tstring_end'>&quot;</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


514
515
516
517</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 514</span>

<span class='kw'>def</span> <span class='id count_by_sql'>count_by_sql</span><span class='lparen'>(</span><span class='id sql'>sql</span><span class='rparen'>)</span>
  <span class='id sql'>sql</span> <span class='op'>=</span> <span class='id sanitize_conditions'>sanitize_conditions</span><span class='lparen'>(</span><span class='id sql'>sql</span><span class='rparen'>)</span>
  <span class='id connection'>connection</span><span class='period'>.</span><span class='id select_value'>select_value</span><span class='lparen'>(</span><span class='id sql'>sql</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> Count</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_i'>to_i</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>create</strong>(attributes = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates an object (or multiple objects) and saves it to the database, if
validations pass. The resulting object is returned whether the object was
saved successfully to the database or not.
</p>
<p>
The <tt>attributes</tt> parameter can be either be a Hash or an Array of
Hashes.  These Hashes describe the attributes on the objects that are to be
created.
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='comment'># Create a single new object
</span>  <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jamie</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

  <span class='comment'># Create an Array of new objects
</span>  <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jamie</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jeremy</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='comment'># Create a single object and pass it into a block to set other attributes.
</span>  <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jamie</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span>
    <span class='id u'>u</span><span class='period'>.</span><span class='id is_admin'>is_admin</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span>

  <span class='comment'># Creating an Array of new objects using a block, where the block is executed for each object:
</span>  <span class='const'>User</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='lbrace'>{</span> <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jamie</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:first_name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Jeremy</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id u'>u</span><span class='op'>|</span>
    <span class='id u'>u</span><span class='period'>.</span><span class='id is_admin'>is_admin</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


492
493
494
495
496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 492</span>

<span class='kw'>def</span> <span class='id create'>create</span><span class='lparen'>(</span><span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id attributes'>attributes</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
    <span class='id attributes'>attributes</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id attr'>attr</span><span class='op'>|</span> <span class='id create'>create</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>else</span>
    <span class='id object'>object</span> <span class='op'>=</span> <span class='id new'>new</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='rparen'>)</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id object'>object</span><span class='period'>.</span><span class='id save'>save</span>
    <span class='id object'>object</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="descends_from_active_record?-class_method">
  
    + (<tt>Boolean</tt>) <strong>descends_from_active_record?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
True if this isn&#8217;t a concrete subclass needing a STI type condition.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


776
777
778
779
780
781
782</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 776</span>

<span class='kw'>def</span> <span class='id descends_from_active_record?'>descends_from_active_record?</span>
  <span class='kw'>if</span> <span class='id superclass'>superclass</span><span class='period'>.</span><span class='id abstract_class?'>abstract_class?</span>
    <span class='id superclass'>superclass</span><span class='period'>.</span><span class='id descends_from_active_record?'>descends_from_active_record?</span>
  <span class='kw'>else</span>
    <span class='id superclass'>superclass</span> <span class='op'>==</span> <span class='const'>Base</span> <span class='op'>||</span> <span class='op'>!</span><span class='id columns_hash'>columns_hash</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id inheritance_column'>inheritance_column</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="establish_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>establish_connection</strong>(spec = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes the connection to the database. Accepts a hash as input where
the <tt>:adapter</tt> key must be specified with the name of a database
adapter (in lower-case) example for regular databases (MySQL, Postgresql,
etc):
</p>
<pre class="code">
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span>
    <span class='symbol'>:adapter</span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mysql</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:host</span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>localhost</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>myuser</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:password</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mypass</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:database</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>somedatabase</span><span class='tstring_end'>&quot;</span></span>
  <span class='rparen'>)</span>
</pre>
<p>
Example for SQLite database:
</p>
<pre class="code">
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span>
    <span class='symbol'>:adapter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sqlite</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='symbol'>:database</span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/dbfile</span><span class='tstring_end'>&quot;</span></span>
  <span class='rparen'>)</span>
</pre>
<p>
Also accepts keys as strings (for parsing from YAML for example):
</p>
<pre class="code">
  <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>adapter</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>sqlite</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>database</span><span class='tstring_end'>&quot;</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>path/to/dbfile</span><span class='tstring_end'>&quot;</span></span>
  <span class='rparen'>)</span>
</pre>
<p>
The exceptions AdapterNotSpecified, AdapterNotFound and ArgumentError may
be returned on an error.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 51</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='id spec'>spec</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>case</span> <span class='id spec'>spec</span>
    <span class='kw'>when</span> <span class='kw'>nil</span>
      <span class='id raise'>raise</span> <span class='const'>AdapterNotSpecified</span> <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id env'>env</span><span class='rparen'>)</span>
      <span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id env'>env</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>ConnectionSpecification</span>
      <span class='kw'>self</span><span class='period'>.</span><span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id spec'>spec</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='const'>Symbol</span><span class='comma'>,</span> <span class='const'>String</span>
      <span class='kw'>if</span> <span class='id configuration'>configuration</span> <span class='op'>=</span> <span class='id configurations'>configurations</span><span class='lbracket'>[</span><span class='id spec'>spec</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span>
        <span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='id configuration'>configuration</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id raise'>raise</span> <span class='const'>AdapterNotSpecified</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='rbrace'>}</span><span class='tstring_content'> database is not configured</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id spec'>spec</span> <span class='op'>=</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id symbolize_keys'>symbolize_keys</span>
      <span class='kw'>unless</span> <span class='id spec'>spec</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:adapter</span><span class='rparen'>)</span> <span class='kw'>then</span> <span class='id raise'>raise</span> <span class='const'>AdapterNotSpecified</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>database configuration does not specify adapter</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span>

      <span class='kw'>begin</span>
        <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>active_record/connection_adapters/</span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>_adapter</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>rescue</span> <span class='const'>LoadError</span>
        <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please install the </span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'> adapter: `gem install activerecord-</span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>-adapter` (</span><span class='embexpr_beg'>#{</span><span class='gvar'>$!</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id adapter_method'>adapter_method</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>_connection</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>if</span> <span class='op'>!</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id adapter_method'>adapter_method</span><span class='rparen'>)</span>
        <span class='id raise'>raise</span> <span class='const'>AdapterNotFound</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>database configuration specifies nonexistent </span><span class='embexpr_beg'>#{</span><span class='id spec'>spec</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'> adapter</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='id remove_connection'>remove_connection</span>
      <span class='id establish_connection'>establish_connection</span><span class='lparen'>(</span><span class='const'>ConnectionSpecification</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id spec'>spec</span><span class='comma'>,</span> <span class='id adapter_method'>adapter_method</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_by_sql-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>find_by_sql</strong>(sql) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Executes a custom SQL query against your database and returns all the
results.  The results will be returned as an array with columns requested
encapsulated as attributes of the model you call this method from.  If you
call <tt>Product.find_by_sql</tt> then the results will be returned in a
Product object with the attributes you specified in the SQL query.
</p>
<p>
If you call a complicated SQL query which spans multiple tables the columns
specified by the SELECT will be attributes of the model, whether or not
they are columns of the corresponding table.
</p>
<p>
The <tt>sql</tt> parameter is a full SQL query as a string.  It will be
called as is, there will be no database agnostic conversions performed. 
This should be a last resort because using, for example, MySQL specific
terms will lock you to using that particular database engine or require you
to change your call if you switch engines.
</p>
<h4>Examples</h4>
<pre class="code">
  # A simple SQL query spanning multiple tables
  Post.find_by_sql &quot;SELECT p.title, c.author FROM posts p, comments c WHERE p.id = c.post_id&quot;
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;title&quot;=&gt;&quot;Ruby Meetup&quot;, &quot;first_name&quot;=&gt;&quot;Quentin&quot;}&gt;, ...]

  # You can use the same string replacement techniques as you can with ActiveRecord#find
  Post.find_by_sql [&quot;SELECT title FROM posts WHERE author = ? AND created &gt; ?&quot;, author_id, start_date]
  &gt; [#&lt;Post:0x36bff9c @attributes={&quot;first_name&quot;=&gt;&quot;The Cheap Man Buys Twice&quot;}&gt;, ...]</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


466
467
468</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 466</span>

<span class='kw'>def</span> <span class='id find_by_sql'>find_by_sql</span><span class='lparen'>(</span><span class='id sql'>sql</span><span class='rparen'>)</span>
  <span class='id connection'>connection</span><span class='period'>.</span><span class='id select_all'>select_all</span><span class='lparen'>(</span><span class='id sanitize_sql'>sanitize_sql</span><span class='lparen'>(</span><span class='id sql'>sql</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> Load</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id collect!'>collect!</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id record'>record</span><span class='op'>|</span> <span class='id instantiate'>instantiate</span><span class='lparen'>(</span><span class='id record'>record</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="finder_needs_type_condition?-class_method">
  
    + (<tt>Boolean</tt>) <strong>finder_needs_type_condition?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


784
785
786
787</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 784</span>

<span class='kw'>def</span> <span class='id finder_needs_type_condition?'>finder_needs_type_condition?</span> <span class='comment'>#:nodoc:
</span>  <span class='comment'># This is like this because benchmarking justifies the strange :false stuff
</span>  <span class='symbol'>:true</span> <span class='op'>==</span> <span class='lparen'>(</span><span class='ivar'>@finder_needs_type_condition</span> <span class='op'>||=</span> <span class='id descends_from_active_record?'>descends_from_active_record?</span> <span class='op'>?</span> <span class='symbol'>:false</span> <span class='op'>:</span> <span class='symbol'>:true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="full_table_name_prefix-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>full_table_name_prefix</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


604
605
606</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 604</span>

<span class='kw'>def</span> <span class='id full_table_name_prefix'>full_table_name_prefix</span> <span class='comment'>#:nodoc:
</span>  <span class='lparen'>(</span><span class='id parents'>parents</span><span class='period'>.</span><span class='id detect'>detect</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span> <span class='id p'>p</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:table_name_prefix</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='op'>||</span> <span class='kw'>self</span><span class='rparen'>)</span><span class='period'>.</span><span class='id table_name_prefix'>table_name_prefix</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="i18n_scope-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>i18n_scope</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the i18n scope to overwrite ActiveModel.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


771
772
773</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 771</span>

<span class='kw'>def</span> <span class='id i18n_scope'>i18n_scope</span> <span class='comment'>#:nodoc:
</span>  <span class='symbol'>:activerecord</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inheritance_column-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inheritance_column</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Defines the column name for use with single table inheritance. Use
<tt>set_inheritance_column</tt> to set a different value.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


610
611
612</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 610</span>

<span class='kw'>def</span> <span class='id inheritance_column'>inheritance_column</span>
  <span class='ivar'>@inheritance_column</span> <span class='op'>||=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id freeze'>freeze</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string like &#8216;Post id:integer, title:string,
body:text&#8217;
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


790
791
792
793
794
795
796
797
798
799
800
801</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 790</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='kw'>if</span> <span class='kw'>self</span> <span class='op'>==</span> <span class='const'>Base</span>
    <span class='kw'>super</span>
  <span class='kw'>elsif</span> <span class='id abstract_class?'>abstract_class?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>super</span><span class='rbrace'>}</span><span class='tstring_content'>(abstract)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>elsif</span> <span class='id table_exists?'>table_exists?</span>
    <span class='id attr_list'>attr_list</span> <span class='op'>=</span> <span class='id columns'>columns</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id c'>c</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id c'>c</span><span class='period'>.</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span> <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>, </span><span class='tstring_end'>'</span></span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>super</span><span class='rbrace'>}</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id attr_list'>attr_list</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>super</span><span class='rbrace'>}</span><span class='tstring_content'>(Table doesn't exist)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="lookup_ancestors-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>lookup_ancestors</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the lookup ancestors for ActiveModel.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


756
757
758
759
760
761
762
763
764
765
766
767
768</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 756</span>

<span class='kw'>def</span> <span class='id lookup_ancestors'>lookup_ancestors</span> <span class='comment'>#:nodoc:
</span>  <span class='id klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span>
  <span class='id classes'>classes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id klass'>klass</span><span class='rbracket'>]</span>
  <span class='kw'>while</span> <span class='id klass'>klass</span> <span class='op'>!=</span> <span class='id klass'>klass</span><span class='period'>.</span><span class='id base_class'>base_class</span>
    <span class='id classes'>classes</span> <span class='op'>&lt;&lt;</span> <span class='id klass'>klass</span> <span class='op'>=</span> <span class='id klass'>klass</span><span class='period'>.</span><span class='id superclass'>superclass</span>
  <span class='kw'>end</span>
  <span class='id classes'>classes</span>
<span class='kw'>rescue</span>
  <span class='comment'># OPTIMIZE this rescue is to fix this test: ./test/cases/reflection_test.rb:56:in `test_human_name_for_column'
</span>  <span class='comment'># Apparently the method base_class causes some trouble.
</span>  <span class='comment'># It now works for sure.
</span>  <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mysql_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mysql_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/mysql_adapter.rb', line 9</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id mysql_connection'>mysql_connection</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id config'>config</span> <span class='op'>=</span> <span class='id config'>config</span><span class='period'>.</span><span class='id symbolize_keys'>symbolize_keys</span>
  <span class='id host'>host</span>     <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:host</span><span class='rbracket'>]</span>
  <span class='id port'>port</span>     <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span>
  <span class='id socket'>socket</span>   <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:socket</span><span class='rbracket'>]</span>
  <span class='id username'>username</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>root</span><span class='tstring_end'>'</span></span>
  <span class='id password'>password</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id database'>database</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span>

  <span class='kw'>unless</span> <span class='kw'>defined?</span> <span class='const'>Mysql</span>
    <span class='kw'>begin</span>
      <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mysql</span><span class='tstring_end'>'</span></span>
    <span class='kw'>rescue</span> <span class='const'>LoadError</span>
      <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!!! Missing the mysql gem. Add it to your Gemfile: gem 'mysql', '2.8.1'</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>

    <span class='kw'>unless</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Mysql</span><span class='op'>::</span><span class='const'>Result</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='const'>Mysql</span><span class='op'>::</span><span class='const'>Result</span><span class='period'>.</span><span class='id method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='symbol'>:each_hash</span><span class='rparen'>)</span>
      <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>!!! Outdated mysql gem. Upgrade to 2.8.1 or later. In your Gemfile: gem 'mysql', '2.8.1'</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id mysql'>mysql</span> <span class='op'>=</span> <span class='const'>Mysql</span><span class='period'>.</span><span class='id init'>init</span>
  <span class='id mysql'>mysql</span><span class='period'>.</span><span class='id ssl_set'>ssl_set</span><span class='lparen'>(</span><span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslkey</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslcert</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslca</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslcapath</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslcipher</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslca</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:sslkey</span><span class='rbracket'>]</span>

  <span class='id default_flags'>default_flags</span> <span class='op'>=</span> <span class='const'>Mysql</span><span class='period'>.</span><span class='id const_defined?'>const_defined?</span><span class='lparen'>(</span><span class='symbol'>:CLIENT_MULTI_RESULTS</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'>Mysql</span><span class='op'>::</span><span class='const'>CLIENT_MULTI_RESULTS</span> <span class='op'>:</span> <span class='int'>0</span>
  <span class='id default_flags'>default_flags</span> <span class='op'>|=</span> <span class='const'>Mysql</span><span class='op'>::</span><span class='const'>CLIENT_FOUND_ROWS</span> <span class='kw'>if</span> <span class='const'>Mysql</span><span class='period'>.</span><span class='id const_defined?'>const_defined?</span><span class='lparen'>(</span><span class='symbol'>:CLIENT_FOUND_ROWS</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id username'>username</span><span class='comma'>,</span> <span class='id password'>password</span><span class='comma'>,</span> <span class='id database'>database</span><span class='comma'>,</span> <span class='id port'>port</span><span class='comma'>,</span> <span class='id socket'>socket</span><span class='comma'>,</span> <span class='id default_flags'>default_flags</span><span class='rbracket'>]</span>
  <span class='const'>ConnectionAdapters</span><span class='op'>::</span><span class='const'>MysqlAdapter</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id mysql'>mysql</span><span class='comma'>,</span> <span class='id logger'>logger</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="postgresql_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>postgresql_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes a connection to the database that&#8217;s used by all Active
Record objects
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/postgresql_adapter.rb', line 8</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id postgresql_connection'>postgresql_connection</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>pg</span><span class='tstring_end'>'</span></span>

  <span class='id config'>config</span> <span class='op'>=</span> <span class='id config'>config</span><span class='period'>.</span><span class='id symbolize_keys'>symbolize_keys</span>
  <span class='id host'>host</span>     <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:host</span><span class='rbracket'>]</span>
  <span class='id port'>port</span>     <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:port</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>5432</span>
  <span class='id username'>username</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='kw'>if</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:username</span><span class='rbracket'>]</span>
  <span class='id password'>password</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='kw'>if</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:password</span><span class='rbracket'>]</span>

  <span class='kw'>if</span> <span class='id config'>config</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='symbol'>:database</span><span class='rparen'>)</span>
    <span class='id database'>database</span> <span class='op'>=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No database specified. Missing argument: database.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># The postgres drivers don't allow the creation of an unconnected PGconn object,
</span>  <span class='comment'># so just pass a nil connection object for the time being.
</span>  <span class='const'>ConnectionAdapters</span><span class='op'>::</span><span class='const'>PostgreSQLAdapter</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id logger'>logger</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='id host'>host</span><span class='comma'>,</span> <span class='id port'>port</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id database'>database</span><span class='comma'>,</span> <span class='id username'>username</span><span class='comma'>,</span> <span class='id password'>password</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quote_value-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>quote_value</strong>(value, column = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


803
804
805</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 803</span>

<span class='kw'>def</span> <span class='id quote_value'>quote_value</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id column'>column</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id connection'>connection</span><span class='period'>.</span><span class='id quote'>quote</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span><span class='id column'>column</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quoted_table_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>quoted_table_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a quoted version of the table name, used to construct SQL
statements.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


595
596
597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 595</span>

<span class='kw'>def</span> <span class='id quoted_table_name'>quoted_table_name</span>
  <span class='ivar'>@quoted_table_name</span> <span class='op'>||=</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id quote_table_name'>quote_table_name</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="readonly_attributes-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>readonly_attributes</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of all the attributes that have been specified as
readonly.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


526
527
528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 526</span>

<span class='kw'>def</span> <span class='id readonly_attributes'>readonly_attributes</span>
  <span class='id read_inheritable_attribute'>read_inheritable_attribute</span><span class='lparen'>(</span><span class='symbol'>:attr_readonly</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_connection</strong>(klass = self) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 105</span>

<span class='kw'>def</span> <span class='id remove_connection'>remove_connection</span><span class='lparen'>(</span><span class='id klass'>klass</span> <span class='op'>=</span> <span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id remove_connection'>remove_connection</span><span class='lparen'>(</span><span class='id klass'>klass</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_column_information-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_column_information</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Resets all the cached information about columns, which will cause them to
be reloaded on the next request.
</p>
<p>
The most common usage pattern for this method is probably in a migration,
when just after creating a table you want to populate it with some default
values, eg:
</p>
<pre class="code">
 <span class='kw'>class</span> <span class='const'>CreateJobLevels</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Migration</span>
   <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id up'>up</span>
     <span class='id create_table'>create_table</span> <span class='symbol'>:job_levels</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id t'>t</span><span class='op'>|</span>
       <span class='id t'>t</span><span class='period'>.</span><span class='id integer'>integer</span> <span class='symbol'>:id</span>
       <span class='id t'>t</span><span class='period'>.</span><span class='id string'>string</span> <span class='symbol'>:name</span>

       <span class='id t'>t</span><span class='period'>.</span><span class='id timestamps'>timestamps</span>
     <span class='kw'>end</span>

     <span class='const'>JobLevel</span><span class='period'>.</span><span class='id reset_column_information'>reset_column_information</span>
     <span class='qwords_beg'>%w{</span><span class='tstring_content'>assistant</span><span class='words_sep'> </span><span class='tstring_content'>executive</span><span class='words_sep'> </span><span class='tstring_content'>manager</span><span class='words_sep'> </span><span class='tstring_content'>director</span><span class='words_sep'>}</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id type'>type</span><span class='op'>|</span>
       <span class='const'>JobLevel</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='id type'>type</span><span class='rparen'>)</span>
     <span class='kw'>end</span>
   <span class='kw'>end</span>

   <span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id down'>down</span>
     <span class='id drop_table'>drop_table</span> <span class='symbol'>:job_levels</span>
   <span class='kw'>end</span>
 <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


741
742
743
744
745</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 741</span>

<span class='kw'>def</span> <span class='id reset_column_information'>reset_column_information</span>
  <span class='id undefine_attribute_methods'>undefine_attribute_methods</span>
  <span class='ivar'>@column_names</span> <span class='op'>=</span> <span class='ivar'>@columns</span> <span class='op'>=</span> <span class='ivar'>@columns_hash</span> <span class='op'>=</span> <span class='ivar'>@content_columns</span> <span class='op'>=</span> <span class='ivar'>@dynamic_methods_hash</span> <span class='op'>=</span> <span class='ivar'>@inheritance_column</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@arel_engine</span> <span class='op'>=</span> <span class='ivar'>@relation</span> <span class='op'>=</span> <span class='ivar'>@arel_table</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_column_information_and_inheritable_attributes_for_all_subclasses-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_column_information_and_inheritable_attributes_for_all_subclasses</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


747
748
749</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 747</span>

<span class='kw'>def</span> <span class='id reset_column_information_and_inheritable_attributes_for_all_subclasses'>reset_column_information_and_inheritable_attributes_for_all_subclasses</span><span class='comment'>#:nodoc:
</span>  <span class='id descendants'>descendants</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id klass'>klass</span><span class='op'>|</span> <span class='id klass'>klass</span><span class='period'>.</span><span class='id reset_inheritable_attributes'>reset_inheritable_attributes</span><span class='semicolon'>;</span> <span class='id klass'>klass</span><span class='period'>.</span><span class='id reset_column_information'>reset_column_information</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_sequence_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_sequence_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


620
621
622
623
624</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 620</span>

<span class='kw'>def</span> <span class='id reset_sequence_name'>reset_sequence_name</span> <span class='comment'>#:nodoc:
</span>  <span class='id default'>default</span> <span class='op'>=</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id default_sequence_name'>default_sequence_name</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id primary_key'>primary_key</span><span class='rparen'>)</span>
  <span class='id set_sequence_name'>set_sequence_name</span><span class='lparen'>(</span><span class='id default'>default</span><span class='rparen'>)</span>
  <span class='id default'>default</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_subclasses-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_subclasses</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 320</span>

<span class='kw'>def</span> <span class='id reset_subclasses'>reset_subclasses</span> <span class='comment'>#:nodoc:
</span>  <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id warn'>warn</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ActiveRecord::Base.reset_subclasses no longer does anything in Rails 3. It will be removed in the final release; please update your apps and plugins.</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id caller'>caller</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_table_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_table_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Computes the table name, (re)sets it internally, and returns it.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


600
601
602</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 600</span>

<span class='kw'>def</span> <span class='id reset_table_name'>reset_table_name</span> <span class='comment'>#:nodoc:
</span>  <span class='kw'>self</span><span class='period'>.</span><span class='id table_name'>table_name</span> <span class='op'>=</span> <span class='id compute_table_name'>compute_table_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="respond_to?-class_method">
  
    + (<tt>Boolean</tt>) <strong>respond_to?</strong>(method_id, include_private = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


835
836
837
838
839
840
841
842
843</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 835</span>

<span class='kw'>def</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='id method_id'>method_id</span><span class='comma'>,</span> <span class='id include_private'>include_private</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>DynamicFinderMatch</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id method_id'>method_id</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id all_attributes_exists?'>all_attributes_exists?</span><span class='lparen'>(</span><span class='id match'>match</span><span class='period'>.</span><span class='id attribute_names'>attribute_names</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>DynamicScopeMatch</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id method_id'>method_id</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id all_attributes_exists?'>all_attributes_exists?</span><span class='lparen'>(</span><span class='id match'>match</span><span class='period'>.</span><span class='id attribute_names'>attribute_names</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="retrieve_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>retrieve_connection</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 96</span>

<span class='kw'>def</span> <span class='id retrieve_connection'>retrieve_connection</span>
  <span class='id connection_handler'>connection_handler</span><span class='period'>.</span><span class='id retrieve_connection'>retrieve_connection</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sanitize-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sanitize</strong>(object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Used to sanitize objects before they&#8217;re used in an SQL SELECT
statement. Delegates to <tt>connection.quote</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


808
809
810</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 808</span>

<span class='kw'>def</span> <span class='id sanitize'>sanitize</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id connection'>connection</span><span class='period'>.</span><span class='id quote'>quote</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scoped_methods-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>scoped_methods</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


888
889
890
891</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 888</span>

<span class='kw'>def</span> <span class='id scoped_methods'>scoped_methods</span> <span class='comment'>#:nodoc:
</span>  <span class='id key'>key</span> <span class='op'>=</span> <span class='symbol'>:#{</span><span class='kw'>self</span><span class='rbrace'>}</span><span class='tstring_content'>_scoped_methods</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id presence'>presence</span> <span class='op'>||</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_scoping'>default_scoping</span><span class='period'>.</span><span class='id dup'>dup</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sequence_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sequence_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Lazy-set the sequence name to the connection&#8217;s default.  This method
is only ever called once since set_sequence_name overrides it.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


616
617
618</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 616</span>

<span class='kw'>def</span> <span class='id sequence_name'>sequence_name</span> <span class='comment'>#:nodoc:
</span>  <span class='id reset_sequence_name'>reset_sequence_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="serialize-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>serialize</strong>(attr_name, class_name = Object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
If you have an attribute that needs to be saved to the database as an
object, and retrieved as the same object, then specify the name of that
attribute using this method and it will be handled automatically. The
serialization is done through YAML. If <tt>class_name</tt> is specified,
the serialized object must be of that class on retrieval or
SerializationTypeMismatch will be raised.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>attr_name</tt> - The field name that should be serialized.
</p>
</li>
<li><p>
<tt>class_name</tt> - Optional, class name that the object type should be
equal to.
</p>
</li>
</ul>
<h4>Example</h4>
<pre class="code">
  <span class='comment'># Serialize a preferences attribute
</span>  <span class='kw'>class</span> <span class='const'>User</span>
    <span class='id serialize'>serialize</span> <span class='symbol'>:preferences</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 545</span>

<span class='kw'>def</span> <span class='id serialize'>serialize</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='comma'>,</span> <span class='id class_name'>class_name</span> <span class='op'>=</span> <span class='const'>Object</span><span class='rparen'>)</span>
  <span class='id serialized_attributes'>serialized_attributes</span><span class='lbracket'>[</span><span class='id attr_name'>attr_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id class_name'>class_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="serialized_attributes-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>serialized_attributes</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of all the attributes that have been specified for
serialization as keys and their class restriction as values.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


551
552
553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 551</span>

<span class='kw'>def</span> <span class='id serialized_attributes'>serialized_attributes</span>
  <span class='id read_inheritable_attribute'>read_inheritable_attribute</span><span class='lparen'>(</span><span class='symbol'>:attr_serialized</span><span class='rparen'>)</span> <span class='kw'>or</span> <span class='id write_inheritable_attribute'>write_inheritable_attribute</span><span class='lparen'>(</span><span class='symbol'>:attr_serialized</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_inheritance_column-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_inheritance_column</strong>(value = nil, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='inheritance_column=-class_method'>inheritance_column=</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the name of the inheritance column to use to the given value, or (if
the value # is nil or false) to the value returned by the given block.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id set_inheritance_column'>set_inheritance_column</span> <span class='kw'>do</span>
      <span class='id original_inheritance_column'>original_inheritance_column</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


647
648
649</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 647</span>

<span class='kw'>def</span> <span class='id set_inheritance_column'>set_inheritance_column</span><span class='lparen'>(</span><span class='id value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id define_attr_method'>define_attr_method</span> <span class='symbol'>:inheritance_column</span><span class='comma'>,</span> <span class='id value'>value</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_sequence_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_sequence_name</strong>(value = nil, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='sequence_name=-class_method'>sequence_name=</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the name of the sequence to use when generating ids to the given
value, or (if the value is nil or false) to the value returned by the given
block. This is required for Oracle and is useful for any database which
relies on sequences for primary key generation.
</p>
<p>
If a sequence name is not explicitly set when using Oracle or Firebird, it
will default to the commonly used pattern of: #{table_name}_seq
</p>
<p>
If a sequence name is not explicitly set when using PostgreSQL, it will
discover the sequence corresponding to your primary key for you.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id set_sequence_name'>set_sequence_name</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>projectseq</span><span class='tstring_end'>&quot;</span></span>   <span class='comment'># default would have been &quot;project_seq&quot;
</span>  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


666
667
668</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 666</span>

<span class='kw'>def</span> <span class='id set_sequence_name'>set_sequence_name</span><span class='lparen'>(</span><span class='id value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id define_attr_method'>define_attr_method</span> <span class='symbol'>:sequence_name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_table_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_table_name</strong>(value = nil, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='table_name=-class_method'>table_name=</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the table name. If the value is nil or false  then the value returned
by the given block is used.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Project</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id set_table_name'>set_table_name</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>project</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


632
633
634
635</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 632</span>

<span class='kw'>def</span> <span class='id set_table_name'>set_table_name</span><span class='lparen'>(</span><span class='id value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@quoted_table_name</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id define_attr_method'>define_attr_method</span> <span class='symbol'>:table_name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sqlite3_connection-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sqlite3_connection</strong>(config) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
sqlite3 adapter reuses sqlite_connection.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb', line 6</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sqlite3_connection'>sqlite3_connection</span><span class='lparen'>(</span><span class='id config'>config</span><span class='rparen'>)</span> <span class='comment'># :nodoc:
</span>  <span class='comment'># Require database.
</span>  <span class='kw'>unless</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No database file specified. Missing argument: database</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='comment'># Allow database path relative to Rails.root, but only if
</span>  <span class='comment'># the database path is not the special path that tells
</span>  <span class='comment'># Sqlite to build a database only in memory.
</span>  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>Rails</span><span class='period'>.</span><span class='id root'>root</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:memory:</span><span class='tstring_end'>'</span></span> <span class='op'>!=</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span>
    <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>Rails</span><span class='period'>.</span><span class='id root'>root</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>sqlite3</span><span class='tstring_end'>'</span></span> <span class='op'>==</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>adapter name should be &quot;sqlite3&quot;</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>

  <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id const_defined?'>const_defined?</span><span class='lparen'>(</span><span class='symbol'>:SQLite3</span><span class='rparen'>)</span>
    <span class='id require_library_or_gem'>require_library_or_gem</span><span class='lparen'>(</span><span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:adapter</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id db'>db</span> <span class='op'>=</span> <span class='const'>SQLite3</span><span class='op'>::</span><span class='const'>Database</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span>
    <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:database</span><span class='rbracket'>]</span><span class='comma'>,</span>
    <span class='symbol'>:results_as_hash</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='rparen'>)</span>

  <span class='id db'>db</span><span class='period'>.</span><span class='id busy_timeout'>busy_timeout</span><span class='lparen'>(</span><span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='const'>ConnectionAdapters</span><span class='op'>::</span><span class='const'>SQLite3Adapter</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id db'>db</span><span class='comma'>,</span> <span class='id logger'>logger</span><span class='comma'>,</span> <span class='id config'>config</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sti_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>sti_name</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


845
846
847</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 845</span>

<span class='kw'>def</span> <span class='id sti_name'>sti_name</span>
  <span class='id store_full_sti_class'>store_full_sti_class</span> <span class='op'>?</span> <span class='id name'>name</span> <span class='op'>:</span> <span class='id name'>name</span><span class='period'>.</span><span class='id demodulize'>demodulize</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="subclasses-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>subclasses</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


324
325
326</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 324</span>

<span class='kw'>def</span> <span class='id subclasses'>subclasses</span>
  <span class='id descendants'>descendants</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="table_exists?-class_method">
  
    + (<tt>Boolean</tt>) <strong>table_exists?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Indicates whether the table associated with this class exists
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


672
673
674</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 672</span>

<span class='kw'>def</span> <span class='id table_exists?'>table_exists?</span>
  <span class='id connection'>connection</span><span class='period'>.</span><span class='id table_exists?'>table_exists?</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="table_name-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>table_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Guesses the table name (in forced lower-case) based on the name of the
class in the inheritance hierarchy descending directly from
ActiveRecord::Base. So if the hierarchy looks like: Reply < Message <
ActiveRecord::Base, then Message is used to guess the table name even when
called on Reply. The rules used to do the guess are handled by the
Inflector class in Active Support, which knows almost all common English
inflections. You can add new inflections in
config/initializers/inflections.rb.
</p>
<p>
Nested classes are given table names prefixed by the singular form of the
parent&#8217;s table name. Enclosing modules are not considered.
</p>
<h4>Examples</h4>
<pre class="code">
  class Invoice &lt; ActiveRecord::Base; end;
  file                  class               table_name
  invoice.rb            Invoice             invoices

  class Invoice &lt; ActiveRecord::Base; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice.rb            Invoice::Lineitem   invoice_lineitems

  module Invoice; class Lineitem &lt; ActiveRecord::Base; end; end;
  file                  class               table_name
  invoice/lineitem.rb   Invoice::Lineitem   lineitems
</pre>
<p>
Additionally, the class-level <tt>table_name_prefix</tt> is prepended and
the <tt>table_name_suffix</tt> is appended.  So if you have
&#8220;myapp_&#8221; as a prefix, the table name guess for an Invoice class
becomes &#8220;myapp_invoices&#8221;. Invoice::Lineitem becomes
&#8220;myapp_invoice_lineitems&#8221;.
</p>
<p>
You can also overwrite this class method to allow for unguessable links,
such as a Mouse class with a link to a &#8220;mice&#8221; table. Example:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Mouse</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id set_table_name'>set_table_name</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mice</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


590
591
592</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 590</span>

<span class='kw'>def</span> <span class='id table_name'>table_name</span>
  <span class='id reset_table_name'>reset_table_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unscoped-class_method">
  
    + (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>unscoped</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a scope for this class without taking into account the
default_scope.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id default_scope'>default_scope</span> <span class='symbol'>:published</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='kw'>end</span>

  <span class='const'>Post</span><span class='period'>.</span><span class='id all'>all</span>          <span class='comment'># Fires &quot;SELECT * FROM posts WHERE published = true&quot;
</span>  <span class='const'>Post</span><span class='period'>.</span><span class='id unscoped'>unscoped</span><span class='period'>.</span><span class='id all'>all</span> <span class='comment'># Fires &quot;SELECT * FROM posts&quot;
</span></pre>
<p>
This method also accepts a block meaning that all queries inside the block
will not use the default_scope:
</p>
<pre class="code">
  <span class='const'>Post</span><span class='period'>.</span><span class='id unscoped'>unscoped</span> <span class='lbrace'>{</span>
    <span class='id limit'>limit</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span> <span class='comment'># Fires &quot;SELECT * FROM posts LIMIT 10&quot;
</span>  <span class='rbrace'>}</span>
</pre>
<p>
It is recommended to use block form of unscoped because chaining unscoped
with <tt>named_scope</tt> does not work. Assuming that <tt>published</tt>
is a <tt>named_scope</tt> following two statements are same.
</p>
<p>
Post.unscoped.published  Post.published
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


884
885
886</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 884</span>

<span class='kw'>def</span> <span class='id unscoped'>unscoped</span> <span class='comment'>#:nodoc:
</span>  <span class='id block_given?'>block_given?</span> <span class='op'>?</span> <span class='id relation'>relation</span><span class='period'>.</span><span class='id scoping'>scoping</span> <span class='lbrace'>{</span> <span class='kw'>yield</span> <span class='rbrace'>}</span> <span class='op'>:</span> <span class='id relation'>relation</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="==-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>==</strong>(comparison_object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the <tt>comparison_object</tt> is the same object, or is of
the same type and has the same id.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1600
1601
1602
1603
1604</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1600</span>

<span class='kw'>def</span> <span class='op'>==</span><span class='lparen'>(</span><span class='id comparison_object'>comparison_object</span><span class='rparen'>)</span>
  <span class='id comparison_object'>comparison_object</span><span class='period'>.</span><span class='id equal?'>equal?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span> <span class='op'>||</span>
    <span class='lparen'>(</span><span class='id comparison_object'>comparison_object</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span>
      <span class='id comparison_object'>comparison_object</span><span class='period'>.</span><span class='id id'>id</span> <span class='op'>==</span> <span class='id id'>id</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id comparison_object'>comparison_object</span><span class='period'>.</span><span class='id new_record?'>new_record?</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(attr_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of the attribute identified by <tt>attr_name</tt> after
it has been typecast (for example, &#8220;2004-12-12&#8221; in a data
column is cast to a date object, like Date.new(2004, 12, 12)). (Alias for
the protected read_attribute method).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1507
1508
1509</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1507</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='rparen'>)</span>
  <span class='id read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]=</strong>(attr_name, value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Updates the attribute identified by <tt>attr_name</tt> with the specified
<tt>value</tt>. (Alias for the protected write_attribute method).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1513
1514
1515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1513</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span>
  <span class='id write_attribute'>write_attribute</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attribute_for_inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>attribute_for_inspect</strong>(attr_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an <tt>#inspect</tt>-like string for the value of the attribute
<tt>attr_name</tt>. String attributes are elided after 50 characters, and
Date and Time attributes are returned in the <tt>:db</tt> format. Other
attributes return the value of <tt>#inspect</tt> without modification.
</p>
<pre class="code">
  <span class='id person'>person</span> <span class='op'>=</span> <span class='const'>Person</span><span class='period'>.</span><span class='id create!'>create!</span><span class='lparen'>(</span><span class='symbol'>:name</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>David Heinemeier Hansson </span><span class='tstring_end'>&quot;</span></span> <span class='op'>*</span> <span class='int'>3</span><span class='rparen'>)</span>

  <span class='id person'>person</span><span class='period'>.</span><span class='id attribute_for_inspect'>attribute_for_inspect</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; '&quot;David Heinemeier Hansson David Heinemeier Hansson D...&quot;'
</span>
  <span class='id person'>person</span><span class='period'>.</span><span class='id attribute_for_inspect'>attribute_for_inspect</span><span class='lparen'>(</span><span class='symbol'>:created_at</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; '&quot;2009-01-12 04:48:57&quot;'</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1575
1576
1577
1578
1579
1580
1581
1582
1583
1584
1585</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1575</span>

<span class='kw'>def</span> <span class='id attribute_for_inspect'>attribute_for_inspect</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='rparen'>)</span>
  <span class='id value'>value</span> <span class='op'>=</span> <span class='id read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='id value'>value</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&gt;</span> <span class='int'>50</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id value'>value</span><span class='lbracket'>[</span><span class='int'>0</span><span class='op'>..</span><span class='int'>50</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id inspect'>inspect</span>
  <span class='kw'>elsif</span> <span class='id value'>value</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Date</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id value'>value</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Time</span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id value'>value</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='lparen'>(</span><span class='symbol'>:db</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>)</span></span>
  <span class='kw'>else</span>
    <span class='id value'>value</span><span class='period'>.</span><span class='id inspect'>inspect</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attribute_names-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>attribute_names</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of names for the attributes available on this object
sorted alphabetically.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1500
1501
1502</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1500</span>

<span class='kw'>def</span> <span class='id attribute_names'>attribute_names</span>
  <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id sort'>sort</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attribute_present?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>attribute_present?</strong>(attribute) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the specified <tt>attribute</tt> has been set by the user
or by a database load and is neither nil nor empty? (the latter only
applies to objects that respond to empty?, most notably Strings).
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1589
1590
1591
1592</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1589</span>

<span class='kw'>def</span> <span class='id attribute_present?'>attribute_present?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span>
  <span class='id value'>value</span> <span class='op'>=</span> <span class='id read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span>
  <span class='op'>!</span><span class='id value'>value</span><span class='period'>.</span><span class='id blank?'>blank?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attributes-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>attributes</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a hash of all the attributes with their names as keys and the
values of the attributes as values.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1556
1557
1558
1559
1560</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1556</span>

<span class='kw'>def</span> <span class='id attributes'>attributes</span>
  <span class='id attrs'>attrs</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id attribute_names'>attribute_names</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span> <span class='id attrs'>attrs</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id read_attribute'>read_attribute</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id attrs'>attrs</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attributes=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>attributes=</strong>(new_attributes, guard_protected_attributes = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Allows you to set all the attributes at once by passing in a hash with keys
matching the attribute names (which again matches the column names).
</p>
<p>
If <tt>guard_protected_attributes</tt> is true (the default), then
sensitive attributes can be protected from this form of mass-assignment by
using the <tt>attr_protected</tt> macro. Or you can alternatively specify
which attributes <b>can</b> be accessed with the <tt>attr_accessible</tt>
macro. Then all the attributes not included in that won&#8217;t be allowed
to be mass-assigned.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id attr_protected'>attr_protected</span> <span class='symbol'>:is_admin</span>
  <span class='kw'>end</span>

  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Phusion</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:is_admin</span> <span class='op'>=&gt;</span> <span class='kw'>true</span> <span class='rbrace'>}</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id username'>username</span>   <span class='comment'># =&gt; &quot;Phusion&quot;
</span>  <span class='id user'>user</span><span class='period'>.</span><span class='id is_admin?'>is_admin?</span>  <span class='comment'># =&gt; false
</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:attributes=</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:username</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Phusion</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:is_admin</span> <span class='op'>=&gt;</span> <span class='kw'>true</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id user'>user</span><span class='period'>.</span><span class='id is_admin?'>is_admin?</span>  <span class='comment'># =&gt; true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1537
1538
1539
1540
1541
1542
1543
1544
1545
1546
1547
1548
1549
1550
1551
1552
1553</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1537</span>

<span class='kw'>def</span> <span class='id attributes='>attributes=</span><span class='lparen'>(</span><span class='id new_attributes'>new_attributes</span><span class='comma'>,</span> <span class='id guard_protected_attributes'>guard_protected_attributes</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id new_attributes'>new_attributes</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
  <span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='id new_attributes'>new_attributes</span><span class='period'>.</span><span class='id stringify_keys'>stringify_keys</span>

  <span class='id multi_parameter_attributes'>multi_parameter_attributes</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id attributes'>attributes</span> <span class='op'>=</span> <span class='id sanitize_for_mass_assignment'>sanitize_for_mass_assignment</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id guard_protected_attributes'>guard_protected_attributes</span>

  <span class='id attributes'>attributes</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id k'>k</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='id multi_parameter_attributes'>multi_parameter_attributes</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span> <span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span> <span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:#{</span><span class='id k'>k</span><span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:#{</span><span class='id k'>k</span><span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id v'>v</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id raise'>raise</span><span class='lparen'>(</span><span class='const'>UnknownAttributeError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>unknown attribute: </span><span class='embexpr_beg'>#{</span><span class='id k'>k</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id assign_multiparameter_attributes'>assign_multiparameter_attributes</span><span class='lparen'>(</span><span class='id multi_parameter_attributes'>multi_parameter_attributes</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cache_key-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cache_key</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a cache key that can be used to identify this record.
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='const'>Product</span><span class='period'>.</span><span class='id new'>new</span><span class='period'>.</span><span class='id cache_key'>cache_key</span>     <span class='comment'># =&gt; &quot;products/new&quot;
</span>  <span class='const'>Product</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id cache_key'>cache_key</span> <span class='comment'># =&gt; &quot;products/5&quot; (updated_at not available)
</span>  <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>5</span><span class='rparen'>)</span><span class='period'>.</span><span class='id cache_key'>cache_key</span>  <span class='comment'># =&gt; &quot;people/5-20071224150000&quot; (updated_at available)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1479
1480
1481
1482
1483
1484
1485
1486
1487
1488</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1479</span>

<span class='kw'>def</span> <span class='id cache_key'>cache_key</span>
  <span class='kw'>case</span>
  <span class='kw'>when</span> <span class='id new_record?'>new_record?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id cache_key'>cache_key</span><span class='rbrace'>}</span><span class='tstring_content'>/new</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>when</span> <span class='id timestamp'>timestamp</span> <span class='op'>=</span> <span class='kw'>self</span><span class='lbracket'>[</span><span class='symbol'>:updated_at</span><span class='rbracket'>]</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id cache_key'>cache_key</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id id'>id</span><span class='rbrace'>}</span><span class='tstring_content'>-</span><span class='embexpr_beg'>#{</span><span class='id timestamp'>timestamp</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='lparen'>(</span><span class='symbol'>:number</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>else</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id cache_key'>cache_key</span><span class='rbrace'>}</span><span class='tstring_content'>/</span><span class='embexpr_beg'>#{</span><span class='id id'>id</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="column_for_attribute-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>column_for_attribute</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the column object for the named attribute.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1595
1596
1597</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1595</span>

<span class='kw'>def</span> <span class='id column_for_attribute'>column_for_attribute</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id columns_hash'>columns_hash</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="connection-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>connection</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the connection currently associated with the class. This can also
be used to &#8220;borrow&#8221; the connection to do database work that
isn&#8217;t easily done without going straight to SQL.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb', line 19</span>

<span class='kw'>def</span> <span class='id connection'>connection</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id connection'>connection</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="dup-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>dup</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns duplicated record with unfreezed attributes.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1628
1629
1630
1631
1632</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1628</span>

<span class='kw'>def</span> <span class='id dup'>dup</span>
  <span class='id obj'>obj</span> <span class='op'>=</span> <span class='kw'>super</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id instance_variable_set'>instance_variable_set</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>@attributes</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id dup'>dup</span><span class='rparen'>)</span>
  <span class='id obj'>obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="eql?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>eql?</strong>(comparison_object) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Delegates to ==
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1607
1608
1609</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1607</span>

<span class='kw'>def</span> <span class='id eql?'>eql?</span><span class='lparen'>(</span><span class='id comparison_object'>comparison_object</span><span class='rparen'>)</span>
  <span class='kw'>self</span> <span class='op'>==</span> <span class='lparen'>(</span><span class='id comparison_object'>comparison_object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="freeze-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>freeze</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Freeze the attributes hash such that associations are still accessible,
even on destroyed records.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1618
1619
1620</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1618</span>

<span class='kw'>def</span> <span class='id freeze'>freeze</span>
  <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id freeze'>freeze</span><span class='semicolon'>;</span> <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="frozen?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>frozen?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if the attributes hash has been frozen.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1623
1624
1625</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1623</span>

<span class='kw'>def</span> <span class='id frozen?'>frozen?</span>
  <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id frozen?'>frozen?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="has_attribute?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_attribute?</strong>(attr_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the given attribute is in the attributes hash
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1495
1496
1497</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1495</span>

<span class='kw'>def</span> <span class='id has_attribute?'>has_attribute?</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='rparen'>)</span>
  <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id attr_name'>attr_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="hash-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>hash</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Delegates to id in order to allow two records of the same type and id to
work with something like:
</p>
<pre class="code">
  <span class='lbracket'>[</span> <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>3</span><span class='rparen'>)</span> <span class='rbracket'>]</span> <span class='op'>&amp;</span> <span class='lbracket'>[</span> <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='int'>4</span><span class='rparen'>)</span> <span class='rbracket'>]</span> <span class='comment'># =&gt; [ Person.find(1) ]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1613
1614
1615</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1613</span>

<span class='kw'>def</span> <span class='id hash'>hash</span>
  <span class='id id'>id</span><span class='period'>.</span><span class='id hash'>hash</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="initialize_copy-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>initialize_copy</strong>(other) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Cloned objects have no id assigned and are treated as new records. Note
that this is a &#8220;shallow&#8221; clone as it copies the object&#8217;s
attributes only, not its associations. The extent of a &#8220;deep&#8221;
clone is application specific and is therefore left to the application to
implement according to its need.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1421
1422
1423
1424
1425
1426
1427
1428
1429
1430
1431
1432
1433
1434
1435
1436
1437
1438
1439
1440
1441
1442
1443</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1421</span>

<span class='kw'>def</span> <span class='id initialize_copy'>initialize_copy</span><span class='lparen'>(</span><span class='id other'>other</span><span class='rparen'>)</span>
  <span class='id _run_after_initialize_callbacks'>_run_after_initialize_callbacks</span> <span class='kw'>if</span> <span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:_run_after_initialize_callbacks</span><span class='rparen'>)</span>
  <span class='id cloned_attributes'>cloned_attributes</span> <span class='op'>=</span> <span class='id other'>other</span><span class='period'>.</span><span class='id clone_attributes'>clone_attributes</span><span class='lparen'>(</span><span class='symbol'>:read_attribute_before_type_cast</span><span class='rparen'>)</span>
  <span class='id cloned_attributes'>cloned_attributes</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id primary_key'>primary_key</span><span class='rparen'>)</span>

  <span class='ivar'>@attributes</span> <span class='op'>=</span> <span class='id cloned_attributes'>cloned_attributes</span>

  <span class='ivar'>@changed_attributes</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id attributes_from_column_definition'>attributes_from_column_definition</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id orig_value'>orig_value</span><span class='op'>|</span>
    <span class='ivar'>@changed_attributes</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id orig_value'>orig_value</span> <span class='kw'>if</span> <span class='id field_changed?'>field_changed?</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id orig_value'>orig_value</span><span class='comma'>,</span> <span class='ivar'>@attributes</span><span class='lbracket'>[</span><span class='id attr'>attr</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id clear_aggregation_cache'>clear_aggregation_cache</span>
  <span class='id clear_association_cache'>clear_association_cache</span>
  <span class='ivar'>@attributes_cache</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='ivar'>@new_record</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id ensure_proper_type'>ensure_proper_type</span>

  <span class='kw'>if</span> <span class='id scope'>scope</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:current_scoped_methods</span><span class='rparen'>)</span>
    <span class='id create_with'>create_with</span> <span class='op'>=</span> <span class='id scope'>scope</span><span class='period'>.</span><span class='id scope_for_create'>scope_for_create</span>
    <span class='id create_with'>create_with</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id att'>att</span><span class='comma'>,</span><span class='id value'>value</span><span class='op'>|</span> <span class='kw'>self</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id att'>att</span><span class='rbrace'>}</span><span class='tstring_content'>=</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id create_with'>create_with</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the contents of the record as a nicely formatted string.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1646
1647
1648
1649
1650
1651
1652
1653</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1646</span>

<span class='kw'>def</span> <span class='id inspect'>inspect</span>
  <span class='id attributes_as_nice_string'>attributes_as_nice_string</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id column_names'>column_names</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id has_attribute?'>has_attribute?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id new_record?'>new_record?</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>: </span><span class='embexpr_beg'>#{</span><span class='id attribute_for_inspect'>attribute_for_inspect</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>#&lt;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id attributes_as_nice_string'>attributes_as_nice_string</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="quoted_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>quoted_id</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1490
1491
1492</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1490</span>

<span class='kw'>def</span> <span class='id quoted_id'>quoted_id</span> <span class='comment'>#:nodoc:
</span>  <span class='id quote_value'>quote_value</span><span class='lparen'>(</span><span class='id id'>id</span><span class='comma'>,</span> <span class='id column_for_attribute'>column_for_attribute</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id primary_key'>primary_key</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="readonly!-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>readonly!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Marks this record as read only.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1641
1642
1643</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1641</span>

<span class='kw'>def</span> <span class='id readonly!'>readonly!</span>
  <span class='ivar'>@readonly</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="readonly?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>readonly?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if the record is read only. Records loaded through
joins with piggy-back attributes will be marked as read only since they
cannot be saved.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1636
1637
1638</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1636</span>

<span class='kw'>def</span> <span class='id readonly?'>readonly?</span>
  <span class='ivar'>@readonly</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_param-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_param</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a String, which Action Pack uses for constructing an URL to this
object. The default implementation returns this record&#8217;s id as a
String, or nil if this record&#8217;s unsaved.
</p>
<p>
For example, suppose that you have a User model, and that you have a
<tt>resources :users</tt> route. Normally, <tt>user_path</tt> will
construct a path with the user object&#8217;s &#8216;id&#8217; in it:
</p>
<pre class="code">
  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Phusion</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id user_path'>user_path</span><span class='lparen'>(</span><span class='id user'>user</span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;/users/1&quot;
</span></pre>
<p>
You can override <tt>to_param</tt> in your model to make <tt>user_path</tt>
construct a path using the user&#8217;s name instead of the user&#8217;s
id:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>User</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='kw'>def</span> <span class='id to_param'>to_param</span>  <span class='comment'># overridden
</span>      <span class='id name'>name</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id user'>user</span> <span class='op'>=</span> <span class='const'>User</span><span class='period'>.</span><span class='id find_by_name'>find_by_name</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Phusion</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id user_path'>user_path</span><span class='lparen'>(</span><span class='id user'>user</span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;/users/Phusion&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1467
1468
1469
1470</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/base.rb', line 1467</span>

<span class='kw'>def</span> <span class='id to_param'>to_param</span>
  <span class='comment'># We can't use alias_method here, because method 'id' optimizes itself on the fly.
</span>  <span class='id id'>id</span> <span class='op'>&amp;&amp;</span> <span class='id id'>id</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='comment'># Be sure to stringify the id for routes
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:18 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>