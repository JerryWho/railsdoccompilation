<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Fixtures</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo; 
    
    
    <span class="title">Fixtures</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Fixtures
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Fixtures</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activerecord/lib/active_record/fixtures.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Fixtures are a way of organizing data that you want to test against; in
short, sample data.
</p>
<h1>Fixture formats</h1>
<p>
Fixtures come in 3 flavors:
</p>
<pre class="code">
  1.  YAML fixtures
  2.  CSV fixtures
  3.  Single-file fixtures
</pre>
<h2>YAML fixtures</h2>
<p>
This type of fixture is in YAML format and the preferred default. YAML is a
file format which describes data structures in a non-verbose,
human-readable format. It ships with Ruby 1.8.1+.
</p>
<p>
Unlike single-file fixtures, YAML fixtures are stored in a single file per
model, which are placed in the directory appointed by
<tt>ActiveSupport::TestCase.fixture_path=(path)</tt> (this is automatically
configured for Rails, so you can just put your files in
<tt>&lt;your-rails-app&gt;/test/fixtures/</tt>). The fixture file ends with
the <tt>.yml</tt> file extension (Rails example:
<tt>&lt;your-rails-app&gt;/test/fixtures/web_sites.yml</tt>). The format of
a YAML fixture file looks like this:
</p>
<pre class="code">
  rubyonrails:
    id: 1
    name: Ruby on Rails
    url: http://www.rubyonrails.org

  google:
    id: 2
    name: Google
    url: http://www.google.com
</pre>
<p>
This YAML fixture file includes two fixtures.  Each YAML fixture (ie.
record) is given a name and is followed by an indented list of key/value
pairs in the &#8220;key: value&#8221; format.  Records are separated by a
blank line for your viewing pleasure.
</p>
<p>
Note that YAML fixtures are unordered. If you want ordered fixtures, use
the omap YAML type. See <a
href="http://yaml.org/type/omap.html">yaml.org/type/omap.html</a> for the
specification.  You will need ordered fixtures when you have foreign key
constraints on keys in the same table. This is commonly needed for tree
structures.  Example:
</p>
<pre class="code">
   --- !omap
   * parent:
       id:         1
       parent_id:  NULL
       title:      Parent
   * child:
       id:         2
       parent_id:  1
       title:      Child
</pre>
<h2>CSV fixtures</h2>
<p>
Fixtures can also be kept in the Comma Separated Value (CSV) format. Akin
to YAML fixtures, CSV fixtures are stored in a single file, but instead end
with the <tt>.csv</tt> file extension (Rails example:
<tt>&lt;your-rails-app&gt;/test/fixtures/web_sites.csv</tt>).
</p>
<p>
The format of this type of fixture file is much more compact than the
others, but also a little harder to read by us humans.  The first line of
the CSV file is a comma-separated list of field names.  The rest of the
file is then comprised of the actual data (1 per line).  Here&#8217;s an
example:
</p>
<pre class="code">
  id, name, url
  1, Ruby On Rails, http://www.rubyonrails.org
  2, Google, http://www.google.com
</pre>
<p>
Should you have a piece of data with a comma character in it, you can place
double quotes around that value.  If you need to use a double quote
character, you must escape it with another double quote.
</p>
<p>
Another unique attribute of the CSV fixture is that it has <b>no</b>
fixture name like the other two formats.  Instead, the fixture names are
automatically generated by deriving the class name of the fixture file and
adding an incrementing number to the end.  In our example, the 1st fixture
would be called &#8220;web_site_1&#8221; and the 2nd one would be called
&#8220;web_site_2&#8221;.
</p>
<p>
Most databases and spreadsheets support exporting to CSV format, so this is
a great format for you to choose if you have existing data somewhere
already.
</p>
<h2>Single-file fixtures</h2>
<p>
This type of fixture was the original format for Active Record that has
since been deprecated in favor of the YAML and CSV formats. Fixtures for
this format are created by placing text files in a sub-directory (with the
name of the model) to the directory appointed by
<tt>ActiveSupport::TestCase.fixture_path=(path)</tt> (this is automatically
configured for Rails, so you can just put your files in
<tt>&lt;your-rails-app&gt;/test/fixtures/&lt;your-model-name&gt;/</tt>
&#8212; like <tt>&lt;your-rails-app&gt;/test/fixtures/web_sites/</tt> for
the WebSite model).
</p>
<p>
Each text file placed in this directory represents a &#8220;record&#8221;. 
Usually these types of fixtures are named without extensions, but if you
are on a Windows machine, you might consider adding <tt>.txt</tt> as the
extension. Here&#8217;s what the above example might look like:
</p>
<pre class="code">
  <span class='id web_sites'>web_sites</span><span class='op'>/</span><span class='id google'>google</span>
  <span class='id web_sites'>web_sites</span><span class='op'>/</span><span class='id yahoo'>yahoo</span><span class='period'>.</span><span class='id txt'>txt</span>
  <span class='id web_sites'>web_sites</span><span class='op'>/</span><span class='id ruby'>ruby</span><span class='op'>-</span><span class='id on'>on</span><span class='op'>-</span><span class='id rails'>rails</span>
</pre>
<p>
The file format of a standard fixture is simple.  Each line is a property
(or column in db speak) and has the syntax of &#8220;name => value&#8221;. 
Here&#8217;s an example of the ruby-on-rails fixture above:
</p>
<pre class="code">
  id =&gt; 1
  name =&gt; Ruby on Rails
  url =&gt; http://www.rubyonrails.org
</pre>
<h1>Using fixtures in testcases</h1>
<p>
Since fixtures are a testing construct, we use them in our unit and
functional tests.  There are two ways to use the fixtures, but first
let&#8217;s take a look at a sample unit test:
</p>
<pre class="code">
  <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>test_helper</span><span class='tstring_end'>'</span></span>

  <span class='kw'>class</span> <span class='const'>WebSiteTest</span> <span class='op'>&lt;</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TestCase</span>
    <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>web_site_count</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id assert_equal'>assert_equal</span> <span class='int'>2</span><span class='comma'>,</span> <span class='const'>WebSite</span><span class='period'>.</span><span class='id count'>count</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
By default, the <tt>test_helper module</tt> will load all of your fixtures
into your test database, so this test will succeed. The testing environment
will automatically load the all fixtures into the database before each
test. To ensure consistent data, the environment deletes the fixtures
before running the load.
</p>
<p>
In addition to being available in the database, the fixture&#8217;s data
may also be accessed by using a special dynamic method, which has the same
name as the model, and accepts the name of the fixture to instantiate:
</p>
<pre class="code">
  <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id web_sites'>web_sites</span><span class='lparen'>(</span><span class='symbol'>:rubyonrails</span><span class='rparen'>)</span><span class='period'>.</span><span class='id name'>name</span>
  <span class='kw'>end</span>
</pre>
<p>
Alternatively, you may enable auto-instantiation of the fixture data. For
instance, take the following tests:
</p>
<pre class="code">
  <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find_alt_method_1</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@web_sites</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rubyonrails</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>find_alt_method_2</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
    <span class='id assert_equal'>assert_equal</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Ruby on Rails</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='ivar'>@rubyonrails</span><span class='period'>.</span><span class='id news'>news</span>
  <span class='kw'>end</span>
</pre>
<p>
In order to use these methods to access fixtured data within your
testcases, you must specify one of the following in your
<tt>ActiveSupport::TestCase</tt>-derived class:
</p>
<ul>
<li><p>
to fully enable instantiated fixtures (enable alternate methods #1 and #2
above)
</p>
<pre class="code">
  <span class='kw'>self</span><span class='period'>.</span><span class='id use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>=</span> <span class='kw'>true</span>
</pre>
</li>
<li><p>
create only the hash for the fixtures, do not &#8216;find&#8217; each
instance (enable alternate method #1 only)
</p>
<pre class="code">
  <span class='kw'>self</span><span class='period'>.</span><span class='id use_instantiated_fixtures'>use_instantiated_fixtures</span> <span class='op'>=</span> <span class='symbol'>:no_instances</span>
</pre>
</li>
</ul>
<p>
Using either of these alternate methods incurs a performance hit, as the
fixtured data must be fully traversed in the database to create the fixture
hash and/or instance variables. This is expensive for large sets of
fixtured data.
</p>
<h1>Dynamic fixtures with ERb</h1>
<p>
Some times you don&#8217;t care about the content of the fixtures as much
as you care about the volume. In these cases, you can mix ERb in with your
YAML or CSV fixtures to create a bunch of fixtures for load testing, like:
</p>
<pre class="code">
  &lt;% for i in 1..1000 %&gt;
  fix_&lt;%= i %&gt;:
    id: &lt;%= i %&gt;
    name: guy_&lt;%= 1 %&gt;
  &lt;% end %&gt;
</pre>
<p>
This will create 1000 very simple YAML fixtures.
</p>
<p>
Using ERb, you can also inject dynamic values into your fixtures with
inserts like <tt>&lt;%= Date.today.strftime(&quot;%Y-%m-%d&quot;)
%&gt;</tt>. This is however a feature to be used with some caution. The
point of fixtures are that they&#8217;re stable units of predictable sample
data. If you feel that you need to inject dynamic values, then perhaps you
should reexamine whether your application is properly testable. Hence,
dynamic values in fixtures are to be considered a code smell.
</p>
<h1>Transactional fixtures</h1>
<p>
TestCases can use begin+rollback to isolate their changes to the database
instead of having to delete+insert for every test case.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>FooTest</span> <span class='op'>&lt;</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TestCase</span>
    <span class='kw'>self</span><span class='period'>.</span><span class='id use_transactional_fixtures'>use_transactional_fixtures</span> <span class='op'>=</span> <span class='kw'>true</span>

    <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>godzilla</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id assert'>assert</span> <span class='op'>!</span><span class='const'>Foo</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span><span class='period'>.</span><span class='id empty?'>empty?</span>
      <span class='const'>Foo</span><span class='period'>.</span><span class='id destroy_all'>destroy_all</span>
      <span class='id assert'>assert</span> <span class='const'>Foo</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='kw'>end</span>

    <span class='id test'>test</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>godzilla aftermath</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>do</span>
      <span class='id assert'>assert</span> <span class='op'>!</span><span class='const'>Foo</span><span class='period'>.</span><span class='id find'>find</span><span class='lparen'>(</span><span class='symbol'>:all</span><span class='rparen'>)</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
If you preload your test database with all fixture data (probably in the
Rakefile task) and use transactional fixtures, then you may omit all
fixtures declarations in your test cases since all the data&#8217;s already
there and every case rolls back its changes.
</p>
<p>
In order to use instantiated fixtures with preloaded data, set
<tt>self.pre_loaded_fixtures</tt> to true. This will provide access to
fixture data for every table that has been loaded through fixtures
(depending on the value of <tt>use_instantiated_fixtures</tt>)
</p>
<p>
When <b>not</b> to use transactional fixtures:
</p>
<ol>
<li><p>
You&#8217;re testing whether a transaction works correctly. Nested
transactions don&#8217;t commit until all parent transactions commit,
particularly, the fixtures transaction which is begun in setup and rolled
back in teardown. Thus, you won&#8217;t be able to verify the results of
your transaction until Active Record supports nested transactions or
savepoints (in progress).
</p>
</li>
<li><p>
Your database does not support transactions. Every Active Record database
supports transactions except MySQL MyISAM. Use InnoDB, MaxDB, or NDB
instead.
</p>
</li>
</ol>
<h1>Advanced YAML Fixtures</h1>
<p>
YAML fixtures that don&#8217;t specify an ID get some extra features:
</p>
<ul>
<li><p>
Stable, autogenerated IDs
</p>
</li>
<li><p>
Label references for associations (belongs_to, has_one, has_many)
</p>
</li>
<li><p>
HABTM associations as inline lists
</p>
</li>
<li><p>
Autofilled timestamp columns
</p>
</li>
<li><p>
Fixture label interpolation
</p>
</li>
<li><p>
Support for YAML defaults
</p>
</li>
</ul>
<h2>Stable, autogenerated IDs</h2>
<p>
Here, have a monkey fixture:
</p>
<pre class="code">
  george:
    id: 1
    name: George the Monkey

  reginald:
    id: 2
    name: Reginald the Pirate
</pre>
<p>
Each of these fixtures has two unique identifiers: one for the database and
one for the humans. Why don&#8217;t we generate the primary key instead?
Hashing each fixture&#8217;s label yields a consistent ID:
</p>
<pre class="code">
  george: # generated id: 503576764
    name: George the Monkey

  reginald: # generated id: 324201669
    name: Reginald the Pirate
</pre>
<p>
Active Record looks at the fixture&#8217;s model class, discovers the
correct primary key, and generates it right before inserting the fixture
into the database.
</p>
<p>
The generated ID for a given label is constant, so we can discover any
fixture&#8217;s ID without loading anything, as long as we know the label.
</p>
<h2>Label references for associations (belongs_to, has_one, has_many)</h2>
<p>
Specifying foreign keys in fixtures can be very fragile, not to mention
difficult to read. Since Active Record can figure out the ID of any fixture
from its label, you can specify FK&#8217;s by label instead of ID.
</p>
<h3>belongs_to</h3>
<p>
Let&#8217;s break out some more monkeys and pirates.
</p>
<pre class="code">
  ### in pirates.yml

  reginald:
    id: 1
    name: Reginald the Pirate
    monkey_id: 1

  ### in monkeys.yml

  george:
    id: 1
    name: George the Monkey
    pirate_id: 1
</pre>
<p>
Add a few more monkeys and pirates and break this into multiple files, and
it gets pretty hard to keep track of what&#8217;s going on. Let&#8217;s use
labels instead of IDs:
</p>
<pre class="code">
  ### in pirates.yml

  reginald:
    name: Reginald the Pirate
    monkey: george

  ### in monkeys.yml

  george:
    name: George the Monkey
    pirate: reginald
</pre>
<p>
Pow! All is made clear. Active Record reflects on the fixture&#8217;s model
class, finds all the <tt>belongs_to</tt> associations, and allows you to
specify a target <b>label</b> for the <b>association</b> (monkey: george)
rather than a target <b>id</b> for the <b>FK</b> (<tt>monkey_id: 1</tt>).
</p>
<h4>Polymorphic belongs_to</h4>
<p>
Supporting polymorphic relationships is a little bit more complicated,
since Active Record needs to know what type your association is pointing
at. Something like this should look familiar:
</p>
<pre class="code">
  ### in fruit.rb

  belongs_to :eater, :polymorphic =&gt; true

  ### in fruits.yml

  apple:
    id: 1
    name: apple
    eater_id: 1
    eater_type: Monkey
</pre>
<p>
Can we do better? You bet!
</p>
<pre class="code">
  apple:
    eater: george (Monkey)
</pre>
<p>
Just provide the polymorphic target type and Active Record will take care
of the rest.
</p>
<h3>has_and_belongs_to_many</h3>
<p>
Time to give our monkey some fruit.
</p>
<pre class="code">
  ### in monkeys.yml

  george:
    id: 1
    name: George the Monkey

  ### in fruits.yml

  apple:
    id: 1
    name: apple

  orange:
    id: 2
    name: orange

  grape:
    id: 3
    name: grape

  ### in fruits_monkeys.yml

  apple_george:
    fruit_id: 1
    monkey_id: 1

  orange_george:
    fruit_id: 2
    monkey_id: 1

  grape_george:
    fruit_id: 3
    monkey_id: 1
</pre>
<p>
Let&#8217;s make the HABTM fixture go away.
</p>
<pre class="code">
  ### in monkeys.yml

  george:
    id: 1
    name: George the Monkey
    fruits: apple, orange, grape

  ### in fruits.yml

  apple:
    name: apple

  orange:
    name: orange

  grape:
    name: grape
</pre>
<p>
Zap! No more fruits_monkeys.yml file. We&#8217;ve specified the list of
fruits on George&#8217;s fixture, but we could&#8217;ve just as easily
specified a list of monkeys on each fruit. As with <tt>belongs_to</tt>,
Active Record reflects on the fixture&#8217;s model class and discovers the
<tt>has_and_belongs_to_many</tt> associations.
</p>
<h2>Autofilled timestamp columns</h2>
<p>
If your table/model specifies any of Active Record&#8217;s standard
timestamp columns (<tt>created_at</tt>, <tt>created_on</tt>,
<tt>updated_at</tt>, <tt>updated_on</tt>), they will automatically be set
to <tt>Time.now</tt>.
</p>
<p>
If you&#8217;ve set specific values, they&#8217;ll be left alone.
</p>
<h2>Fixture label interpolation</h2>
<p>
The label of the current fixture is always available as a column value:
</p>
<pre class="code">
  geeksomnia:
    name: Geeksomnia's Account
    subdomain: $LABEL
</pre>
<p>
Also, sometimes (like when porting older join table fixtures) you&#8217;ll
need to be able to get a hold of the identifier for a given label. ERB to
the rescue:
</p>
<pre class="code">
  george_reginald:
    monkey_id: &lt;%= Fixtures.identify(:reginald) %&gt;
    pirate_id: &lt;%= Fixtures.identify(:george) %&gt;
</pre>
<h2>Support for YAML defaults</h2>
<p>
You probably already know how to use YAML to set and reuse defaults in your
<tt>database.yml</tt> file. You can use the same technique in your
fixtures:
</p>
<pre class="code">
  DEFAULTS: &amp;DEFAULTS
    created_on: &lt;%= 3.weeks.ago.to_s(:db) %&gt;

  first:
    name: Smurf
    &lt;&lt;: *DEFAULTS

  second:
    name: Fraggle
    &lt;&lt;: *DEFAULTS
</pre>
<p>
Any fixture labeled &#8220;DEFAULTS&#8221; is safely ignored.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="Fixtures/HabtmFixtures.html" title="Fixtures::HabtmFixtures (class)">HabtmFixtures</a></span></p>
</div>
<h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Fixtures/HabtmFixtures.html" title="Fixtures::HabtmFixtures (class)">HabtmFixtures</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="MAX_ID-constant" class="">MAX_ID =
          
        </dt>
        <dd><pre class="code"><span class='int'>2</span> <span class='op'>**</span> <span class='int'>30</span> <span class='op'>-</span> <span class='int'>1</span></pre></dd>
      
        <dt id="DEFAULT_FILTER_RE-constant" class="">DEFAULT_FILTER_RE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.ya?ml$</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="all_cached_fixtures-classvariable" class="">@@all_cached_fixtures =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute name.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#table_name-instance_method" title="#table_name (instance method)">- (Object) <strong>table_name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute table_name.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_fixtures-class_method" title="cache_fixtures (class method)">+ (Object) <strong>cache_fixtures</strong>(connection, fixtures_map) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cache_for_connection-class_method" title="cache_for_connection (class method)">+ (Object) <strong>cache_for_connection</strong>(connection) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cached_fixtures-class_method" title="cached_fixtures (class method)">+ (Object) <strong>cached_fixtures</strong>(connection, keys_to_fetch = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_fixtures-class_method" title="create_fixtures (class method)">+ (Object) <strong>create_fixtures</strong>(fixtures_directory, table_names, class_names = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fixture_is_cached%3F-class_method" title="fixture_is_cached? (class method)">+ (Boolean) <strong>fixture_is_cached?</strong>(connection, table_name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#identify-class_method" title="identify (class method)">+ (Object) <strong>identify</strong>(label) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a consistent, platform-independent identifier for <tt>label</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instantiate_all_loaded_fixtures-class_method" title="instantiate_all_loaded_fixtures (class method)">+ (Object) <strong>instantiate_all_loaded_fixtures</strong>(object, load_instances = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instantiate_fixtures-class_method" title="instantiate_fixtures (class method)">+ (Object) <strong>instantiate_fixtures</strong>(object, table_name, fixtures, load_instances = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_cache-class_method" title="reset_cache (class method)">+ (Object) <strong>reset_cache</strong>(connection = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_existing_fixtures-instance_method" title="#delete_existing_fixtures (instance method)">- (Object) <strong>delete_existing_fixtures</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Fixtures) <strong>initialize</strong>(connection, table_name, class_name, fixture_path, file_filter = DEFAULT_FILTER_RE) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Fixtures.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#insert_fixtures-instance_method" title="#insert_fixtures (instance method)">- (Object) <strong>insert_fixtures</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Fixtures (class)">Fixtures</a></span></tt>) <strong>initialize</strong>(connection, table_name, class_name, fixture_path, file_filter = DEFAULT_FILTER_RE) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Fixtures
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


551
552
553
554
555
556
557
558
559
560</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 551</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id class_name'>class_name</span><span class='comma'>,</span> <span class='id fixture_path'>fixture_path</span><span class='comma'>,</span> <span class='id file_filter'>file_filter</span> <span class='op'>=</span> <span class='const'>DEFAULT_FILTER_RE</span><span class='rparen'>)</span>
  <span class='ivar'>@connection</span><span class='comma'>,</span> <span class='ivar'>@table_name</span><span class='comma'>,</span> <span class='ivar'>@fixture_path</span><span class='comma'>,</span> <span class='ivar'>@file_filter</span> <span class='op'>=</span> <span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id fixture_path'>fixture_path</span><span class='comma'>,</span> <span class='id file_filter'>file_filter</span>
  <span class='ivar'>@name</span> <span class='op'>=</span> <span class='id table_name'>table_name</span> <span class='comment'># preserve fixture base name
</span>  <span class='ivar'>@class_name</span> <span class='op'>=</span> <span class='id class_name'>class_name</span> <span class='op'>||</span>
                <span class='lparen'>(</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id pluralize_table_names'>pluralize_table_names</span> <span class='op'>?</span> <span class='ivar'>@table_name</span><span class='period'>.</span><span class='id singularize'>singularize</span><span class='period'>.</span><span class='id camelize'>camelize</span> <span class='op'>:</span> <span class='ivar'>@table_name</span><span class='period'>.</span><span class='id camelize'>camelize</span><span class='rparen'>)</span>
  <span class='ivar'>@table_name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id table_name_prefix'>table_name_prefix</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='ivar'>@table_name</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id table_name_suffix'>table_name_suffix</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='ivar'>@table_name</span> <span class='op'>=</span> <span class='id class_name'>class_name</span><span class='period'>.</span><span class='id table_name'>table_name</span> <span class='kw'>if</span> <span class='id class_name'>class_name</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:table_name</span><span class='rparen'>)</span>
  <span class='ivar'>@connection</span> <span class='op'>=</span> <span class='id class_name'>class_name</span><span class='period'>.</span><span class='id connection'>connection</span> <span class='kw'>if</span> <span class='id class_name'>class_name</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:connection</span><span class='rparen'>)</span>
  <span class='id read_fixture_files'>read_fixture_files</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="name-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="name-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute name
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 549</span>

<span class='kw'>def</span> <span class='id name'>name</span>
  <span class='ivar'>@name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="table_name-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="table_name-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>table_name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute table_name
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 549</span>

<span class='kw'>def</span> <span class='id table_name'>table_name</span>
  <span class='ivar'>@table_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="cache_fixtures-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cache_fixtures</strong>(connection, fixtures_map) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


478
479
480</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 478</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id cache_fixtures'>cache_fixtures</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id fixtures_map'>fixtures_map</span><span class='rparen'>)</span>
  <span class='id cache_for_connection'>cache_for_connection</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='rparen'>)</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='id fixtures_map'>fixtures_map</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cache_for_connection-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cache_for_connection</strong>(connection) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


460
461
462
463</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 460</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id cache_for_connection'>cache_for_connection</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='rparen'>)</span>
  <span class='cvar'>@@all_cached_fixtures</span><span class='lbracket'>[</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id object_id'>object_id</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='cvar'>@@all_cached_fixtures</span><span class='lbracket'>[</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id object_id'>object_id</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cached_fixtures-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cached_fixtures</strong>(connection, keys_to_fetch = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


469
470
471
472
473
474
475
476</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 469</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id cached_fixtures'>cached_fixtures</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id keys_to_fetch'>keys_to_fetch</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id keys_to_fetch'>keys_to_fetch</span>
    <span class='id fixtures'>fixtures</span> <span class='op'>=</span> <span class='id cache_for_connection'>cache_for_connection</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='rparen'>)</span><span class='period'>.</span><span class='id values_at'>values_at</span><span class='lparen'>(</span><span class='op'>*</span><span class='id keys_to_fetch'>keys_to_fetch</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id fixtures'>fixtures</span> <span class='op'>=</span> <span class='id cache_for_connection'>cache_for_connection</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='rparen'>)</span><span class='period'>.</span><span class='id values'>values</span>
  <span class='kw'>end</span>
  <span class='id fixtures'>fixtures</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id fixtures'>fixtures</span> <span class='op'>:</span> <span class='id fixtures'>fixtures</span><span class='period'>.</span><span class='id first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_fixtures-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>create_fixtures</strong>(fixtures_directory, table_names, class_names = {}) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 506</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id create_fixtures'>create_fixtures</span><span class='lparen'>(</span><span class='id fixtures_directory'>fixtures_directory</span><span class='comma'>,</span> <span class='id table_names'>table_names</span><span class='comma'>,</span> <span class='id class_names'>class_names</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id table_names'>table_names</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id table_names'>table_names</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span> <span class='id n'>n</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='rbrace'>}</span>
  <span class='id table_names'>table_names</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span> <span class='id class_names'>class_names</span><span class='lbracket'>[</span><span class='id n'>n</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id n'>n</span><span class='period'>.</span><span class='id classify'>classify</span> <span class='kw'>if</span> <span class='id n'>n</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id connection'>connection</span>  <span class='op'>=</span> <span class='id block_given?'>block_given?</span> <span class='op'>?</span> <span class='kw'>yield</span> <span class='op'>:</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span>

  <span class='id table_names_to_fetch'>table_names_to_fetch</span> <span class='op'>=</span> <span class='id table_names'>table_names</span><span class='period'>.</span><span class='id reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id table_name'>table_name</span><span class='op'>|</span> <span class='id fixture_is_cached?'>fixture_is_cached?</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='rparen'>)</span> <span class='rbrace'>}</span>

  <span class='kw'>unless</span> <span class='id table_names_to_fetch'>table_names_to_fetch</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id silence'>silence</span> <span class='kw'>do</span>
      <span class='id connection'>connection</span><span class='period'>.</span><span class='id disable_referential_integrity'>disable_referential_integrity</span> <span class='kw'>do</span>
        <span class='id fixtures_map'>fixtures_map</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>

        <span class='id fixtures'>fixtures</span> <span class='op'>=</span> <span class='id table_names_to_fetch'>table_names_to_fetch</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id table_name'>table_name</span><span class='op'>|</span>
          <span class='id fixtures_map'>fixtures_map</span><span class='lbracket'>[</span><span class='id table_name'>table_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Fixtures</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id class_names'>class_names</span><span class='lbracket'>[</span><span class='id table_name'>table_name</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id fixtures_directory'>fixtures_directory</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='rparen'>)</span><span class='rparen'>)</span>
        <span class='kw'>end</span>

        <span class='id all_loaded_fixtures'>all_loaded_fixtures</span><span class='period'>.</span><span class='id update'>update</span><span class='lparen'>(</span><span class='id fixtures_map'>fixtures_map</span><span class='rparen'>)</span>

        <span class='id connection'>connection</span><span class='period'>.</span><span class='id transaction'>transaction</span><span class='lparen'>(</span><span class='symbol'>:requires_new</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
          <span class='id fixtures'>fixtures</span><span class='period'>.</span><span class='id reverse'>reverse</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id fixture'>fixture</span><span class='op'>|</span> <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id delete_existing_fixtures'>delete_existing_fixtures</span> <span class='rbrace'>}</span>
          <span class='id fixtures'>fixtures</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id fixture'>fixture</span><span class='op'>|</span> <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id insert_fixtures'>insert_fixtures</span> <span class='rbrace'>}</span>

          <span class='comment'># Cap primary key sequences to max(pk).
</span>          <span class='kw'>if</span> <span class='id connection'>connection</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:reset_pk_sequence!</span><span class='rparen'>)</span>
            <span class='id table_names'>table_names</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id table_name'>table_name</span><span class='op'>|</span>
              <span class='id connection'>connection</span><span class='period'>.</span><span class='id reset_pk_sequence!'>reset_pk_sequence!</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>

        <span class='id cache_fixtures'>cache_fixtures</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id fixtures_map'>fixtures_map</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id cached_fixtures'>cached_fixtures</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_names'>table_names</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fixture_is_cached?-class_method">
  
    + (<tt>Boolean</tt>) <strong>fixture_is_cached?</strong>(connection, table_name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


465
466
467</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 465</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id fixture_is_cached?'>fixture_is_cached?</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='rparen'>)</span>
  <span class='id cache_for_connection'>cache_for_connection</span><span class='lparen'>(</span><span class='id connection'>connection</span><span class='rparen'>)</span><span class='lbracket'>[</span><span class='id table_name'>table_name</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="identify-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>identify</strong>(label) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a consistent, platform-independent identifier for <tt>label</tt>.
Identifiers are positive integers less than 2^32.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


545
546
547</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 545</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identify'>identify</span><span class='lparen'>(</span><span class='id label'>label</span><span class='rparen'>)</span>
  <span class='const'>Zlib</span><span class='period'>.</span><span class='id crc32'>crc32</span><span class='lparen'>(</span><span class='id label'>label</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span> <span class='op'>%</span> <span class='const'>MAX_ID</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="instantiate_all_loaded_fixtures-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>instantiate_all_loaded_fixtures</strong>(object, load_instances = true) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 497</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id instantiate_all_loaded_fixtures'>instantiate_all_loaded_fixtures</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id load_instances'>load_instances</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id all_loaded_fixtures'>all_loaded_fixtures</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id fixtures'>fixtures</span><span class='op'>|</span>
    <span class='const'>Fixtures</span><span class='period'>.</span><span class='id instantiate_fixtures'>instantiate_fixtures</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id fixtures'>fixtures</span><span class='comma'>,</span> <span class='id load_instances'>load_instances</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="instantiate_fixtures-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>instantiate_fixtures</strong>(object, table_name, fixtures, load_instances = true) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


482
483
484
485
486
487
488
489
490
491
492
493
494
495</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 482</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id instantiate_fixtures'>instantiate_fixtures</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id table_name'>table_name</span><span class='comma'>,</span> <span class='id fixtures'>fixtures</span><span class='comma'>,</span> <span class='id load_instances'>load_instances</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id object'>object</span><span class='period'>.</span><span class='id instance_variable_set'>instance_variable_set</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id table_name'>table_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id fixtures'>fixtures</span>
  <span class='kw'>if</span> <span class='id load_instances'>load_instances</span>
    <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id silence'>silence</span> <span class='kw'>do</span>
      <span class='id fixtures'>fixtures</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id fixture'>fixture</span><span class='op'>|</span>
        <span class='kw'>begin</span>
          <span class='id object'>object</span><span class='period'>.</span><span class='id instance_variable_set'>instance_variable_set</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>@</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id find'>find</span>
        <span class='kw'>rescue</span> <span class='const'>FixtureClassNotFound</span>
          <span class='kw'>nil</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_cache-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_cache</strong>(connection = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


455
456
457
458</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 455</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id reset_cache'>reset_cache</span><span class='lparen'>(</span><span class='id connection'>connection</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id connection'>connection</span> <span class='op'>||=</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id connection'>connection</span>
  <span class='cvar'>@@all_cached_fixtures</span><span class='lbracket'>[</span><span class='id connection'>connection</span><span class='period'>.</span><span class='id object_id'>object_id</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="delete_existing_fixtures-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete_existing_fixtures</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


562
563
564</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 562</span>

<span class='kw'>def</span> <span class='id delete_existing_fixtures'>delete_existing_fixtures</span>
  <span class='ivar'>@connection</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>DELETE FROM </span><span class='embexpr_beg'>#{</span><span class='ivar'>@connection</span><span class='period'>.</span><span class='id quote_table_name'>quote_table_name</span><span class='lparen'>(</span><span class='id table_name'>table_name</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Fixture Delete</span><span class='tstring_end'>'</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="insert_fixtures-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>insert_fixtures</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589
590
591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616
617
618
619
620
621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645
646
647
648
649
650
651
652
653
654</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activerecord/lib/active_record/fixtures.rb', line 566</span>

<span class='kw'>def</span> <span class='id insert_fixtures'>insert_fixtures</span>
  <span class='id now'>now</span> <span class='op'>=</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span><span class='period'>.</span><span class='id default_timezone'>default_timezone</span> <span class='op'>==</span> <span class='symbol'>:utc</span> <span class='op'>?</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id utc'>utc</span> <span class='op'>:</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span>
  <span class='id now'>now</span> <span class='op'>=</span> <span class='id now'>now</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='lparen'>(</span><span class='symbol'>:db</span><span class='rparen'>)</span>

  <span class='comment'># allow a standard key to be used for doing defaults in YAML
</span>  <span class='kw'>if</span> <span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DEFAULTS</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id assoc'>assoc</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>DEFAULTS</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># track any join tables we need to insert later
</span>  <span class='id habtm_fixtures'>habtm_fixtures</span> <span class='op'>=</span> <span class='const'>Hash</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id h'>h</span><span class='comma'>,</span> <span class='id habtm'>habtm</span><span class='op'>|</span>
    <span class='id h'>h</span><span class='lbracket'>[</span><span class='id habtm'>habtm</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>HabtmFixtures</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='ivar'>@connection</span><span class='comma'>,</span> <span class='id habtm'>habtm</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:join_table</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id label'>label</span><span class='comma'>,</span> <span class='id fixture'>fixture</span><span class='op'>|</span>
    <span class='id row'>row</span> <span class='op'>=</span> <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id to_hash'>to_hash</span>

    <span class='kw'>if</span> <span class='id model_class'>model_class</span> <span class='op'>&amp;&amp;</span> <span class='id model_class'>model_class</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
      <span class='comment'># fill in timestamp columns if they aren't specified and the model is set to record_timestamps
</span>      <span class='kw'>if</span> <span class='id model_class'>model_class</span><span class='period'>.</span><span class='id record_timestamps'>record_timestamps</span>
        <span class='id timestamp_column_names'>timestamp_column_names</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span>
          <span class='id row'>row</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id now'>now</span> <span class='kw'>unless</span> <span class='id row'>row</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>

      <span class='comment'># interpolate the fixture label
</span>      <span class='id row'>row</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id value'>value</span><span class='op'>|</span>
        <span class='id row'>row</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id label'>label</span> <span class='kw'>if</span> <span class='id value'>value</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$LABEL</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>

      <span class='comment'># generate a primary key if necessary
</span>      <span class='kw'>if</span> <span class='id has_primary_key_column?'>has_primary_key_column?</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id row'>row</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id primary_key_name'>primary_key_name</span><span class='rparen'>)</span>
        <span class='id row'>row</span><span class='lbracket'>[</span><span class='id primary_key_name'>primary_key_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Fixtures</span><span class='period'>.</span><span class='id identify'>identify</span><span class='lparen'>(</span><span class='id label'>label</span><span class='rparen'>)</span>
      <span class='kw'>end</span>

      <span class='comment'># If STI is used, find the correct subclass for association reflection
</span>      <span class='id reflection_class'>reflection_class</span> <span class='op'>=</span>
        <span class='kw'>if</span> <span class='id row'>row</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id inheritance_column_name'>inheritance_column_name</span><span class='rparen'>)</span>
          <span class='id row'>row</span><span class='lbracket'>[</span><span class='id inheritance_column_name'>inheritance_column_name</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id constantize'>constantize</span> <span class='kw'>rescue</span> <span class='id model_class'>model_class</span>
        <span class='kw'>else</span>
          <span class='id model_class'>model_class</span>
        <span class='kw'>end</span>

      <span class='id reflection_class'>reflection_class</span><span class='period'>.</span><span class='id reflect_on_all_associations'>reflect_on_all_associations</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id association'>association</span><span class='op'>|</span>
        <span class='kw'>case</span> <span class='id association'>association</span><span class='period'>.</span><span class='id macro'>macro</span>
        <span class='kw'>when</span> <span class='symbol'>:belongs_to</span>
          <span class='comment'># Do not replace association name with association foreign key if they are named the same
</span>          <span class='id fk_name'>fk_name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id association'>association</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:foreign_key</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id association'>association</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>_id</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>

          <span class='kw'>if</span> <span class='id association'>association</span><span class='period'>.</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span> <span class='op'>!=</span> <span class='id fk_name'>fk_name</span> <span class='op'>&amp;&amp;</span> <span class='id value'>value</span> <span class='op'>=</span> <span class='id row'>row</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id association'>association</span><span class='period'>.</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
            <span class='kw'>if</span> <span class='id association'>association</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:polymorphic</span><span class='rbracket'>]</span>
              <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id sub!'>sub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*\(([^\)]*)\)\s*$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
                <span class='id target_type'>target_type</span> <span class='op'>=</span> <span class='backref'>$1</span>
                <span class='id target_type_name'>target_type_name</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id association'>association</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:foreign_type</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id association'>association</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>_type</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span>

                <span class='comment'># support polymorphic belongs_to as &quot;label (Type)&quot;
</span>                <span class='id row'>row</span><span class='lbracket'>[</span><span class='id target_type_name'>target_type_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id target_type'>target_type</span>
              <span class='kw'>end</span>
            <span class='kw'>end</span>

            <span class='id row'>row</span><span class='lbracket'>[</span><span class='id fk_name'>fk_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Fixtures</span><span class='period'>.</span><span class='id identify'>identify</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span>
          <span class='kw'>end</span>
        <span class='kw'>when</span> <span class='symbol'>:has_and_belongs_to_many</span>
          <span class='kw'>if</span> <span class='lparen'>(</span><span class='id targets'>targets</span> <span class='op'>=</span> <span class='id row'>row</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='id association'>association</span><span class='period'>.</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='rparen'>)</span>
            <span class='id targets'>targets</span> <span class='op'>=</span> <span class='id targets'>targets</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id targets'>targets</span> <span class='op'>:</span> <span class='id targets'>targets</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s*,\s*</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>
            <span class='id join_fixtures'>join_fixtures</span> <span class='op'>=</span> <span class='id habtm_fixtures'>habtm_fixtures</span><span class='lbracket'>[</span><span class='id association'>association</span><span class='rbracket'>]</span>

            <span class='id targets'>targets</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id target'>target</span><span class='op'>|</span>
              <span class='id join_fixtures'>join_fixtures</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id label'>label</span><span class='rbrace'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id target'>target</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Fixture</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span>
                <span class='lbrace'>{</span> <span class='id association'>association</span><span class='period'>.</span><span class='id primary_key_name'>primary_key_name</span> <span class='op'>=&gt;</span> <span class='id row'>row</span><span class='lbracket'>[</span><span class='id primary_key_name'>primary_key_name</span><span class='rbracket'>]</span><span class='comma'>,</span>
                  <span class='id association'>association</span><span class='period'>.</span><span class='id association_foreign_key'>association_foreign_key</span> <span class='op'>=&gt;</span> <span class='const'>Fixtures</span><span class='period'>.</span><span class='id identify'>identify</span><span class='lparen'>(</span><span class='id target'>target</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='comma'>,</span>
                <span class='kw'>nil</span><span class='comma'>,</span> <span class='ivar'>@connection</span><span class='rparen'>)</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='ivar'>@connection</span><span class='period'>.</span><span class='id insert_fixture'>insert_fixture</span><span class='lparen'>(</span><span class='id fixture'>fixture</span><span class='comma'>,</span> <span class='ivar'>@table_name</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='comment'># insert any HABTM join tables we discovered
</span>  <span class='id habtm_fixtures'>habtm_fixtures</span><span class='period'>.</span><span class='id values'>values</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id fixture'>fixture</span><span class='op'>|</span>
    <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id delete_existing_fixtures'>delete_existing_fixtures</span>
    <span class='id fixture'>fixture</span><span class='period'>.</span><span class='id insert_fixtures'>insert_fixtures</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:27 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>