<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveModel::Errors</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../ActiveModel.html" title="ActiveModel (module)">ActiveModel</a></span></span>
     &raquo; 
    <span class="title">Errors</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveModel::Errors
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../ActiveSupport/OrderedHash.html" title="ActiveSupport::OrderedHash (class)">ActiveSupport::OrderedHash</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></li>
          
            <li class="next"><span class='object_link'><a href="../ActiveSupport/OrderedHash.html" title="ActiveSupport::OrderedHash (class)">ActiveSupport::OrderedHash</a></span></li>
          
            <li class="next">ActiveModel::Errors</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="DeprecatedErrorMethods.html" title="ActiveModel::DeprecatedErrorMethods (module)">DeprecatedErrorMethods</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">activemodel/lib/active_model/errors.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h2>Active Model Errors</h2>
<p>
Provides a modified <tt>OrderedHash</tt> that you can include in your
object for handling error messages and interacting with Action Pack
helpers.
</p>
<p>
A minimal implementation could be:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Person</span>

    <span class='comment'># Required dependency for ActiveModel::Errors
</span>    <span class='id extend'>extend</span> <span class='const'>ActiveModel</span><span class='op'>::</span><span class='const'>Naming</span>

    <span class='kw'>def</span> <span class='id initialize'>initialize</span>
      <span class='ivar'>@errors</span> <span class='op'>=</span> <span class='const'>ActiveModel</span><span class='op'>::</span><span class='const'>Errors</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id attr_accessor'>attr_accessor</span> <span class='symbol'>:name</span>
    <span class='id attr_reader'>attr_reader</span>   <span class='symbol'>:errors</span>

    <span class='kw'>def</span> <span class='id validate!'>validate!</span>
      <span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can not be nil</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id name'>name</span> <span class='op'>==</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='comment'># The following methods are needed to be minimally implemented
</span>
    <span class='kw'>def</span> <span class='id read_attribute_for_validation'>read_attribute_for_validation</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
      <span class='id send'>send</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='const'>Person</span><span class='period'>.</span><span class='id human_attribute_name'>human_attribute_name</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
      <span class='id attr'>attr</span>
    <span class='kw'>end</span>

    <span class='kw'>def</span> <span class='const'>Person</span><span class='period'>.</span><span class='id lookup_ancestors'>lookup_ancestors</span>
      <span class='lbracket'>[</span><span class='kw'>self</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>

  <span class='kw'>end</span>
</pre>
<p>
The last three methods are required in your object for Errors to be able to
generate error messages correctly and also handle multiple languages.  Of
course, if you extend your object with ActiveModel::Translations you will
not need to implement the last two.  Likewise, using
ActiveModel::Validations will handle the validation related methods for
you.
</p>
<p>
The above allows you to do:
</p>
<pre class="code">
  <span class='id p'>p</span> <span class='op'>=</span> <span class='const'>Person</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id validate!'>validate!</span>             <span class='comment'># =&gt; [&quot;can not be nil&quot;]
</span>  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id full_messages'>full_messages</span>  <span class='comment'># =&gt; [&quot;name can not be nil&quot;]
</span>  <span class='comment'># etc..</span></pre>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="../ActiveResource/Errors.html" title="ActiveResource::Errors (class)">ActiveResource::Errors</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="CALLBACKS_OPTIONS-constant" class="">CALLBACKS_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='comma'>,</span> <span class='symbol'>:unless</span><span class='comma'>,</span> <span class='symbol'>:on</span><span class='comma'>,</span> <span class='symbol'>:allow_nil</span><span class='comma'>,</span> <span class='symbol'>:allow_blank</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(attribute) </a>
    

    
      (also: #get)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
When passed a symbol or a name of a method, returns an array of errors for
the method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(attribute, error) </a>
    

    
      (also: #set)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds to the supplied attribute the supplied error message.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">- (Object) <strong>add</strong>(attribute, message = nil, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds <tt>message</tt> to the error messages on <tt>attribute</tt>, which
will be returned on a call to <tt>on(attribute)</tt> for the same
attribute.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_on_blank-instance_method" title="#add_on_blank (instance method)">- (Object) <strong>add_on_blank</strong>(attributes, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is blank (using Object#blank?).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_on_empty-instance_method" title="#add_on_empty (instance method)">- (Object) <strong>add_on_empty</strong>(attributes, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is empty.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#as_json-instance_method" title="#as_json (instance method)">- (Object) <strong>as_json</strong>(options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an ActiveSupport::OrderedHash that can be used as the JSON
representation for this object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count-instance_method" title="#count (instance method)">- (Object) <strong>count</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the number of error messages.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#each-instance_method" title="#each (instance method)">- (Object) <strong>each</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Iterates through each error key, value pair in the error messages hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">- (Boolean) <strong>empty?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if there are any errors, false if not.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#full_messages-instance_method" title="#full_messages (instance method)">- (Object) <strong>full_messages</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns all the full error messages in an array.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#generate_message-instance_method" title="#generate_message (instance method)">- (Object) <strong>generate_message</strong>(attribute, type = :invalid, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Translates an error message in its default scope
(<tt>activemodel.errors.messages</tt>).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Errors) <strong>initialize</strong>(base) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Pass in the instance of the object that is using the errors object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#size-instance_method" title="#size (instance method)">- (Object) <strong>size</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the number of error messages.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_a-instance_method" title="#to_a (instance method)">- (Object) <strong>to_a</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of error messages, with the attribute name included.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_xml-instance_method" title="#to_xml (instance method)">- (Object) <strong>to_xml</strong>(options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an xml formatted representation of the Errors hash.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="DeprecatedErrorMethods.html" title="ActiveModel::DeprecatedErrorMethods (module)">DeprecatedErrorMethods</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="DeprecatedErrorMethods.html#add_to_base-instance_method" title="ActiveModel::DeprecatedErrorMethods#add_to_base (method)">#add_to_base</a></span>, <span class='object_link'><a href="DeprecatedErrorMethods.html#each_full-instance_method" title="ActiveModel::DeprecatedErrorMethods#each_full (method)">#each_full</a></span>, <span class='object_link'><a href="DeprecatedErrorMethods.html#invalid%3F-instance_method" title="ActiveModel::DeprecatedErrorMethods#invalid? (method)">#invalid?</a></span>, <span class='object_link'><a href="DeprecatedErrorMethods.html#on-instance_method" title="ActiveModel::DeprecatedErrorMethods#on (method)">#on</a></span>, <span class='object_link'><a href="DeprecatedErrorMethods.html#on_base-instance_method" title="ActiveModel::DeprecatedErrorMethods#on_base (method)">#on_base</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../ActiveSupport/OrderedHash.html" title="ActiveSupport::OrderedHash (class)">ActiveSupport::OrderedHash</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../ActiveSupport/OrderedHash.html#%5B%5D-class_method" title="ActiveSupport::OrderedHash.[] (method)">[]</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#clear-instance_method" title="ActiveSupport::OrderedHash#clear (method)">#clear</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#delete-instance_method" title="ActiveSupport::OrderedHash#delete (method)">#delete</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#delete_if-instance_method" title="ActiveSupport::OrderedHash#delete_if (method)">#delete_if</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#each_key-instance_method" title="ActiveSupport::OrderedHash#each_key (method)">#each_key</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#each_value-instance_method" title="ActiveSupport::OrderedHash#each_value (method)">#each_value</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#initialize_copy-instance_method" title="ActiveSupport::OrderedHash#initialize_copy (method)">#initialize_copy</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#inspect-instance_method" title="ActiveSupport::OrderedHash#inspect (method)">#inspect</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#invert-instance_method" title="ActiveSupport::OrderedHash#invert (method)">#invert</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#keys-instance_method" title="ActiveSupport::OrderedHash#keys (method)">#keys</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#merge-instance_method" title="ActiveSupport::OrderedHash#merge (method)">#merge</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#merge%21-instance_method" title="ActiveSupport::OrderedHash#merge! (method)">#merge!</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#reject-instance_method" title="ActiveSupport::OrderedHash#reject (method)">#reject</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#reject%21-instance_method" title="ActiveSupport::OrderedHash#reject! (method)">#reject!</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#replace-instance_method" title="ActiveSupport::OrderedHash#replace (method)">#replace</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#shift-instance_method" title="ActiveSupport::OrderedHash#shift (method)">#shift</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#to_hash-instance_method" title="ActiveSupport::OrderedHash#to_hash (method)">#to_hash</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#to_yaml-instance_method" title="ActiveSupport::OrderedHash#to_yaml (method)">#to_yaml</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#to_yaml_type-instance_method" title="ActiveSupport::OrderedHash#to_yaml_type (method)">#to_yaml_type</a></span>, <span class='object_link'><a href="../ActiveSupport/OrderedHash.html#values-instance_method" title="ActiveSupport::OrderedHash#values (method)">#values</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods inherited from <span class='object_link'><a href="../Hash.html" title="Hash (class)">Hash</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../Hash.html#assert_valid_keys-instance_method" title="Hash#assert_valid_keys (method)">#assert_valid_keys</a></span>, <span class='object_link'><a href="../Hash.html#deep_merge-instance_method" title="Hash#deep_merge (method)">#deep_merge</a></span>, <span class='object_link'><a href="../Hash.html#deep_merge%21-instance_method" title="Hash#deep_merge! (method)">#deep_merge!</a></span>, <span class='object_link'><a href="../Hash.html#diff-instance_method" title="Hash#diff (method)">#diff</a></span>, <span class='object_link'><a href="../Hash.html#encode_json-instance_method" title="Hash#encode_json (method)">#encode_json</a></span>, <span class='object_link'><a href="../Hash.html#except-instance_method" title="Hash#except (method)">#except</a></span>, <span class='object_link'><a href="../Hash.html#except%21-instance_method" title="Hash#except! (method)">#except!</a></span>, <span class='object_link'><a href="../Hash.html#extract%21-instance_method" title="Hash#extract! (method)">#extract!</a></span>, <span class='object_link'><a href="../Hash.html#extractable_options%3F-instance_method" title="Hash#extractable_options? (method)">#extractable_options?</a></span>, <span class='object_link'><a href="../Hash.html#from_xml-class_method" title="Hash.from_xml (method)">from_xml</a></span>, <span class='object_link'><a href="../Hash.html#reverse_merge-instance_method" title="Hash#reverse_merge (method)">#reverse_merge</a></span>, <span class='object_link'><a href="../Hash.html#reverse_merge%21-instance_method" title="Hash#reverse_merge! (method)">#reverse_merge!</a></span>, <span class='object_link'><a href="../Hash.html#slice-instance_method" title="Hash#slice (method)">#slice</a></span>, <span class='object_link'><a href="../Hash.html#slice%21-instance_method" title="Hash#slice! (method)">#slice!</a></span>, <span class='object_link'><a href="../Hash.html#stringify_keys-instance_method" title="Hash#stringify_keys (method)">#stringify_keys</a></span>, <span class='object_link'><a href="../Hash.html#stringify_keys%21-instance_method" title="Hash#stringify_keys! (method)">#stringify_keys!</a></span>, <span class='object_link'><a href="../Hash.html#symbolize_keys-instance_method" title="Hash#symbolize_keys (method)">#symbolize_keys</a></span>, <span class='object_link'><a href="../Hash.html#symbolize_keys%21-instance_method" title="Hash#symbolize_keys! (method)">#symbolize_keys!</a></span>, <span class='object_link'><a href="../Hash.html#to_param-instance_method" title="Hash#to_param (method)">#to_param</a></span>, <span class='object_link'><a href="../Hash.html#with_indifferent_access-instance_method" title="Hash#with_indifferent_access (method)">#with_indifferent_access</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ActiveModel::Errors (class)">Errors</a></span></tt>) <strong>initialize</strong>(base) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Pass in the instance of the object that is using the errors object.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Person</span>
    <span class='kw'>def</span> <span class='id initialize'>initialize</span>
      <span class='ivar'>@errors</span> <span class='op'>=</span> <span class='const'>ActiveModel</span><span class='op'>::</span><span class='const'>Errors</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 75</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id base'>base</span><span class='rparen'>)</span>
  <span class='ivar'>@base</span> <span class='op'>=</span> <span class='id base'>base</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(attribute) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='get-instance_method'>get</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
When passed a symbol or a name of a method, returns an array of errors for
the method.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>   <span class='comment'># =&gt; [&quot;can not be nil&quot;]
</span>  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>  <span class='comment'># =&gt; [&quot;can not be nil&quot;]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 88</span>

<span class='kw'>def</span> <span class='op'>[]</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span>
  <span class='id get'>get</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id set'>set</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]=</strong>(attribute, error) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='set-instance_method'>set</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds to the supplied attribute the supplied error message.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be set</span><span class='tstring_end'>&quot;</span></span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span> <span class='comment'># =&gt; ['must be set']</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 96</span>

<span class='kw'>def</span> <span class='op'>[]=</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id error'>error</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='lbracket'>[</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id error'>error</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add</strong>(attribute, message = nil, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds <tt>message</tt> to the error messages on <tt>attribute</tt>, which
will be returned on a call to <tt>on(attribute)</tt> for the same
attribute. More than one error can be added to the same <tt>attribute</tt>
in which case an array will be returned on a call to
<tt>on(attribute)</tt>. If no <tt>message</tt> is supplied,
<tt>:invalid</tt> is assumed.
</p>
<p>
If <tt>message</tt> is a symbol, it will be translated using the
appropriate scope (see <tt>translate_error</tt>). If <tt>message</tt> is a
proc, it will be called, allowing for things like <tt>Time.now</tt> to be
used within an error.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 180</span>

<span class='kw'>def</span> <span class='id add'>add</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id message'>message</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id message'>message</span> <span class='op'>||=</span> <span class='symbol'>:invalid</span>

  <span class='kw'>if</span> <span class='id message'>message</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>
    <span class='id message'>message</span> <span class='op'>=</span> <span class='id generate_message'>generate_message</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id message'>message</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id except'>except</span><span class='lparen'>(</span><span class='op'>*</span><span class='const'>CALLBACKS_OPTIONS</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id message'>message</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Proc</span><span class='rparen'>)</span>
    <span class='id message'>message</span> <span class='op'>=</span> <span class='id message'>message</span><span class='period'>.</span><span class='id call'>call</span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='lbracket'>[</span><span class='id attribute'>attribute</span><span class='rbracket'>]</span> <span class='op'>&lt;&lt;</span> <span class='id message'>message</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_on_blank-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_on_blank</strong>(attributes, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is blank (using Object#blank?).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211
212
213
214
215
216
217
218
219
220
221</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 209</span>

<span class='kw'>def</span> <span class='id add_on_blank'>add_on_blank</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id options'>options</span> <span class='rbrace'>}</span>
    <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id warn'>warn</span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ActiveModel::Errors#add_on_blank(attributes, custom_message) has been deprecated.\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Instead of passing a custom_message pass an options Hash { :message =&gt; custom_message }.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='lbracket'>[</span><span class='id attributes'>attributes</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span>
    <span class='id value'>value</span> <span class='op'>=</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:read_attribute_for_validation</span><span class='comma'>,</span> <span class='id attribute'>attribute</span><span class='rparen'>)</span>
    <span class='id add'>add</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='symbol'>:blank</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id blank?'>blank?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_on_empty-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_on_empty</strong>(attributes, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Will add an error message to each of the attributes in <tt>attributes</tt>
that is empty.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


193
194
195
196
197
198
199
200
201
202
203
204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 193</span>

<span class='kw'>def</span> <span class='id add_on_empty'>add_on_empty</span><span class='lparen'>(</span><span class='id attributes'>attributes</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id options'>options</span> <span class='rbrace'>}</span>
    <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id warn'>warn</span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ActiveModel::Errors#add_on_empty(attributes, custom_message) has been deprecated.\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Instead of passing a custom_message pass an options Hash { :message =&gt; custom_message }.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='lbracket'>[</span><span class='id attributes'>attributes</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span>
    <span class='id value'>value</span> <span class='op'>=</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:read_attribute_for_validation</span><span class='comma'>,</span> <span class='id attribute'>attribute</span><span class='rparen'>)</span>
    <span class='id is_empty'>is_empty</span> <span class='op'>=</span> <span class='id value'>value</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:empty?</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id value'>value</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>:</span> <span class='kw'>false</span>
    <span class='id add'>add</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='symbol'>:empty</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id value'>value</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>||</span> <span class='id is_empty'>is_empty</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="as_json-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>as_json</strong>(options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an ActiveSupport::OrderedHash that can be used as the JSON
representation for this object.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 169</span>

<span class='kw'>def</span> <span class='id as_json'>as_json</span><span class='lparen'>(</span><span class='id options'>options</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="count-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>count</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the number of error messages.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id count'>count</span> <span class='comment'># =&gt; 1
</span>  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be specified</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id count'>count</span> <span class='comment'># =&gt; 2</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 144</span>

<span class='kw'>def</span> <span class='id count'>count</span>
  <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="each-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>each</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Iterates through each error key, value pair in the error messages hash.
Yields the attribute and the error for that attribute.  If the attribute
has more than one error message, yields once for each error message.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id errors_array'>errors_array</span><span class='op'>|</span>
    <span class='comment'># Will yield :name and &quot;can't be blank&quot;
</span>  <span class='kw'>end</span>

  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be specified</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id errors_array'>errors_array</span><span class='op'>|</span>
    <span class='comment'># Will yield :name and &quot;can't be blank&quot;
</span>    <span class='comment'># then yield :name and &quot;must be specified&quot;
</span>  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


114
115
116
117
118</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 114</span>

<span class='kw'>def</span> <span class='id each'>each</span>
  <span class='id each_key'>each_key</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span>
    <span class='kw'>self</span><span class='lbracket'>[</span><span class='id attribute'>attribute</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id error'>error</span><span class='op'>|</span> <span class='kw'>yield</span> <span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id error'>error</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="empty?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>empty?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if there are any errors, false if not.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 149</span>

<span class='kw'>def</span> <span class='id empty?'>empty?</span>
  <span class='id all?'>all?</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id k'>k</span><span class='comma'>,</span> <span class='id v'>v</span><span class='op'>|</span> <span class='id v'>v</span> <span class='op'>&amp;&amp;</span> <span class='id v'>v</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="full_messages-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>full_messages</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns all the full error messages in an array.
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Company</span>
    <span class='id validates_presence_of'>validates_presence_of</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:address</span><span class='comma'>,</span> <span class='symbol'>:email</span>
    <span class='id validates_length_of'>validates_length_of</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:in</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='op'>..</span><span class='int'>30</span>
  <span class='kw'>end</span>

  <span class='id company'>company</span> <span class='op'>=</span> <span class='const'>Company</span><span class='period'>.</span><span class='id create'>create</span><span class='lparen'>(</span><span class='symbol'>:address</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>123 First St.</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id company'>company</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id full_messages'>full_messages</span> <span class='comment'># =&gt;
</span>    <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name is too short (minimum is 5 characters)</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Name can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Address can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 233</span>

<span class='kw'>def</span> <span class='id full_messages'>full_messages</span>
  <span class='id full_messages'>full_messages</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>

  <span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id messages'>messages</span><span class='op'>|</span>
    <span class='id messages'>messages</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id messages'>messages</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id messages'>messages</span><span class='period'>.</span><span class='id empty?'>empty?</span>

    <span class='kw'>if</span> <span class='id attribute'>attribute</span> <span class='op'>==</span> <span class='symbol'>:base</span>
      <span class='id messages'>messages</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span> <span class='id full_messages'>full_messages</span> <span class='op'>&lt;&lt;</span> <span class='id m'>m</span> <span class='rbrace'>}</span>
    <span class='kw'>else</span>
      <span class='id attr_name'>attr_name</span> <span class='op'>=</span> <span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id humanize'>humanize</span>
      <span class='id attr_name'>attr_name</span> <span class='op'>=</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id human_attribute_name'>human_attribute_name</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id attr_name'>attr_name</span><span class='rparen'>)</span>
      <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%{attribute} %{message}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:attribute</span> <span class='op'>=&gt;</span> <span class='id attr_name'>attr_name</span> <span class='rbrace'>}</span>

      <span class='id messages'>messages</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id m'>m</span><span class='op'>|</span>
        <span class='id full_messages'>full_messages</span> <span class='op'>&lt;&lt;</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id t'>t</span><span class='lparen'>(</span><span class='symbol'>:errors.format</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:message</span> <span class='op'>=&gt;</span> <span class='id m'>m</span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id full_messages'>full_messages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="generate_message-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>generate_message</strong>(attribute, type = :invalid, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Translates an error message in its default scope
(<tt>activemodel.errors.messages</tt>).
</p>
<p>
Error messages are first looked up in
<tt>models.MODEL.attributes.ATTRIBUTE.MESSAGE</tt>, if it&#8217;s not
there, it&#8217;s looked up in <tt>models.MODEL.MESSAGE</tt> and if that is
not there also, it returns the translation of the default message (e.g.
<tt>activemodel.errors.messages.MESSAGE</tt>). The translated model name,
translated attribute name and the value are available for interpolation.
</p>
<p>
When using inheritance in your models, it will check all the inherited
models too, but only if the model itself hasn&#8217;t been found. Say you
have <tt>class Admin &lt; User; end</tt> and you wanted the translation for
the <tt>:blank</tt> error <tt>message</tt> for the <tt>title</tt>
<tt>attribute</tt>, it looks for these translations:
</p>
<p>
<ol>
<li><tt>activemodel.errors.models.admin.attributes.title.blank</tt></li>
<li><tt>activemodel.errors.models.admin.blank</tt></li>
<li><tt>activemodel.errors.models.user.attributes.title.blank</tt></li>
<li><tt>activemodel.errors.models.user.blank</tt></li> <li>any default you
provided through the <tt>options</tt> hash (in the activemodel.errors
scope)</li> <li><tt>activemodel.errors.messages.blank</tt></li>
<li><tt>errors.attributes.title.blank</tt></li>
<li><tt>errors.messages.blank</tt></li> </ol>
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 281</span>

<span class='kw'>def</span> <span class='id generate_message'>generate_message</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='comma'>,</span> <span class='id type'>type</span> <span class='op'>=</span> <span class='symbol'>:invalid</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id type'>type</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:message</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Symbol</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:default</span><span class='rbracket'>]</span>
    <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Deprecation</span><span class='period'>.</span><span class='id warn'>warn</span> \
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Giving :default as validation option to errors.add has been deprecated.\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Please use :message instead.</span><span class='tstring_end'>&quot;</span></span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:message</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:default</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id lookup_ancestors'>lookup_ancestors</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id klass'>klass</span><span class='op'>|</span>
    <span class='lbracket'>[</span> <span class='symbol'>:#{</span><span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id i18n_scope'>i18n_scope</span><span class='rbrace'>}</span><span class='tstring_content'>.errors.models.</span><span class='embexpr_beg'>#{</span><span class='id klass'>klass</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id underscore'>underscore</span><span class='rbrace'>}</span><span class='tstring_content'>.attributes.</span><span class='embexpr_beg'>#{</span><span class='id attribute'>attribute</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
      <span class='symbol'>:#{</span><span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id i18n_scope'>i18n_scope</span><span class='rbrace'>}</span><span class='tstring_content'>.errors.models.</span><span class='embexpr_beg'>#{</span><span class='id klass'>klass</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id underscore'>underscore</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='rbracket'>]</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span> <span class='op'>&lt;&lt;</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:message</span><span class='rparen'>)</span>
  <span class='id defaults'>defaults</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:#{</span><span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id i18n_scope'>i18n_scope</span><span class='rbrace'>}</span><span class='tstring_content'>.errors.messages.</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id defaults'>defaults</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:errors.attributes.</span><span class='embexpr_beg'>#{</span><span class='id attribute'>attribute</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='id defaults'>defaults</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:errors.messages.</span><span class='embexpr_beg'>#{</span><span class='id type'>type</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>

  <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id compact!'>compact!</span>
  <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id flatten!'>flatten!</span>

  <span class='id key'>key</span> <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id shift'>shift</span>
  <span class='id value'>value</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id attribute'>attribute</span> <span class='op'>!=</span> <span class='symbol'>:base</span> <span class='op'>?</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='symbol'>:read_attribute_for_validation</span><span class='comma'>,</span> <span class='id attribute'>attribute</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='kw'>nil</span><span class='rparen'>)</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span>
    <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='id defaults'>defaults</span><span class='comma'>,</span>
    <span class='symbol'>:model</span> <span class='op'>=&gt;</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id model_name'>model_name</span><span class='period'>.</span><span class='id human'>human</span><span class='comma'>,</span>
    <span class='symbol'>:attribute</span> <span class='op'>=&gt;</span> <span class='ivar'>@base</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id human_attribute_name'>human_attribute_name</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span><span class='comma'>,</span>
    <span class='symbol'>:value</span> <span class='op'>=&gt;</span> <span class='id value'>value</span>
  <span class='rbrace'>}</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>

  <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="size-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>size</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the number of error messages.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id size'>size</span> <span class='comment'># =&gt; 1
</span>  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be specified</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id size'>size</span> <span class='comment'># =&gt; 2</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


126
127
128</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 126</span>

<span class='kw'>def</span> <span class='id size'>size</span>
  <span class='id values'>values</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id size'>size</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_a-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_a</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of error messages, with the attribute name included
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be specified</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id to_a'>to_a</span> <span class='comment'># =&gt; [&quot;name can't be blank&quot;, &quot;name must be specified&quot;]</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 135</span>

<span class='kw'>def</span> <span class='id to_a'>to_a</span>
  <span class='id full_messages'>full_messages</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="to_xml-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>to_xml</strong>(options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an xml formatted representation of the Errors hash.
</p>
<pre class="code">
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>can't be blank</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id add'>add</span><span class='lparen'>(</span><span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>must be specified</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id p'>p</span><span class='period'>.</span><span class='id errors'>errors</span><span class='period'>.</span><span class='id to_xml'>to_xml</span>
  <span class='comment'># =&gt;
</span>  <span class='comment'>#  &lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;UTF-8\&quot;?&gt;
</span>  <span class='comment'>#  &lt;errors&gt;
</span>  <span class='comment'>#    &lt;error&gt;name can't be blank&lt;/error&gt;
</span>  <span class='comment'>#    &lt;error&gt;name must be specified&lt;/error&gt;
</span>  <span class='comment'>#  &lt;/errors&gt;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activemodel/lib/active_model/errors.rb', line 164</span>

<span class='kw'>def</span> <span class='id to_xml'>to_xml</span><span class='lparen'>(</span><span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id to_a'>to_a</span><span class='period'>.</span><span class='id to_xml'>to_xml</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='symbol'>:root</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>errors</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:skip_types</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:19 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>