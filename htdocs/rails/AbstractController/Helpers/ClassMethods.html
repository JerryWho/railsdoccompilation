<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: AbstractController::Helpers::ClassMethods</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../AbstractController.html" title="AbstractController (module)">AbstractController</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="AbstractController::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">ClassMethods</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: AbstractController::Helpers::ClassMethods
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">actionpack/lib/abstract_controller/helpers.rb</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear_helpers-instance_method" title="#clear_helpers (instance method)">- (Object) <strong>clear_helpers</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Clears up all existing helpers in this class, only keeping the helper with
the same name as this class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#helper-instance_method" title="#helper (instance method)">- (Object) <strong>helper</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The <tt>helper</tt> class method can take a series of helper module names,
a block, or both.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#helper_method-instance_method" title="#helper_method (instance method)">- (Object) <strong>helper_method</strong>(*meths) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Declare a controller method as a helper.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherited-instance_method" title="#inherited (instance method)">- (Object) <strong>inherited</strong>(klass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
When a class is inherited, wrap its helper module in a new module.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="clear_helpers-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear_helpers</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Clears up all existing helpers in this class, only keeping the helper with
the same name as this class.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/abstract_controller/helpers.rb', line 106</span>

<span class='kw'>def</span> <span class='id clear_helpers'>clear_helpers</span>
  <span class='id inherited_helper_methods'>inherited_helper_methods</span> <span class='op'>=</span> <span class='id _helper_methods'>_helper_methods</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id _helpers'>_helpers</span> <span class='op'>=</span> <span class='const'>Module</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id _helper_methods'>_helper_methods</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id new'>new</span>

  <span class='id inherited_helper_methods'>inherited_helper_methods</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id meth'>meth</span><span class='op'>|</span> <span class='id helper_method'>helper_method</span> <span class='id meth'>meth</span> <span class='rbrace'>}</span>
  <span class='id default_helper_module!'>default_helper_module!</span> <span class='kw'>unless</span> <span class='id anonymous?'>anonymous?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="helper-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>helper</strong>(*args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The <tt>helper</tt> class method can take a series of helper module names,
a block, or both.
</p>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>*args</tt> - Module, Symbol, String, :all
</p>
</li>
<li><p>
<tt>block</tt> - A block defining helper methods
</p>
</li>
</ul>
<h4>Examples</h4>
<p>
When the argument is a module it will be included directly in the template
class.
</p>
<pre class="code">
  <span class='id helper'>helper</span> <span class='const'>FooHelper</span> <span class='comment'># =&gt; includes FooHelper
</span></pre>
<p>
When the argument is a string or symbol, the method will provide the
&#8220;_helper&#8221; suffix, require the file and include the module in
the template class.  The second form illustrates how to include custom
helpers when working with namespaced controllers, or other cases where the
file containing the helper definition is not in one of Rails&#8217;
standard load paths:
</p>
<pre class="code">
  <span class='id helper'>helper</span> <span class='symbol'>:foo</span>             <span class='comment'># =&gt; requires 'foo_helper' and includes FooHelper
</span>  <span class='id helper'>helper</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>resources/foo</span><span class='tstring_end'>'</span></span>  <span class='comment'># =&gt; requires 'resources/foo_helper' and includes Resources::FooHelper
</span></pre>
<p>
Additionally, the <tt>helper</tt> class method can receive and evaluate a
block, making the methods defined available to the template.
</p>
<pre class="code">
  <span class='comment'># One line
</span>  <span class='id helper'>helper</span> <span class='lbrace'>{</span> <span class='kw'>def</span> <span class='id hello'>hello</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello, world!</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>end</span> <span class='rbrace'>}</span>

  <span class='comment'># Multi-line
</span>  <span class='id helper'>helper</span> <span class='kw'>do</span>
    <span class='kw'>def</span> <span class='id foo'>foo</span><span class='lparen'>(</span><span class='id bar'>bar</span><span class='rparen'>)</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id bar'>bar</span><span class='rbrace'>}</span><span class='tstring_content'> is the very best</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
Finally, all the above styles can be mixed together, and the
<tt>helper</tt> method can be invoked with a mix of <tt>symbols</tt>,
<tt>strings</tt>, <tt>modules</tt> and blocks.
</p>
<pre class="code">
  <span class='id helper'>helper</span><span class='lparen'>(</span><span class='symbol'>:three</span><span class='comma'>,</span> <span class='const'>BlindHelper</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='kw'>def</span> <span class='id mice'>mice</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mice</span><span class='tstring_end'>'</span></span> <span class='kw'>end</span> <span class='rbrace'>}</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


96
97
98
99
100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/abstract_controller/helpers.rb', line 96</span>

<span class='kw'>def</span> <span class='id helper'>helper</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id modules_for_helpers'>modules_for_helpers</span><span class='lparen'>(</span><span class='id args'>args</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id mod'>mod</span><span class='op'>|</span>
    <span class='id add_template_helper'>add_template_helper</span><span class='lparen'>(</span><span class='id mod'>mod</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id _helpers'>_helpers</span><span class='period'>.</span><span class='id module_eval'>module_eval</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="helper_method-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>helper_method</strong>(*meths) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Declare a controller method as a helper. For example, the following makes
the <tt>current_user</tt> controller method available to the view:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>ApplicationController</span> <span class='op'>&lt;</span> <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id helper_method'>helper_method</span> <span class='symbol'>:current_user</span><span class='comma'>,</span> <span class='symbol'>:logged_in?</span>

    <span class='kw'>def</span> <span class='id current_user'>current_user</span>
      <span class='ivar'>@current_user</span> <span class='op'>||=</span> <span class='const'>User</span><span class='period'>.</span><span class='id find_by_id'>find_by_id</span><span class='lparen'>(</span><span class='id session'>session</span><span class='lbracket'>[</span><span class='symbol'>:user</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

     <span class='kw'>def</span> <span class='id logged_in?'>logged_in?</span>
       <span class='id current_user'>current_user</span> <span class='op'>!=</span> <span class='kw'>nil</span>
     <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
In a view:
</p>
<pre class="code">
 &lt;% if logged_in? -%&gt;Welcome, &lt;%= current_user.name %&gt;&lt;% end -%&gt;
</pre>
<h4>Parameters</h4>
<ul>
<li><p>
<tt>method[, method]</tt> - A name or names of a method on the controller
to be made available on the view.
</p>
</li>
</ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


48
49
50
51
52
53
54
55
56
57
58
59</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/abstract_controller/helpers.rb', line 48</span>

<span class='kw'>def</span> <span class='id helper_method'>helper_method</span><span class='lparen'>(</span><span class='op'>*</span><span class='id meths'>meths</span><span class='rparen'>)</span>
  <span class='id meths'>meths</span><span class='period'>.</span><span class='id flatten!'>flatten!</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id _helper_methods'>_helper_methods</span> <span class='op'>+=</span> <span class='id meths'>meths</span>

  <span class='id meths'>meths</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id meth'>meth</span><span class='op'>|</span>
    <span class='id _helpers'>_helpers</span><span class='period'>.</span><span class='id class_eval'>class_eval</span> <span class='heredoc_beg'>&lt;&lt;-ruby_eval</span><span class='tstring_content'>      def </span><span class='embexpr_beg'>#{</span><span class='id meth'>meth</span><span class='rbrace'>}</span><span class='tstring_content'>(*args, &amp;blk)
</span><span class='tstring_content'>        controller.send(%(</span><span class='embexpr_beg'>#{</span><span class='id meth'>meth</span><span class='rbrace'>}</span><span class='tstring_content'>), *args, &amp;blk)
      end
</span><span class='heredoc_end'>    ruby_eval
</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inherited-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>inherited</strong>(klass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
When a class is inherited, wrap its helper module in a new module. This
ensures that the parent class&#8217;s module can be changed independently
of the child class&#8217;s.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


21
22
23
24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/abstract_controller/helpers.rb', line 21</span>

<span class='kw'>def</span> <span class='id inherited'>inherited</span><span class='lparen'>(</span><span class='id klass'>klass</span><span class='rparen'>)</span>
  <span class='id helpers'>helpers</span> <span class='op'>=</span> <span class='id _helpers'>_helpers</span>
  <span class='id klass'>klass</span><span class='period'>.</span><span class='id _helpers'>_helpers</span> <span class='op'>=</span> <span class='const'>Module</span><span class='period'>.</span><span class='id new'>new</span> <span class='lbrace'>{</span> <span class='id include'>include</span> <span class='id helpers'>helpers</span> <span class='rbrace'>}</span>
  <span class='id klass'>klass</span><span class='period'>.</span><span class='id class_eval'>class_eval</span> <span class='lbrace'>{</span> <span class='id default_helper_module!'>default_helper_module!</span> <span class='kw'>unless</span> <span class='id anonymous?'>anonymous?</span> <span class='rbrace'>}</span>
  <span class='kw'>super</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:34 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>