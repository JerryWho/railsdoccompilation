  <div id="C00000578">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RouteTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003677&name=default_route" >default_route</a></li>
  <li><a href="index.html?a=M003675&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003676&name=slash_segment" >slash_segment</a></li>
  <li><a href="index.html?a=M003689&name=test_build_empty_query_string" >test_build_empty_query_string</a></li>
  <li><a href="index.html?a=M003690&name=test_build_query_string_with_nil_value" >test_build_query_string_with_nil_value</a></li>
  <li><a href="index.html?a=M003686&name=test_builder_complains_without_controller" >test_builder_complains_without_controller</a></li>
  <li><a href="index.html?a=M003692&name=test_convert_ints_build_query_string" >test_convert_ints_build_query_string</a></li>
  <li><a href="index.html?a=M003678&name=test_default_route_recognition" >test_default_route_recognition</a></li>
  <li><a href="index.html?a=M003680&name=test_default_route_should_include_default_action_when_id_present" >test_default_route_should_include_default_action_when_id_present</a></li>
  <li><a href="index.html?a=M003679&name=test_default_route_should_omit_default_action" >test_default_route_should_omit_default_action</a></li>
  <li><a href="index.html?a=M003682&name=test_default_route_should_uri_escape_pluses" >test_default_route_should_uri_escape_pluses</a></li>
  <li><a href="index.html?a=M003681&name=test_default_route_should_work_with_action_but_no_id" >test_default_route_should_work_with_action_but_no_id</a></li>
  <li><a href="index.html?a=M003685&name=test_defaults" >test_defaults</a></li>
  <li><a href="index.html?a=M003693&name=test_escape_spaces_build_query_string" >test_escape_spaces_build_query_string</a></li>
  <li><a href="index.html?a=M003695&name=test_escape_spaces_build_query_string_selected_keys" >test_escape_spaces_build_query_string_selected_keys</a></li>
  <li><a href="index.html?a=M003694&name=test_expand_array_build_query_string" >test_expand_array_build_query_string</a></li>
  <li><a href="index.html?a=M003683&name=test_matches_controller_and_action" >test_matches_controller_and_action</a></li>
  <li><a href="index.html?a=M003684&name=test_parameter_shell" >test_parameter_shell</a></li>
  <li><a href="index.html?a=M003688&name=test_significant_keys" >test_significant_keys</a></li>
  <li><a href="index.html?a=M003687&name=test_significant_keys_for_default_route" >test_significant_keys_for_default_route</a></li>
  <li><a href="index.html?a=M003691&name=test_simple_build_query_string" >test_simple_build_query_string</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M003677" class="method">
  <div id="M003677_title" class="title">
    <b>default_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003677_source')" id="l_M003677_source">show source</a> ]</p>
  <div id="M003677_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1467</span>
1467:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_route</span>
1468:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@default_route</span>)
1469:       <span class="ruby-identifier">segments</span> = []
1470:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1471:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller</span>)
1472:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1473:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1474:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1475:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1476:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1477:       <span class="ruby-ivar">@default_route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">segments</span>).<span class="ruby-identifier">freeze</span>
1478:     <span class="ruby-keyword kw">end</span>
1479:     <span class="ruby-ivar">@default_route</span>
1480:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003675" class="method">
  <div id="M003675_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003675_source')" id="l_M003675_source">show source</a> ]</p>
  <div id="M003675_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1459</span>
1459:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
1460:     <span class="ruby-ivar">@route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>
1461:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003676" class="method">
  <div id="M003676_title" class="title">
    <b>slash_segment</b>(is_optional = false)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003676_source')" id="l_M003676_source">show source</a> ]</p>
  <div id="M003676_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1463</span>
1463:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">is_optional</span> = <span class="ruby-keyword kw">false</span>)
1464:     <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DividerSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">is_optional</span>)
1465:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003689" class="method">
  <div id="M003689_title" class="title">
    <b>test_build_empty_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003689_source')" id="l_M003689_source">show source</a> ]</p>
  <div id="M003689_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1579</span>
1579:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_empty_query_string</span>
1580:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({})
1581:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003690" class="method">
  <div id="M003690_title" class="title">
    <b>test_build_query_string_with_nil_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003690_source')" id="l_M003690_source">show source</a> ]</p>
  <div id="M003690_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1583</span>
1583:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_query_string_with_nil_value</span>
1584:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
1585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003686" class="method">
  <div id="M003686_title" class="title">
    <b>test_builder_complains_without_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003686_source')" id="l_M003686_source">show source</a> ]</p>
  <div id="M003686_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1553</span>
1553:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_builder_complains_without_controller</span>
1554:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
1555:       <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteBuilder</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">build</span> <span class="ruby-value str">'/contact'</span>, <span class="ruby-identifier">:contoller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;contact&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>
1556:     <span class="ruby-keyword kw">end</span>
1557:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003692" class="method">
  <div id="M003692_title" class="title">
    <b>test_convert_ints_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003692_source')" id="l_M003692_source">show source</a> ]</p>
  <div id="M003692_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1591</span>
1591:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_ints_build_query_string</span>
1592:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=1&amp;y=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>))
1593:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003678" class="method">
  <div id="M003678_title" class="title">
    <b>test_default_route_recognition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003678_source')" id="l_M003678_source">show source</a> ]</p>
  <div id="M003678_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1482</span>
1482:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_recognition</span>
1483:     <span class="ruby-identifier">expected</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}
1484:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/10'</span>)
1485:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/10/'</span>)
1486: 
1487:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:id</span>] = <span class="ruby-value str">'jamis'</span>
1488:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/jamis/'</span>)
1489: 
1490:     <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">:id</span>
1491:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show'</span>)
1492:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/'</span>)
1493: 
1494:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:action</span>] = <span class="ruby-value str">'index'</span>
1495:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/'</span>)
1496:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts'</span>)
1497: 
1498:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/'</span>)
1499:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/how/goood/it/is/to/be/free'</span>)
1500:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003680" class="method">
  <div id="M003680_title" class="title">
    <b>test_default_route_should_include_default_action_when_id_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003680_source')" id="l_M003680_source">show source</a> ]</p>
  <div id="M003680_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1507</span>
1507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_include_default_action_when_id_present</span>
1508:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
1509:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/index/20'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1510:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003679" class="method">
  <div id="M003679_title" class="title">
    <b>test_default_route_should_omit_default_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003679_source')" id="l_M003679_source">show source</a> ]</p>
  <div id="M003679_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1502</span>
1502:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_omit_default_action</span>
1503:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}
1504:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003682" class="method">
  <div id="M003682_title" class="title">
    <b>test_default_route_should_uri_escape_pluses</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003682_source')" id="l_M003682_source">show source</a> ]</p>
  <div id="M003682_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1517</span>
1517:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_uri_escape_pluses</span>
1518:     <span class="ruby-identifier">expected</span> = { <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span> }
1519:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello world'</span>)
1520:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello%20world'</span>)
1521:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/show/hello%20world'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-identifier">expected</span>, {})
1522: 
1523:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:id</span>] = <span class="ruby-value str">'hello+world'</span>
1524:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello+world'</span>)
1525:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello%2Bworld'</span>)
1526:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/show/hello+world'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-identifier">expected</span>, {})
1527:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003681" class="method">
  <div id="M003681_title" class="title">
    <b>test_default_route_should_work_with_action_but_no_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003681_source')" id="l_M003681_source">show source</a> ]</p>
  <div id="M003681_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1512</span>
1512:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_work_with_action_but_no_id</span>
1513:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_all'</span>}
1514:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/list_all'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1515:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003685" class="method">
  <div id="M003685_title" class="title">
    <b>test_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003685_source')" id="l_M003685_source">show source</a> ]</p>
  <div id="M003685_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1546</span>
1546:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_defaults</span>
1547:     <span class="ruby-identifier">route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteBuilder</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">build</span> <span class="ruby-value str">'/users/:id.:format'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;html&quot;</span>
1548:     <span class="ruby-identifier">assert_equal</span>(
1549:       { <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;html&quot;</span> },
1550:       <span class="ruby-identifier">route</span>.<span class="ruby-identifier">defaults</span>)
1551:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003693" class="method">
  <div id="M003693_title" class="title">
    <b>test_escape_spaces_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003693_source')" id="l_M003693_source">show source</a> ]</p>
  <div id="M003693_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1595</span>
1595:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_spaces_build_query_string</span>
1596:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=hello+world&amp;y=goodbye+world'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'goodbye world'</span>))
1597:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003695" class="method">
  <div id="M003695_title" class="title">
    <b>test_escape_spaces_build_query_string_selected_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003695_source')" id="l_M003695_source">show source</a> ]</p>
  <div id="M003695_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1603</span>
1603:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_spaces_build_query_string_selected_keys</span>
1604:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=hello+world'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'goodbye world'</span>}, [<span class="ruby-identifier">:x</span>]))
1605:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003694" class="method">
  <div id="M003694_title" class="title">
    <b>test_expand_array_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003694_source')" id="l_M003694_source">show source</a> ]</p>
  <div id="M003694_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1599</span>
1599:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expand_array_build_query_string</span>
1600:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x%5B%5D=1&amp;x%5B%5D=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>]))
1601:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003683" class="method">
  <div id="M003683_title" class="title">
    <b>test_matches_controller_and_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003683_source')" id="l_M003683_source">show source</a> ]</p>
  <div id="M003683_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1529</span>
1529:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_matches_controller_and_action</span>
1530:     <span class="ruby-comment cmt"># requirement_for should only be called for the action and controller _once_</span>
1531:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:requirement_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:controller</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value str">'pages'</span>)
1532:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:requirement_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:action</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value str">'show'</span>)
1533: 
1534:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}
1535:     <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'pages'</span>, <span class="ruby-value str">'show'</span>)
1536:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'not_pages'</span>, <span class="ruby-value str">'show'</span>)
1537:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'pages'</span>, <span class="ruby-value str">'not_show'</span>)
1538:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003684" class="method">
  <div id="M003684_title" class="title">
    <b>test_parameter_shell</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003684_source')" id="l_M003684_source">show source</a> ]</p>
  <div id="M003684_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1540</span>
1540:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parameter_shell</span>
1541:     <span class="ruby-identifier">page_url</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>
1542:     <span class="ruby-identifier">page_url</span>.<span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1543:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}, <span class="ruby-identifier">page_url</span>.<span class="ruby-identifier">parameter_shell</span>)
1544:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003688" class="method">
  <div id="M003688_title" class="title">
    <b>test_significant_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003688_source')" id="l_M003688_source">show source</a> ]</p>
  <div id="M003688_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1564</span>
1564:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_significant_keys</span>
1565:     <span class="ruby-identifier">segments</span> = []
1566:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1567:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'user'</span>)
1568:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1569:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:user</span>)
1570:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1571: 
1572:     <span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'users'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}
1573: 
1574:     <span class="ruby-identifier">user_url</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">segments</span>, <span class="ruby-identifier">requirements</span>)
1575:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">user_url</span>.<span class="ruby-identifier">significant_keys</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> }
1576:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:controller</span>, <span class="ruby-identifier">:user</span>], <span class="ruby-identifier">keys</span>
1577:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003687" class="method">
  <div id="M003687_title" class="title">
    <b>test_significant_keys_for_default_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003687_source')" id="l_M003687_source">show source</a> ]</p>
  <div id="M003687_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1559</span>
1559:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_significant_keys_for_default_route</span>
1560:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">significant_keys</span>.<span class="ruby-identifier">sort_by</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> }
1561:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:controller</span>, <span class="ruby-identifier">:id</span>], <span class="ruby-identifier">keys</span>
1562:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003691" class="method">
  <div id="M003691_title" class="title">
    <b>test_simple_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003691_source')" id="l_M003691_source">show source</a> ]</p>
  <div id="M003691_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1587</span>
1587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_simple_build_query_string</span>
1588:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=1&amp;y=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2'</span>))
1589:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>