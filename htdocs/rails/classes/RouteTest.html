  <div id="C00000584">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RouteTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003704&name=default_route" >default_route</a></li>
  <li><a href="index.html?a=M003702&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003703&name=slash_segment" >slash_segment</a></li>
  <li><a href="index.html?a=M003716&name=test_build_empty_query_string" >test_build_empty_query_string</a></li>
  <li><a href="index.html?a=M003717&name=test_build_query_string_with_nil_value" >test_build_query_string_with_nil_value</a></li>
  <li><a href="index.html?a=M003713&name=test_builder_complains_without_controller" >test_builder_complains_without_controller</a></li>
  <li><a href="index.html?a=M003719&name=test_convert_ints_build_query_string" >test_convert_ints_build_query_string</a></li>
  <li><a href="index.html?a=M003705&name=test_default_route_recognition" >test_default_route_recognition</a></li>
  <li><a href="index.html?a=M003707&name=test_default_route_should_include_default_action_when_id_present" >test_default_route_should_include_default_action_when_id_present</a></li>
  <li><a href="index.html?a=M003706&name=test_default_route_should_omit_default_action" >test_default_route_should_omit_default_action</a></li>
  <li><a href="index.html?a=M003709&name=test_default_route_should_uri_escape_pluses" >test_default_route_should_uri_escape_pluses</a></li>
  <li><a href="index.html?a=M003708&name=test_default_route_should_work_with_action_but_no_id" >test_default_route_should_work_with_action_but_no_id</a></li>
  <li><a href="index.html?a=M003712&name=test_defaults" >test_defaults</a></li>
  <li><a href="index.html?a=M003720&name=test_escape_spaces_build_query_string" >test_escape_spaces_build_query_string</a></li>
  <li><a href="index.html?a=M003722&name=test_escape_spaces_build_query_string_selected_keys" >test_escape_spaces_build_query_string_selected_keys</a></li>
  <li><a href="index.html?a=M003721&name=test_expand_array_build_query_string" >test_expand_array_build_query_string</a></li>
  <li><a href="index.html?a=M003710&name=test_matches_controller_and_action" >test_matches_controller_and_action</a></li>
  <li><a href="index.html?a=M003711&name=test_parameter_shell" >test_parameter_shell</a></li>
  <li><a href="index.html?a=M003715&name=test_significant_keys" >test_significant_keys</a></li>
  <li><a href="index.html?a=M003714&name=test_significant_keys_for_default_route" >test_significant_keys_for_default_route</a></li>
  <li><a href="index.html?a=M003718&name=test_simple_build_query_string" >test_simple_build_query_string</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M003704" class="method">
  <div id="M003704_title" class="title">
    <b>default_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003704_source')" id="l_M003704_source">show source</a> ]</p>
  <div id="M003704_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1475</span>
1475:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">default_route</span>
1476:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-ivar">@default_route</span>)
1477:       <span class="ruby-identifier">segments</span> = []
1478:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1479:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller</span>)
1480:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1481:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1482:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1483:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1484:       <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">:optional</span>)
1485:       <span class="ruby-ivar">@default_route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">segments</span>).<span class="ruby-identifier">freeze</span>
1486:     <span class="ruby-keyword kw">end</span>
1487:     <span class="ruby-ivar">@default_route</span>
1488:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003702" class="method">
  <div id="M003702_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003702_source')" id="l_M003702_source">show source</a> ]</p>
  <div id="M003702_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1467</span>
1467:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
1468:     <span class="ruby-ivar">@route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>
1469:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003703" class="method">
  <div id="M003703_title" class="title">
    <b>slash_segment</b>(is_optional = false)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003703_source')" id="l_M003703_source">show source</a> ]</p>
  <div id="M003703_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1471</span>
1471:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">slash_segment</span>(<span class="ruby-identifier">is_optional</span> = <span class="ruby-keyword kw">false</span>)
1472:     <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DividerSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">is_optional</span>)
1473:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003716" class="method">
  <div id="M003716_title" class="title">
    <b>test_build_empty_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003716_source')" id="l_M003716_source">show source</a> ]</p>
  <div id="M003716_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1587</span>
1587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_empty_query_string</span>
1588:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({})
1589:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003717" class="method">
  <div id="M003717_title" class="title">
    <b>test_build_query_string_with_nil_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003717_source')" id="l_M003717_source">show source</a> ]</p>
  <div id="M003717_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1591</span>
1591:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_query_string_with_nil_value</span>
1592:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
1593:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003713" class="method">
  <div id="M003713_title" class="title">
    <b>test_builder_complains_without_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003713_source')" id="l_M003713_source">show source</a> ]</p>
  <div id="M003713_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1561</span>
1561:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_builder_complains_without_controller</span>
1562:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
1563:       <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteBuilder</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">build</span> <span class="ruby-value str">'/contact'</span>, <span class="ruby-identifier">:contoller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;contact&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>
1564:     <span class="ruby-keyword kw">end</span>
1565:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003719" class="method">
  <div id="M003719_title" class="title">
    <b>test_convert_ints_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003719_source')" id="l_M003719_source">show source</a> ]</p>
  <div id="M003719_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1599</span>
1599:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_ints_build_query_string</span>
1600:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=1&amp;y=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>))
1601:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003705" class="method">
  <div id="M003705_title" class="title">
    <b>test_default_route_recognition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003705_source')" id="l_M003705_source">show source</a> ]</p>
  <div id="M003705_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1490</span>
1490:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_recognition</span>
1491:     <span class="ruby-identifier">expected</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}
1492:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/10'</span>)
1493:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/10/'</span>)
1494: 
1495:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:id</span>] = <span class="ruby-value str">'jamis'</span>
1496:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/jamis/'</span>)
1497: 
1498:     <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">:id</span>
1499:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show'</span>)
1500:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/'</span>)
1501: 
1502:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:action</span>] = <span class="ruby-value str">'index'</span>
1503:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/'</span>)
1504:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts'</span>)
1505: 
1506:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/'</span>)
1507:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/how/goood/it/is/to/be/free'</span>)
1508:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003707" class="method">
  <div id="M003707_title" class="title">
    <b>test_default_route_should_include_default_action_when_id_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003707_source')" id="l_M003707_source">show source</a> ]</p>
  <div id="M003707_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1515</span>
1515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_include_default_action_when_id_present</span>
1516:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
1517:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/index/20'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1518:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003706" class="method">
  <div id="M003706_title" class="title">
    <b>test_default_route_should_omit_default_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003706_source')" id="l_M003706_source">show source</a> ]</p>
  <div id="M003706_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1510</span>
1510:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_omit_default_action</span>
1511:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}
1512:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1513:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003709" class="method">
  <div id="M003709_title" class="title">
    <b>test_default_route_should_uri_escape_pluses</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003709_source')" id="l_M003709_source">show source</a> ]</p>
  <div id="M003709_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1525</span>
1525:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_uri_escape_pluses</span>
1526:     <span class="ruby-identifier">expected</span> = { <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span> }
1527:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello world'</span>)
1528:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello%20world'</span>)
1529:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/show/hello%20world'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-identifier">expected</span>, {})
1530: 
1531:     <span class="ruby-identifier">expected</span>[<span class="ruby-identifier">:id</span>] = <span class="ruby-value str">'hello+world'</span>
1532:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello+world'</span>)
1533:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-value str">'/accounts/show/hello%2Bworld'</span>)
1534:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/show/hello+world'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-identifier">expected</span>, {})
1535:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003708" class="method">
  <div id="M003708_title" class="title">
    <b>test_default_route_should_work_with_action_but_no_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003708_source')" id="l_M003708_source">show source</a> ]</p>
  <div id="M003708_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1520</span>
1520:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_route_should_work_with_action_but_no_id</span>
1521:     <span class="ruby-identifier">o</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_all'</span>}
1522:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/accounts/list_all'</span>, <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">o</span>, {})
1523:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003712" class="method">
  <div id="M003712_title" class="title">
    <b>test_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003712_source')" id="l_M003712_source">show source</a> ]</p>
  <div id="M003712_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1554</span>
1554:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_defaults</span>
1555:     <span class="ruby-identifier">route</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteBuilder</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">build</span> <span class="ruby-value str">'/users/:id.:format'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;html&quot;</span>
1556:     <span class="ruby-identifier">assert_equal</span>(
1557:       { <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;html&quot;</span> },
1558:       <span class="ruby-identifier">route</span>.<span class="ruby-identifier">defaults</span>)
1559:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003720" class="method">
  <div id="M003720_title" class="title">
    <b>test_escape_spaces_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003720_source')" id="l_M003720_source">show source</a> ]</p>
  <div id="M003720_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1603</span>
1603:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_spaces_build_query_string</span>
1604:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=hello+world&amp;y=goodbye+world'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'goodbye world'</span>))
1605:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003722" class="method">
  <div id="M003722_title" class="title">
    <b>test_escape_spaces_build_query_string_selected_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003722_source')" id="l_M003722_source">show source</a> ]</p>
  <div id="M003722_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1611</span>
1611:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_spaces_build_query_string_selected_keys</span>
1612:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=hello+world'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>({<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'goodbye world'</span>}, [<span class="ruby-identifier">:x</span>]))
1613:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003721" class="method">
  <div id="M003721_title" class="title">
    <b>test_expand_array_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003721_source')" id="l_M003721_source">show source</a> ]</p>
  <div id="M003721_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1607</span>
1607:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expand_array_build_query_string</span>
1608:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x%5B%5D=1&amp;x%5B%5D=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>]))
1609:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003710" class="method">
  <div id="M003710_title" class="title">
    <b>test_matches_controller_and_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003710_source')" id="l_M003710_source">show source</a> ]</p>
  <div id="M003710_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1537</span>
1537:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_matches_controller_and_action</span>
1538:     <span class="ruby-comment cmt"># requirement_for should only be called for the action and controller _once_</span>
1539:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:requirement_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:controller</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value str">'pages'</span>)
1540:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:requirement_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:action</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value str">'show'</span>)
1541: 
1542:     <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}
1543:     <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'pages'</span>, <span class="ruby-value str">'show'</span>)
1544:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'not_pages'</span>, <span class="ruby-value str">'show'</span>)
1545:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@route</span>.<span class="ruby-identifier">matches_controller_and_action?</span>(<span class="ruby-value str">'pages'</span>, <span class="ruby-value str">'not_show'</span>)
1546:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003711" class="method">
  <div id="M003711_title" class="title">
    <b>test_parameter_shell</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003711_source')" id="l_M003711_source">show source</a> ]</p>
  <div id="M003711_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1548</span>
1548:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parameter_shell</span>
1549:     <span class="ruby-identifier">page_url</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>
1550:     <span class="ruby-identifier">page_url</span>.<span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1551:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}, <span class="ruby-identifier">page_url</span>.<span class="ruby-identifier">parameter_shell</span>)
1552:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003715" class="method">
  <div id="M003715_title" class="title">
    <b>test_significant_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003715_source')" id="l_M003715_source">show source</a> ]</p>
  <div id="M003715_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1572</span>
1572:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_significant_keys</span>
1573:     <span class="ruby-identifier">segments</span> = []
1574:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1575:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'user'</span>)
1576:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1577:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:user</span>)
1578:     <span class="ruby-identifier">segments</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'/'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1579: 
1580:     <span class="ruby-identifier">requirements</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'users'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}
1581: 
1582:     <span class="ruby-identifier">user_url</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">Route</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">segments</span>, <span class="ruby-identifier">requirements</span>)
1583:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">user_url</span>.<span class="ruby-identifier">significant_keys</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> }
1584:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:controller</span>, <span class="ruby-identifier">:user</span>], <span class="ruby-identifier">keys</span>
1585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003714" class="method">
  <div id="M003714_title" class="title">
    <b>test_significant_keys_for_default_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003714_source')" id="l_M003714_source">show source</a> ]</p>
  <div id="M003714_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1567</span>
1567:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_significant_keys_for_default_route</span>
1568:     <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">default_route</span>.<span class="ruby-identifier">significant_keys</span>.<span class="ruby-identifier">sort_by</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">k</span><span class="ruby-operator">|</span> <span class="ruby-identifier">k</span>.<span class="ruby-identifier">to_s</span> }
1569:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:action</span>, <span class="ruby-identifier">:controller</span>, <span class="ruby-identifier">:id</span>], <span class="ruby-identifier">keys</span>
1570:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003718" class="method">
  <div id="M003718_title" class="title">
    <b>test_simple_build_query_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003718_source')" id="l_M003718_source">show source</a> ]</p>
  <div id="M003718_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1595</span>
1595:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_simple_build_query_string</span>
1596:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'?x=1&amp;y=2'</span>, <span class="ruby-identifier">order_query_string</span>(<span class="ruby-ivar">@route</span>.<span class="ruby-identifier">build_query_string</span>(<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>, <span class="ruby-identifier">:y</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2'</span>))
1597:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>