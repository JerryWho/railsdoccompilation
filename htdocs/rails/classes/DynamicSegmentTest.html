  <div id="C00000708">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />DynamicSegmentTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
ActiveSupport::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004558&name=segment" >segment</a></li>
  <li><a href="index.html?a=M004557&name=setup" >setup</a></li>
  <li><a href="index.html?a=M004582&name=test_build_pattern_non_optional_with_captures" >test_build_pattern_non_optional_with_captures</a></li>
  <li><a href="index.html?a=M004581&name=test_build_pattern_non_optional_with_no_captures" >test_build_pattern_non_optional_with_no_captures</a></li>
  <li><a href="index.html?a=M004560&name=test_default_local_name" >test_default_local_name</a></li>
  <li><a href="index.html?a=M004569&name=test_expiry_should_not_trigger_once_expired" >test_expiry_should_not_trigger_once_expired</a></li>
  <li><a href="index.html?a=M004570&name=test_expiry_should_occur_according_to_expire_on" >test_expiry_should_occur_according_to_expire_on</a></li>
  <li><a href="index.html?a=M004559&name=test_extract_value" >test_extract_value</a></li>
  <li><a href="index.html?a=M004573&name=test_extraction_code_should_accept_value_and_set_local" >test_extraction_code_should_accept_value_and_set_local</a></li>
  <li><a href="index.html?a=M004575&name=test_extraction_code_should_perform_expiry" >test_extraction_code_should_perform_expiry</a></li>
  <li><a href="index.html?a=M004572&name=test_extraction_code_should_return_on_mismatch" >test_extraction_code_should_return_on_mismatch</a></li>
  <li><a href="index.html?a=M004571&name=test_extraction_code_should_return_on_nil" >test_extraction_code_should_return_on_nil</a></li>
  <li><a href="index.html?a=M004574&name=test_extraction_should_work_without_value_check" >test_extraction_should_work_without_value_check</a></li>
  <li><a href="index.html?a=M004577&name=test_interpolation_chunk_should_accept_nil" >test_interpolation_chunk_should_accept_nil</a></li>
  <li><a href="index.html?a=M004576&name=test_interpolation_chunk_should_replace_value" >test_interpolation_chunk_should_replace_value</a></li>
  <li><a href="index.html?a=M004584&name=test_modifiers_must_be_handled_sensibly" >test_modifiers_must_be_handled_sensibly</a></li>
  <li><a href="index.html?a=M004563&name=test_optional_regexp_value_check_should_accept_nil" >test_optional_regexp_value_check_should_accept_nil</a></li>
  <li><a href="index.html?a=M004567&name=test_optional_value_needs_no_check" >test_optional_value_needs_no_check</a></li>
  <li><a href="index.html?a=M004583&name=test_optionality_implied" >test_optionality_implied</a></li>
  <li><a href="index.html?a=M004561&name=test_presence_value_check" >test_presence_value_check</a></li>
  <li><a href="index.html?a=M004580&name=test_regexp_chunk_should_return_string" >test_regexp_chunk_should_return_string</a></li>
  <li><a href="index.html?a=M004565&name=test_regexp_value_check_accepts_match" >test_regexp_value_check_accepts_match</a></li>
  <li><a href="index.html?a=M004562&name=test_regexp_value_check_rejects_nil" >test_regexp_value_check_rejects_nil</a></li>
  <li><a href="index.html?a=M004564&name=test_regexp_value_check_rejects_no_match" >test_regexp_value_check_rejects_no_match</a></li>
  <li><a href="index.html?a=M004568&name=test_regexp_value_check_should_accept_match_with_default" >test_regexp_value_check_should_accept_match_with_default</a></li>
  <li><a href="index.html?a=M004566&name=test_value_check_fails_on_nil" >test_value_check_fails_on_nil</a></li>
  <li><a href="index.html?a=M004578&name=test_value_regexp_should_be_nil_without_regexp" >test_value_regexp_should_be_nil_without_regexp</a></li>
  <li><a href="index.html?a=M004579&name=test_value_regexp_should_match_exacly" >test_value_regexp_should_match_exacly</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M004558" class="method">
  <div id="M004558_title" class="title">
    <b>segment</b>(options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004558_source')" id="l_M004558_source">show source</a> ]</p>
  <div id="M004558_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">options</span> = {})
116:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@segment</span>
117:       <span class="ruby-ivar">@segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">options</span>)
118:     <span class="ruby-keyword kw">end</span>
119:     <span class="ruby-ivar">@segment</span>
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004557" class="method">
  <div id="M004557_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004557_source')" id="l_M004557_source">show source</a> ]</p>
  <div id="M004557_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
112:     <span class="ruby-ivar">@segment</span> = <span class="ruby-keyword kw">nil</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004582" class="method">
  <div id="M004582_title" class="title">
    <b>test_build_pattern_non_optional_with_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004582_source')" id="l_M004582_source">show source</a> ]</p>
  <div id="M004582_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 307</span>
307:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_captures</span>
308:     <span class="ruby-comment cmt"># Non optional</span>
309:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/(\d+)(.*?)/</span>)
310:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((\\d+)(.*?))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
311:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004581" class="method">
  <div id="M004581_title" class="title">
    <b>test_build_pattern_non_optional_with_no_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004581_source')" id="l_M004581_source">show source</a> ]</p>
  <div id="M004581_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 301</span>
301:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_no_captures</span>
302:     <span class="ruby-comment cmt"># Non optional</span>
303:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
304:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(\\d+)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
305:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004560" class="method">
  <div id="M004560_title" class="title">
    <b>test_default_local_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004560_source')" id="l_M004560_source">show source</a> ]</p>
  <div id="M004560_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 135</span>
135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_local_name</span>
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a_value'</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">local_name</span>,
137:       <span class="ruby-value str">&quot;Unexpected name -- all value_check tests will fail!&quot;</span>
138:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004569" class="method">
  <div id="M004569_title" class="title">
    <b>test_expiry_should_not_trigger_once_expired</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004569_source')" id="l_M004569_source">show source</a> ]</p>
  <div id="M004569_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_not_trigger_once_expired</span>
195:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
196:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
197:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
198:     <span class="ruby-identifier">expire_on</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">raise</span> <span class="ruby-value str">'No!!!'</span> }
199: 
200:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
201:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RuntimeError</span>
202:     <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;Expiry check should not have occurred!&quot;</span>
203:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004570" class="method">
  <div id="M004570_title" class="title">
    <b>test_expiry_should_occur_according_to_expire_on</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004570_source')" id="l_M004570_source">show source</a> ]</p>
  <div id="M004570_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_occur_according_to_expire_on</span>
206:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
207:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
208:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
209: 
210:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}
211:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
212:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">expired</span>
213:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
214: 
215:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
216:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
217:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
218:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
219:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004559" class="method">
  <div id="M004559_title" class="title">
    <b>test_extract_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004559_source')" id="l_M004559_source">show source</a> ]</p>
  <div id="M004559_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extract_value</span>
123:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>)
124: 
125:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
126:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
127: 
128:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
129:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
130: 
131:     <span class="ruby-identifier">s</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'20'</span>
132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'20'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004573" class="method">
  <div id="M004573_title" class="title">
    <b>test_extraction_code_should_accept_value_and_set_local</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004573_source')" id="l_M004573_source">show source</a> ]</p>
  <div id="M004573_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 240</span>
240:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_accept_value_and_set_local</span>
241:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
242:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
243:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
244:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
245: 
246:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
247:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
248:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004575" class="method">
  <div id="M004575_title" class="title">
    <b>test_extraction_code_should_perform_expiry</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004575_source')" id="l_M004575_source">show source</a> ]</p>
  <div id="M004575_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_perform_expiry</span>
262:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
263:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
264:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
265:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
266:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
267: 
268:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
269:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
270:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
271:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">hash</span>
272:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004572" class="method">
  <div id="M004572_title" class="title">
    <b>test_extraction_code_should_return_on_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004572_source')" id="l_M004572_source">show source</a> ]</p>
  <div id="M004572_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 230</span>
230:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_mismatch</span>
231:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
232:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
233:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
234:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
235: 
236:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
237:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
238:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004571" class="method">
  <div id="M004571_title" class="title">
    <b>test_extraction_code_should_return_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004571_source')" id="l_M004571_source">show source</a> ]</p>
  <div id="M004571_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_nil</span>
222:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
223:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
224:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
225: 
226:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
227:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
228:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004574" class="method">
  <div id="M004574_title" class="title">
    <b>test_extraction_should_work_without_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004574_source')" id="l_M004574_source">show source</a> ]</p>
  <div id="M004574_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_should_work_without_value_check</span>
251:     <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'hi'</span>
252:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
253:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
254:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
255:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
256: 
257:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
258:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hi'</span>, <span class="ruby-identifier">a_value</span>
259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004577" class="method">
  <div id="M004577_title" class="title">
    <b>test_interpolation_chunk_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004577_source')" id="l_M004577_source">show source</a> ]</p>
  <div id="M004577_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_accept_nil</span>
280:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
281:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk('a_value')}&quot;)</span>)
282:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004576" class="method">
  <div id="M004576_title" class="title">
    <b>test_interpolation_chunk_should_replace_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004576_source')" id="l_M004576_source">show source</a> ]</p>
  <div id="M004576_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 274</span>
274:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_replace_value</span>
275:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'Hi'</span>
276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">a_value</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk}&quot;)</span>)
277:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004584" class="method">
  <div id="M004584_title" class="title">
    <b>test_modifiers_must_be_handled_sensibly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004584_source')" id="l_M004584_source">show source</a> ]</p>
  <div id="M004584_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 321</span>
321:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_modifiers_must_be_handled_sensibly</span>
322:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/i</span>)
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?i-mx:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
324:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span>  <span class="ruby-regexp re">/david|jamis/</span><span class="ruby-identifier">x</span>)
325:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?x-mi:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
326:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/</span>)
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(david|jamis)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
328:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004563" class="method">
  <div id="M004563_title" class="title">
    <b>test_optional_regexp_value_check_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004563_source')" id="l_M004563_source">show source</a> ]</p>
  <div id="M004563_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 152</span>
152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_regexp_value_check_should_accept_nil</span>
153:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
154: 
155:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
156:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
157:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004567" class="method">
  <div id="M004567_title" class="title">
    <b>test_optional_value_needs_no_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004567_source')" id="l_M004567_source">show source</a> ]</p>
  <div id="M004567_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_value_needs_no_check</span>
181:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
182: 
183:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
184:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004583" class="method">
  <div id="M004583_title" class="title">
    <b>test_optionality_implied</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004583_source')" id="l_M004583_source">show source</a> ]</p>
  <div id="M004583_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 313</span>
313:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optionality_implied</span>
314:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span>)
315:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
316: 
317:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:action</span>)
318:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
319:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004561" class="method">
  <div id="M004561_title" class="title">
    <b>test_presence_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004561_source')" id="l_M004561_source">show source</a> ]</p>
  <div id="M004561_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 140</span>
140:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_presence_value_check</span>
141:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value">10</span>
142:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
143:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004580" class="method">
  <div id="M004580_title" class="title">
    <b>test_regexp_chunk_should_return_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004580_source')" id="l_M004580_source">show source</a> ]</p>
  <div id="M004580_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 296</span>
296:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_chunk_should_return_string</span>
297:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
298:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">regexp_chunk</span>
299:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004565" class="method">
  <div id="M004565_title" class="title">
    <b>test_regexp_value_check_accepts_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004565_source')" id="l_M004565_source">show source</a> ]</p>
  <div id="M004565_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 169</span>
169:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_accepts_match</span>
170:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
171:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;30&quot;</span>
172:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
173:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004562" class="method">
  <div id="M004562_title" class="title">
    <b>test_regexp_value_check_rejects_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004562_source')" id="l_M004562_source">show source</a> ]</p>
  <div id="M004562_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_nil</span>
146:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
147: 
148:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
149:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
150:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004564" class="method">
  <div id="M004564_title" class="title">
    <b>test_regexp_value_check_rejects_no_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004564_source')" id="l_M004564_source">show source</a> ]</p>
  <div id="M004564_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 159</span>
159:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_no_match</span>
160:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
161: 
162:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;Hello20World&quot;</span>
163:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
164: 
165:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;20Hi&quot;</span>
166:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
167:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004568" class="method">
  <div id="M004568_title" class="title">
    <b>test_regexp_value_check_should_accept_match_with_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004568_source')" id="l_M004568_source">show source</a> ]</p>
  <div id="M004568_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_should_accept_match_with_default</span>
188:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'200'</span>)
189: 
190:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'100'</span>
191:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004566" class="method">
  <div id="M004566_title" class="title">
    <b>test_value_check_fails_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004566_source')" id="l_M004566_source">show source</a> ]</p>
  <div id="M004566_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 175</span>
175:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_check_fails_on_nil</span>
176:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
177:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004578" class="method">
  <div id="M004578_title" class="title">
    <b>test_value_regexp_should_be_nil_without_regexp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004578_source')" id="l_M004578_source">show source</a> ]</p>
  <div id="M004578_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 284</span>
284:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_be_nil_without_regexp</span>
285:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>
286:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004579" class="method">
  <div id="M004579_title" class="title">
    <b>test_value_regexp_should_match_exacly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004579_source')" id="l_M004579_source">show source</a> ]</p>
  <div id="M004579_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_match_exacly</span>
289:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
290:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10 World&quot;</span>
291:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10&quot;</span>
292:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10 World&quot;</span>
293:     <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10&quot;</span>
294:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>