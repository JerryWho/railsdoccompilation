  <div id="C00000699">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />DynamicSegmentTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004523&name=segment" >segment</a></li>
  <li><a href="index.html?a=M004547&name=test_build_pattern_non_optional_with_captures" >test_build_pattern_non_optional_with_captures</a></li>
  <li><a href="index.html?a=M004546&name=test_build_pattern_non_optional_with_no_captures" >test_build_pattern_non_optional_with_no_captures</a></li>
  <li><a href="index.html?a=M004525&name=test_default_local_name" >test_default_local_name</a></li>
  <li><a href="index.html?a=M004534&name=test_expiry_should_not_trigger_once_expired" >test_expiry_should_not_trigger_once_expired</a></li>
  <li><a href="index.html?a=M004535&name=test_expiry_should_occur_according_to_expire_on" >test_expiry_should_occur_according_to_expire_on</a></li>
  <li><a href="index.html?a=M004524&name=test_extract_value" >test_extract_value</a></li>
  <li><a href="index.html?a=M004538&name=test_extraction_code_should_accept_value_and_set_local" >test_extraction_code_should_accept_value_and_set_local</a></li>
  <li><a href="index.html?a=M004540&name=test_extraction_code_should_perform_expiry" >test_extraction_code_should_perform_expiry</a></li>
  <li><a href="index.html?a=M004537&name=test_extraction_code_should_return_on_mismatch" >test_extraction_code_should_return_on_mismatch</a></li>
  <li><a href="index.html?a=M004536&name=test_extraction_code_should_return_on_nil" >test_extraction_code_should_return_on_nil</a></li>
  <li><a href="index.html?a=M004539&name=test_extraction_should_work_without_value_check" >test_extraction_should_work_without_value_check</a></li>
  <li><a href="index.html?a=M004542&name=test_interpolation_chunk_should_accept_nil" >test_interpolation_chunk_should_accept_nil</a></li>
  <li><a href="index.html?a=M004541&name=test_interpolation_chunk_should_replace_value" >test_interpolation_chunk_should_replace_value</a></li>
  <li><a href="index.html?a=M004549&name=test_modifiers_must_be_handled_sensibly" >test_modifiers_must_be_handled_sensibly</a></li>
  <li><a href="index.html?a=M004528&name=test_optional_regexp_value_check_should_accept_nil" >test_optional_regexp_value_check_should_accept_nil</a></li>
  <li><a href="index.html?a=M004532&name=test_optional_value_needs_no_check" >test_optional_value_needs_no_check</a></li>
  <li><a href="index.html?a=M004548&name=test_optionality_implied" >test_optionality_implied</a></li>
  <li><a href="index.html?a=M004526&name=test_presence_value_check" >test_presence_value_check</a></li>
  <li><a href="index.html?a=M004545&name=test_regexp_chunk_should_return_string" >test_regexp_chunk_should_return_string</a></li>
  <li><a href="index.html?a=M004530&name=test_regexp_value_check_accepts_match" >test_regexp_value_check_accepts_match</a></li>
  <li><a href="index.html?a=M004527&name=test_regexp_value_check_rejects_nil" >test_regexp_value_check_rejects_nil</a></li>
  <li><a href="index.html?a=M004529&name=test_regexp_value_check_rejects_no_match" >test_regexp_value_check_rejects_no_match</a></li>
  <li><a href="index.html?a=M004533&name=test_regexp_value_check_should_accept_match_with_default" >test_regexp_value_check_should_accept_match_with_default</a></li>
  <li><a href="index.html?a=M004531&name=test_value_check_fails_on_nil" >test_value_check_fails_on_nil</a></li>
  <li><a href="index.html?a=M004543&name=test_value_regexp_should_be_nil_without_regexp" >test_value_regexp_should_be_nil_without_regexp</a></li>
  <li><a href="index.html?a=M004544&name=test_value_regexp_should_match_exacly" >test_value_regexp_should_match_exacly</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M004523" class="method">
  <div id="M004523_title" class="title">
    <b>segment</b>(options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004523_source')" id="l_M004523_source">show source</a> ]</p>
  <div id="M004523_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">options</span> = {})
112:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@segment</span>
113:       <span class="ruby-ivar">@segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">options</span>)
114:     <span class="ruby-keyword kw">end</span>
115:     <span class="ruby-ivar">@segment</span>
116:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004547" class="method">
  <div id="M004547_title" class="title">
    <b>test_build_pattern_non_optional_with_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004547_source')" id="l_M004547_source">show source</a> ]</p>
  <div id="M004547_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 303</span>
303:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_captures</span>
304:     <span class="ruby-comment cmt"># Non optional</span>
305:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/(\d+)(.*?)/</span>)
306:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((\\d+)(.*?))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
307:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004546" class="method">
  <div id="M004546_title" class="title">
    <b>test_build_pattern_non_optional_with_no_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004546_source')" id="l_M004546_source">show source</a> ]</p>
  <div id="M004546_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 297</span>
297:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_no_captures</span>
298:     <span class="ruby-comment cmt"># Non optional</span>
299:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
300:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(\\d+)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
301:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004525" class="method">
  <div id="M004525_title" class="title">
    <b>test_default_local_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004525_source')" id="l_M004525_source">show source</a> ]</p>
  <div id="M004525_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_local_name</span>
132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a_value'</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">local_name</span>,
133:       <span class="ruby-value str">&quot;Unexpected name -- all value_check tests will fail!&quot;</span>
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004534" class="method">
  <div id="M004534_title" class="title">
    <b>test_expiry_should_not_trigger_once_expired</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004534_source')" id="l_M004534_source">show source</a> ]</p>
  <div id="M004534_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_not_trigger_once_expired</span>
191:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
192:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
193:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
194:     <span class="ruby-identifier">expire_on</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">raise</span> <span class="ruby-value str">'No!!!'</span> }
195: 
196:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
197:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RuntimeError</span>
198:     <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;Expiry check should not have occurred!&quot;</span>
199:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004535" class="method">
  <div id="M004535_title" class="title">
    <b>test_expiry_should_occur_according_to_expire_on</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004535_source')" id="l_M004535_source">show source</a> ]</p>
  <div id="M004535_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 201</span>
201:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_occur_according_to_expire_on</span>
202:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
203:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
204:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
205: 
206:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}
207:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
208:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">expired</span>
209:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
210: 
211:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
212:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
213:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
214:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
215:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004524" class="method">
  <div id="M004524_title" class="title">
    <b>test_extract_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004524_source')" id="l_M004524_source">show source</a> ]</p>
  <div id="M004524_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extract_value</span>
119:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>)
120: 
121:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
122:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
123: 
124:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
126: 
127:     <span class="ruby-identifier">s</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'20'</span>
128:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'20'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004538" class="method">
  <div id="M004538_title" class="title">
    <b>test_extraction_code_should_accept_value_and_set_local</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004538_source')" id="l_M004538_source">show source</a> ]</p>
  <div id="M004538_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 236</span>
236:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_accept_value_and_set_local</span>
237:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
238:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
239:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
240:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
241: 
242:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
243:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
244:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004540" class="method">
  <div id="M004540_title" class="title">
    <b>test_extraction_code_should_perform_expiry</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004540_source')" id="l_M004540_source">show source</a> ]</p>
  <div id="M004540_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 257</span>
257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_perform_expiry</span>
258:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
259:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
260:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
261:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
262:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
263: 
264:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
265:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
266:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
267:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">hash</span>
268:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004537" class="method">
  <div id="M004537_title" class="title">
    <b>test_extraction_code_should_return_on_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004537_source')" id="l_M004537_source">show source</a> ]</p>
  <div id="M004537_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 226</span>
226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_mismatch</span>
227:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
228:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
229:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
230:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
231: 
232:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
233:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
234:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004536" class="method">
  <div id="M004536_title" class="title">
    <b>test_extraction_code_should_return_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004536_source')" id="l_M004536_source">show source</a> ]</p>
  <div id="M004536_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_nil</span>
218:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
219:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
220:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
221: 
222:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
223:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004539" class="method">
  <div id="M004539_title" class="title">
    <b>test_extraction_should_work_without_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004539_source')" id="l_M004539_source">show source</a> ]</p>
  <div id="M004539_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 246</span>
246:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_should_work_without_value_check</span>
247:     <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'hi'</span>
248:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
249:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
250:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
251:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
252: 
253:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
254:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hi'</span>, <span class="ruby-identifier">a_value</span>
255:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004542" class="method">
  <div id="M004542_title" class="title">
    <b>test_interpolation_chunk_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004542_source')" id="l_M004542_source">show source</a> ]</p>
  <div id="M004542_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 275</span>
275:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_accept_nil</span>
276:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
277:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk('a_value')}&quot;)</span>)
278:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004541" class="method">
  <div id="M004541_title" class="title">
    <b>test_interpolation_chunk_should_replace_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004541_source')" id="l_M004541_source">show source</a> ]</p>
  <div id="M004541_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_replace_value</span>
271:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'Hi'</span>
272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">a_value</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk}&quot;)</span>)
273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004549" class="method">
  <div id="M004549_title" class="title">
    <b>test_modifiers_must_be_handled_sensibly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004549_source')" id="l_M004549_source">show source</a> ]</p>
  <div id="M004549_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 317</span>
317:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_modifiers_must_be_handled_sensibly</span>
318:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/i</span>)
319:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?i-mx:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
320:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span>  <span class="ruby-regexp re">/david|jamis/</span><span class="ruby-identifier">x</span>)
321:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?x-mi:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
322:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/</span>)
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(david|jamis)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
324:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004528" class="method">
  <div id="M004528_title" class="title">
    <b>test_optional_regexp_value_check_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004528_source')" id="l_M004528_source">show source</a> ]</p>
  <div id="M004528_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 148</span>
148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_regexp_value_check_should_accept_nil</span>
149:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
150: 
151:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
152:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
153:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004532" class="method">
  <div id="M004532_title" class="title">
    <b>test_optional_value_needs_no_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004532_source')" id="l_M004532_source">show source</a> ]</p>
  <div id="M004532_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 176</span>
176:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_value_needs_no_check</span>
177:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
178: 
179:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
180:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>
181:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004548" class="method">
  <div id="M004548_title" class="title">
    <b>test_optionality_implied</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004548_source')" id="l_M004548_source">show source</a> ]</p>
  <div id="M004548_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 309</span>
309:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optionality_implied</span>
310:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span>)
311:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
312: 
313:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:action</span>)
314:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
315:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004526" class="method">
  <div id="M004526_title" class="title">
    <b>test_presence_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004526_source')" id="l_M004526_source">show source</a> ]</p>
  <div id="M004526_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_presence_value_check</span>
137:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value">10</span>
138:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
139:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004545" class="method">
  <div id="M004545_title" class="title">
    <b>test_regexp_chunk_should_return_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004545_source')" id="l_M004545_source">show source</a> ]</p>
  <div id="M004545_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 292</span>
292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_chunk_should_return_string</span>
293:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
294:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">regexp_chunk</span>
295:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004530" class="method">
  <div id="M004530_title" class="title">
    <b>test_regexp_value_check_accepts_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004530_source')" id="l_M004530_source">show source</a> ]</p>
  <div id="M004530_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_accepts_match</span>
166:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
167:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;30&quot;</span>
168:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
169:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004527" class="method">
  <div id="M004527_title" class="title">
    <b>test_regexp_value_check_rejects_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004527_source')" id="l_M004527_source">show source</a> ]</p>
  <div id="M004527_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_nil</span>
142:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
143: 
144:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
145:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
146:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004529" class="method">
  <div id="M004529_title" class="title">
    <b>test_regexp_value_check_rejects_no_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004529_source')" id="l_M004529_source">show source</a> ]</p>
  <div id="M004529_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_no_match</span>
156:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
157: 
158:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;Hello20World&quot;</span>
159:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
160: 
161:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;20Hi&quot;</span>
162:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004533" class="method">
  <div id="M004533_title" class="title">
    <b>test_regexp_value_check_should_accept_match_with_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004533_source')" id="l_M004533_source">show source</a> ]</p>
  <div id="M004533_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_should_accept_match_with_default</span>
184:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'200'</span>)
185: 
186:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'100'</span>
187:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
188:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004531" class="method">
  <div id="M004531_title" class="title">
    <b>test_value_check_fails_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004531_source')" id="l_M004531_source">show source</a> ]</p>
  <div id="M004531_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_check_fails_on_nil</span>
172:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
173:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
174:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004543" class="method">
  <div id="M004543_title" class="title">
    <b>test_value_regexp_should_be_nil_without_regexp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004543_source')" id="l_M004543_source">show source</a> ]</p>
  <div id="M004543_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 280</span>
280:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_be_nil_without_regexp</span>
281:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>
282:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004544" class="method">
  <div id="M004544_title" class="title">
    <b>test_value_regexp_should_match_exacly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004544_source')" id="l_M004544_source">show source</a> ]</p>
  <div id="M004544_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 284</span>
284:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_match_exacly</span>
285:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
286:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10 World&quot;</span>
287:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10&quot;</span>
288:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10 World&quot;</span>
289:     <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10&quot;</span>
290:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>