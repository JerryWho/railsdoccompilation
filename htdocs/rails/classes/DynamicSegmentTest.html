  <div id="C00000651">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />DynamicSegmentTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
ActiveSupport::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004564&name=segment" >segment</a></li>
  <li><a href="index.html?a=M004563&name=setup" >setup</a></li>
  <li><a href="index.html?a=M004588&name=test_build_pattern_non_optional_with_captures" >test_build_pattern_non_optional_with_captures</a></li>
  <li><a href="index.html?a=M004587&name=test_build_pattern_non_optional_with_no_captures" >test_build_pattern_non_optional_with_no_captures</a></li>
  <li><a href="index.html?a=M004566&name=test_default_local_name" >test_default_local_name</a></li>
  <li><a href="index.html?a=M004575&name=test_expiry_should_not_trigger_once_expired" >test_expiry_should_not_trigger_once_expired</a></li>
  <li><a href="index.html?a=M004576&name=test_expiry_should_occur_according_to_expire_on" >test_expiry_should_occur_according_to_expire_on</a></li>
  <li><a href="index.html?a=M004565&name=test_extract_value" >test_extract_value</a></li>
  <li><a href="index.html?a=M004579&name=test_extraction_code_should_accept_value_and_set_local" >test_extraction_code_should_accept_value_and_set_local</a></li>
  <li><a href="index.html?a=M004581&name=test_extraction_code_should_perform_expiry" >test_extraction_code_should_perform_expiry</a></li>
  <li><a href="index.html?a=M004578&name=test_extraction_code_should_return_on_mismatch" >test_extraction_code_should_return_on_mismatch</a></li>
  <li><a href="index.html?a=M004577&name=test_extraction_code_should_return_on_nil" >test_extraction_code_should_return_on_nil</a></li>
  <li><a href="index.html?a=M004580&name=test_extraction_should_work_without_value_check" >test_extraction_should_work_without_value_check</a></li>
  <li><a href="index.html?a=M004583&name=test_interpolation_chunk_should_accept_nil" >test_interpolation_chunk_should_accept_nil</a></li>
  <li><a href="index.html?a=M004582&name=test_interpolation_chunk_should_replace_value" >test_interpolation_chunk_should_replace_value</a></li>
  <li><a href="index.html?a=M004590&name=test_modifiers_must_be_handled_sensibly" >test_modifiers_must_be_handled_sensibly</a></li>
  <li><a href="index.html?a=M004569&name=test_optional_regexp_value_check_should_accept_nil" >test_optional_regexp_value_check_should_accept_nil</a></li>
  <li><a href="index.html?a=M004573&name=test_optional_value_needs_no_check" >test_optional_value_needs_no_check</a></li>
  <li><a href="index.html?a=M004589&name=test_optionality_implied" >test_optionality_implied</a></li>
  <li><a href="index.html?a=M004567&name=test_presence_value_check" >test_presence_value_check</a></li>
  <li><a href="index.html?a=M004586&name=test_regexp_chunk_should_return_string" >test_regexp_chunk_should_return_string</a></li>
  <li><a href="index.html?a=M004571&name=test_regexp_value_check_accepts_match" >test_regexp_value_check_accepts_match</a></li>
  <li><a href="index.html?a=M004568&name=test_regexp_value_check_rejects_nil" >test_regexp_value_check_rejects_nil</a></li>
  <li><a href="index.html?a=M004570&name=test_regexp_value_check_rejects_no_match" >test_regexp_value_check_rejects_no_match</a></li>
  <li><a href="index.html?a=M004574&name=test_regexp_value_check_should_accept_match_with_default" >test_regexp_value_check_should_accept_match_with_default</a></li>
  <li><a href="index.html?a=M004572&name=test_value_check_fails_on_nil" >test_value_check_fails_on_nil</a></li>
  <li><a href="index.html?a=M004584&name=test_value_regexp_should_be_nil_without_regexp" >test_value_regexp_should_be_nil_without_regexp</a></li>
  <li><a href="index.html?a=M004585&name=test_value_regexp_should_match_exacly" >test_value_regexp_should_match_exacly</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M004564" class="method">
  <div id="M004564_title" class="title">
    <b>segment</b>(options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004564_source')" id="l_M004564_source">show source</a> ]</p>
  <div id="M004564_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">options</span> = {})
117:     <span class="ruby-keyword kw">unless</span> <span class="ruby-ivar">@segment</span>
118:       <span class="ruby-ivar">@segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">options</span>)
119:     <span class="ruby-keyword kw">end</span>
120:     <span class="ruby-ivar">@segment</span>
121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004563" class="method">
  <div id="M004563_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004563_source')" id="l_M004563_source">show source</a> ]</p>
  <div id="M004563_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
113:     <span class="ruby-ivar">@segment</span> = <span class="ruby-keyword kw">nil</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004588" class="method">
  <div id="M004588_title" class="title">
    <b>test_build_pattern_non_optional_with_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004588_source')" id="l_M004588_source">show source</a> ]</p>
  <div id="M004588_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 308</span>
308:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_captures</span>
309:     <span class="ruby-comment cmt"># Non optional</span>
310:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/(\d+)(.*?)/</span>)
311:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((\\d+)(.*?))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
312:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004587" class="method">
  <div id="M004587_title" class="title">
    <b>test_build_pattern_non_optional_with_no_captures</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004587_source')" id="l_M004587_source">show source</a> ]</p>
  <div id="M004587_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 302</span>
302:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_pattern_non_optional_with_no_captures</span>
303:     <span class="ruby-comment cmt"># Non optional</span>
304:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
305:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(\\d+)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
306:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004566" class="method">
  <div id="M004566_title" class="title">
    <b>test_default_local_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004566_source')" id="l_M004566_source">show source</a> ]</p>
  <div id="M004566_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_local_name</span>
137:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a_value'</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">local_name</span>,
138:       <span class="ruby-value str">&quot;Unexpected name -- all value_check tests will fail!&quot;</span>
139:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004575" class="method">
  <div id="M004575_title" class="title">
    <b>test_expiry_should_not_trigger_once_expired</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004575_source')" id="l_M004575_source">show source</a> ]</p>
  <div id="M004575_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 195</span>
195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_not_trigger_once_expired</span>
196:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
197:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
198:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
199:     <span class="ruby-identifier">expire_on</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">raise</span> <span class="ruby-value str">'No!!!'</span> }
200: 
201:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
202:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">RuntimeError</span>
203:     <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;Expiry check should not have occurred!&quot;</span>
204:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004576" class="method">
  <div id="M004576_title" class="title">
    <b>test_expiry_should_occur_according_to_expire_on</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004576_source')" id="l_M004576_source">show source</a> ]</p>
  <div id="M004576_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 206</span>
206:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expiry_should_occur_according_to_expire_on</span>
207:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
208:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
209:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
210: 
211:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}
212:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
213:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">expired</span>
214:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
215: 
216:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
217:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">expiry_statement</span>)
218:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
219:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">hash</span>)
220:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004565" class="method">
  <div id="M004565_title" class="title">
    <b>test_extract_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004565_source')" id="l_M004565_source">show source</a> ]</p>
  <div id="M004565_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 123</span>
123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extract_value</span>
124:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:a</span>)
125: 
126:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
127:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'10'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
128: 
129:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'20'</span>}
130:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
131: 
132:     <span class="ruby-identifier">s</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'20'</span>
133:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'20'</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">s</span>.<span class="ruby-identifier">extract_value</span>)
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004579" class="method">
  <div id="M004579_title" class="title">
    <b>test_extraction_code_should_accept_value_and_set_local</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004579_source')" id="l_M004579_source">show source</a> ]</p>
  <div id="M004579_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 241</span>
241:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_accept_value_and_set_local</span>
242:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
243:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
244:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
245:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
246: 
247:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
248:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
249:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004581" class="method">
  <div id="M004581_title" class="title">
    <b>test_extraction_code_should_perform_expiry</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004581_source')" id="l_M004581_source">show source</a> ]</p>
  <div id="M004581_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 262</span>
262:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_perform_expiry</span>
263:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">false</span>
264:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
265:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
266:     <span class="ruby-identifier">expire_on</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
267:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
268: 
269:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
270:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">a_value</span>
271:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">expired</span>
272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">options</span>, <span class="ruby-identifier">hash</span>
273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004578" class="method">
  <div id="M004578_title" class="title">
    <b>test_extraction_code_should_return_on_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004578_source')" id="l_M004578_source">show source</a> ]</p>
  <div id="M004578_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 231</span>
231:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_mismatch</span>
232:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
233:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Hi'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
234:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
235:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
236: 
237:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
238:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
239:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004577" class="method">
  <div id="M004577_title" class="title">
    <b>test_extraction_code_should_return_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004577_source')" id="l_M004577_source">show source</a> ]</p>
  <div id="M004577_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_code_should_return_on_nil</span>
223:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
224:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}
225:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
226: 
227:     <span class="ruby-comment cmt"># Local jump because of return inside eval.</span>
228:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">LocalJumpError</span>) { <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>) }
229:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004580" class="method">
  <div id="M004580_title" class="title">
    <b>test_extraction_should_work_without_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004580_source')" id="l_M004580_source">show source</a> ]</p>
  <div id="M004580_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 251</span>
251:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extraction_should_work_without_value_check</span>
252:     <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">default</span> = <span class="ruby-value str">'hi'</span>
253:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">merged</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
254:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'3'</span>}
255:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
256:     <span class="ruby-identifier">expired</span> = <span class="ruby-keyword kw">true</span>
257: 
258:     <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">extraction_code</span>)
259:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hi'</span>, <span class="ruby-identifier">a_value</span>
260:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004583" class="method">
  <div id="M004583_title" class="title">
    <b>test_interpolation_chunk_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004583_source')" id="l_M004583_source">show source</a> ]</p>
  <div id="M004583_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 280</span>
280:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_accept_nil</span>
281:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
282:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk('a_value')}&quot;)</span>)
283:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004582" class="method">
  <div id="M004582_title" class="title">
    <b>test_interpolation_chunk_should_replace_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004582_source')" id="l_M004582_source">show source</a> ]</p>
  <div id="M004582_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 275</span>
275:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_chunk_should_replace_value</span>
276:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'Hi'</span>
277:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">a_value</span>, <span class="ruby-identifier">eval</span>(<span class="ruby-node">%(&quot;#{segment.interpolation_chunk}&quot;)</span>)
278:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004590" class="method">
  <div id="M004590_title" class="title">
    <b>test_modifiers_must_be_handled_sensibly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004590_source')" id="l_M004590_source">show source</a> ]</p>
  <div id="M004590_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_modifiers_must_be_handled_sensibly</span>
323:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/i</span>)
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?i-mx:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
325:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span>  <span class="ruby-regexp re">/david|jamis/</span><span class="ruby-identifier">x</span>)
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;((?x-mi:david|jamis))stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
327:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/david|jamis/</span>)
328:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;(david|jamis)stuff&quot;</span>, <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">build_pattern</span>(<span class="ruby-value str">'stuff'</span>)
329:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004569" class="method">
  <div id="M004569_title" class="title">
    <b>test_optional_regexp_value_check_should_accept_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004569_source')" id="l_M004569_source">show source</a> ]</p>
  <div id="M004569_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 153</span>
153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_regexp_value_check_should_accept_nil</span>
154:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
155: 
156:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
157:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004573" class="method">
  <div id="M004573_title" class="title">
    <b>test_optional_value_needs_no_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004573_source')" id="l_M004573_source">show source</a> ]</p>
  <div id="M004573_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 181</span>
181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optional_value_needs_no_check</span>
182:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:optional</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
183: 
184:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
185:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>
186:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004589" class="method">
  <div id="M004589_title" class="title">
    <b>test_optionality_implied</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004589_source')" id="l_M004589_source">show source</a> ]</p>
  <div id="M004589_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 314</span>
314:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optionality_implied</span>
315:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span>)
316:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
317: 
318:     <span class="ruby-identifier">a_segment</span> = <span class="ruby-constant">ROUTING</span><span class="ruby-operator">::</span><span class="ruby-constant">DynamicSegment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:action</span>)
319:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_segment</span>.<span class="ruby-identifier">optionality_implied?</span>
320:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004567" class="method">
  <div id="M004567_title" class="title">
    <b>test_presence_value_check</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004567_source')" id="l_M004567_source">show source</a> ]</p>
  <div id="M004567_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_presence_value_check</span>
142:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value">10</span>
143:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004586" class="method">
  <div id="M004586_title" class="title">
    <b>test_regexp_chunk_should_return_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004586_source')" id="l_M004586_source">show source</a> ]</p>
  <div id="M004586_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 297</span>
297:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_chunk_should_return_string</span>
298:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
299:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">regexp_chunk</span>
300:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004571" class="method">
  <div id="M004571_title" class="title">
    <b>test_regexp_value_check_accepts_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004571_source')" id="l_M004571_source">show source</a> ]</p>
  <div id="M004571_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_accepts_match</span>
171:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
172:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;30&quot;</span>
173:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
174:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004568" class="method">
  <div id="M004568_title" class="title">
    <b>test_regexp_value_check_rejects_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004568_source')" id="l_M004568_source">show source</a> ]</p>
  <div id="M004568_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_nil</span>
147:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
148: 
149:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
150:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
151:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004570" class="method">
  <div id="M004570_title" class="title">
    <b>test_regexp_value_check_rejects_no_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004570_source')" id="l_M004570_source">show source</a> ]</p>
  <div id="M004570_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_rejects_no_match</span>
161:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
162: 
163:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;Hello20World&quot;</span>
164:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
165: 
166:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">&quot;20Hi&quot;</span>
167:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004574" class="method">
  <div id="M004574_title" class="title">
    <b>test_regexp_value_check_should_accept_match_with_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004574_source')" id="l_M004574_source">show source</a> ]</p>
  <div id="M004574_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_regexp_value_check_should_accept_match_with_default</span>
189:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'200'</span>)
190: 
191:     <span class="ruby-identifier">a_value</span> = <span class="ruby-value str">'100'</span>
192:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
193:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004572" class="method">
  <div id="M004572_title" class="title">
    <b>test_value_check_fails_on_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004572_source')" id="l_M004572_source">show source</a> ]</p>
  <div id="M004572_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 176</span>
176:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_check_fails_on_nil</span>
177:     <span class="ruby-identifier">a_value</span> = <span class="ruby-keyword kw">nil</span>
178:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">eval</span>(<span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_check</span>)
179:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004584" class="method">
  <div id="M004584_title" class="title">
    <b>test_value_regexp_should_be_nil_without_regexp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004584_source')" id="l_M004584_source">show source</a> ]</p>
  <div id="M004584_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_be_nil_without_regexp</span>
286:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>
287:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004585" class="method">
  <div id="M004585_title" class="title">
    <b>test_value_regexp_should_match_exacly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004585_source')" id="l_M004585_source">show source</a> ]</p>
  <div id="M004585_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 289</span>
289:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_value_regexp_should_match_exacly</span>
290:     <span class="ruby-identifier">segment</span> = <span class="ruby-identifier">segment</span>(<span class="ruby-identifier">:regexp</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>)
291:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10 World&quot;</span>
292:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;Hello 10&quot;</span>
293:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10 World&quot;</span>
294:     <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">segment</span>.<span class="ruby-identifier">value_regexp</span>, <span class="ruby-value str">&quot;10&quot;</span>
295:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>