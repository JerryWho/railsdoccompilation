  <div id="C00000045">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />EnumerableTests<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/core_ext/enumerable_test_rb.html');">activesupport/test/core_ext/enumerable_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000358&name=test_each_with_object" >test_each_with_object</a></li>
  <li><a href="index.html?a=M000356&name=test_empty_sums" >test_empty_sums</a></li>
  <li><a href="index.html?a=M000357&name=test_enumerable_sums" >test_enumerable_sums</a></li>
  <li><a href="index.html?a=M000362&name=test_exclude?" >test_exclude?</a></li>
  <li><a href="index.html?a=M000353&name=test_group_by" >test_group_by</a></li>
  <li><a href="index.html?a=M000359&name=test_index_by" >test_index_by</a></li>
  <li><a href="index.html?a=M000360&name=test_many" >test_many</a></li>
  <li><a href="index.html?a=M000355&name=test_nil_sums" >test_nil_sums</a></li>
  <li><a href="index.html?a=M000361&name=test_none" >test_none</a></li>
  <li><a href="index.html?a=M000354&name=test_sums" >test_sums</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000358" class="method">
  <div id="M000358_title" class="title">
    <b>test_each_with_object</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000358_source')" id="l_M000358_source">show source</a> ]</p>
  <div id="M000358_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_each_with_object</span>
66:     <span class="ruby-identifier">result</span> = <span class="ruby-node">%w(foo bar)</span>.<span class="ruby-identifier">each_with_object</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">str</span>, <span class="ruby-identifier">hsh</span><span class="ruby-operator">|</span> <span class="ruby-identifier">hsh</span>[<span class="ruby-identifier">str</span>] = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">upcase</span> }
67:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'FOO'</span>, <span class="ruby-value str">'bar'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'BAR'</span>}, <span class="ruby-identifier">result</span>)
68:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000356" class="method">
  <div id="M000356_title" class="title">
    <b>test_empty_sums</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000356_source')" id="l_M000356_source">show source</a> ]</p>
  <div id="M000356_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_sums</span>
56:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, [].<span class="ruby-identifier">sum</span>
57:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, [].<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> }
58:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>), [].<span class="ruby-identifier">sum</span>(<span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">0</span>))
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000357" class="method">
  <div id="M000357_title" class="title">
    <b>test_enumerable_sums</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000357_source')" id="l_M000357_source">show source</a> ]</p>
  <div id="M000357_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_enumerable_sums</span>
62:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">4</span>).<span class="ruby-identifier">sum</span>
63:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000362" class="method">
  <div id="M000362_title" class="title">
    <b>test_exclude?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000362_source')" id="l_M000362_source">show source</a> ]</p>
  <div id="M000362_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 98</span>
 98:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exclude?</span>
 99:     <span class="ruby-identifier">assert</span> [ <span class="ruby-value">1</span> ].<span class="ruby-identifier">exclude?</span>(<span class="ruby-value">2</span>)
100:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">1</span> ].<span class="ruby-identifier">exclude?</span>(<span class="ruby-value">1</span>)
101:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000353" class="method">
  <div id="M000353_title" class="title">
    <b>test_group_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000353_source')" id="l_M000353_source">show source</a> ]</p>
  <div id="M000353_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 9</span>
 9:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_group_by</span>
10:     <span class="ruby-identifier">names</span> = <span class="ruby-node">%w(marcel sam david jeremy)</span>
11:     <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span>)
12:     <span class="ruby-identifier">objects</span> = (<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">50</span>).<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">people</span>,<span class="ruby-operator">|</span>
13:       <span class="ruby-identifier">p</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
14:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span> = <span class="ruby-identifier">names</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-identifier">rand</span> }.<span class="ruby-identifier">first</span>
15:       <span class="ruby-identifier">people</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">p</span>
16:     <span class="ruby-keyword kw">end</span>
17: 
18:     <span class="ruby-identifier">grouped</span> = <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">group_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">object</span><span class="ruby-operator">|</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">name</span> }
19: 
20:     <span class="ruby-identifier">grouped</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span>, <span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
21:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">person</span><span class="ruby-operator">|</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span> }
22:     <span class="ruby-keyword kw">end</span>
23: 
24:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">objects</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>), <span class="ruby-identifier">grouped</span>.<span class="ruby-identifier">keys</span>
25:     <span class="ruby-identifier">assert</span>({}.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">grouped</span>), <span class="ruby-value str">&quot;Could not convert ActiveSupport::OrderedHash into Hash&quot;</span>)
26:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000359" class="method">
  <div id="M000359_title" class="title">
    <b>test_index_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000359_source')" id="l_M000359_source">show source</a> ]</p>
  <div id="M000359_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_by</span>
71:     <span class="ruby-identifier">payments</span> = [ <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">5</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">15</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">10</span>) ]
72:     <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value">5</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">payments</span>[<span class="ruby-value">0</span>], <span class="ruby-value">15</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">payments</span>[<span class="ruby-value">1</span>], <span class="ruby-value">10</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">payments</span>[<span class="ruby-value">2</span>] },
73:                  <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">index_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">price</span> })
74:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000360" class="method">
  <div id="M000360_title" class="title">
    <b>test_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000360_source')" id="l_M000360_source">show source</a> ]</p>
  <div id="M000360_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 76</span>
76:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_many</span>
77:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[].<span class="ruby-identifier">many?</span>
78:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">1</span> ].<span class="ruby-identifier">many?</span>
79:     <span class="ruby-identifier">assert</span> [ <span class="ruby-value">1</span>, <span class="ruby-value">2</span> ].<span class="ruby-identifier">many?</span>
80: 
81:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[].<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
82:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">2</span> ].<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
83:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">1</span>, <span class="ruby-value">2</span> ].<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
84:     <span class="ruby-identifier">assert</span> [ <span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">2</span> ].<span class="ruby-identifier">many?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
85:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000355" class="method">
  <div id="M000355_title" class="title">
    <b>test_nil_sums</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000355_source')" id="l_M000355_source">show source</a> ]</p>
  <div id="M000355_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 44</span>
44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_sums</span>
45:     <span class="ruby-identifier">expected_raise</span> = <span class="ruby-constant">TypeError</span>
46: 
47:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-identifier">expected_raise</span>) { [<span class="ruby-value">5</span>, <span class="ruby-value">15</span>, <span class="ruby-keyword kw">nil</span>].<span class="ruby-identifier">sum</span> }
48: 
49:     <span class="ruby-identifier">payments</span> = [ <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">5</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">15</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">10</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>) ]
50:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-identifier">expected_raise</span>) { <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:price</span>) }
51: 
52:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">price</span>.<span class="ruby-identifier">to_i</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span> }
53:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000361" class="method">
  <div id="M000361_title" class="title">
    <b>test_none</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000361_source')" id="l_M000361_source">show source</a> ]</p>
  <div id="M000361_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_none</span>
88:     <span class="ruby-identifier">assert</span> [].<span class="ruby-identifier">none?</span>
89:     <span class="ruby-identifier">assert</span> [<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">false</span>].<span class="ruby-identifier">none?</span>
90:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">none?</span>
91: 
92:     <span class="ruby-identifier">assert</span> [].<span class="ruby-identifier">none?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
93:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">2</span> ].<span class="ruby-identifier">none?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
94:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>[ <span class="ruby-value">1</span>, <span class="ruby-value">2</span> ].<span class="ruby-identifier">none?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
95:     <span class="ruby-identifier">assert</span> [ <span class="ruby-value">1</span>, <span class="ruby-value">1</span> ].<span class="ruby-identifier">none?</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }
96:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000354" class="method">
  <div id="M000354_title" class="title">
    <b>test_sums</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000354_source')" id="l_M000354_source">show source</a> ]</p>
  <div id="M000354_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/core_ext/enumerable_test.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_sums</span>
29:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">30</span>, [<span class="ruby-value">5</span>, <span class="ruby-value">15</span>, <span class="ruby-value">10</span>].<span class="ruby-identifier">sum</span>
30:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">30</span>, [<span class="ruby-value">5</span>, <span class="ruby-value">15</span>, <span class="ruby-value">10</span>].<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> }
31: 
32:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'abc'</span>, <span class="ruby-node">%w(a b c)</span>.<span class="ruby-identifier">sum</span>
33:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'abc'</span>, <span class="ruby-node">%w(a b c)</span>.<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> }
34: 
35:     <span class="ruby-identifier">payments</span> = [ <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">5</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">15</span>), <span class="ruby-constant">Payment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">10</span>) ]
36:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">30</span>, <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:price</span>)
37:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">price</span> <span class="ruby-operator">*</span> <span class="ruby-value">2</span> }
38: 
39:     <span class="ruby-identifier">payments</span> = [ <span class="ruby-constant">SummablePayment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">5</span>), <span class="ruby-constant">SummablePayment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">15</span>) ]
40:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">SummablePayment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">20</span>), <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span>
41:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">SummablePayment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">20</span>), <span class="ruby-identifier">payments</span>.<span class="ruby-identifier">sum</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> }
42:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>