  <div id="C00000961">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />BasicsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/base_test_rb.html');">activerecord/test/cases/base_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006756&name=quote_column_name" >quote_column_name</a></li>
  <li><a href="index.html?a=M006804&name=test_abstract_class" >test_abstract_class</a></li>
  <li><a href="index.html?a=M006798&name=test_all_with_conditions" >test_all_with_conditions</a></li>
  <li><a href="index.html?a=M006637&name=test_array_content" >test_array_content</a></li>
  <li><a href="index.html?a=M006815&name=test_array_to_xml_including_belongs_to_association" >test_array_to_xml_including_belongs_to_association</a></li>
  <li><a href="index.html?a=M006812&name=test_array_to_xml_including_has_many_association" >test_array_to_xml_including_has_many_association</a></li>
  <li><a href="index.html?a=M006814&name=test_array_to_xml_including_has_one_association" >test_array_to_xml_including_has_one_association</a></li>
  <li><a href="index.html?a=M006813&name=test_array_to_xml_including_methods" >test_array_to_xml_including_methods</a></li>
  <li><a href="index.html?a=M006808&name=test_assert_queries" >test_assert_queries</a></li>
  <li><a href="index.html?a=M006828&name=test_attribute_for_inspect" >test_attribute_for_inspect</a></li>
  <li><a href="index.html?a=M006699&name=test_attribute_keys_on_new_instance" >test_attribute_keys_on_new_instance</a></li>
  <li><a href="index.html?a=M006698&name=test_attribute_present" >test_attribute_present</a></li>
  <li><a href="index.html?a=M006744&name=test_attributes_on_dummy_time" >test_attributes_on_dummy_time</a></li>
  <li><a href="index.html?a=M006755&name=test_auto_id" >test_auto_id</a></li>
  <li><a href="index.html?a=M006805&name=test_base_class" >test_base_class</a></li>
  <li><a href="index.html?a=M006829&name=test_becomes" >test_becomes</a></li>
  <li><a href="index.html?a=M006832&name=test_benchmark_with_log_level" >test_benchmark_with_log_level</a></li>
  <li><a href="index.html?a=M006833&name=test_benchmark_with_use_silence" >test_benchmark_with_use_silence</a></li>
  <li><a href="index.html?a=M006751&name=test_bignum" >test_bignum</a></li>
  <li><a href="index.html?a=M006745&name=test_boolean" >test_boolean</a></li>
  <li><a href="index.html?a=M006685&name=test_boolean_attributes" >test_boolean_attributes</a></li>
  <li><a href="index.html?a=M006746&name=test_boolean_cast_from_string" >test_boolean_cast_from_string</a></li>
  <li><a href="index.html?a=M006643&name=test_case_sensitive_attributes_hash" >test_case_sensitive_attributes_hash</a></li>
  <li><a href="index.html?a=M006770&name=test_class_level_delete" >test_class_level_delete</a></li>
  <li><a href="index.html?a=M006769&name=test_class_level_destroy" >test_class_level_destroy</a></li>
  <li><a href="index.html?a=M006700&name=test_class_name" >test_class_name</a></li>
  <li><a href="index.html?a=M006788&name=test_clear_association_cache_new_record" >test_clear_association_cache_new_record</a></li>
  <li><a href="index.html?a=M006787&name=test_clear_association_cache_stored" >test_clear_association_cache_stored</a></li>
  <li><a href="index.html?a=M006748&name=test_clone" >test_clone</a></li>
  <li><a href="index.html?a=M006750&name=test_clone_preserves_subtype" >test_clone_preserves_subtype</a></li>
  <li><a href="index.html?a=M006749&name=test_clone_with_aggregate_of_same_name_as_attribute" >test_clone_with_aggregate_of_same_name_as_attribute</a></li>
  <li><a href="index.html?a=M006759&name=test_column_name_properly_quoted" >test_column_name_properly_quoted</a></li>
  <li><a href="index.html?a=M006786&name=test_count_with_join" >test_count_with_join</a></li>
  <li><a href="index.html?a=M006644&name=test_create" >test_create</a></li>
  <li><a href="index.html?a=M006652&name=test_create_columns_not_equal_attributes" >test_create_columns_not_equal_attributes</a></li>
  <li><a href="index.html?a=M006651&name=test_create_many" >test_create_many</a></li>
  <li><a href="index.html?a=M006655&name=test_create_many_through_factory_with_block" >test_create_many_through_factory_with_block</a></li>
  <li><a href="index.html?a=M006653&name=test_create_through_factory" >test_create_through_factory</a></li>
  <li><a href="index.html?a=M006654&name=test_create_through_factory_with_block" >test_create_through_factory_with_block</a></li>
  <li><a href="index.html?a=M006834&name=test_create_with_custom_timestamps" >test_create_with_custom_timestamps</a></li>
  <li><a href="index.html?a=M006672&name=test_custom_mutator" >test_custom_mutator</a></li>
  <li><a href="index.html?a=M006719&name=test_customized_primary_key_remains_protected" >test_customized_primary_key_remains_protected</a></li>
  <li><a href="index.html?a=M006720&name=test_customized_primary_key_remains_protected_when_referred_to_as_id" >test_customized_primary_key_remains_protected_when_referred_to_as_id</a></li>
  <li><a href="index.html?a=M006774&name=test_decrement_attribute" >test_decrement_attribute</a></li>
  <li><a href="index.html?a=M006775&name=test_decrement_attribute_by" >test_decrement_attribute_by</a></li>
  <li><a href="index.html?a=M006687&name=test_decrement_counter" >test_decrement_counter</a></li>
  <li><a href="index.html?a=M006752&name=test_default" >test_default</a></li>
  <li><a href="index.html?a=M006702&name=test_default_values" >test_default_values</a></li>
  <li><a href="index.html?a=M006705&name=test_default_values_on_empty_strings" >test_default_values_on_empty_strings</a></li>
  <li><a href="index.html?a=M006779&name=test_define_attr_method_with_block" >test_define_attr_method_with_block</a></li>
  <li><a href="index.html?a=M006778&name=test_define_attr_method_with_value" >test_define_attr_method_with_value</a></li>
  <li><a href="index.html?a=M006673&name=test_delete" >test_delete</a></li>
  <li><a href="index.html?a=M006696&name=test_delete_all" >test_delete_all</a></li>
  <li><a href="index.html?a=M006674&name=test_delete_doesnt_run_callbacks" >test_delete_doesnt_run_callbacks</a></li>
  <li><a href="index.html?a=M006684&name=test_delete_many" >test_delete_many</a></li>
  <li><a href="index.html?a=M006709&name=test_delete_new_record" >test_delete_new_record</a></li>
  <li><a href="index.html?a=M006710&name=test_delete_record_with_associations" >test_delete_record_with_associations</a></li>
  <li><a href="index.html?a=M006806&name=test_descends_from_active_record" >test_descends_from_active_record</a></li>
  <li><a href="index.html?a=M006675&name=test_destroy" >test_destroy</a></li>
  <li><a href="index.html?a=M006682&name=test_destroy_all" >test_destroy_all</a></li>
  <li><a href="index.html?a=M006683&name=test_destroy_many" >test_destroy_many</a></li>
  <li><a href="index.html?a=M006711&name=test_destroy_new_record" >test_destroy_new_record</a></li>
  <li><a href="index.html?a=M006712&name=test_destroy_record_with_associations" >test_destroy_record_with_associations</a></li>
  <li><a href="index.html?a=M006706&name=test_equality" >test_equality</a></li>
  <li><a href="index.html?a=M006707&name=test_equality_of_new_records" >test_equality_of_new_records</a></li>
  <li><a href="index.html?a=M006796&name=test_find_last" >test_find_last</a></li>
  <li><a href="index.html?a=M006801&name=test_find_multiple_ordered_last" >test_find_multiple_ordered_last</a></li>
  <li><a href="index.html?a=M006807&name=test_find_on_abstract_base_class_doesnt_use_type_condition" >test_find_on_abstract_base_class_doesnt_use_type_condition</a></li>
  <li><a href="index.html?a=M006799&name=test_find_ordered_last" >test_find_ordered_last</a></li>
  <li><a href="index.html?a=M006800&name=test_find_reverse_ordered_last" >test_find_reverse_ordered_last</a></li>
  <li><a href="index.html?a=M006803&name=test_find_scoped_ordered_last" >test_find_scoped_ordered_last</a></li>
  <li><a href="index.html?a=M006802&name=test_find_symbol_ordered_last" >test_find_symbol_ordered_last</a></li>
  <li><a href="index.html?a=M006753&name=test_geometric_content" >test_geometric_content</a></li>
  <li><a href="index.html?a=M006641&name=test_hash_content" >test_hash_content</a></li>
  <li><a href="index.html?a=M006650&name=test_hashes_not_mangled" >test_hashes_not_mangled</a></li>
  <li><a href="index.html?a=M006708&name=test_hashing" >test_hashing</a></li>
  <li><a href="index.html?a=M006771&name=test_increment_attribute" >test_increment_attribute</a></li>
  <li><a href="index.html?a=M006773&name=test_increment_attribute_by" >test_increment_attribute_by</a></li>
  <li><a href="index.html?a=M006686&name=test_increment_counter" >test_increment_counter</a></li>
  <li><a href="index.html?a=M006772&name=test_increment_nil_attribute" >test_increment_nil_attribute</a></li>
  <li><a href="index.html?a=M006677&name=test_initialize_with_attributes" >test_initialize_with_attributes</a></li>
  <li><a href="index.html?a=M006678&name=test_initialize_with_invalid_attribute" >test_initialize_with_invalid_attribute</a></li>
  <li><a href="index.html?a=M006823&name=test_inspect_class" >test_inspect_class</a></li>
  <li><a href="index.html?a=M006827&name=test_inspect_class_without_table" >test_inspect_class_without_table</a></li>
  <li><a href="index.html?a=M006824&name=test_inspect_instance" >test_inspect_instance</a></li>
  <li><a href="index.html?a=M006826&name=test_inspect_limited_select_instance" >test_inspect_limited_select_instance</a></li>
  <li><a href="index.html?a=M006825&name=test_inspect_new_instance" >test_inspect_new_instance</a></li>
  <li><a href="index.html?a=M006634&name=test_integers_as_nil" >test_integers_as_nil</a></li>
  <li><a href="index.html?a=M006789&name=test_interpolate_sql" >test_interpolate_sql</a></li>
  <li><a href="index.html?a=M006797&name=test_last" >test_last</a></li>
  <li><a href="index.html?a=M006679&name=test_load" >test_load</a></li>
  <li><a href="index.html?a=M006680&name=test_load_with_condition" >test_load_with_condition</a></li>
  <li><a href="index.html?a=M006721&name=test_mass_assigning_invalid_attribute" >test_mass_assigning_invalid_attribute</a></li>
  <li><a href="index.html?a=M006723&name=test_mass_assignment_accessible" >test_mass_assignment_accessible</a></li>
  <li><a href="index.html?a=M006717&name=test_mass_assignment_protection" >test_mass_assignment_protection</a></li>
  <li><a href="index.html?a=M006718&name=test_mass_assignment_protection_against_class_attribute_writers" >test_mass_assignment_protection_against_class_attribute_writers</a></li>
  <li><a href="index.html?a=M006724&name=test_mass_assignment_protection_inheritance" >test_mass_assignment_protection_inheritance</a></li>
  <li><a href="index.html?a=M006722&name=test_mass_assignment_protection_on_defaults" >test_mass_assignment_protection_on_defaults</a></li>
  <li><a href="index.html?a=M006716&name=test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used" >test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</a></li>
  <li><a href="index.html?a=M006743&name=test_multiparameter_assignment_of_aggregation" >test_multiparameter_assignment_of_aggregation</a></li>
  <li><a href="index.html?a=M006726&name=test_multiparameter_attributes_on_date" >test_multiparameter_attributes_on_date</a></li>
  <li><a href="index.html?a=M006733&name=test_multiparameter_attributes_on_date_with_all_empty" >test_multiparameter_attributes_on_date_with_all_empty</a></li>
  <li><a href="index.html?a=M006729&name=test_multiparameter_attributes_on_date_with_empty_day" >test_multiparameter_attributes_on_date_with_empty_day</a></li>
  <li><a href="index.html?a=M006731&name=test_multiparameter_attributes_on_date_with_empty_day_and_month" >test_multiparameter_attributes_on_date_with_empty_day_and_month</a></li>
  <li><a href="index.html?a=M006730&name=test_multiparameter_attributes_on_date_with_empty_day_and_year" >test_multiparameter_attributes_on_date_with_empty_day_and_year</a></li>
  <li><a href="index.html?a=M006728&name=test_multiparameter_attributes_on_date_with_empty_month" >test_multiparameter_attributes_on_date_with_empty_month</a></li>
  <li><a href="index.html?a=M006727&name=test_multiparameter_attributes_on_date_with_empty_year" >test_multiparameter_attributes_on_date_with_empty_year</a></li>
  <li><a href="index.html?a=M006732&name=test_multiparameter_attributes_on_date_with_empty_year_and_month" >test_multiparameter_attributes_on_date_with_empty_year_and_month</a></li>
  <li><a href="index.html?a=M006734&name=test_multiparameter_attributes_on_time" >test_multiparameter_attributes_on_time</a></li>
  <li><a href="index.html?a=M006740&name=test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion" >test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</a></li>
  <li><a href="index.html?a=M006741&name=test_multiparameter_attributes_on_time_with_empty_seconds" >test_multiparameter_attributes_on_time_with_empty_seconds</a></li>
  <li><a href="index.html?a=M006735&name=test_multiparameter_attributes_on_time_with_old_date" >test_multiparameter_attributes_on_time_with_old_date</a></li>
  <li><a href="index.html?a=M006739&name=test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes" >test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</a></li>
  <li><a href="index.html?a=M006737&name=test_multiparameter_attributes_on_time_with_time_zone_aware_attributes" >test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</a></li>
  <li><a href="index.html?a=M006738&name=test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false" >test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</a></li>
  <li><a href="index.html?a=M006736&name=test_multiparameter_attributes_on_time_with_utc" >test_multiparameter_attributes_on_time_with_utc</a></li>
  <li><a href="index.html?a=M006742&name=test_multiparameter_mass_assignment_protector" >test_multiparameter_mass_assignment_protector</a></li>
  <li><a href="index.html?a=M006747&name=test_new_record_returns_boolean" >test_new_record_returns_boolean</a></li>
  <li><a href="index.html?a=M006764&name=test_nil_serialized_attribute_with_class_constraint" >test_nil_serialized_attribute_with_class_constraint</a></li>
  <li><a href="index.html?a=M006669&name=test_non_attribute_access_and_assignment" >test_non_attribute_access_and_assignment</a></li>
  <li><a href="index.html?a=M006701&name=test_null_fields" >test_null_fields</a></li>
  <li><a href="index.html?a=M006754&name=test_numeric_fields" >test_numeric_fields</a></li>
  <li><a href="index.html?a=M006670&name=test_preserving_date_objects" >test_preserving_date_objects</a></li>
  <li><a href="index.html?a=M006671&name=test_preserving_time_objects" >test_preserving_time_objects</a></li>
  <li><a href="index.html?a=M006666&name=test_query_attribute_boolean" >test_query_attribute_boolean</a></li>
  <li><a href="index.html?a=M006665&name=test_query_attribute_number" >test_query_attribute_number</a></li>
  <li><a href="index.html?a=M006664&name=test_query_attribute_string" >test_query_attribute_string</a></li>
  <li><a href="index.html?a=M006667&name=test_query_attribute_with_custom_fields" >test_query_attribute_with_custom_fields</a></li>
  <li><a href="index.html?a=M006767&name=test_quote" >test_quote</a></li>
  <li><a href="index.html?a=M006768&name=test_quote_chars" >test_quote_chars</a></li>
  <li><a href="index.html?a=M006757&name=test_quote_keys" >test_quote_keys</a></li>
  <li><a href="index.html?a=M006760&name=test_quoting_arrays" >test_quoting_arrays</a></li>
  <li><a href="index.html?a=M006660&name=test_read_attribute" >test_read_attribute</a></li>
  <li><a href="index.html?a=M006661&name=test_read_attribute_when_false" >test_read_attribute_when_false</a></li>
  <li><a href="index.html?a=M006662&name=test_read_attribute_when_true" >test_read_attribute_when_true</a></li>
  <li><a href="index.html?a=M006638&name=test_read_attributes_before_type_cast" >test_read_attributes_before_type_cast</a></li>
  <li><a href="index.html?a=M006639&name=test_read_attributes_before_type_cast_on_boolean" >test_read_attributes_before_type_cast_on_boolean</a></li>
  <li><a href="index.html?a=M006640&name=test_read_attributes_before_type_cast_on_datetime" >test_read_attributes_before_type_cast_on_datetime</a></li>
  <li><a href="index.html?a=M006663&name=test_read_write_boolean_attribute" >test_read_write_boolean_attribute</a></li>
  <li><a href="index.html?a=M006668&name=test_reader_for_invalid_column_names" >test_reader_for_invalid_column_names</a></li>
  <li><a href="index.html?a=M006725&name=test_readonly_attributes" >test_readonly_attributes</a></li>
  <li><a href="index.html?a=M006676&name=test_record_not_found_exception" >test_record_not_found_exception</a></li>
  <li><a href="index.html?a=M006777&name=test_reload" >test_reload</a></li>
  <li><a href="index.html?a=M006636&name=test_respond_to?" >test_respond_to?</a></li>
  <li><a href="index.html?a=M006645&name=test_save!" >test_save!</a></li>
  <li><a href="index.html?a=M006648&name=test_save_for_record_with_only_primary_key" >test_save_for_record_with_only_primary_key</a></li>
  <li><a href="index.html?a=M006649&name=test_save_for_record_with_only_primary_key_that_is_provided" >test_save_for_record_with_only_primary_key_that_is_provided</a></li>
  <li><a href="index.html?a=M006647&name=test_save_nil_string_attributes" >test_save_nil_string_attributes</a></li>
  <li><a href="index.html?a=M006646&name=test_save_null_string_attributes" >test_save_null_string_attributes</a></li>
  <li><a href="index.html?a=M006790&name=test_scoped_find_conditions" >test_scoped_find_conditions</a></li>
  <li><a href="index.html?a=M006791&name=test_scoped_find_limit_offset" >test_scoped_find_limit_offset</a></li>
  <li><a href="index.html?a=M006793&name=test_scoped_find_limit_offset_including_has_many_association" >test_scoped_find_limit_offset_including_has_many_association</a></li>
  <li><a href="index.html?a=M006792&name=test_scoped_find_order" >test_scoped_find_order</a></li>
  <li><a href="index.html?a=M006794&name=test_scoped_find_order_including_has_many_association" >test_scoped_find_order_including_has_many_association</a></li>
  <li><a href="index.html?a=M006795&name=test_scoped_find_with_group_and_having" >test_scoped_find_with_group_and_having</a></li>
  <li><a href="index.html?a=M006761&name=test_serialized_attribute" >test_serialized_attribute</a></li>
  <li><a href="index.html?a=M006766&name=test_serialized_attribute_with_class_constraint" >test_serialized_attribute_with_class_constraint</a></li>
  <li><a href="index.html?a=M006763&name=test_serialized_string_attribute" >test_serialized_string_attribute</a></li>
  <li><a href="index.html?a=M006762&name=test_serialized_time_attribute" >test_serialized_time_attribute</a></li>
  <li><a href="index.html?a=M006633&name=test_set_attributes" >test_set_attributes</a></li>
  <li><a href="index.html?a=M006635&name=test_set_attributes_with_block" >test_set_attributes_with_block</a></li>
  <li><a href="index.html?a=M006785&name=test_set_inheritance_column_with_block" >test_set_inheritance_column_with_block</a></li>
  <li><a href="index.html?a=M006784&name=test_set_inheritance_column_with_value" >test_set_inheritance_column_with_value</a></li>
  <li><a href="index.html?a=M006783&name=test_set_primary_key_with_block" >test_set_primary_key_with_block</a></li>
  <li><a href="index.html?a=M006782&name=test_set_primary_key_with_value" >test_set_primary_key_with_value</a></li>
  <li><a href="index.html?a=M006781&name=test_set_table_name_with_block" >test_set_table_name_with_block</a></li>
  <li><a href="index.html?a=M006780&name=test_set_table_name_with_value" >test_set_table_name_with_value</a></li>
  <li><a href="index.html?a=M006765&name=test_should_raise_exception_on_serialized_attribute_with_type_mismatch" >test_should_raise_exception_on_serialized_attribute_with_type_mismatch</a></li>
  <li><a href="index.html?a=M006831&name=test_silence_sets_log_level_back_to_level_before_yield" >test_silence_sets_log_level_back_to_level_before_yield</a></li>
  <li><a href="index.html?a=M006830&name=test_silence_sets_log_level_to_error_in_block" >test_silence_sets_log_level_to_error_in_block</a></li>
  <li><a href="index.html?a=M006758&name=test_sql_injection_via_find" >test_sql_injection_via_find</a></li>
  <li><a href="index.html?a=M006632&name=test_table_exists" >test_table_exists</a></li>
  <li><a href="index.html?a=M006681&name=test_table_name_guesses" >test_table_name_guesses</a></li>
  <li><a href="index.html?a=M006822&name=test_to_param_should_return_string" >test_to_param_should_return_string</a></li>
  <li><a href="index.html?a=M006809&name=test_to_xml" >test_to_xml</a></li>
  <li><a href="index.html?a=M006816&name=test_to_xml_including_belongs_to_association" >test_to_xml_including_belongs_to_association</a></li>
  <li><a href="index.html?a=M006811&name=test_to_xml_including_has_many_association" >test_to_xml_including_has_many_association</a></li>
  <li><a href="index.html?a=M006819&name=test_to_xml_including_methods" >test_to_xml_including_methods</a></li>
  <li><a href="index.html?a=M006817&name=test_to_xml_including_multiple_associations" >test_to_xml_including_multiple_associations</a></li>
  <li><a href="index.html?a=M006818&name=test_to_xml_including_multiple_associations_with_options" >test_to_xml_including_multiple_associations_with_options</a></li>
  <li><a href="index.html?a=M006810&name=test_to_xml_skipping_attributes" >test_to_xml_skipping_attributes</a></li>
  <li><a href="index.html?a=M006820&name=test_to_xml_with_block" >test_to_xml_with_block</a></li>
  <li><a href="index.html?a=M006776&name=test_toggle_attribute" >test_toggle_attribute</a></li>
  <li><a href="index.html?a=M006821&name=test_type_name_with_module_should_handle_beginning" >test_type_name_with_module_should_handle_beginning</a></li>
  <li><a href="index.html?a=M006656&name=test_update" >test_update</a></li>
  <li><a href="index.html?a=M006689&name=test_update_all" >test_update_all</a></li>
  <li><a href="index.html?a=M006693&name=test_update_all_ignores_order_without_limit_from_association" >test_update_all_ignores_order_without_limit_from_association</a></li>
  <li><a href="index.html?a=M006690&name=test_update_all_with_hash" >test_update_all_with_hash</a></li>
  <li><a href="index.html?a=M006691&name=test_update_all_with_non_standard_table_name" >test_update_all_with_non_standard_table_name</a></li>
  <li><a href="index.html?a=M006692&name=test_update_all_with_order_and_limit" >test_update_all_with_order_and_limit</a></li>
  <li><a href="index.html?a=M006694&name=test_update_all_with_order_and_limit_updates_subset_only" >test_update_all_with_order_and_limit_updates_subset_only</a></li>
  <li><a href="index.html?a=M006642&name=test_update_array_content" >test_update_array_content</a></li>
  <li><a href="index.html?a=M006713&name=test_update_attribute" >test_update_attribute</a></li>
  <li><a href="index.html?a=M006714&name=test_update_attributes" >test_update_attributes</a></li>
  <li><a href="index.html?a=M006715&name=test_update_attributes!" >test_update_attributes!</a></li>
  <li><a href="index.html?a=M006697&name=test_update_by_condition" >test_update_by_condition</a></li>
  <li><a href="index.html?a=M006657&name=test_update_columns_not_equal_attributes" >test_update_columns_not_equal_attributes</a></li>
  <li><a href="index.html?a=M006688&name=test_update_counter" >test_update_counter</a></li>
  <li><a href="index.html?a=M006658&name=test_update_for_record_with_only_primary_key" >test_update_for_record_with_only_primary_key</a></li>
  <li><a href="index.html?a=M006695&name=test_update_many" >test_update_many</a></li>
  <li><a href="index.html?a=M006703&name=test_utc_as_time_zone" >test_utc_as_time_zone</a></li>
  <li><a href="index.html?a=M006704&name=test_utc_as_time_zone_and_new" >test_utc_as_time_zone_and_new</a></li>
  <li><a href="index.html?a=M006659&name=test_write_attribute" >test_write_attribute</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/BasicsTest/Geometric.html');" class="link">BasicsTest::Geometric</a>"<br />
Class "<a href="#" onclick="jsHref('classes/BasicsTest/NumericData.html');" class="link">BasicsTest::NumericData</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">MyObject</td>
    <td>=</td>
    <td class="attr-value">Struct.new :attribute1, :attribute2</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M006756" class="method">
  <div id="M006756_title" class="title">
    <b>quote_column_name</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006756_source')" id="l_M006756_source">show source</a> ]</p>
  <div id="M006756_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1437</span>
1437:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>)
1438:     <span class="ruby-node">&quot;&lt;#{name}&gt;&quot;</span>
1439:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006804" class="method">
  <div id="M006804_title" class="title">
    <b>test_abstract_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006804_source')" id="l_M006804_source">show source</a> ]</p>
  <div id="M006804_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1851</span>
1851:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_abstract_class</span>
1852:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">abstract_class?</span>
1853:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">abstract_class?</span>
1854:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">abstract_class?</span>
1855:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006798" class="method">
  <div id="M006798_title" class="title">
    <b>test_all_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006798_source')" id="l_M006798_source">show source</a> ]</p>
  <div id="M006798_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1820</span>
1820:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_all_with_conditions</span>
1821:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>), <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>)
1822:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006637" class="method">
  <div id="M006637_title" class="title">
    <b>test_array_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006637_source')" id="l_M006637_source">show source</a> ]</p>
  <div id="M006637_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 125</span>
125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_content</span>
126:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
127:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = <span class="ruby-node">%w( one two three )</span>
128:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
129: 
130:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three )</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>)
131:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006815" class="method">
  <div id="M006815_title" class="title">
    <b>test_array_to_xml_including_belongs_to_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006815_source')" id="l_M006815_source">show source</a> ]</p>
  <div id="M006815_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1998</span>
1998:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_belongs_to_association</span>
1999:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:another_client</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2000:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2001:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2002:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:another_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2003:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006812" class="method">
  <div id="M006812_title" class="title">
    <b>test_array_to_xml_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006812_source')" id="l_M006812_source">show source</a> ]</p>
  <div id="M006812_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1981</span>
1981:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_has_many_association</span>
1982:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>)
1983:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
1984:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006814" class="method">
  <div id="M006814_title" class="title">
    <b>test_array_to_xml_including_has_one_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006814_source')" id="l_M006814_source">show source</a> ]</p>
  <div id="M006814_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1992</span>
1992:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_has_one_association</span>
1993:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:rails_core</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account</span>)
1994:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1995:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:rails_core</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1996:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006813" class="method">
  <div id="M006813_title" class="title">
    <b>test_array_to_xml_including_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006813_source')" id="l_M006813_source">show source</a> ]</p>
  <div id="M006813_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1986</span>
1986:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_methods</span>
1987:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:topic_id</span> ])
1988:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:first).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
1989:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:second).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
1990:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006808" class="method">
  <div id="M006808_title" class="title">
    <b>test_assert_queries</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006808_source')" id="l_M006808_source">show source</a> ]</p>
  <div id="M006808_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1910</span>
1910:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assert_queries</span>
1911:     <span class="ruby-identifier">query</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">'select count(*) from developers'</span> }
1912:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) { <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">query</span>.<span class="ruby-identifier">call</span> } }
1913:     <span class="ruby-identifier">assert_queries</span> <span class="ruby-value">1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">query</span>
1914:     <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">true</span> }
1915:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006828" class="method">
  <div id="M006828_title" class="title">
    <b>test_attribute_for_inspect</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006828_source')" id="l_M006828_source">show source</a> ]</p>
  <div id="M006828_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2079</span>
2079:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_for_inspect</span>
2080:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
2081:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;The First Topic Now Has A Title With\nNewlines And More Than 50 Characters&quot;</span>
2082: 
2083:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%(&quot;#{t.written_on.to_s(:db)}&quot;)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">:written_on</span>)
2084:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;The First Topic Now Has A Title With\nNewlines And M...&quot;'</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">:title</span>)
2085:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006699" class="method">
  <div id="M006699_title" class="title">
    <b>test_attribute_keys_on_new_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006699_source')" id="l_M006699_source">show source</a> ]</p>
  <div id="M006699_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 733</span>
733:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_keys_on_new_instance</span>
734:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
735:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span>, <span class="ruby-value str">&quot;The topics table has a title column, so it should be nil&quot;</span>
736:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title2</span> }
737:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006698" class="method">
  <div id="M006698_title" class="title">
    <b>test_attribute_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006698_source')" id="l_M006698_source">show source</a> ]</p>
  <div id="M006698_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 724</span>
724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_present</span>
725:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
726:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;hello there!&quot;</span>
727:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">written_on</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
728:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;title&quot;</span>)
729:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;written_on&quot;</span>)
730:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;content&quot;</span>)
731:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006744" class="method">
  <div id="M006744_title" class="title">
    <b>test_attributes_on_dummy_time</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006744_source')" id="l_M006744_source">show source</a> ]</p>
  <div id="M006744_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1210</span>
1210:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_on_dummy_time</span>
1211:     <span class="ruby-comment cmt"># Oracle, and Sybase do not have a TIME datatype.</span>
1212:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>, <span class="ruby-identifier">:SybaseAdapter</span>)
1213: 
1214:     <span class="ruby-identifier">attributes</span> = {
1215:       <span class="ruby-value str">&quot;bonus_time&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;5:42:00AM&quot;</span>
1216:     }
1217:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1218:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1219:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">5</span>, <span class="ruby-value">42</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
1220:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006755" class="method">
  <div id="M006755_title" class="title">
    <b>test_auto_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006755_source')" id="l_M006755_source">show source</a> ]</p>
  <div id="M006755_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1431</span>
1431:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_auto_id</span>
1432:     <span class="ruby-identifier">auto</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">new</span>
1433:     <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">save</span>
1434:     <span class="ruby-identifier">assert</span> (<span class="ruby-identifier">auto</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
1435:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006805" class="method">
  <div id="M006805_title" class="title">
    <b>test_base_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006805_source')" id="l_M006805_source">show source</a> ]</p>
  <div id="M006805_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1857</span>
1857:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_base_class</span>
1858:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">LoosePerson</span>,     <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">base_class</span>
1859:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">LooseDescendant</span>, <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">base_class</span>
1860:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">TightPerson</span>,     <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">base_class</span>
1861:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">TightPerson</span>,     <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">base_class</span>
1862: 
1863:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">base_class</span>
1864:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">SpecialPost</span>.<span class="ruby-identifier">base_class</span>
1865:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">StiPost</span>.<span class="ruby-identifier">base_class</span>
1866:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">SubStiPost</span>, <span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">base_class</span>
1867:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006829" class="method">
  <div id="M006829_title" class="title">
    <b>test_becomes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006829_source')" id="l_M006829_source">show source</a> ]</p>
  <div id="M006829_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2087</span>
2087:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_becomes</span>
2088:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Reply</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">Reply</span>)
2089:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">Reply</span>).<span class="ruby-identifier">title</span>
2090:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006832" class="method">
  <div id="M006832_title" class="title">
    <b>test_benchmark_with_log_level</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006832_source')" id="l_M006832_source">show source</a> ]</p>
  <div id="M006832_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2118</span>
2118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_benchmark_with_log_level</span>
2119:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2120:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2121:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2122:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
2123:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Debug Topic Count&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2124:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Warn Topic Count&quot;</span>,  <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>)  { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2125:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Error Topic Count&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2126:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/Debug Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2127:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Warn Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2128:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Error Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2129:   <span class="ruby-keyword kw">ensure</span>
2130:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2131:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006833" class="method">
  <div id="M006833_title" class="title">
    <b>test_benchmark_with_use_silence</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006833_source')" id="l_M006833_source">show source</a> ]</p>
  <div id="M006833_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2133</span>
2133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_benchmark_with_use_silence</span>
2134:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2135:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2136:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2137:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Logging&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-keyword kw">true</span>) { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;Loud&quot;</span> }
2138:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Logging&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-keyword kw">false</span>)  { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;Quiet&quot;</span> }
2139:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/Loud/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2140:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Quiet/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2141:   <span class="ruby-keyword kw">ensure</span>
2142:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2143:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006751" class="method">
  <div id="M006751_title" class="title">
    <b>test_bignum</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006751_source')" id="l_M006751_source">show source</a> ]</p>
  <div id="M006751_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1313</span>
1313:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bignum</span>
1314:     <span class="ruby-identifier">company</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1315:     <span class="ruby-identifier">company</span>.<span class="ruby-identifier">rating</span> = <span class="ruby-value">2147483647</span>
1316:     <span class="ruby-identifier">company</span>.<span class="ruby-identifier">save</span>
1317:     <span class="ruby-identifier">company</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1318:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2147483647</span>, <span class="ruby-identifier">company</span>.<span class="ruby-identifier">rating</span>
1319:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006745" class="method">
  <div id="M006745_title" class="title">
    <b>test_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006745_source')" id="l_M006745_source">show source</a> ]</p>
  <div id="M006745_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1222</span>
1222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean</span>
1223:     <span class="ruby-identifier">b_nil</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
1224:     <span class="ruby-identifier">nil_id</span> = <span class="ruby-identifier">b_nil</span>.<span class="ruby-identifier">id</span>
1225:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
1226:     <span class="ruby-identifier">false_id</span> = <span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">id</span>
1227:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> })
1228:     <span class="ruby-identifier">true_id</span> = <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">id</span>
1229: 
1230:     <span class="ruby-identifier">b_nil</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">nil_id</span>)
1231:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">b_nil</span>.<span class="ruby-identifier">value</span>
1232:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">false_id</span>)
1233:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">value?</span>
1234:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">true_id</span>)
1235:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">value?</span>
1236:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006685" class="method">
  <div id="M006685_title" class="title">
    <b>test_boolean_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006685_source')" id="l_M006685_source">show source</a> ]</p>
  <div id="M006685_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 608</span>
608:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_attributes</span>
609:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
610:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">approved?</span>
611:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006746" class="method">
  <div id="M006746_title" class="title">
    <b>test_boolean_cast_from_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006746_source')" id="l_M006746_source">show source</a> ]</p>
  <div id="M006746_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1238</span>
1238:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_cast_from_string</span>
1239:     <span class="ruby-identifier">b_blank</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> })
1240:     <span class="ruby-identifier">blank_id</span> = <span class="ruby-identifier">b_blank</span>.<span class="ruby-identifier">id</span>
1241:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;0&quot;</span> })
1242:     <span class="ruby-identifier">false_id</span> = <span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">id</span>
1243:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span> })
1244:     <span class="ruby-identifier">true_id</span> = <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">id</span>
1245: 
1246:     <span class="ruby-identifier">b_blank</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">blank_id</span>)
1247:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">b_blank</span>.<span class="ruby-identifier">value</span>
1248:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">false_id</span>)
1249:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">value?</span>
1250:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">true_id</span>)
1251:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">value?</span>
1252:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006643" class="method">
  <div id="M006643_title" class="title">
    <b>test_case_sensitive_attributes_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006643_source')" id="l_M006643_source">show source</a> ]</p>
  <div id="M006643_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 179</span>
179:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_case_sensitive_attributes_hash</span>
180:     <span class="ruby-comment cmt"># DB2 is not case-sensitive</span>
181:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:DB2Adapter</span>)
182: 
183:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@loaded_fixtures</span>[<span class="ruby-value str">'computers'</span>][<span class="ruby-value str">'workstation'</span>].<span class="ruby-identifier">to_hash</span>, <span class="ruby-constant">Computer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">attributes</span>
184:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006770" class="method">
  <div id="M006770_title" class="title">
    <b>test_class_level_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006770_source')" id="l_M006770_source">show source</a> ]</p>
  <div id="M006770_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1552</span>
1552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_level_delete</span>
1553:     <span class="ruby-identifier">should_be_destroyed_reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>)
1554:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">should_be_destroyed_reply</span>
1555: 
1556:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">1</span>)
1557:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) }
1558:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">should_be_destroyed_reply</span>.<span class="ruby-identifier">id</span>) }
1559:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006769" class="method">
  <div id="M006769_title" class="title">
    <b>test_class_level_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006769_source')" id="l_M006769_source">show source</a> ]</p>
  <div id="M006769_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1543</span>
1543:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_level_destroy</span>
1544:     <span class="ruby-identifier">should_be_destroyed_reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>)
1545:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">should_be_destroyed_reply</span>
1546: 
1547:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-value">1</span>)
1548:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) }
1549:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">should_be_destroyed_reply</span>.<span class="ruby-identifier">id</span>) }
1550:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006700" class="method">
  <div id="M006700_title" class="title">
    <b>test_class_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006700_source')" id="l_M006700_source">show source</a> ]</p>
  <div id="M006700_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 739</span>
739:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_name</span>
740:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;firms&quot;</span>)
741:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Category&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;categories&quot;</span>)
742:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;AccountHolder&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;account_holder&quot;</span>)
743: 
744:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
745:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firms&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms&quot;</span> )
746:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
747: 
748:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
749:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;test_firms&quot;</span> )
750:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_tests&quot;</span>
751:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;test_firms_tests&quot;</span> )
752:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
753:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms_tests&quot;</span> )
754:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
755:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms&quot;</span> )
756:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006788" class="method">
  <div id="M006788_title" class="title">
    <b>test_clear_association_cache_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006788_source')" id="l_M006788_source">show source</a> ]</p>
  <div id="M006788_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1722</span>
1722:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_association_cache_new_record</span>
1723:      <span class="ruby-identifier">firm</span>            = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
1724:      <span class="ruby-identifier">client_stored</span>   = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
1725:      <span class="ruby-identifier">client_new</span>      = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
1726:      <span class="ruby-identifier">client_new</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;The Joneses&quot;</span>
1727:      <span class="ruby-identifier">clients</span>         = [ <span class="ruby-identifier">client_stored</span>, <span class="ruby-identifier">client_new</span> ]
1728: 
1729:      <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>    <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">clients</span>
1730:      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>
1731: 
1732:      <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clear_association_cache</span>
1733:      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>
1734:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006787" class="method">
  <div id="M006787_title" class="title">
    <b>test_clear_association_cache_stored</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006787_source')" id="l_M006787_source">show source</a> ]</p>
  <div id="M006787_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1714</span>
1714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_association_cache_stored</span>
1715:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1716:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">firm</span>
1717: 
1718:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clear_association_cache</span>
1719:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }.<span class="ruby-identifier">sort</span>
1720:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006748" class="method">
  <div id="M006748_title" class="title">
    <b>test_clone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006748_source')" id="l_M006748_source">show source</a> ]</p>
  <div id="M006748_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1259</span>
1259:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone</span>
1260:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1261:     <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-keyword kw">nil</span>
1262:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">clone</span> }
1263:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>
1264:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">new_record?</span>
1265: 
1266:     <span class="ruby-comment cmt"># test if the attributes have been cloned</span>
1267:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;a&quot;</span>
1268:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;b&quot;</span>
1269:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
1270:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>
1271: 
1272:     <span class="ruby-comment cmt"># test if the attribute values have been cloned</span>
1273:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = {<span class="ruby-value str">&quot;a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;b&quot;</span>}
1274:     <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">clone</span>
1275:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>[<span class="ruby-value str">&quot;a&quot;</span>] = <span class="ruby-value str">&quot;c&quot;</span>
1276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>[<span class="ruby-value str">&quot;a&quot;</span>]
1277: 
1278:     <span class="ruby-comment cmt">#test if attributes set as part of after_initialize are cloned correctly</span>
1279:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_email_address</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">author_email_address</span>
1280: 
1281:     <span class="ruby-comment cmt"># test if saved clone object differs from original</span>
1282:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">save</span>
1283:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">new_record?</span>
1284:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>
1285:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006750" class="method">
  <div id="M006750_title" class="title">
    <b>test_clone_preserves_subtype</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006750_source')" id="l_M006750_source">show source</a> ]</p>
  <div id="M006750_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1307</span>
1307:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone_preserves_subtype</span>
1308:     <span class="ruby-identifier">clone</span> = <span class="ruby-keyword kw">nil</span>
1309:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">clone</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>).<span class="ruby-identifier">clone</span> }
1310:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Client</span>, <span class="ruby-identifier">clone</span>
1311:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006749" class="method">
  <div id="M006749_title" class="title">
    <b>test_clone_with_aggregate_of_same_name_as_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006749_source')" id="l_M006749_source">show source</a> ]</p>
  <div id="M006749_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1287</span>
1287:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone_with_aggregate_of_same_name_as_attribute</span>
1288:     <span class="ruby-identifier">dev</span> = <span class="ruby-constant">DeveloperWithAggregate</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1289:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">DeveloperSalary</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>
1290: 
1291:     <span class="ruby-identifier">clone</span> = <span class="ruby-keyword kw">nil</span>
1292:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">clone</span> = <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">clone</span> }
1293:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">DeveloperSalary</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>
1294:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1295:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">new_record?</span>
1296: 
1297:     <span class="ruby-comment cmt"># test if the attributes have been cloned</span>
1298:     <span class="ruby-identifier">original_amount</span> = <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1299:     <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span> = <span class="ruby-value">1</span>
1300:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_amount</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1301: 
1302:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">save</span>
1303:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">clone</span>.<span class="ruby-identifier">new_record?</span>
1304:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">id</span>
1305:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006759" class="method">
  <div id="M006759_title" class="title">
    <b>test_column_name_properly_quoted</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006759_source')" id="l_M006759_source">show source</a> ]</p>
  <div id="M006759_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1456</span>
1456:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_name_properly_quoted</span>
1457:     <span class="ruby-identifier">col_record</span> = <span class="ruby-constant">ColumnName</span>.<span class="ruby-identifier">new</span>
1458:     <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">references</span> = <span class="ruby-value">40</span>
1459:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">save</span>
1460:     <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">references</span> = <span class="ruby-value">41</span>
1461:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">save</span>
1462:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">c2</span> = <span class="ruby-constant">ColumnName</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">id</span>)
1463:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">41</span>, <span class="ruby-identifier">c2</span>.<span class="ruby-identifier">references</span>)
1464:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006786" class="method">
  <div id="M006786_title" class="title">
    <b>test_count_with_join</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006786_source')" id="l_M006786_source">show source</a> ]</p>
  <div id="M006786_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1678</span>
1678:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_with_join</span>
1679:     <span class="ruby-identifier">res</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(*) FROM posts LEFT JOIN comments ON posts.id=comments.post_id WHERE posts.#{QUOTED_TYPE} = 'Post'&quot;</span>
1680: 
1681:     <span class="ruby-identifier">res2</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.#{QUOTED_TYPE} = 'Post'&quot;</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;LEFT JOIN comments ON posts.id=comments.post_id&quot;</span>)
1682:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res</span>, <span class="ruby-identifier">res2</span>
1683: 
1684:     <span class="ruby-identifier">res3</span> = <span class="ruby-keyword kw">nil</span>
1685:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1686:       <span class="ruby-identifier">res3</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.#{QUOTED_TYPE} = 'Post'&quot;</span>,
1687:                         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;LEFT JOIN comments ON posts.id=comments.post_id&quot;</span>)
1688:     <span class="ruby-keyword kw">end</span>
1689:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res</span>, <span class="ruby-identifier">res3</span>
1690: 
1691:     <span class="ruby-identifier">res4</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(p.id) FROM posts p, comments co WHERE p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>
1692:     <span class="ruby-identifier">res5</span> = <span class="ruby-keyword kw">nil</span>
1693:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1694:       <span class="ruby-identifier">res5</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>,
1695:                         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p, comments co&quot;</span>,
1696:                         <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p.id&quot;</span>)
1697:     <span class="ruby-keyword kw">end</span>
1698: 
1699:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res4</span>, <span class="ruby-identifier">res5</span>
1700: 
1701:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SQLite2Adapter</span>, <span class="ruby-identifier">:DeprecatedSQLiteAdapter</span>)
1702:       <span class="ruby-identifier">res6</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(DISTINCT p.id) FROM posts p, comments co WHERE p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>
1703:       <span class="ruby-identifier">res7</span> = <span class="ruby-keyword kw">nil</span>
1704:       <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1705:         <span class="ruby-identifier">res7</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>,
1706:                           <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p, comments co&quot;</span>,
1707:                           <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p.id&quot;</span>,
1708:                           <span class="ruby-identifier">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1709:       <span class="ruby-keyword kw">end</span>
1710:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res6</span>, <span class="ruby-identifier">res7</span>
1711:     <span class="ruby-keyword kw">end</span>
1712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006644" class="method">
  <div id="M006644_title" class="title">
    <b>test_create</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006644_source')" id="l_M006644_source">show source</a> ]</p>
  <div id="M006644_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 186</span>
186:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create</span>
187:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
188:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;New Topic&quot;</span>
189:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
190:     <span class="ruby-identifier">topic_reloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
191:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;New Topic&quot;</span>, <span class="ruby-identifier">topic_reloaded</span>.<span class="ruby-identifier">title</span>)
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006652" class="method">
  <div id="M006652_title" class="title">
    <b>test_create_columns_not_equal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006652_source')" id="l_M006652_source">show source</a> ]</p>
  <div id="M006652_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_columns_not_equal_attributes</span>
246:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
247:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">'Another New Topic'</span>
248:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">'does_not_exist'</span>, <span class="ruby-value str">'test'</span>
249:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span> }
250:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006651" class="method">
  <div id="M006651_title" class="title">
    <b>test_create_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006651_source')" id="l_M006651_source">show source</a> ]</p>
  <div id="M006651_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 239</span>
239:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_many</span>
240:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>([ { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first&quot;</span> }, { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;second&quot;</span> }])
241:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
242:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;first&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
243:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006655" class="method">
  <div id="M006655_title" class="title">
    <b>test_create_many_through_factory_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006655_source')" id="l_M006655_source">show source</a> ]</p>
  <div id="M006655_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_many_through_factory_with_block</span>
268:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>([ { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first&quot;</span> }, { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;second&quot;</span> }]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
269:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;David&quot;</span>
270:     <span class="ruby-keyword kw">end</span>
271:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
272:     <span class="ruby-identifier">topic1</span>, <span class="ruby-identifier">topic2</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topics</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topics</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">id</span>)
273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;first&quot;</span>, <span class="ruby-identifier">topic1</span>.<span class="ruby-identifier">title</span>
274:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic1</span>.<span class="ruby-identifier">author_name</span>
275:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;second&quot;</span>, <span class="ruby-identifier">topic2</span>.<span class="ruby-identifier">title</span>
276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic2</span>.<span class="ruby-identifier">author_name</span>
277:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006653" class="method">
  <div id="M006653_title" class="title">
    <b>test_create_through_factory</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006653_source')" id="l_M006653_source">show source</a> ]</p>
  <div id="M006653_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 252</span>
252:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_through_factory</span>
253:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>)
254:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
255:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topicReloaded</span>)
256:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006654" class="method">
  <div id="M006654_title" class="title">
    <b>test_create_through_factory_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006654_source')" id="l_M006654_source">show source</a> ]</p>
  <div id="M006654_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_through_factory_with_block</span>
259:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
260:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;David&quot;</span>
261:     <span class="ruby-keyword kw">end</span>
262:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
263:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;New Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
264:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
265:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006834" class="method">
  <div id="M006834_title" class="title">
    <b>test_create_with_custom_timestamps</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006834_source')" id="l_M006834_source">show source</a> ]</p>
  <div id="M006834_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2145</span>
2145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_with_custom_timestamps</span>
2146:     <span class="ruby-identifier">custom_datetime</span> = <span class="ruby-value">1</span>.<span class="ruby-identifier">hour</span>.<span class="ruby-identifier">ago</span>.<span class="ruby-identifier">beginning_of_day</span>
2147: 
2148:     <span class="ruby-node">%w(created_at created_on updated_at updated_on)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
2149:       <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">LiveParrot</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;colombian&quot;</span>, <span class="ruby-identifier">attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_datetime</span>)
2150:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">custom_datetime</span>, <span class="ruby-identifier">parrot</span>[<span class="ruby-identifier">attribute</span>]
2151:     <span class="ruby-keyword kw">end</span>
2152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006672" class="method">
  <div id="M006672_title" class="title">
    <b>test_custom_mutator</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006672_source')" id="l_M006672_source">show source</a> ]</p>
  <div id="M006672_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 467</span>
467:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_custom_mutator</span>
468:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
469:     <span class="ruby-comment cmt"># This mutator is protected in the class definition</span>
470:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:approved=</span>, <span class="ruby-keyword kw">true</span>)
471:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@custom_approved&quot;</span>)
472:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006719" class="method">
  <div id="M006719_title" class="title">
    <b>test_customized_primary_key_remains_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006719_source')" id="l_M006719_source">show source</a> ]</p>
  <div id="M006719_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 934</span>
934:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_customized_primary_key_remains_protected</span>
935:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:nick</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'webster123'</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
936:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">id</span>
937: 
938:     <span class="ruby-identifier">keyboard</span> = <span class="ruby-constant">Keyboard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:key_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
939:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">keyboard</span>.<span class="ruby-identifier">id</span>
940:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006720" class="method">
  <div id="M006720_title" class="title">
    <b>test_customized_primary_key_remains_protected_when_referred_to_as_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006720_source')" id="l_M006720_source">show source</a> ]</p>
  <div id="M006720_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 942</span>
942:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_customized_primary_key_remains_protected_when_referred_to_as_id</span>
943:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'webster123'</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
944:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">id</span>
945: 
946:     <span class="ruby-identifier">keyboard</span> = <span class="ruby-constant">Keyboard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
947:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">keyboard</span>.<span class="ruby-identifier">id</span>
948:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006774" class="method">
  <div id="M006774_title" class="title">
    <b>test_decrement_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006774_source')" id="l_M006774_source">show source</a> ]</p>
  <div id="M006774_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1585</span>
1585:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_attribute</span>
1586:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1587: 
1588:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>)
1589:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">49</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1590: 
1591:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">:credit_limit</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>)
1592:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">47</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1593:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006775" class="method">
  <div id="M006775_title" class="title">
    <b>test_decrement_attribute_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006775_source')" id="l_M006775_source">show source</a> ]</p>
  <div id="M006775_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1595</span>
1595:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_attribute_by</span>
1596:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1597:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement!</span> <span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">5</span>
1598:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">45</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1599: 
1600:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">3</span>)
1601:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">41</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1602:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006687" class="method">
  <div id="M006687_title" class="title">
    <b>test_decrement_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006687_source')" id="l_M006687_source">show source</a> ]</p>
  <div id="M006687_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 621</span>
621:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_counter</span>
622:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">decrement_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">2</span>)
623:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">-1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">replies_count</span>
624: 
625:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">decrement_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">2</span>)
626:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">-2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">replies_count</span>
627:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006752" class="method">
  <div id="M006752_title" class="title">
    <b>test_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006752_source')" id="l_M006752_source">show source</a> ]</p>
  <div id="M006752_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1323</span>
1323:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default</span>
1324:       <span class="ruby-identifier">default</span> = <span class="ruby-constant">Default</span>.<span class="ruby-identifier">new</span>
1325: 
1326:       <span class="ruby-comment cmt"># fixed dates / times</span>
1327:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">default</span>.<span class="ruby-identifier">fixed_date</span>
1328:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>), <span class="ruby-identifier">default</span>.<span class="ruby-identifier">fixed_time</span>
1329: 
1330:       <span class="ruby-comment cmt"># char types</span>
1331:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Y'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char1</span>
1332:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a varchar field'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char2</span>
1333:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a text field'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char3</span>
1334:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006702" class="method">
  <div id="M006702_title" class="title">
    <b>test_default_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006702_source')" id="l_M006702_source">show source</a> ]</p>
  <div id="M006702_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 763</span>
763:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_values</span>
764:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
765:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
766:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
767:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
768:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
769: 
770:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
771: 
772:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
773:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
774:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
775: 
776:     <span class="ruby-comment cmt"># Oracle has some funky default handling, so it requires a bit of</span>
777:     <span class="ruby-comment cmt"># extra testing. See ticket #2788.</span>
778:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>)
779:       <span class="ruby-identifier">test</span> = <span class="ruby-constant">TestOracleDefault</span>.<span class="ruby-identifier">new</span>
780:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;X&quot;</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_char</span>
781:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_string</span>
782:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_int</span>
783:     <span class="ruby-keyword kw">end</span>
784:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006705" class="method">
  <div id="M006705_title" class="title">
    <b>test_default_values_on_empty_strings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006705_source')" id="l_M006705_source">show source</a> ]</p>
  <div id="M006705_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 811</span>
811:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_values_on_empty_strings</span>
812:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
813:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>  = <span class="ruby-keyword kw">nil</span>
814:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span> = <span class="ruby-keyword kw">nil</span>
815: 
816:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
817: 
818:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
819:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
820: 
821:     <span class="ruby-comment cmt"># Sybase adapter does not allow nulls in boolean columns</span>
822:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>)
823:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
824:     <span class="ruby-keyword kw">else</span>
825:       <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
826:     <span class="ruby-keyword kw">end</span>
827:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006779" class="method">
  <div id="M006779_title" class="title">
    <b>test_define_attr_method_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006779_source')" id="l_M006779_source">show source</a> ]</p>
  <div id="M006779_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1630</span>
1630:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_define_attr_method_with_block</span>
1631:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1632:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_attr_method</span>, <span class="ruby-identifier">:primary_key</span>) { <span class="ruby-value str">&quot;sys_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_primary_key</span> }
1633:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;sys_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1634:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006778" class="method">
  <div id="M006778_title" class="title">
    <b>test_define_attr_method_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006778_source')" id="l_M006778_source">show source</a> ]</p>
  <div id="M006778_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1624</span>
1624:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_define_attr_method_with_value</span>
1625:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1626:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_attr_method</span>, <span class="ruby-identifier">:table_name</span>, <span class="ruby-value str">&quot;foo&quot;</span>)
1627:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1628:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006673" class="method">
  <div id="M006673_title" class="title">
    <b>test_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006673_source')" id="l_M006673_source">show source</a> ]</p>
  <div id="M006673_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 474</span>
474:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete</span>
475:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
476:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">delete</span>, <span class="ruby-value str">'topic.delete did not return self'</span>
477:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">frozen?</span>, <span class="ruby-value str">'topic not frozen after delete'</span>
478:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>) }
479:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006696" class="method">
  <div id="M006696_title" class="title">
    <b>test_delete_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006696_source')" id="l_M006696_source">show source</a> ]</p>
  <div id="M006696_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 712</span>
712:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_all</span>
713:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
714: 
715:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete_all</span>
716:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006674" class="method">
  <div id="M006674_title" class="title">
    <b>test_delete_doesnt_run_callbacks</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006674_source')" id="l_M006674_source">show source</a> ]</p>
  <div id="M006674_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 481</span>
481:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_doesnt_run_callbacks</span>
482:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">delete</span>
483:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
484:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006684" class="method">
  <div id="M006684_title" class="title">
    <b>test_delete_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006684_source')" id="l_M006684_source">show source</a> ]</p>
  <div id="M006684_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 602</span>
602:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_many</span>
603:     <span class="ruby-identifier">original_count</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
604:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">deleting</span> = [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])
605:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">deleting</span>.<span class="ruby-identifier">size</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
606:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006709" class="method">
  <div id="M006709_title" class="title">
    <b>test_delete_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006709_source')" id="l_M006709_source">show source</a> ]</p>
  <div id="M006709_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 841</span>
841:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_new_record</span>
842:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
843:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete</span>
844:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
845:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006710" class="method">
  <div id="M006710_title" class="title">
    <b>test_delete_record_with_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006710_source')" id="l_M006710_source">show source</a> ]</p>
  <div id="M006710_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 847</span>
847:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_record_with_associations</span>
848:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
849:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete</span>
850:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
851:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">client</span>.<span class="ruby-identifier">firm</span>
852:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">FrozenObjectError</span>) { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;something else&quot;</span> }
853:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006806" class="method">
  <div id="M006806_title" class="title">
    <b>test_descends_from_active_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006806_source')" id="l_M006806_source">show source</a> ]</p>
  <div id="M006806_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1869</span>
1869:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_descends_from_active_record</span>
1870:     <span class="ruby-comment cmt"># Tries to call Object.abstract_class?</span>
1871:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) <span class="ruby-keyword kw">do</span>
1872:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1873:     <span class="ruby-keyword kw">end</span>
1874: 
1875:     <span class="ruby-comment cmt"># Abstract subclass of AR::Base.</span>
1876:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1877: 
1878:     <span class="ruby-comment cmt"># Concrete subclass of an abstract class.</span>
1879:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1880: 
1881:     <span class="ruby-comment cmt"># Concrete subclass of AR::Base.</span>
1882:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1883: 
1884:     <span class="ruby-comment cmt"># Concrete subclass of a concrete class but has no type column.</span>
1885:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1886: 
1887:     <span class="ruby-comment cmt"># Concrete subclass of AR::Base.</span>
1888:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1889: 
1890:     <span class="ruby-comment cmt"># Abstract subclass of a concrete class which has a type column.</span>
1891:     <span class="ruby-comment cmt"># This is pathological, as you'll never have Sub &lt; Abstract &lt; Concrete.</span>
1892:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">StiPost</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1893: 
1894:     <span class="ruby-comment cmt"># Concrete subclasses an abstract class which has a type column.</span>
1895:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1896:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006675" class="method">
  <div id="M006675_title" class="title">
    <b>test_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006675_source')" id="l_M006675_source">show source</a> ]</p>
  <div id="M006675_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 486</span>
486:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy</span>
487:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
488:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">destroy</span>, <span class="ruby-value str">'topic.destroy did not return self'</span>
489:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">frozen?</span>, <span class="ruby-value str">'topic not frozen after destroy'</span>
490:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>) }
491:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006682" class="method">
  <div id="M006682_title" class="title">
    <b>test_destroy_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006682_source')" id="l_M006682_source">show source</a> ]</p>
  <div id="M006682_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 588</span>
588:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_all</span>
589:     <span class="ruby-identifier">original_count</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
590:     <span class="ruby-identifier">topics_by_mary</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">mary</span> = <span class="ruby-value str">&quot;author_name = 'Mary'&quot;</span>)
591: 
592:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">destroy_all</span> <span class="ruby-identifier">mary</span>
593:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">topics_by_mary</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
594:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006683" class="method">
  <div id="M006683_title" class="title">
    <b>test_destroy_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006683_source')" id="l_M006683_source">show source</a> ]</p>
  <div id="M006683_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 596</span>
596:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_many</span>
597:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
598:     <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroy</span>([<span class="ruby-value">2</span>, <span class="ruby-value">3</span>])
599:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
600:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006711" class="method">
  <div id="M006711_title" class="title">
    <b>test_destroy_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006711_source')" id="l_M006711_source">show source</a> ]</p>
  <div id="M006711_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 855</span>
855:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_new_record</span>
856:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
857:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">destroy</span>
858:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
859:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006712" class="method">
  <div id="M006712_title" class="title">
    <b>test_destroy_record_with_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006712_source')" id="l_M006712_source">show source</a> ]</p>
  <div id="M006712_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 861</span>
861:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_record_with_associations</span>
862:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
863:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">destroy</span>
864:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
865:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">client</span>.<span class="ruby-identifier">firm</span>
866:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">FrozenObjectError</span>) { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;something else&quot;</span> }
867:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006706" class="method">
  <div id="M006706_title" class="title">
    <b>test_equality</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006706_source')" id="l_M006706_source">show source</a> ]</p>
  <div id="M006706_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 829</span>
829:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equality</span>
830:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">topic</span>
831:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006707" class="method">
  <div id="M006707_title" class="title">
    <b>test_equality_of_new_records</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006707_source')" id="l_M006707_source">show source</a> ]</p>
  <div id="M006707_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 833</span>
833:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equality_of_new_records</span>
834:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
835:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006796" class="method">
  <div id="M006796_title" class="title">
    <b>test_find_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006796_source')" id="l_M006796_source">show source</a> ]</p>
  <div id="M006796_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1811</span>
1811:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last</span>
1812:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>
1813:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>)
1814:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006801" class="method">
  <div id="M006801_title" class="title">
    <b>test_find_multiple_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006801_source')" id="l_M006801_source">show source</a> ]</p>
  <div id="M006801_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1834</span>
1834:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_multiple_ordered_last</span>
1835:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.name, developers.salary DESC'</span>
1836:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.name, developers.salary DESC'</span>).<span class="ruby-identifier">last</span>
1837:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006807" class="method">
  <div id="M006807_title" class="title">
    <b>test_find_on_abstract_base_class_doesnt_use_type_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006807_source')" id="l_M006807_source">show source</a> ]</p>
  <div id="M006807_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1898</span>
1898:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_abstract_base_class_doesnt_use_type_condition</span>
1899:     <span class="ruby-identifier">old_class</span> = <span class="ruby-constant">LooseDescendant</span>
1900:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:LooseDescendant</span>
1901: 
1902:     <span class="ruby-identifier">descendant</span> = <span class="ruby-identifier">old_class</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bob'</span>
1903:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">descendant</span>.<span class="ruby-identifier">id</span>), <span class="ruby-node">&quot;Should have found instance of LooseDescendant when finding abstract LoosePerson: #{descendant.inspect}&quot;</span>
1904:   <span class="ruby-keyword kw">ensure</span>
1905:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:LooseDescendant</span>)
1906:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:LooseDescendant</span>, <span class="ruby-identifier">old_class</span>
1907:     <span class="ruby-keyword kw">end</span>
1908:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006799" class="method">
  <div id="M006799_title" class="title">
    <b>test_find_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006799_source')" id="l_M006799_source">show source</a> ]</p>
  <div id="M006799_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1824</span>
1824:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_ordered_last</span>
1825:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>
1826:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>).<span class="ruby-identifier">last</span>
1827:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006800" class="method">
  <div id="M006800_title" class="title">
    <b>test_find_reverse_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006800_source')" id="l_M006800_source">show source</a> ]</p>
  <div id="M006800_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1829</span>
1829:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_reverse_ordered_last</span>
1830:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>
1831:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>).<span class="ruby-identifier">last</span>
1832:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006803" class="method">
  <div id="M006803_title" class="title">
    <b>test_find_scoped_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006803_source')" id="l_M006803_source">show source</a> ]</p>
  <div id="M006803_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1844</span>
1844:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_scoped_ordered_last</span>
1845:     <span class="ruby-identifier">last_developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span> }) <span class="ruby-keyword kw">do</span>
1846:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:last</span>)
1847:     <span class="ruby-keyword kw">end</span>
1848:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last_developer</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>).<span class="ruby-identifier">last</span>
1849:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006802" class="method">
  <div id="M006802_title" class="title">
    <b>test_find_symbol_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006802_source')" id="l_M006802_source">show source</a> ]</p>
  <div id="M006802_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1839</span>
1839:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_symbol_ordered_last</span>
1840:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:salary</span>
1841:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:salary</span>).<span class="ruby-identifier">last</span>
1842:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006753" class="method">
  <div id="M006753_title" class="title">
    <b>test_geometric_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006753_source')" id="l_M006753_source">show source</a> ]</p>
  <div id="M006753_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1337</span>
1337:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_geometric_content</span>
1338: 
1339:       <span class="ruby-comment cmt"># accepted format notes:</span>
1340:       <span class="ruby-comment cmt"># ()'s aren't required</span>
1341:       <span class="ruby-comment cmt"># values can be a mix of float or integer</span>
1342: 
1343:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">new</span>(
1344:         <span class="ruby-identifier">:a_point</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(5.0, 6.1)'</span>,
1345:         <span class="ruby-comment cmt">#:a_line         =&gt; '((2.0, 3), (5.5, 7.0))' # line type is currently unsupported in postgresql</span>
1346:         <span class="ruby-identifier">:a_line_segment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(2.0, 3), (5.5, 7.0)'</span>,
1347:         <span class="ruby-identifier">:a_box</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2.0, 3, 5.5, 7.0'</span>,
1348:         <span class="ruby-identifier">:a_path</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'[(2.0, 3), (5.5, 7.0), (8.5, 11.0)]'</span>,  <span class="ruby-comment cmt"># [ ] is an open path</span>
1349:         <span class="ruby-identifier">:a_polygon</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0), (8.5, 11.0))'</span>,
1350:         <span class="ruby-identifier">:a_circle</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&lt;(5.3, 10.4), 2&gt;'</span>
1351:       )
1352: 
1353:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">save</span>
1354: 
1355:       <span class="ruby-comment cmt"># Reload and check that we have all the geometric attributes.</span>
1356:       <span class="ruby-identifier">h</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>)
1357: 
1358:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5,6.1)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_point</span>
1359:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_line_segment</span>
1360:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5.5,7),(2,3)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_box</span>   <span class="ruby-comment cmt"># reordered to store upper right corner then bottom left corner</span>
1361:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7),(8.5,11)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_path</span>
1362:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_polygon</span>
1363:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;(5.3,10.4),2&gt;'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_circle</span>
1364: 
1365:       <span class="ruby-comment cmt"># use a geometric function to test for an open path</span>
1366:       <span class="ruby-identifier">objs</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find_by_sql</span> [<span class="ruby-value str">&quot;select isopen(a_path) from geometrics where id = ?&quot;</span>, <span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>]
1367:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">objs</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">isopen</span>, <span class="ruby-value str">'t'</span>
1368: 
1369:       <span class="ruby-comment cmt"># test alternate formats when defining the geometric types</span>
1370: 
1371:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">new</span>(
1372:         <span class="ruby-identifier">:a_point</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'5.0, 6.1'</span>,
1373:         <span class="ruby-comment cmt">#:a_line         =&gt; '((2.0, 3), (5.5, 7.0))' # line type is currently unsupported in postgresql</span>
1374:         <span class="ruby-identifier">:a_line_segment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0))'</span>,
1375:         <span class="ruby-identifier">:a_box</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(2.0, 3), (5.5, 7.0)'</span>,
1376:         <span class="ruby-identifier">:a_path</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0), (8.5, 11.0))'</span>,  <span class="ruby-comment cmt"># ( ) is a closed path</span>
1377:         <span class="ruby-identifier">:a_polygon</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2.0, 3, 5.5, 7.0, 8.5, 11.0'</span>,
1378:         <span class="ruby-identifier">:a_circle</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((5.3, 10.4), 2)'</span>
1379:       )
1380: 
1381:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">save</span>
1382: 
1383:       <span class="ruby-comment cmt"># Reload and check that we have all the geometric attributes.</span>
1384:       <span class="ruby-identifier">h</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>)
1385: 
1386:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5,6.1)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_point</span>
1387:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_line_segment</span>
1388:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5.5,7),(2,3)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_box</span>   <span class="ruby-comment cmt"># reordered to store upper right corner then bottom left corner</span>
1389:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_path</span>
1390:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_polygon</span>
1391:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;(5.3,10.4),2&gt;'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_circle</span>
1392: 
1393:       <span class="ruby-comment cmt"># use a geometric function to test for an closed path</span>
1394:       <span class="ruby-identifier">objs</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find_by_sql</span> [<span class="ruby-value str">&quot;select isclosed(a_path) from geometrics where id = ?&quot;</span>, <span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>]
1395:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">objs</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">isclosed</span>, <span class="ruby-value str">'t'</span>
1396:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006641" class="method">
  <div id="M006641_title" class="title">
    <b>test_hash_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006641_source')" id="l_M006641_source">show source</a> ]</p>
  <div id="M006641_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 151</span>
151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_content</span>
152:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
153:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = { <span class="ruby-value str">&quot;one&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value str">&quot;two&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span> }
154:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
155: 
156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;two&quot;</span>]
157: 
158:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content_will_change!</span>
159:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;three&quot;</span>] = <span class="ruby-value">3</span>
160:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
161: 
162:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;three&quot;</span>]
163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006650" class="method">
  <div id="M006650_title" class="title">
    <b>test_hashes_not_mangled</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006650_source')" id="l_M006650_source">show source</a> ]</p>
  <div id="M006650_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 228</span>
228:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hashes_not_mangled</span>
229:     <span class="ruby-identifier">new_topic</span> = { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span> }
230:     <span class="ruby-identifier">new_topic_values</span> = { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;AnotherTopic&quot;</span> }
231: 
232:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">new_topic</span>)
233:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_topic</span>[<span class="ruby-identifier">:title</span>], <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
234: 
235:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span>= <span class="ruby-identifier">new_topic_values</span>
236:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_topic_values</span>[<span class="ruby-identifier">:title</span>], <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
237:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006708" class="method">
  <div id="M006708_title" class="title">
    <b>test_hashing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006708_source')" id="l_M006708_source">show source</a> ]</p>
  <div id="M006708_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 837</span>
837:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hashing</span>
838:     <span class="ruby-identifier">assert_equal</span> [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) ], [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">topic</span> ] <span class="ruby-operator">&amp;</span> [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) ]
839:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006771" class="method">
  <div id="M006771_title" class="title">
    <b>test_increment_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006771_source')" id="l_M006771_source">show source</a> ]</p>
  <div id="M006771_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1561</span>
1561:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_attribute</span>
1562:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1563:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:credit_limit</span>
1564:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">51</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1565: 
1566:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment</span>(<span class="ruby-identifier">:credit_limit</span>).<span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">:credit_limit</span>)
1567:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">53</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1568:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006773" class="method">
  <div id="M006773_title" class="title">
    <b>test_increment_attribute_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006773_source')" id="l_M006773_source">show source</a> ]</p>
  <div id="M006773_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1576</span>
1576:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_attribute_by</span>
1577:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1578:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">5</span>
1579:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">55</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1580: 
1581:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">3</span>)
1582:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">59</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1583:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006686" class="method">
  <div id="M006686_title" class="title">
    <b>test_increment_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006686_source')" id="l_M006686_source">show source</a> ]</p>
  <div id="M006686_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 613</span>
613:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_counter</span>
614:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">increment_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">1</span>)
615:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies_count</span>
616: 
617:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">increment_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">1</span>)
618:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies_count</span>
619:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006772" class="method">
  <div id="M006772_title" class="title">
    <b>test_increment_nil_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006772_source')" id="l_M006772_source">show source</a> ]</p>
  <div id="M006772_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1570</span>
1570:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_nil_attribute</span>
1571:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">parent_id</span>
1572:     <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:parent_id</span>
1573:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">parent_id</span>
1574:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006677" class="method">
  <div id="M006677_title" class="title">
    <b>test_initialize_with_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006677_source')" id="l_M006677_source">show source</a> ]</p>
  <div id="M006677_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 497</span>
497:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_initialize_with_attributes</span>
498:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>({
499:       <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;initialized from attributes&quot;</span>, <span class="ruby-value str">&quot;written_on&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2003-12-12 23:23&quot;</span>
500:     })
501: 
502:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;initialized from attributes&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
503:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006678" class="method">
  <div id="M006678_title" class="title">
    <b>test_initialize_with_invalid_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006678_source')" id="l_M006678_source">show source</a> ]</p>
  <div id="M006678_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 505</span>
505:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_initialize_with_invalid_attribute</span>
506:     <span class="ruby-keyword kw">begin</span>
507:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>({ <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;test&quot;</span>,
508:         <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2005&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;31&quot;</span>})
509:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">MultiparameterAssignmentErrors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
510:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">size</span>)
511:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;last_read&quot;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">attribute</span>)
512:     <span class="ruby-keyword kw">end</span>
513:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006823" class="method">
  <div id="M006823_title" class="title">
    <b>test_inspect_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006823_source')" id="l_M006823_source">show source</a> ]</p>
  <div id="M006823_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2055</span>
2055:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_class</span>
2056:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ActiveRecord::Base'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">inspect</span>
2057:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'LoosePerson(abstract)'</span>, <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">inspect</span>
2058:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^Topic\(id: integer, title: string/</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">inspect</span>)
2059:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006827" class="method">
  <div id="M006827_title" class="title">
    <b>test_inspect_class_without_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006827_source')" id="l_M006827_source">show source</a> ]</p>
  <div id="M006827_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2075</span>
2075:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_class_without_table</span>
2076:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;NonExistentTable(Table doesn't exist)&quot;</span>, <span class="ruby-constant">NonExistentTable</span>.<span class="ruby-identifier">inspect</span>
2077:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006824" class="method">
  <div id="M006824_title" class="title">
    <b>test_inspect_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006824_source')" id="l_M006824_source">show source</a> ]</p>
  <div id="M006824_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2061</span>
2061:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_instance</span>
2062:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
2063:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%(#&lt;Topic id: 1, title: &quot;The First Topic&quot;, author_name: &quot;David&quot;, author_email_address: &quot;david@loudthinking.com&quot;, written_on: &quot;#{topic.written_on.to_s(:db)}&quot;, bonus_time: &quot;#{topic.bonus_time.to_s(:db)}&quot;, last_read: &quot;#{topic.last_read.to_s(:db)}&quot;, content: &quot;Have a nice day&quot;, approved: false, replies_count: 1, parent_id: nil, parent_title: nil, type: nil&gt;)</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">inspect</span>
2064:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006826" class="method">
  <div id="M006826_title" class="title">
    <b>test_inspect_limited_select_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006826_source')" id="l_M006826_source">show source</a> ]</p>
  <div id="M006826_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2070</span>
2070:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_limited_select_instance</span>
2071:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(#&lt;Topic id: 1&gt;)</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id = 1'</span>).<span class="ruby-identifier">inspect</span>
2072:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(#&lt;Topic id: 1, title: &quot;The First Topic&quot;&gt;)</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id, title'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id = 1'</span>).<span class="ruby-identifier">inspect</span>
2073:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006825" class="method">
  <div id="M006825_title" class="title">
    <b>test_inspect_new_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006825_source')" id="l_M006825_source">show source</a> ]</p>
  <div id="M006825_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2066</span>
2066:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_new_instance</span>
2067:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Topic id: nil/</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">inspect</span>
2068:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006634" class="method">
  <div id="M006634_title" class="title">
    <b>test_integers_as_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006634_source')" id="l_M006634_source">show source</a> ]</p>
  <div id="M006634_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 96</span>
96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integers_as_nil</span>
97:     <span class="ruby-identifier">test</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">'value'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>)
98:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">test</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">value</span>
99:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006789" class="method">
  <div id="M006789_title" class="title">
    <b>test_interpolate_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006789_source')" id="l_M006789_source">show source</a> ]</p>
  <div id="M006789_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1736</span>
1736:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolate_sql</span>
1737:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo@bar'</span>) }
1738:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo bar) baz'</span>) }
1739:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo bar} baz'</span>) }
1740:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006797" class="method">
  <div id="M006797_title" class="title">
    <b>test_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006797_source')" id="l_M006797_source">show source</a> ]</p>
  <div id="M006797_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1816</span>
1816:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_last</span>
1817:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>), <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">last</span>
1818:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006679" class="method">
  <div id="M006679_title" class="title">
    <b>test_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006679_source')" id="l_M006679_source">show source</a> ]</p>
  <div id="M006679_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 515</span>
515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load</span>
516:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
517:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
518:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
519:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006680" class="method">
  <div id="M006680_title" class="title">
    <b>test_load_with_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006680_source')" id="l_M006680_source">show source</a> ]</p>
  <div id="M006680_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 521</span>
521:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_with_condition</span>
522:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;author_name = 'Mary'&quot;</span>)
523: 
524:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
525:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
526:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006721" class="method">
  <div id="M006721_title" class="title">
    <b>test_mass_assigning_invalid_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006721_source')" id="l_M006721_source">show source</a> ]</p>
  <div id="M006721_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 950</span>
950:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assigning_invalid_attribute</span>
951:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
952: 
953:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">UnknownAttributeError</span>) <span class="ruby-keyword kw">do</span>
954:       <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Client&quot;</span>, <span class="ruby-value str">&quot;i_dont_even_exist&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span> }
955:     <span class="ruby-keyword kw">end</span>
956:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006723" class="method">
  <div id="M006723_title" class="title">
    <b>test_mass_assignment_accessible</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006723_source')" id="l_M006723_source">show source</a> ]</p>
  <div id="M006723_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 965</span>
965:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_accessible</span>
966:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>, <span class="ruby-value str">&quot;approved&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
967:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>
968: 
969:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved?</span>
970: 
971:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">false</span>
972:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>
973: 
974:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved?</span>
975:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006717" class="method">
  <div id="M006717_title" class="title">
    <b>test_mass_assignment_protection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006717_source')" id="l_M006717_source">show source</a> ]</p>
  <div id="M006717_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 918</span>
918:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection</span>
919:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
920:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Next Angle&quot;</span>, <span class="ruby-value str">&quot;rating&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span> }
921:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">rating</span>
922:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006718" class="method">
  <div id="M006718_title" class="title">
    <b>test_mass_assignment_protection_against_class_attribute_writers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006718_source')" id="l_M006718_source">show source</a> ]</p>
  <div id="M006718_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 924</span>
924:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_against_class_attribute_writers</span>
925:     [<span class="ruby-identifier">:logger</span>, <span class="ruby-identifier">:configurations</span>, <span class="ruby-identifier">:primary_key_prefix_type</span>, <span class="ruby-identifier">:table_name_prefix</span>, <span class="ruby-identifier">:table_name_suffix</span>, <span class="ruby-identifier">:pluralize_table_names</span>, <span class="ruby-identifier">:colorize_logging</span>,
926:       <span class="ruby-identifier">:default_timezone</span>, <span class="ruby-identifier">:schema_format</span>, <span class="ruby-identifier">:lock_optimistically</span>, <span class="ruby-identifier">:record_timestamps</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
927:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
928:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{method}=&quot;</span>)
929:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
930:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{method}=&quot;</span>)
931:     <span class="ruby-keyword kw">end</span>
932:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006724" class="method">
  <div id="M006724_title" class="title">
    <b>test_mass_assignment_protection_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006724_source')" id="l_M006724_source">show source</a> ]</p>
  <div id="M006724_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 977</span>
977:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_inheritance</span>
978:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">accessible_attributes</span>
979:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span> ]), <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">protected_attributes</span>
980: 
981:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">accessible_attributes</span>
982:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span>, <span class="ruby-value str">'phone_number'</span> ]), <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">protected_attributes</span>
983: 
984:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LooseDescendantSecond</span>.<span class="ruby-identifier">accessible_attributes</span>
985:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span>, <span class="ruby-value str">'phone_number'</span>, <span class="ruby-value str">'name'</span> ]), <span class="ruby-constant">LooseDescendantSecond</span>.<span class="ruby-identifier">protected_attributes</span>, <span class="ruby-value str">'Running attr_protected twice in one class should merge the protections'</span>
986: 
987:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">protected_attributes</span>
988:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'name'</span>, <span class="ruby-value str">'address'</span> ]), <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">accessible_attributes</span>
989: 
990:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">protected_attributes</span>
991:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'name'</span>, <span class="ruby-value str">'address'</span>, <span class="ruby-value str">'phone_number'</span> ]), <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">accessible_attributes</span>
992:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006722" class="method">
  <div id="M006722_title" class="title">
    <b>test_mass_assignment_protection_on_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006722_source')" id="l_M006722_source">show source</a> ]</p>
  <div id="M006722_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 958</span>
958:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_on_defaults</span>
959:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
960:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Client&quot;</span> }
961:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>
962:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-identifier">firm</span>[<span class="ruby-identifier">:type</span>]
963:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006716" class="method">
  <div id="M006716_title" class="title">
    <b>test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006716_source')" id="l_M006716_source">show source</a> ]</p>
  <div id="M006716_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 912</span>
912:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</span>
913:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">TopicWithProtectedContentAndAccessibleAuthorName</span>.<span class="ruby-identifier">new</span>
914:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;me&quot;</span> } }
915:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;stuff&quot;</span> } }
916:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006743" class="method">
  <div id="M006743_title" class="title">
    <b>test_multiparameter_assignment_of_aggregation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006743_source')" id="l_M006743_source">show source</a> ]</p>
  <div id="M006743_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1202</span>
1202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_assignment_of_aggregation</span>
1203:     <span class="ruby-identifier">customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">new</span>
1204:     <span class="ruby-identifier">address</span> = <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;The Street&quot;</span>, <span class="ruby-value str">&quot;The City&quot;</span>, <span class="ruby-value str">&quot;The Country&quot;</span>)
1205:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;address(1)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-value str">&quot;address(2)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-value str">&quot;address(3)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">country</span> }
1206:     <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1207:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">address</span>, <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">address</span>
1208:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006726" class="method">
  <div id="M006726_title" class="title">
    <b>test_multiparameter_attributes_on_date</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006726_source')" id="l_M006726_source">show source</a> ]</p>
  <div id="M006726_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1007</span>
1007:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date</span>
1008:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1009:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1010:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1011:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1012:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1013:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1014:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006733" class="method">
  <div id="M006733_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_all_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006733_source')" id="l_M006733_source">show source</a> ]</p>
  <div id="M006733_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1070</span>
1070:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_all_empty</span>
1071:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1072:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1073:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1074:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
1075:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006729" class="method">
  <div id="M006729_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006729_source')" id="l_M006729_source">show source</a> ]</p>
  <div id="M006729_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1034</span>
1034:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day</span>
1035:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1036:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1037:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1038:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1039:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1040:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1041:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006731" class="method">
  <div id="M006731_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day_and_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006731_source')" id="l_M006731_source">show source</a> ]</p>
  <div id="M006731_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1052</span>
1052:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day_and_month</span>
1053:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1054:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1055:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1056:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1057:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1058:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1059:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006730" class="method">
  <div id="M006730_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day_and_year</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006730_source')" id="l_M006730_source">show source</a> ]</p>
  <div id="M006730_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1043</span>
1043:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day_and_year</span>
1044:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1045:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1046:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1047:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1048:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1049:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1050:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006728" class="method">
  <div id="M006728_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006728_source')" id="l_M006728_source">show source</a> ]</p>
  <div id="M006728_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1025</span>
1025:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_month</span>
1026:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1027:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1028:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1029:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1030:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1031:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1032:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006727" class="method">
  <div id="M006727_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_year</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006727_source')" id="l_M006727_source">show source</a> ]</p>
  <div id="M006727_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1016</span>
1016:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_year</span>
1017:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1018:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1019:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1020:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1021:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1022:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1023:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006732" class="method">
  <div id="M006732_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_year_and_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006732_source')" id="l_M006732_source">show source</a> ]</p>
  <div id="M006732_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1061</span>
1061:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_year_and_month</span>
1062:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1063:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1064:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1065:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1066:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1067:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1068:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006734" class="method">
  <div id="M006734_title" class="title">
    <b>test_multiparameter_attributes_on_time</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006734_source')" id="l_M006734_source">show source</a> ]</p>
  <div id="M006734_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1077</span>
1077:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time</span>
1078:     <span class="ruby-identifier">attributes</span> = {
1079:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1080:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1081:     }
1082:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1083:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1084:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1085:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006740" class="method">
  <div id="M006740_title" class="title">
    <b>test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006740_source')" id="l_M006740_source">show source</a> ]</p>
  <div id="M006740_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1165</span>
1165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</span>
1166:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1167:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1168:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1169:     <span class="ruby-identifier">attributes</span> = {
1170:       <span class="ruby-value str">&quot;bonus_time(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2000&quot;</span>, <span class="ruby-value str">&quot;bonus_time(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;bonus_time(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>,
1171:       <span class="ruby-value str">&quot;bonus_time(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;bonus_time(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>
1172:     }
1173:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1174:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1175:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
1176:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>.<span class="ruby-identifier">utc?</span>
1177:   <span class="ruby-keyword kw">ensure</span>
1178:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1179:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1180:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1181:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006741" class="method">
  <div id="M006741_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_empty_seconds</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006741_source')" id="l_M006741_source">show source</a> ]</p>
  <div id="M006741_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1183</span>
1183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_empty_seconds</span>
1184:     <span class="ruby-identifier">attributes</span> = {
1185:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1186:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>
1187:     }
1188:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1189:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1190:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1191:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006735" class="method">
  <div id="M006735_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_old_date</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006735_source')" id="l_M006735_source">show source</a> ]</p>
  <div id="M006735_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1087</span>
1087:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_old_date</span>
1088:     <span class="ruby-identifier">attributes</span> = {
1089:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1850&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1090:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1091:     }
1092:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1093:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1094:     <span class="ruby-comment cmt"># testing against to_s(:db) representation because either a Time or a DateTime might be returned, depending on platform</span>
1095:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1850-06-24 16:24:00&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
1096:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006739" class="method">
  <div id="M006739_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006739_source')" id="l_M006739_source">show source</a> ]</p>
  <div id="M006739_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1145</span>
1145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</span>
1146:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1147:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1148:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1149:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">skip_time_zone_conversion_for_attributes</span> = [<span class="ruby-identifier">:written_on</span>]
1150:     <span class="ruby-identifier">attributes</span> = {
1151:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1152:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1153:     }
1154:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1155:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:time_zone</span>)
1158:   <span class="ruby-keyword kw">ensure</span>
1159:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1160:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1161:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1162:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">skip_time_zone_conversion_for_attributes</span> = []
1163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006737" class="method">
  <div id="M006737_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006737_source')" id="l_M006737_source">show source</a> ]</p>
  <div id="M006737_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1111</span>
1111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</span>
1112:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1113:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1114:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1115:     <span class="ruby-identifier">attributes</span> = {
1116:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1117:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1118:     }
1119:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1120:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1121:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">23</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1122:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">time</span>
1123:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">time_zone</span>
1124:   <span class="ruby-keyword kw">ensure</span>
1125:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1126:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1127:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006738" class="method">
  <div id="M006738_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006738_source')" id="l_M006738_source">show source</a> ]</p>
  <div id="M006738_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1130</span>
1130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</span>
1131:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1132:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1133:     <span class="ruby-identifier">attributes</span> = {
1134:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1135:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1136:     }
1137:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1138:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1139:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1140:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:time_zone</span>)
1141:   <span class="ruby-keyword kw">ensure</span>
1142:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1143:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006736" class="method">
  <div id="M006736_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_utc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006736_source')" id="l_M006736_source">show source</a> ]</p>
  <div id="M006736_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1098</span>
1098:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_utc</span>
1099:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1100:     <span class="ruby-identifier">attributes</span> = {
1101:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1102:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1103:     }
1104:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1105:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1107:   <span class="ruby-keyword kw">ensure</span>
1108:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006742" class="method">
  <div id="M006742_title" class="title">
    <b>test_multiparameter_mass_assignment_protector</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006742_source')" id="l_M006742_source">show source</a> ]</p>
  <div id="M006742_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1193</span>
1193:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_mass_assignment_protector</span>
1194:     <span class="ruby-identifier">task</span> = <span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>
1195:     <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">mktime</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)
1196:     <span class="ruby-identifier">task</span>.<span class="ruby-identifier">starting</span> = <span class="ruby-identifier">time</span>
1197:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;starting(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;starting(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;starting(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1198:     <span class="ruby-identifier">task</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1199:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">time</span>, <span class="ruby-identifier">task</span>.<span class="ruby-identifier">starting</span>
1200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006747" class="method">
  <div id="M006747_title" class="title">
    <b>test_new_record_returns_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006747_source')" id="l_M006747_source">show source</a> ]</p>
  <div id="M006747_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1254</span>
1254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_record_returns_boolean</span>
1255:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">new_record?</span>, <span class="ruby-keyword kw">true</span>
1256:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">new_record?</span>, <span class="ruby-keyword kw">false</span>
1257:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006764" class="method">
  <div id="M006764_title" class="title">
    <b>test_nil_serialized_attribute_with_class_constraint</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006764_source')" id="l_M006764_source">show source</a> ]</p>
  <div id="M006764_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1495</span>
1495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_serialized_attribute_with_class_constraint</span>
1496:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1497:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
1498:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>
1499:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006669" class="method">
  <div id="M006669_title" class="title">
    <b>test_non_attribute_access_and_assignment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006669_source')" id="l_M006669_source">show source</a> ]</p>
  <div id="M006669_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 425</span>
425:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_attribute_access_and_assignment</span>
426:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
427:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;mumbo&quot;</span>)
428:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">mumbo</span> }
429:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">mumbo</span> = <span class="ruby-value">5</span> }
430:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006701" class="method">
  <div id="M006701_title" class="title">
    <b>test_null_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006701_source')" id="l_M006701_source">show source</a> ]</p>
  <div id="M006701_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_null_fields</span>
759:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">parent_id</span>
760:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Hey you&quot;</span>).<span class="ruby-identifier">parent_id</span>
761:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006754" class="method">
  <div id="M006754_title" class="title">
    <b>test_numeric_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006754_source')" id="l_M006754_source">show source</a> ]</p>
  <div id="M006754_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1403</span>
1403:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_numeric_fields</span>
1404:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">NumericData</span>.<span class="ruby-identifier">new</span>(
1405:       <span class="ruby-identifier">:bank_balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1586.43</span>,
1406:       <span class="ruby-identifier">:big_bank_balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1000234000567.95&quot;</span>),
1407:       <span class="ruby-identifier">:world_population</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6000000000</span>,
1408:       <span class="ruby-identifier">:my_house_population</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>
1409:     )
1410:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">save</span>
1411: 
1412:     <span class="ruby-identifier">m1</span> = <span class="ruby-constant">NumericData</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">m</span>.<span class="ruby-identifier">id</span>)
1413:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">m1</span>
1414: 
1415:     <span class="ruby-comment cmt"># As with migration_test.rb, we should make world_population &gt;= 2**62</span>
1416:     <span class="ruby-comment cmt"># to cover 64-bit platforms and test it is a Bignum, but the main thing</span>
1417:     <span class="ruby-comment cmt"># is that it's an Integer.</span>
1418:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Integer</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">world_population</span>
1419:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">6000000000</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">world_population</span>
1420: 
1421:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Fixnum</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">my_house_population</span>
1422:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">my_house_population</span>
1423: 
1424:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">BigDecimal</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">bank_balance</span>
1425:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1586.43&quot;</span>), <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">bank_balance</span>
1426: 
1427:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">BigDecimal</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">big_bank_balance</span>
1428:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1000234000567.95&quot;</span>), <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">big_bank_balance</span>
1429:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006670" class="method">
  <div id="M006670_title" class="title">
    <b>test_preserving_date_objects</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006670_source')" id="l_M006670_source">show source</a> ]</p>
  <div id="M006670_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 432</span>
432:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserving_date_objects</span>
433:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>, <span class="ruby-identifier">:OracleAdapter</span>)
434:       <span class="ruby-comment cmt"># Sybase ctlib does not (yet?) support the date type; use datetime instead.</span>
435:       <span class="ruby-comment cmt"># Oracle treats all dates/times as Time.</span>
436:       <span class="ruby-identifier">assert_kind_of</span>(
437:         <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>,
438:         <span class="ruby-value str">&quot;The last_read attribute should be of the Time class&quot;</span>
439:       )
440:     <span class="ruby-keyword kw">else</span>
441:       <span class="ruby-identifier">assert_kind_of</span>(
442:         <span class="ruby-constant">Date</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>,
443:         <span class="ruby-value str">&quot;The last_read attribute should be of the Date class&quot;</span>
444:       )
445:     <span class="ruby-keyword kw">end</span>
446:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006671" class="method">
  <div id="M006671_title" class="title">
    <b>test_preserving_time_objects</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006671_source')" id="l_M006671_source">show source</a> ]</p>
  <div id="M006671_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 448</span>
448:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserving_time_objects</span>
449:     <span class="ruby-identifier">assert_kind_of</span>(
450:       <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">bonus_time</span>,
451:       <span class="ruby-value str">&quot;The bonus_time attribute should be of the Time class&quot;</span>
452:     )
453: 
454:     <span class="ruby-identifier">assert_kind_of</span>(
455:       <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>,
456:       <span class="ruby-value str">&quot;The written_on attribute should be of the Time class&quot;</span>
457:     )
458: 
459:     <span class="ruby-comment cmt"># For adapters which support microsecond resolution.</span>
460:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:PostgreSQLAdapter</span>)
461:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">11</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">sec</span>
462:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">223300</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">usec</span>
463:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9900</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">usec</span>
464:     <span class="ruby-keyword kw">end</span>
465:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006666" class="method">
  <div id="M006666_title" class="title">
    <b>test_query_attribute_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006666_source')" id="l_M006666_source">show source</a> ]</p>
  <div id="M006666_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_boolean</span>
388:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-value str">&quot;f&quot;</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
389:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">approved?</span>
390:     <span class="ruby-keyword kw">end</span>
391: 
392:     [<span class="ruby-keyword kw">true</span>, <span class="ruby-value str">&quot;true&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
393:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">approved?</span>
394:     <span class="ruby-keyword kw">end</span>
395:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006665" class="method">
  <div id="M006665_title" class="title">
    <b>test_query_attribute_number</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006665_source')" id="l_M006665_source">show source</a> ]</p>
  <div id="M006665_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 378</span>
378:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_number</span>
379:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value">0</span>, <span class="ruby-value str">&quot;0&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
380:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">salary?</span>
381:     <span class="ruby-keyword kw">end</span>
382: 
383:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">salary?</span>
384:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>).<span class="ruby-identifier">salary?</span>
385:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006664" class="method">
  <div id="M006664_title" class="title">
    <b>test_query_attribute_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006664_source')" id="l_M006664_source">show source</a> ]</p>
  <div id="M006664_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 370</span>
370:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_string</span>
371:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
372:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">author_name?</span>
373:     <span class="ruby-keyword kw">end</span>
374: 
375:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Name&quot;</span>).<span class="ruby-identifier">author_name?</span>
376:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006667" class="method">
  <div id="M006667_title" class="title">
    <b>test_query_attribute_with_custom_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006667_source')" id="l_M006667_source">show source</a> ]</p>
  <div id="M006667_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_with_custom_fields</span>
398:     <span class="ruby-identifier">object</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;SELECT c1.*, c2.ruby_type as string_value, c2.rating as int_value\nFROM companies c1, companies c2\nWHERE c1.firm_id = c2.id\nAND c1.id = 2\n&quot;</span>).<span class="ruby-identifier">first</span>
399: 
400:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value</span>
401:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value?</span>
402: 
403:     <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value</span> = <span class="ruby-value str">&quot;  &quot;</span>
404:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value?</span>
405: 
406:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value</span>.<span class="ruby-identifier">to_i</span>
407:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value?</span>
408: 
409:     <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value</span> = <span class="ruby-value str">&quot;0&quot;</span>
410:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value?</span>
411:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006767" class="method">
  <div id="M006767_title" class="title">
    <b>test_quote</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006767_source')" id="l_M006767_source">show source</a> ]</p>
  <div id="M006767_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1521</span>
1521:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote</span>
1522:     <span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;\\ \001 ' \n \\n \&quot;&quot;</span>
1523:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">'author_name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author_name</span>)
1524:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author_name</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">author_name</span>
1525:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006768" class="method">
  <div id="M006768_title" class="title">
    <b>test_quote_chars</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006768_source')" id="l_M006768_source">show source</a> ]</p>
  <div id="M006768_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1528</span>
1528:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote_chars</span>
1529:       <span class="ruby-identifier">with_kcode</span>(<span class="ruby-value str">'UTF8'</span>) <span class="ruby-keyword kw">do</span>
1530:         <span class="ruby-identifier">str</span> = <span class="ruby-value str">'The Narrator'</span>
1531:         <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">str</span>)
1532:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">str</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
1533: 
1534:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Multibyte</span>.<span class="ruby-identifier">proxy_class</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">mb_chars</span>
1535:         <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_author_name</span>(<span class="ruby-identifier">str</span>.<span class="ruby-identifier">mb_chars</span>)
1536: 
1537:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Topic</span>, <span class="ruby-identifier">topic</span>
1538:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">str</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>, <span class="ruby-value str">&quot;The right topic should have been found by name even with name passed as Chars&quot;</span>
1539:       <span class="ruby-keyword kw">end</span>
1540:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006757" class="method">
  <div id="M006757_title" class="title">
    <b>test_quote_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006757_source')" id="l_M006757_source">show source</a> ]</p>
  <div id="M006757_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1441</span>
1441:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote_keys</span>
1442:     <span class="ruby-identifier">ar</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">new</span>
1443:     <span class="ruby-identifier">source</span> = {<span class="ruby-value str">&quot;foo&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-value str">&quot;baz&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;quux&quot;</span>}
1444:     <span class="ruby-identifier">actual</span> = <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:quote_columns</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">source</span>)
1445:     <span class="ruby-identifier">inverted</span> = <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">invert</span>
1446:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;foo&gt;&quot;</span>, <span class="ruby-identifier">inverted</span>[<span class="ruby-value str">&quot;bar&quot;</span>])
1447:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;baz&gt;&quot;</span>, <span class="ruby-identifier">inverted</span>[<span class="ruby-value str">&quot;quux&quot;</span>])
1448:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006760" class="method">
  <div id="M006760_title" class="title">
    <b>test_quoting_arrays</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006760_source')" id="l_M006760_source">show source</a> ]</p>
  <div id="M006760_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1466</span>
1466:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quoting_arrays</span>
1467:     <span class="ruby-identifier">replies</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;id IN (?)&quot;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>) ])
1468:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>
1469: 
1470:     <span class="ruby-identifier">replies</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;id IN (?)&quot;</span>, [] ])
1471:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>
1472:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006660" class="method">
  <div id="M006660_title" class="title">
    <b>test_read_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006660_source')" id="l_M006660_source">show source</a> ]</p>
  <div id="M006660_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute</span>
321:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
322:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Don't change the topic&quot;</span>
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute</span>, <span class="ruby-value str">&quot;title&quot;</span>)
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>[<span class="ruby-value str">&quot;title&quot;</span>]
325: 
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute</span>, <span class="ruby-identifier">:title</span>)
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>[<span class="ruby-identifier">:title</span>]
328:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006661" class="method">
  <div id="M006661_title" class="title">
    <b>test_read_attribute_when_false</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006661_source')" id="l_M006661_source">show source</a> ]</p>
  <div id="M006661_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 330</span>
330:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute_when_false</span>
331:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
332:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">false</span>
333:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
334:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
335:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
336:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006662" class="method">
  <div id="M006662_title" class="title">
    <b>test_read_attribute_when_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006662_source')" id="l_M006662_source">show source</a> ]</p>
  <div id="M006662_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 338</span>
338:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute_when_true</span>
339:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
340:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">true</span>
341:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
342:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
343:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
344:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006638" class="method">
  <div id="M006638_title" class="title">
    <b>test_read_attributes_before_type_cast</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006638_source')" id="l_M006638_source">show source</a> ]</p>
  <div id="M006638_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 133</span>
133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast</span>
134:     <span class="ruby-identifier">category</span> = <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>({<span class="ruby-identifier">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;Test categoty&quot;</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
135:     <span class="ruby-identifier">category_attrs</span> = {<span class="ruby-value str">&quot;name&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;Test categoty&quot;</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">category_attrs</span> , <span class="ruby-identifier">category</span>.<span class="ruby-identifier">attributes_before_type_cast</span>
137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006639" class="method">
  <div id="M006639_title" class="title">
    <b>test_read_attributes_before_type_cast_on_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006639_source')" id="l_M006639_source">show source</a> ]</p>
  <div id="M006639_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 140</span>
140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast_on_boolean</span>
141:       <span class="ruby-identifier">bool</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
142:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;0&quot;</span>, <span class="ruby-identifier">bool</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">attributes_before_type_cast</span>[<span class="ruby-value str">&quot;value&quot;</span>]
143:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006640" class="method">
  <div id="M006640_title" class="title">
    <b>test_read_attributes_before_type_cast_on_datetime</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006640_source')" id="l_M006640_source">show source</a> ]</p>
  <div id="M006640_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast_on_datetime</span>
147:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">created_at</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>) , <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">attributes_before_type_cast</span>[<span class="ruby-value str">&quot;created_at&quot;</span>]
149:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006663" class="method">
  <div id="M006663_title" class="title">
    <b>test_read_write_boolean_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006663_source')" id="l_M006663_source">show source</a> ]</p>
  <div id="M006663_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 346</span>
346:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_write_boolean_attribute</span>
347:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
348:     <span class="ruby-comment cmt"># puts &quot;&quot;</span>
349:     <span class="ruby-comment cmt"># puts &quot;New Topic&quot;</span>
350:     <span class="ruby-comment cmt"># puts topic.inspect</span>
351:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
352:     <span class="ruby-comment cmt"># puts &quot;Expecting false&quot;</span>
353:     <span class="ruby-comment cmt"># puts topic.inspect</span>
354:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
355:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
356:     <span class="ruby-comment cmt"># puts &quot;Expecting false&quot;</span>
357:     <span class="ruby-comment cmt"># puts topic.inspect</span>
358:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
359:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
360:     <span class="ruby-comment cmt"># puts &quot;Expecting true&quot;</span>
361:     <span class="ruby-comment cmt"># puts topic.inspect</span>
362:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
363:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
364:     <span class="ruby-comment cmt"># puts &quot;Expecting true&quot;</span>
365:     <span class="ruby-comment cmt"># puts topic.inspect</span>
366:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
367:     <span class="ruby-comment cmt"># puts &quot;&quot;</span>
368:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006668" class="method">
  <div id="M006668_title" class="title">
    <b>test_reader_for_invalid_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006668_source')" id="l_M006668_source">show source</a> ]</p>
  <div id="M006668_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 420</span>
420:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reader_for_invalid_column_names</span>
421:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_read_method</span>, <span class="ruby-value str">&quot;mumub-jumbo&quot;</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-value str">&quot;mumub-jumbo&quot;</span>, <span class="ruby-keyword kw">nil</span>)
422:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">generated_methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;mumub-jumbo&quot;</span>)
423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006725" class="method">
  <div id="M006725_title" class="title">
    <b>test_readonly_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006725_source')" id="l_M006725_source">show source</a> ]</p>
  <div id="M006725_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 994</span>
 994:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_readonly_attributes</span>
 995:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'title'</span> , <span class="ruby-value str">'comments_count'</span> ]), <span class="ruby-constant">ReadonlyTitlePost</span>.<span class="ruby-identifier">readonly_attributes</span>
 996: 
 997:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">ReadonlyTitlePost</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;changeable&quot;</span>)
 998:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">reload</span>
 999:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
1000: 
1001:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;try to change&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;changed&quot;</span>)
1002:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">reload</span>
1003:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
1004:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;changed&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">body</span>
1005:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006676" class="method">
  <div id="M006676_title" class="title">
    <b>test_record_not_found_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006676_source')" id="l_M006676_source">show source</a> ]</p>
  <div id="M006676_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 493</span>
493:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_record_not_found_exception</span>
494:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">99999</span>) }
495:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006777" class="method">
  <div id="M006777_title" class="title">
    <b>test_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006777_source')" id="l_M006777_source">show source</a> ]</p>
  <div id="M006777_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1615</span>
1615:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reload</span>
1616:     <span class="ruby-identifier">t1</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1617:     <span class="ruby-identifier">t2</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1618:     <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;something else&quot;</span>
1619:     <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">save</span>
1620:     <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">reload</span>
1621:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">title</span>
1622:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006636" class="method">
  <div id="M006636_title" class="title">
    <b>test_respond_to?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006636_source')" id="l_M006636_source">show source</a> ]</p>
  <div id="M006636_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_respond_to?</span>
112:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
113:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title&quot;</span>)
114:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title?&quot;</span>)
115:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title=&quot;</span>)
116:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title</span>)
117:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title?</span>)
118:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title=</span>)
119:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;author_name&quot;</span>)
120:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;attribute_names&quot;</span>)
121:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;nothingness&quot;</span>)
122:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:nothingness</span>)
123:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006645" class="method">
  <div id="M006645_title" class="title">
    <b>test_save!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006645_source')" id="l_M006645_source">show source</a> ]</p>
  <div id="M006645_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save!</span>
195:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>)
196:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
197: 
198:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
199:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save!</span> }
200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006648" class="method">
  <div id="M006648_title" class="title">
    <b>test_save_for_record_with_only_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006648_source')" id="l_M006648_source">show source</a> ]</p>
  <div id="M006648_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 219</span>
219:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_for_record_with_only_primary_key</span>
220:     <span class="ruby-identifier">minimalistic</span> = <span class="ruby-constant">Minimalistic</span>.<span class="ruby-identifier">new</span>
221:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">minimalistic</span>.<span class="ruby-identifier">save</span> }
222:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006649" class="method">
  <div id="M006649_title" class="title">
    <b>test_save_for_record_with_only_primary_key_that_is_provided</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006649_source')" id="l_M006649_source">show source</a> ]</p>
  <div id="M006649_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 224</span>
224:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_for_record_with_only_primary_key_that_is_provided</span>
225:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Minimalistic</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>) }
226:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006647" class="method">
  <div id="M006647_title" class="title">
    <b>test_save_nil_string_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006647_source')" id="l_M006647_source">show source</a> ]</p>
  <div id="M006647_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_nil_string_attributes</span>
212:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
213:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-keyword kw">nil</span>
214:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
215:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
216:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
217:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006646" class="method">
  <div id="M006646_title" class="title">
    <b>test_save_null_string_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006646_source')" id="l_M006646_source">show source</a> ]</p>
  <div id="M006646_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_null_string_attributes</span>
203:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
204:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;null&quot;</span> }
205:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
206:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
207:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
208:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
209:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006790" class="method">
  <div id="M006790_title" class="title">
    <b>test_scoped_find_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006790_source')" id="l_M006790_source">show source</a> ]</p>
  <div id="M006790_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1742</span>
1742:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_conditions</span>
1743:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary &gt; 90000'</span> }) <span class="ruby-keyword kw">do</span>
1744:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id &lt; 5'</span>)
1745:     <span class="ruby-keyword kw">end</span>
1746:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)) <span class="ruby-comment cmt"># David's salary is less than 90,000</span>
1747:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">size</span>
1748:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006791" class="method">
  <div id="M006791_title" class="title">
    <b>test_scoped_find_limit_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006791_source')" id="l_M006791_source">show source</a> ]</p>
  <div id="M006791_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1750</span>
1750:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_limit_offset</span>
1751:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span> }) <span class="ruby-keyword kw">do</span>
1752:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
1753:     <span class="ruby-keyword kw">end</span>
1754:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1755:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>))
1756:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">size</span>
1757: 
1758:     <span class="ruby-comment cmt"># Test without scoped find conditions to ensure we get the whole thing</span>
1759:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
1760:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1761:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006793" class="method">
  <div id="M006793_title" class="title">
    <b>test_scoped_find_limit_offset_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006793_source')" id="l_M006793_source">show source</a> ]</p>
  <div id="M006793_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1786</span>
1786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_limit_offset_including_has_many_association</span>
1787:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>}) <span class="ruby-keyword kw">do</span>
1788:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;topics.id&quot;</span>)
1789:     <span class="ruby-keyword kw">end</span>
1790:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
1791:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
1792:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006792" class="method">
  <div id="M006792_title" class="title">
    <b>test_scoped_find_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006792_source')" id="l_M006792_source">show source</a> ]</p>
  <div id="M006792_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1763</span>
1763:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_order</span>
1764:     <span class="ruby-comment cmt"># Test order in scope</span>
1765:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary DESC'</span> }) <span class="ruby-keyword kw">do</span>
1766:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1767:     <span class="ruby-keyword kw">end</span>
1768:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Jamis'</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
1769:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>))
1770:     <span class="ruby-comment cmt"># Test scope without order and order in find</span>
1771:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }) <span class="ruby-keyword kw">do</span>
1772:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary DESC'</span>)
1773:     <span class="ruby-keyword kw">end</span>
1774:     <span class="ruby-comment cmt"># Test scope order + find order, find has priority</span>
1775:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span> }) <span class="ruby-keyword kw">do</span>
1776:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary ASC'</span>)
1777:     <span class="ruby-keyword kw">end</span>
1778:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>))
1779:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1780:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:dev_10</span>))
1781:     <span class="ruby-comment cmt"># Test without scoped find conditions to ensure we get the right thing</span>
1782:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
1783:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1784:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006794" class="method">
  <div id="M006794_title" class="title">
    <b>test_scoped_find_order_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006794_source')" id="l_M006794_source">show source</a> ]</p>
  <div id="M006794_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1794</span>
1794:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_order_including_has_many_association</span>
1795:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:projects</span> }) <span class="ruby-keyword kw">do</span>
1796:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1797:     <span class="ruby-keyword kw">end</span>
1798:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span>
1799:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1800:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">developers</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">salary</span>
1801:     <span class="ruby-keyword kw">end</span>
1802:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006795" class="method">
  <div id="M006795_title" class="title">
    <b>test_scoped_find_with_group_and_having</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006795_source')" id="l_M006795_source">show source</a> ]</p>
  <div id="M006795_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1804</span>
1804:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_with_group_and_having</span>
1805:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary'</span>, <span class="ruby-identifier">:having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SUM(salary) &gt; 10000&quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SUM(salary) as salary&quot;</span> }) <span class="ruby-keyword kw">do</span>
1806:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1807:     <span class="ruby-keyword kw">end</span>
1808:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1809:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006761" class="method">
  <div id="M006761_title" class="title">
    <b>test_serialized_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006761_source')" id="l_M006761_source">show source</a> ]</p>
  <div id="M006761_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1476</span>
1476:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_attribute</span>
1477:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1478:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>)
1479:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-constant">MyObject</span>)
1480:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1481:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006766" class="method">
  <div id="M006766_title" class="title">
    <b>test_serialized_attribute_with_class_constraint</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006766_source')" id="l_M006766_source">show source</a> ]</p>
  <div id="M006766_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1511</span>
1511:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_attribute_with_class_constraint</span>
1512:     <span class="ruby-identifier">settings</span> = { <span class="ruby-value str">&quot;color&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;blue&quot;</span> }
1513:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>, <span class="ruby-constant">Hash</span>)
1514:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">settings</span>)
1515:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
1516:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">settings</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>)
1517:   <span class="ruby-keyword kw">ensure</span>
1518:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>)
1519:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006763" class="method">
  <div id="M006763_title" class="title">
    <b>test_serialized_string_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006763_source')" id="l_M006763_source">show source</a> ]</p>
  <div id="M006763_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1489</span>
1489:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_string_attribute</span>
1490:     <span class="ruby-identifier">myobj</span> = <span class="ruby-value str">&quot;Yes&quot;</span>
1491:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>).<span class="ruby-identifier">reload</span>
1492:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1493:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006762" class="method">
  <div id="M006762_title" class="title">
    <b>test_serialized_time_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006762_source')" id="l_M006762_source">show source</a> ]</p>
  <div id="M006762_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1483</span>
1483:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_time_attribute</span>
1484:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2008</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">0</span>)
1485:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>).<span class="ruby-identifier">reload</span>
1486:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1487:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006633" class="method">
  <div id="M006633_title" class="title">
    <b>test_set_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006633_source')" id="l_M006633_source">show source</a> ]</p>
  <div id="M006633_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attributes</span>
88:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
89:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Jason&quot;</span> }
90:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
91:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
92:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Jason&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
93:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">author_email_address</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">author_email_address</span>)
94:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006635" class="method">
  <div id="M006635_title" class="title">
    <b>test_set_attributes_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006635_source')" id="l_M006635_source">show source</a> ]</p>
  <div id="M006635_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attributes_with_block</span>
102:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
103:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span>       = <span class="ruby-value str">&quot;Budget&quot;</span>
104:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;Jason&quot;</span>
105:     <span class="ruby-keyword kw">end</span>
106: 
107:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
108:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Jason&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006785" class="method">
  <div id="M006785_title" class="title">
    <b>test_set_inheritance_column_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006785_source')" id="l_M006785_source">show source</a> ]</p>
  <div id="M006785_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1672</span>
1672:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_inheritance_column_with_block</span>
1673:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1674:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_inheritance_column</span> { <span class="ruby-identifier">original_inheritance_column</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;_id&quot;</span> }
1675:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;type_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1676:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006784" class="method">
  <div id="M006784_title" class="title">
    <b>test_set_inheritance_column_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006784_source')" id="l_M006784_source">show source</a> ]</p>
  <div id="M006784_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1664</span>
1664:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_inheritance_column_with_value</span>
1665:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1666:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1667:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1668:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_inheritance_column</span> <span class="ruby-value str">&quot;bar&quot;</span>
1669:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1670:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006783" class="method">
  <div id="M006783_title" class="title">
    <b>test_set_primary_key_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006783_source')" id="l_M006783_source">show source</a> ]</p>
  <div id="M006783_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1658</span>
1658:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_primary_key_with_block</span>
1659:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1660:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_primary_key</span> { <span class="ruby-value str">&quot;sys_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_primary_key</span> }
1661:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;sys_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1662:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006782" class="method">
  <div id="M006782_title" class="title">
    <b>test_set_primary_key_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006782_source')" id="l_M006782_source">show source</a> ]</p>
  <div id="M006782_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1650</span>
1650:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_primary_key_with_value</span>
1651:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1652:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1653:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1654:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_primary_key</span> <span class="ruby-value str">&quot;bar&quot;</span>
1655:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1656:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006781" class="method">
  <div id="M006781_title" class="title">
    <b>test_set_table_name_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006781_source')" id="l_M006781_source">show source</a> ]</p>
  <div id="M006781_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1644</span>
1644:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_table_name_with_block</span>
1645:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1646:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_table_name</span> { <span class="ruby-value str">&quot;ks&quot;</span> }
1647:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ks&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1648:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006780" class="method">
  <div id="M006780_title" class="title">
    <b>test_set_table_name_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006780_source')" id="l_M006780_source">show source</a> ]</p>
  <div id="M006780_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1636</span>
1636:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_table_name_with_value</span>
1637:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1638:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1639:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1640:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_table_name</span> <span class="ruby-value str">&quot;bar&quot;</span>
1641:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1642:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006765" class="method">
  <div id="M006765_title" class="title">
    <b>test_should_raise_exception_on_serialized_attribute_with_type_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006765_source')" id="l_M006765_source">show source</a> ]</p>
  <div id="M006765_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1501</span>
1501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_raise_exception_on_serialized_attribute_with_type_mismatch</span>
1502:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1503:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>)
1504:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
1505:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>, <span class="ruby-constant">Hash</span>)
1506:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">SerializationTypeMismatch</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span> }
1507:   <span class="ruby-keyword kw">ensure</span>
1508:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>)
1509:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006831" class="method">
  <div id="M006831_title" class="title">
    <b>test_silence_sets_log_level_back_to_level_before_yield</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006831_source')" id="l_M006831_source">show source</a> ]</p>
  <div id="M006831_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2106</span>
2106:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silence_sets_log_level_back_to_level_before_yield</span>
2107:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2108:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2109:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2110:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
2111:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span>
2112:     <span class="ruby-keyword kw">end</span>
2113:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span>
2114:   <span class="ruby-keyword kw">ensure</span>
2115:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2116:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006830" class="method">
  <div id="M006830_title" class="title">
    <b>test_silence_sets_log_level_to_error_in_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006830_source')" id="l_M006830_source">show source</a> ]</p>
  <div id="M006830_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2092</span>
2092:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silence_sets_log_level_to_error_in_block</span>
2093:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2094:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2095:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2096:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>
2097:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span>
2098:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;warn&quot;</span>
2099:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-value str">&quot;error&quot;</span>
2100:     <span class="ruby-keyword kw">end</span>
2101:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;error\n&quot;</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2102:   <span class="ruby-keyword kw">ensure</span>
2103:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2104:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006758" class="method">
  <div id="M006758_title" class="title">
    <b>test_sql_injection_via_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006758_source')" id="l_M006758_source">show source</a> ]</p>
  <div id="M006758_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1450</span>
1450:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_sql_injection_via_find</span>
1451:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) <span class="ruby-keyword kw">do</span>
1452:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;123456 OR id &gt; 0&quot;</span>)
1453:     <span class="ruby-keyword kw">end</span>
1454:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006632" class="method">
  <div id="M006632_title" class="title">
    <b>test_table_exists</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006632_source')" id="l_M006632_source">show source</a> ]</p>
  <div id="M006632_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 82</span>
82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_table_exists</span>
83:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">NonExistentTable</span>.<span class="ruby-identifier">table_exists?</span>
84:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">table_exists?</span>
85:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006681" class="method">
  <div id="M006681_title" class="title">
    <b>test_table_name_guesses</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006681_source')" id="l_M006681_source">show source</a> ]</p>
  <div id="M006681_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 528</span>
528:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_table_name_guesses</span>
529:     <span class="ruby-identifier">classes</span> = [<span class="ruby-constant">Category</span>, <span class="ruby-constant">Smarts</span>, <span class="ruby-constant">CreditCard</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>, <span class="ruby-constant">MasterCreditCard</span>]
530: 
531:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;topics&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">table_name</span>
532: 
533:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
534:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;smarts&quot;</span>, <span class="ruby-constant">Smarts</span>.<span class="ruby-identifier">table_name</span>
535:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_cards&quot;</span>, <span class="ruby-constant">CreditCard</span>.<span class="ruby-identifier">table_name</span>
536:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_numbers&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>.<span class="ruby-identifier">table_name</span>
537:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number_cvv_codes&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>.<span class="ruby-identifier">table_name</span>
538:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_numbers&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>.<span class="ruby-identifier">table_name</span>
539:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>.<span class="ruby-identifier">table_name</span>
540:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;master_credit_cards&quot;</span>, <span class="ruby-constant">MasterCreditCard</span>.<span class="ruby-identifier">table_name</span>
541: 
542:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
543:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
544: 
545:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
546:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;smarts&quot;</span>, <span class="ruby-constant">Smarts</span>.<span class="ruby-identifier">table_name</span>
547:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card&quot;</span>, <span class="ruby-constant">CreditCard</span>.<span class="ruby-identifier">table_name</span>
548:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>.<span class="ruby-identifier">table_name</span>
549:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number_cvv_code&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>.<span class="ruby-identifier">table_name</span>
550:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>.<span class="ruby-identifier">table_name</span>
551:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>.<span class="ruby-identifier">table_name</span>
552:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;master_credit_card&quot;</span>, <span class="ruby-constant">MasterCreditCard</span>.<span class="ruby-identifier">table_name</span>
553: 
554:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
555:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
556: 
557:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
558:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
559:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
560:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_test&quot;</span>
561:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
562:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_categories_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
563:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
564:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
565:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
566:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
567:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
568:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
569: 
570:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
571:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
572:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
573:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
574:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_test&quot;</span>
575:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
576:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_category_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
577:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
578:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
579:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
580:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
581:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
582:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
583: 
584:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
585:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
586:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006822" class="method">
  <div id="M006822_title" class="title">
    <b>test_to_param_should_return_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006822_source')" id="l_M006822_source">show source</a> ]</p>
  <div id="M006822_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2051</span>
2051:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_param_should_return_string</span>
2052:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_param</span>
2053:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006809" class="method">
  <div id="M006809_title" class="title">
    <b>test_to_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006809_source')" id="l_M006809_source">show source</a> ]</p>
  <div id="M006809_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1917</span>
1917:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml</span>
1918:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>))
1919:     <span class="ruby-identifier">bonus_time_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">bonus_time</span>.<span class="ruby-identifier">xmlschema</span>
1920:     <span class="ruby-identifier">written_on_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">xmlschema</span>
1921:     <span class="ruby-identifier">last_read_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">xmlschema</span>
1922: 
1923:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;topic&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">name</span>
1924:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//title&quot;</span>].<span class="ruby-identifier">text</span>
1925:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//author-name&quot;</span>].<span class="ruby-identifier">text</span>
1926: 
1927:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//id&quot;</span>].<span class="ruby-identifier">text</span>
1928:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1929: 
1930:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">text</span>
1931:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1932: 
1933:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">written_on_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//written-on&quot;</span>].<span class="ruby-identifier">text</span>
1934:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//written-on&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1935: 
1936:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;--- Have a nice day\n&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//content&quot;</span>].<span class="ruby-identifier">text</span>
1937:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;yaml&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//content&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1938: 
1939:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;david@loudthinking.com&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//author-email-address&quot;</span>].<span class="ruby-identifier">text</span>
1940: 
1941:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">text</span>
1942:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1943:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;true&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'nil'</span>]
1944: 
1945:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>, <span class="ruby-identifier">:OracleAdapter</span>)
1946:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last_read_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">text</span>
1947:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1948:     <span class="ruby-keyword kw">else</span>
1949:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;2004-04-15&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">text</span>
1950:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;date&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1951:     <span class="ruby-keyword kw">end</span>
1952: 
1953:     <span class="ruby-comment cmt"># Oracle and DB2 don't have true boolean or time-only fields</span>
1954:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>, <span class="ruby-identifier">:DB2Adapter</span>)
1955:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//approved&quot;</span>].<span class="ruby-identifier">text</span>
1956:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;boolean&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//approved&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1957: 
1958:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bonus_time_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">text</span>
1959:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1960:     <span class="ruby-keyword kw">end</span>
1961:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006816" class="method">
  <div id="M006816_title" class="title">
    <b>test_to_xml_including_belongs_to_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006816_source')" id="l_M006816_source">show source</a> ]</p>
  <div id="M006816_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2005</span>
2005:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_belongs_to_association</span>
2006:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2007:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>)
2008: 
2009:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2010:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>)
2011:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006811" class="method">
  <div id="M006811_title" class="title">
    <b>test_to_xml_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006811_source')" id="l_M006811_source">show source</a> ]</p>
  <div id="M006811_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1974</span>
1974:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_has_many_association</span>
1975:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies_count</span>)
1976:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">7</span>)
1977:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
1978:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The Second Topic of the day&lt;/title&gt;)</span>)
1979:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006819" class="method">
  <div id="M006819_title" class="title">
    <b>test_to_xml_including_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006819_source')" id="l_M006819_source">show source</a> ]</p>
  <div id="M006819_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2031</span>
2031:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_methods</span>
2032:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:arbitrary_method</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
2033:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;company&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">9</span>)
2034:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;arbitrary-method&gt;I am Jack's profound disappointment&lt;/arbitrary-method&gt;)</span>)
2035:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006817" class="method">
  <div id="M006817_title" class="title">
    <b>test_to_xml_including_multiple_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006817_source')" id="l_M006817_source">show source</a> ]</p>
  <div id="M006817_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2013</span>
2013:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_multiple_associations</span>
2014:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:clients</span>, <span class="ruby-identifier">:account</span> ])
2015:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">6</span>)
2016:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;account&gt;)</span>)
2017:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
2018:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006818" class="method">
  <div id="M006818_title" class="title">
    <b>test_to_xml_including_multiple_associations_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006818_source')" id="l_M006818_source">show source</a> ]</p>
  <div id="M006818_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2020</span>
2020:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_multiple_associations_with_options</span>
2021:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(
2022:       <span class="ruby-identifier">:indent</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
2023:       <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:clients</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:name</span> } }
2024:     )
2025: 
2026:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">6</span>)
2027:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;client&gt;&lt;name&gt;Summit&lt;/name&gt;&lt;/client&gt;)</span>)
2028:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
2029:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006810" class="method">
  <div id="M006810_title" class="title">
    <b>test_to_xml_skipping_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006810_source')" id="l_M006810_source">show source</a> ]</p>
  <div id="M006810_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1963</span>
1963:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_skipping_attributes</span>
1964:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:replies_count</span>])
1965:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">7</span>)
1966:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
1967:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)
1968: 
1969:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:author_name</span>, <span class="ruby-identifier">:replies_count</span>])
1970:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
1971:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)
1972:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006820" class="method">
  <div id="M006820_title" class="title">
    <b>test_to_xml_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006820_source')" id="l_M006820_source">show source</a> ]</p>
  <div id="M006820_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2037</span>
2037:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_with_block</span>
2038:     <span class="ruby-identifier">value</span> = <span class="ruby-value str">&quot;Rockin' the block&quot;</span>
2039:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
2040:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">tag!</span> <span class="ruby-value str">&quot;arbitrary-element&quot;</span>, <span class="ruby-identifier">value</span>
2041:     <span class="ruby-keyword kw">end</span>
2042:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;company&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">9</span>)
2043:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;arbitrary-element&gt;#{value}&lt;/arbitrary-element&gt;)</span>)
2044:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006776" class="method">
  <div id="M006776_title" class="title">
    <b>test_toggle_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006776_source')" id="l_M006776_source">show source</a> ]</p>
  <div id="M006776_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1604</span>
1604:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_toggle_attribute</span>
1605:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">approved?</span>
1606:     <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">:approved</span>)
1607:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">approved?</span>
1608:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
1609:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">:approved</span>)
1610:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
1611:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
1612:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
1613:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006821" class="method">
  <div id="M006821_title" class="title">
    <b>test_type_name_with_module_should_handle_beginning</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006821_source')" id="l_M006821_source">show source</a> ]</p>
  <div id="M006821_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2046</span>
2046:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_type_name_with_module_should_handle_beginning</span>
2047:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ActiveRecord::Person'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:type_name_with_module</span>, <span class="ruby-value str">'Person'</span>)
2048:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'::Person'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:type_name_with_module</span>, <span class="ruby-value str">'::Person'</span>)
2049:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006656" class="method">
  <div id="M006656_title" class="title">
    <b>test_update</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006656_source')" id="l_M006656_source">show source</a> ]</p>
  <div id="M006656_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update</span>
280:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
281:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Another New Topic&quot;</span>
282:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span> = <span class="ruby-value str">&quot;2003-12-12 23:23:00&quot;</span>
283:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
284:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
285:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Another New Topic&quot;</span>, <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span>)
286: 
287:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Updated topic&quot;</span>
288:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">save</span>
289: 
290:     <span class="ruby-identifier">topicReloadedAgain</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
291: 
292:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Updated topic&quot;</span>, <span class="ruby-identifier">topicReloadedAgain</span>.<span class="ruby-identifier">title</span>)
293:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006689" class="method">
  <div id="M006689_title" class="title">
    <b>test_update_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006689_source')" id="l_M006689_source">show source</a> ]</p>
  <div id="M006689_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 652</span>
652:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all</span>
653:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>)
654:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
655:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
656: 
657:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'content = ?'</span>, <span class="ruby-value str">'bulk updated again!'</span>])
658:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated again!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
659:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated again!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
660: 
661:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'content = ?'</span>, <span class="ruby-keyword kw">nil</span>])
662:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
663:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006693" class="method">
  <div id="M006693_title" class="title">
    <b>test_update_all_ignores_order_without_limit_from_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006693_source')" id="l_M006693_source">show source</a> ]</p>
  <div id="M006693_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 685</span>
685:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_ignores_order_without_limit_from_association</span>
686:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
687:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
688:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_comments_and_categories</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_comments_and_categories</span>.<span class="ruby-identifier">update_all</span>([ <span class="ruby-value str">&quot;body = ?&quot;</span>, <span class="ruby-value str">&quot;bulk update!&quot;</span> ])
689:     <span class="ruby-keyword kw">end</span>
690:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006690" class="method">
  <div id="M006690_title" class="title">
    <b>test_update_all_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006690_source')" id="l_M006690_source">show source</a> ]</p>
  <div id="M006690_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 665</span>
665:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_hash</span>
666:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>
667:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bulk updated with hash!'</span>, <span class="ruby-identifier">:last_read</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
668:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated with hash!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
669:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated with hash!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
670:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>
671:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">last_read</span>
672:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006691" class="method">
  <div id="M006691_title" class="title">
    <b>test_update_all_with_non_standard_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006691_source')" id="l_M006691_source">show source</a> ]</p>
  <div id="M006691_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 674</span>
674:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_non_standard_table_name</span>
675:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">WarehouseThing</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'value = ?'</span>, <span class="ruby-value">0</span>], [<span class="ruby-value str">'id = ?'</span>, <span class="ruby-value">1</span>])
676:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">WarehouseThing</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">value</span>
677:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006692" class="method">
  <div id="M006692_title" class="title">
    <b>test_update_all_with_order_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006692_source')" id="l_M006692_source">show source</a> ]</p>
  <div id="M006692_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 680</span>
680:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_order_and_limit</span>
681:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span>)
682:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006694" class="method">
  <div id="M006694_title" class="title">
    <b>test_update_all_with_order_and_limit_updates_subset_only</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006694_source')" id="l_M006694_source">show source</a> ]</p>
  <div id="M006694_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 692</span>
692:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_order_and_limit_updates_subset_only</span>
693:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
694:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
695:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">size</span>
696:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
697:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">update_all</span>([ <span class="ruby-value str">&quot;body = ?&quot;</span>, <span class="ruby-value str">&quot;bulk update!&quot;</span> ])
698:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk update!&quot;</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">body</span>
699:       <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-value str">&quot;bulk update!&quot;</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">body</span>
700:     <span class="ruby-keyword kw">end</span>
701:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006642" class="method">
  <div id="M006642_title" class="title">
    <b>test_update_array_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006642_source')" id="l_M006642_source">show source</a> ]</p>
  <div id="M006642_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_array_content</span>
166:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
167:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = <span class="ruby-node">%w( one two three )</span>
168: 
169:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>.<span class="ruby-identifier">push</span> <span class="ruby-value str">&quot;four&quot;</span>
170:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three four )</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
171: 
172:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
173: 
174:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
175:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;five&quot;</span>
176:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three four five )</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
177:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006713" class="method">
  <div id="M006713_title" class="title">
    <b>test_update_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006713_source')" id="l_M006713_source">show source</a> ]</p>
  <div id="M006713_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 869</span>
869:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attribute</span>
870:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
871:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value str">&quot;approved&quot;</span>, <span class="ruby-keyword kw">true</span>)
872:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
873: 
874:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:approved</span>, <span class="ruby-keyword kw">false</span>)
875:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
876:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006714" class="method">
  <div id="M006714_title" class="title">
    <b>test_update_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006714_source')" id="l_M006714_source">show source</a> ]</p>
  <div id="M006714_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 878</span>
878:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attributes</span>
879:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
880:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
881:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
882: 
883:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-value str">&quot;approved&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic Updated&quot;</span>)
884:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
885:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
886:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic Updated&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
887: 
888:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>)
889:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
890:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
891:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
892:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006715" class="method">
  <div id="M006715_title" class="title">
    <b>test_update_attributes!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006715_source')" id="l_M006715_source">show source</a> ]</p>
  <div id="M006715_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 894</span>
894:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attributes!</span>
895:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
896:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
897:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
898: 
899:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The Second Topic of the day updated&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>)
900:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">reload</span>
901:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day updated&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
902:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
903: 
904:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>)
905:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">reload</span>
906:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
907:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
908: 
909:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>) }
910:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006697" class="method">
  <div id="M006697_title" class="title">
    <b>test_update_by_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006697_source')" id="l_M006697_source">show source</a> ]</p>
  <div id="M006697_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 718</span>
718:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_by_condition</span>
719:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span> <span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>, [<span class="ruby-value str">&quot;approved = ?&quot;</span>, <span class="ruby-keyword kw">true</span>]
720:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
721:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
722:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006657" class="method">
  <div id="M006657_title" class="title">
    <b>test_update_columns_not_equal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006657_source')" id="l_M006657_source">show source</a> ]</p>
  <div id="M006657_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 295</span>
295:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_columns_not_equal_attributes</span>
296:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
297:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Still another topic&quot;</span>
298:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
299: 
300:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
301:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;A New Topic&quot;</span>
302:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">'does_not_exist'</span>, <span class="ruby-value str">'test'</span>
303:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">save</span> }
304:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006688" class="method">
  <div id="M006688_title" class="title">
    <b>test_update_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006688_source')" id="l_M006688_source">show source</a> ]</p>
  <div id="M006688_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 629</span>
629:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_counter</span>
630:     <span class="ruby-identifier">category</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>)
631:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
632:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>
633: 
634:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>)
635:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>
636:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
637:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
638: 
639:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>)
640:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>
641:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
642:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
643: 
644:     <span class="ruby-identifier">category_2</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>)
645:     <span class="ruby-identifier">count_1</span>, <span class="ruby-identifier">count_2</span> = (<span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>), (<span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">categorizations_count</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>)
646:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>([<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">id</span>], <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
647:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>; <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">reload</span>
648:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count_1</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
649:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count_2</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">categorizations_count</span>
650:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006658" class="method">
  <div id="M006658_title" class="title">
    <b>test_update_for_record_with_only_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006658_source')" id="l_M006658_source">show source</a> ]</p>
  <div id="M006658_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_for_record_with_only_primary_key</span>
307:     <span class="ruby-identifier">minimalistic</span> = <span class="ruby-identifier">minimalistics</span>(<span class="ruby-identifier">:first</span>)
308:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">minimalistic</span>.<span class="ruby-identifier">save</span> }
309:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006695" class="method">
  <div id="M006695_title" class="title">
    <b>test_update_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006695_source')" id="l_M006695_source">show source</a> ]</p>
  <div id="M006695_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 703</span>
703:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_many</span>
704:     <span class="ruby-identifier">topic_data</span> = { <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1 updated&quot;</span> }, <span class="ruby-value">2</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2 updated&quot;</span> } }
705:     <span class="ruby-identifier">updated</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">topic_data</span>.<span class="ruby-identifier">keys</span>, <span class="ruby-identifier">topic_data</span>.<span class="ruby-identifier">values</span>)
706: 
707:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">updated</span>.<span class="ruby-identifier">size</span>
708:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1 updated&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
709:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;2 updated&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
710:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006703" class="method">
  <div id="M006703_title" class="title">
    <b>test_utc_as_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006703_source')" id="l_M006703_source">show source</a> ]</p>
  <div id="M006703_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 788</span>
788:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utc_as_time_zone</span>
789:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
790:       <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;bonus_time&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;5:42:00AM&quot;</span> }
791:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
792:       <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
793:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">5</span>, <span class="ruby-value">42</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
794:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
795:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006704" class="method">
  <div id="M006704_title" class="title">
    <b>test_utc_as_time_zone_and_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006704_source')" id="l_M006704_source">show source</a> ]</p>
  <div id="M006704_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 797</span>
797:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utc_as_time_zone_and_new</span>
798:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
799:       <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;bonus_time(1i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;2000&quot;</span>,
800:                      <span class="ruby-value str">&quot;bonus_time(2i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;1&quot;</span>,
801:                      <span class="ruby-value str">&quot;bonus_time(3i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;1&quot;</span>,
802:                      <span class="ruby-value str">&quot;bonus_time(4i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;10&quot;</span>,
803:                      <span class="ruby-value str">&quot;bonus_time(5i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;35&quot;</span>,
804:                      <span class="ruby-value str">&quot;bonus_time(6i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;50&quot;</span> }
805:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
806:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">10</span>, <span class="ruby-value">35</span>, <span class="ruby-value">50</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
807:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
808:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006659" class="method">
  <div id="M006659_title" class="title">
    <b>test_write_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006659_source')" id="l_M006659_source">show source</a> ]</p>
  <div id="M006659_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 311</span>
311:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_attribute</span>
312:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
313:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:write_attribute</span>, <span class="ruby-identifier">:title</span>, <span class="ruby-value str">&quot;Still another topic&quot;</span>)
314:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Still another topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
315: 
316:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">&quot;title&quot;</span>, <span class="ruby-value str">&quot;Still another topic: part 2&quot;</span>)
317:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Still another topic: part 2&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
318:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>