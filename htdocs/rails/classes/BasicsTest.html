  <div id="C00000973">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />BasicsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/base_test_rb.html');">activerecord/test/cases/base_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006802&name=quote_column_name" >quote_column_name</a></li>
  <li><a href="index.html?a=M006850&name=test_abstract_class" >test_abstract_class</a></li>
  <li><a href="index.html?a=M006844&name=test_all_with_conditions" >test_all_with_conditions</a></li>
  <li><a href="index.html?a=M006683&name=test_array_content" >test_array_content</a></li>
  <li><a href="index.html?a=M006861&name=test_array_to_xml_including_belongs_to_association" >test_array_to_xml_including_belongs_to_association</a></li>
  <li><a href="index.html?a=M006858&name=test_array_to_xml_including_has_many_association" >test_array_to_xml_including_has_many_association</a></li>
  <li><a href="index.html?a=M006860&name=test_array_to_xml_including_has_one_association" >test_array_to_xml_including_has_one_association</a></li>
  <li><a href="index.html?a=M006859&name=test_array_to_xml_including_methods" >test_array_to_xml_including_methods</a></li>
  <li><a href="index.html?a=M006854&name=test_assert_queries" >test_assert_queries</a></li>
  <li><a href="index.html?a=M006874&name=test_attribute_for_inspect" >test_attribute_for_inspect</a></li>
  <li><a href="index.html?a=M006745&name=test_attribute_keys_on_new_instance" >test_attribute_keys_on_new_instance</a></li>
  <li><a href="index.html?a=M006744&name=test_attribute_present" >test_attribute_present</a></li>
  <li><a href="index.html?a=M006790&name=test_attributes_on_dummy_time" >test_attributes_on_dummy_time</a></li>
  <li><a href="index.html?a=M006801&name=test_auto_id" >test_auto_id</a></li>
  <li><a href="index.html?a=M006851&name=test_base_class" >test_base_class</a></li>
  <li><a href="index.html?a=M006875&name=test_becomes" >test_becomes</a></li>
  <li><a href="index.html?a=M006878&name=test_benchmark_with_log_level" >test_benchmark_with_log_level</a></li>
  <li><a href="index.html?a=M006879&name=test_benchmark_with_use_silence" >test_benchmark_with_use_silence</a></li>
  <li><a href="index.html?a=M006797&name=test_bignum" >test_bignum</a></li>
  <li><a href="index.html?a=M006791&name=test_boolean" >test_boolean</a></li>
  <li><a href="index.html?a=M006731&name=test_boolean_attributes" >test_boolean_attributes</a></li>
  <li><a href="index.html?a=M006792&name=test_boolean_cast_from_string" >test_boolean_cast_from_string</a></li>
  <li><a href="index.html?a=M006689&name=test_case_sensitive_attributes_hash" >test_case_sensitive_attributes_hash</a></li>
  <li><a href="index.html?a=M006816&name=test_class_level_delete" >test_class_level_delete</a></li>
  <li><a href="index.html?a=M006815&name=test_class_level_destroy" >test_class_level_destroy</a></li>
  <li><a href="index.html?a=M006746&name=test_class_name" >test_class_name</a></li>
  <li><a href="index.html?a=M006834&name=test_clear_association_cache_new_record" >test_clear_association_cache_new_record</a></li>
  <li><a href="index.html?a=M006833&name=test_clear_association_cache_stored" >test_clear_association_cache_stored</a></li>
  <li><a href="index.html?a=M006794&name=test_clone" >test_clone</a></li>
  <li><a href="index.html?a=M006796&name=test_clone_preserves_subtype" >test_clone_preserves_subtype</a></li>
  <li><a href="index.html?a=M006795&name=test_clone_with_aggregate_of_same_name_as_attribute" >test_clone_with_aggregate_of_same_name_as_attribute</a></li>
  <li><a href="index.html?a=M006805&name=test_column_name_properly_quoted" >test_column_name_properly_quoted</a></li>
  <li><a href="index.html?a=M006832&name=test_count_with_join" >test_count_with_join</a></li>
  <li><a href="index.html?a=M006690&name=test_create" >test_create</a></li>
  <li><a href="index.html?a=M006698&name=test_create_columns_not_equal_attributes" >test_create_columns_not_equal_attributes</a></li>
  <li><a href="index.html?a=M006697&name=test_create_many" >test_create_many</a></li>
  <li><a href="index.html?a=M006701&name=test_create_many_through_factory_with_block" >test_create_many_through_factory_with_block</a></li>
  <li><a href="index.html?a=M006699&name=test_create_through_factory" >test_create_through_factory</a></li>
  <li><a href="index.html?a=M006700&name=test_create_through_factory_with_block" >test_create_through_factory_with_block</a></li>
  <li><a href="index.html?a=M006880&name=test_create_with_custom_timestamps" >test_create_with_custom_timestamps</a></li>
  <li><a href="index.html?a=M006718&name=test_custom_mutator" >test_custom_mutator</a></li>
  <li><a href="index.html?a=M006765&name=test_customized_primary_key_remains_protected" >test_customized_primary_key_remains_protected</a></li>
  <li><a href="index.html?a=M006766&name=test_customized_primary_key_remains_protected_when_referred_to_as_id" >test_customized_primary_key_remains_protected_when_referred_to_as_id</a></li>
  <li><a href="index.html?a=M006820&name=test_decrement_attribute" >test_decrement_attribute</a></li>
  <li><a href="index.html?a=M006821&name=test_decrement_attribute_by" >test_decrement_attribute_by</a></li>
  <li><a href="index.html?a=M006733&name=test_decrement_counter" >test_decrement_counter</a></li>
  <li><a href="index.html?a=M006798&name=test_default" >test_default</a></li>
  <li><a href="index.html?a=M006748&name=test_default_values" >test_default_values</a></li>
  <li><a href="index.html?a=M006751&name=test_default_values_on_empty_strings" >test_default_values_on_empty_strings</a></li>
  <li><a href="index.html?a=M006825&name=test_define_attr_method_with_block" >test_define_attr_method_with_block</a></li>
  <li><a href="index.html?a=M006824&name=test_define_attr_method_with_value" >test_define_attr_method_with_value</a></li>
  <li><a href="index.html?a=M006719&name=test_delete" >test_delete</a></li>
  <li><a href="index.html?a=M006742&name=test_delete_all" >test_delete_all</a></li>
  <li><a href="index.html?a=M006720&name=test_delete_doesnt_run_callbacks" >test_delete_doesnt_run_callbacks</a></li>
  <li><a href="index.html?a=M006730&name=test_delete_many" >test_delete_many</a></li>
  <li><a href="index.html?a=M006755&name=test_delete_new_record" >test_delete_new_record</a></li>
  <li><a href="index.html?a=M006756&name=test_delete_record_with_associations" >test_delete_record_with_associations</a></li>
  <li><a href="index.html?a=M006852&name=test_descends_from_active_record" >test_descends_from_active_record</a></li>
  <li><a href="index.html?a=M006721&name=test_destroy" >test_destroy</a></li>
  <li><a href="index.html?a=M006728&name=test_destroy_all" >test_destroy_all</a></li>
  <li><a href="index.html?a=M006729&name=test_destroy_many" >test_destroy_many</a></li>
  <li><a href="index.html?a=M006757&name=test_destroy_new_record" >test_destroy_new_record</a></li>
  <li><a href="index.html?a=M006758&name=test_destroy_record_with_associations" >test_destroy_record_with_associations</a></li>
  <li><a href="index.html?a=M006752&name=test_equality" >test_equality</a></li>
  <li><a href="index.html?a=M006753&name=test_equality_of_new_records" >test_equality_of_new_records</a></li>
  <li><a href="index.html?a=M006842&name=test_find_last" >test_find_last</a></li>
  <li><a href="index.html?a=M006847&name=test_find_multiple_ordered_last" >test_find_multiple_ordered_last</a></li>
  <li><a href="index.html?a=M006853&name=test_find_on_abstract_base_class_doesnt_use_type_condition" >test_find_on_abstract_base_class_doesnt_use_type_condition</a></li>
  <li><a href="index.html?a=M006845&name=test_find_ordered_last" >test_find_ordered_last</a></li>
  <li><a href="index.html?a=M006846&name=test_find_reverse_ordered_last" >test_find_reverse_ordered_last</a></li>
  <li><a href="index.html?a=M006849&name=test_find_scoped_ordered_last" >test_find_scoped_ordered_last</a></li>
  <li><a href="index.html?a=M006848&name=test_find_symbol_ordered_last" >test_find_symbol_ordered_last</a></li>
  <li><a href="index.html?a=M006799&name=test_geometric_content" >test_geometric_content</a></li>
  <li><a href="index.html?a=M006687&name=test_hash_content" >test_hash_content</a></li>
  <li><a href="index.html?a=M006696&name=test_hashes_not_mangled" >test_hashes_not_mangled</a></li>
  <li><a href="index.html?a=M006754&name=test_hashing" >test_hashing</a></li>
  <li><a href="index.html?a=M006817&name=test_increment_attribute" >test_increment_attribute</a></li>
  <li><a href="index.html?a=M006819&name=test_increment_attribute_by" >test_increment_attribute_by</a></li>
  <li><a href="index.html?a=M006732&name=test_increment_counter" >test_increment_counter</a></li>
  <li><a href="index.html?a=M006818&name=test_increment_nil_attribute" >test_increment_nil_attribute</a></li>
  <li><a href="index.html?a=M006723&name=test_initialize_with_attributes" >test_initialize_with_attributes</a></li>
  <li><a href="index.html?a=M006724&name=test_initialize_with_invalid_attribute" >test_initialize_with_invalid_attribute</a></li>
  <li><a href="index.html?a=M006869&name=test_inspect_class" >test_inspect_class</a></li>
  <li><a href="index.html?a=M006873&name=test_inspect_class_without_table" >test_inspect_class_without_table</a></li>
  <li><a href="index.html?a=M006870&name=test_inspect_instance" >test_inspect_instance</a></li>
  <li><a href="index.html?a=M006872&name=test_inspect_limited_select_instance" >test_inspect_limited_select_instance</a></li>
  <li><a href="index.html?a=M006871&name=test_inspect_new_instance" >test_inspect_new_instance</a></li>
  <li><a href="index.html?a=M006680&name=test_integers_as_nil" >test_integers_as_nil</a></li>
  <li><a href="index.html?a=M006835&name=test_interpolate_sql" >test_interpolate_sql</a></li>
  <li><a href="index.html?a=M006843&name=test_last" >test_last</a></li>
  <li><a href="index.html?a=M006725&name=test_load" >test_load</a></li>
  <li><a href="index.html?a=M006726&name=test_load_with_condition" >test_load_with_condition</a></li>
  <li><a href="index.html?a=M006767&name=test_mass_assigning_invalid_attribute" >test_mass_assigning_invalid_attribute</a></li>
  <li><a href="index.html?a=M006769&name=test_mass_assignment_accessible" >test_mass_assignment_accessible</a></li>
  <li><a href="index.html?a=M006763&name=test_mass_assignment_protection" >test_mass_assignment_protection</a></li>
  <li><a href="index.html?a=M006764&name=test_mass_assignment_protection_against_class_attribute_writers" >test_mass_assignment_protection_against_class_attribute_writers</a></li>
  <li><a href="index.html?a=M006770&name=test_mass_assignment_protection_inheritance" >test_mass_assignment_protection_inheritance</a></li>
  <li><a href="index.html?a=M006768&name=test_mass_assignment_protection_on_defaults" >test_mass_assignment_protection_on_defaults</a></li>
  <li><a href="index.html?a=M006762&name=test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used" >test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</a></li>
  <li><a href="index.html?a=M006789&name=test_multiparameter_assignment_of_aggregation" >test_multiparameter_assignment_of_aggregation</a></li>
  <li><a href="index.html?a=M006772&name=test_multiparameter_attributes_on_date" >test_multiparameter_attributes_on_date</a></li>
  <li><a href="index.html?a=M006779&name=test_multiparameter_attributes_on_date_with_all_empty" >test_multiparameter_attributes_on_date_with_all_empty</a></li>
  <li><a href="index.html?a=M006775&name=test_multiparameter_attributes_on_date_with_empty_day" >test_multiparameter_attributes_on_date_with_empty_day</a></li>
  <li><a href="index.html?a=M006777&name=test_multiparameter_attributes_on_date_with_empty_day_and_month" >test_multiparameter_attributes_on_date_with_empty_day_and_month</a></li>
  <li><a href="index.html?a=M006776&name=test_multiparameter_attributes_on_date_with_empty_day_and_year" >test_multiparameter_attributes_on_date_with_empty_day_and_year</a></li>
  <li><a href="index.html?a=M006774&name=test_multiparameter_attributes_on_date_with_empty_month" >test_multiparameter_attributes_on_date_with_empty_month</a></li>
  <li><a href="index.html?a=M006773&name=test_multiparameter_attributes_on_date_with_empty_year" >test_multiparameter_attributes_on_date_with_empty_year</a></li>
  <li><a href="index.html?a=M006778&name=test_multiparameter_attributes_on_date_with_empty_year_and_month" >test_multiparameter_attributes_on_date_with_empty_year_and_month</a></li>
  <li><a href="index.html?a=M006780&name=test_multiparameter_attributes_on_time" >test_multiparameter_attributes_on_time</a></li>
  <li><a href="index.html?a=M006786&name=test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion" >test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</a></li>
  <li><a href="index.html?a=M006787&name=test_multiparameter_attributes_on_time_with_empty_seconds" >test_multiparameter_attributes_on_time_with_empty_seconds</a></li>
  <li><a href="index.html?a=M006781&name=test_multiparameter_attributes_on_time_with_old_date" >test_multiparameter_attributes_on_time_with_old_date</a></li>
  <li><a href="index.html?a=M006785&name=test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes" >test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</a></li>
  <li><a href="index.html?a=M006783&name=test_multiparameter_attributes_on_time_with_time_zone_aware_attributes" >test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</a></li>
  <li><a href="index.html?a=M006784&name=test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false" >test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</a></li>
  <li><a href="index.html?a=M006782&name=test_multiparameter_attributes_on_time_with_utc" >test_multiparameter_attributes_on_time_with_utc</a></li>
  <li><a href="index.html?a=M006788&name=test_multiparameter_mass_assignment_protector" >test_multiparameter_mass_assignment_protector</a></li>
  <li><a href="index.html?a=M006793&name=test_new_record_returns_boolean" >test_new_record_returns_boolean</a></li>
  <li><a href="index.html?a=M006810&name=test_nil_serialized_attribute_with_class_constraint" >test_nil_serialized_attribute_with_class_constraint</a></li>
  <li><a href="index.html?a=M006715&name=test_non_attribute_access_and_assignment" >test_non_attribute_access_and_assignment</a></li>
  <li><a href="index.html?a=M006747&name=test_null_fields" >test_null_fields</a></li>
  <li><a href="index.html?a=M006800&name=test_numeric_fields" >test_numeric_fields</a></li>
  <li><a href="index.html?a=M006716&name=test_preserving_date_objects" >test_preserving_date_objects</a></li>
  <li><a href="index.html?a=M006717&name=test_preserving_time_objects" >test_preserving_time_objects</a></li>
  <li><a href="index.html?a=M006712&name=test_query_attribute_boolean" >test_query_attribute_boolean</a></li>
  <li><a href="index.html?a=M006711&name=test_query_attribute_number" >test_query_attribute_number</a></li>
  <li><a href="index.html?a=M006710&name=test_query_attribute_string" >test_query_attribute_string</a></li>
  <li><a href="index.html?a=M006713&name=test_query_attribute_with_custom_fields" >test_query_attribute_with_custom_fields</a></li>
  <li><a href="index.html?a=M006813&name=test_quote" >test_quote</a></li>
  <li><a href="index.html?a=M006814&name=test_quote_chars" >test_quote_chars</a></li>
  <li><a href="index.html?a=M006803&name=test_quote_keys" >test_quote_keys</a></li>
  <li><a href="index.html?a=M006806&name=test_quoting_arrays" >test_quoting_arrays</a></li>
  <li><a href="index.html?a=M006706&name=test_read_attribute" >test_read_attribute</a></li>
  <li><a href="index.html?a=M006707&name=test_read_attribute_when_false" >test_read_attribute_when_false</a></li>
  <li><a href="index.html?a=M006708&name=test_read_attribute_when_true" >test_read_attribute_when_true</a></li>
  <li><a href="index.html?a=M006684&name=test_read_attributes_before_type_cast" >test_read_attributes_before_type_cast</a></li>
  <li><a href="index.html?a=M006685&name=test_read_attributes_before_type_cast_on_boolean" >test_read_attributes_before_type_cast_on_boolean</a></li>
  <li><a href="index.html?a=M006686&name=test_read_attributes_before_type_cast_on_datetime" >test_read_attributes_before_type_cast_on_datetime</a></li>
  <li><a href="index.html?a=M006709&name=test_read_write_boolean_attribute" >test_read_write_boolean_attribute</a></li>
  <li><a href="index.html?a=M006714&name=test_reader_for_invalid_column_names" >test_reader_for_invalid_column_names</a></li>
  <li><a href="index.html?a=M006771&name=test_readonly_attributes" >test_readonly_attributes</a></li>
  <li><a href="index.html?a=M006722&name=test_record_not_found_exception" >test_record_not_found_exception</a></li>
  <li><a href="index.html?a=M006823&name=test_reload" >test_reload</a></li>
  <li><a href="index.html?a=M006682&name=test_respond_to?" >test_respond_to?</a></li>
  <li><a href="index.html?a=M006691&name=test_save!" >test_save!</a></li>
  <li><a href="index.html?a=M006694&name=test_save_for_record_with_only_primary_key" >test_save_for_record_with_only_primary_key</a></li>
  <li><a href="index.html?a=M006695&name=test_save_for_record_with_only_primary_key_that_is_provided" >test_save_for_record_with_only_primary_key_that_is_provided</a></li>
  <li><a href="index.html?a=M006693&name=test_save_nil_string_attributes" >test_save_nil_string_attributes</a></li>
  <li><a href="index.html?a=M006692&name=test_save_null_string_attributes" >test_save_null_string_attributes</a></li>
  <li><a href="index.html?a=M006836&name=test_scoped_find_conditions" >test_scoped_find_conditions</a></li>
  <li><a href="index.html?a=M006837&name=test_scoped_find_limit_offset" >test_scoped_find_limit_offset</a></li>
  <li><a href="index.html?a=M006839&name=test_scoped_find_limit_offset_including_has_many_association" >test_scoped_find_limit_offset_including_has_many_association</a></li>
  <li><a href="index.html?a=M006838&name=test_scoped_find_order" >test_scoped_find_order</a></li>
  <li><a href="index.html?a=M006840&name=test_scoped_find_order_including_has_many_association" >test_scoped_find_order_including_has_many_association</a></li>
  <li><a href="index.html?a=M006841&name=test_scoped_find_with_group_and_having" >test_scoped_find_with_group_and_having</a></li>
  <li><a href="index.html?a=M006807&name=test_serialized_attribute" >test_serialized_attribute</a></li>
  <li><a href="index.html?a=M006812&name=test_serialized_attribute_with_class_constraint" >test_serialized_attribute_with_class_constraint</a></li>
  <li><a href="index.html?a=M006809&name=test_serialized_string_attribute" >test_serialized_string_attribute</a></li>
  <li><a href="index.html?a=M006808&name=test_serialized_time_attribute" >test_serialized_time_attribute</a></li>
  <li><a href="index.html?a=M006679&name=test_set_attributes" >test_set_attributes</a></li>
  <li><a href="index.html?a=M006681&name=test_set_attributes_with_block" >test_set_attributes_with_block</a></li>
  <li><a href="index.html?a=M006831&name=test_set_inheritance_column_with_block" >test_set_inheritance_column_with_block</a></li>
  <li><a href="index.html?a=M006830&name=test_set_inheritance_column_with_value" >test_set_inheritance_column_with_value</a></li>
  <li><a href="index.html?a=M006829&name=test_set_primary_key_with_block" >test_set_primary_key_with_block</a></li>
  <li><a href="index.html?a=M006828&name=test_set_primary_key_with_value" >test_set_primary_key_with_value</a></li>
  <li><a href="index.html?a=M006827&name=test_set_table_name_with_block" >test_set_table_name_with_block</a></li>
  <li><a href="index.html?a=M006826&name=test_set_table_name_with_value" >test_set_table_name_with_value</a></li>
  <li><a href="index.html?a=M006811&name=test_should_raise_exception_on_serialized_attribute_with_type_mismatch" >test_should_raise_exception_on_serialized_attribute_with_type_mismatch</a></li>
  <li><a href="index.html?a=M006877&name=test_silence_sets_log_level_back_to_level_before_yield" >test_silence_sets_log_level_back_to_level_before_yield</a></li>
  <li><a href="index.html?a=M006876&name=test_silence_sets_log_level_to_error_in_block" >test_silence_sets_log_level_to_error_in_block</a></li>
  <li><a href="index.html?a=M006804&name=test_sql_injection_via_find" >test_sql_injection_via_find</a></li>
  <li><a href="index.html?a=M006678&name=test_table_exists" >test_table_exists</a></li>
  <li><a href="index.html?a=M006727&name=test_table_name_guesses" >test_table_name_guesses</a></li>
  <li><a href="index.html?a=M006868&name=test_to_param_should_return_string" >test_to_param_should_return_string</a></li>
  <li><a href="index.html?a=M006855&name=test_to_xml" >test_to_xml</a></li>
  <li><a href="index.html?a=M006862&name=test_to_xml_including_belongs_to_association" >test_to_xml_including_belongs_to_association</a></li>
  <li><a href="index.html?a=M006857&name=test_to_xml_including_has_many_association" >test_to_xml_including_has_many_association</a></li>
  <li><a href="index.html?a=M006865&name=test_to_xml_including_methods" >test_to_xml_including_methods</a></li>
  <li><a href="index.html?a=M006863&name=test_to_xml_including_multiple_associations" >test_to_xml_including_multiple_associations</a></li>
  <li><a href="index.html?a=M006864&name=test_to_xml_including_multiple_associations_with_options" >test_to_xml_including_multiple_associations_with_options</a></li>
  <li><a href="index.html?a=M006856&name=test_to_xml_skipping_attributes" >test_to_xml_skipping_attributes</a></li>
  <li><a href="index.html?a=M006866&name=test_to_xml_with_block" >test_to_xml_with_block</a></li>
  <li><a href="index.html?a=M006822&name=test_toggle_attribute" >test_toggle_attribute</a></li>
  <li><a href="index.html?a=M006867&name=test_type_name_with_module_should_handle_beginning" >test_type_name_with_module_should_handle_beginning</a></li>
  <li><a href="index.html?a=M006702&name=test_update" >test_update</a></li>
  <li><a href="index.html?a=M006735&name=test_update_all" >test_update_all</a></li>
  <li><a href="index.html?a=M006739&name=test_update_all_ignores_order_without_limit_from_association" >test_update_all_ignores_order_without_limit_from_association</a></li>
  <li><a href="index.html?a=M006736&name=test_update_all_with_hash" >test_update_all_with_hash</a></li>
  <li><a href="index.html?a=M006737&name=test_update_all_with_non_standard_table_name" >test_update_all_with_non_standard_table_name</a></li>
  <li><a href="index.html?a=M006738&name=test_update_all_with_order_and_limit" >test_update_all_with_order_and_limit</a></li>
  <li><a href="index.html?a=M006740&name=test_update_all_with_order_and_limit_updates_subset_only" >test_update_all_with_order_and_limit_updates_subset_only</a></li>
  <li><a href="index.html?a=M006688&name=test_update_array_content" >test_update_array_content</a></li>
  <li><a href="index.html?a=M006759&name=test_update_attribute" >test_update_attribute</a></li>
  <li><a href="index.html?a=M006760&name=test_update_attributes" >test_update_attributes</a></li>
  <li><a href="index.html?a=M006761&name=test_update_attributes!" >test_update_attributes!</a></li>
  <li><a href="index.html?a=M006743&name=test_update_by_condition" >test_update_by_condition</a></li>
  <li><a href="index.html?a=M006703&name=test_update_columns_not_equal_attributes" >test_update_columns_not_equal_attributes</a></li>
  <li><a href="index.html?a=M006734&name=test_update_counter" >test_update_counter</a></li>
  <li><a href="index.html?a=M006704&name=test_update_for_record_with_only_primary_key" >test_update_for_record_with_only_primary_key</a></li>
  <li><a href="index.html?a=M006741&name=test_update_many" >test_update_many</a></li>
  <li><a href="index.html?a=M006749&name=test_utc_as_time_zone" >test_utc_as_time_zone</a></li>
  <li><a href="index.html?a=M006750&name=test_utc_as_time_zone_and_new" >test_utc_as_time_zone_and_new</a></li>
  <li><a href="index.html?a=M006705&name=test_write_attribute" >test_write_attribute</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/BasicsTest/Geometric.html');" class="link">BasicsTest::Geometric</a>"<br />
Class "<a href="#" onclick="jsHref('classes/BasicsTest/NumericData.html');" class="link">BasicsTest::NumericData</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">MyObject</td>
    <td>=</td>
    <td class="attr-value">Struct.new :attribute1, :attribute2</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M006802" class="method">
  <div id="M006802_title" class="title">
    <b>quote_column_name</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006802_source')" id="l_M006802_source">show source</a> ]</p>
  <div id="M006802_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1439</span>
1439:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">quote_column_name</span>(<span class="ruby-identifier">name</span>)
1440:     <span class="ruby-node">&quot;&lt;#{name}&gt;&quot;</span>
1441:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006850" class="method">
  <div id="M006850_title" class="title">
    <b>test_abstract_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006850_source')" id="l_M006850_source">show source</a> ]</p>
  <div id="M006850_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1853</span>
1853:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_abstract_class</span>
1854:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">abstract_class?</span>
1855:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">abstract_class?</span>
1856:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">abstract_class?</span>
1857:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006844" class="method">
  <div id="M006844_title" class="title">
    <b>test_all_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006844_source')" id="l_M006844_source">show source</a> ]</p>
  <div id="M006844_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1822</span>
1822:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_all_with_conditions</span>
1823:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>), <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>)
1824:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006683" class="method">
  <div id="M006683_title" class="title">
    <b>test_array_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006683_source')" id="l_M006683_source">show source</a> ]</p>
  <div id="M006683_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 125</span>
125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_content</span>
126:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
127:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = <span class="ruby-node">%w( one two three )</span>
128:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
129: 
130:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three )</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>)
131:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006861" class="method">
  <div id="M006861_title" class="title">
    <b>test_array_to_xml_including_belongs_to_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006861_source')" id="l_M006861_source">show source</a> ]</p>
  <div id="M006861_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2000</span>
2000:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_belongs_to_association</span>
2001:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:another_client</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2002:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2003:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2004:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:another_client</span>).<span class="ruby-identifier">firm</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
2005:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006858" class="method">
  <div id="M006858_title" class="title">
    <b>test_array_to_xml_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006858_source')" id="l_M006858_source">show source</a> ]</p>
  <div id="M006858_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1983</span>
1983:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_has_many_association</span>
1984:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>)
1985:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
1986:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006860" class="method">
  <div id="M006860_title" class="title">
    <b>test_array_to_xml_including_has_one_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006860_source')" id="l_M006860_source">show source</a> ]</p>
  <div id="M006860_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1994</span>
1994:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_has_one_association</span>
1995:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>), <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:rails_core</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account</span>)
1996:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1997:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:rails_core</span>).<span class="ruby-identifier">account</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1998:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006859" class="method">
  <div id="M006859_title" class="title">
    <b>test_array_to_xml_including_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006859_source')" id="l_M006859_source">show source</a> ]</p>
  <div id="M006859_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1988</span>
1988:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_to_xml_including_methods</span>
1989:     <span class="ruby-identifier">xml</span> = [ <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>) ].<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:topic_id</span> ])
1990:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:first).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
1991:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;topic-id type=&quot;integer&quot;&gt;#{topics(:second).topic_id}&lt;/topic-id&gt;)</span>), <span class="ruby-identifier">xml</span>
1992:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006854" class="method">
  <div id="M006854_title" class="title">
    <b>test_assert_queries</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006854_source')" id="l_M006854_source">show source</a> ]</p>
  <div id="M006854_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1912</span>
1912:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assert_queries</span>
1913:     <span class="ruby-identifier">query</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-value str">'select count(*) from developers'</span> }
1914:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) { <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">query</span>.<span class="ruby-identifier">call</span> } }
1915:     <span class="ruby-identifier">assert_queries</span> <span class="ruby-value">1</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">query</span>
1916:     <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">true</span> }
1917:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006874" class="method">
  <div id="M006874_title" class="title">
    <b>test_attribute_for_inspect</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006874_source')" id="l_M006874_source">show source</a> ]</p>
  <div id="M006874_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2081</span>
2081:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_for_inspect</span>
2082:     <span class="ruby-identifier">t</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
2083:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;The First Topic Now Has A Title With\nNewlines And More Than 50 Characters&quot;</span>
2084: 
2085:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%(&quot;#{t.written_on.to_s(:db)}&quot;)</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">:written_on</span>)
2086:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;The First Topic Now Has A Title With\nNewlines And M...&quot;'</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_for_inspect</span>(<span class="ruby-identifier">:title</span>)
2087:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006745" class="method">
  <div id="M006745_title" class="title">
    <b>test_attribute_keys_on_new_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006745_source')" id="l_M006745_source">show source</a> ]</p>
  <div id="M006745_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 735</span>
735:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_keys_on_new_instance</span>
736:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
737:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span>, <span class="ruby-value str">&quot;The topics table has a title column, so it should be nil&quot;</span>
738:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title2</span> }
739:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006744" class="method">
  <div id="M006744_title" class="title">
    <b>test_attribute_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006744_source')" id="l_M006744_source">show source</a> ]</p>
  <div id="M006744_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 726</span>
726:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_present</span>
727:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
728:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;hello there!&quot;</span>
729:     <span class="ruby-identifier">t</span>.<span class="ruby-identifier">written_on</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>
730:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;title&quot;</span>)
731:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;written_on&quot;</span>)
732:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">t</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;content&quot;</span>)
733:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006790" class="method">
  <div id="M006790_title" class="title">
    <b>test_attributes_on_dummy_time</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006790_source')" id="l_M006790_source">show source</a> ]</p>
  <div id="M006790_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1212</span>
1212:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_on_dummy_time</span>
1213:     <span class="ruby-comment cmt"># Oracle, and Sybase do not have a TIME datatype.</span>
1214:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>, <span class="ruby-identifier">:SybaseAdapter</span>)
1215: 
1216:     <span class="ruby-identifier">attributes</span> = {
1217:       <span class="ruby-value str">&quot;bonus_time&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;5:42:00AM&quot;</span>
1218:     }
1219:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1220:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1221:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">5</span>, <span class="ruby-value">42</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
1222:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006801" class="method">
  <div id="M006801_title" class="title">
    <b>test_auto_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006801_source')" id="l_M006801_source">show source</a> ]</p>
  <div id="M006801_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1433</span>
1433:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_auto_id</span>
1434:     <span class="ruby-identifier">auto</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">new</span>
1435:     <span class="ruby-identifier">auto</span>.<span class="ruby-identifier">save</span>
1436:     <span class="ruby-identifier">assert</span> (<span class="ruby-identifier">auto</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
1437:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006851" class="method">
  <div id="M006851_title" class="title">
    <b>test_base_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006851_source')" id="l_M006851_source">show source</a> ]</p>
  <div id="M006851_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1859</span>
1859:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_base_class</span>
1860:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">LoosePerson</span>,     <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">base_class</span>
1861:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">LooseDescendant</span>, <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">base_class</span>
1862:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">TightPerson</span>,     <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">base_class</span>
1863:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">TightPerson</span>,     <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">base_class</span>
1864: 
1865:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">base_class</span>
1866:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">SpecialPost</span>.<span class="ruby-identifier">base_class</span>
1867:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>, <span class="ruby-constant">StiPost</span>.<span class="ruby-identifier">base_class</span>
1868:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">SubStiPost</span>, <span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">base_class</span>
1869:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006875" class="method">
  <div id="M006875_title" class="title">
    <b>test_becomes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006875_source')" id="l_M006875_source">show source</a> ]</p>
  <div id="M006875_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2089</span>
2089:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_becomes</span>
2090:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Reply</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">Reply</span>)
2091:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">becomes</span>(<span class="ruby-constant">Reply</span>).<span class="ruby-identifier">title</span>
2092:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006878" class="method">
  <div id="M006878_title" class="title">
    <b>test_benchmark_with_log_level</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006878_source')" id="l_M006878_source">show source</a> ]</p>
  <div id="M006878_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2120</span>
2120:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_benchmark_with_log_level</span>
2121:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2122:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2123:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2124:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
2125:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Debug Topic Count&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2126:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Warn Topic Count&quot;</span>,  <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>)  { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2127:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Error Topic Count&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">ERROR</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> }
2128:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/Debug Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2129:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Warn Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2130:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Error Topic Count/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2131:   <span class="ruby-keyword kw">ensure</span>
2132:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006879" class="method">
  <div id="M006879_title" class="title">
    <b>test_benchmark_with_use_silence</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006879_source')" id="l_M006879_source">show source</a> ]</p>
  <div id="M006879_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2135</span>
2135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_benchmark_with_use_silence</span>
2136:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2137:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2138:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2139:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Logging&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-keyword kw">true</span>) { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;Loud&quot;</span> }
2140:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">benchmark</span>(<span class="ruby-value str">&quot;Logging&quot;</span>, <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>, <span class="ruby-keyword kw">false</span>)  { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">&quot;Quiet&quot;</span> }
2141:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/Loud/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2142:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Quiet/</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2143:   <span class="ruby-keyword kw">ensure</span>
2144:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006797" class="method">
  <div id="M006797_title" class="title">
    <b>test_bignum</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006797_source')" id="l_M006797_source">show source</a> ]</p>
  <div id="M006797_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1315</span>
1315:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bignum</span>
1316:     <span class="ruby-identifier">company</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1317:     <span class="ruby-identifier">company</span>.<span class="ruby-identifier">rating</span> = <span class="ruby-value">2147483647</span>
1318:     <span class="ruby-identifier">company</span>.<span class="ruby-identifier">save</span>
1319:     <span class="ruby-identifier">company</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1320:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2147483647</span>, <span class="ruby-identifier">company</span>.<span class="ruby-identifier">rating</span>
1321:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006791" class="method">
  <div id="M006791_title" class="title">
    <b>test_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006791_source')" id="l_M006791_source">show source</a> ]</p>
  <div id="M006791_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1224</span>
1224:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean</span>
1225:     <span class="ruby-identifier">b_nil</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> })
1226:     <span class="ruby-identifier">nil_id</span> = <span class="ruby-identifier">b_nil</span>.<span class="ruby-identifier">id</span>
1227:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
1228:     <span class="ruby-identifier">false_id</span> = <span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">id</span>
1229:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> })
1230:     <span class="ruby-identifier">true_id</span> = <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">id</span>
1231: 
1232:     <span class="ruby-identifier">b_nil</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">nil_id</span>)
1233:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">b_nil</span>.<span class="ruby-identifier">value</span>
1234:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">false_id</span>)
1235:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">value?</span>
1236:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">true_id</span>)
1237:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">value?</span>
1238:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006731" class="method">
  <div id="M006731_title" class="title">
    <b>test_boolean_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006731_source')" id="l_M006731_source">show source</a> ]</p>
  <div id="M006731_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 610</span>
610:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_attributes</span>
611:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
612:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">approved?</span>
613:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006792" class="method">
  <div id="M006792_title" class="title">
    <b>test_boolean_cast_from_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006792_source')" id="l_M006792_source">show source</a> ]</p>
  <div id="M006792_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1240</span>
1240:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_cast_from_string</span>
1241:     <span class="ruby-identifier">b_blank</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> })
1242:     <span class="ruby-identifier">blank_id</span> = <span class="ruby-identifier">b_blank</span>.<span class="ruby-identifier">id</span>
1243:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;0&quot;</span> })
1244:     <span class="ruby-identifier">false_id</span> = <span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">id</span>
1245:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span> })
1246:     <span class="ruby-identifier">true_id</span> = <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">id</span>
1247: 
1248:     <span class="ruby-identifier">b_blank</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">blank_id</span>)
1249:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">b_blank</span>.<span class="ruby-identifier">value</span>
1250:     <span class="ruby-identifier">b_false</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">false_id</span>)
1251:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">b_false</span>.<span class="ruby-identifier">value?</span>
1252:     <span class="ruby-identifier">b_true</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">true_id</span>)
1253:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">b_true</span>.<span class="ruby-identifier">value?</span>
1254:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006689" class="method">
  <div id="M006689_title" class="title">
    <b>test_case_sensitive_attributes_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006689_source')" id="l_M006689_source">show source</a> ]</p>
  <div id="M006689_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 179</span>
179:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_case_sensitive_attributes_hash</span>
180:     <span class="ruby-comment cmt"># DB2 is not case-sensitive</span>
181:     <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:DB2Adapter</span>)
182: 
183:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@loaded_fixtures</span>[<span class="ruby-value str">'computers'</span>][<span class="ruby-value str">'workstation'</span>].<span class="ruby-identifier">to_hash</span>, <span class="ruby-constant">Computer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">attributes</span>
184:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006816" class="method">
  <div id="M006816_title" class="title">
    <b>test_class_level_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006816_source')" id="l_M006816_source">show source</a> ]</p>
  <div id="M006816_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1554</span>
1554:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_level_delete</span>
1555:     <span class="ruby-identifier">should_be_destroyed_reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>)
1556:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">should_be_destroyed_reply</span>
1557: 
1558:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value">1</span>)
1559:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) }
1560:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">should_be_destroyed_reply</span>.<span class="ruby-identifier">id</span>) }
1561:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006815" class="method">
  <div id="M006815_title" class="title">
    <b>test_class_level_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006815_source')" id="l_M006815_source">show source</a> ]</p>
  <div id="M006815_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1545</span>
1545:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_level_destroy</span>
1546:     <span class="ruby-identifier">should_be_destroyed_reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>)
1547:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">should_be_destroyed_reply</span>
1548: 
1549:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-value">1</span>)
1550:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) }
1551:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">should_be_destroyed_reply</span>.<span class="ruby-identifier">id</span>) }
1552:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006746" class="method">
  <div id="M006746_title" class="title">
    <b>test_class_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006746_source')" id="l_M006746_source">show source</a> ]</p>
  <div id="M006746_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 741</span>
741:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_name</span>
742:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;firms&quot;</span>)
743:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Category&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;categories&quot;</span>)
744:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;AccountHolder&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>(<span class="ruby-value str">&quot;account_holder&quot;</span>)
745: 
746:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
747:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firms&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms&quot;</span> )
748:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
749: 
750:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
751:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;test_firms&quot;</span> )
752:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_tests&quot;</span>
753:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;test_firms_tests&quot;</span> )
754:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
755:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms_tests&quot;</span> )
756:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
757:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">class_name</span>( <span class="ruby-value str">&quot;firms&quot;</span> )
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006834" class="method">
  <div id="M006834_title" class="title">
    <b>test_clear_association_cache_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006834_source')" id="l_M006834_source">show source</a> ]</p>
  <div id="M006834_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1724</span>
1724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_association_cache_new_record</span>
1725:      <span class="ruby-identifier">firm</span>            = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
1726:      <span class="ruby-identifier">client_stored</span>   = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
1727:      <span class="ruby-identifier">client_new</span>      = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
1728:      <span class="ruby-identifier">client_new</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;The Joneses&quot;</span>
1729:      <span class="ruby-identifier">clients</span>         = [ <span class="ruby-identifier">client_stored</span>, <span class="ruby-identifier">client_new</span> ]
1730: 
1731:      <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>    <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">clients</span>
1732:      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>
1733: 
1734:      <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clear_association_cache</span>
1735:      <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>).<span class="ruby-identifier">to_set</span>
1736:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006833" class="method">
  <div id="M006833_title" class="title">
    <b>test_clear_association_cache_stored</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006833_source')" id="l_M006833_source">show source</a> ]</p>
  <div id="M006833_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1716</span>
1716:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_association_cache_stored</span>
1717:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1718:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">firm</span>
1719: 
1720:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clear_association_cache</span>
1721:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients</span>.<span class="ruby-identifier">collect</span>{ <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }.<span class="ruby-identifier">sort</span>
1722:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006794" class="method">
  <div id="M006794_title" class="title">
    <b>test_clone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006794_source')" id="l_M006794_source">show source</a> ]</p>
  <div id="M006794_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1261</span>
1261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone</span>
1262:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1263:     <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-keyword kw">nil</span>
1264:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">clone</span> }
1265:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>
1266:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">new_record?</span>
1267: 
1268:     <span class="ruby-comment cmt"># test if the attributes have been cloned</span>
1269:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;a&quot;</span>
1270:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;b&quot;</span>
1271:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
1272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>
1273: 
1274:     <span class="ruby-comment cmt"># test if the attribute values have been cloned</span>
1275:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = {<span class="ruby-value str">&quot;a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;b&quot;</span>}
1276:     <span class="ruby-identifier">cloned_topic</span> = <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">clone</span>
1277:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">title</span>[<span class="ruby-value str">&quot;a&quot;</span>] = <span class="ruby-value str">&quot;c&quot;</span>
1278:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>[<span class="ruby-value str">&quot;a&quot;</span>]
1279: 
1280:     <span class="ruby-comment cmt">#test if attributes set as part of after_initialize are cloned correctly</span>
1281:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_email_address</span>, <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">author_email_address</span>
1282: 
1283:     <span class="ruby-comment cmt"># test if saved clone object differs from original</span>
1284:     <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">save</span>
1285:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">new_record?</span>
1286:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cloned_topic</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>
1287:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006796" class="method">
  <div id="M006796_title" class="title">
    <b>test_clone_preserves_subtype</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006796_source')" id="l_M006796_source">show source</a> ]</p>
  <div id="M006796_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1309</span>
1309:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone_preserves_subtype</span>
1310:     <span class="ruby-identifier">clone</span> = <span class="ruby-keyword kw">nil</span>
1311:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">clone</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>).<span class="ruby-identifier">clone</span> }
1312:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Client</span>, <span class="ruby-identifier">clone</span>
1313:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006795" class="method">
  <div id="M006795_title" class="title">
    <b>test_clone_with_aggregate_of_same_name_as_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006795_source')" id="l_M006795_source">show source</a> ]</p>
  <div id="M006795_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1289</span>
1289:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone_with_aggregate_of_same_name_as_attribute</span>
1290:     <span class="ruby-identifier">dev</span> = <span class="ruby-constant">DeveloperWithAggregate</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1291:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">DeveloperSalary</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>
1292: 
1293:     <span class="ruby-identifier">clone</span> = <span class="ruby-keyword kw">nil</span>
1294:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">clone</span> = <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">clone</span> }
1295:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">DeveloperSalary</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>
1296:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1297:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">new_record?</span>
1298: 
1299:     <span class="ruby-comment cmt"># test if the attributes have been cloned</span>
1300:     <span class="ruby-identifier">original_amount</span> = <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1301:     <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span> = <span class="ruby-value">1</span>
1302:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_amount</span>, <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">salary</span>.<span class="ruby-identifier">amount</span>
1303: 
1304:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">save</span>
1305:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">clone</span>.<span class="ruby-identifier">new_record?</span>
1306:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">clone</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">id</span>
1307:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006805" class="method">
  <div id="M006805_title" class="title">
    <b>test_column_name_properly_quoted</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006805_source')" id="l_M006805_source">show source</a> ]</p>
  <div id="M006805_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1458</span>
1458:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_name_properly_quoted</span>
1459:     <span class="ruby-identifier">col_record</span> = <span class="ruby-constant">ColumnName</span>.<span class="ruby-identifier">new</span>
1460:     <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">references</span> = <span class="ruby-value">40</span>
1461:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">save</span>
1462:     <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">references</span> = <span class="ruby-value">41</span>
1463:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">save</span>
1464:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">c2</span> = <span class="ruby-constant">ColumnName</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">col_record</span>.<span class="ruby-identifier">id</span>)
1465:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">41</span>, <span class="ruby-identifier">c2</span>.<span class="ruby-identifier">references</span>)
1466:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006832" class="method">
  <div id="M006832_title" class="title">
    <b>test_count_with_join</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006832_source')" id="l_M006832_source">show source</a> ]</p>
  <div id="M006832_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1680</span>
1680:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_with_join</span>
1681:     <span class="ruby-identifier">res</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(*) FROM posts LEFT JOIN comments ON posts.id=comments.post_id WHERE posts.#{QUOTED_TYPE} = 'Post'&quot;</span>
1682: 
1683:     <span class="ruby-identifier">res2</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.#{QUOTED_TYPE} = 'Post'&quot;</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;LEFT JOIN comments ON posts.id=comments.post_id&quot;</span>)
1684:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res</span>, <span class="ruby-identifier">res2</span>
1685: 
1686:     <span class="ruby-identifier">res3</span> = <span class="ruby-keyword kw">nil</span>
1687:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1688:       <span class="ruby-identifier">res3</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.#{QUOTED_TYPE} = 'Post'&quot;</span>,
1689:                         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;LEFT JOIN comments ON posts.id=comments.post_id&quot;</span>)
1690:     <span class="ruby-keyword kw">end</span>
1691:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res</span>, <span class="ruby-identifier">res3</span>
1692: 
1693:     <span class="ruby-identifier">res4</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(p.id) FROM posts p, comments co WHERE p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>
1694:     <span class="ruby-identifier">res5</span> = <span class="ruby-keyword kw">nil</span>
1695:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1696:       <span class="ruby-identifier">res5</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>,
1697:                         <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p, comments co&quot;</span>,
1698:                         <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p.id&quot;</span>)
1699:     <span class="ruby-keyword kw">end</span>
1700: 
1701:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res4</span>, <span class="ruby-identifier">res5</span>
1702: 
1703:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SQLite2Adapter</span>, <span class="ruby-identifier">:DeprecatedSQLiteAdapter</span>)
1704:       <span class="ruby-identifier">res6</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count_by_sql</span> <span class="ruby-node">&quot;SELECT COUNT(DISTINCT p.id) FROM posts p, comments co WHERE p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>
1705:       <span class="ruby-identifier">res7</span> = <span class="ruby-keyword kw">nil</span>
1706:       <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
1707:         <span class="ruby-identifier">res7</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;p.#{QUOTED_TYPE} = 'Post' AND p.id=co.post_id&quot;</span>,
1708:                           <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p, comments co&quot;</span>,
1709:                           <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;p.id&quot;</span>,
1710:                           <span class="ruby-identifier">:distinct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
1711:       <span class="ruby-keyword kw">end</span>
1712:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">res6</span>, <span class="ruby-identifier">res7</span>
1713:     <span class="ruby-keyword kw">end</span>
1714:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006690" class="method">
  <div id="M006690_title" class="title">
    <b>test_create</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006690_source')" id="l_M006690_source">show source</a> ]</p>
  <div id="M006690_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 186</span>
186:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create</span>
187:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
188:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;New Topic&quot;</span>
189:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
190:     <span class="ruby-identifier">topic_reloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
191:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;New Topic&quot;</span>, <span class="ruby-identifier">topic_reloaded</span>.<span class="ruby-identifier">title</span>)
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006698" class="method">
  <div id="M006698_title" class="title">
    <b>test_create_columns_not_equal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006698_source')" id="l_M006698_source">show source</a> ]</p>
  <div id="M006698_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_columns_not_equal_attributes</span>
246:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
247:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">'Another New Topic'</span>
248:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">'does_not_exist'</span>, <span class="ruby-value str">'test'</span>
249:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span> }
250:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006697" class="method">
  <div id="M006697_title" class="title">
    <b>test_create_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006697_source')" id="l_M006697_source">show source</a> ]</p>
  <div id="M006697_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 239</span>
239:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_many</span>
240:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>([ { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first&quot;</span> }, { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;second&quot;</span> }])
241:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
242:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;first&quot;</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
243:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006701" class="method">
  <div id="M006701_title" class="title">
    <b>test_create_many_through_factory_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006701_source')" id="l_M006701_source">show source</a> ]</p>
  <div id="M006701_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_many_through_factory_with_block</span>
268:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>([ { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;first&quot;</span> }, { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;second&quot;</span> }]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
269:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;David&quot;</span>
270:     <span class="ruby-keyword kw">end</span>
271:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
272:     <span class="ruby-identifier">topic1</span>, <span class="ruby-identifier">topic2</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topics</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topics</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">id</span>)
273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;first&quot;</span>, <span class="ruby-identifier">topic1</span>.<span class="ruby-identifier">title</span>
274:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic1</span>.<span class="ruby-identifier">author_name</span>
275:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;second&quot;</span>, <span class="ruby-identifier">topic2</span>.<span class="ruby-identifier">title</span>
276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic2</span>.<span class="ruby-identifier">author_name</span>
277:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006699" class="method">
  <div id="M006699_title" class="title">
    <b>test_create_through_factory</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006699_source')" id="l_M006699_source">show source</a> ]</p>
  <div id="M006699_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 252</span>
252:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_through_factory</span>
253:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>)
254:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
255:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topicReloaded</span>)
256:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006700" class="method">
  <div id="M006700_title" class="title">
    <b>test_create_through_factory_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006700_source')" id="l_M006700_source">show source</a> ]</p>
  <div id="M006700_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_through_factory_with_block</span>
259:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
260:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;David&quot;</span>
261:     <span class="ruby-keyword kw">end</span>
262:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
263:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;New Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
264:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
265:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006880" class="method">
  <div id="M006880_title" class="title">
    <b>test_create_with_custom_timestamps</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006880_source')" id="l_M006880_source">show source</a> ]</p>
  <div id="M006880_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2147</span>
2147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_with_custom_timestamps</span>
2148:     <span class="ruby-identifier">custom_datetime</span> = <span class="ruby-value">1</span>.<span class="ruby-identifier">hour</span>.<span class="ruby-identifier">ago</span>.<span class="ruby-identifier">beginning_of_day</span>
2149: 
2150:     <span class="ruby-node">%w(created_at created_on updated_at updated_on)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span>
2151:       <span class="ruby-identifier">parrot</span> = <span class="ruby-constant">LiveParrot</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;colombian&quot;</span>, <span class="ruby-identifier">attribute</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom_datetime</span>)
2152:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">custom_datetime</span>, <span class="ruby-identifier">parrot</span>[<span class="ruby-identifier">attribute</span>]
2153:     <span class="ruby-keyword kw">end</span>
2154:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006718" class="method">
  <div id="M006718_title" class="title">
    <b>test_custom_mutator</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006718_source')" id="l_M006718_source">show source</a> ]</p>
  <div id="M006718_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 467</span>
467:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_custom_mutator</span>
468:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
469:     <span class="ruby-comment cmt"># This mutator is protected in the class definition</span>
470:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:approved=</span>, <span class="ruby-keyword kw">true</span>)
471:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-value str">&quot;@custom_approved&quot;</span>)
472:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006765" class="method">
  <div id="M006765_title" class="title">
    <b>test_customized_primary_key_remains_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006765_source')" id="l_M006765_source">show source</a> ]</p>
  <div id="M006765_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 936</span>
936:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_customized_primary_key_remains_protected</span>
937:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:nick</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'webster123'</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
938:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">id</span>
939: 
940:     <span class="ruby-identifier">keyboard</span> = <span class="ruby-constant">Keyboard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:key_number</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
941:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">keyboard</span>.<span class="ruby-identifier">id</span>
942:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006766" class="method">
  <div id="M006766_title" class="title">
    <b>test_customized_primary_key_remains_protected_when_referred_to_as_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006766_source')" id="l_M006766_source">show source</a> ]</p>
  <div id="M006766_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 944</span>
944:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_customized_primary_key_remains_protected_when_referred_to_as_id</span>
945:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'webster123'</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
946:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">id</span>
947: 
948:     <span class="ruby-identifier">keyboard</span> = <span class="ruby-constant">Keyboard</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'nice try'</span>)
949:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">keyboard</span>.<span class="ruby-identifier">id</span>
950:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006820" class="method">
  <div id="M006820_title" class="title">
    <b>test_decrement_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006820_source')" id="l_M006820_source">show source</a> ]</p>
  <div id="M006820_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1587</span>
1587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_attribute</span>
1588:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1589: 
1590:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>)
1591:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">49</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1592: 
1593:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">:credit_limit</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>)
1594:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">47</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1595:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006821" class="method">
  <div id="M006821_title" class="title">
    <b>test_decrement_attribute_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006821_source')" id="l_M006821_source">show source</a> ]</p>
  <div id="M006821_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1597</span>
1597:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_attribute_by</span>
1598:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1599:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement!</span> <span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">5</span>
1600:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">45</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1601: 
1602:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">decrement</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">decrement!</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">3</span>)
1603:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">41</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1604:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006733" class="method">
  <div id="M006733_title" class="title">
    <b>test_decrement_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006733_source')" id="l_M006733_source">show source</a> ]</p>
  <div id="M006733_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 623</span>
623:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decrement_counter</span>
624:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">decrement_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">2</span>)
625:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">-1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">replies_count</span>
626: 
627:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">decrement_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">2</span>)
628:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">-2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">replies_count</span>
629:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006798" class="method">
  <div id="M006798_title" class="title">
    <b>test_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006798_source')" id="l_M006798_source">show source</a> ]</p>
  <div id="M006798_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1325</span>
1325:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default</span>
1326:       <span class="ruby-identifier">default</span> = <span class="ruby-constant">Default</span>.<span class="ruby-identifier">new</span>
1327: 
1328:       <span class="ruby-comment cmt"># fixed dates / times</span>
1329:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">default</span>.<span class="ruby-identifier">fixed_date</span>
1330:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>,<span class="ruby-value">0</span>), <span class="ruby-identifier">default</span>.<span class="ruby-identifier">fixed_time</span>
1331: 
1332:       <span class="ruby-comment cmt"># char types</span>
1333:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Y'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char1</span>
1334:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a varchar field'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char2</span>
1335:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a text field'</span>, <span class="ruby-identifier">default</span>.<span class="ruby-identifier">char3</span>
1336:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006748" class="method">
  <div id="M006748_title" class="title">
    <b>test_default_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006748_source')" id="l_M006748_source">show source</a> ]</p>
  <div id="M006748_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 765</span>
765:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_values</span>
766:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
767:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
768:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
769:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
770:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
771: 
772:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
773: 
774:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
775:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
776:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
777: 
778:     <span class="ruby-comment cmt"># Oracle has some funky default handling, so it requires a bit of</span>
779:     <span class="ruby-comment cmt"># extra testing. See ticket #2788.</span>
780:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>)
781:       <span class="ruby-identifier">test</span> = <span class="ruby-constant">TestOracleDefault</span>.<span class="ruby-identifier">new</span>
782:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;X&quot;</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_char</span>
783:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_string</span>
784:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">test</span>.<span class="ruby-identifier">test_int</span>
785:     <span class="ruby-keyword kw">end</span>
786:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006751" class="method">
  <div id="M006751_title" class="title">
    <b>test_default_values_on_empty_strings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006751_source')" id="l_M006751_source">show source</a> ]</p>
  <div id="M006751_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 813</span>
813:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_values_on_empty_strings</span>
814:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
815:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>  = <span class="ruby-keyword kw">nil</span>
816:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span> = <span class="ruby-keyword kw">nil</span>
817: 
818:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
819: 
820:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
821:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
822: 
823:     <span class="ruby-comment cmt"># Sybase adapter does not allow nulls in boolean columns</span>
824:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>)
825:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> <span class="ruby-operator">==</span> <span class="ruby-keyword kw">false</span>
826:     <span class="ruby-keyword kw">else</span>
827:       <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
828:     <span class="ruby-keyword kw">end</span>
829:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006825" class="method">
  <div id="M006825_title" class="title">
    <b>test_define_attr_method_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006825_source')" id="l_M006825_source">show source</a> ]</p>
  <div id="M006825_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1632</span>
1632:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_define_attr_method_with_block</span>
1633:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1634:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_attr_method</span>, <span class="ruby-identifier">:primary_key</span>) { <span class="ruby-value str">&quot;sys_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_primary_key</span> }
1635:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;sys_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1636:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006824" class="method">
  <div id="M006824_title" class="title">
    <b>test_define_attr_method_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006824_source')" id="l_M006824_source">show source</a> ]</p>
  <div id="M006824_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1626</span>
1626:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_define_attr_method_with_value</span>
1627:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1628:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_attr_method</span>, <span class="ruby-identifier">:table_name</span>, <span class="ruby-value str">&quot;foo&quot;</span>)
1629:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1630:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006719" class="method">
  <div id="M006719_title" class="title">
    <b>test_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006719_source')" id="l_M006719_source">show source</a> ]</p>
  <div id="M006719_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 474</span>
474:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete</span>
475:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
476:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">delete</span>, <span class="ruby-value str">'topic.delete did not return self'</span>
477:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">frozen?</span>, <span class="ruby-value str">'topic not frozen after delete'</span>
478:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">destroyed?</span>, <span class="ruby-value str">'topic not marked as being destroyed'</span>
479:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>) }
480:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006742" class="method">
  <div id="M006742_title" class="title">
    <b>test_delete_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006742_source')" id="l_M006742_source">show source</a> ]</p>
  <div id="M006742_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_all</span>
715:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
716: 
717:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete_all</span>
718:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006720" class="method">
  <div id="M006720_title" class="title">
    <b>test_delete_doesnt_run_callbacks</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006720_source')" id="l_M006720_source">show source</a> ]</p>
  <div id="M006720_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 482</span>
482:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_doesnt_run_callbacks</span>
483:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">delete</span>
484:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
485:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006730" class="method">
  <div id="M006730_title" class="title">
    <b>test_delete_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006730_source')" id="l_M006730_source">show source</a> ]</p>
  <div id="M006730_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 604</span>
604:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_many</span>
605:     <span class="ruby-identifier">original_count</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
606:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">deleting</span> = [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>])
607:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">deleting</span>.<span class="ruby-identifier">size</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
608:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006755" class="method">
  <div id="M006755_title" class="title">
    <b>test_delete_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006755_source')" id="l_M006755_source">show source</a> ]</p>
  <div id="M006755_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 843</span>
843:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_new_record</span>
844:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
845:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete</span>
846:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
847:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006756" class="method">
  <div id="M006756_title" class="title">
    <b>test_delete_record_with_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006756_source')" id="l_M006756_source">show source</a> ]</p>
  <div id="M006756_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 849</span>
849:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_record_with_associations</span>
850:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
851:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">delete</span>
852:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
853:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">client</span>.<span class="ruby-identifier">firm</span>
854:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">FrozenObjectError</span>) { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;something else&quot;</span> }
855:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006852" class="method">
  <div id="M006852_title" class="title">
    <b>test_descends_from_active_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006852_source')" id="l_M006852_source">show source</a> ]</p>
  <div id="M006852_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1871</span>
1871:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_descends_from_active_record</span>
1872:     <span class="ruby-comment cmt"># Tries to call Object.abstract_class?</span>
1873:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) <span class="ruby-keyword kw">do</span>
1874:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1875:     <span class="ruby-keyword kw">end</span>
1876: 
1877:     <span class="ruby-comment cmt"># Abstract subclass of AR::Base.</span>
1878:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1879: 
1880:     <span class="ruby-comment cmt"># Concrete subclass of an abstract class.</span>
1881:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1882: 
1883:     <span class="ruby-comment cmt"># Concrete subclass of AR::Base.</span>
1884:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1885: 
1886:     <span class="ruby-comment cmt"># Concrete subclass of a concrete class but has no type column.</span>
1887:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1888: 
1889:     <span class="ruby-comment cmt"># Concrete subclass of AR::Base.</span>
1890:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1891: 
1892:     <span class="ruby-comment cmt"># Abstract subclass of a concrete class which has a type column.</span>
1893:     <span class="ruby-comment cmt"># This is pathological, as you'll never have Sub &lt; Abstract &lt; Concrete.</span>
1894:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">StiPost</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1895: 
1896:     <span class="ruby-comment cmt"># Concrete subclasses an abstract class which has a type column.</span>
1897:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">descends_from_active_record?</span>
1898:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006721" class="method">
  <div id="M006721_title" class="title">
    <b>test_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006721_source')" id="l_M006721_source">show source</a> ]</p>
  <div id="M006721_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 487</span>
487:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy</span>
488:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
489:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">destroy</span>, <span class="ruby-value str">'topic.destroy did not return self'</span>
490:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">frozen?</span>, <span class="ruby-value str">'topic not frozen after destroy'</span>
491:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">destroyed?</span>, <span class="ruby-value str">'topic not marked as being destroyed'</span>
492:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>) }
493:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006728" class="method">
  <div id="M006728_title" class="title">
    <b>test_destroy_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006728_source')" id="l_M006728_source">show source</a> ]</p>
  <div id="M006728_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 590</span>
590:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_all</span>
591:     <span class="ruby-identifier">original_count</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
592:     <span class="ruby-identifier">topics_by_mary</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">mary</span> = <span class="ruby-value str">&quot;author_name = 'Mary'&quot;</span>)
593: 
594:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">destroy_all</span> <span class="ruby-identifier">mary</span>
595:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">original_count</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">topics_by_mary</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
596:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006729" class="method">
  <div id="M006729_title" class="title">
    <b>test_destroy_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006729_source')" id="l_M006729_source">show source</a> ]</p>
  <div id="M006729_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 598</span>
598:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_many</span>
599:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
600:     <span class="ruby-constant">Client</span>.<span class="ruby-identifier">destroy</span>([<span class="ruby-value">2</span>, <span class="ruby-value">3</span>])
601:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">count</span>
602:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006757" class="method">
  <div id="M006757_title" class="title">
    <b>test_destroy_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006757_source')" id="l_M006757_source">show source</a> ]</p>
  <div id="M006757_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 857</span>
857:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_new_record</span>
858:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">new</span>
859:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">destroy</span>
860:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
861:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006758" class="method">
  <div id="M006758_title" class="title">
    <b>test_destroy_record_with_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006758_source')" id="l_M006758_source">show source</a> ]</p>
  <div id="M006758_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 863</span>
863:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_record_with_associations</span>
864:     <span class="ruby-identifier">client</span> = <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>)
865:     <span class="ruby-identifier">client</span>.<span class="ruby-identifier">destroy</span>
866:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">client</span>.<span class="ruby-identifier">frozen?</span>
867:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-identifier">client</span>.<span class="ruby-identifier">firm</span>
868:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">FrozenObjectError</span>) { <span class="ruby-identifier">client</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;something else&quot;</span> }
869:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006752" class="method">
  <div id="M006752_title" class="title">
    <b>test_equality</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006752_source')" id="l_M006752_source">show source</a> ]</p>
  <div id="M006752_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 831</span>
831:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equality</span>
832:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">topic</span>
833:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006753" class="method">
  <div id="M006753_title" class="title">
    <b>test_equality_of_new_records</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006753_source')" id="l_M006753_source">show source</a> ]</p>
  <div id="M006753_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 835</span>
835:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equality_of_new_records</span>
836:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
837:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006842" class="method">
  <div id="M006842_title" class="title">
    <b>test_find_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006842_source')" id="l_M006842_source">show source</a> ]</p>
  <div id="M006842_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1813</span>
1813:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last</span>
1814:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>
1815:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>)
1816:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006847" class="method">
  <div id="M006847_title" class="title">
    <b>test_find_multiple_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006847_source')" id="l_M006847_source">show source</a> ]</p>
  <div id="M006847_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1836</span>
1836:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_multiple_ordered_last</span>
1837:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.name, developers.salary DESC'</span>
1838:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.name, developers.salary DESC'</span>).<span class="ruby-identifier">last</span>
1839:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006853" class="method">
  <div id="M006853_title" class="title">
    <b>test_find_on_abstract_base_class_doesnt_use_type_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006853_source')" id="l_M006853_source">show source</a> ]</p>
  <div id="M006853_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1900</span>
1900:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_abstract_base_class_doesnt_use_type_condition</span>
1901:     <span class="ruby-identifier">old_class</span> = <span class="ruby-constant">LooseDescendant</span>
1902:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:LooseDescendant</span>
1903: 
1904:     <span class="ruby-identifier">descendant</span> = <span class="ruby-identifier">old_class</span>.<span class="ruby-identifier">create!</span> <span class="ruby-identifier">:first_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bob'</span>
1905:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">descendant</span>.<span class="ruby-identifier">id</span>), <span class="ruby-node">&quot;Should have found instance of LooseDescendant when finding abstract LoosePerson: #{descendant.inspect}&quot;</span>
1906:   <span class="ruby-keyword kw">ensure</span>
1907:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:LooseDescendant</span>)
1908:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:LooseDescendant</span>, <span class="ruby-identifier">old_class</span>
1909:     <span class="ruby-keyword kw">end</span>
1910:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006845" class="method">
  <div id="M006845_title" class="title">
    <b>test_find_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006845_source')" id="l_M006845_source">show source</a> ]</p>
  <div id="M006845_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1826</span>
1826:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_ordered_last</span>
1827:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>
1828:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>).<span class="ruby-identifier">last</span>
1829:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006846" class="method">
  <div id="M006846_title" class="title">
    <b>test_find_reverse_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006846_source')" id="l_M006846_source">show source</a> ]</p>
  <div id="M006846_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1831</span>
1831:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_reverse_ordered_last</span>
1832:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>
1833:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>).<span class="ruby-identifier">last</span>
1834:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006849" class="method">
  <div id="M006849_title" class="title">
    <b>test_find_scoped_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006849_source')" id="l_M006849_source">show source</a> ]</p>
  <div id="M006849_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1846</span>
1846:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_scoped_ordered_last</span>
1847:     <span class="ruby-identifier">last_developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span> }) <span class="ruby-keyword kw">do</span>
1848:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:last</span>)
1849:     <span class="ruby-keyword kw">end</span>
1850:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last_developer</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary ASC'</span>).<span class="ruby-identifier">last</span>
1851:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006848" class="method">
  <div id="M006848_title" class="title">
    <b>test_find_symbol_ordered_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006848_source')" id="l_M006848_source">show source</a> ]</p>
  <div id="M006848_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1841</span>
1841:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_symbol_ordered_last</span>
1842:     <span class="ruby-identifier">last</span>  = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:salary</span>
1843:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:salary</span>).<span class="ruby-identifier">last</span>
1844:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006799" class="method">
  <div id="M006799_title" class="title">
    <b>test_geometric_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006799_source')" id="l_M006799_source">show source</a> ]</p>
  <div id="M006799_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1339</span>
1339:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_geometric_content</span>
1340: 
1341:       <span class="ruby-comment cmt"># accepted format notes:</span>
1342:       <span class="ruby-comment cmt"># ()'s aren't required</span>
1343:       <span class="ruby-comment cmt"># values can be a mix of float or integer</span>
1344: 
1345:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">new</span>(
1346:         <span class="ruby-identifier">:a_point</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(5.0, 6.1)'</span>,
1347:         <span class="ruby-comment cmt">#:a_line         =&gt; '((2.0, 3), (5.5, 7.0))' # line type is currently unsupported in postgresql</span>
1348:         <span class="ruby-identifier">:a_line_segment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(2.0, 3), (5.5, 7.0)'</span>,
1349:         <span class="ruby-identifier">:a_box</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2.0, 3, 5.5, 7.0'</span>,
1350:         <span class="ruby-identifier">:a_path</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'[(2.0, 3), (5.5, 7.0), (8.5, 11.0)]'</span>,  <span class="ruby-comment cmt"># [ ] is an open path</span>
1351:         <span class="ruby-identifier">:a_polygon</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0), (8.5, 11.0))'</span>,
1352:         <span class="ruby-identifier">:a_circle</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&lt;(5.3, 10.4), 2&gt;'</span>
1353:       )
1354: 
1355:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">save</span>
1356: 
1357:       <span class="ruby-comment cmt"># Reload and check that we have all the geometric attributes.</span>
1358:       <span class="ruby-identifier">h</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>)
1359: 
1360:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5,6.1)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_point</span>
1361:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_line_segment</span>
1362:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5.5,7),(2,3)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_box</span>   <span class="ruby-comment cmt"># reordered to store upper right corner then bottom left corner</span>
1363:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7),(8.5,11)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_path</span>
1364:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_polygon</span>
1365:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;(5.3,10.4),2&gt;'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_circle</span>
1366: 
1367:       <span class="ruby-comment cmt"># use a geometric function to test for an open path</span>
1368:       <span class="ruby-identifier">objs</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find_by_sql</span> [<span class="ruby-value str">&quot;select isopen(a_path) from geometrics where id = ?&quot;</span>, <span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>]
1369:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">objs</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">isopen</span>, <span class="ruby-value str">'t'</span>
1370: 
1371:       <span class="ruby-comment cmt"># test alternate formats when defining the geometric types</span>
1372: 
1373:       <span class="ruby-identifier">g</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">new</span>(
1374:         <span class="ruby-identifier">:a_point</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'5.0, 6.1'</span>,
1375:         <span class="ruby-comment cmt">#:a_line         =&gt; '((2.0, 3), (5.5, 7.0))' # line type is currently unsupported in postgresql</span>
1376:         <span class="ruby-identifier">:a_line_segment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0))'</span>,
1377:         <span class="ruby-identifier">:a_box</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'(2.0, 3), (5.5, 7.0)'</span>,
1378:         <span class="ruby-identifier">:a_path</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((2.0, 3), (5.5, 7.0), (8.5, 11.0))'</span>,  <span class="ruby-comment cmt"># ( ) is a closed path</span>
1379:         <span class="ruby-identifier">:a_polygon</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2.0, 3, 5.5, 7.0, 8.5, 11.0'</span>,
1380:         <span class="ruby-identifier">:a_circle</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'((5.3, 10.4), 2)'</span>
1381:       )
1382: 
1383:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">save</span>
1384: 
1385:       <span class="ruby-comment cmt"># Reload and check that we have all the geometric attributes.</span>
1386:       <span class="ruby-identifier">h</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>)
1387: 
1388:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5,6.1)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_point</span>
1389:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'[(2,3),(5.5,7)]'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_line_segment</span>
1390:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'(5.5,7),(2,3)'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_box</span>   <span class="ruby-comment cmt"># reordered to store upper right corner then bottom left corner</span>
1391:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_path</span>
1392:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'((2,3),(5.5,7),(8.5,11))'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_polygon</span>
1393:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;(5.3,10.4),2&gt;'</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">a_circle</span>
1394: 
1395:       <span class="ruby-comment cmt"># use a geometric function to test for an closed path</span>
1396:       <span class="ruby-identifier">objs</span> = <span class="ruby-constant">Geometric</span>.<span class="ruby-identifier">find_by_sql</span> [<span class="ruby-value str">&quot;select isclosed(a_path) from geometrics where id = ?&quot;</span>, <span class="ruby-identifier">g</span>.<span class="ruby-identifier">id</span>]
1397:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">objs</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">isclosed</span>, <span class="ruby-value str">'t'</span>
1398:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006687" class="method">
  <div id="M006687_title" class="title">
    <b>test_hash_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006687_source')" id="l_M006687_source">show source</a> ]</p>
  <div id="M006687_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 151</span>
151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_content</span>
152:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
153:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = { <span class="ruby-value str">&quot;one&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value str">&quot;two&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span> }
154:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
155: 
156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;two&quot;</span>]
157: 
158:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content_will_change!</span>
159:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;three&quot;</span>] = <span class="ruby-value">3</span>
160:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
161: 
162:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>[<span class="ruby-value str">&quot;three&quot;</span>]
163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006696" class="method">
  <div id="M006696_title" class="title">
    <b>test_hashes_not_mangled</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006696_source')" id="l_M006696_source">show source</a> ]</p>
  <div id="M006696_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 228</span>
228:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hashes_not_mangled</span>
229:     <span class="ruby-identifier">new_topic</span> = { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span> }
230:     <span class="ruby-identifier">new_topic_values</span> = { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;AnotherTopic&quot;</span> }
231: 
232:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">new_topic</span>)
233:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_topic</span>[<span class="ruby-identifier">:title</span>], <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
234: 
235:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span>= <span class="ruby-identifier">new_topic_values</span>
236:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_topic_values</span>[<span class="ruby-identifier">:title</span>], <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
237:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006754" class="method">
  <div id="M006754_title" class="title">
    <b>test_hashing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006754_source')" id="l_M006754_source">show source</a> ]</p>
  <div id="M006754_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 839</span>
839:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hashing</span>
840:     <span class="ruby-identifier">assert_equal</span> [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) ], [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">topic</span> ] <span class="ruby-operator">&amp;</span> [ <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>) ]
841:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006817" class="method">
  <div id="M006817_title" class="title">
    <b>test_increment_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006817_source')" id="l_M006817_source">show source</a> ]</p>
  <div id="M006817_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1563</span>
1563:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_attribute</span>
1564:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1565:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:credit_limit</span>
1566:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">51</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1567: 
1568:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment</span>(<span class="ruby-identifier">:credit_limit</span>).<span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">:credit_limit</span>)
1569:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">53</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1570:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006819" class="method">
  <div id="M006819_title" class="title">
    <b>test_increment_attribute_by</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006819_source')" id="l_M006819_source">show source</a> ]</p>
  <div id="M006819_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1578</span>
1578:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_attribute_by</span>
1579:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">50</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">credit_limit</span>
1580:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">5</span>
1581:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">55</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1582: 
1583:     <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>).<span class="ruby-identifier">increment</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">1</span>).<span class="ruby-identifier">increment!</span>(<span class="ruby-identifier">:credit_limit</span>, <span class="ruby-value">3</span>)
1584:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">59</span>, <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">credit_limit</span>
1585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006732" class="method">
  <div id="M006732_title" class="title">
    <b>test_increment_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006732_source')" id="l_M006732_source">show source</a> ]</p>
  <div id="M006732_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 615</span>
615:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_counter</span>
616:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">increment_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">1</span>)
617:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies_count</span>
618: 
619:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">increment_counter</span>(<span class="ruby-value str">&quot;replies_count&quot;</span>, <span class="ruby-value">1</span>)
620:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">replies_count</span>
621:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006818" class="method">
  <div id="M006818_title" class="title">
    <b>test_increment_nil_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006818_source')" id="l_M006818_source">show source</a> ]</p>
  <div id="M006818_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1572</span>
1572:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_increment_nil_attribute</span>
1573:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">parent_id</span>
1574:     <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">increment!</span> <span class="ruby-identifier">:parent_id</span>
1575:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">parent_id</span>
1576:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006723" class="method">
  <div id="M006723_title" class="title">
    <b>test_initialize_with_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006723_source')" id="l_M006723_source">show source</a> ]</p>
  <div id="M006723_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 499</span>
499:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_initialize_with_attributes</span>
500:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>({
501:       <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;initialized from attributes&quot;</span>, <span class="ruby-value str">&quot;written_on&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2003-12-12 23:23&quot;</span>
502:     })
503: 
504:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;initialized from attributes&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006724" class="method">
  <div id="M006724_title" class="title">
    <b>test_initialize_with_invalid_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006724_source')" id="l_M006724_source">show source</a> ]</p>
  <div id="M006724_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_initialize_with_invalid_attribute</span>
508:     <span class="ruby-keyword kw">begin</span>
509:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>({ <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;test&quot;</span>,
510:         <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2005&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;31&quot;</span>})
511:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">MultiparameterAssignmentErrors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ex</span>
512:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">size</span>)
513:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;last_read&quot;</span>, <span class="ruby-identifier">ex</span>.<span class="ruby-identifier">errors</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">attribute</span>)
514:     <span class="ruby-keyword kw">end</span>
515:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006869" class="method">
  <div id="M006869_title" class="title">
    <b>test_inspect_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006869_source')" id="l_M006869_source">show source</a> ]</p>
  <div id="M006869_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2057</span>
2057:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_class</span>
2058:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ActiveRecord::Base'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">inspect</span>
2059:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'LoosePerson(abstract)'</span>, <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">inspect</span>
2060:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^Topic\(id: integer, title: string/</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">inspect</span>)
2061:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006873" class="method">
  <div id="M006873_title" class="title">
    <b>test_inspect_class_without_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006873_source')" id="l_M006873_source">show source</a> ]</p>
  <div id="M006873_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2077</span>
2077:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_class_without_table</span>
2078:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;NonExistentTable(Table doesn't exist)&quot;</span>, <span class="ruby-constant">NonExistentTable</span>.<span class="ruby-identifier">inspect</span>
2079:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006870" class="method">
  <div id="M006870_title" class="title">
    <b>test_inspect_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006870_source')" id="l_M006870_source">show source</a> ]</p>
  <div id="M006870_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2063</span>
2063:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_instance</span>
2064:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
2065:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%(#&lt;Topic id: 1, title: &quot;The First Topic&quot;, author_name: &quot;David&quot;, author_email_address: &quot;david@loudthinking.com&quot;, written_on: &quot;#{topic.written_on.to_s(:db)}&quot;, bonus_time: &quot;#{topic.bonus_time.to_s(:db)}&quot;, last_read: &quot;#{topic.last_read.to_s(:db)}&quot;, content: &quot;Have a nice day&quot;, approved: false, replies_count: 1, parent_id: nil, parent_title: nil, type: nil&gt;)</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">inspect</span>
2066:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006872" class="method">
  <div id="M006872_title" class="title">
    <b>test_inspect_limited_select_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006872_source')" id="l_M006872_source">show source</a> ]</p>
  <div id="M006872_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2072</span>
2072:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_limited_select_instance</span>
2073:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(#&lt;Topic id: 1&gt;)</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id = 1'</span>).<span class="ruby-identifier">inspect</span>
2074:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(#&lt;Topic id: 1, title: &quot;The First Topic&quot;&gt;)</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id, title'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id = 1'</span>).<span class="ruby-identifier">inspect</span>
2075:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006871" class="method">
  <div id="M006871_title" class="title">
    <b>test_inspect_new_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006871_source')" id="l_M006871_source">show source</a> ]</p>
  <div id="M006871_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2068</span>
2068:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_new_instance</span>
2069:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/Topic id: nil/</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">inspect</span>
2070:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006680" class="method">
  <div id="M006680_title" class="title">
    <b>test_integers_as_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006680_source')" id="l_M006680_source">show source</a> ]</p>
  <div id="M006680_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 96</span>
96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integers_as_nil</span>
97:     <span class="ruby-identifier">test</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">'value'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>)
98:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">test</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">value</span>
99:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006835" class="method">
  <div id="M006835_title" class="title">
    <b>test_interpolate_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006835_source')" id="l_M006835_source">show source</a> ]</p>
  <div id="M006835_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1738</span>
1738:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolate_sql</span>
1739:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo@bar'</span>) }
1740:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo bar) baz'</span>) }
1741:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:interpolate_sql</span>, <span class="ruby-value str">'foo bar} baz'</span>) }
1742:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006843" class="method">
  <div id="M006843_title" class="title">
    <b>test_last</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006843_source')" id="l_M006843_source">show source</a> ]</p>
  <div id="M006843_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1818</span>
1818:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_last</span>
1819:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id desc'</span>), <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">last</span>
1820:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006725" class="method">
  <div id="M006725_title" class="title">
    <b>test_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006725_source')" id="l_M006725_source">show source</a> ]</p>
  <div id="M006725_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 517</span>
517:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load</span>
518:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
519:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">4</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
520:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
521:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006726" class="method">
  <div id="M006726_title" class="title">
    <b>test_load_with_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006726_source')" id="l_M006726_source">show source</a> ]</p>
  <div id="M006726_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 523</span>
523:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_with_condition</span>
524:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;author_name = 'Mary'&quot;</span>)
525: 
526:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
527:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
528:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006767" class="method">
  <div id="M006767_title" class="title">
    <b>test_mass_assigning_invalid_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006767_source')" id="l_M006767_source">show source</a> ]</p>
  <div id="M006767_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 952</span>
952:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assigning_invalid_attribute</span>
953:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
954: 
955:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">UnknownAttributeError</span>) <span class="ruby-keyword kw">do</span>
956:       <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Client&quot;</span>, <span class="ruby-value str">&quot;i_dont_even_exist&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span> }
957:     <span class="ruby-keyword kw">end</span>
958:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006769" class="method">
  <div id="M006769_title" class="title">
    <b>test_mass_assignment_accessible</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006769_source')" id="l_M006769_source">show source</a> ]</p>
  <div id="M006769_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 967</span>
967:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_accessible</span>
968:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;world&quot;</span>, <span class="ruby-value str">&quot;approved&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
969:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>
970: 
971:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved?</span>
972: 
973:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">false</span>
974:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save</span>
975: 
976:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">reply</span>.<span class="ruby-identifier">approved?</span>
977:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006763" class="method">
  <div id="M006763_title" class="title">
    <b>test_mass_assignment_protection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006763_source')" id="l_M006763_source">show source</a> ]</p>
  <div id="M006763_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 920</span>
920:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection</span>
921:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
922:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Next Angle&quot;</span>, <span class="ruby-value str">&quot;rating&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span> }
923:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">rating</span>
924:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006764" class="method">
  <div id="M006764_title" class="title">
    <b>test_mass_assignment_protection_against_class_attribute_writers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006764_source')" id="l_M006764_source">show source</a> ]</p>
  <div id="M006764_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 926</span>
926:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_against_class_attribute_writers</span>
927:     [<span class="ruby-identifier">:logger</span>, <span class="ruby-identifier">:configurations</span>, <span class="ruby-identifier">:primary_key_prefix_type</span>, <span class="ruby-identifier">:table_name_prefix</span>, <span class="ruby-identifier">:table_name_suffix</span>, <span class="ruby-identifier">:pluralize_table_names</span>, <span class="ruby-identifier">:colorize_logging</span>,
928:       <span class="ruby-identifier">:default_timezone</span>, <span class="ruby-identifier">:schema_format</span>, <span class="ruby-identifier">:lock_optimistically</span>, <span class="ruby-identifier">:record_timestamps</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">method</span><span class="ruby-operator">|</span>
929:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
930:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{method}=&quot;</span>)
931:       <span class="ruby-identifier">assert</span>  <span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method</span>)
932:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-node">&quot;#{method}=&quot;</span>)
933:     <span class="ruby-keyword kw">end</span>
934:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006770" class="method">
  <div id="M006770_title" class="title">
    <b>test_mass_assignment_protection_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006770_source')" id="l_M006770_source">show source</a> ]</p>
  <div id="M006770_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 979</span>
979:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_inheritance</span>
980:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">accessible_attributes</span>
981:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span> ]), <span class="ruby-constant">LoosePerson</span>.<span class="ruby-identifier">protected_attributes</span>
982: 
983:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">accessible_attributes</span>
984:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span>, <span class="ruby-value str">'phone_number'</span> ]), <span class="ruby-constant">LooseDescendant</span>.<span class="ruby-identifier">protected_attributes</span>
985: 
986:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">LooseDescendantSecond</span>.<span class="ruby-identifier">accessible_attributes</span>
987:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'credit_rating'</span>, <span class="ruby-value str">'administrator'</span>, <span class="ruby-value str">'phone_number'</span>, <span class="ruby-value str">'name'</span> ]), <span class="ruby-constant">LooseDescendantSecond</span>.<span class="ruby-identifier">protected_attributes</span>, <span class="ruby-value str">'Running attr_protected twice in one class should merge the protections'</span>
988: 
989:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">protected_attributes</span>
990:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'name'</span>, <span class="ruby-value str">'address'</span> ]), <span class="ruby-constant">TightPerson</span>.<span class="ruby-identifier">accessible_attributes</span>
991: 
992:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">protected_attributes</span>
993:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'name'</span>, <span class="ruby-value str">'address'</span>, <span class="ruby-value str">'phone_number'</span> ]), <span class="ruby-constant">TightDescendant</span>.<span class="ruby-identifier">accessible_attributes</span>
994:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006768" class="method">
  <div id="M006768_title" class="title">
    <b>test_mass_assignment_protection_on_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006768_source')" id="l_M006768_source">show source</a> ]</p>
  <div id="M006768_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 960</span>
960:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_protection_on_defaults</span>
961:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">new</span>
962:     <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;id&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Client&quot;</span> }
963:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">id</span>
964:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-identifier">firm</span>[<span class="ruby-identifier">:type</span>]
965:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006762" class="method">
  <div id="M006762_title" class="title">
    <b>test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006762_source')" id="l_M006762_source">show source</a> ]</p>
  <div id="M006762_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 914</span>
914:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mass_assignment_should_raise_exception_if_accessible_and_protected_attribute_writers_are_both_used</span>
915:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">TopicWithProtectedContentAndAccessibleAuthorName</span>.<span class="ruby-identifier">new</span>
916:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;me&quot;</span> } }
917:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;stuff&quot;</span> } }
918:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006789" class="method">
  <div id="M006789_title" class="title">
    <b>test_multiparameter_assignment_of_aggregation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006789_source')" id="l_M006789_source">show source</a> ]</p>
  <div id="M006789_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1204</span>
1204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_assignment_of_aggregation</span>
1205:     <span class="ruby-identifier">customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">new</span>
1206:     <span class="ruby-identifier">address</span> = <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;The Street&quot;</span>, <span class="ruby-value str">&quot;The City&quot;</span>, <span class="ruby-value str">&quot;The Country&quot;</span>)
1207:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;address(1)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-value str">&quot;address(2)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-value str">&quot;address(3)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>.<span class="ruby-identifier">country</span> }
1208:     <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1209:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">address</span>, <span class="ruby-identifier">customer</span>.<span class="ruby-identifier">address</span>
1210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006772" class="method">
  <div id="M006772_title" class="title">
    <b>test_multiparameter_attributes_on_date</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006772_source')" id="l_M006772_source">show source</a> ]</p>
  <div id="M006772_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1009</span>
1009:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date</span>
1010:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1011:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1012:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1013:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1014:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1015:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1016:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006779" class="method">
  <div id="M006779_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_all_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006779_source')" id="l_M006779_source">show source</a> ]</p>
  <div id="M006779_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1072</span>
1072:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_all_empty</span>
1073:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1074:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1075:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1076:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
1077:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006775" class="method">
  <div id="M006775_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006775_source')" id="l_M006775_source">show source</a> ]</p>
  <div id="M006775_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1036</span>
1036:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day</span>
1037:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1038:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1039:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1040:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1041:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1042:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1043:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006777" class="method">
  <div id="M006777_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day_and_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006777_source')" id="l_M006777_source">show source</a> ]</p>
  <div id="M006777_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1054</span>
1054:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day_and_month</span>
1055:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1056:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1057:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1058:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1059:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1060:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1061:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006776" class="method">
  <div id="M006776_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_day_and_year</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006776_source')" id="l_M006776_source">show source</a> ]</p>
  <div id="M006776_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1045</span>
1045:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_day_and_year</span>
1046:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span> }
1047:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1048:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1049:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1050:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1051:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">6</span>, <span class="ruby-value">1</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1052:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006774" class="method">
  <div id="M006774_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006774_source')" id="l_M006774_source">show source</a> ]</p>
  <div id="M006774_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1027</span>
1027:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_month</span>
1028:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1029:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1030:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1031:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1032:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1033:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">1</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1034:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006773" class="method">
  <div id="M006773_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_year</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006773_source')" id="l_M006773_source">show source</a> ]</p>
  <div id="M006773_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1018</span>
1018:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_year</span>
1019:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1020:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1021:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1022:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1023:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1024:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1025:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006778" class="method">
  <div id="M006778_title" class="title">
    <b>test_multiparameter_attributes_on_date_with_empty_year_and_month</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006778_source')" id="l_M006778_source">show source</a> ]</p>
  <div id="M006778_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1063</span>
1063:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_date_with_empty_year_and_month</span>
1064:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;last_read(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;last_read(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1065:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1066:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1067:     <span class="ruby-comment cmt"># note that extra #to_date call allows test to pass for Oracle, which</span>
1068:     <span class="ruby-comment cmt"># treats dates/times the same</span>
1069:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">24</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">to_date</span>
1070:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006780" class="method">
  <div id="M006780_title" class="title">
    <b>test_multiparameter_attributes_on_time</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006780_source')" id="l_M006780_source">show source</a> ]</p>
  <div id="M006780_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1079</span>
1079:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time</span>
1080:     <span class="ruby-identifier">attributes</span> = {
1081:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1082:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1083:     }
1084:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1085:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1086:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1087:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006786" class="method">
  <div id="M006786_title" class="title">
    <b>test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006786_source')" id="l_M006786_source">show source</a> ]</p>
  <div id="M006786_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1167</span>
1167:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_only_column_with_time_zone_aware_attributes_does_not_do_time_zone_conversion</span>
1168:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1169:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1170:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1171:     <span class="ruby-identifier">attributes</span> = {
1172:       <span class="ruby-value str">&quot;bonus_time(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2000&quot;</span>, <span class="ruby-value str">&quot;bonus_time(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;bonus_time(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>,
1173:       <span class="ruby-value str">&quot;bonus_time(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;bonus_time(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>
1174:     }
1175:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1176:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1177:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
1178:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>.<span class="ruby-identifier">utc?</span>
1179:   <span class="ruby-keyword kw">ensure</span>
1180:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1181:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1182:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1183:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006787" class="method">
  <div id="M006787_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_empty_seconds</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006787_source')" id="l_M006787_source">show source</a> ]</p>
  <div id="M006787_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1185</span>
1185:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_empty_seconds</span>
1186:     <span class="ruby-identifier">attributes</span> = {
1187:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1188:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&quot;</span>
1189:     }
1190:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1191:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1192:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1193:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006781" class="method">
  <div id="M006781_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_old_date</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006781_source')" id="l_M006781_source">show source</a> ]</p>
  <div id="M006781_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1089</span>
1089:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_old_date</span>
1090:     <span class="ruby-identifier">attributes</span> = {
1091:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1850&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1092:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1093:     }
1094:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1095:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1096:     <span class="ruby-comment cmt"># testing against to_s(:db) representation because either a Time or a DateTime might be returned, depending on platform</span>
1097:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1850-06-24 16:24:00&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>)
1098:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006785" class="method">
  <div id="M006785_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006785_source')" id="l_M006785_source">show source</a> ]</p>
  <div id="M006785_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1147</span>
1147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_skip_time_zone_conversion_for_attributes</span>
1148:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1149:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1150:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1151:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">skip_time_zone_conversion_for_attributes</span> = [<span class="ruby-identifier">:written_on</span>]
1152:     <span class="ruby-identifier">attributes</span> = {
1153:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1154:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1155:     }
1156:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1157:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1158:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1159:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:time_zone</span>)
1160:   <span class="ruby-keyword kw">ensure</span>
1161:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1162:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1163:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1164:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">skip_time_zone_conversion_for_attributes</span> = []
1165:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006783" class="method">
  <div id="M006783_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006783_source')" id="l_M006783_source">show source</a> ]</p>
  <div id="M006783_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1113</span>
1113:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_time_zone_aware_attributes</span>
1114:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">true</span>
1115:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1116:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1117:     <span class="ruby-identifier">attributes</span> = {
1118:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1119:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1120:     }
1121:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1122:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1123:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">23</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1124:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">time</span>
1125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">time_zone</span>
1126:   <span class="ruby-keyword kw">ensure</span>
1127:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1128:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1129:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1130:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006784" class="method">
  <div id="M006784_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006784_source')" id="l_M006784_source">show source</a> ]</p>
  <div id="M006784_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1132</span>
1132:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_time_zone_aware_attributes_false</span>
1133:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">time_zone_aware_attributes</span> = <span class="ruby-keyword kw">false</span>
1134:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value">-28800</span>]
1135:     <span class="ruby-identifier">attributes</span> = {
1136:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1137:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1138:     }
1139:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1140:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1142:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:time_zone</span>)
1143:   <span class="ruby-keyword kw">ensure</span>
1144:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
1145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006782" class="method">
  <div id="M006782_title" class="title">
    <b>test_multiparameter_attributes_on_time_with_utc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006782_source')" id="l_M006782_source">show source</a> ]</p>
  <div id="M006782_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1100</span>
1100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_attributes_on_time_with_utc</span>
1101:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
1102:     <span class="ruby-identifier">attributes</span> = {
1103:       <span class="ruby-value str">&quot;written_on(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;written_on(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;written_on(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>,
1104:       <span class="ruby-value str">&quot;written_on(4i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;16&quot;</span>, <span class="ruby-value str">&quot;written_on(5i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span>, <span class="ruby-value str">&quot;written_on(6i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;00&quot;</span>
1105:     }
1106:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1107:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1108:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">6</span>, <span class="ruby-value">24</span>, <span class="ruby-value">16</span>, <span class="ruby-value">24</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span>
1109:   <span class="ruby-keyword kw">ensure</span>
1110:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
1111:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006788" class="method">
  <div id="M006788_title" class="title">
    <b>test_multiparameter_mass_assignment_protector</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006788_source')" id="l_M006788_source">show source</a> ]</p>
  <div id="M006788_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1195</span>
1195:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiparameter_mass_assignment_protector</span>
1196:     <span class="ruby-identifier">task</span> = <span class="ruby-constant">Task</span>.<span class="ruby-identifier">new</span>
1197:     <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">mktime</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>)
1198:     <span class="ruby-identifier">task</span>.<span class="ruby-identifier">starting</span> = <span class="ruby-identifier">time</span>
1199:     <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;starting(1i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2004&quot;</span>, <span class="ruby-value str">&quot;starting(2i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;6&quot;</span>, <span class="ruby-value str">&quot;starting(3i)&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;24&quot;</span> }
1200:     <span class="ruby-identifier">task</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
1201:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">time</span>, <span class="ruby-identifier">task</span>.<span class="ruby-identifier">starting</span>
1202:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006793" class="method">
  <div id="M006793_title" class="title">
    <b>test_new_record_returns_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006793_source')" id="l_M006793_source">show source</a> ]</p>
  <div id="M006793_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1256</span>
1256:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_record_returns_boolean</span>
1257:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">new_record?</span>, <span class="ruby-keyword kw">true</span>
1258:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">new_record?</span>, <span class="ruby-keyword kw">false</span>
1259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006810" class="method">
  <div id="M006810_title" class="title">
    <b>test_nil_serialized_attribute_with_class_constraint</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006810_source')" id="l_M006810_source">show source</a> ]</p>
  <div id="M006810_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1497</span>
1497:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_serialized_attribute_with_class_constraint</span>
1498:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1499:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
1500:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>
1501:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006715" class="method">
  <div id="M006715_title" class="title">
    <b>test_non_attribute_access_and_assignment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006715_source')" id="l_M006715_source">show source</a> ]</p>
  <div id="M006715_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 425</span>
425:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_attribute_access_and_assignment</span>
426:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
427:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;mumbo&quot;</span>)
428:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">mumbo</span> }
429:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">mumbo</span> = <span class="ruby-value">5</span> }
430:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006747" class="method">
  <div id="M006747_title" class="title">
    <b>test_null_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006747_source')" id="l_M006747_source">show source</a> ]</p>
  <div id="M006747_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_null_fields</span>
761:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">parent_id</span>
762:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Hey you&quot;</span>).<span class="ruby-identifier">parent_id</span>
763:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006800" class="method">
  <div id="M006800_title" class="title">
    <b>test_numeric_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006800_source')" id="l_M006800_source">show source</a> ]</p>
  <div id="M006800_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1405</span>
1405:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_numeric_fields</span>
1406:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">NumericData</span>.<span class="ruby-identifier">new</span>(
1407:       <span class="ruby-identifier">:bank_balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1586.43</span>,
1408:       <span class="ruby-identifier">:big_bank_balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1000234000567.95&quot;</span>),
1409:       <span class="ruby-identifier">:world_population</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6000000000</span>,
1410:       <span class="ruby-identifier">:my_house_population</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>
1411:     )
1412:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">save</span>
1413: 
1414:     <span class="ruby-identifier">m1</span> = <span class="ruby-constant">NumericData</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">m</span>.<span class="ruby-identifier">id</span>)
1415:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">m1</span>
1416: 
1417:     <span class="ruby-comment cmt"># As with migration_test.rb, we should make world_population &gt;= 2**62</span>
1418:     <span class="ruby-comment cmt"># to cover 64-bit platforms and test it is a Bignum, but the main thing</span>
1419:     <span class="ruby-comment cmt"># is that it's an Integer.</span>
1420:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Integer</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">world_population</span>
1421:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">6000000000</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">world_population</span>
1422: 
1423:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Fixnum</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">my_house_population</span>
1424:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">my_house_population</span>
1425: 
1426:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">BigDecimal</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">bank_balance</span>
1427:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1586.43&quot;</span>), <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">bank_balance</span>
1428: 
1429:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">BigDecimal</span>, <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">big_bank_balance</span>
1430:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">BigDecimal</span>(<span class="ruby-value str">&quot;1000234000567.95&quot;</span>), <span class="ruby-identifier">m1</span>.<span class="ruby-identifier">big_bank_balance</span>
1431:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006716" class="method">
  <div id="M006716_title" class="title">
    <b>test_preserving_date_objects</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006716_source')" id="l_M006716_source">show source</a> ]</p>
  <div id="M006716_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 432</span>
432:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserving_date_objects</span>
433:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>, <span class="ruby-identifier">:OracleAdapter</span>)
434:       <span class="ruby-comment cmt"># Sybase ctlib does not (yet?) support the date type; use datetime instead.</span>
435:       <span class="ruby-comment cmt"># Oracle treats all dates/times as Time.</span>
436:       <span class="ruby-identifier">assert_kind_of</span>(
437:         <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>,
438:         <span class="ruby-value str">&quot;The last_read attribute should be of the Time class&quot;</span>
439:       )
440:     <span class="ruby-keyword kw">else</span>
441:       <span class="ruby-identifier">assert_kind_of</span>(
442:         <span class="ruby-constant">Date</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>,
443:         <span class="ruby-value str">&quot;The last_read attribute should be of the Date class&quot;</span>
444:       )
445:     <span class="ruby-keyword kw">end</span>
446:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006717" class="method">
  <div id="M006717_title" class="title">
    <b>test_preserving_time_objects</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006717_source')" id="l_M006717_source">show source</a> ]</p>
  <div id="M006717_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 448</span>
448:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserving_time_objects</span>
449:     <span class="ruby-identifier">assert_kind_of</span>(
450:       <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">bonus_time</span>,
451:       <span class="ruby-value str">&quot;The bonus_time attribute should be of the Time class&quot;</span>
452:     )
453: 
454:     <span class="ruby-identifier">assert_kind_of</span>(
455:       <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>,
456:       <span class="ruby-value str">&quot;The written_on attribute should be of the Time class&quot;</span>
457:     )
458: 
459:     <span class="ruby-comment cmt"># For adapters which support microsecond resolution.</span>
460:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:PostgreSQLAdapter</span>)
461:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">11</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">sec</span>
462:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">223300</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">usec</span>
463:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9900</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">usec</span>
464:     <span class="ruby-keyword kw">end</span>
465:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006712" class="method">
  <div id="M006712_title" class="title">
    <b>test_query_attribute_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006712_source')" id="l_M006712_source">show source</a> ]</p>
  <div id="M006712_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_boolean</span>
388:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-value str">&quot;f&quot;</span>, <span class="ruby-value">0</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
389:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">approved?</span>
390:     <span class="ruby-keyword kw">end</span>
391: 
392:     [<span class="ruby-keyword kw">true</span>, <span class="ruby-value str">&quot;true&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
393:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">approved?</span>
394:     <span class="ruby-keyword kw">end</span>
395:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006711" class="method">
  <div id="M006711_title" class="title">
    <b>test_query_attribute_number</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006711_source')" id="l_M006711_source">show source</a> ]</p>
  <div id="M006711_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 378</span>
378:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_number</span>
379:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value">0</span>, <span class="ruby-value str">&quot;0&quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
380:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">salary?</span>
381:     <span class="ruby-keyword kw">end</span>
382: 
383:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>).<span class="ruby-identifier">salary?</span>
384:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1&quot;</span>).<span class="ruby-identifier">salary?</span>
385:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006710" class="method">
  <div id="M006710_title" class="title">
    <b>test_query_attribute_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006710_source')" id="l_M006710_source">show source</a> ]</p>
  <div id="M006710_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 370</span>
370:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_string</span>
371:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot; &quot;</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
372:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">value</span>).<span class="ruby-identifier">author_name?</span>
373:     <span class="ruby-keyword kw">end</span>
374: 
375:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Name&quot;</span>).<span class="ruby-identifier">author_name?</span>
376:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006713" class="method">
  <div id="M006713_title" class="title">
    <b>test_query_attribute_with_custom_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006713_source')" id="l_M006713_source">show source</a> ]</p>
  <div id="M006713_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_query_attribute_with_custom_fields</span>
398:     <span class="ruby-identifier">object</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;SELECT c1.*, c2.ruby_type as string_value, c2.rating as int_value\nFROM companies c1, companies c2\nWHERE c1.firm_id = c2.id\nAND c1.id = 2\n&quot;</span>).<span class="ruby-identifier">first</span>
399: 
400:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Firm&quot;</span>, <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value</span>
401:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value?</span>
402: 
403:     <span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value</span> = <span class="ruby-value str">&quot;  &quot;</span>
404:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">string_value?</span>
405: 
406:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value</span>.<span class="ruby-identifier">to_i</span>
407:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value?</span>
408: 
409:     <span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value</span> = <span class="ruby-value str">&quot;0&quot;</span>
410:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">object</span>.<span class="ruby-identifier">int_value?</span>
411:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006813" class="method">
  <div id="M006813_title" class="title">
    <b>test_quote</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006813_source')" id="l_M006813_source">show source</a> ]</p>
  <div id="M006813_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1523</span>
1523:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote</span>
1524:     <span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;\\ \001 ' \n \\n \&quot;&quot;</span>
1525:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">'author_name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author_name</span>)
1526:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author_name</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">author_name</span>
1527:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006814" class="method">
  <div id="M006814_title" class="title">
    <b>test_quote_chars</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006814_source')" id="l_M006814_source">show source</a> ]</p>
  <div id="M006814_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1530</span>
1530:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote_chars</span>
1531:       <span class="ruby-identifier">with_kcode</span>(<span class="ruby-value str">'UTF8'</span>) <span class="ruby-keyword kw">do</span>
1532:         <span class="ruby-identifier">str</span> = <span class="ruby-value str">'The Narrator'</span>
1533:         <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">str</span>)
1534:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">str</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
1535: 
1536:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Multibyte</span>.<span class="ruby-identifier">proxy_class</span>, <span class="ruby-identifier">str</span>.<span class="ruby-identifier">mb_chars</span>
1537:         <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_author_name</span>(<span class="ruby-identifier">str</span>.<span class="ruby-identifier">mb_chars</span>)
1538: 
1539:         <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Topic</span>, <span class="ruby-identifier">topic</span>
1540:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">str</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>, <span class="ruby-value str">&quot;The right topic should have been found by name even with name passed as Chars&quot;</span>
1541:       <span class="ruby-keyword kw">end</span>
1542:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006803" class="method">
  <div id="M006803_title" class="title">
    <b>test_quote_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006803_source')" id="l_M006803_source">show source</a> ]</p>
  <div id="M006803_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1443</span>
1443:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quote_keys</span>
1444:     <span class="ruby-identifier">ar</span> = <span class="ruby-constant">AutoId</span>.<span class="ruby-identifier">new</span>
1445:     <span class="ruby-identifier">source</span> = {<span class="ruby-value str">&quot;foo&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-value str">&quot;baz&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;quux&quot;</span>}
1446:     <span class="ruby-identifier">actual</span> = <span class="ruby-identifier">ar</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:quote_columns</span>, <span class="ruby-keyword kw">self</span>, <span class="ruby-identifier">source</span>)
1447:     <span class="ruby-identifier">inverted</span> = <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">invert</span>
1448:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;foo&gt;&quot;</span>, <span class="ruby-identifier">inverted</span>[<span class="ruby-value str">&quot;bar&quot;</span>])
1449:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;baz&gt;&quot;</span>, <span class="ruby-identifier">inverted</span>[<span class="ruby-value str">&quot;quux&quot;</span>])
1450:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006806" class="method">
  <div id="M006806_title" class="title">
    <b>test_quoting_arrays</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006806_source')" id="l_M006806_source">show source</a> ]</p>
  <div id="M006806_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1468</span>
1468:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quoting_arrays</span>
1469:     <span class="ruby-identifier">replies</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;id IN (?)&quot;</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>) ])
1470:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>
1471: 
1472:     <span class="ruby-identifier">replies</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;id IN (?)&quot;</span>, [] ])
1473:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">replies</span>.<span class="ruby-identifier">size</span>
1474:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006706" class="method">
  <div id="M006706_title" class="title">
    <b>test_read_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006706_source')" id="l_M006706_source">show source</a> ]</p>
  <div id="M006706_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute</span>
321:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
322:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Don't change the topic&quot;</span>
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute</span>, <span class="ruby-value str">&quot;title&quot;</span>)
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>[<span class="ruby-value str">&quot;title&quot;</span>]
325: 
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:read_attribute</span>, <span class="ruby-identifier">:title</span>)
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Don't change the topic&quot;</span>, <span class="ruby-identifier">topic</span>[<span class="ruby-identifier">:title</span>]
328:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006707" class="method">
  <div id="M006707_title" class="title">
    <b>test_read_attribute_when_false</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006707_source')" id="l_M006707_source">show source</a> ]</p>
  <div id="M006707_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 330</span>
330:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute_when_false</span>
331:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
332:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">false</span>
333:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
334:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
335:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
336:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006708" class="method">
  <div id="M006708_title" class="title">
    <b>test_read_attribute_when_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006708_source')" id="l_M006708_source">show source</a> ]</p>
  <div id="M006708_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 338</span>
338:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attribute_when_true</span>
339:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
340:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-keyword kw">true</span>
341:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
342:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
343:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
344:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006684" class="method">
  <div id="M006684_title" class="title">
    <b>test_read_attributes_before_type_cast</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006684_source')" id="l_M006684_source">show source</a> ]</p>
  <div id="M006684_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 133</span>
133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast</span>
134:     <span class="ruby-identifier">category</span> = <span class="ruby-constant">Category</span>.<span class="ruby-identifier">new</span>({<span class="ruby-identifier">:name=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;Test categoty&quot;</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>})
135:     <span class="ruby-identifier">category_attrs</span> = {<span class="ruby-value str">&quot;name&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;Test categoty&quot;</span>, <span class="ruby-value str">&quot;type&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">category_attrs</span> , <span class="ruby-identifier">category</span>.<span class="ruby-identifier">attributes_before_type_cast</span>
137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006685" class="method">
  <div id="M006685_title" class="title">
    <b>test_read_attributes_before_type_cast_on_boolean</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006685_source')" id="l_M006685_source">show source</a> ]</p>
  <div id="M006685_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 140</span>
140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast_on_boolean</span>
141:       <span class="ruby-identifier">bool</span> = <span class="ruby-constant">Booleantest</span>.<span class="ruby-identifier">create</span>({ <span class="ruby-value str">&quot;value&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
142:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;0&quot;</span>, <span class="ruby-identifier">bool</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">attributes_before_type_cast</span>[<span class="ruby-value str">&quot;value&quot;</span>]
143:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006686" class="method">
  <div id="M006686_title" class="title">
    <b>test_read_attributes_before_type_cast_on_datetime</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006686_source')" id="l_M006686_source">show source</a> ]</p>
  <div id="M006686_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_attributes_before_type_cast_on_datetime</span>
147:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">created_at</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">:db</span>) , <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">attributes_before_type_cast</span>[<span class="ruby-value str">&quot;created_at&quot;</span>]
149:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006709" class="method">
  <div id="M006709_title" class="title">
    <b>test_read_write_boolean_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006709_source')" id="l_M006709_source">show source</a> ]</p>
  <div id="M006709_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 346</span>
346:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_write_boolean_attribute</span>
347:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
348:     <span class="ruby-comment cmt"># puts &quot;&quot;</span>
349:     <span class="ruby-comment cmt"># puts &quot;New Topic&quot;</span>
350:     <span class="ruby-comment cmt"># puts topic.inspect</span>
351:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
352:     <span class="ruby-comment cmt"># puts &quot;Expecting false&quot;</span>
353:     <span class="ruby-comment cmt"># puts topic.inspect</span>
354:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
355:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;false&quot;</span>
356:     <span class="ruby-comment cmt"># puts &quot;Expecting false&quot;</span>
357:     <span class="ruby-comment cmt"># puts topic.inspect</span>
358:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be false&quot;</span>
359:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
360:     <span class="ruby-comment cmt"># puts &quot;Expecting true&quot;</span>
361:     <span class="ruby-comment cmt"># puts topic.inspect</span>
362:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
363:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span> = <span class="ruby-value str">&quot;true&quot;</span>
364:     <span class="ruby-comment cmt"># puts &quot;Expecting true&quot;</span>
365:     <span class="ruby-comment cmt"># puts topic.inspect</span>
366:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>, <span class="ruby-value str">&quot;approved should be true&quot;</span>
367:     <span class="ruby-comment cmt"># puts &quot;&quot;</span>
368:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006714" class="method">
  <div id="M006714_title" class="title">
    <b>test_reader_for_invalid_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006714_source')" id="l_M006714_source">show source</a> ]</p>
  <div id="M006714_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 420</span>
420:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reader_for_invalid_column_names</span>
421:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:define_read_method</span>, <span class="ruby-value str">&quot;mumub-jumbo&quot;</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-value str">&quot;mumub-jumbo&quot;</span>, <span class="ruby-keyword kw">nil</span>)
422:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">generated_methods</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;mumub-jumbo&quot;</span>)
423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006771" class="method">
  <div id="M006771_title" class="title">
    <b>test_readonly_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006771_source')" id="l_M006771_source">show source</a> ]</p>
  <div id="M006771_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 996</span>
 996:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_readonly_attributes</span>
 997:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([ <span class="ruby-value str">'title'</span> , <span class="ruby-value str">'comments_count'</span> ]), <span class="ruby-constant">ReadonlyTitlePost</span>.<span class="ruby-identifier">readonly_attributes</span>
 998: 
 999:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">ReadonlyTitlePost</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;changeable&quot;</span>)
1000:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">reload</span>
1001:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
1002: 
1003:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;try to change&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;changed&quot;</span>)
1004:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">reload</span>
1005:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;cannot change this&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
1006:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;changed&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">body</span>
1007:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006722" class="method">
  <div id="M006722_title" class="title">
    <b>test_record_not_found_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006722_source')" id="l_M006722_source">show source</a> ]</p>
  <div id="M006722_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 495</span>
495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_record_not_found_exception</span>
496:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">99999</span>) }
497:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006823" class="method">
  <div id="M006823_title" class="title">
    <b>test_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006823_source')" id="l_M006823_source">show source</a> ]</p>
  <div id="M006823_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1617</span>
1617:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reload</span>
1618:     <span class="ruby-identifier">t1</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1619:     <span class="ruby-identifier">t2</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
1620:     <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;something else&quot;</span>
1621:     <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">save</span>
1622:     <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">reload</span>
1623:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">title</span>
1624:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006682" class="method">
  <div id="M006682_title" class="title">
    <b>test_respond_to?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006682_source')" id="l_M006682_source">show source</a> ]</p>
  <div id="M006682_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_respond_to?</span>
112:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
113:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title&quot;</span>)
114:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title?&quot;</span>)
115:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;title=&quot;</span>)
116:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title</span>)
117:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title?</span>)
118:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:title=</span>)
119:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;author_name&quot;</span>)
120:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;attribute_names&quot;</span>)
121:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;nothingness&quot;</span>)
122:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:nothingness</span>)
123:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006691" class="method">
  <div id="M006691_title" class="title">
    <b>test_save!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006691_source')" id="l_M006691_source">show source</a> ]</p>
  <div id="M006691_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save!</span>
195:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;New Topic&quot;</span>)
196:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
197: 
198:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">new</span>
199:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">save!</span> }
200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006694" class="method">
  <div id="M006694_title" class="title">
    <b>test_save_for_record_with_only_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006694_source')" id="l_M006694_source">show source</a> ]</p>
  <div id="M006694_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 219</span>
219:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_for_record_with_only_primary_key</span>
220:     <span class="ruby-identifier">minimalistic</span> = <span class="ruby-constant">Minimalistic</span>.<span class="ruby-identifier">new</span>
221:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">minimalistic</span>.<span class="ruby-identifier">save</span> }
222:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006695" class="method">
  <div id="M006695_title" class="title">
    <b>test_save_for_record_with_only_primary_key_that_is_provided</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006695_source')" id="l_M006695_source">show source</a> ]</p>
  <div id="M006695_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 224</span>
224:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_for_record_with_only_primary_key_that_is_provided</span>
225:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Minimalistic</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>) }
226:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006693" class="method">
  <div id="M006693_title" class="title">
    <b>test_save_nil_string_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006693_source')" id="l_M006693_source">show source</a> ]</p>
  <div id="M006693_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_nil_string_attributes</span>
212:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
213:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-keyword kw">nil</span>
214:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
215:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
216:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
217:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006692" class="method">
  <div id="M006692_title" class="title">
    <b>test_save_null_string_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006692_source')" id="l_M006692_source">show source</a> ]</p>
  <div id="M006692_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_save_null_string_attributes</span>
203:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
204:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;null&quot;</span> }
205:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save!</span>
206:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
207:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
208:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;null&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
209:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006836" class="method">
  <div id="M006836_title" class="title">
    <b>test_scoped_find_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006836_source')" id="l_M006836_source">show source</a> ]</p>
  <div id="M006836_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1744</span>
1744:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_conditions</span>
1745:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary &gt; 90000'</span> }) <span class="ruby-keyword kw">do</span>
1746:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id &lt; 5'</span>)
1747:     <span class="ruby-keyword kw">end</span>
1748:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)) <span class="ruby-comment cmt"># David's salary is less than 90,000</span>
1749:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">size</span>
1750:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006837" class="method">
  <div id="M006837_title" class="title">
    <b>test_scoped_find_limit_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006837_source')" id="l_M006837_source">show source</a> ]</p>
  <div id="M006837_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1752</span>
1752:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_limit_offset</span>
1753:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span> }) <span class="ruby-keyword kw">do</span>
1754:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
1755:     <span class="ruby-keyword kw">end</span>
1756:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1757:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>))
1758:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">size</span>
1759: 
1760:     <span class="ruby-comment cmt"># Test without scoped find conditions to ensure we get the whole thing</span>
1761:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
1762:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1763:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006839" class="method">
  <div id="M006839_title" class="title">
    <b>test_scoped_find_limit_offset_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006839_source')" id="l_M006839_source">show source</a> ]</p>
  <div id="M006839_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1788</span>
1788:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_limit_offset_including_has_many_association</span>
1789:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>}) <span class="ruby-keyword kw">do</span>
1790:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;topics.id&quot;</span>)
1791:     <span class="ruby-keyword kw">end</span>
1792:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
1793:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
1794:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006838" class="method">
  <div id="M006838_title" class="title">
    <b>test_scoped_find_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006838_source')" id="l_M006838_source">show source</a> ]</p>
  <div id="M006838_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1765</span>
1765:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_order</span>
1766:     <span class="ruby-comment cmt"># Test order in scope</span>
1767:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary DESC'</span> }) <span class="ruby-keyword kw">do</span>
1768:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1769:     <span class="ruby-keyword kw">end</span>
1770:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Jamis'</span>, <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
1771:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>))
1772:     <span class="ruby-comment cmt"># Test scope without order and order in find</span>
1773:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }) <span class="ruby-keyword kw">do</span>
1774:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary DESC'</span>)
1775:     <span class="ruby-keyword kw">end</span>
1776:     <span class="ruby-comment cmt"># Test scope order + find order, find has priority</span>
1777:     <span class="ruby-identifier">scoped_developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span> }) <span class="ruby-keyword kw">do</span>
1778:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'salary ASC'</span>)
1779:     <span class="ruby-keyword kw">end</span>
1780:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>))
1781:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1782:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:dev_10</span>))
1783:     <span class="ruby-comment cmt"># Test without scoped find conditions to ensure we get the right thing</span>
1784:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
1785:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">scoped_developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>))
1786:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006840" class="method">
  <div id="M006840_title" class="title">
    <b>test_scoped_find_order_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006840_source')" id="l_M006840_source">show source</a> ]</p>
  <div id="M006840_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1796</span>
1796:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_order_including_has_many_association</span>
1797:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary DESC'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:projects</span> }) <span class="ruby-keyword kw">do</span>
1798:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1799:     <span class="ruby-keyword kw">end</span>
1800:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-value">2</span>
1801:     <span class="ruby-keyword kw">for</span> <span class="ruby-identifier">i</span> <span class="ruby-keyword kw">in</span> <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1802:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>].<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">developers</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">salary</span>
1803:     <span class="ruby-keyword kw">end</span>
1804:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006841" class="method">
  <div id="M006841_title" class="title">
    <b>test_scoped_find_with_group_and_having</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006841_source')" id="l_M006841_source">show source</a> ]</p>
  <div id="M006841_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1806</span>
1806:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_with_group_and_having</span>
1807:     <span class="ruby-identifier">developers</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.salary'</span>, <span class="ruby-identifier">:having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SUM(salary) &gt; 10000&quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;SUM(salary) as salary&quot;</span> }) <span class="ruby-keyword kw">do</span>
1808:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
1809:     <span class="ruby-keyword kw">end</span>
1810:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
1811:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006807" class="method">
  <div id="M006807_title" class="title">
    <b>test_serialized_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006807_source')" id="l_M006807_source">show source</a> ]</p>
  <div id="M006807_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1478</span>
1478:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_attribute</span>
1479:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1480:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>)
1481:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-constant">MyObject</span>)
1482:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1483:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006812" class="method">
  <div id="M006812_title" class="title">
    <b>test_serialized_attribute_with_class_constraint</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006812_source')" id="l_M006812_source">show source</a> ]</p>
  <div id="M006812_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1513</span>
1513:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_attribute_with_class_constraint</span>
1514:     <span class="ruby-identifier">settings</span> = { <span class="ruby-value str">&quot;color&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;blue&quot;</span> }
1515:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>, <span class="ruby-constant">Hash</span>)
1516:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">settings</span>)
1517:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
1518:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">settings</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span>)
1519:   <span class="ruby-keyword kw">ensure</span>
1520:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>)
1521:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006809" class="method">
  <div id="M006809_title" class="title">
    <b>test_serialized_string_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006809_source')" id="l_M006809_source">show source</a> ]</p>
  <div id="M006809_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1491</span>
1491:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_string_attribute</span>
1492:     <span class="ruby-identifier">myobj</span> = <span class="ruby-value str">&quot;Yes&quot;</span>
1493:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>).<span class="ruby-identifier">reload</span>
1494:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1495:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006808" class="method">
  <div id="M006808_title" class="title">
    <b>test_serialized_time_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006808_source')" id="l_M006808_source">show source</a> ]</p>
  <div id="M006808_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1485</span>
1485:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialized_time_attribute</span>
1486:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2008</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">1</span>,<span class="ruby-value">0</span>)
1487:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>).<span class="ruby-identifier">reload</span>
1488:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">myobj</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
1489:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006679" class="method">
  <div id="M006679_title" class="title">
    <b>test_set_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006679_source')" id="l_M006679_source">show source</a> ]</p>
  <div id="M006679_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attributes</span>
88:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
89:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-value str">&quot;author_name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Jason&quot;</span> }
90:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
91:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
92:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Jason&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
93:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">author_email_address</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">author_email_address</span>)
94:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006681" class="method">
  <div id="M006681_title" class="title">
    <b>test_set_attributes_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006681_source')" id="l_M006681_source">show source</a> ]</p>
  <div id="M006681_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attributes_with_block</span>
102:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
103:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">title</span>       = <span class="ruby-value str">&quot;Budget&quot;</span>
104:       <span class="ruby-identifier">t</span>.<span class="ruby-identifier">author_name</span> = <span class="ruby-value str">&quot;Jason&quot;</span>
105:     <span class="ruby-keyword kw">end</span>
106: 
107:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Budget&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>)
108:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Jason&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006831" class="method">
  <div id="M006831_title" class="title">
    <b>test_set_inheritance_column_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006831_source')" id="l_M006831_source">show source</a> ]</p>
  <div id="M006831_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1674</span>
1674:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_inheritance_column_with_block</span>
1675:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1676:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_inheritance_column</span> { <span class="ruby-identifier">original_inheritance_column</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;_id&quot;</span> }
1677:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;type_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1678:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006830" class="method">
  <div id="M006830_title" class="title">
    <b>test_set_inheritance_column_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006830_source')" id="l_M006830_source">show source</a> ]</p>
  <div id="M006830_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1666</span>
1666:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_inheritance_column_with_value</span>
1667:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1668:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1669:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1670:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_inheritance_column</span> <span class="ruby-value str">&quot;bar&quot;</span>
1671:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">inheritance_column</span>
1672:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006829" class="method">
  <div id="M006829_title" class="title">
    <b>test_set_primary_key_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006829_source')" id="l_M006829_source">show source</a> ]</p>
  <div id="M006829_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1660</span>
1660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_primary_key_with_block</span>
1661:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1662:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_primary_key</span> { <span class="ruby-value str">&quot;sys_&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">original_primary_key</span> }
1663:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;sys_id&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1664:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006828" class="method">
  <div id="M006828_title" class="title">
    <b>test_set_primary_key_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006828_source')" id="l_M006828_source">show source</a> ]</p>
  <div id="M006828_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1652</span>
1652:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_primary_key_with_value</span>
1653:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1654:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1655:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1656:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_primary_key</span> <span class="ruby-value str">&quot;bar&quot;</span>
1657:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">primary_key</span>
1658:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006827" class="method">
  <div id="M006827_title" class="title">
    <b>test_set_table_name_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006827_source')" id="l_M006827_source">show source</a> ]</p>
  <div id="M006827_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1646</span>
1646:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_table_name_with_block</span>
1647:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1648:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_table_name</span> { <span class="ruby-value str">&quot;ks&quot;</span> }
1649:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ks&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1650:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006826" class="method">
  <div id="M006826_title" class="title">
    <b>test_set_table_name_with_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006826_source')" id="l_M006826_source">show source</a> ]</p>
  <div id="M006826_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1638</span>
1638:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_table_name_with_value</span>
1639:     <span class="ruby-identifier">k</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>( <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span> )
1640:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1641:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1642:     <span class="ruby-identifier">k</span>.<span class="ruby-identifier">set_table_name</span> <span class="ruby-value str">&quot;bar&quot;</span>
1643:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">k</span>.<span class="ruby-identifier">table_name</span>
1644:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006811" class="method">
  <div id="M006811_title" class="title">
    <b>test_should_raise_exception_on_serialized_attribute_with_type_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006811_source')" id="l_M006811_source">show source</a> ]</p>
  <div id="M006811_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1503</span>
1503:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_raise_exception_on_serialized_attribute_with_type_mismatch</span>
1504:     <span class="ruby-identifier">myobj</span> = <span class="ruby-constant">MyObject</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'value1'</span>, <span class="ruby-value str">'value2'</span>)
1505:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">myobj</span>)
1506:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
1507:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>, <span class="ruby-constant">Hash</span>)
1508:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">SerializationTypeMismatch</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">content</span> }
1509:   <span class="ruby-keyword kw">ensure</span>
1510:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-identifier">:content</span>)
1511:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006877" class="method">
  <div id="M006877_title" class="title">
    <b>test_silence_sets_log_level_back_to_level_before_yield</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006877_source')" id="l_M006877_source">show source</a> ]</p>
  <div id="M006877_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2108</span>
2108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silence_sets_log_level_back_to_level_before_yield</span>
2109:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2110:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2111:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2112:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>
2113:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span>
2114:     <span class="ruby-keyword kw">end</span>
2115:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">WARN</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span>
2116:   <span class="ruby-keyword kw">ensure</span>
2117:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2118:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006876" class="method">
  <div id="M006876_title" class="title">
    <b>test_silence_sets_log_level_to_error_in_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006876_source')" id="l_M006876_source">show source</a> ]</p>
  <div id="M006876_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2094</span>
2094:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silence_sets_log_level_to_error_in_block</span>
2095:     <span class="ruby-identifier">original_logger</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>
2096:     <span class="ruby-identifier">log</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
2097:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">log</span>)
2098:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">level</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">DEBUG</span>
2099:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span>
2100:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span> <span class="ruby-value str">&quot;warn&quot;</span>
2101:       <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-value str">&quot;error&quot;</span>
2102:     <span class="ruby-keyword kw">end</span>
2103:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;error\n&quot;</span>, <span class="ruby-identifier">log</span>.<span class="ruby-identifier">string</span>
2104:   <span class="ruby-keyword kw">ensure</span>
2105:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-identifier">original_logger</span>
2106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006804" class="method">
  <div id="M006804_title" class="title">
    <b>test_sql_injection_via_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006804_source')" id="l_M006804_source">show source</a> ]</p>
  <div id="M006804_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1452</span>
1452:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_sql_injection_via_find</span>
1453:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) <span class="ruby-keyword kw">do</span>
1454:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;123456 OR id &gt; 0&quot;</span>)
1455:     <span class="ruby-keyword kw">end</span>
1456:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006678" class="method">
  <div id="M006678_title" class="title">
    <b>test_table_exists</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006678_source')" id="l_M006678_source">show source</a> ]</p>
  <div id="M006678_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 82</span>
82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_table_exists</span>
83:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">NonExistentTable</span>.<span class="ruby-identifier">table_exists?</span>
84:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">table_exists?</span>
85:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006727" class="method">
  <div id="M006727_title" class="title">
    <b>test_table_name_guesses</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006727_source')" id="l_M006727_source">show source</a> ]</p>
  <div id="M006727_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 530</span>
530:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_table_name_guesses</span>
531:     <span class="ruby-identifier">classes</span> = [<span class="ruby-constant">Category</span>, <span class="ruby-constant">Smarts</span>, <span class="ruby-constant">CreditCard</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>, <span class="ruby-constant">MasterCreditCard</span>]
532: 
533:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;topics&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">table_name</span>
534: 
535:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
536:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;smarts&quot;</span>, <span class="ruby-constant">Smarts</span>.<span class="ruby-identifier">table_name</span>
537:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_cards&quot;</span>, <span class="ruby-constant">CreditCard</span>.<span class="ruby-identifier">table_name</span>
538:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_numbers&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>.<span class="ruby-identifier">table_name</span>
539:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number_cvv_codes&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>.<span class="ruby-identifier">table_name</span>
540:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_numbers&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>.<span class="ruby-identifier">table_name</span>
541:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>.<span class="ruby-identifier">table_name</span>
542:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;master_credit_cards&quot;</span>, <span class="ruby-constant">MasterCreditCard</span>.<span class="ruby-identifier">table_name</span>
543: 
544:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
545:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
546: 
547:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
548:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;smarts&quot;</span>, <span class="ruby-constant">Smarts</span>.<span class="ruby-identifier">table_name</span>
549:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card&quot;</span>, <span class="ruby-constant">CreditCard</span>.<span class="ruby-identifier">table_name</span>
550:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span>.<span class="ruby-identifier">table_name</span>
551:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number_cvv_code&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">PinNumber</span><span class="ruby-operator">::</span><span class="ruby-constant">CvvCode</span>.<span class="ruby-identifier">table_name</span>
552:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;credit_card_pin_number&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">SubPinNumber</span>.<span class="ruby-identifier">table_name</span>
553:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">CreditCard</span><span class="ruby-operator">::</span><span class="ruby-constant">Brand</span>.<span class="ruby-identifier">table_name</span>
554:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;master_credit_card&quot;</span>, <span class="ruby-constant">MasterCreditCard</span>.<span class="ruby-identifier">table_name</span>
555: 
556:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
557:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
558: 
559:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
560:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
561:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
562:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_test&quot;</span>
563:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
564:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_categories_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
565:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
566:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
567:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
568:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
569:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
570:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;categories&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
571: 
572:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">false</span>
573:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;test_&quot;</span>
574:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
575:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
576:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;_test&quot;</span>
577:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
578:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;test_category_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
579:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_prefix</span> = <span class="ruby-value str">&quot;&quot;</span>
580:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
581:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category_test&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
582:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">table_name_suffix</span> = <span class="ruby-value str">&quot;&quot;</span>
583:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">reset_table_name</span>
584:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;category&quot;</span>, <span class="ruby-constant">Category</span>.<span class="ruby-identifier">table_name</span>
585: 
586:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">pluralize_table_names</span> = <span class="ruby-keyword kw">true</span>
587:     <span class="ruby-identifier">classes</span>.<span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:reset_table_name</span>)
588:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006868" class="method">
  <div id="M006868_title" class="title">
    <b>test_to_param_should_return_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006868_source')" id="l_M006868_source">show source</a> ]</p>
  <div id="M006868_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2053</span>
2053:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_param_should_return_string</span>
2054:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-constant">Client</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_param</span>
2055:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006855" class="method">
  <div id="M006855_title" class="title">
    <b>test_to_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006855_source')" id="l_M006855_source">show source</a> ]</p>
  <div id="M006855_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1919</span>
1919:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml</span>
1920:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">REXML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>))
1921:     <span class="ruby-identifier">bonus_time_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">bonus_time</span>.<span class="ruby-identifier">xmlschema</span>
1922:     <span class="ruby-identifier">written_on_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">written_on</span>.<span class="ruby-identifier">xmlschema</span>
1923:     <span class="ruby-identifier">last_read_in_current_timezone</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">last_read</span>.<span class="ruby-identifier">xmlschema</span>
1924: 
1925:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;topic&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">name</span>
1926:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//title&quot;</span>].<span class="ruby-identifier">text</span>
1927:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//author-name&quot;</span>].<span class="ruby-identifier">text</span>
1928: 
1929:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//id&quot;</span>].<span class="ruby-identifier">text</span>
1930:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1931: 
1932:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">text</span>
1933:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//replies-count&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1934: 
1935:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">written_on_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//written-on&quot;</span>].<span class="ruby-identifier">text</span>
1936:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//written-on&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1937: 
1938:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;--- Have a nice day\n&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//content&quot;</span>].<span class="ruby-identifier">text</span>
1939:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;yaml&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//content&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1940: 
1941:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;david@loudthinking.com&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//author-email-address&quot;</span>].<span class="ruby-identifier">text</span>
1942: 
1943:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">text</span>
1944:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;integer&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1945:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;true&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//parent-id&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'nil'</span>]
1946: 
1947:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>, <span class="ruby-identifier">:OracleAdapter</span>)
1948:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last_read_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">text</span>
1949:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1950:     <span class="ruby-keyword kw">else</span>
1951:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;2004-04-15&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">text</span>
1952:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;date&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//last-read&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1953:     <span class="ruby-keyword kw">end</span>
1954: 
1955:     <span class="ruby-comment cmt"># Oracle and DB2 don't have true boolean or time-only fields</span>
1956:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OracleAdapter</span>, <span class="ruby-identifier">:DB2Adapter</span>)
1957:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//approved&quot;</span>].<span class="ruby-identifier">text</span>
1958:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;boolean&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//approved&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1959: 
1960:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">bonus_time_in_current_timezone</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">text</span>
1961:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;datetime&quot;</span> , <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">elements</span>[<span class="ruby-value str">&quot;//bonus-time&quot;</span>].<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'type'</span>]
1962:     <span class="ruby-keyword kw">end</span>
1963:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006862" class="method">
  <div id="M006862_title" class="title">
    <b>test_to_xml_including_belongs_to_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006862_source')" id="l_M006862_source">show source</a> ]</p>
  <div id="M006862_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2007</span>
2007:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_belongs_to_association</span>
2008:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2009:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>)
2010: 
2011:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:second_client</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:firm</span>)
2012:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>)
2013:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006857" class="method">
  <div id="M006857_title" class="title">
    <b>test_to_xml_including_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006857_source')" id="l_M006857_source">show source</a> ]</p>
  <div id="M006857_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1976</span>
1976:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_has_many_association</span>
1977:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:replies_count</span>)
1978:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">7</span>)
1979:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;replies type=&quot;array&quot;&gt;&lt;reply&gt;)</span>)
1980:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The Second Topic of the day&lt;/title&gt;)</span>)
1981:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006865" class="method">
  <div id="M006865_title" class="title">
    <b>test_to_xml_including_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006865_source')" id="l_M006865_source">show source</a> ]</p>
  <div id="M006865_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2033</span>
2033:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_methods</span>
2034:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:arbitrary_method</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
2035:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;company&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">9</span>)
2036:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;arbitrary-method&gt;I am Jack's profound disappointment&lt;/arbitrary-method&gt;)</span>)
2037:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006863" class="method">
  <div id="M006863_title" class="title">
    <b>test_to_xml_including_multiple_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006863_source')" id="l_M006863_source">show source</a> ]</p>
  <div id="M006863_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2015</span>
2015:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_multiple_associations</span>
2016:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:clients</span>, <span class="ruby-identifier">:account</span> ])
2017:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">6</span>)
2018:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;account&gt;)</span>)
2019:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
2020:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006864" class="method">
  <div id="M006864_title" class="title">
    <b>test_to_xml_including_multiple_associations_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006864_source')" id="l_M006864_source">show source</a> ]</p>
  <div id="M006864_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2022</span>
2022:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_including_multiple_associations_with_options</span>
2023:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">to_xml</span>(
2024:       <span class="ruby-identifier">:indent</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
2025:       <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:clients</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:name</span> } }
2026:     )
2027: 
2028:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;firm&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">6</span>)
2029:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;client&gt;&lt;name&gt;Summit&lt;/name&gt;&lt;/client&gt;)</span>)
2030:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;clients type=&quot;array&quot;&gt;&lt;client&gt;)</span>)
2031:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006856" class="method">
  <div id="M006856_title" class="title">
    <b>test_to_xml_skipping_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006856_source')" id="l_M006856_source">show source</a> ]</p>
  <div id="M006856_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1965</span>
1965:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_skipping_attributes</span>
1966:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:replies_count</span>])
1967:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;topic&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">7</span>)
1968:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
1969:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)
1970: 
1971:     <span class="ruby-identifier">xml</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:author_name</span>, <span class="ruby-identifier">:replies_count</span>])
1972:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;title&gt;The First Topic&lt;/title&gt;)</span>)
1973:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">%(&lt;author-name&gt;David&lt;/author-name&gt;)</span>)
1974:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006866" class="method">
  <div id="M006866_title" class="title">
    <b>test_to_xml_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006866_source')" id="l_M006866_source">show source</a> ]</p>
  <div id="M006866_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2039</span>
2039:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_with_block</span>
2040:     <span class="ruby-identifier">value</span> = <span class="ruby-value str">&quot;Rockin' the block&quot;</span>
2041:     <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:skip_instruct</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
2042:       <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">tag!</span> <span class="ruby-value str">&quot;arbitrary-element&quot;</span>, <span class="ruby-identifier">value</span>
2043:     <span class="ruby-keyword kw">end</span>
2044:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;company&gt;&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">9</span>)
2045:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&lt;arbitrary-element&gt;#{value}&lt;/arbitrary-element&gt;)</span>)
2046:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006822" class="method">
  <div id="M006822_title" class="title">
    <b>test_toggle_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006822_source')" id="l_M006822_source">show source</a> ]</p>
  <div id="M006822_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 1606</span>
1606:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_toggle_attribute</span>
1607:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">approved?</span>
1608:     <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">toggle!</span>(<span class="ruby-identifier">:approved</span>)
1609:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">approved?</span>
1610:     <span class="ruby-identifier">topic</span> = <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>)
1611:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">toggle</span>(<span class="ruby-identifier">:approved</span>)
1612:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
1613:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
1614:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
1615:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006867" class="method">
  <div id="M006867_title" class="title">
    <b>test_type_name_with_module_should_handle_beginning</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006867_source')" id="l_M006867_source">show source</a> ]</p>
  <div id="M006867_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 2048</span>
2048:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_type_name_with_module_should_handle_beginning</span>
2049:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ActiveRecord::Person'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:type_name_with_module</span>, <span class="ruby-value str">'Person'</span>)
2050:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'::Person'</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:type_name_with_module</span>, <span class="ruby-value str">'::Person'</span>)
2051:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006702" class="method">
  <div id="M006702_title" class="title">
    <b>test_update</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006702_source')" id="l_M006702_source">show source</a> ]</p>
  <div id="M006702_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update</span>
280:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
281:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Another New Topic&quot;</span>
282:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">written_on</span> = <span class="ruby-value str">&quot;2003-12-12 23:23:00&quot;</span>
283:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
284:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
285:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Another New Topic&quot;</span>, <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span>)
286: 
287:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Updated topic&quot;</span>
288:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">save</span>
289: 
290:     <span class="ruby-identifier">topicReloadedAgain</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
291: 
292:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Updated topic&quot;</span>, <span class="ruby-identifier">topicReloadedAgain</span>.<span class="ruby-identifier">title</span>)
293:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006735" class="method">
  <div id="M006735_title" class="title">
    <b>test_update_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006735_source')" id="l_M006735_source">show source</a> ]</p>
  <div id="M006735_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 654</span>
654:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all</span>
655:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>)
656:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
657:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
658: 
659:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'content = ?'</span>, <span class="ruby-value str">'bulk updated again!'</span>])
660:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated again!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
661:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated again!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
662: 
663:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'content = ?'</span>, <span class="ruby-keyword kw">nil</span>])
664:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
665:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006739" class="method">
  <div id="M006739_title" class="title">
    <b>test_update_all_ignores_order_without_limit_from_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006739_source')" id="l_M006739_source">show source</a> ]</p>
  <div id="M006739_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 687</span>
687:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_ignores_order_without_limit_from_association</span>
688:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
689:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
690:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_comments_and_categories</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_comments_and_categories</span>.<span class="ruby-identifier">update_all</span>([ <span class="ruby-value str">&quot;body = ?&quot;</span>, <span class="ruby-value str">&quot;bulk update!&quot;</span> ])
691:     <span class="ruby-keyword kw">end</span>
692:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006736" class="method">
  <div id="M006736_title" class="title">
    <b>test_update_all_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006736_source')" id="l_M006736_source">show source</a> ]</p>
  <div id="M006736_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 667</span>
667:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_hash</span>
668:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>
669:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bulk updated with hash!'</span>, <span class="ruby-identifier">:last_read</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
670:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated with hash!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
671:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated with hash!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
672:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_read</span>
673:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">last_read</span>
674:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006737" class="method">
  <div id="M006737_title" class="title">
    <b>test_update_all_with_non_standard_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006737_source')" id="l_M006737_source">show source</a> ]</p>
  <div id="M006737_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 676</span>
676:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_non_standard_table_name</span>
677:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">WarehouseThing</span>.<span class="ruby-identifier">update_all</span>([<span class="ruby-value str">'value = ?'</span>, <span class="ruby-value">0</span>], [<span class="ruby-value str">'id = ?'</span>, <span class="ruby-value">1</span>])
678:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">WarehouseThing</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">value</span>
679:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006738" class="method">
  <div id="M006738_title" class="title">
    <b>test_update_all_with_order_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006738_source')" id="l_M006738_source">show source</a> ]</p>
  <div id="M006738_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 682</span>
682:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_order_and_limit</span>
683:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span>(<span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span>)
684:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006740" class="method">
  <div id="M006740_title" class="title">
    <b>test_update_all_with_order_and_limit_updates_subset_only</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006740_source')" id="l_M006740_source">show source</a> ]</p>
  <div id="M006740_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 694</span>
694:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_all_with_order_and_limit_updates_subset_only</span>
695:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
696:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
697:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">size</span>
698:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
699:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_sorted_by_id_limited</span>.<span class="ruby-identifier">update_all</span>([ <span class="ruby-value str">&quot;body = ?&quot;</span>, <span class="ruby-value str">&quot;bulk update!&quot;</span> ])
700:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk update!&quot;</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">body</span>
701:       <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-value str">&quot;bulk update!&quot;</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">body</span>
702:     <span class="ruby-keyword kw">end</span>
703:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006688" class="method">
  <div id="M006688_title" class="title">
    <b>test_update_array_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006688_source')" id="l_M006688_source">show source</a> ]</p>
  <div id="M006688_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_array_content</span>
166:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
167:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> = <span class="ruby-node">%w( one two three )</span>
168: 
169:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>.<span class="ruby-identifier">push</span> <span class="ruby-value str">&quot;four&quot;</span>
170:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three four )</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
171: 
172:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
173: 
174:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
175:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;five&quot;</span>
176:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">%w( one two three four five )</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">content</span>)
177:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006759" class="method">
  <div id="M006759_title" class="title">
    <b>test_update_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006759_source')" id="l_M006759_source">show source</a> ]</p>
  <div id="M006759_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 871</span>
871:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attribute</span>
872:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
873:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value str">&quot;approved&quot;</span>, <span class="ruby-keyword kw">true</span>)
874:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
875: 
876:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">update_attribute</span>(<span class="ruby-identifier">:approved</span>, <span class="ruby-keyword kw">false</span>)
877:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">approved?</span>
878:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006760" class="method">
  <div id="M006760_title" class="title">
    <b>test_update_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006760_source')" id="l_M006760_source">show source</a> ]</p>
  <div id="M006760_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 880</span>
880:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attributes</span>
881:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
882:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
883:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
884: 
885:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-value str">&quot;approved&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic Updated&quot;</span>)
886:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
887:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
888:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic Updated&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
889: 
890:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>)
891:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">reload</span>
892:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved?</span>
893:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
894:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006761" class="method">
  <div id="M006761_title" class="title">
    <b>test_update_attributes!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006761_source')" id="l_M006761_source">show source</a> ]</p>
  <div id="M006761_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 896</span>
896:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attributes!</span>
897:     <span class="ruby-identifier">reply</span> = <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
898:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
899:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
900: 
901:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-value str">&quot;title&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The Second Topic of the day updated&quot;</span>, <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>)
902:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">reload</span>
903:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day updated&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
904:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
905: 
906:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>)
907:     <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">reload</span>
908:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">title</span>
909:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">content</span>
910: 
911:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordInvalid</span>) { <span class="ruby-identifier">reply</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:content</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Have a nice evening&quot;</span>) }
912:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006743" class="method">
  <div id="M006743_title" class="title">
    <b>test_update_by_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006743_source')" id="l_M006743_source">show source</a> ]</p>
  <div id="M006743_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 720</span>
720:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_by_condition</span>
721:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update_all</span> <span class="ruby-value str">&quot;content = 'bulk updated!'&quot;</span>, [<span class="ruby-value str">&quot;approved = ?&quot;</span>, <span class="ruby-keyword kw">true</span>]
722:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
723:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;bulk updated!&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
724:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006703" class="method">
  <div id="M006703_title" class="title">
    <b>test_update_columns_not_equal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006703_source')" id="l_M006703_source">show source</a> ]</p>
  <div id="M006703_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 295</span>
295:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_columns_not_equal_attributes</span>
296:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
297:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Still another topic&quot;</span>
298:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">save</span>
299: 
300:     <span class="ruby-identifier">topicReloaded</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">id</span>)
301:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;A New Topic&quot;</span>
302:     <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">'does_not_exist'</span>, <span class="ruby-value str">'test'</span>
303:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">topicReloaded</span>.<span class="ruby-identifier">save</span> }
304:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006734" class="method">
  <div id="M006734_title" class="title">
    <b>test_update_counter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006734_source')" id="l_M006734_source">show source</a> ]</p>
  <div id="M006734_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 631</span>
631:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_counter</span>
632:     <span class="ruby-identifier">category</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>)
633:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
634:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>
635: 
636:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>)
637:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>
638:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
639:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
640: 
641:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>(<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations</span>.<span class="ruby-identifier">count</span>)
642:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>
643:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
644:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
645: 
646:     <span class="ruby-identifier">category_2</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>)
647:     <span class="ruby-identifier">count_1</span>, <span class="ruby-identifier">count_2</span> = (<span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>), (<span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">categorizations_count</span> <span class="ruby-operator">||</span> <span class="ruby-value">0</span>)
648:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">update_counters</span>([<span class="ruby-identifier">category</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">id</span>], <span class="ruby-value str">&quot;categorizations_count&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
649:     <span class="ruby-identifier">category</span>.<span class="ruby-identifier">reload</span>; <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">reload</span>
650:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count_1</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category</span>.<span class="ruby-identifier">categorizations_count</span>
651:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count_2</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">category_2</span>.<span class="ruby-identifier">categorizations_count</span>
652:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006704" class="method">
  <div id="M006704_title" class="title">
    <b>test_update_for_record_with_only_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006704_source')" id="l_M006704_source">show source</a> ]</p>
  <div id="M006704_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_for_record_with_only_primary_key</span>
307:     <span class="ruby-identifier">minimalistic</span> = <span class="ruby-identifier">minimalistics</span>(<span class="ruby-identifier">:first</span>)
308:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">minimalistic</span>.<span class="ruby-identifier">save</span> }
309:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006741" class="method">
  <div id="M006741_title" class="title">
    <b>test_update_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006741_source')" id="l_M006741_source">show source</a> ]</p>
  <div id="M006741_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 705</span>
705:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_many</span>
706:     <span class="ruby-identifier">topic_data</span> = { <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1 updated&quot;</span> }, <span class="ruby-value">2</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">&quot;content&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;2 updated&quot;</span> } }
707:     <span class="ruby-identifier">updated</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">topic_data</span>.<span class="ruby-identifier">keys</span>, <span class="ruby-identifier">topic_data</span>.<span class="ruby-identifier">values</span>)
708: 
709:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">updated</span>.<span class="ruby-identifier">size</span>
710:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;1 updated&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">content</span>
711:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;2 updated&quot;</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">content</span>
712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006749" class="method">
  <div id="M006749_title" class="title">
    <b>test_utc_as_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006749_source')" id="l_M006749_source">show source</a> ]</p>
  <div id="M006749_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 790</span>
790:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utc_as_time_zone</span>
791:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
792:       <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;bonus_time&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;5:42:00AM&quot;</span> }
793:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
794:       <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attributes</span> = <span class="ruby-identifier">attributes</span>
795:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">5</span>, <span class="ruby-value">42</span>, <span class="ruby-value">0</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
796:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
797:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006750" class="method">
  <div id="M006750_title" class="title">
    <b>test_utc_as_time_zone_and_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006750_source')" id="l_M006750_source">show source</a> ]</p>
  <div id="M006750_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 799</span>
799:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utc_as_time_zone_and_new</span>
800:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:utc</span>
801:       <span class="ruby-identifier">attributes</span> = { <span class="ruby-value str">&quot;bonus_time(1i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;2000&quot;</span>,
802:                      <span class="ruby-value str">&quot;bonus_time(2i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;1&quot;</span>,
803:                      <span class="ruby-value str">&quot;bonus_time(3i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;1&quot;</span>,
804:                      <span class="ruby-value str">&quot;bonus_time(4i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;10&quot;</span>,
805:                      <span class="ruby-value str">&quot;bonus_time(5i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;35&quot;</span>,
806:                      <span class="ruby-value str">&quot;bonus_time(6i)&quot;</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;50&quot;</span> }
807:       <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">attributes</span>)
808:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>, <span class="ruby-value">10</span>, <span class="ruby-value">35</span>, <span class="ruby-value">50</span>), <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">bonus_time</span>
809:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">default_timezone</span> = <span class="ruby-identifier">:local</span>
810:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006705" class="method">
  <div id="M006705_title" class="title">
    <b>test_write_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006705_source')" id="l_M006705_source">show source</a> ]</p>
  <div id="M006705_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/base_test.rb, line 311</span>
311:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_attribute</span>
312:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">new</span>
313:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:write_attribute</span>, <span class="ruby-identifier">:title</span>, <span class="ruby-value str">&quot;Still another topic&quot;</span>)
314:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Still another topic&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
315: 
316:     <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:write_attribute</span>, <span class="ruby-value str">&quot;title&quot;</span>, <span class="ruby-value str">&quot;Still another topic: part 2&quot;</span>)
317:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Still another topic: part 2&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>
318:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>