  <div id="C00000874">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />SchemaTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/schema_test_postgresql_rb.html');">activerecord/test/cases/schema_test_postgresql.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005963&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005964&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005969&name=test_classes_with_qualified_schema_name" >test_classes_with_qualified_schema_name</a></li>
  <li><a href="index.html?a=M005973&name=test_dump_indexes_for_schema_one" >test_dump_indexes_for_schema_one</a></li>
  <li><a href="index.html?a=M005974&name=test_dump_indexes_for_schema_two" >test_dump_indexes_for_schema_two</a></li>
  <li><a href="index.html?a=M005972&name=test_ignore_nil_schema_search_path" >test_ignore_nil_schema_search_path</a></li>
  <li><a href="index.html?a=M005968&name=test_proper_encoding_of_table_name" >test_proper_encoding_of_table_name</a></li>
  <li><a href="index.html?a=M005970&name=test_raise_on_unquoted_schema_name" >test_raise_on_unquoted_schema_name</a></li>
  <li><a href="index.html?a=M005966&name=test_with_schema_prefixed_capitalized_table_name" >test_with_schema_prefixed_capitalized_table_name</a></li>
  <li><a href="index.html?a=M005965&name=test_with_schema_prefixed_table_name" >test_with_schema_prefixed_table_name</a></li>
  <li><a href="index.html?a=M005967&name=test_with_schema_search_path" >test_with_schema_search_path</a></li>
  <li><a href="index.html?a=M005975&name=test_with_uppercase_index_name" >test_with_uppercase_index_name</a></li>
  <li><a href="index.html?a=M005971&name=test_without_schema_search_path" >test_without_schema_search_path</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/SchemaTest/Thing1.html');" class="link">SchemaTest::Thing1</a>"<br />
Class "<a href="#" onclick="jsHref('classes/SchemaTest/Thing2.html');" class="link">SchemaTest::Thing2</a>"<br />
Class "<a href="#" onclick="jsHref('classes/SchemaTest/Thing3.html');" class="link">SchemaTest::Thing3</a>"<br />
Class "<a href="#" onclick="jsHref('classes/SchemaTest/Thing4.html');" class="link">SchemaTest::Thing4</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">SCHEMA_NAME</td>
    <td>=</td>
    <td class="attr-value">'test_schema'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">SCHEMA2_NAME</td>
    <td>=</td>
    <td class="attr-value">'test_schema2'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">TABLE_NAME</td>
    <td>=</td>
    <td class="attr-value">'things'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">CAPITALIZED_TABLE_NAME</td>
    <td>=</td>
    <td class="attr-value">'Things'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">INDEX_A_NAME</td>
    <td>=</td>
    <td class="attr-value">'a_index_things_on_name'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">INDEX_B_NAME</td>
    <td>=</td>
    <td class="attr-value">'b_index_things_on_different_columns_in_each_schema'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">INDEX_A_COLUMN</td>
    <td>=</td>
    <td class="attr-value">'name'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">INDEX_B_COLUMN_S1</td>
    <td>=</td>
    <td class="attr-value">'email'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">INDEX_B_COLUMN_S2</td>
    <td>=</td>
    <td class="attr-value">'moment'</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">COLUMNS</td>
    <td>=</td>
    <td class="attr-value">[     'id integer',     'name character varying(50)',     'email character varying(50)',     'moment timestamp without time zone default now()'</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M005963" class="method">
  <div id="M005963_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005963_source')" id="l_M005963_source">show source</a> ]</p>
  <div id="M005963_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 38</span>
38:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
39:     <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>
40:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE SCHEMA #{SCHEMA_NAME} CREATE TABLE #{TABLE_NAME} (#{COLUMNS.join(',')})&quot;</span>
41:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE TABLE #{SCHEMA_NAME}.\&quot;#{TABLE_NAME}.table\&quot; (#{COLUMNS.join(',')})&quot;</span>
42:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE TABLE #{SCHEMA_NAME}.\&quot;#{CAPITALIZED_TABLE_NAME}\&quot; (#{COLUMNS.join(',')})&quot;</span>
43:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE SCHEMA #{SCHEMA2_NAME} CREATE TABLE #{TABLE_NAME} (#{COLUMNS.join(',')})&quot;</span>
44:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX #{INDEX_A_NAME} ON #{SCHEMA_NAME}.#{TABLE_NAME}  USING btree (#{INDEX_A_COLUMN});&quot;</span>
45:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX #{INDEX_A_NAME} ON #{SCHEMA2_NAME}.#{TABLE_NAME}  USING btree (#{INDEX_A_COLUMN});&quot;</span>
46:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX #{INDEX_B_NAME} ON #{SCHEMA_NAME}.#{TABLE_NAME}  USING btree (#{INDEX_B_COLUMN_S1});&quot;</span>
47:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX #{INDEX_B_NAME} ON #{SCHEMA2_NAME}.#{TABLE_NAME}  USING btree (#{INDEX_B_COLUMN_S2});&quot;</span>
48:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005964" class="method">
  <div id="M005964_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005964_source')" id="l_M005964_source">show source</a> ]</p>
  <div id="M005964_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
51:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP SCHEMA #{SCHEMA2_NAME} CASCADE&quot;</span>
52:     <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;DROP SCHEMA #{SCHEMA_NAME} CASCADE&quot;</span>
53:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005969" class="method">
  <div id="M005969_title" class="title">
    <b>test_classes_with_qualified_schema_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005969_source')" id="l_M005969_source">show source</a> ]</p>
  <div id="M005969_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 85</span>
 85:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_classes_with_qualified_schema_name</span>
 86:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">count</span>
 87:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">count</span>
 88:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">count</span>
 89:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">count</span>
 90: 
 91:     <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1&quot;</span>, <span class="ruby-identifier">:email</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1@localhost&quot;</span>, <span class="ruby-identifier">:moment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
 92:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">count</span>
 93:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">count</span>
 94:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">count</span>
 95:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">count</span>
 96: 
 97:     <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1&quot;</span>, <span class="ruby-identifier">:email</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1@localhost&quot;</span>, <span class="ruby-identifier">:moment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
 98:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">count</span>
 99:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">count</span>
100:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">count</span>
101:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">count</span>
102: 
103:     <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1&quot;</span>, <span class="ruby-identifier">:email</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1@localhost&quot;</span>, <span class="ruby-identifier">:moment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
104:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">count</span>
105:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">count</span>
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">count</span>
107:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">count</span>
108: 
109:     <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1&quot;</span>, <span class="ruby-identifier">:email</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;thing1@localhost&quot;</span>, <span class="ruby-identifier">:moment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>)
110:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing1</span>.<span class="ruby-identifier">count</span>
111:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing2</span>.<span class="ruby-identifier">count</span>
112:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing3</span>.<span class="ruby-identifier">count</span>
113:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Thing4</span>.<span class="ruby-identifier">count</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005973" class="method">
  <div id="M005973_title" class="title">
    <b>test_dump_indexes_for_schema_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005973_source')" id="l_M005973_source">show source</a> ]</p>
  <div id="M005973_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dump_indexes_for_schema_one</span>
131:     <span class="ruby-identifier">do_dump_index_tests_for_schema</span>(<span class="ruby-constant">SCHEMA_NAME</span>, <span class="ruby-constant">INDEX_A_COLUMN</span>, <span class="ruby-constant">INDEX_B_COLUMN_S1</span>)
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005974" class="method">
  <div id="M005974_title" class="title">
    <b>test_dump_indexes_for_schema_two</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005974_source')" id="l_M005974_source">show source</a> ]</p>
  <div id="M005974_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dump_indexes_for_schema_two</span>
135:     <span class="ruby-identifier">do_dump_index_tests_for_schema</span>(<span class="ruby-constant">SCHEMA2_NAME</span>, <span class="ruby-constant">INDEX_A_COLUMN</span>, <span class="ruby-constant">INDEX_B_COLUMN_S2</span>)
136:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005972" class="method">
  <div id="M005972_title" class="title">
    <b>test_ignore_nil_schema_search_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005972_source')" id="l_M005972_source">show source</a> ]</p>
  <div id="M005972_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 126</span>
126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ignore_nil_schema_search_path</span>
127:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">with_schema_search_path</span> <span class="ruby-keyword kw">nil</span> }
128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005968" class="method">
  <div id="M005968_title" class="title">
    <b>test_proper_encoding_of_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005968_source')" id="l_M005968_source">show source</a> ]</p>
  <div id="M005968_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 76</span>
76:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_proper_encoding_of_table_name</span>
77:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;table_name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'table_name'</span>)
78:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;table.name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'&quot;table.name&quot;'</span>)
79:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;schema_name&quot;.&quot;table_name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'schema_name.table_name'</span>)
80:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;schema_name&quot;.&quot;table.name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'schema_name.&quot;table.name&quot;'</span>)
81:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;schema.name&quot;.&quot;table_name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'&quot;schema.name&quot;.table_name'</span>)
82:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;schema.name&quot;.&quot;table.name&quot;'</span>, <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'&quot;schema.name&quot;.&quot;table.name&quot;'</span>)
83:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005970" class="method">
  <div id="M005970_title" class="title">
    <b>test_raise_on_unquoted_schema_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005970_source')" id="l_M005970_source">show source</a> ]</p>
  <div id="M005970_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_raise_on_unquoted_schema_name</span>
117:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) <span class="ruby-keyword kw">do</span>
118:       <span class="ruby-identifier">with_schema_search_path</span> <span class="ruby-value str">'$user,public'</span>
119:     <span class="ruby-keyword kw">end</span>
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005966" class="method">
  <div id="M005966_title" class="title">
    <b>test_with_schema_prefixed_capitalized_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005966_source')" id="l_M005966_source">show source</a> ]</p>
  <div id="M005966_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_schema_prefixed_capitalized_table_name</span>
62:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
63:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">COLUMNS</span>, <span class="ruby-identifier">columns</span>(<span class="ruby-node">&quot;#{SCHEMA_NAME}.#{CAPITALIZED_TABLE_NAME}&quot;</span>)
64:     <span class="ruby-keyword kw">end</span>
65:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005965" class="method">
  <div id="M005965_title" class="title">
    <b>test_with_schema_prefixed_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005965_source')" id="l_M005965_source">show source</a> ]</p>
  <div id="M005965_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_schema_prefixed_table_name</span>
56:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
57:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">COLUMNS</span>, <span class="ruby-identifier">columns</span>(<span class="ruby-node">&quot;#{SCHEMA_NAME}.#{TABLE_NAME}&quot;</span>)
58:     <span class="ruby-keyword kw">end</span>
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005967" class="method">
  <div id="M005967_title" class="title">
    <b>test_with_schema_search_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005967_source')" id="l_M005967_source">show source</a> ]</p>
  <div id="M005967_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 67</span>
67:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_schema_search_path</span>
68:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
69:       <span class="ruby-identifier">with_schema_search_path</span>(<span class="ruby-constant">SCHEMA_NAME</span>) <span class="ruby-keyword kw">do</span>
70:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">COLUMNS</span>, <span class="ruby-identifier">columns</span>(<span class="ruby-constant">TABLE_NAME</span>)
71:       <span class="ruby-keyword kw">end</span>
72:     <span class="ruby-keyword kw">end</span>
73:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005975" class="method">
  <div id="M005975_title" class="title">
    <b>test_with_uppercase_index_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005975_source')" id="l_M005975_source">show source</a> ]</p>
  <div id="M005975_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_uppercase_index_name</span>
139:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX \&quot;things_Index\&quot; ON #{SCHEMA_NAME}.things (name)&quot;</span>
140:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">remove_index</span> <span class="ruby-identifier">:things</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;#{SCHEMA_NAME}.things_Index&quot;</span>}
141: 
142:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">execute</span> <span class="ruby-node">&quot;CREATE INDEX \&quot;things_Index\&quot; ON #{SCHEMA_NAME}.things (name)&quot;</span>
143:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_search_path</span> = <span class="ruby-constant">SCHEMA_NAME</span>
144:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">remove_index</span> <span class="ruby-identifier">:things</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;things_Index&quot;</span>}
145:     <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">schema_search_path</span> = <span class="ruby-value str">&quot;public&quot;</span>
146:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005971" class="method">
  <div id="M005971_title" class="title">
    <b>test_without_schema_search_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005971_source')" id="l_M005971_source">show source</a> ]</p>
  <div id="M005971_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/schema_test_postgresql.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_without_schema_search_path</span>
123:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) { <span class="ruby-identifier">columns</span>(<span class="ruby-constant">TABLE_NAME</span>) }
124:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>