  <div id="C00000833">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TimeWithZoneMethodsForTimeAndDateTimeTest<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/core_ext/time_with_zone_test_rb.html');">activesupport/test/core_ext/time_with_zone_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005538&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005539&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005551&name=test_current_returns_time_now_when_zone_default_not_set" >test_current_returns_time_now_when_zone_default_not_set</a></li>
  <li><a href="index.html?a=M005552&name=test_current_returns_time_zone_now_when_zone_default_set" >test_current_returns_time_zone_now_when_zone_default_set</a></li>
  <li><a href="index.html?a=M005540&name=test_in_time_zone" >test_in_time_zone</a></li>
  <li><a href="index.html?a=M005541&name=test_in_time_zone_with_argument" >test_in_time_zone_with_argument</a></li>
  <li><a href="index.html?a=M005542&name=test_in_time_zone_with_time_local_instance" >test_in_time_zone_with_time_local_instance</a></li>
  <li><a href="index.html?a=M005545&name=test_time_zone_getter_and_setter" >test_time_zone_getter_and_setter</a></li>
  <li><a href="index.html?a=M005546&name=test_time_zone_getter_and_setter_with_zone_default" >test_time_zone_getter_and_setter_with_zone_default</a></li>
  <li><a href="index.html?a=M005547&name=test_time_zone_setter_is_thread_safe" >test_time_zone_setter_is_thread_safe</a></li>
  <li><a href="index.html?a=M005550&name=test_time_zone_setter_with_non_identifying_argument_returns_nil" >test_time_zone_setter_with_non_identifying_argument_returns_nil</a></li>
  <li><a href="index.html?a=M005549&name=test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone" >test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</a></li>
  <li><a href="index.html?a=M005548&name=test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone" >test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</a></li>
  <li><a href="index.html?a=M005543&name=test_use_zone" >test_use_zone</a></li>
  <li><a href="index.html?a=M005544&name=test_use_zone_with_exception_raised" >test_use_zone_with_exception_raised</a></li>
  <li><a href="index.html?a=M005553&name=with_env_tz" >with_env_tz</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005538" class="method">
  <div id="M005538_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005538_source')" id="l_M005538_source">show source</a> ]</p>
  <div id="M005538_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 702</span>
702:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
703:     <span class="ruby-ivar">@t</span>, <span class="ruby-ivar">@dt</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">civil</span>(<span class="ruby-value">2000</span>)
704:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005539" class="method">
  <div id="M005539_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005539_source')" id="l_M005539_source">show source</a> ]</p>
  <div id="M005539_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 706</span>
706:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
707:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
708:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005551" class="method">
  <div id="M005551_title" class="title">
    <b>test_current_returns_time_now_when_zone_default_not_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005551_source')" id="l_M005551_source">show source</a> ]</p>
  <div id="M005551_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 818</span>
818:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_current_returns_time_now_when_zone_default_not_set</span>
819:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
820:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:now</span>).<span class="ruby-identifier">returns</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>)
821:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeWithZone</span>)
822:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>
823:     <span class="ruby-keyword kw">end</span>
824:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005552" class="method">
  <div id="M005552_title" class="title">
    <b>test_current_returns_time_zone_now_when_zone_default_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005552_source')" id="l_M005552_source">show source</a> ]</p>
  <div id="M005552_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 826</span>
826:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_current_returns_time_zone_now_when_zone_default_set</span>
827:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span>]
828:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
829:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:now</span>).<span class="ruby-identifier">returns</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>)
830:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeWithZone</span>)
831:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">time_zone</span>.<span class="ruby-identifier">name</span>
832:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">time</span>
833:     <span class="ruby-keyword kw">end</span>
834:   <span class="ruby-keyword kw">ensure</span>
835:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-keyword kw">nil</span>
836:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005540" class="method">
  <div id="M005540_title" class="title">
    <b>test_in_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005540_source')" id="l_M005540_source">show source</a> ]</p>
  <div id="M005540_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 710</span>
710:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone</span>
711:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Alaska'</span> <span class="ruby-keyword kw">do</span>
712:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
713:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
714:     <span class="ruby-keyword kw">end</span>
715:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Hawaii'</span> <span class="ruby-keyword kw">do</span>
716:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
717:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
718:     <span class="ruby-keyword kw">end</span>
719:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">do</span>
720:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@t</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>
721:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@dt</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>
722:     <span class="ruby-keyword kw">end</span>
723:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005541" class="method">
  <div id="M005541_title" class="title">
    <b>test_in_time_zone_with_argument</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005541_source')" id="l_M005541_source">show source</a> ]</p>
  <div id="M005541_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 725</span>
725:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone_with_argument</span>
726:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span> <span class="ruby-keyword kw">do</span> <span class="ruby-comment cmt"># Time.zone will not affect #in_time_zone(zone)</span>
727:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
728:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
729:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Hawaii'</span>).<span class="ruby-identifier">inspect</span>
730:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Hawaii'</span>).<span class="ruby-identifier">inspect</span>
731:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Sat, 01 Jan 2000 00:00:00 UTC +00:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'UTC'</span>).<span class="ruby-identifier">inspect</span>
732:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Sat, 01 Jan 2000 00:00:00 UTC +00:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'UTC'</span>).<span class="ruby-identifier">inspect</span>
733:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value">-9</span>.<span class="ruby-identifier">hours</span>).<span class="ruby-identifier">inspect</span>
734:     <span class="ruby-keyword kw">end</span>
735:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005542" class="method">
  <div id="M005542_title" class="title">
    <b>test_in_time_zone_with_time_local_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005542_source')" id="l_M005542_source">show source</a> ]</p>
  <div id="M005542_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 737</span>
737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone_with_time_local_instance</span>
738:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
739:       <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">1999</span>, <span class="ruby-value">12</span>, <span class="ruby-value">31</span>, <span class="ruby-value">19</span>) <span class="ruby-comment cmt"># == Time.utc(2000)</span>
740:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-identifier">time</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
741:     <span class="ruby-keyword kw">end</span>
742:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005545" class="method">
  <div id="M005545_title" class="title">
    <b>test_time_zone_getter_and_setter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005545_source')" id="l_M005545_source">show source</a> ]</p>
  <div id="M005545_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_getter_and_setter</span>
761:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>]
762:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
763:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
764:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
765:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value">-9</span>.<span class="ruby-identifier">hours</span>
766:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
767:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
768:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
769:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005546" class="method">
  <div id="M005546_title" class="title">
    <b>test_time_zone_getter_and_setter_with_zone_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005546_source')" id="l_M005546_source">show source</a> ]</p>
  <div id="M005546_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 771</span>
771:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_getter_and_setter_with_zone_default</span>
772:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>]
773:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
774:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>]
775:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
776:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
777:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
778:   <span class="ruby-keyword kw">ensure</span>
779:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-keyword kw">nil</span>
780:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005547" class="method">
  <div id="M005547_title" class="title">
    <b>test_time_zone_setter_is_thread_safe</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005547_source')" id="l_M005547_source">show source</a> ]</p>
  <div id="M005547_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 782</span>
782:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_is_thread_safe</span>
783:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Paris'</span> <span class="ruby-keyword kw">do</span>
784:       <span class="ruby-identifier">t1</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> { <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span> }.<span class="ruby-identifier">join</span>
785:       <span class="ruby-identifier">t2</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> { <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Hawaii'</span> }.<span class="ruby-identifier">join</span>
786:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">stop?</span>, <span class="ruby-value str">&quot;Thread 1 did not finish running&quot;</span>
787:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">stop?</span>, <span class="ruby-value str">&quot;Thread 2 did not finish running&quot;</span>
788:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Paris'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
789:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-identifier">t1</span>[<span class="ruby-identifier">:time_zone</span>]
790:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-identifier">t2</span>[<span class="ruby-identifier">:time_zone</span>]
791:     <span class="ruby-keyword kw">end</span>
792:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005550" class="method">
  <div id="M005550_title" class="title">
    <b>test_time_zone_setter_with_non_identifying_argument_returns_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005550_source')" id="l_M005550_source">show source</a> ]</p>
  <div id="M005550_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 811</span>
811:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_non_identifying_argument_returns_nil</span>
812:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'foo'</span>
813:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
814:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value">-15</span>.<span class="ruby-identifier">hours</span>
815:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
816:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005549" class="method">
  <div id="M005549_title" class="title">
    <b>test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005549_source')" id="l_M005549_source">show source</a> ]</p>
  <div id="M005549_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 803</span>
803:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</span>
804:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'America/New_York'</span>
805:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
806:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">tzinfo</span>.<span class="ruby-identifier">name</span>
807:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">name</span>
808:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-18_000</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">utc_offset</span>)
809:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005548" class="method">
  <div id="M005548_title" class="title">
    <b>test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005548_source')" id="l_M005548_source">show source</a> ]</p>
  <div id="M005548_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 794</span>
794:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</span>
795:     <span class="ruby-identifier">tzinfo</span> = <span class="ruby-constant">TZInfo</span><span class="ruby-operator">::</span><span class="ruby-constant">Timezone</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">'America/New_York'</span>)
796:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-identifier">tzinfo</span>
797:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
798:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tzinfo</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">tzinfo</span>
799:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">name</span>
800:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-18_000</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">utc_offset</span>)
801:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005543" class="method">
  <div id="M005543_title" class="title">
    <b>test_use_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005543_source')" id="l_M005543_source">show source</a> ]</p>
  <div id="M005543_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 744</span>
744:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_use_zone</span>
745:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
746:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Hawaii'</span> <span class="ruby-keyword kw">do</span>
747:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
748:     <span class="ruby-keyword kw">end</span>
749:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
750:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005544" class="method">
  <div id="M005544_title" class="title">
    <b>test_use_zone_with_exception_raised</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005544_source')" id="l_M005544_source">show source</a> ]</p>
  <div id="M005544_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 752</span>
752:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_use_zone_with_exception_raised</span>
753:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
754:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
755:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span>(<span class="ruby-value str">'Hawaii'</span>) { <span class="ruby-identifier">raise</span> <span class="ruby-constant">RuntimeError</span> }
756:     <span class="ruby-keyword kw">end</span>
757:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005553" class="method">
  <div id="M005553_title" class="title">
    <b>with_env_tz</b>(new_tz = 'US/Eastern') {|| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005553_source')" id="l_M005553_source">show source</a> ]</p>
  <div id="M005553_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 839</span>
839:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_env_tz</span>(<span class="ruby-identifier">new_tz</span> = <span class="ruby-value str">'US/Eastern'</span>)
840:       <span class="ruby-identifier">old_tz</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>], <span class="ruby-identifier">new_tz</span>
841:       <span class="ruby-keyword kw">yield</span>
842:     <span class="ruby-keyword kw">ensure</span>
843:       <span class="ruby-identifier">old_tz</span> <span class="ruby-value">? </span><span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-identifier">old_tz</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'TZ'</span>)
844:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>