  <div id="C00000769">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TimeWithZoneMethodsForTimeAndDateTimeTest<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/core_ext/time_with_zone_test_rb.html');">activesupport/test/core_ext/time_with_zone_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005570&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005571&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005583&name=test_current_returns_time_now_when_zone_default_not_set" >test_current_returns_time_now_when_zone_default_not_set</a></li>
  <li><a href="index.html?a=M005584&name=test_current_returns_time_zone_now_when_zone_default_set" >test_current_returns_time_zone_now_when_zone_default_set</a></li>
  <li><a href="index.html?a=M005572&name=test_in_time_zone" >test_in_time_zone</a></li>
  <li><a href="index.html?a=M005573&name=test_in_time_zone_with_argument" >test_in_time_zone_with_argument</a></li>
  <li><a href="index.html?a=M005574&name=test_in_time_zone_with_time_local_instance" >test_in_time_zone_with_time_local_instance</a></li>
  <li><a href="index.html?a=M005577&name=test_time_zone_getter_and_setter" >test_time_zone_getter_and_setter</a></li>
  <li><a href="index.html?a=M005578&name=test_time_zone_getter_and_setter_with_zone_default" >test_time_zone_getter_and_setter_with_zone_default</a></li>
  <li><a href="index.html?a=M005579&name=test_time_zone_setter_is_thread_safe" >test_time_zone_setter_is_thread_safe</a></li>
  <li><a href="index.html?a=M005582&name=test_time_zone_setter_with_non_identifying_argument_returns_nil" >test_time_zone_setter_with_non_identifying_argument_returns_nil</a></li>
  <li><a href="index.html?a=M005581&name=test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone" >test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</a></li>
  <li><a href="index.html?a=M005580&name=test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone" >test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</a></li>
  <li><a href="index.html?a=M005575&name=test_use_zone" >test_use_zone</a></li>
  <li><a href="index.html?a=M005576&name=test_use_zone_with_exception_raised" >test_use_zone_with_exception_raised</a></li>
  <li><a href="index.html?a=M005585&name=with_env_tz" >with_env_tz</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005570" class="method">
  <div id="M005570_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005570_source')" id="l_M005570_source">show source</a> ]</p>
  <div id="M005570_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 708</span>
708:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
709:     <span class="ruby-ivar">@t</span>, <span class="ruby-ivar">@dt</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">DateTime</span>.<span class="ruby-identifier">civil</span>(<span class="ruby-value">2000</span>)
710:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005571" class="method">
  <div id="M005571_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005571_source')" id="l_M005571_source">show source</a> ]</p>
  <div id="M005571_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 712</span>
712:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
713:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
714:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005583" class="method">
  <div id="M005583_title" class="title">
    <b>test_current_returns_time_now_when_zone_default_not_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005583_source')" id="l_M005583_source">show source</a> ]</p>
  <div id="M005583_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 824</span>
824:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_current_returns_time_now_when_zone_default_not_set</span>
825:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
826:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:now</span>).<span class="ruby-identifier">returns</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>)
827:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeWithZone</span>)
828:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>
829:     <span class="ruby-keyword kw">end</span>
830:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005584" class="method">
  <div id="M005584_title" class="title">
    <b>test_current_returns_time_zone_now_when_zone_default_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005584_source')" id="l_M005584_source">show source</a> ]</p>
  <div id="M005584_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 832</span>
832:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_current_returns_time_zone_now_when_zone_default_set</span>
833:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span>]
834:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
835:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:now</span>).<span class="ruby-identifier">returns</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2000</span>)
836:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeWithZone</span>)
837:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">time_zone</span>.<span class="ruby-identifier">name</span>
838:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2000</span>), <span class="ruby-constant">Time</span>.<span class="ruby-identifier">current</span>.<span class="ruby-identifier">time</span>
839:     <span class="ruby-keyword kw">end</span>
840:   <span class="ruby-keyword kw">ensure</span>
841:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-keyword kw">nil</span>
842:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005572" class="method">
  <div id="M005572_title" class="title">
    <b>test_in_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005572_source')" id="l_M005572_source">show source</a> ]</p>
  <div id="M005572_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 716</span>
716:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone</span>
717:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Alaska'</span> <span class="ruby-keyword kw">do</span>
718:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
719:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
720:     <span class="ruby-keyword kw">end</span>
721:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Hawaii'</span> <span class="ruby-keyword kw">do</span>
722:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
723:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>.<span class="ruby-identifier">inspect</span>
724:     <span class="ruby-keyword kw">end</span>
725:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">do</span>
726:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@t</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>
727:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@dt</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>
728:     <span class="ruby-keyword kw">end</span>
729:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005573" class="method">
  <div id="M005573_title" class="title">
    <b>test_in_time_zone_with_argument</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005573_source')" id="l_M005573_source">show source</a> ]</p>
  <div id="M005573_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 731</span>
731:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone_with_argument</span>
732:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Eastern Time (US &amp; Canada)'</span> <span class="ruby-keyword kw">do</span> <span class="ruby-comment cmt"># Time.zone will not affect #in_time_zone(zone)</span>
733:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
734:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
735:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Hawaii'</span>).<span class="ruby-identifier">inspect</span>
736:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 14:00:00 HST -10:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Hawaii'</span>).<span class="ruby-identifier">inspect</span>
737:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Sat, 01 Jan 2000 00:00:00 UTC +00:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'UTC'</span>).<span class="ruby-identifier">inspect</span>
738:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Sat, 01 Jan 2000 00:00:00 UTC +00:00'</span>, <span class="ruby-ivar">@dt</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'UTC'</span>).<span class="ruby-identifier">inspect</span>
739:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-ivar">@t</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value">-9</span>.<span class="ruby-identifier">hours</span>).<span class="ruby-identifier">inspect</span>
740:     <span class="ruby-keyword kw">end</span>
741:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005574" class="method">
  <div id="M005574_title" class="title">
    <b>test_in_time_zone_with_time_local_instance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005574_source')" id="l_M005574_source">show source</a> ]</p>
  <div id="M005574_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 743</span>
743:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_in_time_zone_with_time_local_instance</span>
744:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
745:       <span class="ruby-identifier">time</span> = <span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">1999</span>, <span class="ruby-value">12</span>, <span class="ruby-value">31</span>, <span class="ruby-value">19</span>) <span class="ruby-comment cmt"># == Time.utc(2000)</span>
746:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Fri, 31 Dec 1999 15:00:00 AKST -09:00'</span>, <span class="ruby-identifier">time</span>.<span class="ruby-identifier">in_time_zone</span>(<span class="ruby-value str">'Alaska'</span>).<span class="ruby-identifier">inspect</span>
747:     <span class="ruby-keyword kw">end</span>
748:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005577" class="method">
  <div id="M005577_title" class="title">
    <b>test_time_zone_getter_and_setter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005577_source')" id="l_M005577_source">show source</a> ]</p>
  <div id="M005577_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_getter_and_setter</span>
767:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>]
768:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
769:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
770:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
771:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value">-9</span>.<span class="ruby-identifier">hours</span>
772:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
773:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
774:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
775:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005578" class="method">
  <div id="M005578_title" class="title">
    <b>test_time_zone_getter_and_setter_with_zone_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005578_source')" id="l_M005578_source">show source</a> ]</p>
  <div id="M005578_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 777</span>
777:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_getter_and_setter_with_zone_default</span>
778:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>]
779:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
780:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>]
781:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
782:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-keyword kw">nil</span>
783:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
784:   <span class="ruby-keyword kw">ensure</span>
785:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone_default</span> = <span class="ruby-keyword kw">nil</span>
786:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005579" class="method">
  <div id="M005579_title" class="title">
    <b>test_time_zone_setter_is_thread_safe</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005579_source')" id="l_M005579_source">show source</a> ]</p>
  <div id="M005579_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 788</span>
788:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_is_thread_safe</span>
789:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Paris'</span> <span class="ruby-keyword kw">do</span>
790:       <span class="ruby-identifier">t1</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> { <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span> }.<span class="ruby-identifier">join</span>
791:       <span class="ruby-identifier">t2</span> = <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">new</span> { <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Hawaii'</span> }.<span class="ruby-identifier">join</span>
792:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t1</span>.<span class="ruby-identifier">stop?</span>, <span class="ruby-value str">&quot;Thread 1 did not finish running&quot;</span>
793:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t2</span>.<span class="ruby-identifier">stop?</span>, <span class="ruby-value str">&quot;Thread 2 did not finish running&quot;</span>
794:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Paris'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
795:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-identifier">t1</span>[<span class="ruby-identifier">:time_zone</span>]
796:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-identifier">t2</span>[<span class="ruby-identifier">:time_zone</span>]
797:     <span class="ruby-keyword kw">end</span>
798:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005582" class="method">
  <div id="M005582_title" class="title">
    <b>test_time_zone_setter_with_non_identifying_argument_returns_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005582_source')" id="l_M005582_source">show source</a> ]</p>
  <div id="M005582_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 817</span>
817:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_non_identifying_argument_returns_nil</span>
818:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'foo'</span>
819:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
820:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value">-15</span>.<span class="ruby-identifier">hours</span>
821:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
822:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005581" class="method">
  <div id="M005581_title" class="title">
    <b>test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005581_source')" id="l_M005581_source">show source</a> ]</p>
  <div id="M005581_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 809</span>
809:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_tzinfo_timezone_identifier_does_lookup_and_wraps_in_rails_time_zone</span>
810:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'America/New_York'</span>
811:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
812:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">tzinfo</span>.<span class="ruby-identifier">name</span>
813:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">name</span>
814:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-18_000</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">utc_offset</span>)
815:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005580" class="method">
  <div id="M005580_title" class="title">
    <b>test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005580_source')" id="l_M005580_source">show source</a> ]</p>
  <div id="M005580_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 800</span>
800:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_zone_setter_with_tzinfo_timezone_object_wraps_in_rails_time_zone</span>
801:     <span class="ruby-identifier">tzinfo</span> = <span class="ruby-constant">TZInfo</span><span class="ruby-operator">::</span><span class="ruby-constant">Timezone</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">'America/New_York'</span>)
802:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-identifier">tzinfo</span>
803:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
804:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tzinfo</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">tzinfo</span>
805:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'America/New_York'</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">name</span>
806:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-18_000</span>, <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>.<span class="ruby-identifier">utc_offset</span>)
807:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005575" class="method">
  <div id="M005575_title" class="title">
    <b>test_use_zone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005575_source')" id="l_M005575_source">show source</a> ]</p>
  <div id="M005575_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 750</span>
750:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_use_zone</span>
751:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
752:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span> <span class="ruby-value str">'Hawaii'</span> <span class="ruby-keyword kw">do</span>
753:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Hawaii'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
754:     <span class="ruby-keyword kw">end</span>
755:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
756:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005576" class="method">
  <div id="M005576_title" class="title">
    <b>test_use_zone_with_exception_raised</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005576_source')" id="l_M005576_source">show source</a> ]</p>
  <div id="M005576_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_use_zone_with_exception_raised</span>
759:     <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span> = <span class="ruby-value str">'Alaska'</span>
760:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
761:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">use_zone</span>(<span class="ruby-value str">'Hawaii'</span>) { <span class="ruby-identifier">raise</span> <span class="ruby-constant">RuntimeError</span> }
762:     <span class="ruby-keyword kw">end</span>
763:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">TimeZone</span>[<span class="ruby-value str">'Alaska'</span>], <span class="ruby-constant">Time</span>.<span class="ruby-identifier">zone</span>
764:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005585" class="method">
  <div id="M005585_title" class="title">
    <b>with_env_tz</b>(new_tz = 'US/Eastern') {|| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005585_source')" id="l_M005585_source">show source</a> ]</p>
  <div id="M005585_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/core_ext/time_with_zone_test.rb, line 845</span>
845:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_env_tz</span>(<span class="ruby-identifier">new_tz</span> = <span class="ruby-value str">'US/Eastern'</span>)
846:       <span class="ruby-identifier">old_tz</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>], <span class="ruby-identifier">new_tz</span>
847:       <span class="ruby-keyword kw">yield</span>
848:     <span class="ruby-keyword kw">ensure</span>
849:       <span class="ruby-identifier">old_tz</span> <span class="ruby-value">? </span><span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-identifier">old_tz</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'TZ'</span>)
850:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>