  <div id="C00000792">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ChangeTableMigrationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/migration_test_rb.html');">activerecord/test/cases/migration_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005259&name=integer_column" >integer_column</a></li>
  <li><a href="index.html?a=M005246&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005258&name=string_column" >string_column</a></li>
  <li><a href="index.html?a=M005247&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005250&name=test_add_belongs_to_works_like_add_references" >test_add_belongs_to_works_like_add_references</a></li>
  <li><a href="index.html?a=M005266&name=test_change_changes_column" >test_change_changes_column</a></li>
  <li><a href="index.html?a=M005267&name=test_change_changes_column_with_options" >test_change_changes_column_with_options</a></li>
  <li><a href="index.html?a=M005268&name=test_change_default_changes_column" >test_change_default_changes_column</a></li>
  <li><a href="index.html?a=M005262&name=test_column_creates_column" >test_column_creates_column</a></li>
  <li><a href="index.html?a=M005263&name=test_column_creates_column_with_options" >test_column_creates_column_with_options</a></li>
  <li><a href="index.html?a=M005264&name=test_index_creates_index" >test_index_creates_index</a></li>
  <li><a href="index.html?a=M005265&name=test_index_creates_index_with_options" >test_index_creates_index_with_options</a></li>
  <li><a href="index.html?a=M005260&name=test_integer_creates_integer_column" >test_integer_creates_integer_column</a></li>
  <li><a href="index.html?a=M005248&name=test_references_column_type_adds_id" >test_references_column_type_adds_id</a></li>
  <li><a href="index.html?a=M005252&name=test_references_column_type_with_polymorphic_adds_type" >test_references_column_type_with_polymorphic_adds_type</a></li>
  <li><a href="index.html?a=M005254&name=test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag" >test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</a></li>
  <li><a href="index.html?a=M005251&name=test_remove_belongs_to_works_like_remove_references" >test_remove_belongs_to_works_like_remove_references</a></li>
  <li><a href="index.html?a=M005270&name=test_remove_drops_multiple_columns" >test_remove_drops_multiple_columns</a></li>
  <li><a href="index.html?a=M005269&name=test_remove_drops_single_column" >test_remove_drops_single_column</a></li>
  <li><a href="index.html?a=M005271&name=test_remove_index_removes_index_with_options" >test_remove_index_removes_index_with_options</a></li>
  <li><a href="index.html?a=M005249&name=test_remove_references_column_type_removes_id" >test_remove_references_column_type_removes_id</a></li>
  <li><a href="index.html?a=M005255&name=test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag" >test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</a></li>
  <li><a href="index.html?a=M005253&name=test_remove_references_column_type_with_polymorphic_removes_type" >test_remove_references_column_type_with_polymorphic_removes_type</a></li>
  <li><a href="index.html?a=M005257&name=test_remove_timestamps_creates_updated_at_and_created_at" >test_remove_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005272&name=test_rename_renames_column" >test_rename_renames_column</a></li>
  <li><a href="index.html?a=M005261&name=test_string_creates_string_column" >test_string_creates_string_column</a></li>
  <li><a href="index.html?a=M005256&name=test_timestamps_creates_updated_at_and_created_at" >test_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005273&name=with_change_table" >with_change_table</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005259" class="method">
  <div id="M005259_title" class="title">
    <b>integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005259_source')" id="l_M005259_source">show source</a> ]</p>
  <div id="M005259_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1414</span>
1414:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">integer_column</span>
1415:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:MysqlAdapter</span>)
1416:         <span class="ruby-value str">'int(11)'</span>
1417:       <span class="ruby-keyword kw">else</span>
1418:         <span class="ruby-value str">'integer'</span>
1419:       <span class="ruby-keyword kw">end</span>
1420:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005246" class="method">
  <div id="M005246_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005246_source')" id="l_M005246_source">show source</a> ]</p>
  <div id="M005246_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1322</span>
1322:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
1323:       <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>
1324:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1325:       <span class="ruby-keyword kw">end</span>
1326:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005258" class="method">
  <div id="M005258_title" class="title">
    <b>string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005258_source')" id="l_M005258_source">show source</a> ]</p>
  <div id="M005258_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1406</span>
1406:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">string_column</span>
1407:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:PostgreSQLAdapter</span>)
1408:         <span class="ruby-value str">&quot;character varying(255)&quot;</span>
1409:       <span class="ruby-keyword kw">else</span>
1410:         <span class="ruby-value str">'varchar(255)'</span>
1411:       <span class="ruby-keyword kw">end</span>
1412:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005247" class="method">
  <div id="M005247_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005247_source')" id="l_M005247_source">show source</a> ]</p>
  <div id="M005247_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1328</span>
1328:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
1329:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">drop_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1330:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005250" class="method">
  <div id="M005250_title" class="title">
    <b>test_add_belongs_to_works_like_add_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005250_source')" id="l_M005250_source">show source</a> ]</p>
  <div id="M005250_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1346</span>
1346:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_belongs_to_works_like_add_references</span>
1347:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1348:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1349:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">:customer</span>
1350:       <span class="ruby-keyword kw">end</span>
1351:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005266" class="method">
  <div id="M005266_title" class="title">
    <b>test_change_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005266_source')" id="l_M005266_source">show source</a> ]</p>
  <div id="M005266_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1466</span>
1466:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column</span>
1467:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1468:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {})
1469:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1470:       <span class="ruby-keyword kw">end</span>
1471:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005267" class="method">
  <div id="M005267_title" class="title">
    <b>test_change_changes_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005267_source')" id="l_M005267_source">show source</a> ]</p>
  <div id="M005267_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1473</span>
1473:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column_with_options</span>
1474:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1475:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1476:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1477:       <span class="ruby-keyword kw">end</span>
1478:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005268" class="method">
  <div id="M005268_title" class="title">
    <b>test_change_default_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005268_source')" id="l_M005268_source">show source</a> ]</p>
  <div id="M005268_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1480</span>
1480:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_default_changes_column</span>
1481:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1482:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column_default</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>)
1483:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change_default</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1484:       <span class="ruby-keyword kw">end</span>
1485:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005262" class="method">
  <div id="M005262_title" class="title">
    <b>test_column_creates_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005262_source')" id="l_M005262_source">show source</a> ]</p>
  <div id="M005262_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1438</span>
1438:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column</span>
1439:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1440:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {})
1441:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>
1442:       <span class="ruby-keyword kw">end</span>
1443:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005263" class="method">
  <div id="M005263_title" class="title">
    <b>test_column_creates_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005263_source')" id="l_M005263_source">show source</a> ]</p>
  <div id="M005263_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1445</span>
1445:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column_with_options</span>
1446:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1447:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1448:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1449:       <span class="ruby-keyword kw">end</span>
1450:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005264" class="method">
  <div id="M005264_title" class="title">
    <b>test_index_creates_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005264_source')" id="l_M005264_source">show source</a> ]</p>
  <div id="M005264_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1452</span>
1452:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index</span>
1453:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1454:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {})
1455:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>
1456:       <span class="ruby-keyword kw">end</span>
1457:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005265" class="method">
  <div id="M005265_title" class="title">
    <b>test_index_creates_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005265_source')" id="l_M005265_source">show source</a> ]</p>
  <div id="M005265_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1459</span>
1459:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index_with_options</span>
1460:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1461:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1462:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1463:       <span class="ruby-keyword kw">end</span>
1464:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005260" class="method">
  <div id="M005260_title" class="title">
    <b>test_integer_creates_integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005260_source')" id="l_M005260_source">show source</a> ]</p>
  <div id="M005260_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1422</span>
1422:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integer_creates_integer_column</span>
1423:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1424:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">integer_column</span>, {})
1425:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">integer_column</span>, {})
1426:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1427:       <span class="ruby-keyword kw">end</span>
1428:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005248" class="method">
  <div id="M005248_title" class="title">
    <b>test_references_column_type_adds_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005248_source')" id="l_M005248_source">show source</a> ]</p>
  <div id="M005248_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1332</span>
1332:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_adds_id</span>
1333:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1334:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1335:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:customer</span>
1336:       <span class="ruby-keyword kw">end</span>
1337:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005252" class="method">
  <div id="M005252_title" class="title">
    <b>test_references_column_type_with_polymorphic_adds_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005252_source')" id="l_M005252_source">show source</a> ]</p>
  <div id="M005252_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1360</span>
1360:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_adds_type</span>
1361:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1362:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {})
1363:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1364:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1365:       <span class="ruby-keyword kw">end</span>
1366:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005254" class="method">
  <div id="M005254_title" class="title">
    <b>test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005254_source')" id="l_M005254_source">show source</a> ]</p>
  <div id="M005254_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1376</span>
1376:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</span>
1377:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1378:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1379:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1380:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1381:       <span class="ruby-keyword kw">end</span>
1382:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005251" class="method">
  <div id="M005251_title" class="title">
    <b>test_remove_belongs_to_works_like_remove_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005251_source')" id="l_M005251_source">show source</a> ]</p>
  <div id="M005251_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1353</span>
1353:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_belongs_to_works_like_remove_references</span>
1354:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1355:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1356:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_belongs_to</span> <span class="ruby-identifier">:customer</span>
1357:       <span class="ruby-keyword kw">end</span>
1358:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005270" class="method">
  <div id="M005270_title" class="title">
    <b>test_remove_drops_multiple_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005270_source')" id="l_M005270_source">show source</a> ]</p>
  <div id="M005270_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1494</span>
1494:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_multiple_columns</span>
1495:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1496:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>])
1497:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1498:       <span class="ruby-keyword kw">end</span>
1499:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005269" class="method">
  <div id="M005269_title" class="title">
    <b>test_remove_drops_single_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005269_source')" id="l_M005269_source">show source</a> ]</p>
  <div id="M005269_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1487</span>
1487:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_single_column</span>
1488:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1489:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>])
1490:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>
1491:       <span class="ruby-keyword kw">end</span>
1492:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005271" class="method">
  <div id="M005271_title" class="title">
    <b>test_remove_index_removes_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005271_source')" id="l_M005271_source">show source</a> ]</p>
  <div id="M005271_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1501</span>
1501:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_index_removes_index_with_options</span>
1502:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1503:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1504:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_index</span> <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1505:       <span class="ruby-keyword kw">end</span>
1506:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005249" class="method">
  <div id="M005249_title" class="title">
    <b>test_remove_references_column_type_removes_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005249_source')" id="l_M005249_source">show source</a> ]</p>
  <div id="M005249_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1339</span>
1339:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_removes_id</span>
1340:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1341:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1342:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:customer</span>
1343:       <span class="ruby-keyword kw">end</span>
1344:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005255" class="method">
  <div id="M005255_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005255_source')" id="l_M005255_source">show source</a> ]</p>
  <div id="M005255_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1384</span>
1384:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</span>
1385:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1386:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1387:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1388:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1389:       <span class="ruby-keyword kw">end</span>
1390:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005253" class="method">
  <div id="M005253_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_removes_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005253_source')" id="l_M005253_source">show source</a> ]</p>
  <div id="M005253_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1368</span>
1368:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_removes_type</span>
1369:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1370:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1371:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1372:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1373:       <span class="ruby-keyword kw">end</span>
1374:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005257" class="method">
  <div id="M005257_title" class="title">
    <b>test_remove_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005257_source')" id="l_M005257_source">show source</a> ]</p>
  <div id="M005257_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1399</span>
1399:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_timestamps_creates_updated_at_and_created_at</span>
1400:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1401:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1402:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_timestamps</span>
1403:       <span class="ruby-keyword kw">end</span>
1404:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005272" class="method">
  <div id="M005272_title" class="title">
    <b>test_rename_renames_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005272_source')" id="l_M005272_source">show source</a> ]</p>
  <div id="M005272_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1508</span>
1508:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_rename_renames_column</span>
1509:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1510:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:rename_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>)
1511:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1512:       <span class="ruby-keyword kw">end</span>
1513:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005261" class="method">
  <div id="M005261_title" class="title">
    <b>test_string_creates_string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005261_source')" id="l_M005261_source">show source</a> ]</p>
  <div id="M005261_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1430</span>
1430:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_creates_string_column</span>
1431:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1432:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">string_column</span>, {})
1433:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">string_column</span>, {})
1434:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1435:       <span class="ruby-keyword kw">end</span>
1436:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005256" class="method">
  <div id="M005256_title" class="title">
    <b>test_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005256_source')" id="l_M005256_source">show source</a> ]</p>
  <div id="M005256_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1392</span>
1392:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_timestamps_creates_updated_at_and_created_at</span>
1393:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1394:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1395:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
1396:       <span class="ruby-keyword kw">end</span>
1397:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005273" class="method">
  <div id="M005273_title" class="title">
    <b>with_change_table</b>() {|t| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005273_source')" id="l_M005273_source">show source</a> ]</p>
  <div id="M005273_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1516</span>
1516:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_change_table</span>
1517:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">change_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1518:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">t</span>
1519:       <span class="ruby-keyword kw">end</span>
1520:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>