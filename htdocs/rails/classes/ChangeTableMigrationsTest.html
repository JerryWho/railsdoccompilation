  <div id="C00000802">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ChangeTableMigrationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/migration_test_rb.html');">activerecord/test/cases/migration_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005297&name=integer_column" >integer_column</a></li>
  <li><a href="index.html?a=M005284&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005296&name=string_column" >string_column</a></li>
  <li><a href="index.html?a=M005285&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005288&name=test_add_belongs_to_works_like_add_references" >test_add_belongs_to_works_like_add_references</a></li>
  <li><a href="index.html?a=M005304&name=test_change_changes_column" >test_change_changes_column</a></li>
  <li><a href="index.html?a=M005305&name=test_change_changes_column_with_options" >test_change_changes_column_with_options</a></li>
  <li><a href="index.html?a=M005306&name=test_change_default_changes_column" >test_change_default_changes_column</a></li>
  <li><a href="index.html?a=M005300&name=test_column_creates_column" >test_column_creates_column</a></li>
  <li><a href="index.html?a=M005301&name=test_column_creates_column_with_options" >test_column_creates_column_with_options</a></li>
  <li><a href="index.html?a=M005302&name=test_index_creates_index" >test_index_creates_index</a></li>
  <li><a href="index.html?a=M005303&name=test_index_creates_index_with_options" >test_index_creates_index_with_options</a></li>
  <li><a href="index.html?a=M005298&name=test_integer_creates_integer_column" >test_integer_creates_integer_column</a></li>
  <li><a href="index.html?a=M005286&name=test_references_column_type_adds_id" >test_references_column_type_adds_id</a></li>
  <li><a href="index.html?a=M005290&name=test_references_column_type_with_polymorphic_adds_type" >test_references_column_type_with_polymorphic_adds_type</a></li>
  <li><a href="index.html?a=M005292&name=test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag" >test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</a></li>
  <li><a href="index.html?a=M005289&name=test_remove_belongs_to_works_like_remove_references" >test_remove_belongs_to_works_like_remove_references</a></li>
  <li><a href="index.html?a=M005308&name=test_remove_drops_multiple_columns" >test_remove_drops_multiple_columns</a></li>
  <li><a href="index.html?a=M005307&name=test_remove_drops_single_column" >test_remove_drops_single_column</a></li>
  <li><a href="index.html?a=M005309&name=test_remove_index_removes_index_with_options" >test_remove_index_removes_index_with_options</a></li>
  <li><a href="index.html?a=M005287&name=test_remove_references_column_type_removes_id" >test_remove_references_column_type_removes_id</a></li>
  <li><a href="index.html?a=M005293&name=test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag" >test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</a></li>
  <li><a href="index.html?a=M005291&name=test_remove_references_column_type_with_polymorphic_removes_type" >test_remove_references_column_type_with_polymorphic_removes_type</a></li>
  <li><a href="index.html?a=M005295&name=test_remove_timestamps_creates_updated_at_and_created_at" >test_remove_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005310&name=test_rename_renames_column" >test_rename_renames_column</a></li>
  <li><a href="index.html?a=M005299&name=test_string_creates_string_column" >test_string_creates_string_column</a></li>
  <li><a href="index.html?a=M005294&name=test_timestamps_creates_updated_at_and_created_at" >test_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005311&name=with_change_table" >with_change_table</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005297" class="method">
  <div id="M005297_title" class="title">
    <b>integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005297_source')" id="l_M005297_source">show source</a> ]</p>
  <div id="M005297_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1414</span>
1414:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">integer_column</span>
1415:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:MysqlAdapter</span>)
1416:         <span class="ruby-value str">'int(11)'</span>
1417:       <span class="ruby-keyword kw">else</span>
1418:         <span class="ruby-value str">'integer'</span>
1419:       <span class="ruby-keyword kw">end</span>
1420:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005284" class="method">
  <div id="M005284_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005284_source')" id="l_M005284_source">show source</a> ]</p>
  <div id="M005284_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1322</span>
1322:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
1323:       <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>
1324:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1325:       <span class="ruby-keyword kw">end</span>
1326:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005296" class="method">
  <div id="M005296_title" class="title">
    <b>string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005296_source')" id="l_M005296_source">show source</a> ]</p>
  <div id="M005296_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1406</span>
1406:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">string_column</span>
1407:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:PostgreSQLAdapter</span>)
1408:         <span class="ruby-value str">&quot;character varying(255)&quot;</span>
1409:       <span class="ruby-keyword kw">else</span>
1410:         <span class="ruby-value str">'varchar(255)'</span>
1411:       <span class="ruby-keyword kw">end</span>
1412:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005285" class="method">
  <div id="M005285_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005285_source')" id="l_M005285_source">show source</a> ]</p>
  <div id="M005285_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1328</span>
1328:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
1329:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">drop_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1330:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005288" class="method">
  <div id="M005288_title" class="title">
    <b>test_add_belongs_to_works_like_add_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005288_source')" id="l_M005288_source">show source</a> ]</p>
  <div id="M005288_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1346</span>
1346:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_belongs_to_works_like_add_references</span>
1347:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1348:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1349:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">:customer</span>
1350:       <span class="ruby-keyword kw">end</span>
1351:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005304" class="method">
  <div id="M005304_title" class="title">
    <b>test_change_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005304_source')" id="l_M005304_source">show source</a> ]</p>
  <div id="M005304_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1466</span>
1466:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column</span>
1467:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1468:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {})
1469:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1470:       <span class="ruby-keyword kw">end</span>
1471:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005305" class="method">
  <div id="M005305_title" class="title">
    <b>test_change_changes_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005305_source')" id="l_M005305_source">show source</a> ]</p>
  <div id="M005305_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1473</span>
1473:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column_with_options</span>
1474:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1475:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1476:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1477:       <span class="ruby-keyword kw">end</span>
1478:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005306" class="method">
  <div id="M005306_title" class="title">
    <b>test_change_default_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005306_source')" id="l_M005306_source">show source</a> ]</p>
  <div id="M005306_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1480</span>
1480:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_default_changes_column</span>
1481:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1482:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column_default</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>)
1483:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change_default</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1484:       <span class="ruby-keyword kw">end</span>
1485:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005300" class="method">
  <div id="M005300_title" class="title">
    <b>test_column_creates_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005300_source')" id="l_M005300_source">show source</a> ]</p>
  <div id="M005300_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1438</span>
1438:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column</span>
1439:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1440:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {})
1441:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>
1442:       <span class="ruby-keyword kw">end</span>
1443:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005301" class="method">
  <div id="M005301_title" class="title">
    <b>test_column_creates_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005301_source')" id="l_M005301_source">show source</a> ]</p>
  <div id="M005301_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1445</span>
1445:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column_with_options</span>
1446:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1447:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1448:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1449:       <span class="ruby-keyword kw">end</span>
1450:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005302" class="method">
  <div id="M005302_title" class="title">
    <b>test_index_creates_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005302_source')" id="l_M005302_source">show source</a> ]</p>
  <div id="M005302_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1452</span>
1452:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index</span>
1453:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1454:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {})
1455:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>
1456:       <span class="ruby-keyword kw">end</span>
1457:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005303" class="method">
  <div id="M005303_title" class="title">
    <b>test_index_creates_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005303_source')" id="l_M005303_source">show source</a> ]</p>
  <div id="M005303_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1459</span>
1459:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index_with_options</span>
1460:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1461:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1462:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1463:       <span class="ruby-keyword kw">end</span>
1464:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005298" class="method">
  <div id="M005298_title" class="title">
    <b>test_integer_creates_integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005298_source')" id="l_M005298_source">show source</a> ]</p>
  <div id="M005298_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1422</span>
1422:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integer_creates_integer_column</span>
1423:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1424:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">integer_column</span>, {})
1425:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">integer_column</span>, {})
1426:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1427:       <span class="ruby-keyword kw">end</span>
1428:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005286" class="method">
  <div id="M005286_title" class="title">
    <b>test_references_column_type_adds_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005286_source')" id="l_M005286_source">show source</a> ]</p>
  <div id="M005286_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1332</span>
1332:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_adds_id</span>
1333:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1334:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1335:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:customer</span>
1336:       <span class="ruby-keyword kw">end</span>
1337:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005290" class="method">
  <div id="M005290_title" class="title">
    <b>test_references_column_type_with_polymorphic_adds_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005290_source')" id="l_M005290_source">show source</a> ]</p>
  <div id="M005290_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1360</span>
1360:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_adds_type</span>
1361:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1362:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {})
1363:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1364:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1365:       <span class="ruby-keyword kw">end</span>
1366:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005292" class="method">
  <div id="M005292_title" class="title">
    <b>test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005292_source')" id="l_M005292_source">show source</a> ]</p>
  <div id="M005292_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1376</span>
1376:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</span>
1377:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1378:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1379:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1380:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1381:       <span class="ruby-keyword kw">end</span>
1382:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005289" class="method">
  <div id="M005289_title" class="title">
    <b>test_remove_belongs_to_works_like_remove_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005289_source')" id="l_M005289_source">show source</a> ]</p>
  <div id="M005289_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1353</span>
1353:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_belongs_to_works_like_remove_references</span>
1354:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1355:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1356:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_belongs_to</span> <span class="ruby-identifier">:customer</span>
1357:       <span class="ruby-keyword kw">end</span>
1358:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005308" class="method">
  <div id="M005308_title" class="title">
    <b>test_remove_drops_multiple_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005308_source')" id="l_M005308_source">show source</a> ]</p>
  <div id="M005308_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1494</span>
1494:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_multiple_columns</span>
1495:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1496:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>])
1497:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1498:       <span class="ruby-keyword kw">end</span>
1499:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005307" class="method">
  <div id="M005307_title" class="title">
    <b>test_remove_drops_single_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005307_source')" id="l_M005307_source">show source</a> ]</p>
  <div id="M005307_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1487</span>
1487:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_single_column</span>
1488:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1489:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>])
1490:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>
1491:       <span class="ruby-keyword kw">end</span>
1492:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005309" class="method">
  <div id="M005309_title" class="title">
    <b>test_remove_index_removes_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005309_source')" id="l_M005309_source">show source</a> ]</p>
  <div id="M005309_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1501</span>
1501:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_index_removes_index_with_options</span>
1502:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1503:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1504:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_index</span> <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1505:       <span class="ruby-keyword kw">end</span>
1506:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005287" class="method">
  <div id="M005287_title" class="title">
    <b>test_remove_references_column_type_removes_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005287_source')" id="l_M005287_source">show source</a> ]</p>
  <div id="M005287_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1339</span>
1339:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_removes_id</span>
1340:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1341:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1342:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:customer</span>
1343:       <span class="ruby-keyword kw">end</span>
1344:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005293" class="method">
  <div id="M005293_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005293_source')" id="l_M005293_source">show source</a> ]</p>
  <div id="M005293_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1384</span>
1384:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</span>
1385:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1386:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1387:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1388:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1389:       <span class="ruby-keyword kw">end</span>
1390:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005291" class="method">
  <div id="M005291_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_removes_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005291_source')" id="l_M005291_source">show source</a> ]</p>
  <div id="M005291_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1368</span>
1368:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_removes_type</span>
1369:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1370:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1371:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1372:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1373:       <span class="ruby-keyword kw">end</span>
1374:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005295" class="method">
  <div id="M005295_title" class="title">
    <b>test_remove_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005295_source')" id="l_M005295_source">show source</a> ]</p>
  <div id="M005295_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1399</span>
1399:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_timestamps_creates_updated_at_and_created_at</span>
1400:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1401:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1402:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_timestamps</span>
1403:       <span class="ruby-keyword kw">end</span>
1404:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005310" class="method">
  <div id="M005310_title" class="title">
    <b>test_rename_renames_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005310_source')" id="l_M005310_source">show source</a> ]</p>
  <div id="M005310_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1508</span>
1508:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_rename_renames_column</span>
1509:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1510:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:rename_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>)
1511:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1512:       <span class="ruby-keyword kw">end</span>
1513:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005299" class="method">
  <div id="M005299_title" class="title">
    <b>test_string_creates_string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005299_source')" id="l_M005299_source">show source</a> ]</p>
  <div id="M005299_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1430</span>
1430:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_creates_string_column</span>
1431:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1432:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">string_column</span>, {})
1433:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">string_column</span>, {})
1434:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1435:       <span class="ruby-keyword kw">end</span>
1436:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005294" class="method">
  <div id="M005294_title" class="title">
    <b>test_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005294_source')" id="l_M005294_source">show source</a> ]</p>
  <div id="M005294_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1392</span>
1392:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_timestamps_creates_updated_at_and_created_at</span>
1393:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1394:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1395:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
1396:       <span class="ruby-keyword kw">end</span>
1397:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005311" class="method">
  <div id="M005311_title" class="title">
    <b>with_change_table</b>() {|t| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005311_source')" id="l_M005311_source">show source</a> ]</p>
  <div id="M005311_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1516</span>
1516:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_change_table</span>
1517:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">change_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1518:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">t</span>
1519:       <span class="ruby-keyword kw">end</span>
1520:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>