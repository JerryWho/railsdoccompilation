  <div id="C00000737">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ChangeTableMigrationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/migration_test_rb.html');">activerecord/test/cases/migration_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005313&name=integer_column" >integer_column</a></li>
  <li><a href="index.html?a=M005300&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005312&name=string_column" >string_column</a></li>
  <li><a href="index.html?a=M005301&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005304&name=test_add_belongs_to_works_like_add_references" >test_add_belongs_to_works_like_add_references</a></li>
  <li><a href="index.html?a=M005320&name=test_change_changes_column" >test_change_changes_column</a></li>
  <li><a href="index.html?a=M005321&name=test_change_changes_column_with_options" >test_change_changes_column_with_options</a></li>
  <li><a href="index.html?a=M005322&name=test_change_default_changes_column" >test_change_default_changes_column</a></li>
  <li><a href="index.html?a=M005316&name=test_column_creates_column" >test_column_creates_column</a></li>
  <li><a href="index.html?a=M005317&name=test_column_creates_column_with_options" >test_column_creates_column_with_options</a></li>
  <li><a href="index.html?a=M005318&name=test_index_creates_index" >test_index_creates_index</a></li>
  <li><a href="index.html?a=M005319&name=test_index_creates_index_with_options" >test_index_creates_index_with_options</a></li>
  <li><a href="index.html?a=M005314&name=test_integer_creates_integer_column" >test_integer_creates_integer_column</a></li>
  <li><a href="index.html?a=M005302&name=test_references_column_type_adds_id" >test_references_column_type_adds_id</a></li>
  <li><a href="index.html?a=M005306&name=test_references_column_type_with_polymorphic_adds_type" >test_references_column_type_with_polymorphic_adds_type</a></li>
  <li><a href="index.html?a=M005308&name=test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag" >test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</a></li>
  <li><a href="index.html?a=M005305&name=test_remove_belongs_to_works_like_remove_references" >test_remove_belongs_to_works_like_remove_references</a></li>
  <li><a href="index.html?a=M005324&name=test_remove_drops_multiple_columns" >test_remove_drops_multiple_columns</a></li>
  <li><a href="index.html?a=M005323&name=test_remove_drops_single_column" >test_remove_drops_single_column</a></li>
  <li><a href="index.html?a=M005325&name=test_remove_index_removes_index_with_options" >test_remove_index_removes_index_with_options</a></li>
  <li><a href="index.html?a=M005303&name=test_remove_references_column_type_removes_id" >test_remove_references_column_type_removes_id</a></li>
  <li><a href="index.html?a=M005309&name=test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag" >test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</a></li>
  <li><a href="index.html?a=M005307&name=test_remove_references_column_type_with_polymorphic_removes_type" >test_remove_references_column_type_with_polymorphic_removes_type</a></li>
  <li><a href="index.html?a=M005311&name=test_remove_timestamps_creates_updated_at_and_created_at" >test_remove_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005326&name=test_rename_renames_column" >test_rename_renames_column</a></li>
  <li><a href="index.html?a=M005315&name=test_string_creates_string_column" >test_string_creates_string_column</a></li>
  <li><a href="index.html?a=M005310&name=test_timestamps_creates_updated_at_and_created_at" >test_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005327&name=with_change_table" >with_change_table</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005313" class="method">
  <div id="M005313_title" class="title">
    <b>integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005313_source')" id="l_M005313_source">show source</a> ]</p>
  <div id="M005313_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1529</span>
1529:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">integer_column</span>
1530:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:MysqlAdapter</span>)
1531:         <span class="ruby-value str">'int(11)'</span>
1532:       <span class="ruby-keyword kw">else</span>
1533:         <span class="ruby-value str">'integer'</span>
1534:       <span class="ruby-keyword kw">end</span>
1535:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005300" class="method">
  <div id="M005300_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005300_source')" id="l_M005300_source">show source</a> ]</p>
  <div id="M005300_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1437</span>
1437:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
1438:       <span class="ruby-ivar">@connection</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>
1439:       <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1440:       <span class="ruby-keyword kw">end</span>
1441:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005312" class="method">
  <div id="M005312_title" class="title">
    <b>string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005312_source')" id="l_M005312_source">show source</a> ]</p>
  <div id="M005312_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1521</span>
1521:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">string_column</span>
1522:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:PostgreSQLAdapter</span>)
1523:         <span class="ruby-value str">&quot;character varying(255)&quot;</span>
1524:       <span class="ruby-keyword kw">else</span>
1525:         <span class="ruby-value str">'varchar(255)'</span>
1526:       <span class="ruby-keyword kw">end</span>
1527:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005301" class="method">
  <div id="M005301_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005301_source')" id="l_M005301_source">show source</a> ]</p>
  <div id="M005301_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1443</span>
1443:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
1444:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">drop_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1445:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005304" class="method">
  <div id="M005304_title" class="title">
    <b>test_add_belongs_to_works_like_add_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005304_source')" id="l_M005304_source">show source</a> ]</p>
  <div id="M005304_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1461</span>
1461:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_belongs_to_works_like_add_references</span>
1462:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1463:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1464:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">:customer</span>
1465:       <span class="ruby-keyword kw">end</span>
1466:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005320" class="method">
  <div id="M005320_title" class="title">
    <b>test_change_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005320_source')" id="l_M005320_source">show source</a> ]</p>
  <div id="M005320_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1581</span>
1581:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column</span>
1582:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1583:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {})
1584:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1585:       <span class="ruby-keyword kw">end</span>
1586:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005321" class="method">
  <div id="M005321_title" class="title">
    <b>test_change_changes_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005321_source')" id="l_M005321_source">show source</a> ]</p>
  <div id="M005321_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1588</span>
1588:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_changes_column_with_options</span>
1589:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1590:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1591:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1592:       <span class="ruby-keyword kw">end</span>
1593:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005322" class="method">
  <div id="M005322_title" class="title">
    <b>test_change_default_changes_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005322_source')" id="l_M005322_source">show source</a> ]</p>
  <div id="M005322_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1595</span>
1595:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_default_changes_column</span>
1596:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1597:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:change_column_default</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>)
1598:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">change_default</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:string</span>
1599:       <span class="ruby-keyword kw">end</span>
1600:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005316" class="method">
  <div id="M005316_title" class="title">
    <b>test_column_creates_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005316_source')" id="l_M005316_source">show source</a> ]</p>
  <div id="M005316_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1553</span>
1553:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column</span>
1554:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1555:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {})
1556:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>
1557:       <span class="ruby-keyword kw">end</span>
1558:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005317" class="method">
  <div id="M005317_title" class="title">
    <b>test_column_creates_column_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005317_source')" id="l_M005317_source">show source</a> ]</p>
  <div id="M005317_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1560</span>
1560:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_column_creates_column_with_options</span>
1561:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1562:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1563:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">column</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:integer</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1564:       <span class="ruby-keyword kw">end</span>
1565:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005318" class="method">
  <div id="M005318_title" class="title">
    <b>test_index_creates_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005318_source')" id="l_M005318_source">show source</a> ]</p>
  <div id="M005318_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1567</span>
1567:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index</span>
1568:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1569:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {})
1570:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>
1571:       <span class="ruby-keyword kw">end</span>
1572:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005319" class="method">
  <div id="M005319_title" class="title">
    <b>test_index_creates_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005319_source')" id="l_M005319_source">show source</a> ]</p>
  <div id="M005319_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1574</span>
1574:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_index_creates_index_with_options</span>
1575:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1576:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1577:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">index</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1578:       <span class="ruby-keyword kw">end</span>
1579:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005314" class="method">
  <div id="M005314_title" class="title">
    <b>test_integer_creates_integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005314_source')" id="l_M005314_source">show source</a> ]</p>
  <div id="M005314_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1537</span>
1537:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integer_creates_integer_column</span>
1538:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1539:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">integer_column</span>, {})
1540:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">integer_column</span>, {})
1541:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1542:       <span class="ruby-keyword kw">end</span>
1543:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005302" class="method">
  <div id="M005302_title" class="title">
    <b>test_references_column_type_adds_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005302_source')" id="l_M005302_source">show source</a> ]</p>
  <div id="M005302_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1447</span>
1447:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_adds_id</span>
1448:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1449:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1450:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:customer</span>
1451:       <span class="ruby-keyword kw">end</span>
1452:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005306" class="method">
  <div id="M005306_title" class="title">
    <b>test_references_column_type_with_polymorphic_adds_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005306_source')" id="l_M005306_source">show source</a> ]</p>
  <div id="M005306_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1475</span>
1475:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_adds_type</span>
1476:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1477:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {})
1478:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1479:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1480:       <span class="ruby-keyword kw">end</span>
1481:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005308" class="method">
  <div id="M005308_title" class="title">
    <b>test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005308_source')" id="l_M005308_source">show source</a> ]</p>
  <div id="M005308_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1491</span>
1491:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</span>
1492:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1493:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1494:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1495:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1496:       <span class="ruby-keyword kw">end</span>
1497:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005305" class="method">
  <div id="M005305_title" class="title">
    <b>test_remove_belongs_to_works_like_remove_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005305_source')" id="l_M005305_source">show source</a> ]</p>
  <div id="M005305_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1468</span>
1468:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_belongs_to_works_like_remove_references</span>
1469:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1470:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1471:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_belongs_to</span> <span class="ruby-identifier">:customer</span>
1472:       <span class="ruby-keyword kw">end</span>
1473:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005324" class="method">
  <div id="M005324_title" class="title">
    <b>test_remove_drops_multiple_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005324_source')" id="l_M005324_source">show source</a> ]</p>
  <div id="M005324_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1609</span>
1609:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_multiple_columns</span>
1610:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1611:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>])
1612:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1613:       <span class="ruby-keyword kw">end</span>
1614:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005323" class="method">
  <div id="M005323_title" class="title">
    <b>test_remove_drops_single_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005323_source')" id="l_M005323_source">show source</a> ]</p>
  <div id="M005323_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1602</span>
1602:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_drops_single_column</span>
1603:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1604:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, [<span class="ruby-identifier">:bar</span>])
1605:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove</span> <span class="ruby-identifier">:bar</span>
1606:       <span class="ruby-keyword kw">end</span>
1607:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005325" class="method">
  <div id="M005325_title" class="title">
    <b>test_remove_index_removes_index_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005325_source')" id="l_M005325_source">show source</a> ]</p>
  <div id="M005325_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1616</span>
1616:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_index_removes_index_with_options</span>
1617:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1618:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_index</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, {<span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})
1619:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_index</span> <span class="ruby-identifier">:unique</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1620:       <span class="ruby-keyword kw">end</span>
1621:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005303" class="method">
  <div id="M005303_title" class="title">
    <b>test_remove_references_column_type_removes_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005303_source')" id="l_M005303_source">show source</a> ]</p>
  <div id="M005303_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1454</span>
1454:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_removes_id</span>
1455:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1456:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'customer_id'</span>)
1457:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:customer</span>
1458:       <span class="ruby-keyword kw">end</span>
1459:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005309" class="method">
  <div id="M005309_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005309_source')" id="l_M005309_source">show source</a> ]</p>
  <div id="M005309_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1499</span>
1499:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_and_options_null_is_false_removes_table_flag</span>
1500:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1501:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1502:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1503:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1504:       <span class="ruby-keyword kw">end</span>
1505:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005307" class="method">
  <div id="M005307_title" class="title">
    <b>test_remove_references_column_type_with_polymorphic_removes_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005307_source')" id="l_M005307_source">show source</a> ]</p>
  <div id="M005307_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1483</span>
1483:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_references_column_type_with_polymorphic_removes_type</span>
1484:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1485:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_type'</span>)
1486:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-value str">'taggable_id'</span>)
1487:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1488:       <span class="ruby-keyword kw">end</span>
1489:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005311" class="method">
  <div id="M005311_title" class="title">
    <b>test_remove_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005311_source')" id="l_M005311_source">show source</a> ]</p>
  <div id="M005311_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1514</span>
1514:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_timestamps_creates_updated_at_and_created_at</span>
1515:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1516:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:remove_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1517:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">remove_timestamps</span>
1518:       <span class="ruby-keyword kw">end</span>
1519:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005326" class="method">
  <div id="M005326_title" class="title">
    <b>test_rename_renames_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005326_source')" id="l_M005326_source">show source</a> ]</p>
  <div id="M005326_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1623</span>
1623:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_rename_renames_column</span>
1624:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1625:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:rename_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>)
1626:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">rename</span> <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">:baz</span>
1627:       <span class="ruby-keyword kw">end</span>
1628:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005315" class="method">
  <div id="M005315_title" class="title">
    <b>test_string_creates_string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005315_source')" id="l_M005315_source">show source</a> ]</p>
  <div id="M005315_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1545</span>
1545:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_creates_string_column</span>
1546:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1547:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">string_column</span>, {})
1548:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:bar</span>, <span class="ruby-identifier">string_column</span>, {})
1549:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1550:       <span class="ruby-keyword kw">end</span>
1551:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005310" class="method">
  <div id="M005310_title" class="title">
    <b>test_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005310_source')" id="l_M005310_source">show source</a> ]</p>
  <div id="M005310_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1507</span>
1507:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_timestamps_creates_updated_at_and_created_at</span>
1508:       <span class="ruby-identifier">with_change_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1509:         <span class="ruby-ivar">@connection</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:add_timestamps</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:delete_me</span>)
1510:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
1511:       <span class="ruby-keyword kw">end</span>
1512:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005327" class="method">
  <div id="M005327_title" class="title">
    <b>with_change_table</b>() {|t| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005327_source')" id="l_M005327_source">show source</a> ]</p>
  <div id="M005327_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1631</span>
1631:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_change_table</span>
1632:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">change_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1633:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">t</span>
1634:       <span class="ruby-keyword kw">end</span>
1635:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>