  <div id="C00000336">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />MemCacheStoreTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/session/mem_cache_store_test_rb.html');">actionpack/test/controller/session/mem_cache_store_test.rb</a>
<a href="#" onclick="jsHref('files/activesupport/test/caching_test_rb.html');">activesupport/test/caching_test.rb</a>

Parent:&nbsp;
ActionController::IntegrationTest
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
You need to start a memcached server inorder to run these tests
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001950&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001956&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001961&name=test_clear_also_clears_local_cache" >test_clear_also_clears_local_cache</a></li>
  <li><a href="index.html?a=M001968&name=test_exist_with_nulls_cached_locally" >test_exist_with_nulls_cached_locally</a></li>
  <li><a href="index.html?a=M001971&name=test_expires_in" >test_expires_in</a></li>
  <li><a href="index.html?a=M001972&name=test_expires_in_with_invalid_value" >test_expires_in_with_invalid_value</a></li>
  <li><a href="index.html?a=M001952&name=test_getting_nil_session_value" >test_getting_nil_session_value</a></li>
  <li><a href="index.html?a=M001954&name=test_getting_session_id" >test_getting_session_id</a></li>
  <li><a href="index.html?a=M001967&name=test_local_cache_of_decrement" >test_local_cache_of_decrement</a></li>
  <li><a href="index.html?a=M001964&name=test_local_cache_of_delete" >test_local_cache_of_delete</a></li>
  <li><a href="index.html?a=M001965&name=test_local_cache_of_exist" >test_local_cache_of_exist</a></li>
  <li><a href="index.html?a=M001966&name=test_local_cache_of_increment" >test_local_cache_of_increment</a></li>
  <li><a href="index.html?a=M001962&name=test_local_cache_of_read_and_write" >test_local_cache_of_read_and_write</a></li>
  <li><a href="index.html?a=M001963&name=test_local_cache_should_read_and_write_integer" >test_local_cache_should_read_and_write_integer</a></li>
  <li><a href="index.html?a=M001960&name=test_local_writes_are_persistent_on_the_remote_cache" >test_local_writes_are_persistent_on_the_remote_cache</a></li>
  <li><a href="index.html?a=M001970&name=test_middleware" >test_middleware</a></li>
  <li><a href="index.html?a=M001969&name=test_multi_get" >test_multi_get</a></li>
  <li><a href="index.html?a=M001955&name=test_prevents_session_fixation" >test_prevents_session_fixation</a></li>
  <li><a href="index.html?a=M001951&name=test_setting_and_getting_session_value" >test_setting_and_getting_session_value</a></li>
  <li><a href="index.html?a=M001953&name=test_setting_session_value_after_session_reset" >test_setting_session_value_after_session_reset</a></li>
  <li><a href="index.html?a=M001957&name=test_store_objects_should_be_immutable" >test_store_objects_should_be_immutable</a></li>
  <li><a href="index.html?a=M001958&name=test_stored_objects_should_not_be_frozen" >test_stored_objects_should_not_be_frozen</a></li>
  <li><a href="index.html?a=M001959&name=test_write_should_return_true_on_success" >test_write_should_return_true_on_success</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/CacheStoreBehavior.html');">CacheStoreBehavior</a></li>
</ul>


  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/MemCacheStoreTest/TestController.html');" class="link">MemCacheStoreTest::TestController</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">DispatcherApp</td>
    <td>=</td>
    <td class="attr-value">ActionController::Dispatcher.new</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MemCacheStoreApp</td>
    <td>=</td>
    <td class="attr-value">ActionController::Session::MemCacheStore.new(                          DispatcherApp, :key =&gt; '_session_id')</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M001950" class="method">
  <div id="M001950_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001950_source')" id="l_M001950_source">show source</a> ]</p>
  <div id="M001950_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 40</span>
40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
41:       <span class="ruby-ivar">@integration_session</span> = <span class="ruby-identifier">open_session</span>(<span class="ruby-constant">MemCacheStoreApp</span>)
42:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001956" class="method">
  <div id="M001956_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001956_source')" id="l_M001956_source">show source</a> ]</p>
  <div id="M001956_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 175</span>
175:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
176:       <span class="ruby-ivar">@cache</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Cache</span>.<span class="ruby-identifier">lookup_store</span>(<span class="ruby-identifier">:mem_cache_store</span>)
177:       <span class="ruby-ivar">@data</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">:@data</span>)
178:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">clear</span>
179:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">silence!</span>
180:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;/dev/null&quot;</span>)
181:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001961" class="method">
  <div id="M001961_title" class="title">
    <b>test_clear_also_clears_local_cache</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001961_source')" id="l_M001961_source">show source</a> ]</p>
  <div id="M001961_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 218</span>
218:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_also_clears_local_cache</span>
219:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
220:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
221:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">clear</span>
222:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
223:       <span class="ruby-keyword kw">end</span>
224:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001968" class="method">
  <div id="M001968_title" class="title">
    <b>test_exist_with_nulls_cached_locally</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001968_source')" id="l_M001968_source">show source</a> ]</p>
  <div id="M001968_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 277</span>
277:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exist_with_nulls_cached_locally</span>
278:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
279:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
280:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'foo'</span>)
281:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'foo'</span>)
282:       <span class="ruby-keyword kw">end</span>
283:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001971" class="method">
  <div id="M001971_title" class="title">
    <b>test_expires_in</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001971_source')" id="l_M001971_source">show source</a> ]</p>
  <div id="M001971_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 304</span>
304:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expires_in</span>
305:       <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:expires_in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
306:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
307:       <span class="ruby-identifier">sleep</span> <span class="ruby-value">2</span>
308:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
309:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001972" class="method">
  <div id="M001972_title" class="title">
    <b>test_expires_in_with_invalid_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001972_source')" id="l_M001972_source">show source</a> ]</p>
  <div id="M001972_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 311</span>
311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expires_in_with_invalid_value</span>
312:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'baz'</span>, <span class="ruby-value str">'bat'</span>)
313:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
314:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:expires_in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Mon Jun 29 13:10:40 -0700 2150'</span>)
315:       <span class="ruby-keyword kw">end</span>
316:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bat'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'baz'</span>)
317:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
318:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001952" class="method">
  <div id="M001952_title" class="title">
    <b>test_getting_nil_session_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001952_source')" id="l_M001952_source">show source</a> ]</p>
  <div id="M001952_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 56</span>
56:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_getting_nil_session_value</span>
57:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
58:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
59:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
60:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
61:       <span class="ruby-keyword kw">end</span>
62:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001954" class="method">
  <div id="M001954_title" class="title">
    <b>test_getting_session_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001954_source')" id="l_M001954_source">show source</a> ]</p>
  <div id="M001954_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 85</span>
85:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_getting_session_id</span>
86:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
87:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
88:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
89:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
90:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
91: 
92:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_id'</span>
93:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
94:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">session_id</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
95:       <span class="ruby-keyword kw">end</span>
96:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001967" class="method">
  <div id="M001967_title" class="title">
    <b>test_local_cache_of_decrement</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001967_source')" id="l_M001967_source">show source</a> ]</p>
  <div id="M001967_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 268</span>
268:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_decrement</span>
269:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
270:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
271:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">decrement</span>(<span class="ruby-value str">'foo'</span>)
272:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
273:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">to_i</span>
274:       <span class="ruby-keyword kw">end</span>
275:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001964" class="method">
  <div id="M001964_title" class="title">
    <b>test_local_cache_of_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001964_source')" id="l_M001964_source">show source</a> ]</p>
  <div id="M001964_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 241</span>
241:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_delete</span>
242:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
243:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
244:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'foo'</span>)
245:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
246:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
247:       <span class="ruby-keyword kw">end</span>
248:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001965" class="method">
  <div id="M001965_title" class="title">
    <b>test_local_cache_of_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001965_source')" id="l_M001965_source">show source</a> ]</p>
  <div id="M001965_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 250</span>
250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_exist</span>
251:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
252:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
253:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">:@data</span>, <span class="ruby-keyword kw">nil</span>)
254:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
255:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'foo'</span>)
256:       <span class="ruby-keyword kw">end</span>
257:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001966" class="method">
  <div id="M001966_title" class="title">
    <b>test_local_cache_of_increment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001966_source')" id="l_M001966_source">show source</a> ]</p>
  <div id="M001966_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 259</span>
259:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_increment</span>
260:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
261:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
262:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">increment</span>(<span class="ruby-value str">'foo'</span>)
263:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
264:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">to_i</span>
265:       <span class="ruby-keyword kw">end</span>
266:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001962" class="method">
  <div id="M001962_title" class="title">
    <b>test_local_cache_of_read_and_write</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001962_source')" id="l_M001962_source">show source</a> ]</p>
  <div id="M001962_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 226</span>
226:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_read_and_write</span>
227:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
228:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
229:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
230:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
231:       <span class="ruby-keyword kw">end</span>
232:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001963" class="method">
  <div id="M001963_title" class="title">
    <b>test_local_cache_should_read_and_write_integer</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001963_source')" id="l_M001963_source">show source</a> ]</p>
  <div id="M001963_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 234</span>
234:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_should_read_and_write_integer</span>
235:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
236:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>)
237:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
238:       <span class="ruby-keyword kw">end</span>
239:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001960" class="method">
  <div id="M001960_title" class="title">
    <b>test_local_writes_are_persistent_on_the_remote_cache</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001960_source')" id="l_M001960_source">show source</a> ]</p>
  <div id="M001960_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 210</span>
210:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_writes_are_persistent_on_the_remote_cache</span>
211:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
212:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
213:       <span class="ruby-keyword kw">end</span>
214: 
215:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
216:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001970" class="method">
  <div id="M001970_title" class="title">
    <b>test_middleware</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001970_source')" id="l_M001970_source">show source</a> ]</p>
  <div id="M001970_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 294</span>
294:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_middleware</span>
295:       <span class="ruby-identifier">app</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
296:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
297:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>) <span class="ruby-comment cmt"># make sure 'foo' was written</span>
298:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">result</span>
299:       }
300:       <span class="ruby-identifier">app</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">middleware</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">app</span>)
301:       <span class="ruby-identifier">app</span>.<span class="ruby-identifier">call</span>({})
302:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001969" class="method">
  <div id="M001969_title" class="title">
    <b>test_multi_get</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001969_source')" id="l_M001969_source">show source</a> ]</p>
  <div id="M001969_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 285</span>
285:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_get</span>
286:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
287:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>)
288:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'goo'</span>, <span class="ruby-value">2</span>)
289:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read_multi</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'goo'</span>)
290:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value str">'goo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}, <span class="ruby-identifier">result</span>)
291:       <span class="ruby-keyword kw">end</span>
292:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001955" class="method">
  <div id="M001955_title" class="title">
    <b>test_prevents_session_fixation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001955_source')" id="l_M001955_source">show source</a> ]</p>
  <div id="M001955_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 98</span>
 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_prevents_session_fixation</span>
 99:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
100:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
101:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
102:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
103:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
104: 
105:         <span class="ruby-identifier">reset!</span>
106: 
107:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>, <span class="ruby-identifier">:_session_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">session_id</span>
108:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
109:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
110:       <span class="ruby-keyword kw">end</span>
111:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001951" class="method">
  <div id="M001951_title" class="title">
    <b>test_setting_and_getting_session_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001951_source')" id="l_M001951_source">show source</a> ]</p>
  <div id="M001951_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 44</span>
44:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_setting_and_getting_session_value</span>
45:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
46:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
47:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
48:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
49: 
50:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
51:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
52:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: &quot;bar&quot;'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
53:       <span class="ruby-keyword kw">end</span>
54:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001953" class="method">
  <div id="M001953_title" class="title">
    <b>test_setting_session_value_after_session_reset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001953_source')" id="l_M001953_source">show source</a> ]</p>
  <div id="M001953_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 64</span>
64:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_setting_session_value_after_session_reset</span>
65:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
66:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
67:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
68:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
69:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
70: 
71:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/call_reset_session'</span>
72:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
73:         <span class="ruby-identifier">assert_not_equal</span> [], <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Set-Cookie'</span>]
74: 
75:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
76:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
77:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
78: 
79:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_id'</span>
80:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
81:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">session_id</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
82:       <span class="ruby-keyword kw">end</span>
83:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001957" class="method">
  <div id="M001957_title" class="title">
    <b>test_store_objects_should_be_immutable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001957_source')" id="l_M001957_source">show source</a> ]</p>
  <div id="M001957_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 185</span>
185:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_store_objects_should_be_immutable</span>
186:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
187:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
188:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.*/</span>, <span class="ruby-value str">'baz'</span>)
189:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
190:       <span class="ruby-keyword kw">end</span>
191:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001958" class="method">
  <div id="M001958_title" class="title">
    <b>test_stored_objects_should_not_be_frozen</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001958_source')" id="l_M001958_source">show source</a> ]</p>
  <div id="M001958_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 193</span>
193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_stored_objects_should_not_be_frozen</span>
194:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
195:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
196:       <span class="ruby-keyword kw">end</span>
197:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
198:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">frozen?</span>
199:       <span class="ruby-keyword kw">end</span>
200:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001959" class="method">
  <div id="M001959_title" class="title">
    <b>test_write_should_return_true_on_success</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001959_source')" id="l_M001959_source">show source</a> ]</p>
  <div id="M001959_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 202</span>
202:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_should_return_true_on_success</span>
203:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
204:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
205:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>) <span class="ruby-comment cmt"># make sure 'foo' was written</span>
206:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">result</span>
207:       <span class="ruby-keyword kw">end</span>
208:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>