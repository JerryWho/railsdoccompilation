  <div id="C00000309">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />MemCacheStoreTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/session/mem_cache_store_test_rb.html');">actionpack/test/controller/session/mem_cache_store_test.rb</a>
<a href="#" onclick="jsHref('files/activesupport/test/caching_test_rb.html');">activesupport/test/caching_test.rb</a>

Parent:&nbsp;
ActionController::IntegrationTest
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
You need to start a memcached server inorder to run these tests
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001973&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001979&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001984&name=test_clear_also_clears_local_cache" >test_clear_also_clears_local_cache</a></li>
  <li><a href="index.html?a=M001991&name=test_exist_with_nulls_cached_locally" >test_exist_with_nulls_cached_locally</a></li>
  <li><a href="index.html?a=M001994&name=test_expires_in" >test_expires_in</a></li>
  <li><a href="index.html?a=M001995&name=test_expires_in_with_invalid_value" >test_expires_in_with_invalid_value</a></li>
  <li><a href="index.html?a=M001975&name=test_getting_nil_session_value" >test_getting_nil_session_value</a></li>
  <li><a href="index.html?a=M001977&name=test_getting_session_id" >test_getting_session_id</a></li>
  <li><a href="index.html?a=M001990&name=test_local_cache_of_decrement" >test_local_cache_of_decrement</a></li>
  <li><a href="index.html?a=M001987&name=test_local_cache_of_delete" >test_local_cache_of_delete</a></li>
  <li><a href="index.html?a=M001988&name=test_local_cache_of_exist" >test_local_cache_of_exist</a></li>
  <li><a href="index.html?a=M001989&name=test_local_cache_of_increment" >test_local_cache_of_increment</a></li>
  <li><a href="index.html?a=M001985&name=test_local_cache_of_read_and_write" >test_local_cache_of_read_and_write</a></li>
  <li><a href="index.html?a=M001986&name=test_local_cache_should_read_and_write_integer" >test_local_cache_should_read_and_write_integer</a></li>
  <li><a href="index.html?a=M001983&name=test_local_writes_are_persistent_on_the_remote_cache" >test_local_writes_are_persistent_on_the_remote_cache</a></li>
  <li><a href="index.html?a=M001993&name=test_middleware" >test_middleware</a></li>
  <li><a href="index.html?a=M001992&name=test_multi_get" >test_multi_get</a></li>
  <li><a href="index.html?a=M001978&name=test_prevents_session_fixation" >test_prevents_session_fixation</a></li>
  <li><a href="index.html?a=M001974&name=test_setting_and_getting_session_value" >test_setting_and_getting_session_value</a></li>
  <li><a href="index.html?a=M001976&name=test_setting_session_value_after_session_reset" >test_setting_session_value_after_session_reset</a></li>
  <li><a href="index.html?a=M001980&name=test_store_objects_should_be_immutable" >test_store_objects_should_be_immutable</a></li>
  <li><a href="index.html?a=M001981&name=test_stored_objects_should_not_be_frozen" >test_stored_objects_should_not_be_frozen</a></li>
  <li><a href="index.html?a=M001982&name=test_write_should_return_true_on_success" >test_write_should_return_true_on_success</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/CacheStoreBehavior.html');">CacheStoreBehavior</a></li>
</ul>


  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/MemCacheStoreTest/TestController.html');" class="link">MemCacheStoreTest::TestController</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">DispatcherApp</td>
    <td>=</td>
    <td class="attr-value">ActionController::Dispatcher.new</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">MemCacheStoreApp</td>
    <td>=</td>
    <td class="attr-value">ActionController::Session::MemCacheStore.new(                          DispatcherApp, :key =&gt; '_session_id')</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M001973" class="method">
  <div id="M001973_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001973_source')" id="l_M001973_source">show source</a> ]</p>
  <div id="M001973_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 40</span>
40:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
41:       <span class="ruby-ivar">@integration_session</span> = <span class="ruby-identifier">open_session</span>(<span class="ruby-constant">MemCacheStoreApp</span>)
42:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001979" class="method">
  <div id="M001979_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001979_source')" id="l_M001979_source">show source</a> ]</p>
  <div id="M001979_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 182</span>
182:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
183:       <span class="ruby-ivar">@cache</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Cache</span>.<span class="ruby-identifier">lookup_store</span>(<span class="ruby-identifier">:mem_cache_store</span>)
184:       <span class="ruby-ivar">@data</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">instance_variable_get</span>(<span class="ruby-identifier">:@data</span>)
185:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">clear</span>
186:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">silence!</span>
187:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;/dev/null&quot;</span>)
188:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001984" class="method">
  <div id="M001984_title" class="title">
    <b>test_clear_also_clears_local_cache</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001984_source')" id="l_M001984_source">show source</a> ]</p>
  <div id="M001984_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 225</span>
225:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clear_also_clears_local_cache</span>
226:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
227:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
228:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">clear</span>
229:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
230:       <span class="ruby-keyword kw">end</span>
231:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001991" class="method">
  <div id="M001991_title" class="title">
    <b>test_exist_with_nulls_cached_locally</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001991_source')" id="l_M001991_source">show source</a> ]</p>
  <div id="M001991_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 284</span>
284:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exist_with_nulls_cached_locally</span>
285:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
286:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
287:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'foo'</span>)
288:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'foo'</span>)
289:       <span class="ruby-keyword kw">end</span>
290:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001994" class="method">
  <div id="M001994_title" class="title">
    <b>test_expires_in</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001994_source')" id="l_M001994_source">show source</a> ]</p>
  <div id="M001994_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 311</span>
311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expires_in</span>
312:       <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:expires_in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
313:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
314:       <span class="ruby-identifier">sleep</span> <span class="ruby-value">2</span>
315:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
316:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001995" class="method">
  <div id="M001995_title" class="title">
    <b>test_expires_in_with_invalid_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001995_source')" id="l_M001995_source">show source</a> ]</p>
  <div id="M001995_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 318</span>
318:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_expires_in_with_invalid_value</span>
319:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'baz'</span>, <span class="ruby-value str">'bat'</span>)
320:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
321:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:expires_in</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Mon Jun 29 13:10:40 -0700 2150'</span>)
322:       <span class="ruby-keyword kw">end</span>
323:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bat'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'baz'</span>)
324:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
325:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001975" class="method">
  <div id="M001975_title" class="title">
    <b>test_getting_nil_session_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001975_source')" id="l_M001975_source">show source</a> ]</p>
  <div id="M001975_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 56</span>
56:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_getting_nil_session_value</span>
57:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
58:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
59:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
60:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
61:       <span class="ruby-keyword kw">end</span>
62:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001977" class="method">
  <div id="M001977_title" class="title">
    <b>test_getting_session_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001977_source')" id="l_M001977_source">show source</a> ]</p>
  <div id="M001977_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 85</span>
85:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_getting_session_id</span>
86:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
87:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
88:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
89:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
90:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
91: 
92:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_id'</span>
93:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
94:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">session_id</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
95:       <span class="ruby-keyword kw">end</span>
96:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001990" class="method">
  <div id="M001990_title" class="title">
    <b>test_local_cache_of_decrement</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001990_source')" id="l_M001990_source">show source</a> ]</p>
  <div id="M001990_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 275</span>
275:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_decrement</span>
276:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
277:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
278:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">decrement</span>(<span class="ruby-value str">'foo'</span>)
279:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
280:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">to_i</span>
281:       <span class="ruby-keyword kw">end</span>
282:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001987" class="method">
  <div id="M001987_title" class="title">
    <b>test_local_cache_of_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001987_source')" id="l_M001987_source">show source</a> ]</p>
  <div id="M001987_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 248</span>
248:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_delete</span>
249:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
250:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
251:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'foo'</span>)
252:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
253:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
254:       <span class="ruby-keyword kw">end</span>
255:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001988" class="method">
  <div id="M001988_title" class="title">
    <b>test_local_cache_of_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001988_source')" id="l_M001988_source">show source</a> ]</p>
  <div id="M001988_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 257</span>
257:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_exist</span>
258:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
259:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
260:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-identifier">:@data</span>, <span class="ruby-keyword kw">nil</span>)
261:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
262:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-value str">'foo'</span>)
263:       <span class="ruby-keyword kw">end</span>
264:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001989" class="method">
  <div id="M001989_title" class="title">
    <b>test_local_cache_of_increment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001989_source')" id="l_M001989_source">show source</a> ]</p>
  <div id="M001989_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 266</span>
266:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_increment</span>
267:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
268:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
269:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">increment</span>(<span class="ruby-value str">'foo'</span>)
270:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
271:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:raw</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">to_i</span>
272:       <span class="ruby-keyword kw">end</span>
273:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001985" class="method">
  <div id="M001985_title" class="title">
    <b>test_local_cache_of_read_and_write</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001985_source')" id="l_M001985_source">show source</a> ]</p>
  <div id="M001985_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 233</span>
233:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_of_read_and_write</span>
234:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
235:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
236:         <span class="ruby-ivar">@data</span>.<span class="ruby-identifier">flush_all</span> <span class="ruby-comment cmt"># Clear remote cache</span>
237:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
238:       <span class="ruby-keyword kw">end</span>
239:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001986" class="method">
  <div id="M001986_title" class="title">
    <b>test_local_cache_should_read_and_write_integer</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001986_source')" id="l_M001986_source">show source</a> ]</p>
  <div id="M001986_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 241</span>
241:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_cache_should_read_and_write_integer</span>
242:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
243:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>)
244:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
245:       <span class="ruby-keyword kw">end</span>
246:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001983" class="method">
  <div id="M001983_title" class="title">
    <b>test_local_writes_are_persistent_on_the_remote_cache</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001983_source')" id="l_M001983_source">show source</a> ]</p>
  <div id="M001983_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 217</span>
217:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_writes_are_persistent_on_the_remote_cache</span>
218:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
219:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
220:       <span class="ruby-keyword kw">end</span>
221: 
222:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
223:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001993" class="method">
  <div id="M001993_title" class="title">
    <b>test_middleware</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001993_source')" id="l_M001993_source">show source</a> ]</p>
  <div id="M001993_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 301</span>
301:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_middleware</span>
302:       <span class="ruby-identifier">app</span> = <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">env</span><span class="ruby-operator">|</span>
303:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
304:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>) <span class="ruby-comment cmt"># make sure 'foo' was written</span>
305:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">result</span>
306:       }
307:       <span class="ruby-identifier">app</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">middleware</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">app</span>)
308:       <span class="ruby-identifier">app</span>.<span class="ruby-identifier">call</span>({})
309:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001992" class="method">
  <div id="M001992_title" class="title">
    <b>test_multi_get</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001992_source')" id="l_M001992_source">show source</a> ]</p>
  <div id="M001992_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 292</span>
292:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_get</span>
293:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
294:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value">1</span>)
295:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'goo'</span>, <span class="ruby-value">2</span>)
296:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read_multi</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'goo'</span>)
297:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-value str">'goo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>}, <span class="ruby-identifier">result</span>)
298:       <span class="ruby-keyword kw">end</span>
299:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001978" class="method">
  <div id="M001978_title" class="title">
    <b>test_prevents_session_fixation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001978_source')" id="l_M001978_source">show source</a> ]</p>
  <div id="M001978_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 98</span>
 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_prevents_session_fixation</span>
 99:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
100:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
101:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
102:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
103:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
104: 
105:         <span class="ruby-identifier">reset!</span>
106: 
107:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>, <span class="ruby-identifier">:_session_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">session_id</span>
108:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
109:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
110:       <span class="ruby-keyword kw">end</span>
111:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001974" class="method">
  <div id="M001974_title" class="title">
    <b>test_setting_and_getting_session_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001974_source')" id="l_M001974_source">show source</a> ]</p>
  <div id="M001974_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 44</span>
44:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_setting_and_getting_session_value</span>
45:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
46:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
47:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
48:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
49: 
50:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
51:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
52:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: &quot;bar&quot;'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
53:       <span class="ruby-keyword kw">end</span>
54:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001976" class="method">
  <div id="M001976_title" class="title">
    <b>test_setting_session_value_after_session_reset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001976_source')" id="l_M001976_source">show source</a> ]</p>
  <div id="M001976_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/session/mem_cache_store_test.rb, line 64</span>
64:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_setting_session_value_after_session_reset</span>
65:       <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
66:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/set_session_value'</span>
67:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
68:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
69:         <span class="ruby-identifier">session_id</span> = <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">'_session_id'</span>]
70: 
71:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/call_reset_session'</span>
72:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
73:         <span class="ruby-identifier">assert_not_equal</span> [], <span class="ruby-identifier">headers</span>[<span class="ruby-value str">'Set-Cookie'</span>]
74: 
75:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_value'</span>
76:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
77:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo: nil'</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
78: 
79:         <span class="ruby-identifier">get</span> <span class="ruby-value str">'/get_session_id'</span>
80:         <span class="ruby-identifier">assert_response</span> <span class="ruby-identifier">:success</span>
81:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">session_id</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
82:       <span class="ruby-keyword kw">end</span>
83:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001980" class="method">
  <div id="M001980_title" class="title">
    <b>test_store_objects_should_be_immutable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001980_source')" id="l_M001980_source">show source</a> ]</p>
  <div id="M001980_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 192</span>
192:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_store_objects_should_be_immutable</span>
193:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
194:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
195:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">gsub!</span>(<span class="ruby-regexp re">/.*/</span>, <span class="ruby-value str">'baz'</span>)
196:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>)
197:       <span class="ruby-keyword kw">end</span>
198:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001981" class="method">
  <div id="M001981_title" class="title">
    <b>test_stored_objects_should_not_be_frozen</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001981_source')" id="l_M001981_source">show source</a> ]</p>
  <div id="M001981_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_stored_objects_should_not_be_frozen</span>
201:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
202:         <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
203:       <span class="ruby-keyword kw">end</span>
204:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
205:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">frozen?</span>
206:       <span class="ruby-keyword kw">end</span>
207:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001982" class="method">
  <div id="M001982_title" class="title">
    <b>test_write_should_return_true_on_success</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001982_source')" id="l_M001982_source">show source</a> ]</p>
  <div id="M001982_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/caching_test.rb, line 209</span>
209:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_should_return_true_on_success</span>
210:       <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">with_local_cache</span> <span class="ruby-keyword kw">do</span>
211:         <span class="ruby-identifier">result</span> = <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">write</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
212:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-ivar">@cache</span>.<span class="ruby-identifier">read</span>(<span class="ruby-value str">'foo'</span>) <span class="ruby-comment cmt"># make sure 'foo' was written</span>
213:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">result</span>
214:       <span class="ruby-keyword kw">end</span>
215:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>