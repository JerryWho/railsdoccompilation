  <div id="C00000165">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ControllerInstanceTests<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/base_test_rb.html');">actionpack/test/controller/base_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001110&name=hide_mocha_methods_from_controller" >hide_mocha_methods_from_controller</a></li>
  <li><a href="index.html?a=M001108&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001109&name=test_action_methods" >test_action_methods</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M001108" class="method">
  <div id="M001108_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001108_source')" id="l_M001108_source">show source</a> ]</p>
  <div id="M001108_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/base_test.rb, line 75</span>
75:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
76:     <span class="ruby-ivar">@empty</span> = <span class="ruby-constant">EmptyController</span>.<span class="ruby-identifier">new</span>
77:     <span class="ruby-ivar">@contained</span> = <span class="ruby-constant">Submodule</span><span class="ruby-operator">::</span><span class="ruby-constant">ContainedEmptyController</span>.<span class="ruby-identifier">new</span>
78:     <span class="ruby-ivar">@empty_controllers</span> = [<span class="ruby-ivar">@empty</span>, <span class="ruby-ivar">@contained</span>, <span class="ruby-constant">Submodule</span><span class="ruby-operator">::</span><span class="ruby-constant">SubclassedController</span>.<span class="ruby-identifier">new</span>]
79:     
80:     <span class="ruby-ivar">@non_empty_controllers</span> = [<span class="ruby-constant">NonEmptyController</span>.<span class="ruby-identifier">new</span>,
81:                               <span class="ruby-constant">Submodule</span><span class="ruby-operator">::</span><span class="ruby-constant">ContainedNonEmptyController</span>.<span class="ruby-identifier">new</span>]
82:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001109" class="method">
  <div id="M001109_title" class="title">
    <b>test_action_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001109_source')" id="l_M001109_source">show source</a> ]</p>
  <div id="M001109_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/base_test.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_methods</span>
85:     <span class="ruby-ivar">@empty_controllers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
86:       <span class="ruby-identifier">hide_mocha_methods_from_controller</span>(<span class="ruby-identifier">c</span>)
87:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:action_methods</span>), <span class="ruby-node">&quot;#{c.controller_path} should be empty!&quot;</span>
88:     <span class="ruby-keyword kw">end</span>
89:     <span class="ruby-ivar">@non_empty_controllers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
90:       <span class="ruby-identifier">hide_mocha_methods_from_controller</span>(<span class="ruby-identifier">c</span>)
91:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">%w(public_action)</span>), <span class="ruby-identifier">c</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:action_methods</span>), <span class="ruby-node">&quot;#{c.controller_path} should not be empty!&quot;</span>
92:     <span class="ruby-keyword kw">end</span>
93:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M001110" class="method">
  <div id="M001110_title" class="title">
    <b>hide_mocha_methods_from_controller</b>(controller)
  </div>
  <div class="description">
  <p>
Mocha adds some public instance methods to <a
href="index.html?a=C00000038&name=Object">Object</a> that would be
considered actions, so explicitly hide_action them.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001110_source')" id="l_M001110_source">show source</a> ]</p>
  <div id="M001110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/base_test.rb, line 98</span>
 98:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">hide_mocha_methods_from_controller</span>(<span class="ruby-identifier">controller</span>)
 99:       <span class="ruby-identifier">mocha_methods</span> = [
100:         <span class="ruby-identifier">:expects</span>, <span class="ruby-identifier">:mocha</span>, <span class="ruby-identifier">:mocha_inspect</span>, <span class="ruby-identifier">:reset_mocha</span>, <span class="ruby-identifier">:stubba_object</span>,
101:         <span class="ruby-identifier">:stubba_method</span>, <span class="ruby-identifier">:stubs</span>, <span class="ruby-identifier">:verify</span>, <span class="ruby-identifier">:__metaclass__</span>, <span class="ruby-identifier">:__is_a__</span>, <span class="ruby-identifier">:to_matcher</span>,
102:       ]
103:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:hide_action</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">mocha_methods</span>)
104:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>