  <div id="C00000759">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />DependenciesTest<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/dependencies_test_rb.html');">activesupport/test/dependencies_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005024&name=failing_test_access_thru_and_upwards_fails" >failing_test_access_thru_and_upwards_fails</a></li>
  <li><a href="index.html?a=M005004&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005044&name=test_application_should_special_case_application_controller" >test_application_should_special_case_application_controller</a></li>
  <li><a href="index.html?a=M005013&name=test_as_load_path" >test_as_load_path</a></li>
  <li><a href="index.html?a=M005063&name=test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load" >test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</a></li>
  <li><a href="index.html?a=M005064&name=test_autoload_doesnt_shadow_name_error" >test_autoload_doesnt_shadow_name_error</a></li>
  <li><a href="index.html?a=M005062&name=test_autoload_doesnt_shadow_no_method_error_with_absolute_constant" >test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</a></li>
  <li><a href="index.html?a=M005061&name=test_autoload_doesnt_shadow_no_method_error_with_relative_constant" >test_autoload_doesnt_shadow_no_method_error_with_relative_constant</a></li>
  <li><a href="index.html?a=M005034&name=test_autoloaded?" >test_autoloaded?</a></li>
  <li><a href="index.html?a=M005020&name=test_class_with_nested_class" >test_class_with_nested_class</a></li>
  <li><a href="index.html?a=M005021&name=test_class_with_nested_inline_class" >test_class_with_nested_inline_class</a></li>
  <li><a href="index.html?a=M005022&name=test_class_with_nested_inline_subclass_of_parent" >test_class_with_nested_inline_subclass_of_parent</a></li>
  <li><a href="index.html?a=M005045&name=test_const_missing_on_kernel_should_fallback_to_object" >test_const_missing_on_kernel_should_fallback_to_object</a></li>
  <li><a href="index.html?a=M005039&name=test_const_missing_should_not_double_load" >test_const_missing_should_not_double_load</a></li>
  <li><a href="index.html?a=M005040&name=test_const_missing_within_anonymous_module" >test_const_missing_within_anonymous_module</a></li>
  <li><a href="index.html?a=M005038&name=test_custom_const_missing_should_work" >test_custom_const_missing_should_work</a></li>
  <li><a href="index.html?a=M005010&name=test_dependency_which_raises_exception_isnt_added_to_loaded_set" >test_dependency_which_raises_exception_isnt_added_to_loaded_set</a></li>
  <li><a href="index.html?a=M005016&name=test_directories_manifest_as_modules_unless_const_defined" >test_directories_manifest_as_modules_unless_const_defined</a></li>
  <li><a href="index.html?a=M005019&name=test_directories_may_manifest_as_nested_classes" >test_directories_may_manifest_as_nested_classes</a></li>
  <li><a href="index.html?a=M005036&name=test_file_search" >test_file_search</a></li>
  <li><a href="index.html?a=M005037&name=test_file_search_uses_first_in_load_path" >test_file_search_uses_first_in_load_path</a></li>
  <li><a href="index.html?a=M005058&name=test_file_with_multiple_constants_and_auto_loading" >test_file_with_multiple_constants_and_auto_loading</a></li>
  <li><a href="index.html?a=M005057&name=test_file_with_multiple_constants_and_require_dependency" >test_file_with_multiple_constants_and_require_dependency</a></li>
  <li><a href="index.html?a=M005068&name=test_hook_called_multiple_times" >test_hook_called_multiple_times</a></li>
  <li><a href="index.html?a=M005066&name=test_load_once_constants_should_not_be_unloaded" >test_load_once_constants_should_not_be_unloaded</a></li>
  <li><a href="index.html?a=M005043&name=test_load_once_paths_do_not_add_to_autoloaded_constants" >test_load_once_paths_do_not_add_to_autoloaded_constants</a></li>
  <li><a href="index.html?a=M005067&name=test_load_once_paths_should_behave_when_recursively_loading" >test_load_once_paths_should_behave_when_recursively_loading</a></li>
  <li><a href="index.html?a=M005027&name=test_loadable_constants_for_path_should_handle_empty_autoloads" >test_loadable_constants_for_path_should_handle_empty_autoloads</a></li>
  <li><a href="index.html?a=M005028&name=test_loadable_constants_for_path_should_handle_relative_paths" >test_loadable_constants_for_path_should_handle_relative_paths</a></li>
  <li><a href="index.html?a=M005029&name=test_loadable_constants_for_path_should_provide_all_results" >test_loadable_constants_for_path_should_provide_all_results</a></li>
  <li><a href="index.html?a=M005030&name=test_loadable_constants_for_path_should_uniq_results" >test_loadable_constants_for_path_should_uniq_results</a></li>
  <li><a href="index.html?a=M005031&name=test_loadable_constants_with_load_path_without_trailing_slash" >test_loadable_constants_with_load_path_without_trailing_slash</a></li>
  <li><a href="index.html?a=M005009&name=test_missing_association_raises_nothing" >test_missing_association_raises_nothing</a></li>
  <li><a href="index.html?a=M005008&name=test_missing_dependency_raises_missing_source_file" >test_missing_dependency_raises_missing_source_file</a></li>
  <li><a href="index.html?a=M005014&name=test_module_loading" >test_module_loading</a></li>
  <li><a href="index.html?a=M005017&name=test_module_with_nested_class" >test_module_with_nested_class</a></li>
  <li><a href="index.html?a=M005018&name=test_module_with_nested_inline_class" >test_module_with_nested_inline_class</a></li>
  <li><a href="index.html?a=M005012&name=test_mutual_dependencies_dont_infinite_loop" >test_mutual_dependencies_dont_infinite_loop</a></li>
  <li><a href="index.html?a=M005023&name=test_nested_class_can_access_sibling" >test_nested_class_can_access_sibling</a></li>
  <li><a href="index.html?a=M005060&name=test_nested_file_with_multiple_constants_and_auto_loading" >test_nested_file_with_multiple_constants_and_auto_loading</a></li>
  <li><a href="index.html?a=M005059&name=test_nested_file_with_multiple_constants_and_require_dependency" >test_nested_file_with_multiple_constants_and_require_dependency</a></li>
  <li><a href="index.html?a=M005042&name=test_nested_load_error_isnt_rescued" >test_nested_load_error_isnt_rescued</a></li>
  <li><a href="index.html?a=M005053&name=test_new_constants_in_module" >test_new_constants_in_module</a></li>
  <li><a href="index.html?a=M005054&name=test_new_constants_in_module_using_name" >test_new_constants_in_module_using_name</a></li>
  <li><a href="index.html?a=M005051&name=test_new_constants_in_with_a_single_constant" >test_new_constants_in_with_a_single_constant</a></li>
  <li><a href="index.html?a=M005056&name=test_new_constants_in_with_illegal_module_name_raises_correct_error" >test_new_constants_in_with_illegal_module_name_raises_correct_error</a></li>
  <li><a href="index.html?a=M005055&name=test_new_constants_in_with_inherited_constants" >test_new_constants_in_with_inherited_constants</a></li>
  <li><a href="index.html?a=M005052&name=test_new_constants_in_with_nesting" >test_new_constants_in_with_nesting</a></li>
  <li><a href="index.html?a=M005050&name=test_new_contants_in_without_constants" >test_new_contants_in_without_constants</a></li>
  <li><a href="index.html?a=M005015&name=test_non_existing_const_raises_name_error" >test_non_existing_const_raises_name_error</a></li>
  <li><a href="index.html?a=M005025&name=test_non_existing_const_raises_name_error_with_fully_qualified_name" >test_non_existing_const_raises_name_error_with_fully_qualified_name</a></li>
  <li><a href="index.html?a=M005046&name=test_preexisting_constants_are_not_marked_as_autoloaded" >test_preexisting_constants_are_not_marked_as_autoloaded</a></li>
  <li><a href="index.html?a=M005032&name=test_qualified_const_defined" >test_qualified_const_defined</a></li>
  <li><a href="index.html?a=M005033&name=test_qualified_const_defined_should_not_call_method_missing" >test_qualified_const_defined_should_not_call_method_missing</a></li>
  <li><a href="index.html?a=M005035&name=test_qualified_name_for" >test_qualified_name_for</a></li>
  <li><a href="index.html?a=M005041&name=test_removal_from_tree_should_be_detected" >test_removal_from_tree_should_be_detected</a></li>
  <li><a href="index.html?a=M005065&name=test_remove_constant_handles_double_colon_at_start" >test_remove_constant_handles_double_colon_at_start</a></li>
  <li><a href="index.html?a=M005026&name=test_smart_name_error_strings" >test_smart_name_error_strings</a></li>
  <li><a href="index.html?a=M005007&name=test_tracking_identical_loaded_files" >test_tracking_identical_loaded_files</a></li>
  <li><a href="index.html?a=M005006&name=test_tracking_loaded_files" >test_tracking_loaded_files</a></li>
  <li><a href="index.html?a=M005069&name=test_unhook" >test_unhook</a></li>
  <li><a href="index.html?a=M005047&name=test_unloadable" >test_unloadable</a></li>
  <li><a href="index.html?a=M005048&name=test_unloadable_should_fail_with_anonymous_modules" >test_unloadable_should_fail_with_anonymous_modules</a></li>
  <li><a href="index.html?a=M005049&name=test_unloadable_should_return_change_flag" >test_unloadable_should_return_change_flag</a></li>
  <li><a href="index.html?a=M005011&name=test_warnings_should_be_enabled_on_first_load" >test_warnings_should_be_enabled_on_first_load</a></li>
  <li><a href="index.html?a=M005005&name=with_loading" >with_loading</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/ModuleWithConstant.html');">ModuleWithConstant</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M005024" class="method">
  <div id="M005024_title" class="title">
    <b>failing_test_access_thru_and_upwards_fails</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005024_source')" id="l_M005024_source">show source</a> ]</p>
  <div id="M005024_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 206</span>
206:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">failing_test_access_thru_and_upwards_fails</span>
207:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
208:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ModuleFolder</span>)
209:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">Object</span> }
210:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span><span class="ruby-operator">::</span><span class="ruby-constant">Object</span> }
211:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
212:     <span class="ruby-keyword kw">end</span>
213:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005004" class="method">
  <div id="M005004_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005004_source')" id="l_M005004_source">show source</a> ]</p>
  <div id="M005004_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
18:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
19:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005044" class="method">
  <div id="M005044_title" class="title">
    <b>test_application_should_special_case_application_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005044_source')" id="l_M005044_source">show source</a> ]</p>
  <div id="M005044_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 447</span>
447:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_application_should_special_case_application_controller</span>
448:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
449:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'application'</span>
450:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, <span class="ruby-constant">ApplicationController</span>
451:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:ApplicationController</span>)
452:     <span class="ruby-keyword kw">end</span>
453:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005013" class="method">
  <div id="M005013_title" class="title">
    <b>test_as_load_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005013_source')" id="l_M005013_source">show source</a> ]</p>
  <div id="M005013_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_as_load_path</span>
125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-constant">DependenciesTest</span>.<span class="ruby-identifier">as_load_path</span>
126:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005063" class="method">
  <div id="M005063_title" class="title">
    <b>test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005063_source')" id="l_M005063_source">show source</a> ]</p>
  <div id="M005063_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 694</span>
694:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</span>
695:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
696:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-identifier">:require</span>
697:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
698:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">123</span>, <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span><span class="ruby-operator">::</span><span class="ruby-constant">FooBarBaz</span> }
699:       <span class="ruby-keyword kw">end</span>
700:     <span class="ruby-keyword kw">end</span>
701:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005064" class="method">
  <div id="M005064_title" class="title">
    <b>test_autoload_doesnt_shadow_name_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005064_source')" id="l_M005064_source">show source</a> ]</p>
  <div id="M005064_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 703</span>
703:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_name_error</span>
704:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
705:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:RaisesNameError</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>)
706:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
707:         <span class="ruby-keyword kw">begin</span>
708:           <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span><span class="ruby-operator">::</span><span class="ruby-constant">FooBarBaz</span>.<span class="ruby-identifier">object_id</span>
709:           <span class="ruby-identifier">flunk</span> <span class="ruby-value str">'should have raised NameError when autoloaded file referenced FooBarBaz'</span>
710:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
711:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'uninitialized constant RaisesNameError::FooBarBaz'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
712:         <span class="ruby-keyword kw">end</span>
713:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>), <span class="ruby-value str">&quot;::RaisesNameError is defined but it should have failed!&quot;</span>
714:       <span class="ruby-keyword kw">end</span>
715: 
716:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>)
717:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
718:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span> }
719:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>), <span class="ruby-value str">&quot;::RaisesNameError is defined but it should have failed!&quot;</span>
720:       <span class="ruby-keyword kw">end</span>
721:     <span class="ruby-keyword kw">end</span>
722: 
723:   <span class="ruby-keyword kw">ensure</span>
724:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
725:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005062" class="method">
  <div id="M005062_title" class="title">
    <b>test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005062_source')" id="l_M005062_source">show source</a> ]</p>
  <div id="M005062_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 681</span>
681:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</span>
682:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
683:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it hasn't been referenced yet!&quot;</span>
684:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
685:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span> }
686:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it should have failed!&quot;</span>
687:       <span class="ruby-keyword kw">end</span>
688:     <span class="ruby-keyword kw">end</span>
689: 
690:   <span class="ruby-keyword kw">ensure</span>
691:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
692:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005061" class="method">
  <div id="M005061_title" class="title">
    <b>test_autoload_doesnt_shadow_no_method_error_with_relative_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005061_source')" id="l_M005061_source">show source</a> ]</p>
  <div id="M005061_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 668</span>
668:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_no_method_error_with_relative_constant</span>
669:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
670:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it hasn't been referenced yet!&quot;</span>
671:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
672:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">RaisesNoMethodError</span> }
673:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it should have failed!&quot;</span>
674:       <span class="ruby-keyword kw">end</span>
675:     <span class="ruby-keyword kw">end</span>
676: 
677:   <span class="ruby-keyword kw">ensure</span>
678:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
679:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005034" class="method">
  <div id="M005034_title" class="title">
    <b>test_autoloaded?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005034_source')" id="l_M005034_source">show source</a> ]</p>
  <div id="M005034_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 293</span>
293:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoloaded?</span>
294:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
295:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
296:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
297: 
298:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span>)
299: 
300:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
301:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
302: 
303:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
304: 
305:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
306:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
307: 
308:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;::ModuleFolder&quot;</span>)
309:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:ModuleFolder</span>)
310: 
311:       <span class="ruby-comment cmt"># Anonymous modules aren't autoloaded.</span>
312:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>)
313: 
314:       <span class="ruby-identifier">nil_name</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
315:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nil_name</span>.<span class="ruby-identifier">name</span>() <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">end</span>
316:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">nil_name</span>)
317: 
318:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:ModuleFolder</span> }
319:     <span class="ruby-keyword kw">end</span>
320:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005020" class="method">
  <div id="M005020_title" class="title">
    <b>test_class_with_nested_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005020_source')" id="l_M005020_source">show source</a> ]</p>
  <div id="M005020_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_class</span>
175:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
176:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
177:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
178:     <span class="ruby-keyword kw">end</span>
179:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005021" class="method">
  <div id="M005021_title" class="title">
    <b>test_class_with_nested_inline_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005021_source')" id="l_M005021_source">show source</a> ]</p>
  <div id="M005021_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 181</span>
181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_inline_class</span>
182:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
183:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">InlineClass</span>
184:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
185:     <span class="ruby-keyword kw">end</span>
186:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005022" class="method">
  <div id="M005022_title" class="title">
    <b>test_class_with_nested_inline_subclass_of_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005022_source')" id="l_M005022_source">show source</a> ]</p>
  <div id="M005022_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_inline_subclass_of_parent</span>
189:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
190:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassFolderSubclass</span>
191:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span>
192:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'indeed'</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassFolderSubclass</span><span class="ruby-operator">::</span><span class="ruby-constant">ConstantInClassFolder</span>
193:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
194:     <span class="ruby-keyword kw">end</span>
195:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005045" class="method">
  <div id="M005045_title" class="title">
    <b>test_const_missing_on_kernel_should_fallback_to_object</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005045_source')" id="l_M005045_source">show source</a> ]</p>
  <div id="M005045_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 455</span>
455:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_on_kernel_should_fallback_to_object</span>
456:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
457:       <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Kernel</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span>
458:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;E&quot;</span>, <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">name</span>
459:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">object_id</span>, <span class="ruby-constant">Kernel</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span>.<span class="ruby-identifier">object_id</span>
460:     <span class="ruby-keyword kw">end</span>
461:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005039" class="method">
  <div id="M005039_title" class="title">
    <b>test_const_missing_should_not_double_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005039_source')" id="l_M005039_source">show source</a> ]</p>
  <div id="M005039_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 381</span>
381:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_should_not_double_load</span>
382:     <span class="ruby-identifier">$counting_loaded_times</span> = <span class="ruby-value">0</span>
383:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
384:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'././counting_loader'</span>
385:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
386:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_missing_constant</span> <span class="ruby-constant">Object</span>, <span class="ruby-identifier">:CountingLoader</span> }
387:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
388:     <span class="ruby-keyword kw">end</span>
389:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005040" class="method">
  <div id="M005040_title" class="title">
    <b>test_const_missing_within_anonymous_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005040_source')" id="l_M005040_source">show source</a> ]</p>
  <div id="M005040_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 391</span>
391:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_within_anonymous_module</span>
392:     <span class="ruby-identifier">$counting_loaded_times</span> = <span class="ruby-value">0</span>
393:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
394:     <span class="ruby-identifier">m</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;def a() CountingLoader; end&quot;</span>
395:     <span class="ruby-identifier">extend</span> <span class="ruby-identifier">m</span>
396:     <span class="ruby-identifier">kls</span> = <span class="ruby-keyword kw">nil</span>
397:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
398:       <span class="ruby-identifier">kls</span> = <span class="ruby-keyword kw">nil</span>
399:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">kls</span> = <span class="ruby-identifier">a</span> }
400:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;CountingLoader&quot;</span>, <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">name</span>
401:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
402: 
403:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">kls</span> = <span class="ruby-identifier">a</span> }
404:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
405:     <span class="ruby-keyword kw">end</span>
406:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005038" class="method">
  <div id="M005038_title" class="title">
    <b>test_custom_const_missing_should_work</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005038_source')" id="l_M005038_source">show source</a> ]</p>
  <div id="M005038_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 361</span>
361:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_custom_const_missing_should_work</span>
362:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;module ModuleWithCustomConstMissing\ndef self.const_missing(name)\nconst_set name, name.to_s.hash\nend\n\nmodule A\nend\nend\n&quot;</span>
363: 
364:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
365:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Integer</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
366:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">A</span>
367:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
368:     <span class="ruby-keyword kw">end</span>
369:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005010" class="method">
  <div id="M005010_title" class="title">
    <b>test_dependency_which_raises_exception_isnt_added_to_loaded_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005010_source')" id="l_M005010_source">show source</a> ]</p>
  <div id="M005010_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dependency_which_raises_exception_isnt_added_to_loaded_set</span>
54:     <span class="ruby-identifier">with_loading</span> <span class="ruby-keyword kw">do</span>
55:       <span class="ruby-identifier">filename</span> = <span class="ruby-value str">'dependencies/raises_exception'</span>
56:       <span class="ruby-identifier">$raises_exception_load_count</span> = <span class="ruby-value">0</span>
57: 
58:       <span class="ruby-value">5</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">count</span><span class="ruby-operator">|</span>
59:         <span class="ruby-keyword kw">begin</span>
60:           <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span>
61:           <span class="ruby-identifier">flunk</span> <span class="ruby-value str">'should have loaded dependencies/raises_exception which raises an exception'</span>
62:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
63:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Loading me failed, so do not add to loaded or history.'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
64:         <span class="ruby-keyword kw">end</span>
65:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$raises_exception_load_count</span>
66: 
67:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
68:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
69:       <span class="ruby-keyword kw">end</span>
70:     <span class="ruby-keyword kw">end</span>
71:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005016" class="method">
  <div id="M005016_title" class="title">
    <b>test_directories_manifest_as_modules_unless_const_defined</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005016_source')" id="l_M005016_source">show source</a> ]</p>
  <div id="M005016_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_directories_manifest_as_modules_unless_const_defined</span>
147:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
148:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-constant">ModuleFolder</span>
149:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
150:     <span class="ruby-keyword kw">end</span>
151:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005019" class="method">
  <div id="M005019_title" class="title">
    <b>test_directories_may_manifest_as_nested_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005019_source')" id="l_M005019_source">show source</a> ]</p>
  <div id="M005019_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 167</span>
167:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_directories_may_manifest_as_nested_classes</span>
168:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
169:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span>
170:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
171:     <span class="ruby-keyword kw">end</span>
172:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005036" class="method">
  <div id="M005036_title" class="title">
    <b>test_file_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005036_source')" id="l_M005036_source">show source</a> ]</p>
  <div id="M005036_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 333</span>
333:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_search</span>
334:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
335:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
336:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_three'</span>)
337:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_three.rb'</span>)
338:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/service_one.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_one'</span>)
339:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/service_one.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_one.rb'</span>)
340:     <span class="ruby-keyword kw">end</span>
341:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005037" class="method">
  <div id="M005037_title" class="title">
    <b>test_file_search_uses_first_in_load_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005037_source')" id="l_M005037_source">show source</a> ]</p>
  <div id="M005037_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 343</span>
343:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_search_uses_first_in_load_path</span>
344:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span>, <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
345:       <span class="ruby-identifier">deps</span>, <span class="ruby-identifier">autoload</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
346:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/dependencies/</span>, <span class="ruby-identifier">deps</span>
347:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/autoloading_fixtures/</span>, <span class="ruby-identifier">autoload</span>
348: 
349:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">deps</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/conflict.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'conflict'</span>)
350:     <span class="ruby-keyword kw">end</span>
351:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span>, <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
352:       <span class="ruby-identifier">autoload</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
353:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/dependencies/</span>, <span class="ruby-identifier">deps</span>
354:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/autoloading_fixtures/</span>, <span class="ruby-identifier">autoload</span>
355: 
356:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">autoload</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/conflict.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'conflict'</span>)
357:     <span class="ruby-keyword kw">end</span>
358: 
359:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005058" class="method">
  <div id="M005058_title" class="title">
    <b>test_file_with_multiple_constants_and_auto_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005058_source')" id="l_M005058_source">show source</a> ]</p>
  <div id="M005058_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 611</span>
611:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_with_multiple_constants_and_auto_loading</span>
612:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
613:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
614:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
615: 
616:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, <span class="ruby-constant">MultipleConstantFile</span>
617: 
618:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
619:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
620:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:MultipleConstantFile</span>)
621:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:SiblingConstant</span>)
622: 
623:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
624: 
625:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
626:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
627:     <span class="ruby-keyword kw">end</span>
628:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005057" class="method">
  <div id="M005057_title" class="title">
    <b>test_file_with_multiple_constants_and_require_dependency</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005057_source')" id="l_M005057_source">show source</a> ]</p>
  <div id="M005057_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 593</span>
593:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_with_multiple_constants_and_require_dependency</span>
594:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
595:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
596:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
597: 
598:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'multiple_constant_file'</span>
599:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
600:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
601:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:MultipleConstantFile</span>)
602:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:SiblingConstant</span>)
603: 
604:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
605: 
606:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
607:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
608:     <span class="ruby-keyword kw">end</span>
609:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005068" class="method">
  <div id="M005068_title" class="title">
    <b>test_hook_called_multiple_times</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005068_source')" id="l_M005068_source">show source</a> ]</p>
  <div id="M005068_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hook_called_multiple_times</span>
767:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">hook!</span> }
768:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005066" class="method">
  <div id="M005066_title" class="title">
    <b>test_load_once_constants_should_not_be_unloaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005066_source')" id="l_M005066_source">show source</a> ]</p>
  <div id="M005066_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 737</span>
737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_constants_should_not_be_unloaded</span>
738:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
739:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
740:       <span class="ruby-operator">::</span><span class="ruby-constant">A</span>.<span class="ruby-identifier">to_s</span>
741:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">A</span>)
742:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
743:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">A</span>)
744:     <span class="ruby-keyword kw">end</span>
745:   <span class="ruby-keyword kw">ensure</span>
746:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
747:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:A</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:A</span>) }
748:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005043" class="method">
  <div id="M005043_title" class="title">
    <b>test_load_once_paths_do_not_add_to_autoloaded_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005043_source')" id="l_M005043_source">show source</a> ]</p>
  <div id="M005043_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 431</span>
431:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_paths_do_not_add_to_autoloaded_constants</span>
432:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
433:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">dup</span>
434: 
435:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
436:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
437:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span>)
438: 
439:       <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span> <span class="ruby-comment cmt"># 1 if to avoid warning</span>
440:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
441:     <span class="ruby-keyword kw">end</span>
442:   <span class="ruby-keyword kw">ensure</span>
443:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:ModuleFolder</span> }
444:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
445:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005067" class="method">
  <div id="M005067_title" class="title">
    <b>test_load_once_paths_should_behave_when_recursively_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005067_source')" id="l_M005067_source">show source</a> ]</p>
  <div id="M005067_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 750</span>
750:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_paths_should_behave_when_recursively_loading</span>
751:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span>, <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
752:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = [<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">last</span>]
753:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>)
754:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">CrossSiteDepender</span>.<span class="ruby-identifier">nil?</span> }
755:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>)
756:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">CrossSiteDependency</span>),
757:         <span class="ruby-value str">&quot;CrossSiteDependency shouldn't be marked as autoloaded!&quot;</span>
758:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
759:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>),
760:         <span class="ruby-value str">&quot;CrossSiteDependency shouldn't have been unloaded!&quot;</span>
761:     <span class="ruby-keyword kw">end</span>
762:   <span class="ruby-keyword kw">ensure</span>
763:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
764:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005027" class="method">
  <div id="M005027_title" class="title">
    <b>test_loadable_constants_for_path_should_handle_empty_autoloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005027_source')" id="l_M005027_source">show source</a> ]</p>
  <div id="M005027_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 241</span>
241:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_handle_empty_autoloads</span>
242:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-value str">'hello'</span>)
243:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005028" class="method">
  <div id="M005028_title" class="title">
    <b>test_loadable_constants_for_path_should_handle_relative_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005028_source')" id="l_M005028_source">show source</a> ]</p>
  <div id="M005028_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_handle_relative_paths</span>
246:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'dependencies'</span>
247:     <span class="ruby-identifier">relative_root</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'/dependencies'</span>
248:     [<span class="ruby-value str">''</span>, <span class="ruby-value str">'/'</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">suffix</span><span class="ruby-operator">|</span>
249:       <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">suffix</span> <span class="ruby-keyword kw">do</span>
250:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">relative_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/a/b'</span>)
251:       <span class="ruby-keyword kw">end</span>
252:     <span class="ruby-keyword kw">end</span>
253:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005029" class="method">
  <div id="M005029_title" class="title">
    <b>test_loadable_constants_for_path_should_provide_all_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005029_source')" id="l_M005029_source">show source</a> ]</p>
  <div id="M005029_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 255</span>
255:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_provide_all_results</span>
256:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'/usr/apps/backpack'</span>
257:     <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span>, <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/lib'</span> <span class="ruby-keyword kw">do</span>
258:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
259:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Lib::A::B&quot;</span>, <span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/lib/a/b'</span>)
260:     <span class="ruby-keyword kw">end</span>
261:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005030" class="method">
  <div id="M005030_title" class="title">
    <b>test_loadable_constants_for_path_should_uniq_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005030_source')" id="l_M005030_source">show source</a> ]</p>
  <div id="M005030_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 263</span>
263:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_uniq_results</span>
264:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'/usr/apps/backpack/lib'</span>
265:     <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span>, <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">do</span>
266:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
267:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/a/b'</span>)
268:     <span class="ruby-keyword kw">end</span>
269:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005031" class="method">
  <div id="M005031_title" class="title">
    <b>test_loadable_constants_with_load_path_without_trailing_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005031_source')" id="l_M005031_source">show source</a> ]</p>
  <div id="M005031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 271</span>
271:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_with_load_path_without_trailing_slash</span>
272:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'/autoloading_fixtures/class_folder/inline_class.rb'</span>
273:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures/class/'</span> <span class="ruby-keyword kw">do</span>
274:       <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">path</span>)
275:     <span class="ruby-keyword kw">end</span>
276:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005009" class="method">
  <div id="M005009_title" class="title">
    <b>test_missing_association_raises_nothing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005009_source')" id="l_M005009_source">show source</a> ]</p>
  <div id="M005009_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_missing_association_raises_nothing</span>
50:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_association</span>(<span class="ruby-value str">&quot;missing_model&quot;</span>) }
51:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005008" class="method">
  <div id="M005008_title" class="title">
    <b>test_missing_dependency_raises_missing_source_file</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005008_source')" id="l_M005008_source">show source</a> ]</p>
  <div id="M005008_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_missing_dependency_raises_missing_source_file</span>
46:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">MissingSourceFile</span>) { <span class="ruby-identifier">require_dependency</span>(<span class="ruby-value str">&quot;missing_service&quot;</span>) }
47:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005014" class="method">
  <div id="M005014_title" class="title">
    <b>test_module_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005014_source')" id="l_M005014_source">show source</a> ]</p>
  <div id="M005014_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_loading</span>
129:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
130:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-constant">A</span>
131:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
132:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span><span class="ruby-operator">::</span><span class="ruby-constant">D</span>
133:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span><span class="ruby-operator">::</span><span class="ruby-constant">F</span>
134:     <span class="ruby-keyword kw">end</span>
135:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005017" class="method">
  <div id="M005017_title" class="title">
    <b>test_module_with_nested_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005017_source')" id="l_M005017_source">show source</a> ]</p>
  <div id="M005017_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 153</span>
153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_with_nested_class</span>
154:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
155:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
156:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
157:     <span class="ruby-keyword kw">end</span>
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005018" class="method">
  <div id="M005018_title" class="title">
    <b>test_module_with_nested_inline_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005018_source')" id="l_M005018_source">show source</a> ]</p>
  <div id="M005018_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_with_nested_inline_class</span>
161:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
162:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">InlineClass</span>
163:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
164:     <span class="ruby-keyword kw">end</span>
165:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005012" class="method">
  <div id="M005012_title" class="title">
    <b>test_mutual_dependencies_dont_infinite_loop</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005012_source')" id="l_M005012_source">show source</a> ]</p>
  <div id="M005012_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 110</span>
110:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mutual_dependencies_dont_infinite_loop</span>
111:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
112:       <span class="ruby-identifier">$mutual_dependencies_count</span> = <span class="ruby-value">0</span>
113:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'mutual_one'</span> }
114:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$mutual_dependencies_count</span>
115: 
116:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
117: 
118:       <span class="ruby-identifier">$mutual_dependencies_count</span> = <span class="ruby-value">0</span>
119:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'mutual_two'</span> }
120:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$mutual_dependencies_count</span>
121:     <span class="ruby-keyword kw">end</span>
122:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005023" class="method">
  <div id="M005023_title" class="title">
    <b>test_nested_class_can_access_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005023_source')" id="l_M005023_source">show source</a> ]</p>
  <div id="M005023_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 197</span>
197:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_class_can_access_sibling</span>
198:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
199:       <span class="ruby-identifier">sibling</span> = <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-value str">&quot;NestedSibling&quot;</span>
200:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedSibling</span>)
201:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedSibling</span>, <span class="ruby-identifier">sibling</span>
202:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
203:     <span class="ruby-keyword kw">end</span>
204:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005060" class="method">
  <div id="M005060_title" class="title">
    <b>test_nested_file_with_multiple_constants_and_auto_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005060_source')" id="l_M005060_source">show source</a> ]</p>
  <div id="M005060_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 649</span>
649:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_file_with_multiple_constants_and_auto_loading</span>
650:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
651:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
652:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
653: 
654:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
655: 
656:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
657:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
658:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::NestedClass&quot;</span>)
659:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::SiblingClass&quot;</span>)
660: 
661:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
662: 
663:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
664:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
665:     <span class="ruby-keyword kw">end</span>
666:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005059" class="method">
  <div id="M005059_title" class="title">
    <b>test_nested_file_with_multiple_constants_and_require_dependency</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005059_source')" id="l_M005059_source">show source</a> ]</p>
  <div id="M005059_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 630</span>
630:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_file_with_multiple_constants_and_require_dependency</span>
631:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
632:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
633:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
634: 
635:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'class_folder/nested_class'</span>
636: 
637:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
638:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
639:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::NestedClass&quot;</span>)
640:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::SiblingClass&quot;</span>)
641: 
642:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
643: 
644:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
645:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
646:     <span class="ruby-keyword kw">end</span>
647:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005042" class="method">
  <div id="M005042_title" class="title">
    <b>test_nested_load_error_isnt_rescued</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005042_source')" id="l_M005042_source">show source</a> ]</p>
  <div id="M005042_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 423</span>
423:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_load_error_isnt_rescued</span>
424:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
425:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">MissingSourceFile</span>) <span class="ruby-keyword kw">do</span>
426:         <span class="ruby-constant">RequiresNonexistent1</span>
427:       <span class="ruby-keyword kw">end</span>
428:     <span class="ruby-keyword kw">end</span>
429:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005053" class="method">
  <div id="M005053_title" class="title">
    <b>test_new_constants_in_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005053_source')" id="l_M005053_source">show source</a> ]</p>
  <div id="M005053_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 543</span>
543:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_module</span>
544:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
545: 
546:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">M</span>) <span class="ruby-keyword kw">do</span>
547:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
548: 
549:       <span class="ruby-identifier">inner</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">M</span>) <span class="ruby-keyword kw">do</span>
550:         <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
551:       <span class="ruby-keyword kw">end</span>
552:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::Inner&quot;</span>], <span class="ruby-identifier">inner</span>
553: 
554:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
555:     <span class="ruby-keyword kw">end</span>
556:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::OuterAfter&quot;</span>, <span class="ruby-value str">&quot;M::OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>
557:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
558:   <span class="ruby-keyword kw">ensure</span>
559:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:M</span> }
560:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005054" class="method">
  <div id="M005054_title" class="title">
    <b>test_new_constants_in_module_using_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005054_source')" id="l_M005054_source">show source</a> ]</p>
  <div id="M005054_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 562</span>
562:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_module_using_name</span>
563:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:M</span>) <span class="ruby-keyword kw">do</span>
564:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
565:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
566: 
567:       <span class="ruby-identifier">inner</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:M</span>) <span class="ruby-keyword kw">do</span>
568:         <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
569:       <span class="ruby-keyword kw">end</span>
570:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::Inner&quot;</span>], <span class="ruby-identifier">inner</span>
571: 
572:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
573:     <span class="ruby-keyword kw">end</span>
574:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::OuterAfter&quot;</span>, <span class="ruby-value str">&quot;M::OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>
575:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
576:   <span class="ruby-keyword kw">ensure</span>
577:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:M</span> }
578:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005051" class="method">
  <div id="M005051_title" class="title">
    <b>test_new_constants_in_with_a_single_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005051_source')" id="l_M005051_source">show source</a> ]</p>
  <div id="M005051_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 515</span>
515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_a_single_constant</span>
516:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Hello&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) {
517:                               <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Hello</span>, <span class="ruby-value">10</span>
518:                             }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
519:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
520:   <span class="ruby-keyword kw">ensure</span>
521:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:Hello</span> }
522:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005056" class="method">
  <div id="M005056_title" class="title">
    <b>test_new_constants_in_with_illegal_module_name_raises_correct_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005056_source')" id="l_M005056_source">show source</a> ]</p>
  <div id="M005056_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 587</span>
587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_illegal_module_name_raises_correct_error</span>
588:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) <span class="ruby-keyword kw">do</span>
589:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-value str">&quot;Illegal-Name&quot;</span>) {}
590:     <span class="ruby-keyword kw">end</span>
591:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005055" class="method">
  <div id="M005055_title" class="title">
    <b>test_new_constants_in_with_inherited_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005055_source')" id="l_M005055_source">show source</a> ]</p>
  <div id="M005055_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 580</span>
580:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_inherited_constants</span>
581:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:Object</span>) <span class="ruby-keyword kw">do</span>
582:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ModuleWithConstant</span> }
583:     <span class="ruby-keyword kw">end</span>
584:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">m</span>
585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005052" class="method">
  <div id="M005052_title" class="title">
    <b>test_new_constants_in_with_nesting</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005052_source')" id="l_M005052_source">show source</a> ]</p>
  <div id="M005052_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 524</span>
524:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_nesting</span>
525:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span>
526:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
527: 
528:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Inner&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) {
529:                                 <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
530:                               }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
531: 
532:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
533:     <span class="ruby-keyword kw">end</span>
534: 
535:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;OuterAfter&quot;</span>, <span class="ruby-value str">&quot;OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
536:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
537:   <span class="ruby-keyword kw">ensure</span>
538:     <span class="ruby-node">%w(OuterBefore Inner OuterAfter)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
539:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">name</span>) }
540:     <span class="ruby-keyword kw">end</span>
541:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005050" class="method">
  <div id="M005050_title" class="title">
    <b>test_new_contants_in_without_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005050_source')" id="l_M005050_source">show source</a> ]</p>
  <div id="M005050_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 510</span>
510:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_contants_in_without_constants</span>
511:     <span class="ruby-identifier">assert_equal</span> [], (<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) { })
512:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
513:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005015" class="method">
  <div id="M005015_title" class="title">
    <b>test_non_existing_const_raises_name_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005015_source')" id="l_M005015_source">show source</a> ]</p>
  <div id="M005015_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 137</span>
137:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existing_const_raises_name_error</span>
138:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
139:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">DoesNotExist</span> }
140:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">NoModule</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
141:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
142:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
143:     <span class="ruby-keyword kw">end</span>
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005025" class="method">
  <div id="M005025_title" class="title">
    <b>test_non_existing_const_raises_name_error_with_fully_qualified_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005025_source')" id="l_M005025_source">show source</a> ]</p>
  <div id="M005025_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 215</span>
215:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existing_const_raises_name_error_with_fully_qualified_name</span>
216:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
217:       <span class="ruby-keyword kw">begin</span>
218:         <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span>.<span class="ruby-identifier">nil?</span>
219:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
220:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
221:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;uninitialized constant A::DoesNotExist&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
222:       <span class="ruby-keyword kw">end</span>
223:       <span class="ruby-keyword kw">begin</span>
224:         <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span>.<span class="ruby-identifier">nil?</span>
225:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
226:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
227:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;uninitialized constant A::B::DoesNotExist&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
228:       <span class="ruby-keyword kw">end</span>
229:     <span class="ruby-keyword kw">end</span>
230:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005046" class="method">
  <div id="M005046_title" class="title">
    <b>test_preexisting_constants_are_not_marked_as_autoloaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005046_source')" id="l_M005046_source">show source</a> ]</p>
  <div id="M005046_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 463</span>
463:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preexisting_constants_are_not_marked_as_autoloaded</span>
464:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
465:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'e'</span>
466:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:E</span>)
467:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
468:     <span class="ruby-keyword kw">end</span>
469: 
470:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:E</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>
471:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
472:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'e'</span>
473:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:E</span>), <span class="ruby-value str">&quot;E shouldn't be marked autoloaded!&quot;</span>
474:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
475:     <span class="ruby-keyword kw">end</span>
476: 
477:   <span class="ruby-keyword kw">ensure</span>
478:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:E</span> }
479:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005032" class="method">
  <div id="M005032_title" class="title">
    <b>test_qualified_const_defined</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005032_source')" id="l_M005032_source">show source</a> ]</p>
  <div id="M005032_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 278</span>
278:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_qualified_const_defined</span>
279:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;Object&quot;</span>)
280:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Object&quot;</span>)
281:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Object::Kernel&quot;</span>)
282:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Test::Unit::TestCase&quot;</span>)
283:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005033" class="method">
  <div id="M005033_title" class="title">
    <b>test_qualified_const_defined_should_not_call_method_missing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005033_source')" id="l_M005033_source">show source</a> ]</p>
  <div id="M005033_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_qualified_const_defined_should_not_call_method_missing</span>
286:     <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span> = <span class="ruby-value">0</span>
287:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;ModuleWithMissing::A&quot;</span>)
288:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span>
289:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;ModuleWithMissing::A::B&quot;</span>)
290:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span>
291:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005035" class="method">
  <div id="M005035_title" class="title">
    <b>test_qualified_name_for</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005035_source')" id="l_M005035_source">show source</a> ]</p>
  <div id="M005035_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_qualified_name_for</span><span class="ruby-identifier">test_qualified_name_for</span>
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-constant">Object</span>, <span class="ruby-identifier">:A</span>)
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-identifier">:Object</span>, <span class="ruby-identifier">:A</span>)
325:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;Object&quot;</span>, <span class="ruby-identifier">:A</span>)
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;::Object&quot;</span>, <span class="ruby-identifier">:A</span>)
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;::Kernel&quot;</span>, <span class="ruby-identifier">:A</span>)
328: 
329:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ActiveSupport::Dependencies::A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">'ActiveSupport::Dependencies'</span><span class="ruby-value str">'ActiveSupport::Dependencies'</span>, <span class="ruby-identifier">:A</span>)
330:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ActiveSupport::Dependencies::A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>, <span class="ruby-identifier">:A</span>)
331:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005041" class="method">
  <div id="M005041_title" class="title">
    <b>test_removal_from_tree_should_be_detected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005041_source')" id="l_M005041_source">show source</a> ]</p>
  <div id="M005041_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 408</span>
408:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_removal_from_tree_should_be_detected</span>
409:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
410:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
411:       <span class="ruby-identifier">c</span> = <span class="ruby-constant">ServiceOne</span>
412:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
413:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ServiceOne</span>)
414:       <span class="ruby-keyword kw">begin</span>
415:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_missing_constant</span>(<span class="ruby-identifier">c</span>, <span class="ruby-identifier">:FakeMissing</span>)
416:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;Expected exception&quot;</span>
417:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
418:         <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{ServiceOne has been removed from the module tree}i</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
419:       <span class="ruby-keyword kw">end</span>
420:     <span class="ruby-keyword kw">end</span>
421:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005065" class="method">
  <div id="M005065_title" class="title">
    <b>test_remove_constant_handles_double_colon_at_start</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005065_source')" id="l_M005065_source">show source</a> ]</p>
  <div id="M005065_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 727</span>
727:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_constant_handles_double_colon_at_start</span>
728:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value str">'DeleteMe'</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
729:     <span class="ruby-constant">DeleteMe</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value str">'OrMe'</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
730:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">remove_constant</span> <span class="ruby-value str">&quot;::DeleteMe::OrMe&quot;</span>
731:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span><span class="ruby-operator">::</span><span class="ruby-constant">OrMe</span>)
732:     <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span>)
733:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">remove_constant</span> <span class="ruby-value str">&quot;::DeleteMe&quot;</span>
734:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span>)
735:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005026" class="method">
  <div id="M005026_title" class="title">
    <b>test_smart_name_error_strings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005026_source')" id="l_M005026_source">show source</a> ]</p>
  <div id="M005026_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 232</span>
232:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_smart_name_error_strings</span>
233:     <span class="ruby-keyword kw">begin</span>
234:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;ImaginaryObject&quot;</span>
235:       <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
236:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
237:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;uninitialized constant ImaginaryObject&quot;</span>)
238:     <span class="ruby-keyword kw">end</span>
239:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005007" class="method">
  <div id="M005007_title" class="title">
    <b>test_tracking_identical_loaded_files</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005007_source')" id="l_M005007_source">show source</a> ]</p>
  <div id="M005007_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tracking_identical_loaded_files</span>
40:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
41:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
42:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">size</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005006" class="method">
  <div id="M005006_title" class="title">
    <b>test_tracking_loaded_files</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005006_source')" id="l_M005006_source">show source</a> ]</p>
  <div id="M005006_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tracking_loaded_files</span>
34:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
35:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_two'</span>
36:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">size</span>
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005069" class="method">
  <div id="M005069_title" class="title">
    <b>test_unhook</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005069_source')" id="l_M005069_source">show source</a> ]</p>
  <div id="M005069_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 770</span>
770:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unhook</span>
771:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">unhook!</span>
772:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:const_missing_without_dependencies</span>)
773:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:load_without_new_constant_marking</span>)
774:   <span class="ruby-keyword kw">ensure</span>
775:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">hook!</span>
776:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005047" class="method">
  <div id="M005047_title" class="title">
    <b>test_unloadable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005047_source')" id="l_M005047_source">show source</a> ]</p>
  <div id="M005047_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 481</span>
481:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable</span>
482:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
483:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
484:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
485: 
486:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
487:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">M</span>)
488: 
489:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
490:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
491:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">M</span>), <span class="ruby-value str">&quot;Dependencies should unload unloadable constants each time&quot;</span>
492:     <span class="ruby-keyword kw">end</span>
493:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005048" class="method">
  <div id="M005048_title" class="title">
    <b>test_unloadable_should_fail_with_anonymous_modules</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005048_source')" id="l_M005048_source">show source</a> ]</p>
  <div id="M005048_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 495</span>
495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable_should_fail_with_anonymous_modules</span>
496:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
497:       <span class="ruby-identifier">m</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
498:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-identifier">m</span>.<span class="ruby-identifier">unloadable</span> }
499:     <span class="ruby-keyword kw">end</span>
500:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005049" class="method">
  <div id="M005049_title" class="title">
    <b>test_unloadable_should_return_change_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005049_source')" id="l_M005049_source">show source</a> ]</p>
  <div id="M005049_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 502</span>
502:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable_should_return_change_flag</span>
503:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
504:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
505:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
506:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
507:     <span class="ruby-keyword kw">end</span>
508:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005011" class="method">
  <div id="M005011_title" class="title">
    <b>test_warnings_should_be_enabled_on_first_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005011_source')" id="l_M005011_source">show source</a> ]</p>
  <div id="M005011_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 73</span>
 73:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_warnings_should_be_enabled_on_first_load</span>
 74:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
 75:       <span class="ruby-identifier">old_warnings</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">warnings_on_first_load</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">warnings_on_first_load</span>, <span class="ruby-keyword kw">true</span>
 76: 
 77:       <span class="ruby-identifier">filename</span> = <span class="ruby-value str">&quot;check_warnings&quot;</span>
 78:       <span class="ruby-identifier">expanded</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-node">&quot;test/dependencies/#{filename}&quot;</span>)
 79:       <span class="ruby-identifier">$check_warnings_load_count</span> = <span class="ruby-value">0</span>
 80: 
 81:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 82:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 83: 
 84:       <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
 85:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
 86:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'On first load warnings should be enabled.'</span>
 87: 
 88:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 89:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
 90:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 91:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 92: 
 93:       <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
 94:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
 95:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'After first load warnings should be left alone.'</span>
 96: 
 97:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 98:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
 99:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
100:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
101: 
102:       <span class="ruby-identifier">enable_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
103:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
104:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'After first load warnings should be left alone.'</span>
105: 
106:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
107:     <span class="ruby-keyword kw">end</span>
108:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005005" class="method">
  <div id="M005005_title" class="title">
    <b>with_loading</b>(*from) {|| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005005_source')" id="l_M005005_source">show source</a> ]</p>
  <div id="M005005_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_loading</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">from</span>)
22:     <span class="ruby-identifier">old_mechanism</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span>, <span class="ruby-identifier">:load</span>
23:     <span class="ruby-identifier">dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>)
24:     <span class="ruby-identifier">prior_load_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
25:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span> = <span class="ruby-identifier">from</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{dir}/#{f}&quot;</span> }
26:     <span class="ruby-keyword kw">yield</span>
27:   <span class="ruby-keyword kw">ensure</span>
28:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span> = <span class="ruby-identifier">prior_load_paths</span>
29:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-identifier">old_mechanism</span>
30:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">explicitly_unloadable_constants</span> = []
31:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>