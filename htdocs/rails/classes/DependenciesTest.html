  <div id="C00000711">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />DependenciesTest<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/dependencies_test_rb.html');">activesupport/test/dependencies_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005090&name=failing_test_access_thru_and_upwards_fails" >failing_test_access_thru_and_upwards_fails</a></li>
  <li><a href="index.html?a=M005069&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005110&name=test_application_should_special_case_application_controller" >test_application_should_special_case_application_controller</a></li>
  <li><a href="index.html?a=M005079&name=test_as_load_path" >test_as_load_path</a></li>
  <li><a href="index.html?a=M005129&name=test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load" >test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</a></li>
  <li><a href="index.html?a=M005130&name=test_autoload_doesnt_shadow_name_error" >test_autoload_doesnt_shadow_name_error</a></li>
  <li><a href="index.html?a=M005128&name=test_autoload_doesnt_shadow_no_method_error_with_absolute_constant" >test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</a></li>
  <li><a href="index.html?a=M005127&name=test_autoload_doesnt_shadow_no_method_error_with_relative_constant" >test_autoload_doesnt_shadow_no_method_error_with_relative_constant</a></li>
  <li><a href="index.html?a=M005100&name=test_autoloaded?" >test_autoloaded?</a></li>
  <li><a href="index.html?a=M005086&name=test_class_with_nested_class" >test_class_with_nested_class</a></li>
  <li><a href="index.html?a=M005087&name=test_class_with_nested_inline_class" >test_class_with_nested_inline_class</a></li>
  <li><a href="index.html?a=M005088&name=test_class_with_nested_inline_subclass_of_parent" >test_class_with_nested_inline_subclass_of_parent</a></li>
  <li><a href="index.html?a=M005111&name=test_const_missing_on_kernel_should_fallback_to_object" >test_const_missing_on_kernel_should_fallback_to_object</a></li>
  <li><a href="index.html?a=M005105&name=test_const_missing_should_not_double_load" >test_const_missing_should_not_double_load</a></li>
  <li><a href="index.html?a=M005106&name=test_const_missing_within_anonymous_module" >test_const_missing_within_anonymous_module</a></li>
  <li><a href="index.html?a=M005104&name=test_custom_const_missing_should_work" >test_custom_const_missing_should_work</a></li>
  <li><a href="index.html?a=M005076&name=test_dependency_which_raises_exception_isnt_added_to_loaded_set" >test_dependency_which_raises_exception_isnt_added_to_loaded_set</a></li>
  <li><a href="index.html?a=M005082&name=test_directories_manifest_as_modules_unless_const_defined" >test_directories_manifest_as_modules_unless_const_defined</a></li>
  <li><a href="index.html?a=M005085&name=test_directories_may_manifest_as_nested_classes" >test_directories_may_manifest_as_nested_classes</a></li>
  <li><a href="index.html?a=M005102&name=test_file_search" >test_file_search</a></li>
  <li><a href="index.html?a=M005103&name=test_file_search_uses_first_in_load_path" >test_file_search_uses_first_in_load_path</a></li>
  <li><a href="index.html?a=M005124&name=test_file_with_multiple_constants_and_auto_loading" >test_file_with_multiple_constants_and_auto_loading</a></li>
  <li><a href="index.html?a=M005123&name=test_file_with_multiple_constants_and_require_dependency" >test_file_with_multiple_constants_and_require_dependency</a></li>
  <li><a href="index.html?a=M005134&name=test_hook_called_multiple_times" >test_hook_called_multiple_times</a></li>
  <li><a href="index.html?a=M005132&name=test_load_once_constants_should_not_be_unloaded" >test_load_once_constants_should_not_be_unloaded</a></li>
  <li><a href="index.html?a=M005109&name=test_load_once_paths_do_not_add_to_autoloaded_constants" >test_load_once_paths_do_not_add_to_autoloaded_constants</a></li>
  <li><a href="index.html?a=M005133&name=test_load_once_paths_should_behave_when_recursively_loading" >test_load_once_paths_should_behave_when_recursively_loading</a></li>
  <li><a href="index.html?a=M005093&name=test_loadable_constants_for_path_should_handle_empty_autoloads" >test_loadable_constants_for_path_should_handle_empty_autoloads</a></li>
  <li><a href="index.html?a=M005094&name=test_loadable_constants_for_path_should_handle_relative_paths" >test_loadable_constants_for_path_should_handle_relative_paths</a></li>
  <li><a href="index.html?a=M005095&name=test_loadable_constants_for_path_should_provide_all_results" >test_loadable_constants_for_path_should_provide_all_results</a></li>
  <li><a href="index.html?a=M005096&name=test_loadable_constants_for_path_should_uniq_results" >test_loadable_constants_for_path_should_uniq_results</a></li>
  <li><a href="index.html?a=M005097&name=test_loadable_constants_with_load_path_without_trailing_slash" >test_loadable_constants_with_load_path_without_trailing_slash</a></li>
  <li><a href="index.html?a=M005075&name=test_missing_association_raises_nothing" >test_missing_association_raises_nothing</a></li>
  <li><a href="index.html?a=M005074&name=test_missing_dependency_raises_missing_source_file" >test_missing_dependency_raises_missing_source_file</a></li>
  <li><a href="index.html?a=M005080&name=test_module_loading" >test_module_loading</a></li>
  <li><a href="index.html?a=M005083&name=test_module_with_nested_class" >test_module_with_nested_class</a></li>
  <li><a href="index.html?a=M005084&name=test_module_with_nested_inline_class" >test_module_with_nested_inline_class</a></li>
  <li><a href="index.html?a=M005078&name=test_mutual_dependencies_dont_infinite_loop" >test_mutual_dependencies_dont_infinite_loop</a></li>
  <li><a href="index.html?a=M005089&name=test_nested_class_can_access_sibling" >test_nested_class_can_access_sibling</a></li>
  <li><a href="index.html?a=M005126&name=test_nested_file_with_multiple_constants_and_auto_loading" >test_nested_file_with_multiple_constants_and_auto_loading</a></li>
  <li><a href="index.html?a=M005125&name=test_nested_file_with_multiple_constants_and_require_dependency" >test_nested_file_with_multiple_constants_and_require_dependency</a></li>
  <li><a href="index.html?a=M005108&name=test_nested_load_error_isnt_rescued" >test_nested_load_error_isnt_rescued</a></li>
  <li><a href="index.html?a=M005119&name=test_new_constants_in_module" >test_new_constants_in_module</a></li>
  <li><a href="index.html?a=M005120&name=test_new_constants_in_module_using_name" >test_new_constants_in_module_using_name</a></li>
  <li><a href="index.html?a=M005117&name=test_new_constants_in_with_a_single_constant" >test_new_constants_in_with_a_single_constant</a></li>
  <li><a href="index.html?a=M005122&name=test_new_constants_in_with_illegal_module_name_raises_correct_error" >test_new_constants_in_with_illegal_module_name_raises_correct_error</a></li>
  <li><a href="index.html?a=M005121&name=test_new_constants_in_with_inherited_constants" >test_new_constants_in_with_inherited_constants</a></li>
  <li><a href="index.html?a=M005118&name=test_new_constants_in_with_nesting" >test_new_constants_in_with_nesting</a></li>
  <li><a href="index.html?a=M005116&name=test_new_contants_in_without_constants" >test_new_contants_in_without_constants</a></li>
  <li><a href="index.html?a=M005081&name=test_non_existing_const_raises_name_error" >test_non_existing_const_raises_name_error</a></li>
  <li><a href="index.html?a=M005091&name=test_non_existing_const_raises_name_error_with_fully_qualified_name" >test_non_existing_const_raises_name_error_with_fully_qualified_name</a></li>
  <li><a href="index.html?a=M005112&name=test_preexisting_constants_are_not_marked_as_autoloaded" >test_preexisting_constants_are_not_marked_as_autoloaded</a></li>
  <li><a href="index.html?a=M005098&name=test_qualified_const_defined" >test_qualified_const_defined</a></li>
  <li><a href="index.html?a=M005099&name=test_qualified_const_defined_should_not_call_method_missing" >test_qualified_const_defined_should_not_call_method_missing</a></li>
  <li><a href="index.html?a=M005101&name=test_qualified_name_for" >test_qualified_name_for</a></li>
  <li><a href="index.html?a=M005107&name=test_removal_from_tree_should_be_detected" >test_removal_from_tree_should_be_detected</a></li>
  <li><a href="index.html?a=M005131&name=test_remove_constant_handles_double_colon_at_start" >test_remove_constant_handles_double_colon_at_start</a></li>
  <li><a href="index.html?a=M005092&name=test_smart_name_error_strings" >test_smart_name_error_strings</a></li>
  <li><a href="index.html?a=M005073&name=test_tracking_identical_loaded_files" >test_tracking_identical_loaded_files</a></li>
  <li><a href="index.html?a=M005072&name=test_tracking_loaded_files" >test_tracking_loaded_files</a></li>
  <li><a href="index.html?a=M005135&name=test_unhook" >test_unhook</a></li>
  <li><a href="index.html?a=M005113&name=test_unloadable" >test_unloadable</a></li>
  <li><a href="index.html?a=M005114&name=test_unloadable_should_fail_with_anonymous_modules" >test_unloadable_should_fail_with_anonymous_modules</a></li>
  <li><a href="index.html?a=M005115&name=test_unloadable_should_return_change_flag" >test_unloadable_should_return_change_flag</a></li>
  <li><a href="index.html?a=M005077&name=test_warnings_should_be_enabled_on_first_load" >test_warnings_should_be_enabled_on_first_load</a></li>
  <li><a href="index.html?a=M005071&name=with_autoloading_fixtures" >with_autoloading_fixtures</a></li>
  <li><a href="index.html?a=M005070&name=with_loading" >with_loading</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/ModuleWithConstant.html');">ModuleWithConstant</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M005090" class="method">
  <div id="M005090_title" class="title">
    <b>failing_test_access_thru_and_upwards_fails</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005090_source')" id="l_M005090_source">show source</a> ]</p>
  <div id="M005090_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 212</span>
212:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">failing_test_access_thru_and_upwards_fails</span>
213:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
214:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ModuleFolder</span>)
215:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">Object</span> }
216:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span><span class="ruby-operator">::</span><span class="ruby-constant">Object</span> }
217:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
218:     <span class="ruby-keyword kw">end</span>
219:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005069" class="method">
  <div id="M005069_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005069_source')" id="l_M005069_source">show source</a> ]</p>
  <div id="M005069_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 17</span>
17:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
18:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
19:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005110" class="method">
  <div id="M005110_title" class="title">
    <b>test_application_should_special_case_application_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005110_source')" id="l_M005110_source">show source</a> ]</p>
  <div id="M005110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 453</span>
453:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_application_should_special_case_application_controller</span>
454:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
455:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'application'</span>
456:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, <span class="ruby-constant">ApplicationController</span>
457:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:ApplicationController</span>)
458:     <span class="ruby-keyword kw">end</span>
459:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005079" class="method">
  <div id="M005079_title" class="title">
    <b>test_as_load_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005079_source')" id="l_M005079_source">show source</a> ]</p>
  <div id="M005079_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_as_load_path</span>
131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-constant">DependenciesTest</span>.<span class="ruby-identifier">as_load_path</span>
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005129" class="method">
  <div id="M005129_title" class="title">
    <b>test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005129_source')" id="l_M005129_source">show source</a> ]</p>
  <div id="M005129_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 700</span>
700:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_error_when_mechanism_not_set_to_load</span>
701:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
702:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-identifier">:require</span>
703:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
704:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">123</span>, <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span><span class="ruby-operator">::</span><span class="ruby-constant">FooBarBaz</span> }
705:       <span class="ruby-keyword kw">end</span>
706:     <span class="ruby-keyword kw">end</span>
707:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005130" class="method">
  <div id="M005130_title" class="title">
    <b>test_autoload_doesnt_shadow_name_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005130_source')" id="l_M005130_source">show source</a> ]</p>
  <div id="M005130_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 709</span>
709:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_name_error</span>
710:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
711:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:RaisesNameError</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>)
712:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
713:         <span class="ruby-keyword kw">begin</span>
714:           <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span><span class="ruby-operator">::</span><span class="ruby-constant">FooBarBaz</span>.<span class="ruby-identifier">object_id</span>
715:           <span class="ruby-identifier">flunk</span> <span class="ruby-value str">'should have raised NameError when autoloaded file referenced FooBarBaz'</span>
716:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
717:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'uninitialized constant RaisesNameError::FooBarBaz'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
718:         <span class="ruby-keyword kw">end</span>
719:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>), <span class="ruby-value str">&quot;::RaisesNameError is defined but it should have failed!&quot;</span>
720:       <span class="ruby-keyword kw">end</span>
721: 
722:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>)
723:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
724:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span> }
725:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNameError</span>), <span class="ruby-value str">&quot;::RaisesNameError is defined but it should have failed!&quot;</span>
726:       <span class="ruby-keyword kw">end</span>
727:     <span class="ruby-keyword kw">end</span>
728: 
729:   <span class="ruby-keyword kw">ensure</span>
730:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
731:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005128" class="method">
  <div id="M005128_title" class="title">
    <b>test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005128_source')" id="l_M005128_source">show source</a> ]</p>
  <div id="M005128_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 687</span>
687:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_no_method_error_with_absolute_constant</span>
688:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
689:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it hasn't been referenced yet!&quot;</span>
690:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
691:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span> }
692:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it should have failed!&quot;</span>
693:       <span class="ruby-keyword kw">end</span>
694:     <span class="ruby-keyword kw">end</span>
695: 
696:   <span class="ruby-keyword kw">ensure</span>
697:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
698:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005127" class="method">
  <div id="M005127_title" class="title">
    <b>test_autoload_doesnt_shadow_no_method_error_with_relative_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005127_source')" id="l_M005127_source">show source</a> ]</p>
  <div id="M005127_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 674</span>
674:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoload_doesnt_shadow_no_method_error_with_relative_constant</span>
675:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
676:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it hasn't been referenced yet!&quot;</span>
677:       <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
678:         <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">RaisesNoMethodError</span> }
679:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-operator">::</span><span class="ruby-constant">RaisesNoMethodError</span>), <span class="ruby-value str">&quot;::RaisesNoMethodError is defined but it should have failed!&quot;</span>
680:       <span class="ruby-keyword kw">end</span>
681:     <span class="ruby-keyword kw">end</span>
682: 
683:   <span class="ruby-keyword kw">ensure</span>
684:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:RaisesNoMethodError</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:RaisesNoMethodError</span>) }
685:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005100" class="method">
  <div id="M005100_title" class="title">
    <b>test_autoloaded?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005100_source')" id="l_M005100_source">show source</a> ]</p>
  <div id="M005100_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 299</span>
299:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoloaded?</span>
300:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
301:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
302:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
303: 
304:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span>)
305: 
306:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
307:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
308: 
309:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
310: 
311:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
312:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
313: 
314:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;::ModuleFolder&quot;</span>)
315:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:ModuleFolder</span>)
316: 
317:       <span class="ruby-comment cmt"># Anonymous modules aren't autoloaded.</span>
318:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>)
319: 
320:       <span class="ruby-identifier">nil_name</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
321:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">nil_name</span>.<span class="ruby-identifier">name</span>() <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">end</span>
322:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">nil_name</span>)
323: 
324:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:ModuleFolder</span> }
325:     <span class="ruby-keyword kw">end</span>
326:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005086" class="method">
  <div id="M005086_title" class="title">
    <b>test_class_with_nested_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005086_source')" id="l_M005086_source">show source</a> ]</p>
  <div id="M005086_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_class</span>
181:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
182:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
183:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
184:     <span class="ruby-keyword kw">end</span>
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005087" class="method">
  <div id="M005087_title" class="title">
    <b>test_class_with_nested_inline_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005087_source')" id="l_M005087_source">show source</a> ]</p>
  <div id="M005087_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_inline_class</span>
188:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
189:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">InlineClass</span>
190:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
191:     <span class="ruby-keyword kw">end</span>
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005088" class="method">
  <div id="M005088_title" class="title">
    <b>test_class_with_nested_inline_subclass_of_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005088_source')" id="l_M005088_source">show source</a> ]</p>
  <div id="M005088_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_with_nested_inline_subclass_of_parent</span>
195:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
196:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassFolderSubclass</span>
197:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span>
198:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'indeed'</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassFolderSubclass</span><span class="ruby-operator">::</span><span class="ruby-constant">ConstantInClassFolder</span>
199:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
200:     <span class="ruby-keyword kw">end</span>
201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005111" class="method">
  <div id="M005111_title" class="title">
    <b>test_const_missing_on_kernel_should_fallback_to_object</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005111_source')" id="l_M005111_source">show source</a> ]</p>
  <div id="M005111_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 461</span>
461:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_on_kernel_should_fallback_to_object</span>
462:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
463:       <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Kernel</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span>
464:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;E&quot;</span>, <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">name</span>
465:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">object_id</span>, <span class="ruby-constant">Kernel</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span>.<span class="ruby-identifier">object_id</span>
466:     <span class="ruby-keyword kw">end</span>
467:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005105" class="method">
  <div id="M005105_title" class="title">
    <b>test_const_missing_should_not_double_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005105_source')" id="l_M005105_source">show source</a> ]</p>
  <div id="M005105_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_should_not_double_load</span>
388:     <span class="ruby-identifier">$counting_loaded_times</span> = <span class="ruby-value">0</span>
389:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
390:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'././counting_loader'</span>
391:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
392:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_missing_constant</span> <span class="ruby-constant">Object</span>, <span class="ruby-identifier">:CountingLoader</span> }
393:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
394:     <span class="ruby-keyword kw">end</span>
395:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005106" class="method">
  <div id="M005106_title" class="title">
    <b>test_const_missing_within_anonymous_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005106_source')" id="l_M005106_source">show source</a> ]</p>
  <div id="M005106_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_const_missing_within_anonymous_module</span>
398:     <span class="ruby-identifier">$counting_loaded_times</span> = <span class="ruby-value">0</span>
399:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
400:     <span class="ruby-identifier">m</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;def a() CountingLoader; end&quot;</span>
401:     <span class="ruby-identifier">extend</span> <span class="ruby-identifier">m</span>
402:     <span class="ruby-identifier">kls</span> = <span class="ruby-keyword kw">nil</span>
403:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
404:       <span class="ruby-identifier">kls</span> = <span class="ruby-keyword kw">nil</span>
405:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">kls</span> = <span class="ruby-identifier">a</span> }
406:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;CountingLoader&quot;</span>, <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">name</span>
407:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
408: 
409:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">kls</span> = <span class="ruby-identifier">a</span> }
410:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$counting_loaded_times</span>
411:     <span class="ruby-keyword kw">end</span>
412:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005104" class="method">
  <div id="M005104_title" class="title">
    <b>test_custom_const_missing_should_work</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005104_source')" id="l_M005104_source">show source</a> ]</p>
  <div id="M005104_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 367</span>
367:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_custom_const_missing_should_work</span>
368:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;module ModuleWithCustomConstMissing\ndef self.const_missing(name)\nconst_set name, name.to_s.hash\nend\n\nmodule A\nend\nend\n&quot;</span>
369: 
370:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
371:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Integer</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
372:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">A</span>
373:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">String</span>, <span class="ruby-operator">::</span><span class="ruby-constant">ModuleWithCustomConstMissing</span><span class="ruby-operator">::</span><span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
374:     <span class="ruby-keyword kw">end</span>
375:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005076" class="method">
  <div id="M005076_title" class="title">
    <b>test_dependency_which_raises_exception_isnt_added_to_loaded_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005076_source')" id="l_M005076_source">show source</a> ]</p>
  <div id="M005076_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 59</span>
59:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dependency_which_raises_exception_isnt_added_to_loaded_set</span>
60:     <span class="ruby-identifier">with_loading</span> <span class="ruby-keyword kw">do</span>
61:       <span class="ruby-identifier">filename</span> = <span class="ruby-value str">'dependencies/raises_exception'</span>
62:       <span class="ruby-identifier">$raises_exception_load_count</span> = <span class="ruby-value">0</span>
63: 
64:       <span class="ruby-value">5</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">count</span><span class="ruby-operator">|</span>
65:         <span class="ruby-keyword kw">begin</span>
66:           <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span>
67:           <span class="ruby-identifier">flunk</span> <span class="ruby-value str">'should have loaded dependencies/raises_exception which raises an exception'</span>
68:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
69:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Loading me failed, so do not add to loaded or history.'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
70:         <span class="ruby-keyword kw">end</span>
71:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$raises_exception_load_count</span>
72: 
73:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
74:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">filename</span>)
75:       <span class="ruby-keyword kw">end</span>
76:     <span class="ruby-keyword kw">end</span>
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005082" class="method">
  <div id="M005082_title" class="title">
    <b>test_directories_manifest_as_modules_unless_const_defined</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005082_source')" id="l_M005082_source">show source</a> ]</p>
  <div id="M005082_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 152</span>
152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_directories_manifest_as_modules_unless_const_defined</span>
153:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
154:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-constant">ModuleFolder</span>
155:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
156:     <span class="ruby-keyword kw">end</span>
157:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005085" class="method">
  <div id="M005085_title" class="title">
    <b>test_directories_may_manifest_as_nested_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005085_source')" id="l_M005085_source">show source</a> ]</p>
  <div id="M005085_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 173</span>
173:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_directories_may_manifest_as_nested_classes</span>
174:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
175:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span>
176:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ClassFolder</span>
177:     <span class="ruby-keyword kw">end</span>
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005102" class="method">
  <div id="M005102_title" class="title">
    <b>test_file_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005102_source')" id="l_M005102_source">show source</a> ]</p>
  <div id="M005102_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 339</span>
339:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_search</span>
340:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
341:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
342:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_three'</span>)
343:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_three.rb'</span>)
344:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/service_one.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_one'</span>)
345:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/service_one.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'service_one.rb'</span>)
346:     <span class="ruby-keyword kw">end</span>
347:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005103" class="method">
  <div id="M005103_title" class="title">
    <b>test_file_search_uses_first_in_load_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005103_source')" id="l_M005103_source">show source</a> ]</p>
  <div id="M005103_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 349</span>
349:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_search_uses_first_in_load_path</span>
350:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span>, <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
351:       <span class="ruby-identifier">deps</span>, <span class="ruby-identifier">autoload</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
352:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/dependencies/</span>, <span class="ruby-identifier">deps</span>
353:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/autoloading_fixtures/</span>, <span class="ruby-identifier">autoload</span>
354: 
355:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">deps</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/conflict.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'conflict'</span>)
356:     <span class="ruby-keyword kw">end</span>
357:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span>, <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
358:       <span class="ruby-identifier">autoload</span>, <span class="ruby-identifier">deps</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
359:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/dependencies/</span>, <span class="ruby-identifier">deps</span>
360:       <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r/autoloading_fixtures/</span>, <span class="ruby-identifier">autoload</span>
361: 
362:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">autoload</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/conflict.rb'</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">search_for_file</span>(<span class="ruby-value str">'conflict'</span>)
363:     <span class="ruby-keyword kw">end</span>
364: 
365:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005124" class="method">
  <div id="M005124_title" class="title">
    <b>test_file_with_multiple_constants_and_auto_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005124_source')" id="l_M005124_source">show source</a> ]</p>
  <div id="M005124_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 617</span>
617:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_with_multiple_constants_and_auto_loading</span>
618:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
619:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
620:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
621: 
622:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, <span class="ruby-constant">MultipleConstantFile</span>
623: 
624:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
625:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
626:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:MultipleConstantFile</span>)
627:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:SiblingConstant</span>)
628: 
629:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
630: 
631:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
632:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
633:     <span class="ruby-keyword kw">end</span>
634:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005123" class="method">
  <div id="M005123_title" class="title">
    <b>test_file_with_multiple_constants_and_require_dependency</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005123_source')" id="l_M005123_source">show source</a> ]</p>
  <div id="M005123_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 599</span>
599:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_file_with_multiple_constants_and_require_dependency</span>
600:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
601:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
602:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
603: 
604:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'multiple_constant_file'</span>
605:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
606:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
607:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:MultipleConstantFile</span>)
608:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:SiblingConstant</span>)
609: 
610:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
611: 
612:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">MultipleConstantFile</span>)
613:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">SiblingConstant</span>)
614:     <span class="ruby-keyword kw">end</span>
615:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005134" class="method">
  <div id="M005134_title" class="title">
    <b>test_hook_called_multiple_times</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005134_source')" id="l_M005134_source">show source</a> ]</p>
  <div id="M005134_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 772</span>
772:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hook_called_multiple_times</span>
773:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">hook!</span> }
774:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005132" class="method">
  <div id="M005132_title" class="title">
    <b>test_load_once_constants_should_not_be_unloaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005132_source')" id="l_M005132_source">show source</a> ]</p>
  <div id="M005132_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 743</span>
743:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_constants_should_not_be_unloaded</span>
744:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
745:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
746:       <span class="ruby-operator">::</span><span class="ruby-constant">A</span>.<span class="ruby-identifier">to_s</span>
747:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">A</span>)
748:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
749:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">A</span>)
750:     <span class="ruby-keyword kw">end</span>
751:   <span class="ruby-keyword kw">ensure</span>
752:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
753:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:A</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">:A</span>) }
754:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005109" class="method">
  <div id="M005109_title" class="title">
    <b>test_load_once_paths_do_not_add_to_autoloaded_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005109_source')" id="l_M005109_source">show source</a> ]</p>
  <div id="M005109_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 437</span>
437:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_paths_do_not_add_to_autoloaded_constants</span>
438:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
439:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">dup</span>
440: 
441:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder&quot;</span>)
442:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ModuleFolder::NestedClass&quot;</span>)
443:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span>)
444: 
445:       <span class="ruby-value">1</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span> <span class="ruby-comment cmt"># 1 if to avoid warning</span>
446:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
447:     <span class="ruby-keyword kw">end</span>
448:   <span class="ruby-keyword kw">ensure</span>
449:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:ModuleFolder</span> }
450:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
451:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005133" class="method">
  <div id="M005133_title" class="title">
    <b>test_load_once_paths_should_behave_when_recursively_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005133_source')" id="l_M005133_source">show source</a> ]</p>
  <div id="M005133_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 756</span>
756:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_once_paths_should_behave_when_recursively_loading</span>
757:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span>, <span class="ruby-value str">'autoloading_fixtures'</span> <span class="ruby-keyword kw">do</span>
758:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = [<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">last</span>]
759:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>)
760:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">CrossSiteDepender</span>.<span class="ruby-identifier">nil?</span> }
761:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>)
762:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-constant">CrossSiteDependency</span>),
763:         <span class="ruby-value str">&quot;CrossSiteDependency shouldn't be marked as autoloaded!&quot;</span>
764:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
765:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">CrossSiteDependency</span>),
766:         <span class="ruby-value str">&quot;CrossSiteDependency shouldn't have been unloaded!&quot;</span>
767:     <span class="ruby-keyword kw">end</span>
768:   <span class="ruby-keyword kw">ensure</span>
769:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> = []
770:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005093" class="method">
  <div id="M005093_title" class="title">
    <b>test_loadable_constants_for_path_should_handle_empty_autoloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005093_source')" id="l_M005093_source">show source</a> ]</p>
  <div id="M005093_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 247</span>
247:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_handle_empty_autoloads</span>
248:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-value str">'hello'</span>)
249:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005094" class="method">
  <div id="M005094_title" class="title">
    <b>test_loadable_constants_for_path_should_handle_relative_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005094_source')" id="l_M005094_source">show source</a> ]</p>
  <div id="M005094_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 251</span>
251:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_handle_relative_paths</span>
252:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'dependencies'</span>
253:     <span class="ruby-identifier">relative_root</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'/dependencies'</span>
254:     [<span class="ruby-value str">''</span>, <span class="ruby-value str">'/'</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">suffix</span><span class="ruby-operator">|</span>
255:       <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">suffix</span> <span class="ruby-keyword kw">do</span>
256:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">relative_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/a/b'</span>)
257:       <span class="ruby-keyword kw">end</span>
258:     <span class="ruby-keyword kw">end</span>
259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005095" class="method">
  <div id="M005095_title" class="title">
    <b>test_loadable_constants_for_path_should_provide_all_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005095_source')" id="l_M005095_source">show source</a> ]</p>
  <div id="M005095_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_provide_all_results</span>
262:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'/usr/apps/backpack'</span>
263:     <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span>, <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/lib'</span> <span class="ruby-keyword kw">do</span>
264:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
265:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Lib::A::B&quot;</span>, <span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/lib/a/b'</span>)
266:     <span class="ruby-keyword kw">end</span>
267:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005096" class="method">
  <div id="M005096_title" class="title">
    <b>test_loadable_constants_for_path_should_uniq_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005096_source')" id="l_M005096_source">show source</a> ]</p>
  <div id="M005096_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 269</span>
269:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_for_path_should_uniq_results</span>
270:     <span class="ruby-identifier">fake_root</span> = <span class="ruby-value str">'/usr/apps/backpack/lib'</span>
271:     <span class="ruby-identifier">with_loading</span> <span class="ruby-identifier">fake_root</span>, <span class="ruby-identifier">fake_root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/'</span> <span class="ruby-keyword kw">do</span>
272:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
273:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;A::B&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">root</span> <span class="ruby-operator">+</span> <span class="ruby-value str">'/a/b'</span>)
274:     <span class="ruby-keyword kw">end</span>
275:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005097" class="method">
  <div id="M005097_title" class="title">
    <b>test_loadable_constants_with_load_path_without_trailing_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005097_source')" id="l_M005097_source">show source</a> ]</p>
  <div id="M005097_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 277</span>
277:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loadable_constants_with_load_path_without_trailing_slash</span>
278:     <span class="ruby-identifier">path</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'/autoloading_fixtures/class_folder/inline_class.rb'</span>
279:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures/class/'</span> <span class="ruby-keyword kw">do</span>
280:       <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loadable_constants_for_path</span>(<span class="ruby-identifier">path</span>)
281:     <span class="ruby-keyword kw">end</span>
282:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005075" class="method">
  <div id="M005075_title" class="title">
    <b>test_missing_association_raises_nothing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005075_source')" id="l_M005075_source">show source</a> ]</p>
  <div id="M005075_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_missing_association_raises_nothing</span>
56:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_association</span>(<span class="ruby-value str">&quot;missing_model&quot;</span>) }
57:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005074" class="method">
  <div id="M005074_title" class="title">
    <b>test_missing_dependency_raises_missing_source_file</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005074_source')" id="l_M005074_source">show source</a> ]</p>
  <div id="M005074_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 51</span>
51:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_missing_dependency_raises_missing_source_file</span>
52:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">MissingSourceFile</span>) { <span class="ruby-identifier">require_dependency</span>(<span class="ruby-value str">&quot;missing_service&quot;</span>) }
53:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005080" class="method">
  <div id="M005080_title" class="title">
    <b>test_module_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005080_source')" id="l_M005080_source">show source</a> ]</p>
  <div id="M005080_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_loading</span>
135:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
136:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Module</span>, <span class="ruby-constant">A</span>
137:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span>
138:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span><span class="ruby-operator">::</span><span class="ruby-constant">D</span>
139:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">C</span><span class="ruby-operator">::</span><span class="ruby-constant">E</span><span class="ruby-operator">::</span><span class="ruby-constant">F</span>
140:     <span class="ruby-keyword kw">end</span>
141:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005083" class="method">
  <div id="M005083_title" class="title">
    <b>test_module_with_nested_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005083_source')" id="l_M005083_source">show source</a> ]</p>
  <div id="M005083_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 159</span>
159:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_with_nested_class</span>
160:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
161:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
162:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
163:     <span class="ruby-keyword kw">end</span>
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005084" class="method">
  <div id="M005084_title" class="title">
    <b>test_module_with_nested_inline_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005084_source')" id="l_M005084_source">show source</a> ]</p>
  <div id="M005084_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_module_with_nested_inline_class</span>
167:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
168:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">InlineClass</span>
169:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
170:     <span class="ruby-keyword kw">end</span>
171:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005078" class="method">
  <div id="M005078_title" class="title">
    <b>test_mutual_dependencies_dont_infinite_loop</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005078_source')" id="l_M005078_source">show source</a> ]</p>
  <div id="M005078_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mutual_dependencies_dont_infinite_loop</span>
117:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
118:       <span class="ruby-identifier">$mutual_dependencies_count</span> = <span class="ruby-value">0</span>
119:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'mutual_one'</span> }
120:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$mutual_dependencies_count</span>
121: 
122:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
123: 
124:       <span class="ruby-identifier">$mutual_dependencies_count</span> = <span class="ruby-value">0</span>
125:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'mutual_two'</span> }
126:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$mutual_dependencies_count</span>
127:     <span class="ruby-keyword kw">end</span>
128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005089" class="method">
  <div id="M005089_title" class="title">
    <b>test_nested_class_can_access_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005089_source')" id="l_M005089_source">show source</a> ]</p>
  <div id="M005089_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_class_can_access_sibling</span>
204:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
205:       <span class="ruby-identifier">sibling</span> = <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-value str">&quot;NestedSibling&quot;</span>
206:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedSibling</span>)
207:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ModuleFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedSibling</span>, <span class="ruby-identifier">sibling</span>
208:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">__send__</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:ModuleFolder</span>
209:     <span class="ruby-keyword kw">end</span>
210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005126" class="method">
  <div id="M005126_title" class="title">
    <b>test_nested_file_with_multiple_constants_and_auto_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005126_source')" id="l_M005126_source">show source</a> ]</p>
  <div id="M005126_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 655</span>
655:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_file_with_multiple_constants_and_auto_loading</span>
656:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
657:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
658:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
659: 
660:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Class</span>, <span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>
661: 
662:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
663:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
664:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::NestedClass&quot;</span>)
665:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::SiblingClass&quot;</span>)
666: 
667:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
668: 
669:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
670:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
671:     <span class="ruby-keyword kw">end</span>
672:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005125" class="method">
  <div id="M005125_title" class="title">
    <b>test_nested_file_with_multiple_constants_and_require_dependency</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005125_source')" id="l_M005125_source">show source</a> ]</p>
  <div id="M005125_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 636</span>
636:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_file_with_multiple_constants_and_require_dependency</span>
637:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
638:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
639:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
640: 
641:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'class_folder/nested_class'</span>
642: 
643:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
644:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
645:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::NestedClass&quot;</span>)
646:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-value str">&quot;ClassFolder::SiblingClass&quot;</span>)
647: 
648:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
649: 
650:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">NestedClass</span>)
651:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ClassFolder</span><span class="ruby-operator">::</span><span class="ruby-constant">SiblingClass</span>)
652:     <span class="ruby-keyword kw">end</span>
653:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005108" class="method">
  <div id="M005108_title" class="title">
    <b>test_nested_load_error_isnt_rescued</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005108_source')" id="l_M005108_source">show source</a> ]</p>
  <div id="M005108_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 429</span>
429:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_load_error_isnt_rescued</span>
430:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
431:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">MissingSourceFile</span>) <span class="ruby-keyword kw">do</span>
432:         <span class="ruby-constant">RequiresNonexistent1</span>
433:       <span class="ruby-keyword kw">end</span>
434:     <span class="ruby-keyword kw">end</span>
435:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005119" class="method">
  <div id="M005119_title" class="title">
    <b>test_new_constants_in_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005119_source')" id="l_M005119_source">show source</a> ]</p>
  <div id="M005119_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 549</span>
549:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_module</span>
550:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
551: 
552:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">M</span>) <span class="ruby-keyword kw">do</span>
553:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
554: 
555:       <span class="ruby-identifier">inner</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">M</span>) <span class="ruby-keyword kw">do</span>
556:         <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
557:       <span class="ruby-keyword kw">end</span>
558:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::Inner&quot;</span>], <span class="ruby-identifier">inner</span>
559: 
560:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
561:     <span class="ruby-keyword kw">end</span>
562:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::OuterAfter&quot;</span>, <span class="ruby-value str">&quot;M::OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>
563:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
564:   <span class="ruby-keyword kw">ensure</span>
565:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:M</span> }
566:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005120" class="method">
  <div id="M005120_title" class="title">
    <b>test_new_constants_in_module_using_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005120_source')" id="l_M005120_source">show source</a> ]</p>
  <div id="M005120_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 568</span>
568:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_module_using_name</span>
569:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:M</span>) <span class="ruby-keyword kw">do</span>
570:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
571:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
572: 
573:       <span class="ruby-identifier">inner</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:M</span>) <span class="ruby-keyword kw">do</span>
574:         <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
575:       <span class="ruby-keyword kw">end</span>
576:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::Inner&quot;</span>], <span class="ruby-identifier">inner</span>
577: 
578:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
579:     <span class="ruby-keyword kw">end</span>
580:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;M::OuterAfter&quot;</span>, <span class="ruby-value str">&quot;M::OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>
581:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
582:   <span class="ruby-keyword kw">ensure</span>
583:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:M</span> }
584:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005117" class="method">
  <div id="M005117_title" class="title">
    <b>test_new_constants_in_with_a_single_constant</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005117_source')" id="l_M005117_source">show source</a> ]</p>
  <div id="M005117_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 521</span>
521:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_a_single_constant</span>
522:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Hello&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) {
523:                               <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Hello</span>, <span class="ruby-value">10</span>
524:                             }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
525:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
526:   <span class="ruby-keyword kw">ensure</span>
527:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:Hello</span> }
528:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005122" class="method">
  <div id="M005122_title" class="title">
    <b>test_new_constants_in_with_illegal_module_name_raises_correct_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005122_source')" id="l_M005122_source">show source</a> ]</p>
  <div id="M005122_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 593</span>
593:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_illegal_module_name_raises_correct_error</span>
594:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) <span class="ruby-keyword kw">do</span>
595:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-value str">&quot;Illegal-Name&quot;</span>) {}
596:     <span class="ruby-keyword kw">end</span>
597:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005121" class="method">
  <div id="M005121_title" class="title">
    <b>test_new_constants_in_with_inherited_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005121_source')" id="l_M005121_source">show source</a> ]</p>
  <div id="M005121_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 586</span>
586:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_inherited_constants</span>
587:     <span class="ruby-identifier">m</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-identifier">:Object</span>) <span class="ruby-keyword kw">do</span>
588:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ModuleWithConstant</span> }
589:     <span class="ruby-keyword kw">end</span>
590:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">m</span>
591:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005118" class="method">
  <div id="M005118_title" class="title">
    <b>test_new_constants_in_with_nesting</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005118_source')" id="l_M005118_source">show source</a> ]</p>
  <div id="M005118_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 530</span>
530:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_constants_in_with_nesting</span>
531:     <span class="ruby-identifier">outer</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) <span class="ruby-keyword kw">do</span>
532:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterBefore</span>, <span class="ruby-value">10</span>
533: 
534:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;Inner&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) {
535:                                 <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:Inner</span>, <span class="ruby-value">20</span>
536:                               }.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
537: 
538:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:OuterAfter</span>, <span class="ruby-value">30</span>
539:     <span class="ruby-keyword kw">end</span>
540: 
541:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;OuterAfter&quot;</span>, <span class="ruby-value str">&quot;OuterBefore&quot;</span>], <span class="ruby-identifier">outer</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>)
542:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
543:   <span class="ruby-keyword kw">ensure</span>
544:     <span class="ruby-node">%w(OuterBefore Inner OuterAfter)</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
545:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">const_defined?</span>(<span class="ruby-identifier">name</span>) }
546:     <span class="ruby-keyword kw">end</span>
547:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005116" class="method">
  <div id="M005116_title" class="title">
    <b>test_new_contants_in_without_constants</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005116_source')" id="l_M005116_source">show source</a> ]</p>
  <div id="M005116_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 516</span>
516:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_contants_in_without_constants</span>
517:     <span class="ruby-identifier">assert_equal</span> [], (<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">new_constants_in</span>(<span class="ruby-constant">Object</span>) { })
518:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">constant_watch_stack</span>.<span class="ruby-identifier">empty?</span>
519:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005081" class="method">
  <div id="M005081_title" class="title">
    <b>test_non_existing_const_raises_name_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005081_source')" id="l_M005081_source">show source</a> ]</p>
  <div id="M005081_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 143</span>
143:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existing_const_raises_name_error</span>
144:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
145:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">DoesNotExist</span> }
146:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">NoModule</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
147:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
148:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NameError</span>) { <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span> }
149:     <span class="ruby-keyword kw">end</span>
150:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005091" class="method">
  <div id="M005091_title" class="title">
    <b>test_non_existing_const_raises_name_error_with_fully_qualified_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005091_source')" id="l_M005091_source">show source</a> ]</p>
  <div id="M005091_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existing_const_raises_name_error_with_fully_qualified_name</span>
222:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
223:       <span class="ruby-keyword kw">begin</span>
224:         <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span>.<span class="ruby-identifier">nil?</span>
225:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
226:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
227:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;uninitialized constant A::DoesNotExist&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
228:       <span class="ruby-keyword kw">end</span>
229:       <span class="ruby-keyword kw">begin</span>
230:         <span class="ruby-constant">A</span><span class="ruby-operator">::</span><span class="ruby-constant">B</span><span class="ruby-operator">::</span><span class="ruby-constant">DoesNotExist</span>.<span class="ruby-identifier">nil?</span>
231:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
232:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
233:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;uninitialized constant A::B::DoesNotExist&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
234:       <span class="ruby-keyword kw">end</span>
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005112" class="method">
  <div id="M005112_title" class="title">
    <b>test_preexisting_constants_are_not_marked_as_autoloaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005112_source')" id="l_M005112_source">show source</a> ]</p>
  <div id="M005112_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 469</span>
469:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preexisting_constants_are_not_marked_as_autoloaded</span>
470:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
471:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'e'</span>
472:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:E</span>)
473:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
474:     <span class="ruby-keyword kw">end</span>
475: 
476:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:E</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>
477:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
478:       <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'e'</span>
479:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">autoloaded?</span>(<span class="ruby-identifier">:E</span>), <span class="ruby-value str">&quot;E shouldn't be marked autoloaded!&quot;</span>
480:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
481:     <span class="ruby-keyword kw">end</span>
482: 
483:   <span class="ruby-keyword kw">ensure</span>
484:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">class_eval</span> { <span class="ruby-identifier">remove_const</span> <span class="ruby-identifier">:E</span> }
485:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005098" class="method">
  <div id="M005098_title" class="title">
    <b>test_qualified_const_defined</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005098_source')" id="l_M005098_source">show source</a> ]</p>
  <div id="M005098_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 284</span>
284:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_qualified_const_defined</span>
285:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;Object&quot;</span>)
286:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Object&quot;</span>)
287:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Object::Kernel&quot;</span>)
288:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;::Test::Unit::TestCase&quot;</span>)
289:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005099" class="method">
  <div id="M005099_title" class="title">
    <b>test_qualified_const_defined_should_not_call_method_missing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005099_source')" id="l_M005099_source">show source</a> ]</p>
  <div id="M005099_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 291</span>
291:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_qualified_const_defined_should_not_call_method_missing</span>
292:     <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span> = <span class="ruby-value">0</span>
293:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;ModuleWithMissing::A&quot;</span>)
294:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span>
295:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_const_defined?</span>(<span class="ruby-value str">&quot;ModuleWithMissing::A::B&quot;</span>)
296:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">ModuleWithMissing</span>.<span class="ruby-identifier">missing_count</span>
297:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005101" class="method">
  <div id="M005101_title" class="title">
    <b>test_qualified_name_for</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005101_source')" id="l_M005101_source">show source</a> ]</p>
  <div id="M005101_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 328</span>
328:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_qualified_name_for</span><span class="ruby-identifier">test_qualified_name_for</span>
329:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-constant">Object</span>, <span class="ruby-identifier">:A</span>)
330:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-identifier">:Object</span>, <span class="ruby-identifier">:A</span>)
331:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;Object&quot;</span>, <span class="ruby-identifier">:A</span>)
332:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;::Object&quot;</span>, <span class="ruby-identifier">:A</span>)
333:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">&quot;::Kernel&quot;</span>, <span class="ruby-identifier">:A</span>)
334: 
335:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ActiveSupport::Dependencies::A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-value str">'ActiveSupport::Dependencies'</span><span class="ruby-value str">'ActiveSupport::Dependencies'</span>, <span class="ruby-identifier">:A</span>)
336:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;ActiveSupport::Dependencies::A&quot;</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">qualified_name_for</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>, <span class="ruby-identifier">:A</span>)
337:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005107" class="method">
  <div id="M005107_title" class="title">
    <b>test_removal_from_tree_should_be_detected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005107_source')" id="l_M005107_source">show source</a> ]</p>
  <div id="M005107_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 414</span>
414:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_removal_from_tree_should_be_detected</span>
415:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
416:       <span class="ruby-identifier">root</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">first</span>
417:       <span class="ruby-identifier">c</span> = <span class="ruby-constant">ServiceOne</span>
418:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
419:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ServiceOne</span>)
420:       <span class="ruby-keyword kw">begin</span>
421:         <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_missing_constant</span>(<span class="ruby-identifier">c</span>, <span class="ruby-identifier">:FakeMissing</span>)
422:         <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;Expected exception&quot;</span>
423:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
424:         <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{ServiceOne has been removed from the module tree}i</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
425:       <span class="ruby-keyword kw">end</span>
426:     <span class="ruby-keyword kw">end</span>
427:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005131" class="method">
  <div id="M005131_title" class="title">
    <b>test_remove_constant_handles_double_colon_at_start</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005131_source')" id="l_M005131_source">show source</a> ]</p>
  <div id="M005131_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 733</span>
733:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_constant_handles_double_colon_at_start</span>
734:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value str">'DeleteMe'</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
735:     <span class="ruby-constant">DeleteMe</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-value str">'OrMe'</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
736:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">remove_constant</span> <span class="ruby-value str">&quot;::DeleteMe::OrMe&quot;</span>
737:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span><span class="ruby-operator">::</span><span class="ruby-constant">OrMe</span>)
738:     <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span>)
739:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">remove_constant</span> <span class="ruby-value str">&quot;::DeleteMe&quot;</span>
740:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">DeleteMe</span>)
741:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005092" class="method">
  <div id="M005092_title" class="title">
    <b>test_smart_name_error_strings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005092_source')" id="l_M005092_source">show source</a> ]</p>
  <div id="M005092_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 238</span>
238:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_smart_name_error_strings</span>
239:     <span class="ruby-keyword kw">begin</span>
240:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-value str">&quot;ImaginaryObject&quot;</span>
241:       <span class="ruby-identifier">flunk</span> <span class="ruby-value str">&quot;No raise!!&quot;</span>
242:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NameError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
243:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;uninitialized constant ImaginaryObject&quot;</span>)
244:     <span class="ruby-keyword kw">end</span>
245:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005073" class="method">
  <div id="M005073_title" class="title">
    <b>test_tracking_identical_loaded_files</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005073_source')" id="l_M005073_source">show source</a> ]</p>
  <div id="M005073_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tracking_identical_loaded_files</span>
46:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
47:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
48:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">size</span>
49:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005072" class="method">
  <div id="M005072_title" class="title">
    <b>test_tracking_loaded_files</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005072_source')" id="l_M005072_source">show source</a> ]</p>
  <div id="M005072_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tracking_loaded_files</span>
40:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_one'</span>
41:     <span class="ruby-identifier">require_dependency</span> <span class="ruby-value str">'dependencies/service_two'</span>
42:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">size</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005135" class="method">
  <div id="M005135_title" class="title">
    <b>test_unhook</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005135_source')" id="l_M005135_source">show source</a> ]</p>
  <div id="M005135_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 776</span>
776:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unhook</span>
777:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">unhook!</span>
778:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:const_missing_without_dependencies</span>)
779:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:load_without_new_constant_marking</span>)
780:   <span class="ruby-keyword kw">ensure</span>
781:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">hook!</span>
782:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005113" class="method">
  <div id="M005113_title" class="title">
    <b>test_unloadable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005113_source')" id="l_M005113_source">show source</a> ]</p>
  <div id="M005113_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 487</span>
487:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable</span>
488:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
489:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
490:       <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
491: 
492:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
493:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">M</span>)
494: 
495:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
496:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
497:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">M</span>), <span class="ruby-value str">&quot;Dependencies should unload unloadable constants each time&quot;</span>
498:     <span class="ruby-keyword kw">end</span>
499:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005114" class="method">
  <div id="M005114_title" class="title">
    <b>test_unloadable_should_fail_with_anonymous_modules</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005114_source')" id="l_M005114_source">show source</a> ]</p>
  <div id="M005114_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 501</span>
501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable_should_fail_with_anonymous_modules</span>
502:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
503:       <span class="ruby-identifier">m</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
504:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-identifier">m</span>.<span class="ruby-identifier">unloadable</span> }
505:     <span class="ruby-keyword kw">end</span>
506:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005115" class="method">
  <div id="M005115_title" class="title">
    <b>test_unloadable_should_return_change_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005115_source')" id="l_M005115_source">show source</a> ]</p>
  <div id="M005115_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 508</span>
508:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unloadable_should_return_change_flag</span>
509:     <span class="ruby-identifier">with_autoloading_fixtures</span> <span class="ruby-keyword kw">do</span>
510:       <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:M</span>, <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span>
511:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
512:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">M</span>.<span class="ruby-identifier">unloadable</span>
513:     <span class="ruby-keyword kw">end</span>
514:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005077" class="method">
  <div id="M005077_title" class="title">
    <b>test_warnings_should_be_enabled_on_first_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005077_source')" id="l_M005077_source">show source</a> ]</p>
  <div id="M005077_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 79</span>
 79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_warnings_should_be_enabled_on_first_load</span>
 80:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'dependencies'</span> <span class="ruby-keyword kw">do</span>
 81:       <span class="ruby-identifier">old_warnings</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">warnings_on_first_load</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">warnings_on_first_load</span>, <span class="ruby-keyword kw">true</span>
 82: 
 83:       <span class="ruby-identifier">filename</span> = <span class="ruby-value str">&quot;check_warnings&quot;</span>
 84:       <span class="ruby-identifier">expanded</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-node">&quot;test/dependencies/#{filename}&quot;</span>)
 85:       <span class="ruby-identifier">$check_warnings_load_count</span> = <span class="ruby-value">0</span>
 86: 
 87:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 88:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 89: 
 90:       <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
 91:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
 92:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'On first load warnings should be enabled.'</span>
 93: 
 94:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 95:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
 96:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 97:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
 98: 
 99:       <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
100:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
101:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'After first load warnings should be left alone.'</span>
102: 
103:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
104:       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">clear</span>
105:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
106:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">history</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
107: 
108:       <span class="ruby-identifier">enable_warnings</span> { <span class="ruby-identifier">require_dependency</span> <span class="ruby-identifier">filename</span> }
109:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">$check_warnings_load_count</span>
110:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">$checked_verbose</span>, <span class="ruby-value str">'After first load warnings should be left alone.'</span>
111: 
112:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">loaded</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expanded</span>)
113:     <span class="ruby-keyword kw">end</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005071" class="method">
  <div id="M005071_title" class="title">
    <b>with_autoloading_fixtures</b>(&amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005071_source')" id="l_M005071_source">show source</a> ]</p>
  <div id="M005071_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 35</span>
35:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_autoloading_fixtures</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
36:     <span class="ruby-identifier">with_loading</span> <span class="ruby-value str">'autoloading_fixtures'</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005070" class="method">
  <div id="M005070_title" class="title">
    <b>with_loading</b>(*from) {|| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005070_source')" id="l_M005070_source">show source</a> ]</p>
  <div id="M005070_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/dependencies_test.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_loading</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">from</span>)
22:     <span class="ruby-identifier">old_mechanism</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span>, <span class="ruby-identifier">:load</span>
23:     <span class="ruby-identifier">this_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>)
24:     <span class="ruby-identifier">parent_dir</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-identifier">this_dir</span>)
25:     <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">parent_dir</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">parent_dir</span>)
26:     <span class="ruby-identifier">prior_load_paths</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>
27:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span> = <span class="ruby-identifier">from</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{this_dir}/#{f}&quot;</span> }
28:     <span class="ruby-keyword kw">yield</span>
29:   <span class="ruby-keyword kw">ensure</span>
30:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span> = <span class="ruby-identifier">prior_load_paths</span>
31:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">mechanism</span> = <span class="ruby-identifier">old_mechanism</span>
32:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">explicitly_unloadable_constants</span> = []
33:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>