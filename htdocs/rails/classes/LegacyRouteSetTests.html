  <div id="C00000475">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />LegacyRouteSetTests<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
ActiveSupport::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003062&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003083&name=setup_for_named_route" >setup_for_named_route</a></li>
  <li><a href="index.html?a=M003110&name=setup_request_method_routes_for" >setup_request_method_routes_for</a></li>
  <li><a href="index.html?a=M003063&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M003099&name=test_action_expiry" >test_action_expiry</a></li>
  <li><a href="index.html?a=M003096&name=test_backwards" >test_backwards</a></li>
  <li><a href="index.html?a=M003073&name=test_basic_named_route" >test_basic_named_route</a></li>
  <li><a href="index.html?a=M003074&name=test_basic_named_route_with_relative_url_root" >test_basic_named_route_with_relative_url_root</a></li>
  <li><a href="index.html?a=M003102&name=test_both_requirement_and_optional" >test_both_requirement_and_optional</a></li>
  <li><a href="index.html?a=M003087&name=test_changing_controller" >test_changing_controller</a></li>
  <li><a href="index.html?a=M003065&name=test_default_setup" >test_default_setup</a></li>
  <li><a href="index.html?a=M003094&name=test_dynamic_path_allowed" >test_dynamic_path_allowed</a></li>
  <li><a href="index.html?a=M003095&name=test_dynamic_recall_paths_allowed" >test_dynamic_recall_paths_allowed</a></li>
  <li><a href="index.html?a=M003114&name=test_failed_requirements_raises_exception_with_violated_requirements" >test_failed_requirements_raises_exception_with_violated_requirements</a></li>
  <li><a href="index.html?a=M003066&name=test_ignores_leading_slash" >test_ignores_leading_slash</a></li>
  <li><a href="index.html?a=M003107&name=test_named_route_method" >test_named_route_method</a></li>
  <li><a href="index.html?a=M003085&name=test_named_route_root" >test_named_route_root</a></li>
  <li><a href="index.html?a=M003079&name=test_named_route_with_blank_path_prefix" >test_named_route_with_blank_path_prefix</a></li>
  <li><a href="index.html?a=M003076&name=test_named_route_with_default" >test_named_route_with_default</a></li>
  <li><a href="index.html?a=M003077&name=test_named_route_with_name_prefix" >test_named_route_with_name_prefix</a></li>
  <li><a href="index.html?a=M003080&name=test_named_route_with_nested_controller" >test_named_route_with_nested_controller</a></li>
  <li><a href="index.html?a=M003075&name=test_named_route_with_option" >test_named_route_with_option</a></li>
  <li><a href="index.html?a=M003078&name=test_named_route_with_path_prefix" >test_named_route_with_path_prefix</a></li>
  <li><a href="index.html?a=M003086&name=test_named_route_with_regexps" >test_named_route_with_regexps</a></li>
  <li><a href="index.html?a=M003084&name=test_named_route_without_hash" >test_named_route_without_hash</a></li>
  <li><a href="index.html?a=M003108&name=test_named_routes_array" >test_named_routes_array</a></li>
  <li><a href="index.html?a=M003105&name=test_named_url_with_no_action_specified" >test_named_url_with_no_action_specified</a></li>
  <li><a href="index.html?a=M003109&name=test_nil_defaults" >test_nil_defaults</a></li>
  <li><a href="index.html?a=M003090&name=test_non_controllers_cannot_be_matched" >test_non_controllers_cannot_be_matched</a></li>
  <li><a href="index.html?a=M003081&name=test_optimised_named_route_call_never_uses_url_for" >test_optimised_named_route_call_never_uses_url_for</a></li>
  <li><a href="index.html?a=M003082&name=test_optimised_named_route_with_host" >test_optimised_named_route_with_host</a></li>
  <li><a href="index.html?a=M003091&name=test_paths_do_not_accept_defaults" >test_paths_do_not_accept_defaults</a></li>
  <li><a href="index.html?a=M003088&name=test_paths_escaped" >test_paths_escaped</a></li>
  <li><a href="index.html?a=M003089&name=test_paths_slashes_unescaped_with_ordered_parameters" >test_paths_slashes_unescaped_with_ordered_parameters</a></li>
  <li><a href="index.html?a=M003100&name=test_recognition_with_uppercase_controller_name" >test_recognition_with_uppercase_controller_name</a></li>
  <li><a href="index.html?a=M003111&name=test_recognize_array_of_methods" >test_recognize_array_of_methods</a></li>
  <li><a href="index.html?a=M003101&name=test_requirement_should_prevent_optional_id" >test_requirement_should_prevent_optional_id</a></li>
  <li><a href="index.html?a=M003069&name=test_route_with_colon_first" >test_route_with_colon_first</a></li>
  <li><a href="index.html?a=M003097&name=test_route_with_fixnum_default" >test_route_with_fixnum_default</a></li>
  <li><a href="index.html?a=M003071&name=test_route_with_regexp_and_captures_for_controller" >test_route_with_regexp_and_captures_for_controller</a></li>
  <li><a href="index.html?a=M003072&name=test_route_with_regexp_and_dot" >test_route_with_regexp_and_dot</a></li>
  <li><a href="index.html?a=M003070&name=test_route_with_regexp_for_controller" >test_route_with_regexp_for_controller</a></li>
  <li><a href="index.html?a=M003098&name=test_route_with_text_default" >test_route_with_text_default</a></li>
  <li><a href="index.html?a=M003115&name=test_routes_changed_correctly_after_clear" >test_routes_changed_correctly_after_clear</a></li>
  <li><a href="index.html?a=M003064&name=test_routes_for_controller_and_action_deprecated" >test_routes_for_controller_and_action_deprecated</a></li>
  <li><a href="index.html?a=M003103&name=test_set_to_nil_forgets" >test_set_to_nil_forgets</a></li>
  <li><a href="index.html?a=M003093&name=test_should_have_better_error_message_when_options_diff_is_empty" >test_should_have_better_error_message_when_options_diff_is_empty</a></li>
  <li><a href="index.html?a=M003092&name=test_should_list_options_diff_when_routing_requirements_dont_match" >test_should_list_options_diff_when_routing_requirements_dont_match</a></li>
  <li><a href="index.html?a=M003113&name=test_subpath_generated" >test_subpath_generated</a></li>
  <li><a href="index.html?a=M003112&name=test_subpath_recognized" >test_subpath_recognized</a></li>
  <li><a href="index.html?a=M003068&name=test_time_generation" >test_time_generation</a></li>
  <li><a href="index.html?a=M003067&name=test_time_recognition" >test_time_recognition</a></li>
  <li><a href="index.html?a=M003106&name=test_url_generated_when_forgetting_action" >test_url_generated_when_forgetting_action</a></li>
  <li><a href="index.html?a=M003104&name=test_url_with_no_action_specified" >test_url_with_no_action_specified</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>rs</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Instance methods</div>
<div id="M003062" class="method">
  <div id="M003062_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003062_source')" id="l_M003062_source">show source</a> ]</p>
  <div id="M003062_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
759:     <span class="ruby-comment cmt"># These tests assume optimisation is on, so re-enable it.</span>
760:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">optimise_named_routes</span> = <span class="ruby-keyword kw">true</span>
761: 
762:     <span class="ruby-ivar">@rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
763: 
764:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span>.<span class="ruby-identifier">use_controllers!</span> <span class="ruby-node">%w(content admin/user admin/news_feed)</span>
765:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003083" class="method">
  <div id="M003083_title" class="title">
    <b>setup_for_named_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003083_source')" id="l_M003083_source">show source</a> ]</p>
  <div id="M003083_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1004</span>
1004:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_for_named_route</span>
1005:     <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">MockController</span>)
1006:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">install_helpers</span>(<span class="ruby-identifier">klass</span>)
1007:     <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rs</span>)
1008:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003110" class="method">
  <div id="M003110_title" class="title">
    <b>setup_request_method_routes_for</b>(method)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003110_source')" id="l_M003110_source">show source</a> ]</p>
  <div id="M003110_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1329</span>
1329:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_request_method_routes_for</span>(<span class="ruby-identifier">method</span>)
1330:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1331:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-identifier">method</span>
1332:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1333: 
1334:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1335:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'get'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span> }
1336:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span> }
1337:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'put'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:put</span> }
1338:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'delete'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:delete</span> }
1339:     <span class="ruby-keyword kw">end</span>
1340:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003063" class="method">
  <div id="M003063_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003063_source')" id="l_M003063_source">show source</a> ]</p>
  <div id="M003063_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 767</span>
767:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
768:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">clear!</span>
769:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003099" class="method">
  <div id="M003099_title" class="title">
    <b>test_action_expiry</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003099_source')" id="l_M003099_source">show source</a> ]</p>
  <div id="M003099_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1198</span>
1198:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_expiry</span>
1199:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1200:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>})
1201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003096" class="method">
  <div id="M003096_title" class="title">
    <b>test_backwards</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003096_source')" id="l_M003096_source">show source</a> ]</p>
  <div id="M003096_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1153</span>
1153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_backwards</span>
1154:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1155:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>
1156:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1157:     <span class="ruby-keyword kw">end</span>
1158: 
1159:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/20'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>})
1160:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/20'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1161:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'boo'</span>)
1162:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003073" class="method">
  <div id="M003073_title" class="title">
    <b>test_basic_named_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003073_source')" id="l_M003073_source">show source</a> ]</p>
  <div id="M003073_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 926</span>
926:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_named_route</span>
927:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:home</span>, <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>
928:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
929:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>,
930:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
931:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003074" class="method">
  <div id="M003074_title" class="title">
    <b>test_basic_named_route_with_relative_url_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003074_source')" id="l_M003074_source">show source</a> ]</p>
  <div id="M003074_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 933</span>
933:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_named_route_with_relative_url_root</span>
934:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:home</span>, <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>
935:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
936:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">&quot;/foo&quot;</span>
937:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/foo/&quot;</span>,
938:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
939:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/foo/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>)
940:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-keyword kw">nil</span>
941:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003102" class="method">
  <div id="M003102_title" class="title">
    <b>test_both_requirement_and_optional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003102_source')" id="l_M003102_source">show source</a> ]</p>
  <div id="M003102_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1226</span>
1226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_requirement_and_optional</span>
1227:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1228:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">blog</span>(<span class="ruby-value str">'test/:year'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>,
1229:         <span class="ruby-identifier">:defaults</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> },
1230:         <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d{4}/</span> }
1231:       )
1232:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1233:     <span class="ruby-keyword kw">end</span>
1234: 
1235:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/test'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1236:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/test'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
1237: 
1238:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1239:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/test&quot;</span>,
1240:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:blog_url</span>))
1241:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003087" class="method">
  <div id="M003087_title" class="title">
    <b>test_changing_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003087_source')" id="l_M003087_source">show source</a> ]</p>
  <div id="M003087_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1042</span>
1042:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_changing_controller</span>
1043:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1044: 
1045:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/stuff/show/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(
1046:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'stuff'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>},
1047:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}
1048:     )
1049:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003065" class="method">
  <div id="M003065_title" class="title">
    <b>test_default_setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003065_source')" id="l_M003065_source">show source</a> ]</p>
  <div id="M003065_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 775</span>
775:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_setup</span>
776:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
777:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content&quot;</span>))
778:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/list&quot;</span>))
779:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/show/10&quot;</span>))
780: 
781:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/show/10&quot;</span>))
782: 
783:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/show/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
784: 
785:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/show'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
786:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/list/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
787: 
788:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/stuff'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'stuff'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
789:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/stuff'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/stuff'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
790:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003094" class="method">
  <div id="M003094_title" class="title">
    <b>test_dynamic_path_allowed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003094_source')" id="l_M003094_source">show source</a> ]</p>
  <div id="M003094_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1136</span>
1136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_path_allowed</span>
1137:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1138:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1139:     <span class="ruby-keyword kw">end</span>
1140: 
1141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(pages boo)</span>)
1142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003095" class="method">
  <div id="M003095_title" class="title">
    <b>test_dynamic_recall_paths_allowed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003095_source')" id="l_M003095_source">show source</a> ]</p>
  <div id="M003095_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1144</span>
1144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_recall_paths_allowed</span>
1145:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1146:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1147:     <span class="ruby-keyword kw">end</span>
1148: 
1149:     <span class="ruby-identifier">recall_path</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">PathSegment</span><span class="ruby-operator">::</span><span class="ruby-constant">Result</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">%w(pages boo)</span>)
1150:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({}, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">recall_path</span>)
1151:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003114" class="method">
  <div id="M003114_title" class="title">
    <b>test_failed_requirements_raises_exception_with_violated_requirements</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003114_source')" id="l_M003114_source">show source</a> ]</p>
  <div id="M003114_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1425</span>
1425:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_failed_requirements_raises_exception_with_violated_requirements</span>
1426:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1427:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">foo_with_requirement</span> <span class="ruby-value str">'foos/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'foos'</span>, <span class="ruby-identifier">:requirements=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-identifier">:id=</span><span class="ruby-operator">&gt;</span><span class="ruby-regexp re">/\d+/</span>}
1428:     <span class="ruby-keyword kw">end</span>
1429: 
1430:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1431:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) <span class="ruby-keyword kw">do</span>
1432:       <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:foo_with_requirement_url</span>, <span class="ruby-value str">&quot;I am Against the requirements&quot;</span>)
1433:     <span class="ruby-keyword kw">end</span>
1434:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003066" class="method">
  <div id="M003066_title" class="title">
    <b>test_ignores_leading_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003066_source')" id="l_M003066_source">show source</a> ]</p>
  <div id="M003066_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 792</span>
792:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ignores_leading_slash</span>
793:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">clear!</span>
794:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/:controller/:action/:id'</span>}
795:     <span class="ruby-identifier">test_default_setup</span>
796:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003107" class="method">
  <div id="M003107_title" class="title">
    <b>test_named_route_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003107_source')" id="l_M003107_source">show source</a> ]</p>
  <div id="M003107_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1302</span>
1302:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_method</span>
1303:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1304:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">categories</span> <span class="ruby-value str">'categories'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'categories'</span>
1305:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1306:     <span class="ruby-keyword kw">end</span>
1307: 
1308:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/categories'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'categories'</span>)
1309:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/hi'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>})
1310:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003085" class="method">
  <div id="M003085_title" class="title">
    <b>test_named_route_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003085_source')" id="l_M003085_source">show source</a> ]</p>
  <div id="M003085_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1016</span>
1016:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_root</span>
1017:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1018:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">root</span> <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>
1019:     <span class="ruby-keyword kw">end</span>
1020:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1021:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:root_url</span>))
1022:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:root_path</span>))
1023:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003079" class="method">
  <div id="M003079_title" class="title">
    <b>test_named_route_with_blank_path_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003079_source')" id="l_M003079_source">show source</a> ]</p>
  <div id="M003079_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 972</span>
972:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_blank_path_prefix</span>
973:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>
974:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
975:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page&quot;</span>,
976:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>))
977:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003076" class="method">
  <div id="M003076_title" class="title">
    <b>test_named_route_with_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003076_source')" id="l_M003076_source">show source</a> ]</p>
  <div id="M003076_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 950</span>
950:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_default</span>
951:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'AboutPage'</span>
952:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
953:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page/AboutRails&quot;</span>,
954:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;AboutRails&quot;</span>))
955: 
956:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003077" class="method">
  <div id="M003077_title" class="title">
    <b>test_named_route_with_name_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003077_source')" id="l_M003077_source">show source</a> ]</p>
  <div id="M003077_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 958</span>
958:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_name_prefix</span>
959:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'my_'</span>
960:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
961:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page&quot;</span>,
962:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:my_page_url</span>))
963:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003080" class="method">
  <div id="M003080_title" class="title">
    <b>test_named_route_with_nested_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003080_source')" id="l_M003080_source">show source</a> ]</p>
  <div id="M003080_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 979</span>
979:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_nested_controller</span>
980:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:users</span>, <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
981:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
982:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/admin/user&quot;</span>,
983:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_url</span>))
984:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003075" class="method">
  <div id="M003075_title" class="title">
    <b>test_named_route_with_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003075_source')" id="l_M003075_source">show source</a> ]</p>
  <div id="M003075_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 943</span>
943:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_option</span>
944:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>
945:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
946:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page/new%20stuff&quot;</span>,
947:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new stuff'</span>))
948:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003078" class="method">
  <div id="M003078_title" class="title">
    <b>test_named_route_with_path_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003078_source')" id="l_M003078_source">show source</a> ]</p>
  <div id="M003078_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 965</span>
965:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_path_prefix</span>
966:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'my'</span>
967:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
968:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/my/page&quot;</span>,
969:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>))
970:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003086" class="method">
  <div id="M003086_title" class="title">
    <b>test_named_route_with_regexps</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003086_source')" id="l_M003086_source">show source</a> ]</p>
  <div id="M003086_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1025</span>
1025:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_regexps</span>
1026:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1027:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">article</span> <span class="ruby-value str">'page/:year/:month/:day/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>,
1028:         <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>
1029:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1030:     <span class="ruby-keyword kw">end</span>
1031:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1032:     <span class="ruby-comment cmt"># assert_equal(</span>
1033:     <span class="ruby-comment cmt">#   {:controller =&gt; 'page', :action =&gt; 'show', :title =&gt; 'hi', :use_route =&gt; :article, :only_path =&gt; false},</span>
1034:     <span class="ruby-comment cmt">#   x.send(:article_url, :title =&gt; 'hi')</span>
1035:     <span class="ruby-comment cmt"># )</span>
1036:     <span class="ruby-identifier">assert_equal</span>(
1037:       <span class="ruby-value str">&quot;http://test.host/page/2005/6/10/hi&quot;</span>,
1038:       <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:article_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>)
1039:     )
1040:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003084" class="method">
  <div id="M003084_title" class="title">
    <b>test_named_route_without_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003084_source')" id="l_M003084_source">show source</a> ]</p>
  <div id="M003084_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1010</span>
1010:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_without_hash</span>
1011:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1012:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">normal</span> <span class="ruby-value str">':controller/:action/:id'</span>
1013:     <span class="ruby-keyword kw">end</span>
1014:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003108" class="method">
  <div id="M003108_title" class="title">
    <b>test_named_routes_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003108_source')" id="l_M003108_source">show source</a> ]</p>
  <div id="M003108_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1312</span>
1312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes_array</span>
1313:     <span class="ruby-identifier">test_named_route_method</span>
1314:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:categories</span>], <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">named_routes</span>.<span class="ruby-identifier">names</span>
1315:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003105" class="method">
  <div id="M003105_title" class="title">
    <b>test_named_url_with_no_action_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003105_source')" id="l_M003105_source">show source</a> ]</p>
  <div id="M003105_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1276</span>
1276:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_url_with_no_action_specified</span>
1277:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1278:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1279:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1280:     <span class="ruby-keyword kw">end</span>
1281: 
1282:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>)
1283:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>)
1284: 
1285:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1286:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>,
1287:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
1288:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003109" class="method">
  <div id="M003109_title" class="title">
    <b>test_nil_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003109_source')" id="l_M003109_source">show source</a> ]</p>
  <div id="M003109_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1317</span>
1317:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_defaults</span>
1318:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1319:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'journal'</span>,
1320:         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>,
1321:         <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_journal'</span>,
1322:         <span class="ruby-identifier">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1323:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1324:     <span class="ruby-keyword kw">end</span>
1325: 
1326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/journal'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_journal'</span>, <span class="ruby-identifier">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
1327:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003090" class="method">
  <div id="M003090_title" class="title">
    <b>test_non_controllers_cannot_be_matched</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003090_source')" id="l_M003090_source">show source</a> ]</p>
  <div id="M003090_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1080</span>
1080:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_controllers_cannot_be_matched</span>
1081:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1082:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1083:     <span class="ruby-keyword kw">end</span>
1084:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/not_a/show/10&quot;</span>) }
1085:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003081" class="method">
  <div id="M003081_title" class="title">
    <b>test_optimised_named_route_call_never_uses_url_for</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003081_source')" id="l_M003081_source">show source</a> ]</p>
  <div id="M003081_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 986</span>
986:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optimised_named_route_call_never_uses_url_for</span>
987:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:users</span>, <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
988:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:user</span>, <span class="ruby-value str">'admin/user/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'/admin/user'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'show'</span>
989:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
990:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:url_for</span>).<span class="ruby-identifier">never</span>
991:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_url</span>)
992:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_path</span>)
993:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:user_url</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">:foo=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;bar&quot;</span>)
994:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:user_path</span>, <span class="ruby-value">3</span>, <span class="ruby-identifier">:bar=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;foo&quot;</span>)
995:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003082" class="method">
  <div id="M003082_title" class="title">
    <b>test_optimised_named_route_with_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003082_source')" id="l_M003082_source">show source</a> ]</p>
  <div id="M003082_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 997</span>
 997:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optimised_named_route_with_host</span>
 998:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:pages</span>, <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo.com'</span>
 999:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1000:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:url_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo.com'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:pages</span>).<span class="ruby-identifier">once</span>
1001:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:pages_url</span>)
1002:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003091" class="method">
  <div id="M003091_title" class="title">
    <b>test_paths_do_not_accept_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003091_source')" id="l_M003091_source">show source</a> ]</p>
  <div id="M003091_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1087</span>
1087:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_do_not_accept_defaults</span>
1088:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) <span class="ruby-keyword kw">do</span>
1089:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1090:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(fake default)</span>
1091:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1092:       <span class="ruby-keyword kw">end</span>
1093:     <span class="ruby-keyword kw">end</span>
1094: 
1095:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1096:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> []
1097:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1098:     <span class="ruby-keyword kw">end</span>
1099:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003088" class="method">
  <div id="M003088_title" class="title">
    <b>test_paths_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003088_source')" id="l_M003088_source">show source</a> ]</p>
  <div id="M003088_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1051</span>
1051:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_escaped</span>
1052:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1053:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1054:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1055:     <span class="ruby-keyword kw">end</span>
1056: 
1057:     <span class="ruby-comment cmt"># No + to space in URI escaping, only for query params.</span>
1058:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file/hello+world/how+are+you%3F&quot;</span>
1059:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1060:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'hello+world'</span>, <span class="ruby-value str">'how+are+you?'</span>], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1061: 
1062:     <span class="ruby-comment cmt"># Use %20 for space instead.</span>
1063:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file/hello%20world/how%20are%20you%3F&quot;</span>
1064:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1065:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'hello world'</span>, <span class="ruby-value str">'how are you?'</span>], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1066: 
1067:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file&quot;</span>
1068:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1069:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1070:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003089" class="method">
  <div id="M003089_title" class="title">
    <b>test_paths_slashes_unescaped_with_ordered_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003089_source')" id="l_M003089_source">show source</a> ]</p>
  <div id="M003089_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1072</span>
1072:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_slashes_unescaped_with_ordered_parameters</span>
1073:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:path</span>, <span class="ruby-value str">'/file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1074: 
1075:     <span class="ruby-comment cmt"># No / to %2F in URI, only for query params.</span>
1076:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1077:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/file/hello/world&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:path_path</span>, <span class="ruby-value str">'hello/world'</span>))
1078:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003100" class="method">
  <div id="M003100_title" class="title">
    <b>test_recognition_with_uppercase_controller_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003100_source')" id="l_M003100_source">show source</a> ]</p>
  <div id="M003100_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1203</span>
1203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_recognition_with_uppercase_controller_name</span>
1204:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1205:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/Content&quot;</span>))
1206:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/ConTent/list&quot;</span>))
1207:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/CONTENT/show/10&quot;</span>))
1208: 
1209:     <span class="ruby-comment cmt"># these used to work, before the routes rewrite, but support for this was pulled in the new version...</span>
1210:     <span class="ruby-comment cmt">#assert_equal({'controller' =&gt; &quot;admin/news_feed&quot;, 'action' =&gt; 'index'}, rs.recognize_path(&quot;Admin/NewsFeed&quot;))</span>
1211:     <span class="ruby-comment cmt">#assert_equal({'controller' =&gt; &quot;admin/news_feed&quot;, 'action' =&gt; 'index'}, rs.recognize_path(&quot;Admin/News_Feed&quot;))</span>
1212:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003111" class="method">
  <div id="M003111_title" class="title">
    <b>test_recognize_array_of_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003111_source')" id="l_M003111_source">show source</a> ]</p>
  <div id="M003111_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1357</span>
1357:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_recognize_array_of_methods</span>
1358:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:BooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1359:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1360:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'get_or_post'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:get</span>, <span class="ruby-identifier">:post</span>] }
1361:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'not_get_or_post'</span>
1362:     <span class="ruby-keyword kw">end</span>
1363: 
1364:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1365:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-value str">'POST'</span>
1366:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1367:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-ivar">@request</span>) }
1368:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'get_or_post'</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_parameters</span>[<span class="ruby-identifier">:action</span>]
1369: 
1370:     <span class="ruby-comment cmt"># have to recreate or else the RouteSet uses a cached version:</span>
1371:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1372:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-value str">'PUT'</span>
1373:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1374:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-ivar">@request</span>) }
1375:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'not_get_or_post'</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_parameters</span>[<span class="ruby-identifier">:action</span>]
1376:   <span class="ruby-keyword kw">ensure</span>
1377:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:BooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1378:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003101" class="method">
  <div id="M003101_title" class="title">
    <b>test_requirement_should_prevent_optional_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003101_source')" id="l_M003101_source">show source</a> ]</p>
  <div id="M003101_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1214</span>
1214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_requirement_should_prevent_optional_id</span>
1215:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1216:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">post</span> <span class="ruby-value str">'post/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1217:     <span class="ruby-keyword kw">end</span>
1218: 
1219:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/post/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
1220: 
1221:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span> <span class="ruby-keyword kw">do</span>
1222:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1223:     <span class="ruby-keyword kw">end</span>
1224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003069" class="method">
  <div id="M003069_title" class="title">
    <b>test_route_with_colon_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003069_source')" id="l_M003069_source">show source</a> ]</p>
  <div id="M003069_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 874</span>
874:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_colon_first</span>
875:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
876:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/:controller/:action/:id'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
877:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':url'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'tiny_url'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'translate'</span>
878:     <span class="ruby-keyword kw">end</span>
879:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003097" class="method">
  <div id="M003097_title" class="title">
    <b>test_route_with_fixnum_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003097_source')" id="l_M003097_source">show source</a> ]</p>
  <div id="M003097_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1164</span>
1164:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_fixnum_default</span>
1165:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1166:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1167:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1168:     <span class="ruby-keyword kw">end</span>
1169: 
1170:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>)
1171:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
1172:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>)
1173:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
1174: 
1175:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page&quot;</span>))
1176:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/1&quot;</span>))
1177:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/10&quot;</span>))
1178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003071" class="method">
  <div id="M003071_title" class="title">
    <b>test_route_with_regexp_and_captures_for_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003071_source')" id="l_M003071_source">show source</a> ]</p>
  <div id="M003071_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 893</span>
893:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_and_captures_for_controller</span>
894:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
895:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin\/(accounts|users)/</span>
896:     <span class="ruby-keyword kw">end</span>
897:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/accounts&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/accounts&quot;</span>))
898:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/users&quot;</span>))
899:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/products&quot;</span>) }
900:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003072" class="method">
  <div id="M003072_title" class="title">
    <b>test_route_with_regexp_and_dot</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003072_source')" id="l_M003072_source">show source</a> ]</p>
  <div id="M003072_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 902</span>
902:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_and_dot</span>
903:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
904:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:file'</span>,
905:                         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin|user/</span>,
906:                         <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/upload|download/</span>,
907:                         <span class="ruby-identifier">:defaults</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>},
908:                         <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">%r{[^/]+(\.[^/]+)?}</span>}
909:     <span class="ruby-keyword kw">end</span>
910:     <span class="ruby-comment cmt"># Without a file extension</span>
911:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/user/download/file'</span>,
912:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file&quot;</span>)
913:     <span class="ruby-identifier">assert_equal</span>(
914:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file&quot;</span>},
915:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/user/download/file&quot;</span>))
916: 
917:     <span class="ruby-comment cmt"># Now, let's try a file with an extension, really a dot (.)</span>
918:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/user/download/file.jpg'</span>,
919:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(
920:         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file.jpg&quot;</span>)
921:     <span class="ruby-identifier">assert_equal</span>(
922:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file.jpg&quot;</span>},
923:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/user/download/file.jpg&quot;</span>))
924:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003070" class="method">
  <div id="M003070_title" class="title">
    <b>test_route_with_regexp_for_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003070_source')" id="l_M003070_source">show source</a> ]</p>
  <div id="M003070_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 881</span>
881:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_for_controller</span>
882:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
883:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:admintoken/:action/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin\/.+/</span>
884:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
885:     <span class="ruby-keyword kw">end</span>
886:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>},
887:         <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/foo&quot;</span>))
888:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/foo&quot;</span>))
889:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>)
890:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>)
891:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003098" class="method">
  <div id="M003098_title" class="title">
    <b>test_route_with_text_default</b>()
  </div>
  <div class="description">
  <p>
For newer revision
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003098_source')" id="l_M003098_source">show source</a> ]</p>
  <div id="M003098_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1181</span>
1181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_text_default</span>
1182:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1183:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1184:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1185:     <span class="ruby-keyword kw">end</span>
1186: 
1187:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>)
1188:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/foo&quot;</span>))
1189: 
1190:     <span class="ruby-identifier">token</span> = <span class="ruby-value str">&quot;\321\202\320\265\320\272\321\201\321\202&quot;</span> <span class="ruby-comment cmt"># 'text' in russian</span>
1191:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;UTF-8&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
1192:     <span class="ruby-identifier">escaped_token</span> = <span class="ruby-constant">CGI</span><span class="ruby-operator">::</span><span class="ruby-identifier">escape</span>(<span class="ruby-identifier">token</span>)
1193: 
1194:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">escaped_token</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>)
1195:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-node">&quot;/page/#{escaped_token}&quot;</span>))
1196:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003115" class="method">
  <div id="M003115_title" class="title">
    <b>test_routes_changed_correctly_after_clear</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003115_source')" id="l_M003115_source">show source</a> ]</p>
  <div id="M003115_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1436</span>
1436:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_routes_changed_correctly_after_clear</span>
1437:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">optimise_named_routes</span> = <span class="ruby-keyword kw">true</span>
1438:     <span class="ruby-identifier">rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
1439:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1440:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'ca'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'ca'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;aa&quot;</span>
1441:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ab&quot;</span>
1442:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ac&quot;</span>
1443:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1444:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id.:format'</span>
1445:     <span class="ruby-keyword kw">end</span>
1446: 
1447:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/cc&quot;</span>
1448: 
1449:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1450:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1451: 
1452:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1453:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ab&quot;</span>
1454:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ac&quot;</span>
1455:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1456:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id.:format'</span>
1457:     <span class="ruby-keyword kw">end</span>
1458: 
1459:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/cc&quot;</span>
1460: 
1461:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1462:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1463: 
1464:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003064" class="method">
  <div id="M003064_title" class="title">
    <b>test_routes_for_controller_and_action_deprecated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003064_source')" id="l_M003064_source">show source</a> ]</p>
  <div id="M003064_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 771</span>
771:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_routes_for_controller_and_action_deprecated</span>
772:     <span class="ruby-identifier">assert_deprecated</span> { <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">routes_for_controller_and_action</span>(<span class="ruby-value str">&quot;controller&quot;</span>, <span class="ruby-value str">&quot;action&quot;</span>) }
773:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003103" class="method">
  <div id="M003103_title" class="title">
    <b>test_set_to_nil_forgets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003103_source')" id="l_M003103_source">show source</a> ]</p>
  <div id="M003103_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1243</span>
1243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_to_nil_forgets</span>
1244:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1245:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'pages/:year/:month/:day'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1246:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1247:     <span class="ruby-keyword kw">end</span>
1248: 
1249:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005'</span>,
1250:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>)
1251:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6'</span>,
1252:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>)
1253:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6/12'</span>,
1254:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>)
1255: 
1256:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6/4'</span>,
1257:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">4</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1258: 
1259:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6'</span>,
1260:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1261: 
1262:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005'</span>,
1263:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1264:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003093" class="method">
  <div id="M003093_title" class="title">
    <b>test_should_have_better_error_message_when_options_diff_is_empty</b>()
  </div>
  <div class="description">
  <p>
this specifies the case where your formerly would get a very confusing
error message with an empty diff
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003093_source')" id="l_M003093_source">show source</a> ]</p>
  <div id="M003093_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1124</span>
1124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_have_better_error_message_when_options_diff_is_empty</span>
1125:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1126:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">content</span> <span class="ruby-value str">'/content/:query'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>
1127:     <span class="ruby-keyword kw">end</span>
1128: 
1129:     <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>) }
1130:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[:action=&gt;&quot;show&quot;]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1131:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[:controller=&gt;&quot;content&quot;]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1132:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[you may have ambiguous routes, or you may need to supply additional parameters for this route]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1133:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[content_url has the following required parameters: \[&quot;content&quot;, :query\] - are they all satisfied?]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003092" class="method">
  <div id="M003092_title" class="title">
    <b>test_should_list_options_diff_when_routing_requirements_dont_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003092_source')" id="l_M003092_source">show source</a> ]</p>
  <div id="M003092_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1101</span>
1101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_list_options_diff_when_routing_requirements_dont_match</span>
1102:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1103:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">post</span> <span class="ruby-value str">'post/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1104:     <span class="ruby-keyword kw">end</span>
1105:     <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:bad_param</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;post&quot;</span>) }
1106:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^post_url failed to generate/</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>)
1107:     <span class="ruby-identifier">from_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/from \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1108:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">from_match</span>)
1109:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">from_match</span>)
1110:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">from_match</span>)
1111: 
1112:     <span class="ruby-identifier">expected_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/expected: \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1113:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">expected_match</span>)
1114:     <span class="ruby-identifier">assert_match</span>(   <span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">expected_match</span>)
1115:     <span class="ruby-identifier">assert_match</span>(   <span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">expected_match</span>)
1116: 
1117:     <span class="ruby-identifier">diff_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/diff: \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1118:     <span class="ruby-identifier">assert_match</span>(   <span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">diff_match</span>)
1119:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">diff_match</span>)
1120:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">diff_match</span>)
1121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003113" class="method">
  <div id="M003113_title" class="title">
    <b>test_subpath_generated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003113_source')" id="l_M003113_source">show source</a> ]</p>
  <div id="M003113_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1409</span>
1409:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subpath_generated</span>
1410:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:SubpathBooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1411: 
1412:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1413:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/books/:id/edit'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'edit'</span>
1414:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/items/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1415:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/new/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1416:     <span class="ruby-keyword kw">end</span>
1417: 
1418:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/books/7/edit&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">7</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span>)
1419:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/items/15/complete&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;complete&quot;</span>)
1420:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/posts/new/preview&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;preview&quot;</span>)
1421:   <span class="ruby-keyword kw">ensure</span>
1422:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:SubpathBooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003112" class="method">
  <div id="M003112_title" class="title">
    <b>test_subpath_recognized</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003112_source')" id="l_M003112_source">show source</a> ]</p>
  <div id="M003112_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1380</span>
1380:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subpath_recognized</span>
1381:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:SubpathBooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1382: 
1383:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1384:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/books/:id/edit'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'edit'</span>
1385:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/items/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1386:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/new/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1387:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>
1388:     <span class="ruby-keyword kw">end</span>
1389: 
1390:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/books/17/edit&quot;</span>
1391:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1392:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 17 edit)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1393: 
1394:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/items/3/complete&quot;</span>
1395:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1396:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 3 complete)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1397: 
1398:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/posts/new/preview&quot;</span>
1399:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1400:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books preview)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1401: 
1402:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/posts/7&quot;</span>
1403:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1404:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books show 7)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>]]
1405:   <span class="ruby-keyword kw">ensure</span>
1406:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:SubpathBooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1407:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003068" class="method">
  <div id="M003068_title" class="title">
    <b>test_time_generation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003068_source')" id="l_M003068_source">show source</a> ]</p>
  <div id="M003068_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 846</span>
846:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_generation</span>
847:     <span class="ruby-identifier">n</span> = <span class="ruby-value">5000</span>
848:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RunTimeTests</span>
849:       <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
850:       <span class="ruby-identifier">pairs</span> = [
851:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}],
852:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
853:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
854:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}],
855:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}],
856:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
857:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
858:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}],
859:       ]
860:       <span class="ruby-identifier">p</span> = <span class="ruby-keyword kw">nil</span>
861:       <span class="ruby-identifier">gentime</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> <span class="ruby-keyword kw">do</span>
862:         <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
863:         <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)<span class="ruby-operator">|</span> <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)}
864:         <span class="ruby-keyword kw">end</span>
865:       <span class="ruby-keyword kw">end</span>
866: 
867:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\n\nGeneration (RouteSet): (#{(n * 8)} urls)&quot;</span>
868:       <span class="ruby-identifier">per_url</span> = <span class="ruby-identifier">gentime</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">n</span> <span class="ruby-operator">*</span> <span class="ruby-value">8</span>)
869:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{per_url * 1000} ms/url&quot;</span>
870:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{1 / per_url} url/s\n\n&quot;</span>
871:     <span class="ruby-keyword kw">end</span>
872:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003067" class="method">
  <div id="M003067_title" class="title">
    <b>test_time_recognition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003067_source')" id="l_M003067_source">show source</a> ]</p>
  <div id="M003067_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 798</span>
798:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_recognition</span>
799:     <span class="ruby-comment cmt"># We create many routes to make situation more realistic</span>
800:     <span class="ruby-ivar">@rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
801:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
802:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">frontpage</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'search'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new'</span>
803:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">video</span><span class="ruby-operator">|</span>
804:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:comments</span>
805:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:file</span>,      <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_file'</span>
806:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:share</span>,     <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_shares'</span>
807:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:abuse</span>,     <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_abuses'</span>
808:       <span class="ruby-keyword kw">end</span>
809:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:abuses</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_abuses'</span>
810:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:video_uploads</span>
811:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:video_visits</span>
812: 
813:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:users</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
814:         <span class="ruby-identifier">user</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:settings</span>
815:         <span class="ruby-identifier">user</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span>
816:       <span class="ruby-keyword kw">end</span>
817:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:channels</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>
818:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'channel_videos'</span>
819:       <span class="ruby-keyword kw">end</span>
820:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:session</span>
821:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:lost_password</span>
822:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">search</span>    <span class="ruby-value str">'search'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'search'</span>
823:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:pages</span>
824:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
825:     }
826:     <span class="ruby-identifier">n</span> = <span class="ruby-value">1000</span>
827:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RunTimeTests</span>
828:       <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
829:       <span class="ruby-identifier">rectime</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> <span class="ruby-keyword kw">do</span>
830:         <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
831:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/videos/1234567&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
832:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/videos/1234567/abuse&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
833:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/users/1234567/settings&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
834:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/channels/1234567&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
835:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/session/new&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
836:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/show/10&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
837:         <span class="ruby-keyword kw">end</span>
838:       <span class="ruby-keyword kw">end</span>
839:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\n\nRecognition (#{rs.routes.size} routes):&quot;</span>
840:       <span class="ruby-identifier">per_url</span> = <span class="ruby-identifier">rectime</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">n</span> <span class="ruby-operator">*</span> <span class="ruby-value">6</span>)
841:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{per_url * 1000} ms/url&quot;</span>
842:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{1 / per_url} url/s\n\n&quot;</span>
843:     <span class="ruby-keyword kw">end</span>
844:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003106" class="method">
  <div id="M003106_title" class="title">
    <b>test_url_generated_when_forgetting_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003106_source')" id="l_M003106_source">show source</a> ]</p>
  <div id="M003106_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1290</span>
1290:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url_generated_when_forgetting_action</span>
1291:     [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
1292:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1293:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">hash</span>
1294:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1295:       <span class="ruby-keyword kw">end</span>
1296:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello'</span>})
1297:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>})
1298:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/hi'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>})
1299:     <span class="ruby-keyword kw">end</span>
1300:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003104" class="method">
  <div id="M003104_title" class="title">
    <b>test_url_with_no_action_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003104_source')" id="l_M003104_source">show source</a> ]</p>
  <div id="M003104_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1266</span>
1266:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url_with_no_action_specified</span>
1267:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1268:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1269:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1270:     <span class="ruby-keyword kw">end</span>
1271: 
1272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>)
1273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>)
1274:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>