  <div id="C00000509">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />LegacyRouteSetTests<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
ActiveSupport::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003018&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003039&name=setup_for_named_route" >setup_for_named_route</a></li>
  <li><a href="index.html?a=M003066&name=setup_request_method_routes_for" >setup_request_method_routes_for</a></li>
  <li><a href="index.html?a=M003019&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M003055&name=test_action_expiry" >test_action_expiry</a></li>
  <li><a href="index.html?a=M003052&name=test_backwards" >test_backwards</a></li>
  <li><a href="index.html?a=M003029&name=test_basic_named_route" >test_basic_named_route</a></li>
  <li><a href="index.html?a=M003030&name=test_basic_named_route_with_relative_url_root" >test_basic_named_route_with_relative_url_root</a></li>
  <li><a href="index.html?a=M003058&name=test_both_requirement_and_optional" >test_both_requirement_and_optional</a></li>
  <li><a href="index.html?a=M003043&name=test_changing_controller" >test_changing_controller</a></li>
  <li><a href="index.html?a=M003021&name=test_default_setup" >test_default_setup</a></li>
  <li><a href="index.html?a=M003050&name=test_dynamic_path_allowed" >test_dynamic_path_allowed</a></li>
  <li><a href="index.html?a=M003051&name=test_dynamic_recall_paths_allowed" >test_dynamic_recall_paths_allowed</a></li>
  <li><a href="index.html?a=M003070&name=test_failed_requirements_raises_exception_with_violated_requirements" >test_failed_requirements_raises_exception_with_violated_requirements</a></li>
  <li><a href="index.html?a=M003022&name=test_ignores_leading_slash" >test_ignores_leading_slash</a></li>
  <li><a href="index.html?a=M003063&name=test_named_route_method" >test_named_route_method</a></li>
  <li><a href="index.html?a=M003041&name=test_named_route_root" >test_named_route_root</a></li>
  <li><a href="index.html?a=M003035&name=test_named_route_with_blank_path_prefix" >test_named_route_with_blank_path_prefix</a></li>
  <li><a href="index.html?a=M003032&name=test_named_route_with_default" >test_named_route_with_default</a></li>
  <li><a href="index.html?a=M003033&name=test_named_route_with_name_prefix" >test_named_route_with_name_prefix</a></li>
  <li><a href="index.html?a=M003036&name=test_named_route_with_nested_controller" >test_named_route_with_nested_controller</a></li>
  <li><a href="index.html?a=M003031&name=test_named_route_with_option" >test_named_route_with_option</a></li>
  <li><a href="index.html?a=M003034&name=test_named_route_with_path_prefix" >test_named_route_with_path_prefix</a></li>
  <li><a href="index.html?a=M003042&name=test_named_route_with_regexps" >test_named_route_with_regexps</a></li>
  <li><a href="index.html?a=M003040&name=test_named_route_without_hash" >test_named_route_without_hash</a></li>
  <li><a href="index.html?a=M003064&name=test_named_routes_array" >test_named_routes_array</a></li>
  <li><a href="index.html?a=M003061&name=test_named_url_with_no_action_specified" >test_named_url_with_no_action_specified</a></li>
  <li><a href="index.html?a=M003065&name=test_nil_defaults" >test_nil_defaults</a></li>
  <li><a href="index.html?a=M003046&name=test_non_controllers_cannot_be_matched" >test_non_controllers_cannot_be_matched</a></li>
  <li><a href="index.html?a=M003037&name=test_optimised_named_route_call_never_uses_url_for" >test_optimised_named_route_call_never_uses_url_for</a></li>
  <li><a href="index.html?a=M003038&name=test_optimised_named_route_with_host" >test_optimised_named_route_with_host</a></li>
  <li><a href="index.html?a=M003047&name=test_paths_do_not_accept_defaults" >test_paths_do_not_accept_defaults</a></li>
  <li><a href="index.html?a=M003044&name=test_paths_escaped" >test_paths_escaped</a></li>
  <li><a href="index.html?a=M003045&name=test_paths_slashes_unescaped_with_ordered_parameters" >test_paths_slashes_unescaped_with_ordered_parameters</a></li>
  <li><a href="index.html?a=M003056&name=test_recognition_with_uppercase_controller_name" >test_recognition_with_uppercase_controller_name</a></li>
  <li><a href="index.html?a=M003067&name=test_recognize_array_of_methods" >test_recognize_array_of_methods</a></li>
  <li><a href="index.html?a=M003057&name=test_requirement_should_prevent_optional_id" >test_requirement_should_prevent_optional_id</a></li>
  <li><a href="index.html?a=M003025&name=test_route_with_colon_first" >test_route_with_colon_first</a></li>
  <li><a href="index.html?a=M003053&name=test_route_with_fixnum_default" >test_route_with_fixnum_default</a></li>
  <li><a href="index.html?a=M003027&name=test_route_with_regexp_and_captures_for_controller" >test_route_with_regexp_and_captures_for_controller</a></li>
  <li><a href="index.html?a=M003028&name=test_route_with_regexp_and_dot" >test_route_with_regexp_and_dot</a></li>
  <li><a href="index.html?a=M003026&name=test_route_with_regexp_for_controller" >test_route_with_regexp_for_controller</a></li>
  <li><a href="index.html?a=M003054&name=test_route_with_text_default" >test_route_with_text_default</a></li>
  <li><a href="index.html?a=M003071&name=test_routes_changed_correctly_after_clear" >test_routes_changed_correctly_after_clear</a></li>
  <li><a href="index.html?a=M003020&name=test_routes_for_controller_and_action_deprecated" >test_routes_for_controller_and_action_deprecated</a></li>
  <li><a href="index.html?a=M003059&name=test_set_to_nil_forgets" >test_set_to_nil_forgets</a></li>
  <li><a href="index.html?a=M003049&name=test_should_have_better_error_message_when_options_diff_is_empty" >test_should_have_better_error_message_when_options_diff_is_empty</a></li>
  <li><a href="index.html?a=M003048&name=test_should_list_options_diff_when_routing_requirements_dont_match" >test_should_list_options_diff_when_routing_requirements_dont_match</a></li>
  <li><a href="index.html?a=M003069&name=test_subpath_generated" >test_subpath_generated</a></li>
  <li><a href="index.html?a=M003068&name=test_subpath_recognized" >test_subpath_recognized</a></li>
  <li><a href="index.html?a=M003024&name=test_time_generation" >test_time_generation</a></li>
  <li><a href="index.html?a=M003023&name=test_time_recognition" >test_time_recognition</a></li>
  <li><a href="index.html?a=M003062&name=test_url_generated_when_forgetting_action" >test_url_generated_when_forgetting_action</a></li>
  <li><a href="index.html?a=M003060&name=test_url_with_no_action_specified" >test_url_with_no_action_specified</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>rs</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Instance methods</div>
<div id="M003018" class="method">
  <div id="M003018_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003018_source')" id="l_M003018_source">show source</a> ]</p>
  <div id="M003018_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 749</span>
749:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
750:     <span class="ruby-comment cmt"># These tests assume optimisation is on, so re-enable it.</span>
751:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">optimise_named_routes</span> = <span class="ruby-keyword kw">true</span>
752: 
753:     <span class="ruby-ivar">@rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
754: 
755:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span>.<span class="ruby-identifier">use_controllers!</span> <span class="ruby-node">%w(content admin/user admin/news_feed)</span>
756:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003039" class="method">
  <div id="M003039_title" class="title">
    <b>setup_for_named_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003039_source')" id="l_M003039_source">show source</a> ]</p>
  <div id="M003039_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 995</span>
995:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_for_named_route</span>
996:     <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">MockController</span>)
997:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">install_helpers</span>(<span class="ruby-identifier">klass</span>)
998:     <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">rs</span>)
999:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003066" class="method">
  <div id="M003066_title" class="title">
    <b>setup_request_method_routes_for</b>(method)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003066_source')" id="l_M003066_source">show source</a> ]</p>
  <div id="M003066_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1320</span>
1320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup_request_method_routes_for</span>(<span class="ruby-identifier">method</span>)
1321:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1322:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-identifier">method</span>
1323:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1324: 
1325:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1326:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'get'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span> }
1327:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span> }
1328:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'put'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:put</span> }
1329:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'delete'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:delete</span> }
1330:     <span class="ruby-keyword kw">end</span>
1331:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003019" class="method">
  <div id="M003019_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003019_source')" id="l_M003019_source">show source</a> ]</p>
  <div id="M003019_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
759:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">clear!</span>
760:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003055" class="method">
  <div id="M003055_title" class="title">
    <b>test_action_expiry</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003055_source')" id="l_M003055_source">show source</a> ]</p>
  <div id="M003055_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1189</span>
1189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_expiry</span>
1190:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1191:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>})
1192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003052" class="method">
  <div id="M003052_title" class="title">
    <b>test_backwards</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003052_source')" id="l_M003052_source">show source</a> ]</p>
  <div id="M003052_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1144</span>
1144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_backwards</span>
1145:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1146:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>
1147:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1148:     <span class="ruby-keyword kw">end</span>
1149: 
1150:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/20'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>})
1151:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/20'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">20</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1152:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'boo'</span>)
1153:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003029" class="method">
  <div id="M003029_title" class="title">
    <b>test_basic_named_route</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003029_source')" id="l_M003029_source">show source</a> ]</p>
  <div id="M003029_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 917</span>
917:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_named_route</span>
918:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:home</span>, <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>
919:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
920:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>,
921:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
922:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003030" class="method">
  <div id="M003030_title" class="title">
    <b>test_basic_named_route_with_relative_url_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003030_source')" id="l_M003030_source">show source</a> ]</p>
  <div id="M003030_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 924</span>
924:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_named_route_with_relative_url_root</span>
925:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:home</span>, <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>
926:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
927:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">&quot;/foo&quot;</span>
928:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/foo/&quot;</span>,
929:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
930:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/foo/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>)
931:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-keyword kw">nil</span>
932:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003058" class="method">
  <div id="M003058_title" class="title">
    <b>test_both_requirement_and_optional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003058_source')" id="l_M003058_source">show source</a> ]</p>
  <div id="M003058_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1217</span>
1217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_requirement_and_optional</span>
1218:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1219:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">blog</span>(<span class="ruby-value str">'test/:year'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>,
1220:         <span class="ruby-identifier">:defaults</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> },
1221:         <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d{4}/</span> }
1222:       )
1223:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1224:     <span class="ruby-keyword kw">end</span>
1225: 
1226:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/test'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1227:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/test'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
1228: 
1229:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1230:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/test&quot;</span>,
1231:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:blog_url</span>))
1232:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003043" class="method">
  <div id="M003043_title" class="title">
    <b>test_changing_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003043_source')" id="l_M003043_source">show source</a> ]</p>
  <div id="M003043_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1033</span>
1033:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_changing_controller</span>
1034:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1035: 
1036:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/stuff/show/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(
1037:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'stuff'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>},
1038:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}
1039:     )
1040:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003021" class="method">
  <div id="M003021_title" class="title">
    <b>test_default_setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003021_source')" id="l_M003021_source">show source</a> ]</p>
  <div id="M003021_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_setup</span>
767:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
768:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content&quot;</span>))
769:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/list&quot;</span>))
770:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/show/10&quot;</span>))
771: 
772:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/show/10&quot;</span>))
773: 
774:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/show/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
775: 
776:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/show'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
777:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/list/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
778: 
779:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/stuff'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'stuff'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
780:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/stuff'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/stuff'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>})
781:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003050" class="method">
  <div id="M003050_title" class="title">
    <b>test_dynamic_path_allowed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003050_source')" id="l_M003050_source">show source</a> ]</p>
  <div id="M003050_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1127</span>
1127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_path_allowed</span>
1128:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1129:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1130:     <span class="ruby-keyword kw">end</span>
1131: 
1132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(pages boo)</span>)
1133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003051" class="method">
  <div id="M003051_title" class="title">
    <b>test_dynamic_recall_paths_allowed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003051_source')" id="l_M003051_source">show source</a> ]</p>
  <div id="M003051_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1135</span>
1135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_recall_paths_allowed</span>
1136:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1137:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1138:     <span class="ruby-keyword kw">end</span>
1139: 
1140:     <span class="ruby-identifier">recall_path</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">PathSegment</span><span class="ruby-operator">::</span><span class="ruby-constant">Result</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">%w(pages boo)</span>)
1141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/boo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({}, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">recall_path</span>)
1142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003070" class="method">
  <div id="M003070_title" class="title">
    <b>test_failed_requirements_raises_exception_with_violated_requirements</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003070_source')" id="l_M003070_source">show source</a> ]</p>
  <div id="M003070_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1416</span>
1416:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_failed_requirements_raises_exception_with_violated_requirements</span>
1417:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1418:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">foo_with_requirement</span> <span class="ruby-value str">'foos/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'foos'</span>, <span class="ruby-identifier">:requirements=</span><span class="ruby-operator">&gt;</span>{<span class="ruby-identifier">:id=</span><span class="ruby-operator">&gt;</span><span class="ruby-regexp re">/\d+/</span>}
1419:     <span class="ruby-keyword kw">end</span>
1420: 
1421:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1422:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) <span class="ruby-keyword kw">do</span>
1423:       <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:foo_with_requirement_url</span>, <span class="ruby-value str">&quot;I am Against the requirements&quot;</span>)
1424:     <span class="ruby-keyword kw">end</span>
1425:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003022" class="method">
  <div id="M003022_title" class="title">
    <b>test_ignores_leading_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003022_source')" id="l_M003022_source">show source</a> ]</p>
  <div id="M003022_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 783</span>
783:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ignores_leading_slash</span>
784:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">clear!</span>
785:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/:controller/:action/:id'</span>}
786:     <span class="ruby-identifier">test_default_setup</span>
787:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003063" class="method">
  <div id="M003063_title" class="title">
    <b>test_named_route_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003063_source')" id="l_M003063_source">show source</a> ]</p>
  <div id="M003063_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1293</span>
1293:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_method</span>
1294:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1295:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">categories</span> <span class="ruby-value str">'categories'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'categories'</span>
1296:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1297:     <span class="ruby-keyword kw">end</span>
1298: 
1299:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/categories'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'categories'</span>)
1300:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/hi'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>})
1301:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003041" class="method">
  <div id="M003041_title" class="title">
    <b>test_named_route_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003041_source')" id="l_M003041_source">show source</a> ]</p>
  <div id="M003041_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1007</span>
1007:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_root</span>
1008:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1009:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">root</span> <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hello&quot;</span>
1010:     <span class="ruby-keyword kw">end</span>
1011:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1012:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:root_url</span>))
1013:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:root_path</span>))
1014:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003035" class="method">
  <div id="M003035_title" class="title">
    <b>test_named_route_with_blank_path_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003035_source')" id="l_M003035_source">show source</a> ]</p>
  <div id="M003035_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 963</span>
963:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_blank_path_prefix</span>
964:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>
965:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
966:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page&quot;</span>,
967:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>))
968:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003032" class="method">
  <div id="M003032_title" class="title">
    <b>test_named_route_with_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003032_source')" id="l_M003032_source">show source</a> ]</p>
  <div id="M003032_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 941</span>
941:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_default</span>
942:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'AboutPage'</span>
943:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
944:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page/AboutRails&quot;</span>,
945:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;AboutRails&quot;</span>))
946: 
947:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003033" class="method">
  <div id="M003033_title" class="title">
    <b>test_named_route_with_name_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003033_source')" id="l_M003033_source">show source</a> ]</p>
  <div id="M003033_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 949</span>
949:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_name_prefix</span>
950:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:name_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'my_'</span>
951:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
952:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page&quot;</span>,
953:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:my_page_url</span>))
954:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003036" class="method">
  <div id="M003036_title" class="title">
    <b>test_named_route_with_nested_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003036_source')" id="l_M003036_source">show source</a> ]</p>
  <div id="M003036_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 970</span>
970:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_nested_controller</span>
971:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:users</span>, <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
972:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
973:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/admin/user&quot;</span>,
974:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_url</span>))
975:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003031" class="method">
  <div id="M003031_title" class="title">
    <b>test_named_route_with_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003031_source')" id="l_M003031_source">show source</a> ]</p>
  <div id="M003031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 934</span>
934:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_option</span>
935:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>
936:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
937:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/page/new%20stuff&quot;</span>,
938:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new stuff'</span>))
939:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003034" class="method">
  <div id="M003034_title" class="title">
    <b>test_named_route_with_path_prefix</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003034_source')" id="l_M003034_source">show source</a> ]</p>
  <div id="M003034_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 956</span>
956:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_path_prefix</span>
957:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:page</span>, <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:path_prefix</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'my'</span>
958:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
959:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/my/page&quot;</span>,
960:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:page_url</span>))
961:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003042" class="method">
  <div id="M003042_title" class="title">
    <b>test_named_route_with_regexps</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003042_source')" id="l_M003042_source">show source</a> ]</p>
  <div id="M003042_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1016</span>
1016:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_with_regexps</span>
1017:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1018:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">article</span> <span class="ruby-value str">'page/:year/:month/:day/:title'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'page'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>,
1019:         <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>
1020:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1021:     <span class="ruby-keyword kw">end</span>
1022:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1023:     <span class="ruby-comment cmt"># assert_equal(</span>
1024:     <span class="ruby-comment cmt">#   {:controller =&gt; 'page', :action =&gt; 'show', :title =&gt; 'hi', :use_route =&gt; :article, :only_path =&gt; false},</span>
1025:     <span class="ruby-comment cmt">#   x.send(:article_url, :title =&gt; 'hi')</span>
1026:     <span class="ruby-comment cmt"># )</span>
1027:     <span class="ruby-identifier">assert_equal</span>(
1028:       <span class="ruby-value str">&quot;http://test.host/page/2005/6/10/hi&quot;</span>,
1029:       <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:article_url</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>)
1030:     )
1031:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003040" class="method">
  <div id="M003040_title" class="title">
    <b>test_named_route_without_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003040_source')" id="l_M003040_source">show source</a> ]</p>
  <div id="M003040_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1001</span>
1001:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_route_without_hash</span>
1002:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1003:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">normal</span> <span class="ruby-value str">':controller/:action/:id'</span>
1004:     <span class="ruby-keyword kw">end</span>
1005:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003064" class="method">
  <div id="M003064_title" class="title">
    <b>test_named_routes_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003064_source')" id="l_M003064_source">show source</a> ]</p>
  <div id="M003064_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1303</span>
1303:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes_array</span>
1304:     <span class="ruby-identifier">test_named_route_method</span>
1305:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:categories</span>], <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">named_routes</span>.<span class="ruby-identifier">names</span>
1306:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003061" class="method">
  <div id="M003061_title" class="title">
    <b>test_named_url_with_no_action_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003061_source')" id="l_M003061_source">show source</a> ]</p>
  <div id="M003061_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1267</span>
1267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_url_with_no_action_specified</span>
1268:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1269:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1270:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1271:     <span class="ruby-keyword kw">end</span>
1272: 
1273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>)
1274:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>)
1275: 
1276:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1277:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://test.host/&quot;</span>,
1278:                  <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>))
1279:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003065" class="method">
  <div id="M003065_title" class="title">
    <b>test_nil_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003065_source')" id="l_M003065_source">show source</a> ]</p>
  <div id="M003065_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1308</span>
1308:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_defaults</span>
1309:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1310:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'journal'</span>,
1311:         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>,
1312:         <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_journal'</span>,
1313:         <span class="ruby-identifier">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1314:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1315:     <span class="ruby-keyword kw">end</span>
1316: 
1317:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/journal'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_journal'</span>, <span class="ruby-identifier">:date</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:user_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
1318:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003046" class="method">
  <div id="M003046_title" class="title">
    <b>test_non_controllers_cannot_be_matched</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003046_source')" id="l_M003046_source">show source</a> ]</p>
  <div id="M003046_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1071</span>
1071:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_controllers_cannot_be_matched</span>
1072:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1073:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1074:     <span class="ruby-keyword kw">end</span>
1075:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/not_a/show/10&quot;</span>) }
1076:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003037" class="method">
  <div id="M003037_title" class="title">
    <b>test_optimised_named_route_call_never_uses_url_for</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003037_source')" id="l_M003037_source">show source</a> ]</p>
  <div id="M003037_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 977</span>
977:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optimised_named_route_call_never_uses_url_for</span>
978:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:users</span>, <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
979:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:user</span>, <span class="ruby-value str">'admin/user/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'/admin/user'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'show'</span>
980:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
981:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:url_for</span>).<span class="ruby-identifier">never</span>
982:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_url</span>)
983:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:users_path</span>)
984:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:user_url</span>, <span class="ruby-value">2</span>, <span class="ruby-identifier">:foo=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;bar&quot;</span>)
985:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:user_path</span>, <span class="ruby-value">3</span>, <span class="ruby-identifier">:bar=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">&quot;foo&quot;</span>)
986:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003038" class="method">
  <div id="M003038_title" class="title">
    <b>test_optimised_named_route_with_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003038_source')" id="l_M003038_source">show source</a> ]</p>
  <div id="M003038_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 988</span>
988:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_optimised_named_route_with_host</span>
989:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:pages</span>, <span class="ruby-value str">'pages'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo.com'</span>
990:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
991:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:url_for</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo.com'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:pages</span>).<span class="ruby-identifier">once</span>
992:     <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:pages_url</span>)
993:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003047" class="method">
  <div id="M003047_title" class="title">
    <b>test_paths_do_not_accept_defaults</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003047_source')" id="l_M003047_source">show source</a> ]</p>
  <div id="M003047_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1078</span>
1078:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_do_not_accept_defaults</span>
1079:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) <span class="ruby-keyword kw">do</span>
1080:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1081:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(fake default)</span>
1082:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1083:       <span class="ruby-keyword kw">end</span>
1084:     <span class="ruby-keyword kw">end</span>
1085: 
1086:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1087:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>, <span class="ruby-identifier">:path</span> =<span class="ruby-operator">&gt;</span> []
1088:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1089:     <span class="ruby-keyword kw">end</span>
1090:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003044" class="method">
  <div id="M003044_title" class="title">
    <b>test_paths_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003044_source')" id="l_M003044_source">show source</a> ]</p>
  <div id="M003044_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1042</span>
1042:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_escaped</span>
1043:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1044:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">path</span> <span class="ruby-value str">'file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_file'</span>
1045:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1046:     <span class="ruby-keyword kw">end</span>
1047: 
1048:     <span class="ruby-comment cmt"># No + to space in URI escaping, only for query params.</span>
1049:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file/hello+world/how+are+you%3F&quot;</span>
1050:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1051:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'hello+world'</span>, <span class="ruby-value str">'how+are+you?'</span>], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1052: 
1053:     <span class="ruby-comment cmt"># Use %20 for space instead.</span>
1054:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file/hello%20world/how%20are%20you%3F&quot;</span>
1055:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1056:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'hello world'</span>, <span class="ruby-value str">'how are you?'</span>], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1057: 
1058:     <span class="ruby-identifier">results</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/file&quot;</span>
1059:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">results</span>, <span class="ruby-value str">&quot;Recognition should have succeeded&quot;</span>
1060:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">results</span>[<span class="ruby-identifier">:path</span>]
1061:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003045" class="method">
  <div id="M003045_title" class="title">
    <b>test_paths_slashes_unescaped_with_ordered_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003045_source')" id="l_M003045_source">show source</a> ]</p>
  <div id="M003045_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1063</span>
1063:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_paths_slashes_unescaped_with_ordered_parameters</span>
1064:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">add_named_route</span> <span class="ruby-identifier">:path</span>, <span class="ruby-value str">'/file/*path'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1065: 
1066:     <span class="ruby-comment cmt"># No / to %2F in URI, only for query params.</span>
1067:     <span class="ruby-identifier">x</span> = <span class="ruby-identifier">setup_for_named_route</span>
1068:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/file/hello/world&quot;</span>, <span class="ruby-identifier">x</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:path_path</span>, <span class="ruby-value str">'hello/world'</span>))
1069:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003056" class="method">
  <div id="M003056_title" class="title">
    <b>test_recognition_with_uppercase_controller_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003056_source')" id="l_M003056_source">show source</a> ]</p>
  <div id="M003056_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1194</span>
1194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_recognition_with_uppercase_controller_name</span>
1195:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span> }
1196:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/Content&quot;</span>))
1197:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/ConTent/list&quot;</span>))
1198:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/CONTENT/show/10&quot;</span>))
1199: 
1200:     <span class="ruby-comment cmt"># these used to work, before the routes rewrite, but support for this was pulled in the new version...</span>
1201:     <span class="ruby-comment cmt">#assert_equal({'controller' =&gt; &quot;admin/news_feed&quot;, 'action' =&gt; 'index'}, rs.recognize_path(&quot;Admin/NewsFeed&quot;))</span>
1202:     <span class="ruby-comment cmt">#assert_equal({'controller' =&gt; &quot;admin/news_feed&quot;, 'action' =&gt; 'index'}, rs.recognize_path(&quot;Admin/News_Feed&quot;))</span>
1203:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003067" class="method">
  <div id="M003067_title" class="title">
    <b>test_recognize_array_of_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003067_source')" id="l_M003067_source">show source</a> ]</p>
  <div id="M003067_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1348</span>
1348:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_recognize_array_of_methods</span>
1349:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:BooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1350:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1351:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'get_or_post'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:get</span>, <span class="ruby-identifier">:post</span>] }
1352:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/match'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'not_get_or_post'</span>
1353:     <span class="ruby-keyword kw">end</span>
1354: 
1355:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1356:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-value str">'POST'</span>
1357:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1358:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-ivar">@request</span>) }
1359:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'get_or_post'</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_parameters</span>[<span class="ruby-identifier">:action</span>]
1360: 
1361:     <span class="ruby-comment cmt"># have to recreate or else the RouteSet uses a cached version:</span>
1362:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">TestRequest</span>.<span class="ruby-identifier">new</span>
1363:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;REQUEST_METHOD&quot;</span>] = <span class="ruby-value str">'PUT'</span>
1364:     <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_uri</span> = <span class="ruby-value str">&quot;/match&quot;</span>
1365:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize</span>(<span class="ruby-ivar">@request</span>) }
1366:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'not_get_or_post'</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_parameters</span>[<span class="ruby-identifier">:action</span>]
1367:   <span class="ruby-keyword kw">ensure</span>
1368:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:BooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1369:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003057" class="method">
  <div id="M003057_title" class="title">
    <b>test_requirement_should_prevent_optional_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003057_source')" id="l_M003057_source">show source</a> ]</p>
  <div id="M003057_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1205</span>
1205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_requirement_should_prevent_optional_id</span>
1206:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1207:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">post</span> <span class="ruby-value str">'post/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1208:     <span class="ruby-keyword kw">end</span>
1209: 
1210:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/post/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
1211: 
1212:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span> <span class="ruby-keyword kw">do</span>
1213:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>)
1214:     <span class="ruby-keyword kw">end</span>
1215:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003025" class="method">
  <div id="M003025_title" class="title">
    <b>test_route_with_colon_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003025_source')" id="l_M003025_source">show source</a> ]</p>
  <div id="M003025_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 865</span>
865:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_colon_first</span>
866:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
867:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/:controller/:action/:id'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
868:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':url'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'tiny_url'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'translate'</span>
869:     <span class="ruby-keyword kw">end</span>
870:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003053" class="method">
  <div id="M003053_title" class="title">
    <b>test_route_with_fixnum_default</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003053_source')" id="l_M003053_source">show source</a> ]</p>
  <div id="M003053_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1155</span>
1155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_fixnum_default</span>
1156:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1157:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1158:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1159:     <span class="ruby-keyword kw">end</span>
1160: 
1161:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>)
1162:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
1163:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>)
1164:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/10'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>)
1165: 
1166:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page&quot;</span>))
1167:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/1&quot;</span>))
1168:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/10&quot;</span>))
1169:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003027" class="method">
  <div id="M003027_title" class="title">
    <b>test_route_with_regexp_and_captures_for_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003027_source')" id="l_M003027_source">show source</a> ]</p>
  <div id="M003027_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 884</span>
884:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_and_captures_for_controller</span>
885:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
886:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin\/(accounts|users)/</span>
887:     <span class="ruby-keyword kw">end</span>
888:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/accounts&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/accounts&quot;</span>))
889:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/users&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/users&quot;</span>))
890:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/products&quot;</span>) }
891:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003028" class="method">
  <div id="M003028_title" class="title">
    <b>test_route_with_regexp_and_dot</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003028_source')" id="l_M003028_source">show source</a> ]</p>
  <div id="M003028_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 893</span>
893:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_and_dot</span>
894:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
895:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:file'</span>,
896:                         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin|user/</span>,
897:                         <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/upload|download/</span>,
898:                         <span class="ruby-identifier">:defaults</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>},
899:                         <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">%r{[^/]+(\.[^/]+)?}</span>}
900:     <span class="ruby-keyword kw">end</span>
901:     <span class="ruby-comment cmt"># Without a file extension</span>
902:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/user/download/file'</span>,
903:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file&quot;</span>)
904:     <span class="ruby-identifier">assert_equal</span>(
905:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file&quot;</span>},
906:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/user/download/file&quot;</span>))
907: 
908:     <span class="ruby-comment cmt"># Now, let's try a file with an extension, really a dot (.)</span>
909:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/user/download/file.jpg'</span>,
910:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(
911:         <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file.jpg&quot;</span>)
912:     <span class="ruby-identifier">assert_equal</span>(
913:       {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;user&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;download&quot;</span>, <span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;file.jpg&quot;</span>},
914:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/user/download/file.jpg&quot;</span>))
915:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003026" class="method">
  <div id="M003026_title" class="title">
    <b>test_route_with_regexp_for_controller</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003026_source')" id="l_M003026_source">show source</a> ]</p>
  <div id="M003026_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 872</span>
872:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_regexp_for_controller</span>
873:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
874:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:admintoken/:action/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/admin\/.+/</span>
875:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
876:     <span class="ruby-keyword kw">end</span>
877:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>},
878:         <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/foo&quot;</span>))
879:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/content/foo&quot;</span>))
880:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/admin/user/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;admin/user&quot;</span>, <span class="ruby-identifier">:admintoken</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;index&quot;</span>)
881:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>)
882:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003054" class="method">
  <div id="M003054_title" class="title">
    <b>test_route_with_text_default</b>()
  </div>
  <div class="description">
  <p>
For newer revision
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003054_source')" id="l_M003054_source">show source</a> ]</p>
  <div id="M003054_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1172</span>
1172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_route_with_text_default</span>
1173:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1174:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'page/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
1175:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1176:     <span class="ruby-keyword kw">end</span>
1177: 
1178:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/foo'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>)
1179:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/page/foo&quot;</span>))
1180: 
1181:     <span class="ruby-identifier">token</span> = <span class="ruby-value str">&quot;\321\202\320\265\320\272\321\201\321\202&quot;</span> <span class="ruby-comment cmt"># 'text' in russian</span>
1182:     <span class="ruby-identifier">token</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;UTF-8&quot;</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">token</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:force_encoding</span>)
1183:     <span class="ruby-identifier">escaped_token</span> = <span class="ruby-constant">CGI</span><span class="ruby-operator">::</span><span class="ruby-identifier">escape</span>(<span class="ruby-identifier">token</span>)
1184: 
1185:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/page/'</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">escaped_token</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>)
1186:     <span class="ruby-identifier">assert_equal</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show_page'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">token</span>}, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-node">&quot;/page/#{escaped_token}&quot;</span>))
1187:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003071" class="method">
  <div id="M003071_title" class="title">
    <b>test_routes_changed_correctly_after_clear</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003071_source')" id="l_M003071_source">show source</a> ]</p>
  <div id="M003071_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1427</span>
1427:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_routes_changed_correctly_after_clear</span>
1428:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">optimise_named_routes</span> = <span class="ruby-keyword kw">true</span>
1429:     <span class="ruby-identifier">rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
1430:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1431:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'ca'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'ca'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;aa&quot;</span>
1432:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ab&quot;</span>
1433:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ac&quot;</span>
1434:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1435:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id.:format'</span>
1436:     <span class="ruby-keyword kw">end</span>
1437: 
1438:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/cc&quot;</span>
1439: 
1440:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1441:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1442: 
1443:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1444:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cb'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ab&quot;</span>
1445:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cc'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ac&quot;</span>
1446:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1447:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id.:format'</span>
1448:     <span class="ruby-keyword kw">end</span>
1449: 
1450:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/cc&quot;</span>
1451: 
1452:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1453:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(cc ac)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1454: 
1455:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003020" class="method">
  <div id="M003020_title" class="title">
    <b>test_routes_for_controller_and_action_deprecated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003020_source')" id="l_M003020_source">show source</a> ]</p>
  <div id="M003020_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 762</span>
762:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_routes_for_controller_and_action_deprecated</span>
763:     <span class="ruby-identifier">assert_deprecated</span> { <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">routes_for_controller_and_action</span>(<span class="ruby-value str">&quot;controller&quot;</span>, <span class="ruby-value str">&quot;action&quot;</span>) }
764:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003059" class="method">
  <div id="M003059_title" class="title">
    <b>test_set_to_nil_forgets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003059_source')" id="l_M003059_source">show source</a> ]</p>
  <div id="M003059_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1234</span>
1234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_to_nil_forgets</span>
1235:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1236:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'pages/:year/:month/:day'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
1237:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1238:     <span class="ruby-keyword kw">end</span>
1239: 
1240:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005'</span>,
1241:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>)
1242:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6'</span>,
1243:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>)
1244:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6/12'</span>,
1245:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2005</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>)
1246: 
1247:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6/4'</span>,
1248:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">4</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1249: 
1250:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005/6'</span>,
1251:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1252: 
1253:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/pages/2005'</span>,
1254:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list_pages'</span>, <span class="ruby-identifier">:year</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'2005'</span>, <span class="ruby-identifier">:month</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'6'</span>, <span class="ruby-identifier">:day</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'12'</span>})
1255:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003049" class="method">
  <div id="M003049_title" class="title">
    <b>test_should_have_better_error_message_when_options_diff_is_empty</b>()
  </div>
  <div class="description">
  <p>
this specifies the case where your formerly would get a very confusing
error message with an empty diff
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003049_source')" id="l_M003049_source">show source</a> ]</p>
  <div id="M003049_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1115</span>
1115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_have_better_error_message_when_options_diff_is_empty</span>
1116:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1117:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">content</span> <span class="ruby-value str">'/content/:query'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>
1118:     <span class="ruby-keyword kw">end</span>
1119: 
1120:     <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content&quot;</span>) }
1121:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[:action=&gt;&quot;show&quot;]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1122:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[:controller=&gt;&quot;content&quot;]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1123:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[you may have ambiguous routes, or you may need to supply additional parameters for this route]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1124:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r[content_url has the following required parameters: \[&quot;content&quot;, :query\] - are they all satisfied?]</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1125:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003048" class="method">
  <div id="M003048_title" class="title">
    <b>test_should_list_options_diff_when_routing_requirements_dont_match</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003048_source')" id="l_M003048_source">show source</a> ]</p>
  <div id="M003048_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1092</span>
1092:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_list_options_diff_when_routing_requirements_dont_match</span>
1093:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1094:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">post</span> <span class="ruby-value str">'post/:id'</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:requirements</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-regexp re">/\d+/</span>}
1095:     <span class="ruby-keyword kw">end</span>
1096:     <span class="ruby-identifier">exception</span> = <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">RoutingError</span>) { <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:bad_param</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>, <span class="ruby-identifier">:use_route</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;post&quot;</span>) }
1097:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/^post_url failed to generate/</span>, <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>
1098:     <span class="ruby-identifier">from_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/from \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1099:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">from_match</span>
1100:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">from_match</span>
1101:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">from_match</span>
1102: 
1103:     <span class="ruby-identifier">expected_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/expected: \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1104:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">expected_match</span>
1105:     <span class="ruby-identifier">assert_match</span>    <span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">expected_match</span>
1106:     <span class="ruby-identifier">assert_match</span>    <span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">expected_match</span>
1107: 
1108:     <span class="ruby-identifier">diff_match</span> = <span class="ruby-identifier">exception</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">match</span>(<span class="ruby-regexp re">/diff: \{[^\}]+\}/</span>).<span class="ruby-identifier">to_s</span>
1109:     <span class="ruby-identifier">assert_match</span>    <span class="ruby-regexp re">/:bad_param=&gt;&quot;foo&quot;/</span>,   <span class="ruby-identifier">diff_match</span>
1110:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/:action=&gt;&quot;show&quot;/</span>,     <span class="ruby-identifier">diff_match</span>
1111:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">/:controller=&gt;&quot;post&quot;/</span>, <span class="ruby-identifier">diff_match</span>
1112:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003069" class="method">
  <div id="M003069_title" class="title">
    <b>test_subpath_generated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003069_source')" id="l_M003069_source">show source</a> ]</p>
  <div id="M003069_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1400</span>
1400:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subpath_generated</span>
1401:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:SubpathBooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1402: 
1403:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1404:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/books/:id/edit'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'edit'</span>
1405:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/items/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1406:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/new/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1407:     <span class="ruby-keyword kw">end</span>
1408: 
1409:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/books/7/edit&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">7</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;edit&quot;</span>)
1410:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/items/15/complete&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;complete&quot;</span>)
1411:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/posts/new/preview&quot;</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;subpath_books&quot;</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;preview&quot;</span>)
1412:   <span class="ruby-keyword kw">ensure</span>
1413:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:SubpathBooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1414:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003068" class="method">
  <div id="M003068_title" class="title">
    <b>test_subpath_recognized</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003068_source')" id="l_M003068_source">show source</a> ]</p>
  <div id="M003068_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1371</span>
1371:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subpath_recognized</span>
1372:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span>(<span class="ruby-identifier">:SubpathBooksController</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>))
1373: 
1374:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span>
1375:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/books/:id/edit'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'edit'</span>
1376:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/items/:id/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1377:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/new/:action'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>
1378:       <span class="ruby-identifier">r</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">'/posts/:id'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'subpath_books'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;show&quot;</span>
1379:     <span class="ruby-keyword kw">end</span>
1380: 
1381:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/books/17/edit&quot;</span>
1382:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1383:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 17 edit)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1384: 
1385:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/items/3/complete&quot;</span>
1386:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1387:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books 3 complete)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1388: 
1389:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/posts/new/preview&quot;</span>
1390:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1391:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books preview)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>]]
1392: 
1393:     <span class="ruby-identifier">hash</span> = <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span> <span class="ruby-value str">&quot;/posts/7&quot;</span>
1394:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">hash</span>
1395:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(subpath_books show 7)</span>, [<span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:controller</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:action</span>], <span class="ruby-identifier">hash</span>[<span class="ruby-identifier">:id</span>]]
1396:   <span class="ruby-keyword kw">ensure</span>
1397:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:SubpathBooksController</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1398:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003024" class="method">
  <div id="M003024_title" class="title">
    <b>test_time_generation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003024_source')" id="l_M003024_source">show source</a> ]</p>
  <div id="M003024_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 837</span>
837:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_generation</span>
838:     <span class="ruby-identifier">n</span> = <span class="ruby-value">5000</span>
839:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RunTimeTests</span>
840:       <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
841:       <span class="ruby-identifier">pairs</span> = [
842:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}],
843:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
844:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
845:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}],
846:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>}],
847:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
848:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}],
849:         [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'show'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'admin/user'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'list'</span>}],
850:       ]
851:       <span class="ruby-identifier">p</span> = <span class="ruby-keyword kw">nil</span>
852:       <span class="ruby-identifier">gentime</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> <span class="ruby-keyword kw">do</span>
853:         <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
854:         <span class="ruby-identifier">pairs</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)<span class="ruby-operator">|</span> <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>)}
855:         <span class="ruby-keyword kw">end</span>
856:       <span class="ruby-keyword kw">end</span>
857: 
858:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\n\nGeneration (RouteSet): (#{(n * 8)} urls)&quot;</span>
859:       <span class="ruby-identifier">per_url</span> = <span class="ruby-identifier">gentime</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">n</span> <span class="ruby-operator">*</span> <span class="ruby-value">8</span>)
860:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{per_url * 1000} ms/url&quot;</span>
861:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{1 / per_url} url/s\n\n&quot;</span>
862:     <span class="ruby-keyword kw">end</span>
863:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003023" class="method">
  <div id="M003023_title" class="title">
    <b>test_time_recognition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003023_source')" id="l_M003023_source">show source</a> ]</p>
  <div id="M003023_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 789</span>
789:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_recognition</span>
790:     <span class="ruby-comment cmt"># We create many routes to make situation more realistic</span>
791:     <span class="ruby-ivar">@rs</span> = <span class="ruby-operator">::</span><span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">RouteSet</span>.<span class="ruby-identifier">new</span>
792:     <span class="ruby-ivar">@rs</span>.<span class="ruby-identifier">draw</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
793:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">frontpage</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'search'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new'</span>
794:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">video</span><span class="ruby-operator">|</span>
795:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:comments</span>
796:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:file</span>,      <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_file'</span>
797:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:share</span>,     <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_shares'</span>
798:         <span class="ruby-identifier">video</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:abuse</span>,     <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_abuses'</span>
799:       <span class="ruby-keyword kw">end</span>
800:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:abuses</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'video_abuses'</span>
801:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:video_uploads</span>
802:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:video_visits</span>
803: 
804:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:users</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">user</span><span class="ruby-operator">|</span>
805:         <span class="ruby-identifier">user</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:settings</span>
806:         <span class="ruby-identifier">user</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span>
807:       <span class="ruby-keyword kw">end</span>
808:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:channels</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">channel</span><span class="ruby-operator">|</span>
809:         <span class="ruby-identifier">channel</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:videos</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'channel_videos'</span>
810:       <span class="ruby-keyword kw">end</span>
811:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:session</span>
812:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resource</span>  <span class="ruby-identifier">:lost_password</span>
813:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">search</span>    <span class="ruby-value str">'search'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'search'</span>
814:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:pages</span>
815:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
816:     }
817:     <span class="ruby-identifier">n</span> = <span class="ruby-value">1000</span>
818:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RunTimeTests</span>
819:       <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
820:       <span class="ruby-identifier">rectime</span> = <span class="ruby-constant">Benchmark</span>.<span class="ruby-identifier">realtime</span> <span class="ruby-keyword kw">do</span>
821:         <span class="ruby-identifier">n</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
822:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/videos/1234567&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
823:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/videos/1234567/abuse&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
824:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/users/1234567/settings&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
825:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/channels/1234567&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
826:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/session/new&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
827:           <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">recognize_path</span>(<span class="ruby-value str">&quot;/admin/user/show/10&quot;</span>, {<span class="ruby-identifier">:method</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:get</span>})
828:         <span class="ruby-keyword kw">end</span>
829:       <span class="ruby-keyword kw">end</span>
830:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\n\nRecognition (#{rs.routes.size} routes):&quot;</span>
831:       <span class="ruby-identifier">per_url</span> = <span class="ruby-identifier">rectime</span> <span class="ruby-operator">/</span> (<span class="ruby-identifier">n</span> <span class="ruby-operator">*</span> <span class="ruby-value">6</span>)
832:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{per_url * 1000} ms/url&quot;</span>
833:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;#{1 / per_url} url/s\n\n&quot;</span>
834:     <span class="ruby-keyword kw">end</span>
835:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003062" class="method">
  <div id="M003062_title" class="title">
    <b>test_url_generated_when_forgetting_action</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003062_source')" id="l_M003062_source">show source</a> ]</p>
  <div id="M003062_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1281</span>
1281:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url_generated_when_forgetting_action</span>
1282:     [{<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>}].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">hash</span><span class="ruby-operator">|</span>
1283:       <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1284:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">hash</span>
1285:         <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1286:       <span class="ruby-keyword kw">end</span>
1287:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}, {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hello'</span>})
1288:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>})
1289:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/content/hi'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>({<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'hi'</span>})
1290:     <span class="ruby-keyword kw">end</span>
1291:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003060" class="method">
  <div id="M003060_title" class="title">
    <b>test_url_with_no_action_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003060_source')" id="l_M003060_source">show source</a> ]</p>
  <div id="M003060_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 1257</span>
1257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url_with_no_action_specified</span>
1258:     <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
1259:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>
1260:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
1261:     <span class="ruby-keyword kw">end</span>
1262: 
1263:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>)
1264:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/'</span>, <span class="ruby-identifier">rs</span>.<span class="ruby-identifier">generate</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'content'</span>)
1265:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>