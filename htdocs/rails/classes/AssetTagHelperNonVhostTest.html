  <div id="C00000473">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />AssetTagHelperNonVhostTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/template/asset_tag_helper_test_rb.html');">actionpack/test/template/asset_tag_helper_test.rb</a>

Parent:&nbsp;
ActionView::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003052&name=protocol" >protocol</a></li>
  <li><a href="index.html?a=M003050&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003053&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M003061&name=test_assert_css_and_js_of_the_same_name_return_correct_extension" >test_assert_css_and_js_of_the_same_name_return_correct_extension</a></li>
  <li><a href="index.html?a=M003059&name=test_asset_host_without_protocol_should_use_request_protocol" >test_asset_host_without_protocol_should_use_request_protocol</a></li>
  <li><a href="index.html?a=M003060&name=test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present" >test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</a></li>
  <li><a href="index.html?a=M003054&name=test_should_compute_proper_path" >test_should_compute_proper_path</a></li>
  <li><a href="index.html?a=M003056&name=test_should_compute_proper_path_with_asset_host" >test_should_compute_proper_path_with_asset_host</a></li>
  <li><a href="index.html?a=M003057&name=test_should_ignore_asset_host_on_complete_url" >test_should_ignore_asset_host_on_complete_url</a></li>
  <li><a href="index.html?a=M003055&name=test_should_ignore_relative_root_path_on_complete_url" >test_should_ignore_relative_root_path_on_complete_url</a></li>
  <li><a href="index.html?a=M003058&name=test_should_wildcard_asset_host_between_zero_and_four" >test_should_wildcard_asset_host_between_zero_and_four</a></li>
  <li><a href="index.html?a=M003051&name=url_for" >url_for</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M003052" class="method">
  <div id="M003052_title" class="title">
    <b>protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003052_source')" id="l_M003052_source">show source</a> ]</p>
  <div id="M003052_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 698</span>
698:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
699:         <span class="ruby-value str">'gopher://'</span>
700:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003050" class="method">
  <div id="M003050_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003050_source')" id="l_M003050_source">show source</a> ]</p>
  <div id="M003050_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 686</span>
686:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
687:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">&quot;/collaboration/hieraki&quot;</span>
688: 
689:     <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
690:       <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:request</span>
691: 
692:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
693:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
694:       <span class="ruby-keyword kw">end</span>
695:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
696: 
697:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
698:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
699:         <span class="ruby-value str">'gopher://'</span>
700:       <span class="ruby-keyword kw">end</span>
701:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
702: 
703:     <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>
704: 
705:     <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">AssetTagHelper</span><span class="ruby-operator">::</span><span class="ruby-identifier">reset_javascript_include_default</span>
706:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003053" class="method">
  <div id="M003053_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003053_source')" id="l_M003053_source">show source</a> ]</p>
  <div id="M003053_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 708</span>
708:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
709:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-keyword kw">nil</span>
710:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003061" class="method">
  <div id="M003061_title" class="title">
    <b>test_assert_css_and_js_of_the_same_name_return_correct_extension</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003061_source')" id="l_M003061_source">show source</a> ]</p>
  <div id="M003061_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 765</span>
765:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assert_css_and_js_of_the_same_name_return_correct_extension</span>
766:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/foo.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
767:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/foo.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
768: 
769:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003059" class="method">
  <div id="M003059_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003059_source')" id="l_M003059_source">show source</a> ]</p>
  <div id="M003059_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 751</span>
751:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol</span>
752:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com'</span>
753:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
754:   <span class="ruby-keyword kw">ensure</span>
755:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
756:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003060" class="method">
  <div id="M003060_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003060_source')" id="l_M003060_source">show source</a> ]</p>
  <div id="M003060_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</span>
759:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com/files/go/here'</span>
760:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/files/go/here/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
761:   <span class="ruby-keyword kw">ensure</span>
762:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
763:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003054" class="method">
  <div id="M003054_title" class="title">
    <b>test_should_compute_proper_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003054_source')" id="l_M003054_source">show source</a> ]</p>
  <div id="M003054_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 712</span>
712:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path</span>
713:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
714:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
715:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
716:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
717:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse.png'&quot; src=&quot;/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
718:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
719:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003056" class="method">
  <div id="M003056_title" class="title">
    <b>test_should_compute_proper_path_with_asset_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003056_source')" id="l_M003056_source">show source</a> ]</p>
  <div id="M003056_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 725</span>
725:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path_with_asset_host</span>
726:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
727:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
728:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
729:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
730:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
731:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
732:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
733:   <span class="ruby-keyword kw">ensure</span>
734:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
735:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003057" class="method">
  <div id="M003057_title" class="title">
    <b>test_should_ignore_asset_host_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003057_source')" id="l_M003057_source">show source</a> ]</p>
  <div id="M003057_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 737</span>
737:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_asset_host_on_complete_url</span>
738:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
739:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://bar.example.com/stylesheets/style.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;)</span>, <span class="ruby-identifier">stylesheet_link_tag</span>(<span class="ruby-value str">&quot;http://bar.example.com/stylesheets/style.css&quot;</span>))
740:   <span class="ruby-keyword kw">ensure</span>
741:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
742:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003055" class="method">
  <div id="M003055_title" class="title">
    <b>test_should_ignore_relative_root_path_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003055_source')" id="l_M003055_source">show source</a> ]</p>
  <div id="M003055_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 721</span>
721:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_relative_root_path_on_complete_url</span>
722:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://www.example.com/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;http://www.example.com/images/xml.png&quot;</span>))
723:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003058" class="method">
  <div id="M003058_title" class="title">
    <b>test_should_wildcard_asset_host_between_zero_and_four</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003058_source')" id="l_M003058_source">show source</a> ]</p>
  <div id="M003058_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 744</span>
744:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_wildcard_asset_host_between_zero_and_four</span>
745:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'http://a%d.example.com'</span>
746:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r(http://a[0123].example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
747:   <span class="ruby-keyword kw">ensure</span>
748:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
749:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003051" class="method">
  <div id="M003051_title" class="title">
    <b>url_for</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003051_source')" id="l_M003051_source">show source</a> ]</p>
  <div id="M003051_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 692</span>
692:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
693:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
694:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>