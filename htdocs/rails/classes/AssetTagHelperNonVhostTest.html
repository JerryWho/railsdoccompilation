  <div id="C00000513">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />AssetTagHelperNonVhostTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/template/asset_tag_helper_test_rb.html');">actionpack/test/template/asset_tag_helper_test.rb</a>

Parent:&nbsp;
ActionView::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003032&name=protocol" >protocol</a></li>
  <li><a href="index.html?a=M003030&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003033&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M003041&name=test_assert_css_and_js_of_the_same_name_return_correct_extension" >test_assert_css_and_js_of_the_same_name_return_correct_extension</a></li>
  <li><a href="index.html?a=M003039&name=test_asset_host_without_protocol_should_use_request_protocol" >test_asset_host_without_protocol_should_use_request_protocol</a></li>
  <li><a href="index.html?a=M003040&name=test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present" >test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</a></li>
  <li><a href="index.html?a=M003034&name=test_should_compute_proper_path" >test_should_compute_proper_path</a></li>
  <li><a href="index.html?a=M003036&name=test_should_compute_proper_path_with_asset_host" >test_should_compute_proper_path_with_asset_host</a></li>
  <li><a href="index.html?a=M003037&name=test_should_ignore_asset_host_on_complete_url" >test_should_ignore_asset_host_on_complete_url</a></li>
  <li><a href="index.html?a=M003035&name=test_should_ignore_relative_root_path_on_complete_url" >test_should_ignore_relative_root_path_on_complete_url</a></li>
  <li><a href="index.html?a=M003038&name=test_should_wildcard_asset_host_between_zero_and_four" >test_should_wildcard_asset_host_between_zero_and_four</a></li>
  <li><a href="index.html?a=M003031&name=url_for" >url_for</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M003032" class="method">
  <div id="M003032_title" class="title">
    <b>protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003032_source')" id="l_M003032_source">show source</a> ]</p>
  <div id="M003032_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 699</span>
699:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
700:         <span class="ruby-value str">'gopher://'</span>
701:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003030" class="method">
  <div id="M003030_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003030_source')" id="l_M003030_source">show source</a> ]</p>
  <div id="M003030_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 687</span>
687:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
688:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">&quot;/collaboration/hieraki&quot;</span>
689: 
690:     <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
691:       <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:request</span>
692: 
693:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
694:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
695:       <span class="ruby-keyword kw">end</span>
696:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
697: 
698:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
699:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
700:         <span class="ruby-value str">'gopher://'</span>
701:       <span class="ruby-keyword kw">end</span>
702:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
703: 
704:     <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>
705: 
706:     <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">AssetTagHelper</span><span class="ruby-operator">::</span><span class="ruby-identifier">reset_javascript_include_default</span>
707:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003033" class="method">
  <div id="M003033_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003033_source')" id="l_M003033_source">show source</a> ]</p>
  <div id="M003033_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 709</span>
709:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
710:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-keyword kw">nil</span>
711:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003041" class="method">
  <div id="M003041_title" class="title">
    <b>test_assert_css_and_js_of_the_same_name_return_correct_extension</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003041_source')" id="l_M003041_source">show source</a> ]</p>
  <div id="M003041_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assert_css_and_js_of_the_same_name_return_correct_extension</span>
767:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/foo.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
768:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/foo.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
769: 
770:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003039" class="method">
  <div id="M003039_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003039_source')" id="l_M003039_source">show source</a> ]</p>
  <div id="M003039_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 752</span>
752:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol</span>
753:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com'</span>
754:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
755:   <span class="ruby-keyword kw">ensure</span>
756:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
757:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003040" class="method">
  <div id="M003040_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003040_source')" id="l_M003040_source">show source</a> ]</p>
  <div id="M003040_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 759</span>
759:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</span>
760:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com/files/go/here'</span>
761:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/files/go/here/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
762:   <span class="ruby-keyword kw">ensure</span>
763:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
764:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003034" class="method">
  <div id="M003034_title" class="title">
    <b>test_should_compute_proper_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003034_source')" id="l_M003034_source">show source</a> ]</p>
  <div id="M003034_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 713</span>
713:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path</span>
714:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
715:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
716:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
717:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
718:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse.png'&quot; src=&quot;/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
719:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
720:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003036" class="method">
  <div id="M003036_title" class="title">
    <b>test_should_compute_proper_path_with_asset_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003036_source')" id="l_M003036_source">show source</a> ]</p>
  <div id="M003036_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 726</span>
726:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path_with_asset_host</span>
727:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
728:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
729:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
730:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
731:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
732:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
733:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
734:   <span class="ruby-keyword kw">ensure</span>
735:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
736:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003037" class="method">
  <div id="M003037_title" class="title">
    <b>test_should_ignore_asset_host_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003037_source')" id="l_M003037_source">show source</a> ]</p>
  <div id="M003037_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 738</span>
738:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_asset_host_on_complete_url</span>
739:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
740:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://bar.example.com/stylesheets/style.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;)</span>, <span class="ruby-identifier">stylesheet_link_tag</span>(<span class="ruby-value str">&quot;http://bar.example.com/stylesheets/style.css&quot;</span>))
741:   <span class="ruby-keyword kw">ensure</span>
742:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
743:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003035" class="method">
  <div id="M003035_title" class="title">
    <b>test_should_ignore_relative_root_path_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003035_source')" id="l_M003035_source">show source</a> ]</p>
  <div id="M003035_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 722</span>
722:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_relative_root_path_on_complete_url</span>
723:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://www.example.com/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;http://www.example.com/images/xml.png&quot;</span>))
724:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003038" class="method">
  <div id="M003038_title" class="title">
    <b>test_should_wildcard_asset_host_between_zero_and_four</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003038_source')" id="l_M003038_source">show source</a> ]</p>
  <div id="M003038_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 745</span>
745:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_wildcard_asset_host_between_zero_and_four</span>
746:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'http://a%d.example.com'</span>
747:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r(http://a[0123].example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
748:   <span class="ruby-keyword kw">ensure</span>
749:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
750:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003031" class="method">
  <div id="M003031_title" class="title">
    <b>url_for</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003031_source')" id="l_M003031_source">show source</a> ]</p>
  <div id="M003031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 693</span>
693:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
694:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
695:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>