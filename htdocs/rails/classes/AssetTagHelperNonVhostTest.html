  <div id="C00000507">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />AssetTagHelperNonVhostTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/template/asset_tag_helper_test_rb.html');">actionpack/test/template/asset_tag_helper_test.rb</a>

Parent:&nbsp;
ActionView::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M003008&name=protocol" >protocol</a></li>
  <li><a href="index.html?a=M003006&name=setup" >setup</a></li>
  <li><a href="index.html?a=M003009&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M003017&name=test_assert_css_and_js_of_the_same_name_return_correct_extension" >test_assert_css_and_js_of_the_same_name_return_correct_extension</a></li>
  <li><a href="index.html?a=M003015&name=test_asset_host_without_protocol_should_use_request_protocol" >test_asset_host_without_protocol_should_use_request_protocol</a></li>
  <li><a href="index.html?a=M003016&name=test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present" >test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</a></li>
  <li><a href="index.html?a=M003010&name=test_should_compute_proper_path" >test_should_compute_proper_path</a></li>
  <li><a href="index.html?a=M003012&name=test_should_compute_proper_path_with_asset_host" >test_should_compute_proper_path_with_asset_host</a></li>
  <li><a href="index.html?a=M003013&name=test_should_ignore_asset_host_on_complete_url" >test_should_ignore_asset_host_on_complete_url</a></li>
  <li><a href="index.html?a=M003011&name=test_should_ignore_relative_root_path_on_complete_url" >test_should_ignore_relative_root_path_on_complete_url</a></li>
  <li><a href="index.html?a=M003014&name=test_should_wildcard_asset_host_between_zero_and_four" >test_should_wildcard_asset_host_between_zero_and_four</a></li>
  <li><a href="index.html?a=M003007&name=url_for" >url_for</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M003008" class="method">
  <div id="M003008_title" class="title">
    <b>protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003008_source')" id="l_M003008_source">show source</a> ]</p>
  <div id="M003008_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 687</span>
687:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
688:         <span class="ruby-value str">'gopher://'</span>
689:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003006" class="method">
  <div id="M003006_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003006_source')" id="l_M003006_source">show source</a> ]</p>
  <div id="M003006_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 675</span>
675:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
676:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">&quot;/collaboration/hieraki&quot;</span>
677: 
678:     <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
679:       <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:request</span>
680: 
681:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
682:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
683:       <span class="ruby-keyword kw">end</span>
684:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
685: 
686:     <span class="ruby-ivar">@request</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
687:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">protocol</span>
688:         <span class="ruby-value str">'gopher://'</span>
689:       <span class="ruby-keyword kw">end</span>
690:     <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">new</span>
691: 
692:     <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">request</span> = <span class="ruby-ivar">@request</span>
693: 
694:     <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span><span class="ruby-operator">::</span><span class="ruby-constant">AssetTagHelper</span><span class="ruby-operator">::</span><span class="ruby-identifier">reset_javascript_include_default</span>
695:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003009" class="method">
  <div id="M003009_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003009_source')" id="l_M003009_source">show source</a> ]</p>
  <div id="M003009_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 697</span>
697:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
698:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-keyword kw">nil</span>
699:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003017" class="method">
  <div id="M003017_title" class="title">
    <b>test_assert_css_and_js_of_the_same_name_return_correct_extension</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003017_source')" id="l_M003017_source">show source</a> ]</p>
  <div id="M003017_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 754</span>
754:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assert_css_and_js_of_the_same_name_return_correct_extension</span>
755:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/foo.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
756:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/foo.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;foo&quot;</span>))
757: 
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003015" class="method">
  <div id="M003015_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003015_source')" id="l_M003015_source">show source</a> ]</p>
  <div id="M003015_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 740</span>
740:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol</span>
741:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com'</span>
742:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
743:   <span class="ruby-keyword kw">ensure</span>
744:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
745:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003016" class="method">
  <div id="M003016_title" class="title">
    <b>test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003016_source')" id="l_M003016_source">show source</a> ]</p>
  <div id="M003016_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 747</span>
747:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_asset_host_without_protocol_should_use_request_protocol_even_if_path_present</span>
748:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'a.example.com/files/go/here'</span>
749:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'gopher://a.example.com/files/go/here/collaboration/hieraki/images/xml.png'</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
750:   <span class="ruby-keyword kw">ensure</span>
751:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
752:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003010" class="method">
  <div id="M003010_title" class="title">
    <b>test_should_compute_proper_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003010_source')" id="l_M003010_source">show source</a> ]</p>
  <div id="M003010_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 701</span>
701:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path</span>
702:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
703:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
704:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
705:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
706:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse.png'&quot; src=&quot;/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
707:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
708:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003012" class="method">
  <div id="M003012_title" class="title">
    <b>test_should_compute_proper_path_with_asset_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003012_source')" id="l_M003012_source">show source</a> ]</p>
  <div id="M003012_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_compute_proper_path_with_asset_host</span>
715:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
716:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://www.example.com/collaboration/hieraki&quot; rel=&quot;alternate&quot; title=&quot;RSS&quot; type=&quot;application/rss+xml&quot; /&gt;)</span>, <span class="ruby-identifier">auto_discovery_link_tag</span>)
717:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/javascripts/xmlhr.js)</span>, <span class="ruby-identifier">javascript_path</span>(<span class="ruby-value str">&quot;xmlhr&quot;</span>))
718:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/stylesheets/style.css)</span>, <span class="ruby-identifier">stylesheet_path</span>(<span class="ruby-value str">&quot;style&quot;</span>))
719:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://assets.example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;xml.png&quot;</span>))
720:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;/images/mouse_over.png&quot;</span>))
721:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;img alt=&quot;Mouse2&quot; onmouseover=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse_over2.png'&quot; onmouseout=&quot;this.src='http://assets.example.com/collaboration/hieraki/images/mouse2.png'&quot; src=&quot;http://assets.example.com/collaboration/hieraki/images/mouse2.png&quot; /&gt;)</span>, <span class="ruby-identifier">image_tag</span>(<span class="ruby-value str">&quot;mouse2.png&quot;</span>, <span class="ruby-identifier">:mouseover</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;mouse_over2.png&quot;</span>)))
722:   <span class="ruby-keyword kw">ensure</span>
723:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
724:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003013" class="method">
  <div id="M003013_title" class="title">
    <b>test_should_ignore_asset_host_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003013_source')" id="l_M003013_source">show source</a> ]</p>
  <div id="M003013_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 726</span>
726:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_asset_host_on_complete_url</span>
727:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;http://assets.example.com&quot;</span>
728:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(&lt;link href=&quot;http://bar.example.com/stylesheets/style.css&quot; media=&quot;screen&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;)</span>, <span class="ruby-identifier">stylesheet_link_tag</span>(<span class="ruby-value str">&quot;http://bar.example.com/stylesheets/style.css&quot;</span>))
729:   <span class="ruby-keyword kw">ensure</span>
730:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">&quot;&quot;</span>
731:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003011" class="method">
  <div id="M003011_title" class="title">
    <b>test_should_ignore_relative_root_path_on_complete_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003011_source')" id="l_M003011_source">show source</a> ]</p>
  <div id="M003011_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 710</span>
710:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_ignore_relative_root_path_on_complete_url</span>
711:     <span class="ruby-identifier">assert_dom_equal</span>(<span class="ruby-value str">%(http://www.example.com/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">&quot;http://www.example.com/images/xml.png&quot;</span>))
712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003014" class="method">
  <div id="M003014_title" class="title">
    <b>test_should_wildcard_asset_host_between_zero_and_four</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003014_source')" id="l_M003014_source">show source</a> ]</p>
  <div id="M003014_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 733</span>
733:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_wildcard_asset_host_between_zero_and_four</span>
734:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-value str">'http://a%d.example.com'</span>
735:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r(http://a[0123].example.com/collaboration/hieraki/images/xml.png)</span>, <span class="ruby-identifier">image_path</span>(<span class="ruby-value str">'xml.png'</span>)
736:   <span class="ruby-keyword kw">ensure</span>
737:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">asset_host</span> = <span class="ruby-keyword kw">nil</span>
738:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003007" class="method">
  <div id="M003007_title" class="title">
    <b>url_for</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003007_source')" id="l_M003007_source">show source</a> ]</p>
  <div id="M003007_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/template/asset_tag_helper_test.rb, line 681</span>
681:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
682:         <span class="ruby-value str">&quot;http://www.example.com/collaboration/hieraki&quot;</span>
683:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>