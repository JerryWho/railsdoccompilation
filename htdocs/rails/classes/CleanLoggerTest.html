  <div id="C00000030">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />CleanLoggerTest<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/clean_logger_test_rb.html');">activesupport/test/clean_logger_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000230&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000233&name=test_datetime_format" >test_datetime_format</a></li>
  <li><a href="index.html?a=M000231&name=test_format_message" >test_format_message</a></li>
  <li><a href="index.html?a=M000234&name=test_nonstring_formatting" >test_nonstring_formatting</a></li>
  <li><a href="index.html?a=M000232&name=test_silence" >test_silence</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000230" class="method">
  <div id="M000230_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000230_source')" id="l_M000230_source">show source</a> ]</p>
  <div id="M000230_source" class="dyn-source">
<pre>
   <span class="ruby-comment cmt"># File activesupport/test/clean_logger_test.rb, line 5</span>
5:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
6:     <span class="ruby-ivar">@out</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
7:     <span class="ruby-ivar">@logger</span> = <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@out</span>)
8:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000233" class="method">
  <div id="M000233_title" class="title">
    <b>test_datetime_format</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000233_source')" id="l_M000233_source">show source</a> ]</p>
  <div id="M000233_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/clean_logger_test.rb, line 44</span>
44:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_datetime_format</span>
45:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">formatter</span> = <span class="ruby-constant">Logger</span><span class="ruby-operator">::</span><span class="ruby-constant">Formatter</span>.<span class="ruby-identifier">new</span>
46:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">datetime_format</span> = <span class="ruby-value str">&quot;%Y-%m-%d&quot;</span>
47:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-value str">'debug'</span>
48:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;%Y-%m-%d&quot;</span>, <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">datetime_format</span>
49:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/D, \[\d\d\d\d-\d\d-\d\d#\d+\] DEBUG -- : debug/</span>, <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">string</span>)
50:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000231" class="method">
  <div id="M000231_title" class="title">
    <b>test_format_message</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000231_source')" id="l_M000231_source">show source</a> ]</p>
  <div id="M000231_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/clean_logger_test.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_format_message</span>
11:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">error</span> <span class="ruby-value str">'error'</span>
12:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;error\n&quot;</span>, <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">string</span>
13:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000234" class="method">
  <div id="M000234_title" class="title">
    <b>test_nonstring_formatting</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000234_source')" id="l_M000234_source">show source</a> ]</p>
  <div id="M000234_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/clean_logger_test.rb, line 52</span>
52:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nonstring_formatting</span>
53:     <span class="ruby-identifier">an_object</span> = [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>, <span class="ruby-value">4</span>, <span class="ruby-value">5</span>]
54:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span> <span class="ruby-identifier">an_object</span>
55:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;#{an_object.inspect}\n&quot;</span>, <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">string</span>)
56:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000232" class="method">
  <div id="M000232_title" class="title">
    <b>test_silence</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000232_source')" id="l_M000232_source">show source</a> ]</p>
  <div id="M000232_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/clean_logger_test.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silence</span>
16:     <span class="ruby-comment cmt"># Without yielding self.</span>
17:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span>
18:       <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">debug</span>  <span class="ruby-value str">'debug'</span>
19:       <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">info</span>   <span class="ruby-value str">'info'</span>
20:       <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">warn</span>   <span class="ruby-value str">'warn'</span>
21:       <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">error</span>  <span class="ruby-value str">'error'</span>
22:       <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">fatal</span>  <span class="ruby-value str">'fatal'</span>
23:     <span class="ruby-keyword kw">end</span>
24: 
25:     <span class="ruby-comment cmt"># Yielding self.</span>
26:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">logger</span><span class="ruby-operator">|</span>
27:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>  <span class="ruby-value str">'debug'</span>
28:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">info</span>   <span class="ruby-value str">'info'</span>
29:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span>   <span class="ruby-value str">'warn'</span>
30:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">error</span>  <span class="ruby-value str">'error'</span>
31:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">fatal</span>  <span class="ruby-value str">'fatal'</span>
32:     <span class="ruby-keyword kw">end</span>
33: 
34:     <span class="ruby-comment cmt"># Silencer off.</span>
35:     <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">silencer</span> = <span class="ruby-keyword kw">false</span>
36:     <span class="ruby-ivar">@logger</span>.<span class="ruby-identifier">silence</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">logger</span><span class="ruby-operator">|</span>
37:       <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">warn</span>   <span class="ruby-value str">'unsilenced'</span>
38:     <span class="ruby-keyword kw">end</span>
39:     <span class="ruby-constant">Logger</span>.<span class="ruby-identifier">silencer</span> = <span class="ruby-keyword kw">true</span>
40: 
41:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;error\nfatal\nerror\nfatal\nunsilenced\n&quot;</span>, <span class="ruby-ivar">@out</span>.<span class="ruby-identifier">string</span>
42:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>