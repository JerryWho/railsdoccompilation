  <div id="C00000079">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />JsonSerializationTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/json_serialization_test_rb.html');">activerecord/test/cases/json_serialization_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000583&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000590&name=test_methods_are_called_on_object" >test_methods_are_called_on_object</a></li>
  <li><a href="index.html?a=M000589&name=test_should_allow_attribute_filtering_with_except" >test_should_allow_attribute_filtering_with_except</a></li>
  <li><a href="index.html?a=M000588&name=test_should_allow_attribute_filtering_with_only" >test_should_allow_attribute_filtering_with_only</a></li>
  <li><a href="index.html?a=M000584&name=test_should_demodulize_root_in_json" >test_should_demodulize_root_in_json</a></li>
  <li><a href="index.html?a=M000587&name=test_should_encode_all_encodable_attributes" >test_should_encode_all_encodable_attributes</a></li>
  <li><a href="index.html?a=M000586&name=test_should_include_root_in_json" >test_should_include_root_in_json</a></li>
  <li><a href="index.html?a=M000585&name=test_should_include_root_in_json" >test_should_include_root_in_json</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/JsonSerializationTest/NamespacedContact.html');" class="link">JsonSerializationTest::NamespacedContact</a>"<br />




<div class="sectiontitle">Public Instance methods</div>
<div id="M000583" class="method">
  <div id="M000583_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000583_source')" id="l_M000583_source">show source</a> ]</p>
  <div id="M000583_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
15:     <span class="ruby-ivar">@contact</span> = <span class="ruby-constant">Contact</span>.<span class="ruby-identifier">new</span>(
16:       <span class="ruby-identifier">:name</span>        =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Konata Izumi'</span>,
17:       <span class="ruby-identifier">:age</span>         =<span class="ruby-operator">&gt;</span> <span class="ruby-value">16</span>,
18:       <span class="ruby-identifier">:avatar</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'binarydata'</span>,
19:       <span class="ruby-identifier">:created_at</span>  =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2006</span>, <span class="ruby-value">8</span>, <span class="ruby-value">1</span>),
20:       <span class="ruby-identifier">:awesome</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,
21:       <span class="ruby-identifier">:preferences</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:shows</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'anime'</span> }
22:     )
23:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000590" class="method">
  <div id="M000590_title" class="title">
    <b>test_methods_are_called_on_object</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000590_source')" id="l_M000590_source">show source</a> ]</p>
  <div id="M000590_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 90</span>
 90:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_methods_are_called_on_object</span>
 91:     <span class="ruby-comment cmt"># Define methods on fixture.</span>
 92:     <span class="ruby-keyword kw">def</span> <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">label</span>; <span class="ruby-value str">&quot;Has cheezburger&quot;</span>; <span class="ruby-keyword kw">end</span>
 93:     <span class="ruby-keyword kw">def</span> <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">favorite_quote</span>; <span class="ruby-value str">&quot;Constraints are liberating&quot;</span>; <span class="ruby-keyword kw">end</span>
 94: 
 95:     <span class="ruby-comment cmt"># Single method.</span>
 96:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;label&quot;:&quot;Has cheezburger&quot;}</span>, <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:name</span>, <span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:label</span>)
 97: 
 98:     <span class="ruby-comment cmt"># Both methods.</span>
 99:     <span class="ruby-identifier">methods_json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:name</span>, <span class="ruby-identifier">:methods</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:label</span>, <span class="ruby-identifier">:favorite_quote</span>])
100:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;label&quot;:&quot;Has cheezburger&quot;}</span>, <span class="ruby-identifier">methods_json</span>
101:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;favorite_quote&quot;:&quot;Constraints are liberating&quot;}</span>, <span class="ruby-identifier">methods_json</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000589" class="method">
  <div id="M000589_title" class="title">
    <b>test_should_allow_attribute_filtering_with_except</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000589_source')" id="l_M000589_source">show source</a> ]</p>
  <div id="M000589_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 80</span>
80:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_allow_attribute_filtering_with_except</span>
81:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:name</span>, <span class="ruby-identifier">:age</span>])
82: 
83:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">%r{&quot;name&quot;:&quot;Konata Izumi&quot;}</span>, <span class="ruby-identifier">json</span>
84:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">%r{&quot;age&quot;:16}</span>, <span class="ruby-identifier">json</span>
85:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;awesome&quot;:true}</span>, <span class="ruby-identifier">json</span>
86:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">json</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&quot;created_at&quot;:#{ActiveSupport::JSON.encode(Time.utc(2006, 8, 1))})</span>)
87:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;preferences&quot;:\{&quot;shows&quot;:&quot;anime&quot;\}}</span>, <span class="ruby-identifier">json</span>
88:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000588" class="method">
  <div id="M000588_title" class="title">
    <b>test_should_allow_attribute_filtering_with_only</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000588_source')" id="l_M000588_source">show source</a> ]</p>
  <div id="M000588_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 70</span>
70:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_allow_attribute_filtering_with_only</span>
71:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:name</span>, <span class="ruby-identifier">:age</span>])
72: 
73:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;name&quot;:&quot;Konata Izumi&quot;}</span>, <span class="ruby-identifier">json</span>
74:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;age&quot;:16}</span>, <span class="ruby-identifier">json</span>
75:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">%r{&quot;awesome&quot;:true}</span>, <span class="ruby-identifier">json</span>
76:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">json</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&quot;created_at&quot;:#{ActiveSupport::JSON.encode(Time.utc(2006, 8, 1))})</span>)
77:     <span class="ruby-identifier">assert_no_match</span> <span class="ruby-regexp re">%r{&quot;preferences&quot;:\{&quot;shows&quot;:&quot;anime&quot;\}}</span>, <span class="ruby-identifier">json</span>
78:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000584" class="method">
  <div id="M000584_title" class="title">
    <b>test_should_demodulize_root_in_json</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000584_source')" id="l_M000584_source">show source</a> ]</p>
  <div id="M000584_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_demodulize_root_in_json</span>
26:     <span class="ruby-constant">NamespacedContact</span>.<span class="ruby-identifier">include_root_in_json</span> = <span class="ruby-keyword kw">true</span>
27:     <span class="ruby-ivar">@contact</span> = <span class="ruby-constant">NamespacedContact</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'whatever'</span>
28:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>
29:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{^\{&quot;namespaced_contact&quot;:\{}</span>, <span class="ruby-identifier">json</span>
30:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000587" class="method">
  <div id="M000587_title" class="title">
    <b>test_should_encode_all_encodable_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000587_source')" id="l_M000587_source">show source</a> ]</p>
  <div id="M000587_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 60</span>
60:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_encode_all_encodable_attributes</span>
61:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>
62: 
63:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;name&quot;:&quot;Konata Izumi&quot;}</span>, <span class="ruby-identifier">json</span>
64:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;age&quot;:16}</span>, <span class="ruby-identifier">json</span>
65:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">json</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&quot;created_at&quot;:#{ActiveSupport::JSON.encode(Time.utc(2006, 8, 1))})</span>)
66:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;awesome&quot;:true}</span>, <span class="ruby-identifier">json</span>
67:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;preferences&quot;:\{&quot;shows&quot;:&quot;anime&quot;\}}</span>, <span class="ruby-identifier">json</span>
68:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000586" class="method">
  <div id="M000586_title" class="title">
    <b>test_should_include_root_in_json</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000586_source')" id="l_M000586_source">show source</a> ]</p>
  <div id="M000586_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 46</span>
46:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_include_root_in_json</span>
47:     <span class="ruby-constant">Contact</span>.<span class="ruby-identifier">include_root_in_json</span> = <span class="ruby-keyword kw">true</span>
48:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>(<span class="ruby-identifier">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'json_contact'</span>)
49: 
50:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{^\{&quot;json_contact&quot;:\{}</span>, <span class="ruby-identifier">json</span>
51:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;name&quot;:&quot;Konata Izumi&quot;}</span>, <span class="ruby-identifier">json</span>
52:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;age&quot;:16}</span>, <span class="ruby-identifier">json</span>
53:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">json</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&quot;created_at&quot;:#{ActiveSupport::JSON.encode(Time.utc(2006, 8, 1))})</span>)
54:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;awesome&quot;:true}</span>, <span class="ruby-identifier">json</span>
55:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;preferences&quot;:\{&quot;shows&quot;:&quot;anime&quot;\}}</span>, <span class="ruby-identifier">json</span>
56:   <span class="ruby-keyword kw">ensure</span>
57:     <span class="ruby-constant">Contact</span>.<span class="ruby-identifier">include_root_in_json</span> = <span class="ruby-keyword kw">false</span>
58:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000585" class="method">
  <div id="M000585_title" class="title">
    <b>test_should_include_root_in_json</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000585_source')" id="l_M000585_source">show source</a> ]</p>
  <div id="M000585_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/json_serialization_test.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_include_root_in_json</span>
33:     <span class="ruby-constant">Contact</span>.<span class="ruby-identifier">include_root_in_json</span> = <span class="ruby-keyword kw">true</span>
34:     <span class="ruby-identifier">json</span> = <span class="ruby-ivar">@contact</span>.<span class="ruby-identifier">to_json</span>
35: 
36:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{^\{&quot;contact&quot;:\{}</span>, <span class="ruby-identifier">json</span>
37:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;name&quot;:&quot;Konata Izumi&quot;}</span>, <span class="ruby-identifier">json</span>
38:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;age&quot;:16}</span>, <span class="ruby-identifier">json</span>
39:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">json</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-node">%(&quot;created_at&quot;:#{ActiveSupport::JSON.encode(Time.utc(2006, 8, 1))})</span>)
40:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;awesome&quot;:true}</span>, <span class="ruby-identifier">json</span>
41:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r{&quot;preferences&quot;:\{&quot;shows&quot;:&quot;anime&quot;\}}</span>, <span class="ruby-identifier">json</span>
42:   <span class="ruby-keyword kw">ensure</span>
43:     <span class="ruby-constant">Contact</span>.<span class="ruby-identifier">include_root_in_json</span> = <span class="ruby-keyword kw">false</span>
44:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>