  <div id="C00000914">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />GemDependencyTest<br/>
  In:
<a href="#" onclick="jsHref('files/railties/test/gem_dependency_test_rb.html');">railties/test/gem_dependency_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006431&name=setup" >setup</a></li>
  <li><a href="index.html?a=M006432&name=test_configuration_adds_gem_dependency" >test_configuration_adds_gem_dependency</a></li>
  <li><a href="index.html?a=M006438&name=test_gem_adds_load_paths" >test_gem_adds_load_paths</a></li>
  <li><a href="index.html?a=M006459&name=test_gem_build_passes_options_to_dependencies" >test_gem_build_passes_options_to_dependencies</a></li>
  <li><a href="index.html?a=M006433&name=test_gem_creates_install_command" >test_gem_creates_install_command</a></li>
  <li><a href="index.html?a=M006436&name=test_gem_creates_unpack_command" >test_gem_creates_unpack_command</a></li>
  <li><a href="index.html?a=M006443&name=test_gem_dependencies_compare_for_uniq" >test_gem_dependencies_compare_for_uniq</a></li>
  <li><a href="index.html?a=M006457&name=test_gem_determines_build_status" >test_gem_determines_build_status</a></li>
  <li><a href="index.html?a=M006458&name=test_gem_determines_build_status_only_on_vendor_gems" >test_gem_determines_build_status_only_on_vendor_gems</a></li>
  <li><a href="index.html?a=M006452&name=test_gem_does_not_unpack_framework_gems" >test_gem_does_not_unpack_framework_gems</a></li>
  <li><a href="index.html?a=M006454&name=test_gem_from_directory_name" >test_gem_from_directory_name</a></li>
  <li><a href="index.html?a=M006453&name=test_gem_from_directory_name_attempts_to_load_specification" >test_gem_from_directory_name_attempts_to_load_specification</a></li>
  <li><a href="index.html?a=M006455&name=test_gem_from_directory_name_loads_specification_successfully" >test_gem_from_directory_name_loads_specification_successfully</a></li>
  <li><a href="index.html?a=M006456&name=test_gem_from_invalid_directory_name" >test_gem_from_invalid_directory_name</a></li>
  <li><a href="index.html?a=M006451&name=test_gem_guards_against_duplicate_unpacks" >test_gem_guards_against_duplicate_unpacks</a></li>
  <li><a href="index.html?a=M006449&name=test_gem_handle_missing_dependencies" >test_gem_handle_missing_dependencies</a></li>
  <li><a href="index.html?a=M006450&name=test_gem_ignores_development_dependencies" >test_gem_ignores_development_dependencies</a></li>
  <li><a href="index.html?a=M006448&name=test_gem_load_bad_specification" >test_gem_load_bad_specification</a></li>
  <li><a href="index.html?a=M006444&name=test_gem_load_frozen" >test_gem_load_frozen</a></li>
  <li><a href="index.html?a=M006446&name=test_gem_load_frozen_minimum_version" >test_gem_load_frozen_minimum_version</a></li>
  <li><a href="index.html?a=M006445&name=test_gem_load_frozen_specific_version" >test_gem_load_frozen_specific_version</a></li>
  <li><a href="index.html?a=M006447&name=test_gem_load_missing_specification" >test_gem_load_missing_specification</a></li>
  <li><a href="index.html?a=M006440&name=test_gem_loading" >test_gem_loading</a></li>
  <li><a href="index.html?a=M006441&name=test_gem_with_lib_loading" >test_gem_with_lib_loading</a></li>
  <li><a href="index.html?a=M006434&name=test_gem_with_source_creates_install_command" >test_gem_with_source_creates_install_command</a></li>
  <li><a href="index.html?a=M006439&name=test_gem_with_version_adds_load_paths" >test_gem_with_version_adds_load_paths</a></li>
  <li><a href="index.html?a=M006435&name=test_gem_with_version_creates_install_command" >test_gem_with_version_creates_install_command</a></li>
  <li><a href="index.html?a=M006437&name=test_gem_with_version_unpack_install_command" >test_gem_with_version_unpack_install_command</a></li>
  <li><a href="index.html?a=M006442&name=test_gem_without_lib_loading" >test_gem_without_lib_loading</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M006431" class="method">
  <div id="M006431_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006431_source')" id="l_M006431_source">show source</a> ]</p>
  <div id="M006431_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 10</span>
10:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
11:     <span class="ruby-ivar">@gem</span>              = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;xhpricotx&quot;</span>
12:     <span class="ruby-ivar">@gem_with_source</span>  = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;xhpricotx&quot;</span>, <span class="ruby-identifier">:source</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://code.whytheluckystiff.net&quot;</span>
13:     <span class="ruby-ivar">@gem_with_version</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;xhpricotx&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;= 0.6&quot;</span>
14:     <span class="ruby-ivar">@gem_with_lib</span>     = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;xaws-s3x&quot;</span>, <span class="ruby-identifier">:lib</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;aws/s3&quot;</span>
15:     <span class="ruby-ivar">@gem_without_load</span>  = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;xhpricotx&quot;</span>, <span class="ruby-identifier">:lib</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
16:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006432" class="method">
  <div id="M006432_title" class="title">
    <b>test_configuration_adds_gem_dependency</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006432_source')" id="l_M006432_source">show source</a> ]</p>
  <div id="M006432_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 18</span>
18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_configuration_adds_gem_dependency</span>
19:     <span class="ruby-identifier">config</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">new</span>
20:     <span class="ruby-identifier">config</span>.<span class="ruby-identifier">gem</span> <span class="ruby-value str">&quot;xaws-s3x&quot;</span>, <span class="ruby-identifier">:lib</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;aws/s3&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;0.4.0&quot;</span>
21:     <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">&quot;install&quot;</span>, <span class="ruby-value str">&quot;xaws-s3x&quot;</span>, <span class="ruby-value str">&quot;--version&quot;</span>, <span class="ruby-value str">'&quot;= 0.4.0&quot;'</span>]], <span class="ruby-identifier">config</span>.<span class="ruby-identifier">gems</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">install_command</span> }
22:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006438" class="method">
  <div id="M006438_title" class="title">
    <b>test_gem_adds_load_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006438_source')" id="l_M006438_source">show source</a> ]</p>
  <div id="M006438_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 48</span>
48:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_adds_load_paths</span>
49:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:gem</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem</span>)
50:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">add_load_paths</span>
51:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006459" class="method">
  <div id="M006459_title" class="title">
    <b>test_gem_build_passes_options_to_dependencies</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006459_source')" id="l_M006459_source">show source</a> ]</p>
  <div id="M006459_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_build_passes_options_to_dependencies</span>
212:     <span class="ruby-identifier">start_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;dummy-gem-g&quot;</span>)
213:     <span class="ruby-identifier">dep_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;dummy-gem-f&quot;</span>)
214:     <span class="ruby-identifier">start_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:dependencies</span>).<span class="ruby-identifier">returns</span>([<span class="ruby-identifier">dep_gem</span>])
215:     <span class="ruby-identifier">dep_gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:build</span>).<span class="ruby-identifier">with</span>({ <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }).<span class="ruby-identifier">once</span>
216:     <span class="ruby-identifier">start_gem</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
217:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006433" class="method">
  <div id="M006433_title" class="title">
    <b>test_gem_creates_install_command</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006433_source')" id="l_M006433_source">show source</a> ]</p>
  <div id="M006433_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 24</span>
24:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_creates_install_command</span>
25:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(install xhpricotx)</span>, <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">install_command</span>
26:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006436" class="method">
  <div id="M006436_title" class="title">
    <b>test_gem_creates_unpack_command</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006436_source')" id="l_M006436_source">show source</a> ]</p>
  <div id="M006436_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_creates_unpack_command</span>
37:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(unpack xhpricotx)</span>, <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">unpack_command</span>
38:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006443" class="method">
  <div id="M006443_title" class="title">
    <b>test_gem_dependencies_compare_for_uniq</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006443_source')" id="l_M006443_source">show source</a> ]</p>
  <div id="M006443_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 82</span>
82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_dependencies_compare_for_uniq</span>
83:     <span class="ruby-identifier">gem1</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem1&quot;</span>
84:     <span class="ruby-identifier">gem1a</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem1&quot;</span>
85:     <span class="ruby-identifier">gem2</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem2&quot;</span>
86:     <span class="ruby-identifier">gem2a</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem2&quot;</span>
87:     <span class="ruby-identifier">gem3</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem2&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&gt;=0.1&quot;</span>
88:     <span class="ruby-identifier">gem3a</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem2&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&gt;=0.1&quot;</span>
89:     <span class="ruby-identifier">gem4</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;gem3&quot;</span>
90:     <span class="ruby-identifier">gems</span> = [<span class="ruby-identifier">gem1</span>, <span class="ruby-identifier">gem2</span>, <span class="ruby-identifier">gem1a</span>, <span class="ruby-identifier">gem3</span>, <span class="ruby-identifier">gem2a</span>, <span class="ruby-identifier">gem4</span>, <span class="ruby-identifier">gem3a</span>, <span class="ruby-identifier">gem2</span>, <span class="ruby-identifier">gem4</span>]
91:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">gems</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
92:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006457" class="method">
  <div id="M006457_title" class="title">
    <b>test_gem_determines_build_status</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006457_source')" id="l_M006457_source">show source</a> ]</p>
  <div id="M006457_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_determines_build_status</span>
197:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>,  <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;dummy-gem-a&quot;</span>).<span class="ruby-identifier">built?</span>
198:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>,  <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;dummy-gem-i&quot;</span>).<span class="ruby-identifier">built?</span>
199:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;dummy-gem-j&quot;</span>).<span class="ruby-identifier">built?</span>
200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006458" class="method">
  <div id="M006458_title" class="title">
    <b>test_gem_determines_build_status_only_on_vendor_gems</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006458_source')" id="l_M006458_source">show source</a> ]</p>
  <div id="M006458_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_determines_build_status_only_on_vendor_gems</span>
203:     <span class="ruby-identifier">framework_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'dummy-framework-gem'</span>)
204:     <span class="ruby-identifier">framework_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:framework_gem?</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword kw">true</span>)  <span class="ruby-comment cmt"># already loaded</span>
205:     <span class="ruby-identifier">framework_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:vendor_rails?</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword kw">false</span>)  <span class="ruby-comment cmt"># but not in vendor/rails</span>
206:     <span class="ruby-identifier">framework_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:vendor_gem?</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword kw">false</span>)  <span class="ruby-comment cmt"># and not in vendor/gems</span>
207:     <span class="ruby-identifier">framework_gem</span>.<span class="ruby-identifier">add_load_paths</span>  <span class="ruby-comment cmt"># freeze framework gem early </span>
208:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">framework_gem</span>.<span class="ruby-identifier">built?</span>
209:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006452" class="method">
  <div id="M006452_title" class="title">
    <b>test_gem_does_not_unpack_framework_gems</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006452_source')" id="l_M006452_source">show source</a> ]</p>
  <div id="M006452_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_does_not_unpack_framework_gems</span>
162:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-a&quot;</span>
163:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:framework_gem?</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword kw">true</span>)
164:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:unpack_base</span>).<span class="ruby-identifier">never</span>
165:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">unpack</span>
166:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006454" class="method">
  <div id="M006454_title" class="title">
    <b>test_gem_from_directory_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006454_source')" id="l_M006454_source">show source</a> ]</p>
  <div id="M006454_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_from_directory_name</span>
175:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-value str">'dummy-gem-1.1'</span>, <span class="ruby-keyword kw">false</span>)
176:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'dummy-gem'</span>, <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">name</span>
177:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'= 1.1'</span>,     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">version_requirements</span>.<span class="ruby-identifier">to_s</span>
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006453" class="method">
  <div id="M006453_title" class="title">
    <b>test_gem_from_directory_name_attempts_to_load_specification</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006453_source')" id="l_M006453_source">show source</a> ]</p>
  <div id="M006453_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 168</span>
168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_from_directory_name_attempts_to_load_specification</span>
169:     <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
170:       <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-value str">'dummy-gem-1.1'</span>)
171:     <span class="ruby-keyword kw">end</span>
172:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006455" class="method">
  <div id="M006455_title" class="title">
    <b>test_gem_from_directory_name_loads_specification_successfully</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006455_source')" id="l_M006455_source">show source</a> ]</p>
  <div id="M006455_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_from_directory_name_loads_specification_successfully</span>
181:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
182:       <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">unpacked_path</span>, <span class="ruby-value str">'dummy-gem-g-1.0.0'</span>))
183:       <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">specification</span>
184:     <span class="ruby-keyword kw">end</span>
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006456" class="method">
  <div id="M006456_title" class="title">
    <b>test_gem_from_invalid_directory_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006456_source')" id="l_M006456_source">show source</a> ]</p>
  <div id="M006456_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_from_invalid_directory_name</span>
188:     <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
189:       <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-value str">'dummy-gem'</span>)
190:     <span class="ruby-keyword kw">end</span>
191:     <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
192:       <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">from_directory_name</span>(<span class="ruby-value str">'dummy'</span>)
193:     <span class="ruby-keyword kw">end</span>
194:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006451" class="method">
  <div id="M006451_title" class="title">
    <b>test_gem_guards_against_duplicate_unpacks</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006451_source')" id="l_M006451_source">show source</a> ]</p>
  <div id="M006451_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_guards_against_duplicate_unpacks</span>
155:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-a&quot;</span>
156:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:frozen?</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-keyword kw">true</span>)
157:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:unpack_base</span>).<span class="ruby-identifier">never</span>
158:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">unpack</span>
159:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006449" class="method">
  <div id="M006449_title" class="title">
    <b>test_gem_handle_missing_dependencies</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006449_source')" id="l_M006449_source">show source</a> ]</p>
  <div id="M006449_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_handle_missing_dependencies</span>
135:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-g&quot;</span>
136:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
137:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
138:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">size</span>
139:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">size</span>
140:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
141:       <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span>
142:         <span class="ruby-identifier">g</span>.<span class="ruby-identifier">dependencies</span>
143:       <span class="ruby-keyword kw">end</span>
144:     <span class="ruby-keyword kw">end</span>
145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006450" class="method">
  <div id="M006450_title" class="title">
    <b>test_gem_ignores_development_dependencies</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006450_source')" id="l_M006450_source">show source</a> ]</p>
  <div id="M006450_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 147</span>
147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_ignores_development_dependencies</span>
148:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-k&quot;</span>
149:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
150:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
151:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">dependencies</span>.<span class="ruby-identifier">size</span>
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006448" class="method">
  <div id="M006448_title" class="title">
    <b>test_gem_load_bad_specification</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006448_source')" id="l_M006448_source">show source</a> ]</p>
  <div id="M006448_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 126</span>
126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_load_bad_specification</span>
127:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-e&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;= 1.0.0&quot;</span>
128:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
129:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
130:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">DUMMY_GEM_E_VERSION</span>
131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1.0.0'</span>, <span class="ruby-constant">DUMMY_GEM_E_VERSION</span>
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006444" class="method">
  <div id="M006444_title" class="title">
    <b>test_gem_load_frozen</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006444_source')" id="l_M006444_source">show source</a> ]</p>
  <div id="M006444_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 94</span>
94:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_load_frozen</span>
95:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-a&quot;</span>
96:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
97:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
98:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">DUMMY_GEM_A_VERSION</span>
99:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006446" class="method">
  <div id="M006446_title" class="title">
    <b>test_gem_load_frozen_minimum_version</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006446_source')" id="l_M006446_source">show source</a> ]</p>
  <div id="M006446_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_load_frozen_minimum_version</span>
110:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-c&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&gt;=0.5.0'</span>
111:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
112:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
113:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">DUMMY_GEM_C_VERSION</span>
114:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'0.6.0'</span>, <span class="ruby-constant">DUMMY_GEM_C_VERSION</span>
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006445" class="method">
  <div id="M006445_title" class="title">
    <b>test_gem_load_frozen_specific_version</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006445_source')" id="l_M006445_source">show source</a> ]</p>
  <div id="M006445_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_load_frozen_specific_version</span>
102:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-b&quot;</span>, <span class="ruby-identifier">:version</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'0.4.0'</span>
103:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
104:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
105:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">DUMMY_GEM_B_VERSION</span>
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'0.4.0'</span>, <span class="ruby-constant">DUMMY_GEM_B_VERSION</span>
107:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006447" class="method">
  <div id="M006447_title" class="title">
    <b>test_gem_load_missing_specification</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006447_source')" id="l_M006447_source">show source</a> ]</p>
  <div id="M006447_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_load_missing_specification</span>
118:     <span class="ruby-identifier">dummy_gem</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">GemDependency</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;dummy-gem-d&quot;</span>
119:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">add_load_paths</span>
120:     <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">load</span>
121:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-constant">DUMMY_GEM_D_VERSION</span>
122:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1.0.0'</span>, <span class="ruby-constant">DUMMY_GEM_D_VERSION</span>
123:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'lib'</span>, <span class="ruby-value str">'lib/dummy-gem-d.rb'</span>], <span class="ruby-identifier">dummy_gem</span>.<span class="ruby-identifier">specification</span>.<span class="ruby-identifier">files</span>
124:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006440" class="method">
  <div id="M006440_title" class="title">
    <b>test_gem_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006440_source')" id="l_M006440_source">show source</a> ]</p>
  <div id="M006440_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 59</span>
59:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_loading</span>
60:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:gem</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem</span>)
61:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:require</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">name</span>)
62:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">add_load_paths</span>
63:     <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">load</span>
64:     <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@gem</span>.<span class="ruby-identifier">loaded?</span>
65:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006441" class="method">
  <div id="M006441_title" class="title">
    <b>test_gem_with_lib_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006441_source')" id="l_M006441_source">show source</a> ]</p>
  <div id="M006441_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 67</span>
67:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_with_lib_loading</span>
68:     <span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:gem</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem_with_lib</span>)
69:     <span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:require</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">lib</span>)
70:     <span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">add_load_paths</span>
71:     <span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">load</span>
72:     <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@gem_with_lib</span>.<span class="ruby-identifier">loaded?</span>
73:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006434" class="method">
  <div id="M006434_title" class="title">
    <b>test_gem_with_source_creates_install_command</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006434_source')" id="l_M006434_source">show source</a> ]</p>
  <div id="M006434_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 28</span>
28:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_with_source_creates_install_command</span>
29:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(install xhpricotx --source http://code.whytheluckystiff.net)</span>, <span class="ruby-ivar">@gem_with_source</span>.<span class="ruby-identifier">install_command</span>
30:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006439" class="method">
  <div id="M006439_title" class="title">
    <b>test_gem_with_version_adds_load_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006439_source')" id="l_M006439_source">show source</a> ]</p>
  <div id="M006439_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_with_version_adds_load_paths</span>
54:     <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:gem</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem_with_version</span>)
55:     <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">add_load_paths</span>
56:     <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">load_paths_added?</span>
57:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006435" class="method">
  <div id="M006435_title" class="title">
    <b>test_gem_with_version_creates_install_command</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006435_source')" id="l_M006435_source">show source</a> ]</p>
  <div id="M006435_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_with_version_creates_install_command</span>
33:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;install&quot;</span>, <span class="ruby-value str">&quot;xhpricotx&quot;</span>, <span class="ruby-value str">&quot;--version&quot;</span>, <span class="ruby-value str">'&quot;= 0.6&quot;'</span>], <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">install_command</span>
34:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006437" class="method">
  <div id="M006437_title" class="title">
    <b>test_gem_with_version_unpack_install_command</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006437_source')" id="l_M006437_source">show source</a> ]</p>
  <div id="M006437_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 40</span>
40:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_with_version_unpack_install_command</span>
41:     <span class="ruby-comment cmt"># stub out specification method, or else test will fail if hpricot 0.6 isn't installed</span>
42:     <span class="ruby-identifier">mock_spec</span> = <span class="ruby-identifier">mock</span>()
43:     <span class="ruby-identifier">mock_spec</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:version</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value str">'0.6'</span>)
44:     <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:specification</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-identifier">mock_spec</span>)
45:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;unpack&quot;</span>, <span class="ruby-value str">&quot;xhpricotx&quot;</span>, <span class="ruby-value str">&quot;--version&quot;</span>, <span class="ruby-value str">'= 0.6'</span>], <span class="ruby-ivar">@gem_with_version</span>.<span class="ruby-identifier">unpack_command</span>
46:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006442" class="method">
  <div id="M006442_title" class="title">
    <b>test_gem_without_lib_loading</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006442_source')" id="l_M006442_source">show source</a> ]</p>
  <div id="M006442_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/gem_dependency_test.rb, line 75</span>
75:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gem_without_lib_loading</span>
76:     <span class="ruby-ivar">@gem_without_load</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:gem</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem_without_load</span>)
77:     <span class="ruby-ivar">@gem_without_load</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:require</span>).<span class="ruby-identifier">with</span>(<span class="ruby-ivar">@gem_without_load</span>.<span class="ruby-identifier">lib</span>).<span class="ruby-identifier">never</span>
78:     <span class="ruby-ivar">@gem_without_load</span>.<span class="ruby-identifier">add_load_paths</span>
79:     <span class="ruby-ivar">@gem_without_load</span>.<span class="ruby-identifier">load</span>
80:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>