  <div id="C00000900">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />HasAndBelongsToManyAssociationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/associations/has_and_belongs_to_many_associations_test_rb.html');">activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M006245&name=test_adding_a_collection" >test_adding_a_collection</a></li>
  <li><a href="index.html?a=M006242&name=test_adding_from_the_project" >test_adding_from_the_project</a></li>
  <li><a href="index.html?a=M006243&name=test_adding_from_the_project_fixed_timestamp" >test_adding_from_the_project_fixed_timestamp</a></li>
  <li><a href="index.html?a=M006244&name=test_adding_multiple" >test_adding_multiple</a></li>
  <li><a href="index.html?a=M006240&name=test_adding_single" >test_adding_single</a></li>
  <li><a href="index.html?a=M006241&name=test_adding_type_mismatch" >test_adding_type_mismatch</a></li>
  <li><a href="index.html?a=M006246&name=test_adding_uses_default_values_on_join_table" >test_adding_uses_default_values_on_join_table</a></li>
  <li><a href="index.html?a=M006265&name=test_additional_columns_from_join_table" >test_additional_columns_from_join_table</a></li>
  <li><a href="index.html?a=M006306&name=test_assign_ids" >test_assign_ids</a></li>
  <li><a href="index.html?a=M006307&name=test_assign_ids_ignoring_blanks" >test_assign_ids_ignoring_blanks</a></li>
  <li><a href="index.html?a=M006317&name=test_association_proxy_transaction_method_starts_transaction_in_association_class" >test_association_proxy_transaction_method_starts_transaction_in_association_class</a></li>
  <li><a href="index.html?a=M006270&name=test_associations_with_conditions" >test_associations_with_conditions</a></li>
  <li><a href="index.html?a=M006251&name=test_build" >test_build</a></li>
  <li><a href="index.html?a=M006252&name=test_build_by_new_record" >test_build_by_new_record</a></li>
  <li><a href="index.html?a=M006318&name=test_caching_of_columns" >test_caching_of_columns</a></li>
  <li><a href="index.html?a=M006291&name=test_consider_type" >test_consider_type</a></li>
  <li><a href="index.html?a=M006315&name=test_count" >test_count</a></li>
  <li><a href="index.html?a=M006316&name=test_count_with_counter_sql" >test_count_with_counter_sql</a></li>
  <li><a href="index.html?a=M006314&name=test_counting_on_habtm_association_and_not_array" >test_counting_on_habtm_association_and_not_array</a></li>
  <li><a href="index.html?a=M006253&name=test_create" >test_create</a></li>
  <li><a href="index.html?a=M006254&name=test_create_by_new_record" >test_create_by_new_record</a></li>
  <li><a href="index.html?a=M006255&name=test_creation_respects_hash_condition" >test_creation_respects_hash_condition</a></li>
  <li><a href="index.html?a=M006259&name=test_deleting" >test_deleting</a></li>
  <li><a href="index.html?a=M006263&name=test_deleting_all" >test_deleting_all</a></li>
  <li><a href="index.html?a=M006260&name=test_deleting_array" >test_deleting_array</a></li>
  <li><a href="index.html?a=M006262&name=test_deleting_array_with_sql" >test_deleting_array_with_sql</a></li>
  <li><a href="index.html?a=M006261&name=test_deleting_with_sql" >test_deleting_with_sql</a></li>
  <li><a href="index.html?a=M006269&name=test_deprecated_push_with_attributes_was_removed" >test_deprecated_push_with_attributes_was_removed</a></li>
  <li><a href="index.html?a=M006268&name=test_destroy_all" >test_destroy_all</a></li>
  <li><a href="index.html?a=M006266&name=test_destroying" >test_destroying</a></li>
  <li><a href="index.html?a=M006267&name=test_destroying_array" >test_destroying_array</a></li>
  <li><a href="index.html?a=M006284&name=test_dynamic_find_all_order_should_override_association_limit" >test_dynamic_find_all_order_should_override_association_limit</a></li>
  <li><a href="index.html?a=M006282&name=test_dynamic_find_all_order_should_override_association_order" >test_dynamic_find_all_order_should_override_association_order</a></li>
  <li><a href="index.html?a=M006283&name=test_dynamic_find_all_should_respect_association_limit" >test_dynamic_find_all_should_respect_association_limit</a></li>
  <li><a href="index.html?a=M006281&name=test_dynamic_find_all_should_respect_association_order" >test_dynamic_find_all_should_respect_association_order</a></li>
  <li><a href="index.html?a=M006285&name=test_dynamic_find_all_should_respect_readonly_access" >test_dynamic_find_all_should_respect_readonly_access</a></li>
  <li><a href="index.html?a=M006280&name=test_dynamic_find_order_should_override_association_order" >test_dynamic_find_order_should_override_association_order</a></li>
  <li><a href="index.html?a=M006313&name=test_dynamic_find_should_respect_association_include" >test_dynamic_find_should_respect_association_include</a></li>
  <li><a href="index.html?a=M006279&name=test_dynamic_find_should_respect_association_order" >test_dynamic_find_should_respect_association_order</a></li>
  <li><a href="index.html?a=M006300&name=test_find_grouped" >test_find_grouped</a></li>
  <li><a href="index.html?a=M006271&name=test_find_in_association" >test_find_in_association</a></li>
  <li><a href="index.html?a=M006275&name=test_find_in_association_with_custom_finder_sql" >test_find_in_association_with_custom_finder_sql</a></li>
  <li><a href="index.html?a=M006276&name=test_find_in_association_with_custom_finder_sql_and_multiple_interpolations" >test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</a></li>
  <li><a href="index.html?a=M006277&name=test_find_in_association_with_custom_finder_sql_and_string_id" >test_find_in_association_with_custom_finder_sql_and_string_id</a></li>
  <li><a href="index.html?a=M006287&name=test_find_in_association_with_options" >test_find_in_association_with_options</a></li>
  <li><a href="index.html?a=M006301&name=test_find_scoped_grouped" >test_find_scoped_grouped</a></li>
  <li><a href="index.html?a=M006302&name=test_find_scoped_grouped_having" >test_find_scoped_grouped_having</a></li>
  <li><a href="index.html?a=M006278&name=test_find_with_merged_options" >test_find_with_merged_options</a></li>
  <li><a href="index.html?a=M006303&name=test_get_ids" >test_get_ids</a></li>
  <li><a href="index.html?a=M006304&name=test_get_ids_for_loaded_associations" >test_get_ids_for_loaded_associations</a></li>
  <li><a href="index.html?a=M006305&name=test_get_ids_for_unloaded_associations_does_not_load_them" >test_get_ids_for_unloaded_associations_does_not_load_them</a></li>
  <li><a href="index.html?a=M006248&name=test_habtm_adding_before_save" >test_habtm_adding_before_save</a></li>
  <li><a href="index.html?a=M006247&name=test_habtm_attribute_access_and_respond_to" >test_habtm_attribute_access_and_respond_to</a></li>
  <li><a href="index.html?a=M006294&name=test_habtm_respects_select" >test_habtm_respects_select</a></li>
  <li><a href="index.html?a=M006249&name=test_habtm_saving_multiple_relationships" >test_habtm_saving_multiple_relationships</a></li>
  <li><a href="index.html?a=M006250&name=test_habtm_unique_order_preserved" >test_habtm_unique_order_preserved</a></li>
  <li><a href="index.html?a=M006238&name=test_has_and_belongs_to_many" >test_has_and_belongs_to_many</a></li>
  <li><a href="index.html?a=M006310&name=test_has_many_through_polymorphic_has_manys_works" >test_has_many_through_polymorphic_has_manys_works</a></li>
  <li><a href="index.html?a=M006273&name=test_include_checks_if_record_exists_if_target_not_loaded" >test_include_checks_if_record_exists_if_target_not_loaded</a></li>
  <li><a href="index.html?a=M006274&name=test_include_returns_false_for_non_matching_record_to_verify_scoping" >test_include_returns_false_for_non_matching_record_to_verify_scoping</a></li>
  <li><a href="index.html?a=M006272&name=test_include_uses_array_include_after_loaded" >test_include_uses_array_include_after_loaded</a></li>
  <li><a href="index.html?a=M006298&name=test_join_table_alias" >test_join_table_alias</a></li>
  <li><a href="index.html?a=M006299&name=test_join_with_group" >test_join_with_group</a></li>
  <li><a href="index.html?a=M006286&name=test_new_with_values_in_collection" >test_new_with_values_in_collection</a></li>
  <li><a href="index.html?a=M006264&name=test_removing_associations_on_destroy" >test_removing_associations_on_destroy</a></li>
  <li><a href="index.html?a=M006290&name=test_replace_on_new_object" >test_replace_on_new_object</a></li>
  <li><a href="index.html?a=M006288&name=test_replace_with_less" >test_replace_with_less</a></li>
  <li><a href="index.html?a=M006289&name=test_replace_with_new" >test_replace_with_new</a></li>
  <li><a href="index.html?a=M006309&name=test_scoped_find_on_through_association_doesnt_return_read_only_records" >test_scoped_find_on_through_association_doesnt_return_read_only_records</a></li>
  <li><a href="index.html?a=M006308&name=test_select_limited_ids_list" >test_select_limited_ids_list</a></li>
  <li><a href="index.html?a=M006312&name=test_self_referential_habtm_without_foreign_key_set_should_raise_exception" >test_self_referential_habtm_without_foreign_key_set_should_raise_exception</a></li>
  <li><a href="index.html?a=M006311&name=test_symbols_as_keys" >test_symbols_as_keys</a></li>
  <li><a href="index.html?a=M006239&name=test_triple_equality" >test_triple_equality</a></li>
  <li><a href="index.html?a=M006256&name=test_uniq_after_the_fact" >test_uniq_after_the_fact</a></li>
  <li><a href="index.html?a=M006257&name=test_uniq_before_the_fact" >test_uniq_before_the_fact</a></li>
  <li><a href="index.html?a=M006258&name=test_uniq_option_prevents_duplicate_push" >test_uniq_option_prevents_duplicate_push</a></li>
  <li><a href="index.html?a=M006292&name=test_update_attributes_after_push_without_duplicate_join_table_rows" >test_update_attributes_after_push_without_duplicate_join_table_rows</a></li>
  <li><a href="index.html?a=M006293&name=test_updating_attributes_on_non_rich_associations" >test_updating_attributes_on_non_rich_associations</a></li>
  <li><a href="index.html?a=M006295&name=test_updating_attributes_on_rich_associations" >test_updating_attributes_on_rich_associations</a></li>
  <li><a href="index.html?a=M006297&name=test_updating_attributes_on_rich_associations_with_limited_find" >test_updating_attributes_on_rich_associations_with_limited_find</a></li>
  <li><a href="index.html?a=M006296&name=test_updating_attributes_on_rich_associations_with_limited_find_from_reflection" >test_updating_attributes_on_rich_associations_with_limited_find_from_reflection</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M006245" class="method">
  <div id="M006245_title" class="title">
    <b>test_adding_a_collection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006245_source')" id="l_M006245_source">show source</a> ]</p>
  <div id="M006245_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_a_collection</span>
162:     <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Aredridel&quot;</span>)
163:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
164:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
165:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)])
166:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
167:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006242" class="method">
  <div id="M006242_title" class="title">
    <b>test_adding_from_the_project</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006242_source')" id="l_M006242_source">show source</a> ]</p>
  <div id="M006242_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_from_the_project</span>
123:     <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
124:     <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
125:     <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
126:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
127:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
128: 
129:     <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>
130: 
131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
133:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006243" class="method">
  <div id="M006243_title" class="title">
    <b>test_adding_from_the_project_fixed_timestamp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006243_source')" id="l_M006243_source">show source</a> ]</p>
  <div id="M006243_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_from_the_project_fixed_timestamp</span>
137:     <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
138:     <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
139:     <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
140:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
142:     <span class="ruby-identifier">updated_at</span> = <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>
143: 
144:     <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>
145: 
146:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">updated_at</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">updated_at</span>
147:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
149:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
150:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006244" class="method">
  <div id="M006244_title" class="title">
    <b>test_adding_multiple</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006244_source')" id="l_M006244_source">show source</a> ]</p>
  <div id="M006244_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 152</span>
152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_multiple</span>
153:     <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Aredridel&quot;</span>)
154:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
155:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
156:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">push</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>))
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
158:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
159:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006240" class="method">
  <div id="M006240_title" class="title">
    <b>test_adding_single</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006240_source')" id="l_M006240_source">show source</a> ]</p>
  <div id="M006240_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_single</span>
103:     <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
104:     <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment cmt"># causing the collection to load</span>
105:     <span class="ruby-identifier">action_controller</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
107:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
108: 
109:     <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">action_controller</span>
110: 
111:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
112:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
113:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">action_controller</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006241" class="method">
  <div id="M006241_title" class="title">
    <b>test_adding_type_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006241_source')" id="l_M006241_source">show source</a> ]</p>
  <div id="M006241_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_type_mismatch</span>
117:     <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
118:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword kw">nil</span> }
119:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value">1</span> }
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006246" class="method">
  <div id="M006246_title" class="title">
    <b>test_adding_uses_default_values_on_join_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006246_source')" id="l_M006246_source">show source</a> ]</p>
  <div id="M006246_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_uses_default_values_on_join_table</span>
171:     <span class="ruby-identifier">ac</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>)
172:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">ac</span>)
173:     <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>).<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ac</span>
174: 
175:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">ac</span>)
176:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">ac</span> }
177:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">access_level</span>.<span class="ruby-identifier">to_i</span>
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006265" class="method">
  <div id="M006265_title" class="title">
    <b>test_additional_columns_from_join_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006265_source')" id="l_M006265_source">show source</a> ]</p>
  <div id="M006265_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 380</span>
380:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_additional_columns_from_join_table</span>
381:     <span class="ruby-identifier">assert_date_from_db</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2004</span>, <span class="ruby-value">10</span>, <span class="ruby-value">10</span>), <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">joined_on</span>.<span class="ruby-identifier">to_date</span>
382:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006306" class="method">
  <div id="M006306_title" class="title">
    <b>test_assign_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006306_source')" id="l_M006306_source">show source</a> ]</p>
  <div id="M006306_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 715</span>
715:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assign_ids</span>
716:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Joe&quot;</span>)
717:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>, <span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
718:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
719:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
720:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
721:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>)].<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
722:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006307" class="method">
  <div id="M006307_title" class="title">
    <b>test_assign_ids_ignoring_blanks</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006307_source')" id="l_M006307_source">show source</a> ]</p>
  <div id="M006307_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 724</span>
724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_assign_ids_ignoring_blanks</span>
725:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Joe&quot;</span>)
726:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">id</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">id</span>, <span class="ruby-value str">''</span>]
727:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
728:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
729:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
730:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>)].<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
731:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006317" class="method">
  <div id="M006317_title" class="title">
    <b>test_association_proxy_transaction_method_starts_transaction_in_association_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006317_source')" id="l_M006317_source">show source</a> ]</p>
  <div id="M006317_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 806</span>
806:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_association_proxy_transaction_method_starts_transaction_in_association_class</span>
807:     <span class="ruby-constant">Post</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:transaction</span>)
808:     <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword kw">do</span>
809:       <span class="ruby-comment cmt"># nothing</span>
810:     <span class="ruby-keyword kw">end</span>
811:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006270" class="method">
  <div id="M006270_title" class="title">
    <b>test_associations_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006270_source')" id="l_M006270_source">show source</a> ]</p>
  <div id="M006270_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 427</span>
427:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_associations_with_conditions</span>
428:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
429:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">size</span>
430:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">size</span>
431: 
432:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>)
433:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_named_david_with_hash_conditions</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>)
434:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">salaried_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>)
435: 
436:     <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_named_david</span>.<span class="ruby-identifier">clear</span>
437:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
438:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006251" class="method">
  <div id="M006251_title" class="title">
    <b>test_build</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006251_source')" id="l_M006251_source">show source</a> ]</p>
  <div id="M006251_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 232</span>
232:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build</span>
233:     <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
234:     <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Projekt&quot;</span>) }
235:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
236: 
237:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
238:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
239: 
240:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj</span>.<span class="ruby-identifier">new_record?</span>
241:     <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
242:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">new_record?</span>
243:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
244:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment cmt"># prove join table is updated</span>
245:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006252" class="method">
  <div id="M006252_title" class="title">
    <b>test_build_by_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006252_source')" id="l_M006252_source">show source</a> ]</p>
  <div id="M006252_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 247</span>
247:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_build_by_new_record</span>
248:     <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Marcel&quot;</span>, <span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">75000</span>)
249:     <span class="ruby-identifier">proj1</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Make bed&quot;</span>)
250:     <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Lie in it&quot;</span>)
251:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
252:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">new_record?</span>
253:     <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
254:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">new_record?</span>
255:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">new_record?</span>
256:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
257:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment cmt"># prove join table is updated</span>
258:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006318" class="method">
  <div id="M006318_title" class="title">
    <b>test_caching_of_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006318_source')" id="l_M006318_source">show source</a> ]</p>
  <div id="M006318_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 813</span>
813:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_caching_of_columns</span>
814:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
815:     <span class="ruby-comment cmt"># clear cache possibly created by other tests</span>
816:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>
817:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">0</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span>; <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
818:     <span class="ruby-comment cmt"># and again to verify that reset_column_information clears the cache correctly</span>
819:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reset_column_information</span>
820:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">0</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span>; <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">columns</span> }
821:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006291" class="method">
  <div id="M006291_title" class="title">
    <b>test_consider_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006291_source')" id="l_M006291_source">show source</a> ]</p>
  <div id="M006291_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 604</span>
604:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_consider_type</span>
605:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
606:     <span class="ruby-identifier">special_project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Special Project&quot;</span>)
607: 
608:     <span class="ruby-identifier">other_project</span> = <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">first</span>
609:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">special_project</span>
610:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
611: 
612:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
613:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">special_project</span>)
614:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">special_projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">other_project</span>)
615:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006315" class="method">
  <div id="M006315_title" class="title">
    <b>test_count</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006315_source')" id="l_M006315_source">show source</a> ]</p>
  <div id="M006315_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 793</span>
793:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count</span>
794:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
795:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
796:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006316" class="method">
  <div id="M006316_title" class="title">
    <b>test_count_with_counter_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006316_source')" id="l_M006316_source">show source</a> ]</p>
  <div id="M006316_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 798</span>
798:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_with_counter_sql</span>
799:     <span class="ruby-identifier">developer</span>  = <span class="ruby-constant">DeveloperWithCounterSQL</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'tekin'</span>)
800:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">id</span>]
801:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
802:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">reload</span>
803:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>
804:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006314" class="method">
  <div id="M006314_title" class="title">
    <b>test_counting_on_habtm_association_and_not_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006314_source')" id="l_M006314_source">show source</a> ]</p>
  <div id="M006314_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 786</span>
786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_counting_on_habtm_association_and_not_array</span>
787:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
788:     <span class="ruby-comment cmt"># Extra parameter just to make sure we aren't falling back to</span>
789:     <span class="ruby-comment cmt"># Array#count in Ruby &gt;=1.8.7, which would raise an ArgumentError</span>
790:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1=1'</span>) }
791:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006253" class="method">
  <div id="M006253_title" class="title">
    <b>test_create</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006253_source')" id="l_M006253_source">show source</a> ]</p>
  <div id="M006253_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 260</span>
260:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create</span>
261:     <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
262:     <span class="ruby-identifier">proj</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Projekt&quot;</span>)
263:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
264: 
265:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>
266:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
267: 
268:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj</span>.<span class="ruby-identifier">new_record?</span>
269:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj</span>  <span class="ruby-comment cmt"># prove join table is updated</span>
270:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006254" class="method">
  <div id="M006254_title" class="title">
    <b>test_create_by_new_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006254_source')" id="l_M006254_source">show source</a> ]</p>
  <div id="M006254_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 272</span>
272:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_by_new_record</span>
273:     <span class="ruby-identifier">devel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Marcel&quot;</span>, <span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">75000</span>)
274:     <span class="ruby-identifier">proj1</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Make bed&quot;</span>)
275:     <span class="ruby-identifier">proj2</span> = <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Lie in it&quot;</span>)
276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
277:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">new_record?</span>
278:     <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">save</span>
279:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">devel</span>.<span class="ruby-identifier">new_record?</span>
280:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">proj2</span>.<span class="ruby-identifier">new_record?</span>
281:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">devel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>
282:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;Marcel&quot;</span>).<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">proj2</span>  <span class="ruby-comment cmt"># prove join table is updated</span>
283:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006255" class="method">
  <div id="M006255_title" class="title">
    <b>test_creation_respects_hash_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006255_source')" id="l_M006255_source">show source</a> ]</p>
  <div id="M006255_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_creation_respects_hash_condition</span>
286:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">build</span>(<span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>)
287: 
288:     <span class="ruby-identifier">assert</span>        <span class="ruby-identifier">post</span>.<span class="ruby-identifier">save</span>
289:     <span class="ruby-identifier">assert_equal</span>  <span class="ruby-value str">'Yet Another Testing Title'</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
290: 
291:     <span class="ruby-identifier">another_post</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">post_with_conditions</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>)
292: 
293:     <span class="ruby-identifier">assert</span>        <span class="ruby-operator">!</span><span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">new_record?</span>
294:     <span class="ruby-identifier">assert_equal</span>  <span class="ruby-value str">'Yet Another Testing Title'</span>, <span class="ruby-identifier">another_post</span>.<span class="ruby-identifier">title</span>
295:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006259" class="method">
  <div id="M006259_title" class="title">
    <b>test_deleting</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006259_source')" id="l_M006259_source">show source</a> ]</p>
  <div id="M006259_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 323</span>
323:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting</span>
324:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
325:     <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
326:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
328:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
329: 
330:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">active_record</span>)
331: 
332:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
333:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
334:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
335:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006263" class="method">
  <div id="M006263_title" class="title">
    <b>test_deleting_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006263_source')" id="l_M006263_source">show source</a> ]</p>
  <div id="M006263_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 364</span>
364:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting_all</span>
365:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
366:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
367:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">clear</span>
368:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
369:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
370:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006260" class="method">
  <div id="M006260_title" class="title">
    <b>test_deleting_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006260_source')" id="l_M006260_source">show source</a> ]</p>
  <div id="M006260_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 337</span>
337:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting_array</span>
338:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
339:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
340:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>))
341:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
342:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
343:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006262" class="method">
  <div id="M006262_title" class="title">
    <b>test_deleting_array_with_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006262_source')" id="l_M006262_source">show source</a> ]</p>
  <div id="M006262_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 355</span>
355:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting_array_with_sql</span>
356:     <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
357:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
358:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">size</span>
359: 
360:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>))
361:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
362:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006261" class="method">
  <div id="M006261_title" class="title">
    <b>test_deleting_with_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006261_source')" id="l_M006261_source">show source</a> ]</p>
  <div id="M006261_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 345</span>
345:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting_with_sql</span>
346:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
347:     <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
348:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
349:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">size</span>
350: 
351:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">david</span>)
352:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_by_sql</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
353:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006269" class="method">
  <div id="M006269_title" class="title">
    <b>test_deprecated_push_with_attributes_was_removed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006269_source')" id="l_M006269_source">show source</a> ]</p>
  <div id="M006269_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 420</span>
420:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deprecated_push_with_attributes_was_removed</span>
421:     <span class="ruby-identifier">jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
422:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) <span class="ruby-keyword kw">do</span>
423:       <span class="ruby-identifier">jamis</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">push_with_attributes</span>(<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>), <span class="ruby-identifier">:joined_on</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">today</span>)
424:     <span class="ruby-keyword kw">end</span>
425:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006268" class="method">
  <div id="M006268_title" class="title">
    <b>test_destroy_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006268_source')" id="l_M006268_source">show source</a> ]</p>
  <div id="M006268_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 411</span>
411:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroy_all</span>
412:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
413:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
414:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
415:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy_all</span>
416:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
417:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">empty?</span>
418:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006266" class="method">
  <div id="M006266_title" class="title">
    <b>test_destroying</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006266_source')" id="l_M006266_source">show source</a> ]</p>
  <div id="M006266_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 384</span>
384:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroying</span>
385:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
386:     <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
387:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
388:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
389:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
390: 
391:     <span class="ruby-identifier">assert_difference</span> <span class="ruby-value str">&quot;Project.count&quot;</span>, <span class="ruby-value">-1</span> <span class="ruby-keyword kw">do</span>
392:       <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-identifier">active_record</span>)
393:     <span class="ruby-keyword kw">end</span>
394: 
395:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
396:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
397:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006267" class="method">
  <div id="M006267_title" class="title">
    <b>test_destroying_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006267_source')" id="l_M006267_source">show source</a> ]</p>
  <div id="M006267_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 399</span>
399:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_destroying_array</span>
400:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
401:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">reload</span>
402: 
403:     <span class="ruby-identifier">assert_difference</span> <span class="ruby-value str">&quot;Project.count&quot;</span>, <span class="ruby-operator">-</span><span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span> <span class="ruby-keyword kw">do</span>
404:       <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">destroy</span>(<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>))
405:     <span class="ruby-keyword kw">end</span>
406: 
407:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
408:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
409:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006284" class="method">
  <div id="M006284_title" class="title">
    <b>test_dynamic_find_all_order_should_override_association_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006284_source')" id="l_M006284_source">show source</a> ]</p>
  <div id="M006284_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 552</span>
552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_all_order_should_override_association_limit</span>
553:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9_000</span>).<span class="ruby-identifier">length</span>
554:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'Jamis'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9_000</span>).<span class="ruby-identifier">length</span>
555:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006282" class="method">
  <div id="M006282_title" class="title">
    <b>test_dynamic_find_all_order_should_override_association_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006282_source')" id="l_M006282_source">show source</a> ]</p>
  <div id="M006282_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 537</span>
537:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_all_order_should_override_association_order</span>
538:     <span class="ruby-comment cmt"># Developers are ordered 'name DESC, id DESC'</span>
539:     <span class="ruby-identifier">low_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
540:     <span class="ruby-identifier">middle_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>)
541:     <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Jamis'</span>)
542: 
543:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">low_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">high_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
544:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">low_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">high_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'Jamis'</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
545:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006283" class="method">
  <div id="M006283_title" class="title">
    <b>test_dynamic_find_all_should_respect_association_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006283_source')" id="l_M006283_source">show source</a> ]</p>
  <div id="M006283_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 547</span>
547:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_all_should_respect_association_limit</span>
548:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>).<span class="ruby-identifier">length</span>
549:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'Jamis'</span>).<span class="ruby-identifier">length</span>
550:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006281" class="method">
  <div id="M006281_title" class="title">
    <b>test_dynamic_find_all_should_respect_association_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006281_source')" id="l_M006281_source">show source</a> ]</p>
  <div id="M006281_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 527</span>
527:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_all_should_respect_association_order</span>
528:     <span class="ruby-comment cmt"># Developers are ordered 'name DESC, id DESC'</span>
529:     <span class="ruby-identifier">low_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
530:     <span class="ruby-identifier">middle_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>)
531:     <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Jamis'</span>)
532: 
533:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">low_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>)
534:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">middle_id_jamis</span>, <span class="ruby-identifier">low_id_jamis</span>], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'Jamis'</span>)
535:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006285" class="method">
  <div id="M006285_title" class="title">
    <b>test_dynamic_find_all_should_respect_readonly_access</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006285_source')" id="l_M006285_source">show source</a> ]</p>
  <div id="M006285_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 557</span>
557:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_all_should_respect_readonly_access</span>
558:     <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ReadOnlyRecord</span>) { <span class="ruby-identifier">d</span>.<span class="ruby-identifier">save!</span>  } <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">valid?</span>}
559:     <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">readonly_developers</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">readonly?</span> }
560:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006280" class="method">
  <div id="M006280_title" class="title">
    <b>test_dynamic_find_order_should_override_association_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006280_source')" id="l_M006280_source">show source</a> ]</p>
  <div id="M006280_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 517</span>
517:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_order_should_override_association_order</span>
518:     <span class="ruby-comment cmt"># Developers are ordered 'name DESC, id DESC'</span>
519:     <span class="ruby-identifier">low_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
520:     <span class="ruby-identifier">middle_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>)
521:     <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Jamis'</span>)
522: 
523:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">low_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
524:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">low_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">'Jamis'</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
525:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006313" class="method">
  <div id="M006313_title" class="title">
    <b>test_dynamic_find_should_respect_association_include</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006313_source')" id="l_M006313_source">show source</a> ]</p>
  <div id="M006313_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 780</span>
780:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_should_respect_association_include</span>
781:     <span class="ruby-comment cmt"># SQL error in sort clause if :include is not included</span>
782:     <span class="ruby-comment cmt"># due to Unknown column 'authors.id'</span>
783:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">posts_with_authors_sorted_by_author_id</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">'Welcome to the weblog'</span>)
784:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006279" class="method">
  <div id="M006279_title" class="title">
    <b>test_dynamic_find_should_respect_association_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006279_source')" id="l_M006279_source">show source</a> ]</p>
  <div id="M006279_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_should_respect_association_order</span>
508:     <span class="ruby-comment cmt"># Developers are ordered 'name DESC, id DESC'</span>
509:     <span class="ruby-identifier">low_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
510:     <span class="ruby-identifier">middle_id_jamis</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>)
511:     <span class="ruby-identifier">high_id_jamis</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Jamis'</span>)
512: 
513:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;name = 'Jamis'&quot;</span>)
514:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">high_id_jamis</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">'Jamis'</span>)
515:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006300" class="method">
  <div id="M006300_title" class="title">
    <b>test_find_grouped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006300_source')" id="l_M006300_source">show source</a> ]</p>
  <div id="M006300_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 677</span>
677:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_grouped</span>
678:     <span class="ruby-identifier">all_posts_from_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;category_id = 1&quot;</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:categories</span>)
679:     <span class="ruby-identifier">grouped_posts_of_category1</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;category_id = 1&quot;</span>, <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;author_id&quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'count(posts.id) as posts_count'</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:categories</span>)
680:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">all_posts_from_category1</span>.<span class="ruby-identifier">size</span>
681:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">grouped_posts_of_category1</span>.<span class="ruby-identifier">size</span>
682:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006271" class="method">
  <div id="M006271_title" class="title">
    <b>test_find_in_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006271_source')" id="l_M006271_source">show source</a> ]</p>
  <div id="M006271_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 440</span>
440:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_in_association</span>
441:     <span class="ruby-comment cmt"># Using sql</span>
442:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-value str">&quot;SQL find&quot;</span>
443: 
444:     <span class="ruby-comment cmt"># Using ruby</span>
445:     <span class="ruby-identifier">active_record</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
446:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">reload</span>
447:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-value str">&quot;Ruby find&quot;</span>
448:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006275" class="method">
  <div id="M006275_title" class="title">
    <b>test_find_in_association_with_custom_finder_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006275_source')" id="l_M006275_source">show source</a> ]</p>
  <div id="M006275_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 482</span>
482:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_in_association_with_custom_finder_sql</span>
483:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-value str">&quot;SQL find&quot;</span>
484: 
485:     <span class="ruby-identifier">active_record</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
486:     <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">reload</span>
487:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>), <span class="ruby-value str">&quot;Ruby find&quot;</span>
488:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006276" class="method">
  <div id="M006276_title" class="title">
    <b>test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006276_source')" id="l_M006276_source">show source</a> ]</p>
  <div id="M006276_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 490</span>
490:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_in_association_with_custom_finder_sql_and_multiple_interpolations</span>
491:     <span class="ruby-comment cmt"># interpolate once:</span>
492:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>), <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>)], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>, <span class="ruby-value str">&quot;first interpolation&quot;</span>
493:     <span class="ruby-comment cmt"># interpolate again, for a different project id</span>
494:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)], <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">developers_with_finder_sql</span>, <span class="ruby-value str">&quot;second interpolation&quot;</span>
495:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006277" class="method">
  <div id="M006277_title" class="title">
    <b>test_find_in_association_with_custom_finder_sql_and_string_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006277_source')" id="l_M006277_source">show source</a> ]</p>
  <div id="M006277_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 497</span>
497:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_in_association_with_custom_finder_sql_and_string_id</span>
498:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers_with_finder_sql</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>.<span class="ruby-identifier">to_s</span>), <span class="ruby-value str">&quot;SQL find&quot;</span>
499:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006287" class="method">
  <div id="M006287_title" class="title">
    <b>test_find_in_association_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006287_source')" id="l_M006287_source">show source</a> ]</p>
  <div id="M006287_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 574</span>
574:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_in_association_with_options</span>
575:     <span class="ruby-identifier">developers</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
576:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
577: 
578:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary &lt; 10000&quot;</span>)
579:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>),      <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary DESC&quot;</span>)
580:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006301" class="method">
  <div id="M006301_title" class="title">
    <b>test_find_scoped_grouped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006301_source')" id="l_M006301_source">show source</a> ]</p>
  <div id="M006301_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 684</span>
684:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_scoped_grouped</span>
685:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">posts_gruoped_by_title</span>.<span class="ruby-identifier">size</span>
686:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>).<span class="ruby-identifier">posts_gruoped_by_title</span>.<span class="ruby-identifier">size</span>
687:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006302" class="method">
  <div id="M006302_title" class="title">
    <b>test_find_scoped_grouped_having</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006302_source')" id="l_M006302_source">show source</a> ]</p>
  <div id="M006302_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 689</span>
689:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_scoped_grouped_having</span>
690:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">size</span>
691:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">well_payed_salary_groups</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">g</span><span class="ruby-operator">|</span> <span class="ruby-identifier">g</span>.<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">10000</span> }
692:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006278" class="method">
  <div id="M006278_title" class="title">
    <b>test_find_with_merged_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006278_source')" id="l_M006278_source">show source</a> ]</p>
  <div id="M006278_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 501</span>
501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_merged_options</span>
502:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">size</span>
503:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>).<span class="ruby-identifier">size</span>
504:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">limited_developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>).<span class="ruby-identifier">size</span>
505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006303" class="method">
  <div id="M006303_title" class="title">
    <b>test_get_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006303_source')" id="l_M006303_source">show source</a> ]</p>
  <div id="M006303_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 694</span>
694:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_ids</span>
695:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>, <span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
696:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">id</span>], <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>).<span class="ruby-identifier">project_ids</span>
697:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006304" class="method">
  <div id="M006304_title" class="title">
    <b>test_get_ids_for_loaded_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006304_source')" id="l_M006304_source">show source</a> ]</p>
  <div id="M006304_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 699</span>
699:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_ids_for_loaded_associations</span>
700:     <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
701:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>)
702:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">0</span>) <span class="ruby-keyword kw">do</span>
703:       <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
704:       <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>
705:     <span class="ruby-keyword kw">end</span>
706:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006305" class="method">
  <div id="M006305_title" class="title">
    <b>test_get_ids_for_unloaded_associations_does_not_load_them</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006305_source')" id="l_M006305_source">show source</a> ]</p>
  <div id="M006305_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 708</span>
708:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_ids_for_unloaded_associations_does_not_load_them</span>
709:     <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
710:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
711:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>, <span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">project_ids</span>.<span class="ruby-identifier">sort</span>
712:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">loaded?</span>
713:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006248" class="method">
  <div id="M006248_title" class="title">
    <b>test_habtm_adding_before_save</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006248_source')" id="l_M006248_source">show source</a> ]</p>
  <div id="M006248_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 198</span>
198:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_habtm_adding_before_save</span>
199:     <span class="ruby-identifier">no_of_devels</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
200:     <span class="ruby-identifier">no_of_projects</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
201:     <span class="ruby-identifier">aredridel</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Aredridel&quot;</span>)
202:     <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">concat</span>([<span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>), <span class="ruby-identifier">p</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Projekt&quot;</span>)])
203:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">new_record?</span>
204:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">new_record?</span>
205:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">save</span>
206:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">new_record?</span>
207:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_devels</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">count</span>
208:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">no_of_projects</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-constant">Project</span>.<span class="ruby-identifier">count</span>
209:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
210:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">aredridel</span>.<span class="ruby-identifier">projects</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>
211:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006247" class="method">
  <div id="M006247_title" class="title">
    <b>test_habtm_attribute_access_and_respond_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006247_source')" id="l_M006247_source">show source</a> ]</p>
  <div id="M006247_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_habtm_attribute_access_and_respond_to</span>
181:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>).<span class="ruby-identifier">projects</span>[<span class="ruby-value">0</span>]
182:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">has_attribute?</span>(<span class="ruby-value str">&quot;name&quot;</span>)
183:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">has_attribute?</span>(<span class="ruby-value str">&quot;joined_on&quot;</span>)
184:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">has_attribute?</span>(<span class="ruby-value str">&quot;access_level&quot;</span>)
185:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;name&quot;</span>)
186:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;name=&quot;</span>)
187:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;name?&quot;</span>)
188:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;joined_on&quot;</span>)
189:     <span class="ruby-comment cmt"># given that the 'join attribute' won't be persisted, I don't</span>
190:     <span class="ruby-comment cmt"># think we should define the mutators</span>
191:     <span class="ruby-comment cmt">#assert project.respond_to?(&quot;joined_on=&quot;)</span>
192:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;joined_on?&quot;</span>)
193:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;access_level&quot;</span>)
194:     <span class="ruby-comment cmt">#assert project.respond_to?(&quot;access_level=&quot;)</span>
195:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;access_level?&quot;</span>)
196:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006294" class="method">
  <div id="M006294_title" class="title">
    <b>test_habtm_respects_select</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006294_source')" id="l_M006294_source">show source</a> ]</p>
  <div id="M006294_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 637</span>
637:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_habtm_respects_select</span>
638:     <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">o</span><span class="ruby-operator">|</span>
639:       <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">o</span>, <span class="ruby-identifier">:correctness_marker</span>
640:     <span class="ruby-keyword kw">end</span>
641:     <span class="ruby-identifier">assert_respond_to</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>).<span class="ruby-identifier">select_testing_posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">:correctness_marker</span>
642:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006249" class="method">
  <div id="M006249_title" class="title">
    <b>test_habtm_saving_multiple_relationships</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006249_source')" id="l_M006249_source">show source</a> ]</p>
  <div id="M006249_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 213</span>
213:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_habtm_saving_multiple_relationships</span>
214:     <span class="ruby-identifier">new_project</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Grimetime&quot;</span>)
215:     <span class="ruby-identifier">amount_of_developers</span> = <span class="ruby-value">4</span>
216:     <span class="ruby-identifier">developers</span> = (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">amount_of_developers</span>).<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;JME #{i}&quot;</span>) }.<span class="ruby-identifier">reverse</span>
217: 
218:     <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developer_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">id</span>]
219:     <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers_with_callback_ids</span> = [<span class="ruby-identifier">developers</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">id</span>, <span class="ruby-identifier">developers</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">id</span>]
220:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">save</span>
221: 
222:     <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">reload</span>
223:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">amount_of_developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
224:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>, <span class="ruby-identifier">new_project</span>.<span class="ruby-identifier">developers</span>
225:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006250" class="method">
  <div id="M006250_title" class="title">
    <b>test_habtm_unique_order_preserved</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006250_source')" id="l_M006250_source">show source</a> ]</p>
  <div id="M006250_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_habtm_unique_order_preserved</span>
228:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>, <span class="ruby-identifier">:jamis</span>, <span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">non_unique_developers</span>
229:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:poor_jamis</span>, <span class="ruby-identifier">:jamis</span>, <span class="ruby-identifier">:david</span>), <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span>
230:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006238" class="method">
  <div id="M006238_title" class="title">
    <b>test_has_and_belongs_to_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006238_source')" id="l_M006238_source">show source</a> ]</p>
  <div id="M006238_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 85</span>
85:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_and_belongs_to_many</span>
86:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
87: 
88:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
89:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
90: 
91:     <span class="ruby-identifier">active_record</span> = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
92:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">empty?</span>
93:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
94:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">active_record</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
95:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006310" class="method">
  <div id="M006310_title" class="title">
    <b>test_has_many_through_polymorphic_has_manys_works</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006310_source')" id="l_M006310_source">show source</a> ]</p>
  <div id="M006310_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 756</span>
756:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_polymorphic_has_manys_works</span>
757:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">10</span>, <span class="ruby-value">20</span>].<span class="ruby-identifier">to_set</span>, <span class="ruby-identifier">pirates</span>(<span class="ruby-identifier">:redbeard</span>).<span class="ruby-identifier">treasure_estimates</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:price</span>).<span class="ruby-identifier">to_set</span>
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006273" class="method">
  <div id="M006273_title" class="title">
    <b>test_include_checks_if_record_exists_if_target_not_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006273_source')" id="l_M006273_source">show source</a> ]</p>
  <div id="M006273_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 462</span>
462:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_checks_if_record_exists_if_target_not_loaded</span>
463:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
464:     <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>
465: 
466:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>
467:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
468:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
469:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
470:     <span class="ruby-keyword kw">end</span>
471:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
472:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006274" class="method">
  <div id="M006274_title" class="title">
    <b>test_include_returns_false_for_non_matching_record_to_verify_scoping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006274_source')" id="l_M006274_source">show source</a> ]</p>
  <div id="M006274_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 474</span>
474:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_returns_false_for_non_matching_record_to_verify_scoping</span>
475:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
476:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">create</span> <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Bryan&quot;</span>, <span class="ruby-identifier">:salary</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">50_000</span>
477: 
478:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
479:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
480:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006272" class="method">
  <div id="M006272_title" class="title">
    <b>test_include_uses_array_include_after_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006272_source')" id="l_M006272_source">show source</a> ]</p>
  <div id="M006272_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 450</span>
450:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_uses_array_include_after_loaded</span>
451:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
452:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">class</span> <span class="ruby-comment cmt"># force load target</span>
453: 
454:     <span class="ruby-identifier">developer</span> = <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>
455: 
456:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
457:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">loaded?</span>
458:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">developer</span>)
459:     <span class="ruby-keyword kw">end</span>
460:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006298" class="method">
  <div id="M006298_title" class="title">
    <b>test_join_table_alias</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006298_source')" id="l_M006298_source">show source</a> ]</p>
  <div id="M006298_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 663</span>
663:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_join_table_alias</span>
664:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:developers</span>}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers_projects_join.joined_on IS NOT NULL'</span>).<span class="ruby-identifier">size</span>
665:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006299" class="method">
  <div id="M006299_title" class="title">
    <b>test_join_with_group</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006299_source')" id="l_M006299_source">show source</a> ]</p>
  <div id="M006299_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 667</span>
667:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_join_with_group</span>
668:     <span class="ruby-identifier">group</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">inject</span>([]) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">g</span>, <span class="ruby-identifier">c</span><span class="ruby-operator">|</span>
669:       <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers.#{c.name}&quot;</span>
670:       <span class="ruby-identifier">g</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;developers_projects_2.#{c.name}&quot;</span>
671:     <span class="ruby-keyword kw">end</span>
672:     <span class="ruby-constant">Project</span>.<span class="ruby-identifier">columns</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">group</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;projects.#{c.name}&quot;</span> }
673: 
674:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:projects</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:developers</span>}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers_projects_join.joined_on IS NOT NULL'</span>, <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">group</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;,&quot;</span>)).<span class="ruby-identifier">size</span>
675:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006286" class="method">
  <div id="M006286_title" class="title">
    <b>test_new_with_values_in_collection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006286_source')" id="l_M006286_source">show source</a> ]</p>
  <div id="M006286_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 562</span>
562:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_with_values_in_collection</span>
563:     <span class="ruby-identifier">jamis</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">'Jamis'</span>)
564:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperForProjectWithAfterCreateHook</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">'David'</span>)
565:     <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithAfterCreateHook</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Cooking with Bertie&quot;</span>)
566:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">jamis</span>
567:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>
568:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">reload</span>
569: 
570:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">jamis</span>)
571:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">david</span>)
572:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006264" class="method">
  <div id="M006264_title" class="title">
    <b>test_removing_associations_on_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006264_source')" id="l_M006264_source">show source</a> ]</p>
  <div id="M006264_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 372</span>
372:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_removing_associations_on_destroy</span>
373:     <span class="ruby-identifier">david</span> = <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
374:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
375:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">destroy</span> }
376:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">empty?</span>
377:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">DeveloperWithBeforeDestroyRaise</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_all</span>(<span class="ruby-value str">&quot;SELECT * FROM developers_projects WHERE developer_id = 1&quot;</span>).<span class="ruby-identifier">empty?</span>
378:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006290" class="method">
  <div id="M006290_title" class="title">
    <b>test_replace_on_new_object</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006290_source')" id="l_M006290_source">show source</a> ]</p>
  <div id="M006290_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 597</span>
597:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_replace_on_new_object</span>
598:     <span class="ruby-identifier">new_developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Matz&quot;</span>)
599:     <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ActionWebSearch&quot;</span>)]
600:     <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">save</span>
601:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">new_developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
602:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006288" class="method">
  <div id="M006288_title" class="title">
    <b>test_replace_with_less</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006288_source')" id="l_M006288_source">show source</a> ]</p>
  <div id="M006288_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 582</span>
582:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_replace_with_less</span>
583:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
584:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>)]
585:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
586:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
587:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006289" class="method">
  <div id="M006289_title" class="title">
    <b>test_replace_with_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006289_source')" id="l_M006289_source">show source</a> ]</p>
  <div id="M006289_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 589</span>
589:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_replace_with_new</span>
590:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
591:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span> = [<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>), <span class="ruby-constant">Project</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ActionWebSearch&quot;</span>)]
592:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save</span>
593:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">length</span>
594:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">david</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>))
595:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006309" class="method">
  <div id="M006309_title" class="title">
    <b>test_scoped_find_on_through_association_doesnt_return_read_only_records</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006309_source')" id="l_M006309_source">show source</a> ]</p>
  <div id="M006309_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 748</span>
748:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scoped_find_on_through_association_doesnt_return_read_only_records</span>
749:     <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;General&quot;</span>)
750: 
751:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
752:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">save!</span>
753:     <span class="ruby-keyword kw">end</span>
754:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006308" class="method">
  <div id="M006308_title" class="title">
    <b>test_select_limited_ids_list</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006308_source')" id="l_M006308_source">show source</a> ]</p>
  <div id="M006308_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 733</span>
733:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_select_limited_ids_list</span>
734:     <span class="ruby-comment cmt"># Set timestamps</span>
735:     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">transaction</span> <span class="ruby-keyword kw">do</span>
736:       <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span>, <span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
737:         <span class="ruby-identifier">record</span>.<span class="ruby-identifier">update_attributes</span>(<span class="ruby-identifier">:created_at</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>.<span class="ruby-identifier">years</span>.<span class="ruby-identifier">ago</span> <span class="ruby-operator">+</span> (<span class="ruby-identifier">i</span> <span class="ruby-operator">*</span> <span class="ruby-value">5</span>.<span class="ruby-identifier">minutes</span>))
738:       <span class="ruby-keyword kw">end</span>
739:     <span class="ruby-keyword kw">end</span>
740: 
741:     <span class="ruby-identifier">join_base</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Associations</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassMethods</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinDependency</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinBase</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Project</span>)
742:     <span class="ruby-identifier">join_dep</span>  = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Associations</span><span class="ruby-operator">::</span><span class="ruby-constant">ClassMethods</span><span class="ruby-operator">::</span><span class="ruby-constant">JoinDependency</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">join_base</span>, <span class="ruby-identifier">:developers</span>, <span class="ruby-keyword kw">nil</span>)
743:     <span class="ruby-identifier">projects</span>  = <span class="ruby-constant">Project</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:select_limited_ids_list</span>, {<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers.created_at'</span>}, <span class="ruby-identifier">join_dep</span>)
744:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">projects</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;'&quot;</span>), <span class="ruby-identifier">projects</span>
745:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w(1 2)</span>, <span class="ruby-identifier">projects</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/\d/</span>).<span class="ruby-identifier">sort</span>
746:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006312" class="method">
  <div id="M006312_title" class="title">
    <b>test_self_referential_habtm_without_foreign_key_set_should_raise_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006312_source')" id="l_M006312_source">show source</a> ]</p>
  <div id="M006312_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 772</span>
772:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_self_referential_habtm_without_foreign_key_set_should_raise_exception</span>
773:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasAndBelongsToManyAssociationForeignKeyNeeded</span>) {
774:       <span class="ruby-constant">Member</span>.<span class="ruby-identifier">class_eval</span> <span class="ruby-keyword kw">do</span>
775:         <span class="ruby-identifier">has_and_belongs_to_many</span> <span class="ruby-identifier">:friends</span>, <span class="ruby-identifier">:class_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Member&quot;</span>, <span class="ruby-identifier">:join_table</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;member_friends&quot;</span>
776:       <span class="ruby-keyword kw">end</span>
777:     }
778:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006311" class="method">
  <div id="M006311_title" class="title">
    <b>test_symbols_as_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006311_source')" id="l_M006311_source">show source</a> ]</p>
  <div id="M006311_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_symbols_as_keys</span>
761:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">DeveloperWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'David'</span>)
762:     <span class="ruby-identifier">project</span> = <span class="ruby-constant">ProjectWithSymbolsForKeys</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Rails Testing'</span>)
763:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developer</span>
764:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">save!</span>
765: 
766:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
767:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
768:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">developer</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
769:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">project</span>, <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
770:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006239" class="method">
  <div id="M006239_title" class="title">
    <b>test_triple_equality</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006239_source')" id="l_M006239_source">show source</a> ]</p>
  <div id="M006239_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 97</span>
 97:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_triple_equality</span>
 98:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Array</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">projects</span>)
 99:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">projects</span> <span class="ruby-operator">===</span> <span class="ruby-constant">Array</span>
100:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006256" class="method">
  <div id="M006256_title" class="title">
    <b>test_uniq_after_the_fact</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006256_source')" id="l_M006256_source">show source</a> ]</p>
  <div id="M006256_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 297</span>
297:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uniq_after_the_fact</span>
298:     <span class="ruby-identifier">dev</span> = <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
299:     <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
300:     <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
301: 
302:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">size</span>
303:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">dev</span>.<span class="ruby-identifier">projects</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
304:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006257" class="method">
  <div id="M006257_title" class="title">
    <b>test_uniq_before_the_fact</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006257_source')" id="l_M006257_source">show source</a> ]</p>
  <div id="M006257_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uniq_before_the_fact</span>
307:     <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
308:     <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>).<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
309:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
310:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006258" class="method">
  <div id="M006258_title" class="title">
    <b>test_uniq_option_prevents_duplicate_push</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006258_source')" id="l_M006258_source">show source</a> ]</p>
  <div id="M006258_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 312</span>
312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uniq_option_prevents_duplicate_push</span>
313:     <span class="ruby-identifier">project</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:active_record</span>)
314:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
315:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
316:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
317: 
318:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:david</span>)
319:     <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">developers</span>(<span class="ruby-identifier">:jamis</span>)
320:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">project</span>.<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
321:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006292" class="method">
  <div id="M006292_title" class="title">
    <b>test_update_attributes_after_push_without_duplicate_join_table_rows</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006292_source')" id="l_M006292_source">show source</a> ]</p>
  <div id="M006292_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 617</span>
617:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_update_attributes_after_push_without_duplicate_join_table_rows</span>
618:     <span class="ruby-identifier">developer</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Kano&quot;</span>)
619:     <span class="ruby-identifier">project</span> = <span class="ruby-constant">SpecialProject</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Special Project&quot;</span>)
620:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">save</span>
621:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">projects</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">project</span>
622:     <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">update_attribute</span>(<span class="ruby-value str">&quot;name&quot;</span>, <span class="ruby-value str">&quot;Bruza&quot;</span>)
623:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-value str">&quot;SELECT count(*) FROM developers_projects\nWHERE project_id = \#{project.id}\nAND developer_id = \#{developer.id}\n&quot;</span>).<span class="ruby-identifier">to_i</span>
624:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006293" class="method">
  <div id="M006293_title" class="title">
    <b>test_updating_attributes_on_non_rich_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006293_source')" id="l_M006293_source">show source</a> ]</p>
  <div id="M006293_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 631</span>
631:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_updating_attributes_on_non_rich_associations</span>
632:     <span class="ruby-identifier">welcome</span> = <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>
633:     <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">title</span> = <span class="ruby-value str">&quot;Something else&quot;</span>
634:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">welcome</span>.<span class="ruby-identifier">save!</span>
635:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006295" class="method">
  <div id="M006295_title" class="title">
    <b>test_updating_attributes_on_rich_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006295_source')" id="l_M006295_source">show source</a> ]</p>
  <div id="M006295_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 644</span>
644:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_updating_attributes_on_rich_associations</span>
645:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">first</span>
646:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;DHH&quot;</span>
647:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ReadOnlyRecord</span>) { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save!</span> }
648:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006297" class="method">
  <div id="M006297_title" class="title">
    <b>test_updating_attributes_on_rich_associations_with_limited_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006297_source')" id="l_M006297_source">show source</a> ]</p>
  <div id="M006297_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 657</span>
657:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_updating_attributes_on_rich_associations_with_limited_find</span>
658:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">developers</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;developers.*&quot;</span>).<span class="ruby-identifier">first</span>
659:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;DHH&quot;</span>
660:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save!</span>
661:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M006296" class="method">
  <div id="M006296_title" class="title">
    <b>test_updating_attributes_on_rich_associations_with_limited_find_from_reflection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M006296_source')" id="l_M006296_source">show source</a> ]</p>
  <div id="M006296_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/has_and_belongs_to_many_associations_test.rb, line 650</span>
650:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_updating_attributes_on_rich_associations_with_limited_find_from_reflection</span>
651:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">projects</span>(<span class="ruby-identifier">:action_controller</span>).<span class="ruby-identifier">selected_developers</span>.<span class="ruby-identifier">first</span>
652:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;DHH&quot;</span>
653:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">david</span>.<span class="ruby-identifier">save!</span> }
654:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>