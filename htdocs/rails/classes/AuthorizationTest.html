  <div id="C00000716">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />AuthorizationTest<br/>
  In:
<a href="#" onclick="jsHref('files/activeresource/test/authorization_test_rb.html');">activeresource/test/authorization_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004653&name=assert_response_raises" >assert_response_raises</a></li>
  <li><a href="index.html?a=M004640&name=setup" >setup</a></li>
  <li><a href="index.html?a=M004641&name=test_authorization_header" >test_authorization_header</a></li>
  <li><a href="index.html?a=M004647&name=test_authorization_header_explicitly_setting_password_but_no_username" >test_authorization_header_explicitly_setting_password_but_no_username</a></li>
  <li><a href="index.html?a=M004645&name=test_authorization_header_explicitly_setting_username_and_password" >test_authorization_header_explicitly_setting_username_and_password</a></li>
  <li><a href="index.html?a=M004646&name=test_authorization_header_explicitly_setting_username_but_no_password" >test_authorization_header_explicitly_setting_username_but_no_password</a></li>
  <li><a href="index.html?a=M004644&name=test_authorization_header_with_decoded_credentials_from_url" >test_authorization_header_with_decoded_credentials_from_url</a></li>
  <li><a href="index.html?a=M004643&name=test_authorization_header_with_password_but_no_username" >test_authorization_header_with_password_but_no_username</a></li>
  <li><a href="index.html?a=M004642&name=test_authorization_header_with_username_but_no_password" >test_authorization_header_with_username_but_no_password</a></li>
  <li><a href="index.html?a=M004651&name=test_delete" >test_delete</a></li>
  <li><a href="index.html?a=M004648&name=test_get" >test_get</a></li>
  <li><a href="index.html?a=M004649&name=test_post" >test_post</a></li>
  <li><a href="index.html?a=M004650&name=test_put" >test_put</a></li>
  <li><a href="index.html?a=M004652&name=test_raises_invalid_request_on_unauthorized_requests" >test_raises_invalid_request_on_unauthorized_requests</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">Response</td>
    <td>=</td>
    <td class="attr-value">Struct.new(:code)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M004640" class="method">
  <div id="M004640_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004640_source')" id="l_M004640_source">show source</a> ]</p>
  <div id="M004640_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 6</span>
 6:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 7:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'http://localhost'</span>)
 8:     <span class="ruby-ivar">@matz</span>  = { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Matz'</span> }.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'person'</span>)
 9:     <span class="ruby-ivar">@david</span> = { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'David'</span> }.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:root</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'person'</span>)
10:     <span class="ruby-ivar">@authenticated_conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://david:test123@localhost&quot;</span>)
11:     <span class="ruby-ivar">@authorization_request_header</span> = { <span class="ruby-value str">'Authorization'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Basic ZGF2aWQ6dGVzdDEyMw=='</span> }
12: 
13:     <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">HttpMock</span>.<span class="ruby-identifier">respond_to</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">mock</span><span class="ruby-operator">|</span>
14:       <span class="ruby-identifier">mock</span>.<span class="ruby-identifier">get</span>    <span class="ruby-value str">&quot;/people/2.xml&quot;</span>,           <span class="ruby-ivar">@authorization_request_header</span>, <span class="ruby-ivar">@david</span>
15:       <span class="ruby-identifier">mock</span>.<span class="ruby-identifier">put</span>    <span class="ruby-value str">&quot;/people/2.xml&quot;</span>,           <span class="ruby-ivar">@authorization_request_header</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">204</span>
16:       <span class="ruby-identifier">mock</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;/people/2.xml&quot;</span>,           <span class="ruby-ivar">@authorization_request_header</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">200</span>
17:       <span class="ruby-identifier">mock</span>.<span class="ruby-identifier">post</span>   <span class="ruby-value str">&quot;/people/2/addresses.xml&quot;</span>, <span class="ruby-ivar">@authorization_request_header</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">201</span>, <span class="ruby-value str">'Location'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'/people/1/addresses/5'</span>
18:     <span class="ruby-keyword kw">end</span>
19:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004641" class="method">
  <div id="M004641_title" class="title">
    <b>test_authorization_header</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004641_source')" id="l_M004641_source">show source</a> ]</p>
  <div id="M004641_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header</span>
22:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
23:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@authorization_request_header</span>[<span class="ruby-value str">'Authorization'</span>], <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">'Authorization'</span>]
24:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
25:     
26:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
27:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;david&quot;</span>, <span class="ruby-value str">&quot;test123&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
28:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004647" class="method">
  <div id="M004647_title" class="title">
    <b>test_authorization_header_explicitly_setting_password_but_no_username</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004647_source')" id="l_M004647_source">show source</a> ]</p>
  <div id="M004647_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_explicitly_setting_password_but_no_username</span>
80:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://@localhost&quot;</span>)
81:     <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">password</span> = <span class="ruby-value str">&quot;test123&quot;</span>
82:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
83:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
84: 
85:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
86:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;test123&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004645" class="method">
  <div id="M004645_title" class="title">
    <b>test_authorization_header_explicitly_setting_username_and_password</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004645_source')" id="l_M004645_source">show source</a> ]</p>
  <div id="M004645_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_explicitly_setting_username_and_password</span>
58:     <span class="ruby-ivar">@authenticated_conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://@localhost&quot;</span>)
59:     <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">user</span> = <span class="ruby-value str">'david'</span>
60:     <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">password</span> = <span class="ruby-value str">'test123'</span>
61:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
62:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@authorization_request_header</span>[<span class="ruby-value str">'Authorization'</span>], <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">'Authorization'</span>]
63:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
64: 
65:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
66:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;david&quot;</span>, <span class="ruby-value str">&quot;test123&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
67:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004646" class="method">
  <div id="M004646_title" class="title">
    <b>test_authorization_header_explicitly_setting_username_but_no_password</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004646_source')" id="l_M004646_source">show source</a> ]</p>
  <div id="M004646_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_explicitly_setting_username_but_no_password</span>
70:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://@localhost&quot;</span>)
71:     <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">user</span> = <span class="ruby-value str">&quot;david&quot;</span>
72:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
73:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
74: 
75:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
76:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;david&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004644" class="method">
  <div id="M004644_title" class="title">
    <b>test_authorization_header_with_decoded_credentials_from_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004644_source')" id="l_M004644_source">show source</a> ]</p>
  <div id="M004644_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 48</span>
48:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_with_decoded_credentials_from_url</span>
49:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://my%40email.com:%31%32%33@localhost&quot;</span>)
50:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
51:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
52: 
53:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
54:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;my@email.com&quot;</span>, <span class="ruby-value str">&quot;123&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004643" class="method">
  <div id="M004643_title" class="title">
    <b>test_authorization_header_with_password_but_no_username</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004643_source')" id="l_M004643_source">show source</a> ]</p>
  <div id="M004643_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_with_password_but_no_username</span>
40:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://:test123@localhost&quot;</span>)
41:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
42:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
43:     
44:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
45:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-value str">&quot;test123&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
46:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004642" class="method">
  <div id="M004642_title" class="title">
    <b>test_authorization_header_with_username_but_no_password</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004642_source')" id="l_M004642_source">show source</a> ]</p>
  <div id="M004642_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_authorization_header_with_username_but_no_password</span>
31:     <span class="ruby-ivar">@conn</span> = <span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">Connection</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;http://david:@localhost&quot;</span>)
32:     <span class="ruby-identifier">authorization_header</span> = <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:authorization_header</span>)
33:     <span class="ruby-identifier">authorization</span> = <span class="ruby-identifier">authorization_header</span>[<span class="ruby-value str">&quot;Authorization&quot;</span>].<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>
34:     
35:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-identifier">authorization</span>[<span class="ruby-value">0</span>]
36:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;david&quot;</span>], <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Base64</span>.<span class="ruby-identifier">decode64</span>(<span class="ruby-identifier">authorization</span>[<span class="ruby-value">1</span>]).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;:&quot;</span>)[<span class="ruby-value">0</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>]
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004651" class="method">
  <div id="M004651_title" class="title">
    <b>test_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004651_source')" id="l_M004651_source">show source</a> ]</p>
  <div id="M004651_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete</span>
105:     <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>)
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">200</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">code</span>
107:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004648" class="method">
  <div id="M004648_title" class="title">
    <b>test_get</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004648_source')" id="l_M004648_source">show source</a> ]</p>
  <div id="M004648_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get</span>
90:     <span class="ruby-identifier">david</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">get</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>)
91:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">david</span>[<span class="ruby-value str">&quot;name&quot;</span>]
92:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004649" class="method">
  <div id="M004649_title" class="title">
    <b>test_post</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004649_source')" id="l_M004649_source">show source</a> ]</p>
  <div id="M004649_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 94</span>
94:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_post</span>
95:     <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">post</span>(<span class="ruby-value str">&quot;/people/2/addresses.xml&quot;</span>)
96:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/people/1/addresses/5&quot;</span>, <span class="ruby-identifier">response</span>[<span class="ruby-value str">&quot;Location&quot;</span>]
97:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004650" class="method">
  <div id="M004650_title" class="title">
    <b>test_put</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004650_source')" id="l_M004650_source">show source</a> ]</p>
  <div id="M004650_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_put</span>
100:     <span class="ruby-identifier">response</span> = <span class="ruby-ivar">@authenticated_conn</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>)
101:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">204</span>, <span class="ruby-identifier">response</span>.<span class="ruby-identifier">code</span>
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004652" class="method">
  <div id="M004652_title" class="title">
    <b>test_raises_invalid_request_on_unauthorized_requests</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004652_source')" id="l_M004652_source">show source</a> ]</p>
  <div id="M004652_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_raises_invalid_request_on_unauthorized_requests</span>
110:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidRequestError</span>) { <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">post</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>) }
111:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidRequestError</span>) { <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">post</span>(<span class="ruby-value str">&quot;/people/2/addresses.xml&quot;</span>) }
112:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidRequestError</span>) { <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">put</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>) }
113:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveResource</span><span class="ruby-operator">::</span><span class="ruby-constant">InvalidRequestError</span>) { <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">&quot;/people/2.xml&quot;</span>) }
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M004653" class="method">
  <div id="M004653_title" class="title">
    <b>assert_response_raises</b>(klass, code)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004653_source')" id="l_M004653_source">show source</a> ]</p>
  <div id="M004653_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activeresource/test/authorization_test.rb, line 117</span>
117:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_response_raises</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-identifier">code</span>)
118:       <span class="ruby-identifier">assert_raise</span>(<span class="ruby-identifier">klass</span>, <span class="ruby-node">&quot;Expected response code #{code} to raise #{klass}&quot;</span>) <span class="ruby-keyword kw">do</span>
119:         <span class="ruby-ivar">@conn</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:handle_response</span>, <span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">code</span>))
120:       <span class="ruby-keyword kw">end</span>
121:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>