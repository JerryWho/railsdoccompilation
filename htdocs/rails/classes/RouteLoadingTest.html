  <div id="C00000110">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RouteLoadingTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000750&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000751&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M000756&name=test_adding_inflections_forces_reload" >test_adding_inflections_forces_reload</a></li>
  <li><a href="index.html?a=M000755&name=test_bang_forces_reload" >test_bang_forces_reload</a></li>
  <li><a href="index.html?a=M000752&name=test_load" >test_load</a></li>
  <li><a href="index.html?a=M000758&name=test_load_multiple_configurations" >test_load_multiple_configurations</a></li>
  <li><a href="index.html?a=M000757&name=test_load_with_configuration" >test_load_with_configuration</a></li>
  <li><a href="index.html?a=M000753&name=test_no_reload_when_not_modified" >test_no_reload_when_not_modified</a></li>
  <li><a href="index.html?a=M000754&name=test_reload_when_modified" >test_reload_when_modified</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000750" class="method">
  <div id="M000750_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000750_source')" id="l_M000750_source">show source</a> ]</p>
  <div id="M000750_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2508</span>
2508:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
2509:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value str">'@routes_last_modified'</span>, <span class="ruby-keyword kw">nil</span>
2510:     <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:RAILS_ROOT</span>, <span class="ruby-value str">'.'</span> }
2511:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">RAILS_ROOT</span>, <span class="ruby-value str">'config'</span>, <span class="ruby-value str">'routes.rb'</span>))
2512: 
2513:     <span class="ruby-ivar">@stat</span> = <span class="ruby-identifier">stub_everything</span>
2514:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000751" class="method">
  <div id="M000751_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000751_source')" id="l_M000751_source">show source</a> ]</p>
  <div id="M000751_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2516</span>
2516:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
2517:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">configuration_files</span>.<span class="ruby-identifier">clear</span>
2518:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:RAILS_ROOT</span>
2519:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000756" class="method">
  <div id="M000756_title" class="title">
    <b>test_adding_inflections_forces_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000756_source')" id="l_M000756_source">show source</a> ]</p>
  <div id="M000756_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2552</span>
2552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_inflections_forces_reload</span>
2553:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflections</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:uncountable</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'equipment'</span>)
2554:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:reload!</span>)
2555: 
2556:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">inflections</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">inflect</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inflect</span>.<span class="ruby-identifier">uncountable</span>(<span class="ruby-value str">'equipment'</span>) }
2557:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000755" class="method">
  <div id="M000755_title" class="title">
    <b>test_bang_forces_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000755_source')" id="l_M000755_source">show source</a> ]</p>
  <div id="M000755_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2544</span>
2544:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_forces_reload</span>
2545:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>)
2546:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2547:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>)
2548: 
2549:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload!</span> }
2550:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000752" class="method">
  <div id="M000752_title" class="title">
    <b>test_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000752_source')" id="l_M000752_source">show source</a> ]</p>
  <div id="M000752_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2521</span>
2521:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load</span>
2522:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2523:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>))
2524: 
2525:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2526:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000758" class="method">
  <div id="M000758_title" class="title">
    <b>test_load_multiple_configurations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000758_source')" id="l_M000758_source">show source</a> ]</p>
  <div id="M000758_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2568</span>
2568:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_multiple_configurations</span>
2569:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-value str">&quot;engines.rb&quot;</span>)
2570:     
2571:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least_once</span>.<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2572: 
2573:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'./config/routes.rb'</span>)
2574:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'engines.rb'</span>)
2575: 
2576:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2577:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000757" class="method">
  <div id="M000757_title" class="title">
    <b>test_load_with_configuration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000757_source')" id="l_M000757_source">show source</a> ]</p>
  <div id="M000757_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2559</span>
2559:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_with_configuration</span>
2560:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">configuration_files</span>.<span class="ruby-identifier">clear</span>
2561:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-value str">&quot;foobarbaz&quot;</span>)
2562:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2563:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">&quot;foobarbaz&quot;</span>)
2564: 
2565:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2566:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000753" class="method">
  <div id="M000753_title" class="title">
    <b>test_no_reload_when_not_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000753_source')" id="l_M000753_source">show source</a> ]</p>
  <div id="M000753_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2528</span>
2528:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_reload_when_not_modified</span>
2529:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>)
2530:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2531:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">at_most_once</span>
2532: 
2533:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span> }
2534:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000754" class="method">
  <div id="M000754_title" class="title">
    <b>test_reload_when_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000754_source')" id="l_M000754_source">show source</a> ]</p>
  <div id="M000754_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2536</span>
2536:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reload_when_modified</span>
2537:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>)
2538:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2539:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>)
2540: 
2541:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span> }
2542:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>