  <div id="C00000107">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RouteLoadingTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/routing_test_rb.html');">actionpack/test/controller/routing_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000774&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000775&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M000780&name=test_adding_inflections_forces_reload" >test_adding_inflections_forces_reload</a></li>
  <li><a href="index.html?a=M000779&name=test_bang_forces_reload" >test_bang_forces_reload</a></li>
  <li><a href="index.html?a=M000776&name=test_load" >test_load</a></li>
  <li><a href="index.html?a=M000782&name=test_load_multiple_configurations" >test_load_multiple_configurations</a></li>
  <li><a href="index.html?a=M000781&name=test_load_with_configuration" >test_load_with_configuration</a></li>
  <li><a href="index.html?a=M000777&name=test_no_reload_when_not_modified" >test_no_reload_when_not_modified</a></li>
  <li><a href="index.html?a=M000778&name=test_reload_when_modified" >test_reload_when_modified</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000774" class="method">
  <div id="M000774_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000774_source')" id="l_M000774_source">show source</a> ]</p>
  <div id="M000774_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2517</span>
2517:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
2518:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">instance_variable_set</span> <span class="ruby-value str">'@routes_last_modified'</span>, <span class="ruby-keyword kw">nil</span>
2519:     <span class="ruby-identifier">silence_warnings</span> { <span class="ruby-constant">Object</span>.<span class="ruby-identifier">const_set</span> <span class="ruby-identifier">:RAILS_ROOT</span>, <span class="ruby-value str">'.'</span> }
2520:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">RAILS_ROOT</span>, <span class="ruby-value str">'config'</span>, <span class="ruby-value str">'routes.rb'</span>))
2521: 
2522:     <span class="ruby-ivar">@stat</span> = <span class="ruby-identifier">stub_everything</span>
2523:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000775" class="method">
  <div id="M000775_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000775_source')" id="l_M000775_source">show source</a> ]</p>
  <div id="M000775_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2525</span>
2525:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
2526:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">configuration_files</span>.<span class="ruby-identifier">clear</span>
2527:     <span class="ruby-constant">Object</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:remove_const</span>, <span class="ruby-identifier">:RAILS_ROOT</span>
2528:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000780" class="method">
  <div id="M000780_title" class="title">
    <b>test_adding_inflections_forces_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000780_source')" id="l_M000780_source">show source</a> ]</p>
  <div id="M000780_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2561</span>
2561:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_inflections_forces_reload</span>
2562:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflections</span>.<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:uncountable</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'equipment'</span>)
2563:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:reload!</span>)
2564: 
2565:     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Inflector</span>.<span class="ruby-identifier">inflections</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">inflect</span><span class="ruby-operator">|</span> <span class="ruby-identifier">inflect</span>.<span class="ruby-identifier">uncountable</span>(<span class="ruby-value str">'equipment'</span>) }
2566:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000779" class="method">
  <div id="M000779_title" class="title">
    <b>test_bang_forces_reload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000779_source')" id="l_M000779_source">show source</a> ]</p>
  <div id="M000779_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2553</span>
2553:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_forces_reload</span>
2554:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>)
2555:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2556:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>)
2557: 
2558:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload!</span> }
2559:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000776" class="method">
  <div id="M000776_title" class="title">
    <b>test_load</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000776_source')" id="l_M000776_source">show source</a> ]</p>
  <div id="M000776_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2530</span>
2530:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load</span>
2531:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2532:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>))
2533: 
2534:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2535:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000782" class="method">
  <div id="M000782_title" class="title">
    <b>test_load_multiple_configurations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000782_source')" id="l_M000782_source">show source</a> ]</p>
  <div id="M000782_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2577</span>
2577:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_multiple_configurations</span>
2578:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-value str">&quot;engines.rb&quot;</span>)
2579: 
2580:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least_once</span>.<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2581: 
2582:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'./config/routes.rb'</span>)
2583:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'engines.rb'</span>)
2584: 
2585:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2586:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000781" class="method">
  <div id="M000781_title" class="title">
    <b>test_load_with_configuration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000781_source')" id="l_M000781_source">show source</a> ]</p>
  <div id="M000781_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2568</span>
2568:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_with_configuration</span>
2569:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">configuration_files</span>.<span class="ruby-identifier">clear</span>
2570:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-value str">&quot;foobarbaz&quot;</span>)
2571:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2572:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">&quot;foobarbaz&quot;</span>)
2573: 
2574:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span>
2575:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000777" class="method">
  <div id="M000777_title" class="title">
    <b>test_no_reload_when_not_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000777_source')" id="l_M000777_source">show source</a> ]</p>
  <div id="M000777_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2537</span>
2537:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_reload_when_not_modified</span>
2538:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>)
2539:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2540:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">at_most_once</span>
2541: 
2542:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span> }
2543:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000778" class="method">
  <div id="M000778_title" class="title">
    <b>test_reload_when_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000778_source')" id="l_M000778_source">show source</a> ]</p>
  <div id="M000778_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File actionpack/test/controller/routing_test.rb, line 2545</span>
2545:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reload_when_modified</span>
2546:     <span class="ruby-ivar">@stat</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:mtime</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>)
2547:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:stat</span>).<span class="ruby-identifier">at_least</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-ivar">@stat</span>)
2548:     <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:load</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">regexp_matches</span>(<span class="ruby-regexp re">/routes\.rb$/</span>)).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>)
2549: 
2550:     <span class="ruby-value">2</span>.<span class="ruby-identifier">times</span> { <span class="ruby-identifier">routes</span>.<span class="ruby-identifier">reload</span> }
2551:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>