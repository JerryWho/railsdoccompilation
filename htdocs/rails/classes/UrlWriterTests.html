  <div id="C00000851">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />UrlWriterTests<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/url_rewriter_test_rb.html');">actionpack/test/controller/url_rewriter_test.rb</a>

Parent:&nbsp;
ActionController::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005627&name=add_host!" >add_host!</a></li>
  <li><a href="index.html?a=M005626&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005629&name=test_anchor" >test_anchor</a></li>
  <li><a href="index.html?a=M005631&name=test_anchor_should_be_cgi_escaped" >test_anchor_should_be_cgi_escaped</a></li>
  <li><a href="index.html?a=M005630&name=test_anchor_should_call_to_param" >test_anchor_should_call_to_param</a></li>
  <li><a href="index.html?a=M005649&name=test_array_parameter" >test_array_parameter</a></li>
  <li><a href="index.html?a=M005632&name=test_default_host" >test_default_host</a></li>
  <li><a href="index.html?a=M005628&name=test_exception_is_thrown_without_host" >test_exception_is_thrown_without_host</a></li>
  <li><a href="index.html?a=M005654&name=test_formatted_url_methods_are_deprecated" >test_formatted_url_methods_are_deprecated</a></li>
  <li><a href="index.html?a=M005648&name=test_hash_parameter" >test_hash_parameter</a></li>
  <li><a href="index.html?a=M005651&name=test_hash_recursive_and_array_parameters" >test_hash_recursive_and_array_parameters</a></li>
  <li><a href="index.html?a=M005650&name=test_hash_recursive_parameters" >test_hash_recursive_parameters</a></li>
  <li><a href="index.html?a=M005633&name=test_host_may_be_overridden" >test_host_may_be_overridden</a></li>
  <li><a href="index.html?a=M005655&name=test_multiple_includes_maintain_distinct_options" >test_multiple_includes_maintain_distinct_options</a></li>
  <li><a href="index.html?a=M005643&name=test_named_routes" >test_named_routes</a></li>
  <li><a href="index.html?a=M005653&name=test_named_routes_with_nil_keys" >test_named_routes_with_nil_keys</a></li>
  <li><a href="index.html?a=M005646&name=test_one_parameter" >test_one_parameter</a></li>
  <li><a href="index.html?a=M005645&name=test_only_path" >test_only_path</a></li>
  <li><a href="index.html?a=M005652&name=test_path_generation_for_symbol_parameter_keys" >test_path_generation_for_symbol_parameter_keys</a></li>
  <li><a href="index.html?a=M005634&name=test_port" >test_port</a></li>
  <li><a href="index.html?a=M005635&name=test_protocol" >test_protocol</a></li>
  <li><a href="index.html?a=M005636&name=test_protocol_with_and_without_separator" >test_protocol_with_and_without_separator</a></li>
  <li><a href="index.html?a=M005642&name=test_relative_url_root_is_respected" >test_relative_url_root_is_respected</a></li>
  <li><a href="index.html?a=M005644&name=test_relative_url_root_is_respected_for_named_routes" >test_relative_url_root_is_respected_for_named_routes</a></li>
  <li><a href="index.html?a=M005637&name=test_trailing_slash" >test_trailing_slash</a></li>
  <li><a href="index.html?a=M005640&name=test_trailing_slash_with_anchor" >test_trailing_slash_with_anchor</a></li>
  <li><a href="index.html?a=M005639&name=test_trailing_slash_with_only_path" >test_trailing_slash_with_only_path</a></li>
  <li><a href="index.html?a=M005641&name=test_trailing_slash_with_params" >test_trailing_slash_with_params</a></li>
  <li><a href="index.html?a=M005638&name=test_trailing_slash_with_protocol" >test_trailing_slash_with_protocol</a></li>
  <li><a href="index.html?a=M005647&name=test_two_parameters" >test_two_parameters</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
</ul>


  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/UrlWriterTests/W.html');" class="link">UrlWriterTests::W</a>"<br />




<div class="sectiontitle">Public Instance methods</div>
<div id="M005627" class="method">
  <div id="M005627_title" class="title">
    <b>add_host!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005627_source')" id="l_M005627_source">show source</a> ]</p>
  <div id="M005627_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_host!</span>
112:     <span class="ruby-constant">W</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-value str">'www.basecamphq.com'</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005626" class="method">
  <div id="M005626_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005626_source')" id="l_M005626_source">show source</a> ]</p>
  <div id="M005626_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
108:     <span class="ruby-constant">W</span>.<span class="ruby-identifier">default_url_options</span>.<span class="ruby-identifier">clear</span>
109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005629" class="method">
  <div id="M005629_title" class="title">
    <b>test_anchor</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005629_source')" id="l_M005629_source">show source</a> ]</p>
  <div id="M005629_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 121</span>
121:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor</span>
122:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anchor'</span>,
123:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'anchor'</span>)
124:     )
125:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005631" class="method">
  <div id="M005631_title" class="title">
    <b>test_anchor_should_be_cgi_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005631_source')" id="l_M005631_source">show source</a> ]</p>
  <div id="M005631_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 133</span>
133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor_should_be_cgi_escaped</span>
134:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anc%2Fhor'</span>,
135:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:to_param</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'anc/hor'</span>))
136:     )
137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005630" class="method">
  <div id="M005630_title" class="title">
    <b>test_anchor_should_call_to_param</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005630_source')" id="l_M005630_source">show source</a> ]</p>
  <div id="M005630_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 127</span>
127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor_should_call_to_param</span>
128:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anchor'</span>,
129:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:to_param</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'anchor'</span>))
130:     )
131:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005649" class="method">
  <div id="M005649_title" class="title">
    <b>test_array_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005649_source')" id="l_M005649_source">show source</a> ]</p>
  <div id="M005649_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 301</span>
301:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_parameter</span>
302:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'Bob'</span>, <span class="ruby-value str">'prof'</span>])
303:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
304:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>  }.<span class="ruby-identifier">to_query</span>
305:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span> }.<span class="ruby-identifier">to_query</span>
306:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005632" class="method">
  <div id="M005632_title" class="title">
    <b>test_default_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005632_source')" id="l_M005632_source">show source</a> ]</p>
  <div id="M005632_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_host</span>
140:     <span class="ruby-identifier">add_host!</span>
141:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com/c/a/i'</span>,
142:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>)
143:     )
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005628" class="method">
  <div id="M005628_title" class="title">
    <b>test_exception_is_thrown_without_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005628_source')" id="l_M005628_source">show source</a> ]</p>
  <div id="M005628_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_is_thrown_without_host</span>
116:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
117:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span> <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>
118:     <span class="ruby-keyword kw">end</span>
119:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005654" class="method">
  <div id="M005654_title" class="title">
    <b>test_formatted_url_methods_are_deprecated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005654_source')" id="l_M005654_source">show source</a> ]</p>
  <div id="M005654_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 350</span>
350:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_formatted_url_methods_are_deprecated</span>
351:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
352:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:posts</span>
353:     <span class="ruby-keyword kw">end</span>
354:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
355:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
356:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
357:     <span class="ruby-identifier">params</span> = {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xml</span>}
358:     <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword kw">do</span>
359:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/posts/1.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:formatted_post_path</span>, <span class="ruby-identifier">params</span>))    
360:     <span class="ruby-keyword kw">end</span>
361:     <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword kw">do</span>
362:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/posts/1.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:formatted_post_path</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:xml</span>))    
363:     <span class="ruby-keyword kw">end</span>
364:   <span class="ruby-keyword kw">ensure</span>
365:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
366:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005648" class="method">
  <div id="M005648_title" class="title">
    <b>test_hash_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005648_source')" id="l_M005648_source">show source</a> ]</p>
  <div id="M005648_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 294</span>
294:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_parameter</span>
295:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>})
296:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
297:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[category]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span> }.<span class="ruby-identifier">to_query</span>
298:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[name]'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>  }.<span class="ruby-identifier">to_query</span>
299:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005651" class="method">
  <div id="M005651_title" class="title">
    <b>test_hash_recursive_and_array_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005651_source')" id="l_M005651_source">show source</a> ]</p>
  <div id="M005651_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 316</span>
316:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_recursive_and_array_parameters</span>
317:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">101</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:position</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'prof'</span>, <span class="ruby-value str">'art director'</span>]}, <span class="ruby-identifier">:hobby</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>})
318:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r(^/c/a/101)</span>, <span class="ruby-identifier">url</span>
319:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
320:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[hobby]'</span>              =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>     }.<span class="ruby-identifier">to_query</span>
321:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[person][name]'</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>          }.<span class="ruby-identifier">to_query</span>
322:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">2</span>], { <span class="ruby-value str">'query[person][position][]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>         }.<span class="ruby-identifier">to_query</span>
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">3</span>], { <span class="ruby-value str">'query[person][position][]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'art director'</span> }.<span class="ruby-identifier">to_query</span>
324:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005650" class="method">
  <div id="M005650_title" class="title">
    <b>test_hash_recursive_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005650_source')" id="l_M005650_source">show source</a> ]</p>
  <div id="M005650_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 308</span>
308:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_recursive_parameters</span>
309:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:position</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>}, <span class="ruby-identifier">:hobby</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>})
310:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
311:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[hobby]'</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span> }.<span class="ruby-identifier">to_query</span>
312:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[person][name]'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>      }.<span class="ruby-identifier">to_query</span>
313:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">2</span>], { <span class="ruby-value str">'query[person][position]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>     }.<span class="ruby-identifier">to_query</span>
314:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005633" class="method">
  <div id="M005633_title" class="title">
    <b>test_host_may_be_overridden</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005633_source')" id="l_M005633_source">show source</a> ]</p>
  <div id="M005633_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_may_be_overridden</span>
147:     <span class="ruby-identifier">add_host!</span>
148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://37signals.basecamphq.com/c/a/i'</span>,
149:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'37signals.basecamphq.com'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>)
150:     )
151:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005655" class="method">
  <div id="M005655_title" class="title">
    <b>test_multiple_includes_maintain_distinct_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005655_source')" id="l_M005655_source">show source</a> ]</p>
  <div id="M005655_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 368</span>
368:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiple_includes_maintain_distinct_options</span>
369:     <span class="ruby-identifier">first_class</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
370:     <span class="ruby-identifier">second_class</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
371: 
372:     <span class="ruby-identifier">first_host</span>, <span class="ruby-identifier">second_host</span> = <span class="ruby-value str">'firsthost.com'</span>, <span class="ruby-value str">'secondhost.com'</span>
373: 
374:     <span class="ruby-identifier">first_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-identifier">first_host</span>
375:     <span class="ruby-identifier">second_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-identifier">second_host</span>
376: 
377:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">first_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>], <span class="ruby-identifier">first_host</span>
378:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">second_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>], <span class="ruby-identifier">second_host</span>
379:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005643" class="method">
  <div id="M005643_title" class="title">
    <b>test_named_routes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005643_source')" id="l_M005643_source">show source</a> ]</p>
  <div id="M005643_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 223</span>
223:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes</span>
224:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
225:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">no_args</span> <span class="ruby-value str">'/this/is/verbose'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
226:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
227:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
228:     <span class="ruby-keyword kw">end</span>
229: 
230:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
231:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
232:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
233:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:home_url</span>)
234:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://www.basecamphq.com/home/sweet/home/again'</span>,
235:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'again'</span>)
236: 
237:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'unused'</span>))
238:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>))
239:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/this/is/verbose&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:no_args_url</span>, <span class="ruby-identifier">:host=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.basecamphq.com'</span>))
240:   <span class="ruby-keyword kw">ensure</span>
241:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
242:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005653" class="method">
  <div id="M005653_title" class="title">
    <b>test_named_routes_with_nil_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005653_source')" id="l_M005653_source">show source</a> ]</p>
  <div id="M005653_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 330</span>
330:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes_with_nil_keys</span>
331:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">clear!</span>
332:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
333:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">main</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
334:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:posts</span>
335:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
336:     <span class="ruby-keyword kw">end</span>
337:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
338:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
339:     <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-value str">'www.basecamphq.com'</span>
340: 
341:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
342:     <span class="ruby-identifier">params</span> = {<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:posts</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xml</span>}
343:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/posts.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">params</span>))
344:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:format</span>] = <span class="ruby-keyword kw">nil</span>
345:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">params</span>))
346:   <span class="ruby-keyword kw">ensure</span>
347:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
348:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005646" class="method">
  <div id="M005646_title" class="title">
    <b>test_one_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005646_source')" id="l_M005646_source">show source</a> ]</p>
  <div id="M005646_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 281</span>
281:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_parameter</span>
282:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a?param=val'</span>,
283:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:param</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'val'</span>)
284:     )
285:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005645" class="method">
  <div id="M005645_title" class="title">
    <b>test_only_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005645_source')" id="l_M005645_source">show source</a> ]</p>
  <div id="M005645_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 262</span>
262:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_only_path</span>
263:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
264:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
265:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
266:     <span class="ruby-keyword kw">end</span>
267: 
268:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
269:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
270:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
271:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:home_url</span>)
272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/brave/new/world'</span>,
273:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'brave'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'world'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
274: 
275:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'unused'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
276:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>, <span class="ruby-value str">'alabama'</span>))
277:   <span class="ruby-keyword kw">ensure</span>
278:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
279:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005652" class="method">
  <div id="M005652_title" class="title">
    <b>test_path_generation_for_symbol_parameter_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005652_source')" id="l_M005652_source">show source</a> ]</p>
  <div id="M005652_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 326</span>
326:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_path_generation_for_symbol_parameter_keys</span>
327:     <span class="ruby-identifier">assert_generates</span>(<span class="ruby-value str">&quot;/image&quot;</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:image</span>)
328:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005634" class="method">
  <div id="M005634_title" class="title">
    <b>test_port</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005634_source')" id="l_M005634_source">show source</a> ]</p>
  <div id="M005634_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 153</span>
153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_port</span>
154:     <span class="ruby-identifier">add_host!</span>
155:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com:3000/c/a/i'</span>,
156:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3000</span>)
157:     )
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005635" class="method">
  <div id="M005635_title" class="title">
    <b>test_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005635_source')" id="l_M005635_source">show source</a> ]</p>
  <div id="M005635_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_protocol</span>
161:     <span class="ruby-identifier">add_host!</span>
162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
163:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
164:     )
165:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005636" class="method">
  <div id="M005636_title" class="title">
    <b>test_protocol_with_and_without_separator</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005636_source')" id="l_M005636_source">show source</a> ]</p>
  <div id="M005636_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 167</span>
167:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_protocol_with_and_without_separator</span>
168:     <span class="ruby-identifier">add_host!</span>
169:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
170:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
171:     )
172:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
173:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https://'</span>)
174:     )
175:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005642" class="method">
  <div id="M005642_title" class="title">
    <b>test_relative_url_root_is_respected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005642_source')" id="l_M005642_source">show source</a> ]</p>
  <div id="M005642_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_url_root_is_respected</span>
212:     <span class="ruby-identifier">orig_relative_url_root</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span>
213:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">'/subdir'</span>
214: 
215:     <span class="ruby-identifier">add_host!</span>
216:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/subdir/c/a/i'</span>,
217:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
218:     )
219:   <span class="ruby-keyword kw">ensure</span>
220:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-identifier">orig_relative_url_root</span>
221:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005644" class="method">
  <div id="M005644_title" class="title">
    <b>test_relative_url_root_is_respected_for_named_routes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005644_source')" id="l_M005644_source">show source</a> ]</p>
  <div id="M005644_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 244</span>
244:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_url_root_is_respected_for_named_routes</span>
245:     <span class="ruby-identifier">orig_relative_url_root</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span>
246:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">'/subdir'</span>
247: 
248:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
249:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
250:     <span class="ruby-keyword kw">end</span>
251: 
252:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
253:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
254: 
255:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://www.basecamphq.com/subdir/home/sweet/home/again'</span>,
256:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'again'</span>)
257:   <span class="ruby-keyword kw">ensure</span>
258:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
259:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-identifier">orig_relative_url_root</span>
260:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005637" class="method">
  <div id="M005637_title" class="title">
    <b>test_trailing_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005637_source')" id="l_M005637_source">show source</a> ]</p>
  <div id="M005637_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 177</span>
177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash</span>
178:     <span class="ruby-identifier">add_host!</span>
179:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>}
180:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>) )
181:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005640" class="method">
  <div id="M005640_title" class="title">
    <b>test_trailing_slash_with_anchor</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005640_source')" id="l_M005640_source">show source</a> ]</p>
  <div id="M005640_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 198</span>
198:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_anchor</span>
199:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:anchor=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'chapter7'</span>}
200:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/#chapter7'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
201:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/?query=string#chapter7'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>}))
202:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005639" class="method">
  <div id="M005639_title" class="title">
    <b>test_trailing_slash_with_only_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005639_source')" id="l_M005639_source">show source</a> ]</p>
  <div id="M005639_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_only_path</span>
191:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
192:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
193:     <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>})
194:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
195:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/?query=string'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>,<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
196:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005641" class="method">
  <div id="M005641_title" class="title">
    <b>test_trailing_slash_with_params</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005641_source')" id="l_M005641_source">show source</a> ]</p>
  <div id="M005641_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 204</span>
204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_params</span>
205:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cont'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'act'</span>, <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cafe'</span>, <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'link'</span>)
206:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
207:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cafe'</span> }.<span class="ruby-identifier">to_query</span>
208:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'link'</span> }.<span class="ruby-identifier">to_query</span>
209:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005638" class="method">
  <div id="M005638_title" class="title">
    <b>test_trailing_slash_with_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005638_source')" id="l_M005638_source">show source</a> ]</p>
  <div id="M005638_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_protocol</span>
184:     <span class="ruby-identifier">add_host!</span>
185:     <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>}
186:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>) )
187:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'https://www.basecamphq.com/foo/bar/33/?query=string'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>}))
188:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005647" class="method">
  <div id="M005647_title" class="title">
    <b>test_two_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005647_source')" id="l_M005647_source">show source</a> ]</p>
  <div id="M005647_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 287</span>
287:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_two_parameters</span>
288:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'X1'</span>, <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Y2'</span>)
289:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
290:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'X1'</span> }.<span class="ruby-identifier">to_query</span>
291:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Y2'</span> }.<span class="ruby-identifier">to_query</span>
292:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>