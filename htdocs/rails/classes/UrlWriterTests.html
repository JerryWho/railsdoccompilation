  <div id="C00000794">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />UrlWriterTests<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/url_rewriter_test_rb.html');">actionpack/test/controller/url_rewriter_test.rb</a>

Parent:&nbsp;
ActionController::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005685&name=add_host!" >add_host!</a></li>
  <li><a href="index.html?a=M005684&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005687&name=test_anchor" >test_anchor</a></li>
  <li><a href="index.html?a=M005689&name=test_anchor_should_be_cgi_escaped" >test_anchor_should_be_cgi_escaped</a></li>
  <li><a href="index.html?a=M005688&name=test_anchor_should_call_to_param" >test_anchor_should_call_to_param</a></li>
  <li><a href="index.html?a=M005707&name=test_array_parameter" >test_array_parameter</a></li>
  <li><a href="index.html?a=M005690&name=test_default_host" >test_default_host</a></li>
  <li><a href="index.html?a=M005686&name=test_exception_is_thrown_without_host" >test_exception_is_thrown_without_host</a></li>
  <li><a href="index.html?a=M005712&name=test_formatted_url_methods_are_deprecated" >test_formatted_url_methods_are_deprecated</a></li>
  <li><a href="index.html?a=M005706&name=test_hash_parameter" >test_hash_parameter</a></li>
  <li><a href="index.html?a=M005709&name=test_hash_recursive_and_array_parameters" >test_hash_recursive_and_array_parameters</a></li>
  <li><a href="index.html?a=M005708&name=test_hash_recursive_parameters" >test_hash_recursive_parameters</a></li>
  <li><a href="index.html?a=M005691&name=test_host_may_be_overridden" >test_host_may_be_overridden</a></li>
  <li><a href="index.html?a=M005713&name=test_multiple_includes_maintain_distinct_options" >test_multiple_includes_maintain_distinct_options</a></li>
  <li><a href="index.html?a=M005701&name=test_named_routes" >test_named_routes</a></li>
  <li><a href="index.html?a=M005711&name=test_named_routes_with_nil_keys" >test_named_routes_with_nil_keys</a></li>
  <li><a href="index.html?a=M005704&name=test_one_parameter" >test_one_parameter</a></li>
  <li><a href="index.html?a=M005703&name=test_only_path" >test_only_path</a></li>
  <li><a href="index.html?a=M005710&name=test_path_generation_for_symbol_parameter_keys" >test_path_generation_for_symbol_parameter_keys</a></li>
  <li><a href="index.html?a=M005692&name=test_port" >test_port</a></li>
  <li><a href="index.html?a=M005693&name=test_protocol" >test_protocol</a></li>
  <li><a href="index.html?a=M005694&name=test_protocol_with_and_without_separator" >test_protocol_with_and_without_separator</a></li>
  <li><a href="index.html?a=M005700&name=test_relative_url_root_is_respected" >test_relative_url_root_is_respected</a></li>
  <li><a href="index.html?a=M005702&name=test_relative_url_root_is_respected_for_named_routes" >test_relative_url_root_is_respected_for_named_routes</a></li>
  <li><a href="index.html?a=M005695&name=test_trailing_slash" >test_trailing_slash</a></li>
  <li><a href="index.html?a=M005698&name=test_trailing_slash_with_anchor" >test_trailing_slash_with_anchor</a></li>
  <li><a href="index.html?a=M005697&name=test_trailing_slash_with_only_path" >test_trailing_slash_with_only_path</a></li>
  <li><a href="index.html?a=M005699&name=test_trailing_slash_with_params" >test_trailing_slash_with_params</a></li>
  <li><a href="index.html?a=M005696&name=test_trailing_slash_with_protocol" >test_trailing_slash_with_protocol</a></li>
  <li><a href="index.html?a=M005705&name=test_two_parameters" >test_two_parameters</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
  <li><a href="#" onclick="jsHref('classes/ActionController/UrlWriter.html');">ActionController::UrlWriter</a></li>
</ul>


  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/UrlWriterTests/W.html');" class="link">UrlWriterTests::W</a>"<br />




<div class="sectiontitle">Public Instance methods</div>
<div id="M005685" class="method">
  <div id="M005685_title" class="title">
    <b>add_host!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005685_source')" id="l_M005685_source">show source</a> ]</p>
  <div id="M005685_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_host!</span>
116:     <span class="ruby-constant">W</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-value str">'www.basecamphq.com'</span>
117:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005684" class="method">
  <div id="M005684_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005684_source')" id="l_M005684_source">show source</a> ]</p>
  <div id="M005684_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
112:     <span class="ruby-constant">W</span>.<span class="ruby-identifier">default_url_options</span>.<span class="ruby-identifier">clear</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005687" class="method">
  <div id="M005687_title" class="title">
    <b>test_anchor</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005687_source')" id="l_M005687_source">show source</a> ]</p>
  <div id="M005687_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 125</span>
125:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor</span>
126:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anchor'</span>,
127:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'anchor'</span>)
128:     )
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005689" class="method">
  <div id="M005689_title" class="title">
    <b>test_anchor_should_be_cgi_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005689_source')" id="l_M005689_source">show source</a> ]</p>
  <div id="M005689_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 137</span>
137:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor_should_be_cgi_escaped</span>
138:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anc%2Fhor'</span>,
139:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:to_param</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'anc/hor'</span>))
140:     )
141:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005688" class="method">
  <div id="M005688_title" class="title">
    <b>test_anchor_should_call_to_param</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005688_source')" id="l_M005688_source">show source</a> ]</p>
  <div id="M005688_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_anchor_should_call_to_param</span>
132:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a#anchor'</span>,
133:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:anchor</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:to_param</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'anchor'</span>))
134:     )
135:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005707" class="method">
  <div id="M005707_title" class="title">
    <b>test_array_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005707_source')" id="l_M005707_source">show source</a> ]</p>
  <div id="M005707_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 305</span>
305:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_array_parameter</span>
306:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'Bob'</span>, <span class="ruby-value str">'prof'</span>])
307:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
308:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>  }.<span class="ruby-identifier">to_query</span>
309:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span> }.<span class="ruby-identifier">to_query</span>
310:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005690" class="method">
  <div id="M005690_title" class="title">
    <b>test_default_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005690_source')" id="l_M005690_source">show source</a> ]</p>
  <div id="M005690_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 143</span>
143:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_host</span>
144:     <span class="ruby-identifier">add_host!</span>
145:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com/c/a/i'</span>,
146:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>)
147:     )
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005686" class="method">
  <div id="M005686_title" class="title">
    <b>test_exception_is_thrown_without_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005686_source')" id="l_M005686_source">show source</a> ]</p>
  <div id="M005686_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_is_thrown_without_host</span>
120:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
121:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span> <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>
122:     <span class="ruby-keyword kw">end</span>
123:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005712" class="method">
  <div id="M005712_title" class="title">
    <b>test_formatted_url_methods_are_deprecated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005712_source')" id="l_M005712_source">show source</a> ]</p>
  <div id="M005712_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 354</span>
354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_formatted_url_methods_are_deprecated</span>
355:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
356:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:posts</span>
357:     <span class="ruby-keyword kw">end</span>
358:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
359:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
360:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
361:     <span class="ruby-identifier">params</span> = {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xml</span>}
362:     <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword kw">do</span>
363:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/posts/1.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:formatted_post_path</span>, <span class="ruby-identifier">params</span>))    
364:     <span class="ruby-keyword kw">end</span>
365:     <span class="ruby-identifier">assert_deprecated</span> <span class="ruby-keyword kw">do</span>
366:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/posts/1.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:formatted_post_path</span>, <span class="ruby-value">1</span>, <span class="ruby-identifier">:xml</span>))    
367:     <span class="ruby-keyword kw">end</span>
368:   <span class="ruby-keyword kw">ensure</span>
369:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
370:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005706" class="method">
  <div id="M005706_title" class="title">
    <b>test_hash_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005706_source')" id="l_M005706_source">show source</a> ]</p>
  <div id="M005706_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 298</span>
298:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_parameter</span>
299:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:category</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>})
300:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
301:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[category]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span> }.<span class="ruby-identifier">to_query</span>
302:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[name]'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>  }.<span class="ruby-identifier">to_query</span>
303:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005709" class="method">
  <div id="M005709_title" class="title">
    <b>test_hash_recursive_and_array_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005709_source')" id="l_M005709_source">show source</a> ]</p>
  <div id="M005709_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_recursive_and_array_parameters</span>
321:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">101</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:position</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'prof'</span>, <span class="ruby-value str">'art director'</span>]}, <span class="ruby-identifier">:hobby</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>})
322:     <span class="ruby-identifier">assert_match</span> <span class="ruby-regexp re">%r(^/c/a/101)</span>, <span class="ruby-identifier">url</span>
323:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[hobby]'</span>              =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>     }.<span class="ruby-identifier">to_query</span>
325:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[person][name]'</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>          }.<span class="ruby-identifier">to_query</span>
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">2</span>], { <span class="ruby-value str">'query[person][position][]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>         }.<span class="ruby-identifier">to_query</span>
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">3</span>], { <span class="ruby-value str">'query[person][position][]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'art director'</span> }.<span class="ruby-identifier">to_query</span>
328:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005708" class="method">
  <div id="M005708_title" class="title">
    <b>test_hash_recursive_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005708_source')" id="l_M005708_source">show source</a> ]</p>
  <div id="M005708_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 312</span>
312:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_recursive_parameters</span>
313:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>, <span class="ruby-identifier">:position</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>}, <span class="ruby-identifier">:hobby</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span>})
314:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
315:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-value str">'query[hobby]'</span>            =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'piercing'</span> }.<span class="ruby-identifier">to_query</span>
316:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-value str">'query[person][name]'</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Bob'</span>      }.<span class="ruby-identifier">to_query</span>
317:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">2</span>], { <span class="ruby-value str">'query[person][position]'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'prof'</span>     }.<span class="ruby-identifier">to_query</span>
318:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005691" class="method">
  <div id="M005691_title" class="title">
    <b>test_host_may_be_overridden</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005691_source')" id="l_M005691_source">show source</a> ]</p>
  <div id="M005691_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_may_be_overridden</span>
151:     <span class="ruby-identifier">add_host!</span>
152:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://37signals.basecamphq.com/c/a/i'</span>,
153:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'37signals.basecamphq.com'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>)
154:     )
155:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005713" class="method">
  <div id="M005713_title" class="title">
    <b>test_multiple_includes_maintain_distinct_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005713_source')" id="l_M005713_source">show source</a> ]</p>
  <div id="M005713_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 372</span>
372:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiple_includes_maintain_distinct_options</span>
373:     <span class="ruby-identifier">first_class</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
374:     <span class="ruby-identifier">second_class</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
375: 
376:     <span class="ruby-identifier">first_host</span>, <span class="ruby-identifier">second_host</span> = <span class="ruby-value str">'firsthost.com'</span>, <span class="ruby-value str">'secondhost.com'</span>
377: 
378:     <span class="ruby-identifier">first_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-identifier">first_host</span>
379:     <span class="ruby-identifier">second_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-identifier">second_host</span>
380: 
381:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">first_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>], <span class="ruby-identifier">first_host</span>
382:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">second_class</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>], <span class="ruby-identifier">second_host</span>
383:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005701" class="method">
  <div id="M005701_title" class="title">
    <b>test_named_routes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005701_source')" id="l_M005701_source">show source</a> ]</p>
  <div id="M005701_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes</span>
228:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
229:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">no_args</span> <span class="ruby-value str">'/this/is/verbose'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
230:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
231:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
232:     <span class="ruby-keyword kw">end</span>
233: 
234:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
235:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
236:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
237:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:home_url</span>)
238:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://www.basecamphq.com/home/sweet/home/again'</span>,
239:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'again'</span>)
240: 
241:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'unused'</span>))
242:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>))
243:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/this/is/verbose&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:no_args_url</span>, <span class="ruby-identifier">:host=</span><span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.basecamphq.com'</span>))
244:   <span class="ruby-keyword kw">ensure</span>
245:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
246:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005711" class="method">
  <div id="M005711_title" class="title">
    <b>test_named_routes_with_nil_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005711_source')" id="l_M005711_source">show source</a> ]</p>
  <div id="M005711_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 334</span>
334:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_routes_with_nil_keys</span>
335:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">clear!</span>
336:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
337:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">main</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>
338:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">resources</span> <span class="ruby-identifier">:posts</span>
339:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
340:     <span class="ruby-keyword kw">end</span>
341:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
342:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
343:     <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">default_url_options</span>[<span class="ruby-identifier">:host</span>] = <span class="ruby-value str">'www.basecamphq.com'</span>
344: 
345:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
346:     <span class="ruby-identifier">params</span> = {<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:index</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:posts</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xml</span>}
347:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/posts.xml&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">params</span>))
348:     <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:format</span>] = <span class="ruby-keyword kw">nil</span>
349:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;http://www.basecamphq.com/&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">params</span>))
350:   <span class="ruby-keyword kw">ensure</span>
351:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
352:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005704" class="method">
  <div id="M005704_title" class="title">
    <b>test_one_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005704_source')" id="l_M005704_source">show source</a> ]</p>
  <div id="M005704_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_parameter</span>
286:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/c/a?param=val'</span>,
287:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:param</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'val'</span>)
288:     )
289:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005703" class="method">
  <div id="M005703_title" class="title">
    <b>test_only_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005703_source')" id="l_M005703_source">show source</a> ]</p>
  <div id="M005703_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 266</span>
266:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_only_path</span>
267:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
268:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
269:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">connect</span> <span class="ruby-value str">':controller/:action/:id'</span>
270:     <span class="ruby-keyword kw">end</span>
271: 
272:     <span class="ruby-comment cmt"># We need to create a new class in order to install the new named route.</span>
273:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
274:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
275:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:home_url</span>)
276:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/brave/new/world'</span>,
277:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:url_for</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'brave'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'new'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'world'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
278: 
279:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'alabama'</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'unused'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
280:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;/home/sweet/home/alabama&quot;</span>, <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_path</span>, <span class="ruby-value str">'alabama'</span>))
281:   <span class="ruby-keyword kw">ensure</span>
282:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
283:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005710" class="method">
  <div id="M005710_title" class="title">
    <b>test_path_generation_for_symbol_parameter_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005710_source')" id="l_M005710_source">show source</a> ]</p>
  <div id="M005710_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 330</span>
330:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_path_generation_for_symbol_parameter_keys</span>
331:     <span class="ruby-identifier">assert_generates</span>(<span class="ruby-value str">&quot;/image&quot;</span>, <span class="ruby-identifier">:controller=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:image</span>)
332:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005692" class="method">
  <div id="M005692_title" class="title">
    <b>test_port</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005692_source')" id="l_M005692_source">show source</a> ]</p>
  <div id="M005692_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 157</span>
157:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_port</span>
158:     <span class="ruby-identifier">add_host!</span>
159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com:3000/c/a/i'</span>,
160:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:port</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3000</span>)
161:     )
162:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005693" class="method">
  <div id="M005693_title" class="title">
    <b>test_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005693_source')" id="l_M005693_source">show source</a> ]</p>
  <div id="M005693_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 164</span>
164:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_protocol</span>
165:     <span class="ruby-identifier">add_host!</span>
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
167:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
168:     )
169:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005694" class="method">
  <div id="M005694_title" class="title">
    <b>test_protocol_with_and_without_separator</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005694_source')" id="l_M005694_source">show source</a> ]</p>
  <div id="M005694_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_protocol_with_and_without_separator</span>
172:     <span class="ruby-identifier">add_host!</span>
173:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
174:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
175:     )
176:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/c/a/i'</span>,
177:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https://'</span>)
178:     )
179:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005700" class="method">
  <div id="M005700_title" class="title">
    <b>test_relative_url_root_is_respected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005700_source')" id="l_M005700_source">show source</a> ]</p>
  <div id="M005700_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 215</span>
215:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_url_root_is_respected</span>
216:     <span class="ruby-identifier">orig_relative_url_root</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span>
217:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">'/subdir'</span>
218: 
219:     <span class="ruby-identifier">add_host!</span>
220:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/subdir/c/a/i'</span>,
221:       <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'i'</span>, <span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>)
222:     )
223:   <span class="ruby-keyword kw">ensure</span>
224:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-identifier">orig_relative_url_root</span>
225:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005702" class="method">
  <div id="M005702_title" class="title">
    <b>test_relative_url_root_is_respected_for_named_routes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005702_source')" id="l_M005702_source">show source</a> ]</p>
  <div id="M005702_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 248</span>
248:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_url_root_is_respected_for_named_routes</span>
249:     <span class="ruby-identifier">orig_relative_url_root</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span>
250:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-value str">'/subdir'</span>
251: 
252:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">draw</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">map</span><span class="ruby-operator">|</span>
253:       <span class="ruby-identifier">map</span>.<span class="ruby-identifier">home</span> <span class="ruby-value str">'/home/sweet/home/:user'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'home'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'index'</span>
254:     <span class="ruby-keyword kw">end</span>
255: 
256:     <span class="ruby-identifier">kls</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">include</span> <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">UrlWriter</span> }
257:     <span class="ruby-identifier">controller</span> = <span class="ruby-identifier">kls</span>.<span class="ruby-identifier">new</span>
258: 
259:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://www.basecamphq.com/subdir/home/sweet/home/again'</span>,
260:       <span class="ruby-identifier">controller</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:home_url</span>, <span class="ruby-identifier">:host</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'www.basecamphq.com'</span>, <span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'again'</span>)
261:   <span class="ruby-keyword kw">ensure</span>
262:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">load!</span>
263:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">relative_url_root</span> = <span class="ruby-identifier">orig_relative_url_root</span>
264:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005695" class="method">
  <div id="M005695_title" class="title">
    <b>test_trailing_slash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005695_source')" id="l_M005695_source">show source</a> ]</p>
  <div id="M005695_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 181</span>
181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash</span>
182:     <span class="ruby-identifier">add_host!</span>
183:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>}
184:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'http://www.basecamphq.com/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>) )
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005698" class="method">
  <div id="M005698_title" class="title">
    <b>test_trailing_slash_with_anchor</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005698_source')" id="l_M005698_source">show source</a> ]</p>
  <div id="M005698_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_anchor</span>
203:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:anchor=</span><span class="ruby-operator">&gt;</span> <span class="ruby-value str">'chapter7'</span>}
204:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/#chapter7'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>)
205:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/?query=string#chapter7'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>}))
206:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005697" class="method">
  <div id="M005697_title" class="title">
    <b>test_trailing_slash_with_only_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005697_source')" id="l_M005697_source">show source</a> ]</p>
  <div id="M005697_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_only_path</span>
195:     <span class="ruby-identifier">options</span> = {<span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}
196:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
197:     <span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>({<span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>})
198:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
199:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/foo/bar/33/?query=string'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>,<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}))
200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005699" class="method">
  <div id="M005699_title" class="title">
    <b>test_trailing_slash_with_params</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005699_source')" id="l_M005699_source">show source</a> ]</p>
  <div id="M005699_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_params</span>
209:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cont'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'act'</span>, <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cafe'</span>, <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'link'</span>)
210:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
211:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'cafe'</span> }.<span class="ruby-identifier">to_query</span>
212:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'link'</span> }.<span class="ruby-identifier">to_query</span>
213:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005696" class="method">
  <div id="M005696_title" class="title">
    <b>test_trailing_slash_with_protocol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005696_source')" id="l_M005696_source">show source</a> ]</p>
  <div id="M005696_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_trailing_slash_with_protocol</span>
188:     <span class="ruby-identifier">add_host!</span>
189:     <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:trailing_slash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>,<span class="ruby-identifier">:protocol</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'https'</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'33'</span>}
190:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'https://www.basecamphq.com/foo/bar/33/'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>) )
191:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'https://www.basecamphq.com/foo/bar/33/?query=string'</span>, <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>({<span class="ruby-identifier">:query</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'string'</span>}))
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005705" class="method">
  <div id="M005705_title" class="title">
    <b>test_two_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005705_source')" id="l_M005705_source">show source</a> ]</p>
  <div id="M005705_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/url_rewriter_test.rb, line 291</span>
291:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_two_parameters</span>
292:     <span class="ruby-identifier">url</span> = <span class="ruby-constant">W</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">url_for</span>(<span class="ruby-identifier">:only_path</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:controller</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'c'</span>, <span class="ruby-identifier">:action</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'X1'</span>, <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Y2'</span>)
293:     <span class="ruby-identifier">params</span> = <span class="ruby-identifier">extract_params</span>(<span class="ruby-identifier">url</span>)
294:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">0</span>], { <span class="ruby-identifier">:p1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'X1'</span> }.<span class="ruby-identifier">to_query</span>
295:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">params</span>[<span class="ruby-value">1</span>], { <span class="ruby-identifier">:p2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Y2'</span> }.<span class="ruby-identifier">to_query</span>
296:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>