  <div id="C00000084">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />EagerAssociationTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/associations/eager_test_rb.html');">activerecord/test/cases/associations/eager_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000646&name=assert_equal_after_sort" >assert_equal_after_sort</a></li>
  <li><a href="index.html?a=M000640&name=find_all_ordered" >find_all_ordered</a></li>
  <li><a href="index.html?a=M000658&name=test_conditions_on_join_table_with_include_and_limit" >test_conditions_on_join_table_with_include_and_limit</a></li>
  <li><a href="index.html?a=M000623&name=test_count_eager_with_has_many_and_limit_and_high_offset" >test_count_eager_with_has_many_and_limit_and_high_offset</a></li>
  <li><a href="index.html?a=M000656&name=test_count_with_include" >test_count_with_include</a></li>
  <li><a href="index.html?a=M000575&name=test_duplicate_middle_objects" >test_duplicate_middle_objects</a></li>
  <li><a href="index.html?a=M000587&name=test_eager_association_loading_with_belongs_to" >test_eager_association_loading_with_belongs_to</a></li>
  <li><a href="index.html?a=M000594&name=test_eager_association_loading_with_belongs_to_and_conditions_hash" >test_eager_association_loading_with_belongs_to_and_conditions_hash</a></li>
  <li><a href="index.html?a=M000595&name=test_eager_association_loading_with_belongs_to_and_conditions_string_with_quoted_table_name" >test_eager_association_loading_with_belongs_to_and_conditions_string_with_quoted_table_name</a></li>
  <li><a href="index.html?a=M000593&name=test_eager_association_loading_with_belongs_to_and_conditions_string_with_unquoted_table_name" >test_eager_association_loading_with_belongs_to_and_conditions_string_with_unquoted_table_name</a></li>
  <li><a href="index.html?a=M000586&name=test_eager_association_loading_with_belongs_to_and_foreign_keys" >test_eager_association_loading_with_belongs_to_and_foreign_keys</a></li>
  <li><a href="index.html?a=M000588&name=test_eager_association_loading_with_belongs_to_and_limit" >test_eager_association_loading_with_belongs_to_and_limit</a></li>
  <li><a href="index.html?a=M000589&name=test_eager_association_loading_with_belongs_to_and_limit_and_conditions" >test_eager_association_loading_with_belongs_to_and_limit_and_conditions</a></li>
  <li><a href="index.html?a=M000598&name=test_eager_association_loading_with_belongs_to_and_limit_and_multiple_associations" >test_eager_association_loading_with_belongs_to_and_limit_and_multiple_associations</a></li>
  <li><a href="index.html?a=M000590&name=test_eager_association_loading_with_belongs_to_and_limit_and_offset" >test_eager_association_loading_with_belongs_to_and_limit_and_offset</a></li>
  <li><a href="index.html?a=M000591&name=test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions" >test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions</a></li>
  <li><a href="index.html?a=M000592&name=test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions_array" >test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions_array</a></li>
  <li><a href="index.html?a=M000599&name=test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_multiple_associations" >test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_multiple_associations</a></li>
  <li><a href="index.html?a=M000597&name=test_eager_association_loading_with_belongs_to_and_order_string_with_quoted_table_name" >test_eager_association_loading_with_belongs_to_and_order_string_with_quoted_table_name</a></li>
  <li><a href="index.html?a=M000596&name=test_eager_association_loading_with_belongs_to_and_order_string_with_unquoted_table_name" >test_eager_association_loading_with_belongs_to_and_order_string_with_unquoted_table_name</a></li>
  <li><a href="index.html?a=M000600&name=test_eager_association_loading_with_belongs_to_inferred_foreign_key_from_association_name" >test_eager_association_loading_with_belongs_to_inferred_foreign_key_from_association_name</a></li>
  <li><a href="index.html?a=M000608&name=test_eager_association_loading_with_explicit_join" >test_eager_association_loading_with_explicit_join</a></li>
  <li><a href="index.html?a=M000632&name=test_eager_association_loading_with_habtm" >test_eager_association_loading_with_habtm</a></li>
  <li><a href="index.html?a=M000625&name=test_eager_count_performed_on_a_has_many_association_with_multi_table_conditional" >test_eager_count_performed_on_a_has_many_association_with_multi_table_conditional</a></li>
  <li><a href="index.html?a=M000626&name=test_eager_count_performed_on_a_has_many_through_association_with_multi_table_conditional" >test_eager_count_performed_on_a_has_many_through_association_with_multi_table_conditional</a></li>
  <li><a href="index.html?a=M000636&name=test_eager_habtm_with_association_inheritance" >test_eager_habtm_with_association_inheritance</a></li>
  <li><a href="index.html?a=M000635&name=test_eager_has_many_with_association_inheritance" >test_eager_has_many_with_association_inheritance</a></li>
  <li><a href="index.html?a=M000634&name=test_eager_has_one_with_association_inheritance" >test_eager_has_one_with_association_inheritance</a></li>
  <li><a href="index.html?a=M000601&name=test_eager_load_belongs_to_quotes_table_and_column_names" >test_eager_load_belongs_to_quotes_table_and_column_names</a></li>
  <li><a href="index.html?a=M000607&name=test_eager_load_belongs_to_with_string_keys" >test_eager_load_belongs_to_with_string_keys</a></li>
  <li><a href="index.html?a=M000603&name=test_eager_load_has_many_quotes_table_and_column_names" >test_eager_load_has_many_quotes_table_and_column_names</a></li>
  <li><a href="index.html?a=M000604&name=test_eager_load_has_many_through_quotes_table_and_column_names" >test_eager_load_has_many_through_quotes_table_and_column_names</a></li>
  <li><a href="index.html?a=M000606&name=test_eager_load_has_many_through_with_string_keys" >test_eager_load_has_many_through_with_string_keys</a></li>
  <li><a href="index.html?a=M000605&name=test_eager_load_has_many_with_string_keys" >test_eager_load_has_many_with_string_keys</a></li>
  <li><a href="index.html?a=M000602&name=test_eager_load_has_one_quotes_table_and_column_names" >test_eager_load_has_one_quotes_table_and_column_names</a></li>
  <li><a href="index.html?a=M000664&name=test_eager_loading_with_conditions_on_join_model_preloads" >test_eager_loading_with_conditions_on_join_model_preloads</a></li>
  <li><a href="index.html?a=M000661&name=test_eager_loading_with_conditions_on_joined_table_preloads" >test_eager_loading_with_conditions_on_joined_table_preloads</a></li>
  <li><a href="index.html?a=M000662&name=test_eager_loading_with_conditions_on_string_joined_table_preloads" >test_eager_loading_with_conditions_on_string_joined_table_preloads</a></li>
  <li><a href="index.html?a=M000660&name=test_eager_loading_with_order_on_joined_table_preloads" >test_eager_loading_with_order_on_joined_table_preloads</a></li>
  <li><a href="index.html?a=M000663&name=test_eager_loading_with_select_on_joined_table_preloads" >test_eager_loading_with_select_on_joined_table_preloads</a></li>
  <li><a href="index.html?a=M000650&name=test_eager_with_floating_point_numbers" >test_eager_with_floating_point_numbers</a></li>
  <li><a href="index.html?a=M000627&name=test_eager_with_has_and_belongs_to_many_and_limit" >test_eager_with_has_and_belongs_to_many_and_limit</a></li>
  <li><a href="index.html?a=M000616&name=test_eager_with_has_many_and_limit" >test_eager_with_has_many_and_limit</a></li>
  <li><a href="index.html?a=M000617&name=test_eager_with_has_many_and_limit_and_conditions" >test_eager_with_has_many_and_limit_and_conditions</a></li>
  <li><a href="index.html?a=M000618&name=test_eager_with_has_many_and_limit_and_conditions_array" >test_eager_with_has_many_and_limit_and_conditions_array</a></li>
  <li><a href="index.html?a=M000619&name=test_eager_with_has_many_and_limit_and_conditions_array_on_the_eagers" >test_eager_with_has_many_and_limit_and_conditions_array_on_the_eagers</a></li>
  <li><a href="index.html?a=M000628&name=test_eager_with_has_many_and_limit_and_conditions_on_the_eagers" >test_eager_with_has_many_and_limit_and_conditions_on_the_eagers</a></li>
  <li><a href="index.html?a=M000620&name=test_eager_with_has_many_and_limit_and_high_offset" >test_eager_with_has_many_and_limit_and_high_offset</a></li>
  <li><a href="index.html?a=M000621&name=test_eager_with_has_many_and_limit_and_high_offset_and_multiple_array_conditions" >test_eager_with_has_many_and_limit_and_high_offset_and_multiple_array_conditions</a></li>
  <li><a href="index.html?a=M000622&name=test_eager_with_has_many_and_limit_and_high_offset_and_multiple_hash_conditions" >test_eager_with_has_many_and_limit_and_high_offset_and_multiple_hash_conditions</a></li>
  <li><a href="index.html?a=M000630&name=test_eager_with_has_many_and_limit_and_scoped_and_explicit_conditions_on_the_eagers" >test_eager_with_has_many_and_limit_and_scoped_and_explicit_conditions_on_the_eagers</a></li>
  <li><a href="index.html?a=M000629&name=test_eager_with_has_many_and_limit_and_scoped_conditions_on_the_eagers" >test_eager_with_has_many_and_limit_and_scoped_conditions_on_the_eagers</a></li>
  <li><a href="index.html?a=M000624&name=test_eager_with_has_many_and_limit_with_no_results" >test_eager_with_has_many_and_limit_with_no_results</a></li>
  <li><a href="index.html?a=M000609&name=test_eager_with_has_many_through" >test_eager_with_has_many_through</a></li>
  <li><a href="index.html?a=M000610&name=test_eager_with_has_many_through_a_belongs_to_association" >test_eager_with_has_many_through_a_belongs_to_association</a></li>
  <li><a href="index.html?a=M000611&name=test_eager_with_has_many_through_an_sti_join_model" >test_eager_with_has_many_through_an_sti_join_model</a></li>
  <li><a href="index.html?a=M000612&name=test_eager_with_has_many_through_an_sti_join_model_with_conditions_on_both" >test_eager_with_has_many_through_an_sti_join_model_with_conditions_on_both</a></li>
  <li><a href="index.html?a=M000613&name=test_eager_with_has_many_through_join_model_with_conditions" >test_eager_with_has_many_through_join_model_with_conditions</a></li>
  <li><a href="index.html?a=M000614&name=test_eager_with_has_many_through_join_model_with_conditions_on_top_level" >test_eager_with_has_many_through_join_model_with_conditions_on_top_level</a></li>
  <li><a href="index.html?a=M000615&name=test_eager_with_has_many_through_join_model_with_include" >test_eager_with_has_many_through_join_model_with_include</a></li>
  <li><a href="index.html?a=M000637&name=test_eager_with_has_one_dependent_does_not_destroy_dependent" >test_eager_with_has_one_dependent_does_not_destroy_dependent</a></li>
  <li><a href="index.html?a=M000633&name=test_eager_with_inheritance" >test_eager_with_inheritance</a></li>
  <li><a href="index.html?a=M000639&name=test_eager_with_invalid_association_reference" >test_eager_with_invalid_association_reference</a></li>
  <li><a href="index.html?a=M000638&name=test_eager_with_multi_table_conditional_properly_counts_the_records_when_using_size" >test_eager_with_multi_table_conditional_properly_counts_the_records_when_using_size</a></li>
  <li><a href="index.html?a=M000648&name=test_eager_with_multiple_associations_with_same_table_belongs_to" >test_eager_with_multiple_associations_with_same_table_belongs_to</a></li>
  <li><a href="index.html?a=M000645&name=test_eager_with_multiple_associations_with_same_table_has_many_and_habtm" >test_eager_with_multiple_associations_with_same_table_has_many_and_habtm</a></li>
  <li><a href="index.html?a=M000647&name=test_eager_with_multiple_associations_with_same_table_has_one" >test_eager_with_multiple_associations_with_same_table_has_one</a></li>
  <li><a href="index.html?a=M000631&name=test_eager_with_scoped_order_using_association_limiting_without_explicit_scope" >test_eager_with_scoped_order_using_association_limiting_without_explicit_scope</a></li>
  <li><a href="index.html?a=M000649&name=test_eager_with_valid_association_as_string_not_symbol" >test_eager_with_valid_association_as_string_not_symbol</a></li>
  <li><a href="index.html?a=M000580&name=test_finding_with_includes_on_belongs_to_association_with_same_include_includes_only_once" >test_finding_with_includes_on_belongs_to_association_with_same_include_includes_only_once</a></li>
  <li><a href="index.html?a=M000578&name=test_finding_with_includes_on_has_many_association_with_same_include_includes_only_once" >test_finding_with_includes_on_has_many_association_with_same_include_includes_only_once</a></li>
  <li><a href="index.html?a=M000579&name=test_finding_with_includes_on_has_one_assocation_with_same_include_includes_only_once" >test_finding_with_includes_on_has_one_assocation_with_same_include_includes_only_once</a></li>
  <li><a href="index.html?a=M000581&name=test_finding_with_includes_on_null_belongs_to_association_with_same_include_includes_only_once" >test_finding_with_includes_on_null_belongs_to_association_with_same_include_includes_only_once</a></li>
  <li><a href="index.html?a=M000668&name=test_include_has_many_using_primary_key" >test_include_has_many_using_primary_key</a></li>
  <li><a href="index.html?a=M000670&name=test_include_has_one_using_primary_key" >test_include_has_one_using_primary_key</a></li>
  <li><a href="index.html?a=M000576&name=test_including_duplicate_objects_from_belongs_to" >test_including_duplicate_objects_from_belongs_to</a></li>
  <li><a href="index.html?a=M000577&name=test_including_duplicate_objects_from_has_many" >test_including_duplicate_objects_from_has_many</a></li>
  <li><a href="index.html?a=M000642&name=test_limited_eager_with_multiple_order_columns" >test_limited_eager_with_multiple_order_columns</a></li>
  <li><a href="index.html?a=M000641&name=test_limited_eager_with_order" >test_limited_eager_with_order</a></li>
  <li><a href="index.html?a=M000657&name=test_load_with_sti_sharing_association" >test_load_with_sti_sharing_association</a></li>
  <li><a href="index.html?a=M000571&name=test_loading_conditions_with_or" >test_loading_conditions_with_or</a></li>
  <li><a href="index.html?a=M000582&name=test_loading_from_an_association" >test_loading_from_an_association</a></li>
  <li><a href="index.html?a=M000583&name=test_loading_from_an_association_that_has_a_hash_of_conditions" >test_loading_from_an_association_that_has_a_hash_of_conditions</a></li>
  <li><a href="index.html?a=M000574&name=test_loading_with_multiple_associations" >test_loading_with_multiple_associations</a></li>
  <li><a href="index.html?a=M000584&name=test_loading_with_no_associations" >test_loading_with_no_associations</a></li>
  <li><a href="index.html?a=M000569&name=test_loading_with_one_association" >test_loading_with_one_association</a></li>
  <li><a href="index.html?a=M000570&name=test_loading_with_one_association_with_non_preload" >test_loading_with_one_association_with_non_preload</a></li>
  <li><a href="index.html?a=M000585&name=test_nested_loading_with_no_associations" >test_nested_loading_with_no_associations</a></li>
  <li><a href="index.html?a=M000659&name=test_order_on_join_table_with_include_and_limit" >test_order_on_join_table_with_include_and_limit</a></li>
  <li><a href="index.html?a=M000644&name=test_polymorphic_type_condition" >test_polymorphic_type_condition</a></li>
  <li><a href="index.html?a=M000651&name=test_preconfigured_includes_with_belongs_to" >test_preconfigured_includes_with_belongs_to</a></li>
  <li><a href="index.html?a=M000654&name=test_preconfigured_includes_with_habtm" >test_preconfigured_includes_with_habtm</a></li>
  <li><a href="index.html?a=M000653&name=test_preconfigured_includes_with_has_many" >test_preconfigured_includes_with_has_many</a></li>
  <li><a href="index.html?a=M000655&name=test_preconfigured_includes_with_has_many_and_habtm" >test_preconfigured_includes_with_has_many_and_habtm</a></li>
  <li><a href="index.html?a=M000652&name=test_preconfigured_includes_with_has_one" >test_preconfigured_includes_with_has_one</a></li>
  <li><a href="index.html?a=M000665&name=test_preload_belongs_to_uses_exclusive_scope" >test_preload_belongs_to_uses_exclusive_scope</a></li>
  <li><a href="index.html?a=M000666&name=test_preload_has_many_uses_exclusive_scope" >test_preload_has_many_uses_exclusive_scope</a></li>
  <li><a href="index.html?a=M000667&name=test_preload_has_many_using_primary_key" >test_preload_has_many_using_primary_key</a></li>
  <li><a href="index.html?a=M000669&name=test_preload_has_one_using_primary_key" >test_preload_has_one_using_primary_key</a></li>
  <li><a href="index.html?a=M000643&name=test_preload_with_interpolation" >test_preload_with_interpolation</a></li>
  <li><a href="index.html?a=M000572&name=test_with_ordering" >test_with_ordering</a></li>
  <li><a href="index.html?a=M000573&name=test_with_two_tables_in_from_without_getting_double_quoted" >test_with_two_tables_in_from_without_getting_double_quoted</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000646" class="method">
  <div id="M000646_title" class="title">
    <b>assert_equal_after_sort</b>(item1, item2, item3 = nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000646_source')" id="l_M000646_source">show source</a> ]</p>
  <div id="M000646_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 605</span>
605:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_equal_after_sort</span>(<span class="ruby-identifier">item1</span>, <span class="ruby-identifier">item2</span>, <span class="ruby-identifier">item3</span> = <span class="ruby-keyword kw">nil</span>)
606:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">item1</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}, <span class="ruby-identifier">item2</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>})
607:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">item3</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}, <span class="ruby-identifier">item2</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item3</span>
608:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000640" class="method">
  <div id="M000640_title" class="title">
    <b>find_all_ordered</b>(className, include=nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000640_source')" id="l_M000640_source">show source</a> ]</p>
  <div id="M000640_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 578</span>
578:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-identifier">className</span>, <span class="ruby-identifier">include</span>=<span class="ruby-keyword kw">nil</span>)
579:     <span class="ruby-identifier">className</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order=</span><span class="ruby-operator">&gt;</span><span class="ruby-node">&quot;#{className.table_name}.#{className.primary_key}&quot;</span>, <span class="ruby-identifier">:include=</span><span class="ruby-operator">&gt;</span><span class="ruby-identifier">include</span>)
580:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000658" class="method">
  <div id="M000658_title" class="title">
    <b>test_conditions_on_join_table_with_include_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000658_source')" id="l_M000658_source">show source</a> ]</p>
  <div id="M000658_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_conditions_on_join_table_with_include_and_limit</span>
715:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers_projects.access_level = 1'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>).<span class="ruby-identifier">size</span>
716:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000623" class="method">
  <div id="M000623_title" class="title">
    <b>test_count_eager_with_has_many_and_limit_and_high_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000623_source')" id="l_M000623_source">show source</a> ]</p>
  <div id="M000623_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 422</span>
422:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_eager_with_has_many_and_limit_and_high_offset</span>
423:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;authors.name = ?&quot;</span>, <span class="ruby-value str">'David'</span> ])
424:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>
425:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000656" class="method">
  <div id="M000656_title" class="title">
    <b>test_count_with_include</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000656_source')" id="l_M000656_source">show source</a> ]</p>
  <div id="M000656_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 698</span>
698:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_with_include</span>
699:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:SybaseAdapter</span>)
700:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_comments</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;len(comments.body) &gt; 15&quot;</span>)
701:     <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OpenBaseAdapter</span>)
702:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_comments</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;length(FETCHBLOB(comments.body)) &gt; 15&quot;</span>)
703:     <span class="ruby-keyword kw">else</span>
704:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_comments</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;length(comments.body) &gt; 15&quot;</span>)
705:     <span class="ruby-keyword kw">end</span>
706:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000575" class="method">
  <div id="M000575_title" class="title">
    <b>test_duplicate_middle_objects</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000575_source')" id="l_M000575_source">show source</a> ]</p>
  <div id="M000575_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 82</span>
82:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_duplicate_middle_objects</span>
83:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post_id = 1'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:post</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>]
84:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
85:       <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">author</span>.<span class="ruby-identifier">name</span>}
86:     <span class="ruby-keyword kw">end</span>
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000587" class="method">
  <div id="M000587_title" class="title">
    <b>test_eager_association_loading_with_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000587_source')" id="l_M000587_source">show source</a> ]</p>
  <div id="M000587_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to</span>
183:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>)
184:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">10</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
185:     <span class="ruby-identifier">titles</span> = <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span> }
186:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">titles</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">title</span>)
187:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">titles</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_post_and_comments</span>).<span class="ruby-identifier">title</span>)
188:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000594" class="method">
  <div id="M000594_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_conditions_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000594_source')" id="l_M000594_source">show source</a> ]</p>
  <div id="M000594_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 226</span>
226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_conditions_hash</span>
227:     <span class="ruby-identifier">comments</span> = []
228:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
229:       <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:posts</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">4</span>}}, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
230:     <span class="ruby-keyword kw">end</span>
231:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
232:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">5</span>,<span class="ruby-value">6</span>,<span class="ruby-value">7</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
233:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
234:       <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000595" class="method">
  <div id="M000595_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_conditions_string_with_quoted_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000595_source')" id="l_M000595_source">show source</a> ]</p>
  <div id="M000595_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 238</span>
238:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_conditions_string_with_quoted_table_name</span>
239:     <span class="ruby-identifier">quoted_posts_id</span>= <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'posts'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_column_name</span>(<span class="ruby-value str">'id'</span>)
240:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
241:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-node">&quot;#{quoted_posts_id} = ?&quot;</span>,<span class="ruby-value">4</span>])
242:     <span class="ruby-keyword kw">end</span>
243:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000593" class="method">
  <div id="M000593_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_conditions_string_with_unquoted_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000593_source')" id="l_M000593_source">show source</a> ]</p>
  <div id="M000593_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 220</span>
220:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_conditions_string_with_unquoted_table_name</span>
221:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
222:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'posts.id = ?'</span>,<span class="ruby-value">4</span>])
223:     <span class="ruby-keyword kw">end</span>
224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000586" class="method">
  <div id="M000586_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_foreign_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000586_source')" id="l_M000586_source">show source</a> ]</p>
  <div id="M000586_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 177</span>
177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_foreign_keys</span>
178:     <span class="ruby-identifier">pets</span> = <span class="ruby-constant">Pet</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:owner</span>)
179:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">pets</span>.<span class="ruby-identifier">length</span>
180:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000588" class="method">
  <div id="M000588_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000588_source')" id="l_M000588_source">show source</a> ]</p>
  <div id="M000588_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 190</span>
190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit</span>
191:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
192:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
193:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>,<span class="ruby-value">5</span>,<span class="ruby-value">6</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
194:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000589" class="method">
  <div id="M000589_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000589_source')" id="l_M000589_source">show source</a> ]</p>
  <div id="M000589_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_conditions</span>
197:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post_id = 4'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
198:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
199:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">5</span>,<span class="ruby-value">6</span>,<span class="ruby-value">7</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
200:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000598" class="method">
  <div id="M000598_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_multiple_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000598_source')" id="l_M000598_source">show source</a> ]</p>
  <div id="M000598_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_multiple_associations</span>
259:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:very_special_comment</span>], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
260:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>
261:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> }
262:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000590" class="method">
  <div id="M000590_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000590_source')" id="l_M000590_source">show source</a> ]</p>
  <div id="M000590_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 202</span>
202:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_offset</span>
203:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
204:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
205:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">3</span>,<span class="ruby-value">5</span>,<span class="ruby-value">6</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
206:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000591" class="method">
  <div id="M000591_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000591_source')" id="l_M000591_source">show source</a> ]</p>
  <div id="M000591_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions</span>
209:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post_id = 4'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
210:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
211:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">6</span>,<span class="ruby-value">7</span>,<span class="ruby-value">8</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
212:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000592" class="method">
  <div id="M000592_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000592_source')" id="l_M000592_source">show source</a> ]</p>
  <div id="M000592_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 214</span>
214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_conditions_array</span>
215:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'post_id = ?'</span>,<span class="ruby-value">4</span>], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
216:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>
217:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">6</span>,<span class="ruby-value">7</span>,<span class="ruby-value">8</span>], <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">id</span> }
218:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000599" class="method">
  <div id="M000599_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_multiple_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000599_source')" id="l_M000599_source">show source</a> ]</p>
  <div id="M000599_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 264</span>
264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_limit_and_offset_and_multiple_associations</span>
265:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:very_special_comment</span>], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
266:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>
267:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">2</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> }
268:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000597" class="method">
  <div id="M000597_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_order_string_with_quoted_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000597_source')" id="l_M000597_source">show source</a> ]</p>
  <div id="M000597_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 251</span>
251:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_order_string_with_quoted_table_name</span>
252:     <span class="ruby-identifier">quoted_posts_id</span>= <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_table_name</span>(<span class="ruby-value str">'posts'</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'.'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote_column_name</span>(<span class="ruby-value str">'id'</span>)
253:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
254:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">quoted_posts_id</span>)
255:     <span class="ruby-keyword kw">end</span>
256:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000596" class="method">
  <div id="M000596_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_and_order_string_with_unquoted_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000596_source')" id="l_M000596_source">show source</a> ]</p>
  <div id="M000596_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_and_order_string_with_unquoted_table_name</span>
246:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
247:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
248:     <span class="ruby-keyword kw">end</span>
249:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000600" class="method">
  <div id="M000600_title" class="title">
    <b>test_eager_association_loading_with_belongs_to_inferred_foreign_key_from_association_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000600_source')" id="l_M000600_source">show source</a> ]</p>
  <div id="M000600_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_belongs_to_inferred_foreign_key_from_association_name</span>
271:     <span class="ruby-identifier">author_favorite</span> = <span class="ruby-constant">AuthorFavorite</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:favorite_author</span>)
272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">author_favorite</span>.<span class="ruby-identifier">favorite_author</span> }
273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000608" class="method">
  <div id="M000608_title" class="title">
    <b>test_eager_association_loading_with_explicit_join</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000608_source')" id="l_M000608_source">show source</a> ]</p>
  <div id="M000608_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 317</span>
317:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_explicit_join</span>
318:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;INNER JOIN authors ON posts.author_id = authors.id AND authors.name = 'Mary'&quot;</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'author_id'</span>)
319:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>
320:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000632" class="method">
  <div id="M000632_title" class="title">
    <b>test_eager_association_loading_with_habtm</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000632_source')" id="l_M000632_source">show source</a> ]</p>
  <div id="M000632_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 515</span>
515:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_association_loading_with_habtm</span>
516:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:categories</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
517:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
518:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
519:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
520:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>))
521:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>))
522:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000625" class="method">
  <div id="M000625_title" class="title">
    <b>test_eager_count_performed_on_a_has_many_association_with_multi_table_conditional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000625_source')" id="l_M000625_source">show source</a> ]</p>
  <div id="M000625_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 432</span>
432:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_count_performed_on_a_has_many_association_with_multi_table_conditional</span>
433:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
434:     <span class="ruby-identifier">author_posts_without_comments</span> = <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">blank?</span> }
435:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author_posts_without_comments</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id is null'</span>)
436:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000626" class="method">
  <div id="M000626_title" class="title">
    <b>test_eager_count_performed_on_a_has_many_through_association_with_multi_table_conditional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000626_source')" id="l_M000626_source">show source</a> ]</p>
  <div id="M000626_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 438</span>
438:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_count_performed_on_a_has_many_through_association_with_multi_table_conditional</span>
439:     <span class="ruby-identifier">person</span> = <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>)
440:     <span class="ruby-identifier">person_posts_without_comments</span> = <span class="ruby-identifier">person</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">blank?</span> }
441:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">person_posts_without_comments</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">person</span>.<span class="ruby-identifier">posts_with_no_comments</span>.<span class="ruby-identifier">count</span>
442:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000636" class="method">
  <div id="M000636_title" class="title">
    <b>test_eager_habtm_with_association_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000636_source')" id="l_M000636_source">show source</a> ]</p>
  <div id="M000636_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 540</span>
540:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_habtm_with_association_inheritance</span>
541:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">6</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:special_categories</span> ])
542:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_categories</span>.<span class="ruby-identifier">size</span>
543:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_categories</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">special_category</span><span class="ruby-operator">|</span>
544:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;SpecialCategory&quot;</span>, <span class="ruby-identifier">special_category</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>
545:     <span class="ruby-keyword kw">end</span>
546:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000635" class="method">
  <div id="M000635_title" class="title">
    <b>test_eager_has_many_with_association_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000635_source')" id="l_M000635_source">show source</a> ]</p>
  <div id="M000635_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 533</span>
533:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_has_many_with_association_inheritance</span>
534:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">4</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:special_comments</span> ])
535:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">special_comments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">special_comment</span><span class="ruby-operator">|</span>
536:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;SpecialComment&quot;</span>, <span class="ruby-identifier">special_comment</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>
537:     <span class="ruby-keyword kw">end</span>
538:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000634" class="method">
  <div id="M000634_title" class="title">
    <b>test_eager_has_one_with_association_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000634_source')" id="l_M000634_source">show source</a> ]</p>
  <div id="M000634_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 528</span>
528:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_has_one_with_association_inheritance</span>
529:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">4</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:very_special_comment</span> ])
530:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;VerySpecialComment&quot;</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">very_special_comment</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">to_s</span>
531:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000601" class="method">
  <div id="M000601_title" class="title">
    <b>test_eager_load_belongs_to_quotes_table_and_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000601_source')" id="l_M000601_source">show source</a> ]</p>
  <div id="M000601_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 275</span>
275:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_belongs_to_quotes_table_and_column_names</span>
276:     <span class="ruby-identifier">job</span> = <span class="ruby-constant">Job</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">jobs</span>(<span class="ruby-identifier">:unicyclist</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:ideal_reference</span>
277:     <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_unicyclist</span>)
278:     <span class="ruby-identifier">assert_no_queries</span>{ <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_unicyclist</span>), <span class="ruby-identifier">job</span>.<span class="ruby-identifier">ideal_reference</span>}
279:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000607" class="method">
  <div id="M000607_title" class="title">
    <b>test_eager_load_belongs_to_with_string_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000607_source')" id="l_M000607_source">show source</a> ]</p>
  <div id="M000607_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 311</span>
311:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_belongs_to_with_string_keys</span>
312:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-identifier">subscribers</span>(<span class="ruby-identifier">:second</span>)
313:     <span class="ruby-identifier">subscription</span> = <span class="ruby-constant">Subscription</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">subscriptions</span>(<span class="ruby-identifier">:webster_awdr</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:subscriber</span>)
314:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">subscriber</span>, <span class="ruby-identifier">subscription</span>.<span class="ruby-identifier">subscriber</span>
315:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000603" class="method">
  <div id="M000603_title" class="title">
    <b>test_eager_load_has_many_quotes_table_and_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000603_source')" id="l_M000603_source">show source</a> ]</p>
  <div id="M000603_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 287</span>
287:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_quotes_table_and_column_names</span>
288:     <span class="ruby-identifier">michael</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>), <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:references</span>)
289:     <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_magician</span>,<span class="ruby-identifier">:michael_unicyclist</span>)
290:     <span class="ruby-identifier">assert_no_queries</span>{ <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_magician</span>,<span class="ruby-identifier">:michael_unicyclist</span>), <span class="ruby-identifier">michael</span>.<span class="ruby-identifier">references</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>) }
291:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000604" class="method">
  <div id="M000604_title" class="title">
    <b>test_eager_load_has_many_through_quotes_table_and_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000604_source')" id="l_M000604_source">show source</a> ]</p>
  <div id="M000604_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 293</span>
293:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_through_quotes_table_and_column_names</span>
294:     <span class="ruby-identifier">michael</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>), <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:jobs</span>)
295:     <span class="ruby-identifier">jobs</span>(<span class="ruby-identifier">:magician</span>, <span class="ruby-identifier">:unicyclist</span>)
296:     <span class="ruby-identifier">assert_no_queries</span>{ <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">jobs</span>(<span class="ruby-identifier">:unicyclist</span>, <span class="ruby-identifier">:magician</span>), <span class="ruby-identifier">michael</span>.<span class="ruby-identifier">jobs</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>) }
297:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000606" class="method">
  <div id="M000606_title" class="title">
    <b>test_eager_load_has_many_through_with_string_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000606_source')" id="l_M000606_source">show source</a> ]</p>
  <div id="M000606_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 305</span>
305:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_through_with_string_keys</span>
306:     <span class="ruby-identifier">books</span> = <span class="ruby-identifier">books</span>(<span class="ruby-identifier">:awdr</span>, <span class="ruby-identifier">:rfr</span>)
307:     <span class="ruby-identifier">subscriber</span> = <span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">subscribers</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:books</span>)
308:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">books</span>, <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">books</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
309:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000605" class="method">
  <div id="M000605_title" class="title">
    <b>test_eager_load_has_many_with_string_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000605_source')" id="l_M000605_source">show source</a> ]</p>
  <div id="M000605_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 299</span>
299:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_with_string_keys</span>
300:     <span class="ruby-identifier">subscriptions</span> = <span class="ruby-identifier">subscriptions</span>(<span class="ruby-identifier">:webster_awdr</span>, <span class="ruby-identifier">:webster_rfr</span>)
301:     <span class="ruby-identifier">subscriber</span> =<span class="ruby-constant">Subscriber</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">subscribers</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:subscriptions</span>)
302:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">subscriptions</span>, <span class="ruby-identifier">subscriber</span>.<span class="ruby-identifier">subscriptions</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
303:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000602" class="method">
  <div id="M000602_title" class="title">
    <b>test_eager_load_has_one_quotes_table_and_column_names</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000602_source')" id="l_M000602_source">show source</a> ]</p>
  <div id="M000602_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 281</span>
281:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_one_quotes_table_and_column_names</span>
282:     <span class="ruby-identifier">michael</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>), <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:favourite_reference</span>)
283:     <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_unicyclist</span>)
284:     <span class="ruby-identifier">assert_no_queries</span>{ <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">references</span>(<span class="ruby-identifier">:michael_unicyclist</span>), <span class="ruby-identifier">michael</span>.<span class="ruby-identifier">favourite_reference</span>}
285:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000664" class="method">
  <div id="M000664_title" class="title">
    <b>test_eager_loading_with_conditions_on_join_model_preloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000664_source')" id="l_M000664_source">show source</a> ]</p>
  <div id="M000664_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 778</span>
778:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_loading_with_conditions_on_join_model_preloads</span>
779:     <span class="ruby-identifier">authors</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
780:       <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.title like 'Welcome%'&quot;</span>)
781:     <span class="ruby-keyword kw">end</span>
782:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">authors</span>[<span class="ruby-value">0</span>]
783:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author_addresses</span>(<span class="ruby-identifier">:david_address</span>), <span class="ruby-identifier">authors</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author_address</span>
784:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000661" class="method">
  <div id="M000661_title" class="title">
    <b>test_eager_loading_with_conditions_on_joined_table_preloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000661_source')" id="l_M000661_source">show source</a> ]</p>
  <div id="M000661_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 730</span>
730:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_loading_with_conditions_on_joined_table_preloads</span>
731:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
732:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'distinct posts.*'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;comments.body like 'Thank you%'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
733:     <span class="ruby-keyword kw">end</span>
734:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)], <span class="ruby-identifier">posts</span>
735:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author</span>}
736: 
737:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
738:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'distinct posts.*'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;comments.body like 'Thank you%'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
739:     <span class="ruby-keyword kw">end</span>
740:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)], <span class="ruby-identifier">posts</span>
741:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author</span>}
742: 
743:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
744:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:taggings</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tag</span>}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;tags.name = 'General'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
745:     <span class="ruby-keyword kw">end</span>
746:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>), <span class="ruby-identifier">posts</span>
747: 
748:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
749:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:taggings</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:tag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>}}, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;taggings_tags.super_tag_id=2&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
750:     <span class="ruby-keyword kw">end</span>
751:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>), <span class="ruby-identifier">posts</span>
752: 
753:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000662" class="method">
  <div id="M000662_title" class="title">
    <b>test_eager_loading_with_conditions_on_string_joined_table_preloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000662_source')" id="l_M000662_source">show source</a> ]</p>
  <div id="M000662_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 755</span>
755:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_loading_with_conditions_on_string_joined_table_preloads</span>
756:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
757:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'distinct posts.*'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;INNER JOIN comments on comments.post_id = posts.id&quot;</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;comments.body like 'Thank you%'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
758:     <span class="ruby-keyword kw">end</span>
759:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)], <span class="ruby-identifier">posts</span>
760:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author</span>}
761: 
762:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
763:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'distinct posts.*'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;INNER JOIN comments on comments.post_id = posts.id&quot;</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;comments.body like 'Thank you%'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
764:     <span class="ruby-keyword kw">end</span>
765:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)], <span class="ruby-identifier">posts</span>
766:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author</span>}
767: 
768:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000660" class="method">
  <div id="M000660_title" class="title">
    <b>test_eager_loading_with_order_on_joined_table_preloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000660_source')" id="l_M000660_source">show source</a> ]</p>
  <div id="M000660_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 722</span>
722:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_loading_with_order_on_joined_table_preloads</span>
723:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
724:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id DESC'</span>)
725:     <span class="ruby-keyword kw">end</span>
726:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:eager_other</span>), <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>]
727:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author</span>}
728:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000663" class="method">
  <div id="M000663_title" class="title">
    <b>test_eager_loading_with_select_on_joined_table_preloads</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000663_source')" id="l_M000663_source">show source</a> ]</p>
  <div id="M000663_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 770</span>
770:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_loading_with_select_on_joined_table_preloads</span>
771:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
772:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.*, authors.name as author_name'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
773:     <span class="ruby-keyword kw">end</span>
774:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'David'</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author_name</span>
775:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">comments</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comments</span>}
776:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000650" class="method">
  <div id="M000650_title" class="title">
    <b>test_eager_with_floating_point_numbers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000650_source')" id="l_M000650_source">show source</a> ]</p>
  <div id="M000650_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 653</span>
653:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_floating_point_numbers</span>
654:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
655:       <span class="ruby-comment cmt"># Before changes, the floating point numbers will be interpreted as table names and will cause this to run in one query</span>
656:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;123.456 = 123.456&quot;</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>
657:     <span class="ruby-keyword kw">end</span>
658:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000627" class="method">
  <div id="M000627_title" class="title">
    <b>test_eager_with_has_and_belongs_to_many_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000627_source')" id="l_M000627_source">show source</a> ]</p>
  <div id="M000627_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 444</span>
444:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_and_belongs_to_many_and_limit</span>
445:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:categories</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>)
446:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
447:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
448:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
449:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
450:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>))
451:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>))
452:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000616" class="method">
  <div id="M000616_title" class="title">
    <b>test_eager_with_has_many_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000616_source')" id="l_M000616_source">show source</a> ]</p>
  <div id="M000616_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 367</span>
367:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit</span>
368:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id asc'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
369:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
370:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, <span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span> }
371:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000617" class="method">
  <div id="M000617_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000617_source')" id="l_M000617_source">show source</a> ]</p>
  <div id="M000617_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 373</span>
373:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_conditions</span>
374:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OpenBaseAdapter</span>)
375:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;FETCHBLOB(posts.body) = 'hello'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
376:     <span class="ruby-keyword kw">else</span>
377:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.body = 'hello'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
378:     <span class="ruby-keyword kw">end</span>
379:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
380:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">4</span>,<span class="ruby-value">5</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> }
381:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000618" class="method">
  <div id="M000618_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_conditions_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000618_source')" id="l_M000618_source">show source</a> ]</p>
  <div id="M000618_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_conditions_array</span>
384:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">current_adapter?</span>(<span class="ruby-identifier">:OpenBaseAdapter</span>)
385:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;FETCHBLOB(posts.body) = ?&quot;</span>, <span class="ruby-value str">'hello'</span> ], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
386:     <span class="ruby-keyword kw">else</span>
387:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;posts.body = ?&quot;</span>, <span class="ruby-value str">'hello'</span> ], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
388:     <span class="ruby-keyword kw">end</span>
389:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
390:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">4</span>,<span class="ruby-value">5</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> }
391:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000619" class="method">
  <div id="M000619_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_conditions_array_on_the_eagers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000619_source')" id="l_M000619_source">show source</a> ]</p>
  <div id="M000619_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 393</span>
393:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_conditions_array_on_the_eagers</span>
394:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;authors.name = ?&quot;</span>, <span class="ruby-value str">'David'</span> ])
395:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
396: 
397:     <span class="ruby-identifier">count</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;authors.name = ?&quot;</span>, <span class="ruby-value str">'David'</span> ])
398:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
399:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000628" class="method">
  <div id="M000628_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_conditions_on_the_eagers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000628_source')" id="l_M000628_source">show source</a> ]</p>
  <div id="M000628_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 454</span>
454:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_conditions_on_the_eagers</span>
455:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
456:       <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>,
457:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment'&quot;</span>,
458:       <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>
459:     )
460:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
461: 
462:     <span class="ruby-identifier">count</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(
463:       <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:author</span> ],
464:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;authors.name = 'David' AND (comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment')&quot;</span>,
465:       <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>
466:     )
467:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
468:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000620" class="method">
  <div id="M000620_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_high_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000620_source')" id="l_M000620_source">show source</a> ]</p>
  <div id="M000620_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 401</span>
401:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_high_offset</span>
402:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;authors.name = ?&quot;</span>, <span class="ruby-value str">'David'</span> ])
403:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
404:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000621" class="method">
  <div id="M000621_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_high_offset_and_multiple_array_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000621_source')" id="l_M000621_source">show source</a> ]</p>
  <div id="M000621_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 406</span>
406:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_high_offset_and_multiple_array_conditions</span>
407:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
408:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>,
409:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">&quot;authors.name = ? and comments.body = ?&quot;</span>, <span class="ruby-value str">'David'</span>, <span class="ruby-value str">'go crazy'</span> ])
410:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
411:     <span class="ruby-keyword kw">end</span>
412:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000622" class="method">
  <div id="M000622_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_high_offset_and_multiple_hash_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000622_source')" id="l_M000622_source">show source</a> ]</p>
  <div id="M000622_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 414</span>
414:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_high_offset_and_multiple_hash_conditions</span>
415:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
416:       <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">10</span>,
417:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">'authors.name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'David'</span>, <span class="ruby-value str">'comments.body'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'go crazy'</span> })
418:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
419:     <span class="ruby-keyword kw">end</span>
420:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000630" class="method">
  <div id="M000630_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_scoped_and_explicit_conditions_on_the_eagers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000630_source')" id="l_M000630_source">show source</a> ]</p>
  <div id="M000630_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 489</span>
489:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_scoped_and_explicit_conditions_on_the_eagers</span>
490:     <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;1=1&quot;</span> }) <span class="ruby-keyword kw">do</span>
491:       <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
492:         <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>,
493:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment'&quot;</span>,
494:         <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>
495:       )
496:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
497: 
498:       <span class="ruby-identifier">count</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(
499:         <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:author</span> ],
500:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;authors.name = 'David' AND (comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment')&quot;</span>,
501:         <span class="ruby-identifier">:limit</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>
502:       )
503:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
504:     <span class="ruby-keyword kw">end</span>
505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000629" class="method">
  <div id="M000629_title" class="title">
    <b>test_eager_with_has_many_and_limit_and_scoped_conditions_on_the_eagers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000629_source')" id="l_M000629_source">show source</a> ]</p>
  <div id="M000629_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 470</span>
470:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_and_scoped_conditions_on_the_eagers</span>
471:     <span class="ruby-identifier">posts</span> = <span class="ruby-keyword kw">nil</span>
472:     <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {
473:       <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>,
474:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment'&quot;</span>
475:     }) <span class="ruby-keyword kw">do</span>
476:       <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
477:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
478:     <span class="ruby-keyword kw">end</span>
479: 
480:     <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {
481:       <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:author</span> ],
482:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;authors.name = 'David' AND (comments.body like 'Normal%' OR comments.#{QUOTED_TYPE}= 'SpecialComment')&quot;</span>
483:     }) <span class="ruby-keyword kw">do</span>
484:       <span class="ruby-identifier">count</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
485:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">count</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
486:     <span class="ruby-keyword kw">end</span>
487:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000624" class="method">
  <div id="M000624_title" class="title">
    <b>test_eager_with_has_many_and_limit_with_no_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000624_source')" id="l_M000624_source">show source</a> ]</p>
  <div id="M000624_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 427</span>
427:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_and_limit_with_no_results</span>
428:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span> ], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.title = 'magic forest'&quot;</span>)
429:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
430:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000609" class="method">
  <div id="M000609_title" class="title">
    <b>test_eager_with_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000609_source')" id="l_M000609_source">show source</a> ]</p>
  <div id="M000609_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through</span>
323:     <span class="ruby-identifier">posts_with_comments</span> = <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
324:     <span class="ruby-identifier">posts_with_author</span> = <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
325:     <span class="ruby-identifier">posts_with_comments_and_author</span> = <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:author</span> ], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
326:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts_with_comments</span>.<span class="ruby-identifier">inject</span>(<span class="ruby-value">0</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">sum</span>, <span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">sum</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span> }
327:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_author</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span> }
328:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_comments_and_author</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author</span> }
329:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000610" class="method">
  <div id="M000610_title" class="title">
    <b>test_eager_with_has_many_through_a_belongs_to_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000610_source')" id="l_M000610_source">show source</a> ]</p>
  <div id="M000610_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 331</span>
331:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_a_belongs_to_association</span>
332:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>)
333:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;TITLE&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;BODY&quot;</span>)
334:     <span class="ruby-identifier">author</span>.<span class="ruby-identifier">author_favorites</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:favorite_author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
335:     <span class="ruby-identifier">author</span>.<span class="ruby-identifier">author_favorites</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:favorite_author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
336:     <span class="ruby-identifier">posts_with_author_favorites</span> = <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_favorites</span>)
337:     <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_author_favorites</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author_favorites</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">author_id</span> }
338:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000611" class="method">
  <div id="M000611_title" class="title">
    <b>test_eager_with_has_many_through_an_sti_join_model</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000611_source')" id="l_M000611_source">show source</a> ]</p>
  <div id="M000611_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_an_sti_join_model</span>
341:     <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:special_post_comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'authors.id'</span>)
342:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:does_it_hurt</span>)], <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">author</span>.<span class="ruby-identifier">special_post_comments</span> }
343:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000612" class="method">
  <div id="M000612_title" class="title">
    <b>test_eager_with_has_many_through_an_sti_join_model_with_conditions_on_both</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000612_source')" id="l_M000612_source">show source</a> ]</p>
  <div id="M000612_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 345</span>
345:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_an_sti_join_model_with_conditions_on_both</span>
346:     <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:special_nonexistant_post_comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'authors.id'</span>)
347:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">author</span>.<span class="ruby-identifier">special_nonexistant_post_comments</span>
348:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000613" class="method">
  <div id="M000613_title" class="title">
    <b>test_eager_with_has_many_through_join_model_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000613_source')" id="l_M000613_source">show source</a> ]</p>
  <div id="M000613_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 350</span>
350:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_join_model_with_conditions</span>
351:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hello_post_comments</span>,
352:                              <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'authors.id'</span>).<span class="ruby-identifier">hello_post_comments</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>),
353:                  <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'authors.id'</span>).<span class="ruby-identifier">hello_post_comments</span>.<span class="ruby-identifier">sort_by</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
354:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000614" class="method">
  <div id="M000614_title" class="title">
    <b>test_eager_with_has_many_through_join_model_with_conditions_on_top_level</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000614_source')" id="l_M000614_source">show source</a> ]</p>
  <div id="M000614_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 356</span>
356:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_join_model_with_conditions_on_top_level</span>
357:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:more_greetings</span>), <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments_with_order_and_conditions</span>).<span class="ruby-identifier">comments_with_order_and_conditions</span>.<span class="ruby-identifier">first</span>
358:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000615" class="method">
  <div id="M000615_title" class="title">
    <b>test_eager_with_has_many_through_join_model_with_include</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000615_source')" id="l_M000615_source">show source</a> ]</p>
  <div id="M000615_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 360</span>
360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_many_through_join_model_with_include</span>
361:     <span class="ruby-identifier">author_comments</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments_with_include</span>).<span class="ruby-identifier">comments_with_include</span>.<span class="ruby-identifier">to_a</span>
362:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
363:       <span class="ruby-identifier">author_comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">title</span>
364:     <span class="ruby-keyword kw">end</span>
365:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000637" class="method">
  <div id="M000637_title" class="title">
    <b>test_eager_with_has_one_dependent_does_not_destroy_dependent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000637_source')" id="l_M000637_source">show source</a> ]</p>
  <div id="M000637_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 548</span>
548:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_has_one_dependent_does_not_destroy_dependent</span>
549:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>).<span class="ruby-identifier">account</span>
550:     <span class="ruby-identifier">f</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account</span>,
551:             <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;companies.name = ?&quot;</span>, <span class="ruby-value str">&quot;37signals&quot;</span>])
552:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">account</span>
553:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>, <span class="ruby-identifier">:reload</span>).<span class="ruby-identifier">account</span>, <span class="ruby-identifier">f</span>.<span class="ruby-identifier">account</span>
554:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000633" class="method">
  <div id="M000633_title" class="title">
    <b>test_eager_with_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000633_source')" id="l_M000633_source">show source</a> ]</p>
  <div id="M000633_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 524</span>
524:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_inheritance</span>
525:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">SpecialPost</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span> ])
526:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000639" class="method">
  <div id="M000639_title" class="title">
    <b>test_eager_with_invalid_association_reference</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000639_source')" id="l_M000639_source">show source</a> ]</p>
  <div id="M000639_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 563</span>
563:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_invalid_association_reference</span>
564:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigurationError</span>, <span class="ruby-value str">&quot;Association was not found; perhaps you misspelled it?  You specified :include =&gt; :monkeys&quot;</span>) {
565:       <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">6</span>, <span class="ruby-identifier">:include=</span><span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:monkeys</span> )
566:     }
567:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigurationError</span>, <span class="ruby-value str">&quot;Association was not found; perhaps you misspelled it?  You specified :include =&gt; :monkeys&quot;</span>) {
568:       <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">6</span>, <span class="ruby-identifier">:include=</span><span class="ruby-operator">&gt;</span>[ <span class="ruby-identifier">:monkeys</span> ])
569:     }
570:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigurationError</span>, <span class="ruby-value str">&quot;Association was not found; perhaps you misspelled it?  You specified :include =&gt; :monkeys&quot;</span>) {
571:       <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">6</span>, <span class="ruby-identifier">:include=</span><span class="ruby-operator">&gt;</span>[ <span class="ruby-value str">'monkeys'</span> ])
572:     }
573:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">ConfigurationError</span>, <span class="ruby-value str">&quot;Association was not found; perhaps you misspelled it?  You specified :include =&gt; :monkeys, :elephants&quot;</span>) {
574:       <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">6</span>, <span class="ruby-identifier">:include=</span><span class="ruby-operator">&gt;</span>[ <span class="ruby-identifier">:monkeys</span>, <span class="ruby-identifier">:elephants</span> ])
575:     }
576:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000638" class="method">
  <div id="M000638_title" class="title">
    <b>test_eager_with_multi_table_conditional_properly_counts_the_records_when_using_size</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000638_source')" id="l_M000638_source">show source</a> ]</p>
  <div id="M000638_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 556</span>
556:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_multi_table_conditional_properly_counts_the_records_when_using_size</span>
557:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
558:     <span class="ruby-identifier">posts_with_no_comments</span> = <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">post</span><span class="ruby-operator">|</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">blank?</span> }
559:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_with_no_comments</span>.<span class="ruby-identifier">size</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_no_comments</span>.<span class="ruby-identifier">size</span>
560:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_with_no_comments</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_no_comments</span>
561:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000648" class="method">
  <div id="M000648_title" class="title">
    <b>test_eager_with_multiple_associations_with_same_table_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000648_source')" id="l_M000648_source">show source</a> ]</p>
  <div id="M000648_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 640</span>
640:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_multiple_associations_with_same_table_belongs_to</span>
641:     <span class="ruby-identifier">firm_types</span> = [<span class="ruby-identifier">:firm</span>, <span class="ruby-identifier">:firm_with_basic_id</span>, <span class="ruby-identifier">:firm_with_other_name</span>, <span class="ruby-identifier">:firm_with_condition</span>]
642:     <span class="ruby-identifier">d1</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-constant">Client</span>)
643:     <span class="ruby-identifier">d2</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-constant">Client</span>, <span class="ruby-identifier">firm_types</span>)
644:     <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
645:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>])
646:       <span class="ruby-identifier">firm_types</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">type</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">type</span>), <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">type</span>)) }
647:     <span class="ruby-keyword kw">end</span>
648:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000645" class="method">
  <div id="M000645_title" class="title">
    <b>test_eager_with_multiple_associations_with_same_table_has_many_and_habtm</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000645_source')" id="l_M000645_source">show source</a> ]</p>
  <div id="M000645_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 603</span>
603:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_multiple_associations_with_same_table_has_many_and_habtm</span>
604:     <span class="ruby-comment cmt"># Eager includes of has many and habtm associations aren't necessarily sorted in the same way</span>
605:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_equal_after_sort</span>(<span class="ruby-identifier">item1</span>, <span class="ruby-identifier">item2</span>, <span class="ruby-identifier">item3</span> = <span class="ruby-keyword kw">nil</span>)
606:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">item1</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}, <span class="ruby-identifier">item2</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>})
607:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">item3</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}, <span class="ruby-identifier">item2</span>.<span class="ruby-identifier">sort</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">a</span>,<span class="ruby-identifier">b</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>.<span class="ruby-identifier">id</span>}) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">item3</span>
608:     <span class="ruby-keyword kw">end</span>
609:     <span class="ruby-comment cmt"># Test regular association, association with conditions, association with</span>
610:     <span class="ruby-comment cmt"># STI, and association with conditions assured not to be true</span>
611:     <span class="ruby-identifier">post_types</span> = [<span class="ruby-identifier">:posts</span>, <span class="ruby-identifier">:other_posts</span>, <span class="ruby-identifier">:special_posts</span>]
612:     <span class="ruby-comment cmt"># test both has_many and has_and_belongs_to_many</span>
613:     [<span class="ruby-constant">Author</span>, <span class="ruby-constant">Category</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">className</span><span class="ruby-operator">|</span>
614:       <span class="ruby-identifier">d1</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-identifier">className</span>)
615:       <span class="ruby-comment cmt"># test including all post types at once</span>
616:       <span class="ruby-identifier">d2</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-identifier">className</span>, <span class="ruby-identifier">post_types</span>)
617:       <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
618:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>])
619:         <span class="ruby-identifier">assert_equal_after_sort</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">posts</span>, <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">posts</span>)
620:         <span class="ruby-identifier">post_types</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">post_type</span><span class="ruby-operator">|</span>
621:           <span class="ruby-comment cmt"># test including post_types together</span>
622:           <span class="ruby-identifier">d3</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-identifier">className</span>, [<span class="ruby-identifier">:posts</span>, <span class="ruby-identifier">post_type</span>])
623:           <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">d3</span>[<span class="ruby-identifier">i</span>])
624:           <span class="ruby-identifier">assert_equal_after_sort</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">posts</span>, <span class="ruby-identifier">d3</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">posts</span>)
625:           <span class="ruby-identifier">assert_equal_after_sort</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">post_type</span>), <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">post_type</span>), <span class="ruby-identifier">d3</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">send</span>(<span class="ruby-identifier">post_type</span>))
626:         <span class="ruby-keyword kw">end</span>
627:       <span class="ruby-keyword kw">end</span>
628:     <span class="ruby-keyword kw">end</span>
629:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000647" class="method">
  <div id="M000647_title" class="title">
    <b>test_eager_with_multiple_associations_with_same_table_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000647_source')" id="l_M000647_source">show source</a> ]</p>
  <div id="M000647_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 631</span>
631:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_multiple_associations_with_same_table_has_one</span>
632:     <span class="ruby-identifier">d1</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-constant">Firm</span>)
633:     <span class="ruby-identifier">d2</span> = <span class="ruby-identifier">find_all_ordered</span>(<span class="ruby-constant">Firm</span>, <span class="ruby-identifier">:account</span>)
634:     <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
635:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>], <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>])
636:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">d1</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">account</span>, <span class="ruby-identifier">d2</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">account</span>)
637:     <span class="ruby-keyword kw">end</span>
638:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000631" class="method">
  <div id="M000631_title" class="title">
    <b>test_eager_with_scoped_order_using_association_limiting_without_explicit_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000631_source')" id="l_M000631_source">show source</a> ]</p>
  <div id="M000631_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_scoped_order_using_association_limiting_without_explicit_scope</span>
508:     <span class="ruby-identifier">posts_with_explicit_order</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id is not null'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id DESC'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
509:     <span class="ruby-identifier">posts_with_scoped_order</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id DESC'</span>}) <span class="ruby-keyword kw">do</span>
510:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id is not null'</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
511:     <span class="ruby-keyword kw">end</span>
512:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_with_explicit_order</span>, <span class="ruby-identifier">posts_with_scoped_order</span>
513:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000649" class="method">
  <div id="M000649_title" class="title">
    <b>test_eager_with_valid_association_as_string_not_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000649_source')" id="l_M000649_source">show source</a> ]</p>
  <div id="M000649_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 649</span>
649:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_with_valid_association_as_string_not_symbol</span>
650:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments'</span>) }
651:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000580" class="method">
  <div id="M000580_title" class="title">
    <b>test_finding_with_includes_on_belongs_to_association_with_same_include_includes_only_once</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000580_source')" id="l_M000580_source">show source</a> ]</p>
  <div id="M000580_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 135</span>
135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_finding_with_includes_on_belongs_to_association_with_same_include_includes_only_once</span>
136:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)
137:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">post</span>.<span class="ruby-identifier">author</span>
138:     <span class="ruby-identifier">author_address</span> = <span class="ruby-identifier">author</span>.<span class="ruby-identifier">author_address</span>
139:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">3</span>) { <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:author_with_address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>}) } <span class="ruby-comment cmt"># find the post, then find the author, then find the address</span>
140:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
141:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">author_with_address</span>
142:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">author_address</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">author_with_address</span>.<span class="ruby-identifier">author_address</span>
143:     <span class="ruby-keyword kw">end</span>
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000578" class="method">
  <div id="M000578_title" class="title">
    <b>test_finding_with_includes_on_has_many_association_with_same_include_includes_only_once</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000578_source')" id="l_M000578_source">show source</a> ]</p>
  <div id="M000578_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_finding_with_includes_on_has_many_association_with_same_include_includes_only_once</span>
116:     <span class="ruby-identifier">author_id</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>
117:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">3</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">author_id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:posts_with_comments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>}) } <span class="ruby-comment cmt"># find the author, then find the posts, then find the comments</span>
118:     <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts_with_comments</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">post_with_comments</span><span class="ruby-operator">|</span>
119:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post_with_comments</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">post_with_comments</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">count</span>
120:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">post_with_comments</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">uniq!</span>
121:     <span class="ruby-keyword kw">end</span>
122:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000579" class="method">
  <div id="M000579_title" class="title">
    <b>test_finding_with_includes_on_has_one_assocation_with_same_include_includes_only_once</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000579_source')" id="l_M000579_source">show source</a> ]</p>
  <div id="M000579_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_finding_with_includes_on_has_one_assocation_with_same_include_includes_only_once</span>
125:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
126:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">author</span>.<span class="ruby-identifier">post_about_thinking_with_last_comment</span>
127:     <span class="ruby-identifier">last_comment</span> = <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
128:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">3</span>) { <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">author</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:post_about_thinking_with_last_comment</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:last_comment</span>})} <span class="ruby-comment cmt"># find the author, then find the posts, then find the comments</span>
129:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
130:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">post_about_thinking_with_last_comment</span>
131:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">post_about_thinking_with_last_comment</span>.<span class="ruby-identifier">last_comment</span>
132:     <span class="ruby-keyword kw">end</span>
133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000581" class="method">
  <div id="M000581_title" class="title">
    <b>test_finding_with_includes_on_null_belongs_to_association_with_same_include_includes_only_once</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000581_source')" id="l_M000581_source">show source</a> ]</p>
  <div id="M000581_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_finding_with_includes_on_null_belongs_to_association_with_same_include_includes_only_once</span>
147:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)
148:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">update_attributes!</span>(<span class="ruby-identifier">:author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>)
149:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) { <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">post</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:author_with_address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>}) } <span class="ruby-comment cmt"># find the post, then find the author which is null so no query for the author or address</span>
150:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
151:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">author_with_address</span>
152:     <span class="ruby-keyword kw">end</span>
153:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000668" class="method">
  <div id="M000668_title" class="title">
    <b>test_include_has_many_using_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000668_source')" id="l_M000668_source">show source</a> ]</p>
  <div id="M000668_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 810</span>
810:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_has_many_using_primary_key</span>
811:     <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">clients_using_primary_key</span>.<span class="ruby-identifier">sort_by</span> <span class="ruby-operator">&amp;</span><span class="ruby-identifier">:name</span>
812:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:clients_using_primary_key</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'clients_using_primary_keys_companies.name'</span>
813:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
814:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_using_primary_key</span>
815:     <span class="ruby-keyword kw">end</span>
816:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000670" class="method">
  <div id="M000670_title" class="title">
    <b>test_include_has_one_using_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000670_source')" id="l_M000670_source">show source</a> ]</p>
  <div id="M000670_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 826</span>
826:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_has_one_using_primary_key</span>
827:     <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">account_using_primary_key</span>
828:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account_using_primary_key</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'accounts.id'</span>).<span class="ruby-identifier">detect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>}
829:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
830:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">account_using_primary_key</span>
831:     <span class="ruby-keyword kw">end</span>
832:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000576" class="method">
  <div id="M000576_title" class="title">
    <b>test_including_duplicate_objects_from_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000576_source')" id="l_M000576_source">show source</a> ]</p>
  <div id="M000576_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 89</span>
 89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_including_duplicate_objects_from_belongs_to</span>
 90:     <span class="ruby-identifier">popular_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;I like cars!&quot;</span>)
 91:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">popular_post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;lol&quot;</span>)
 92:     <span class="ruby-identifier">popular_post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:michael</span>))
 93:     <span class="ruby-identifier">popular_post</span>.<span class="ruby-identifier">readers</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:person</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">people</span>(<span class="ruby-identifier">:david</span>))
 94: 
 95:     <span class="ruby-identifier">readers</span> = <span class="ruby-constant">Reader</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;post_id = ?&quot;</span>, <span class="ruby-identifier">popular_post</span>.<span class="ruby-identifier">id</span>],
 96:                                 <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:post</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>})
 97:     <span class="ruby-identifier">readers</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">reader</span><span class="ruby-operator">|</span>
 98:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">comment</span>], <span class="ruby-identifier">reader</span>.<span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>
 99:     <span class="ruby-keyword kw">end</span>
100:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000577" class="method">
  <div id="M000577_title" class="title">
    <b>test_including_duplicate_objects_from_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000577_source')" id="l_M000577_source">show source</a> ]</p>
  <div id="M000577_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_including_duplicate_objects_from_has_many</span>
103:     <span class="ruby-identifier">car_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;I like cars!&quot;</span>)
104:     <span class="ruby-identifier">car_post</span>.<span class="ruby-identifier">categories</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>)
105:     <span class="ruby-identifier">car_post</span>.<span class="ruby-identifier">categories</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:technology</span>)
106: 
107:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">car_post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;hmm&quot;</span>)
108:     <span class="ruby-identifier">categories</span> = <span class="ruby-constant">Category</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;posts.id=?&quot;</span>, <span class="ruby-identifier">car_post</span>.<span class="ruby-identifier">id</span>],
109:                                  <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:posts</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>})
110:     <span class="ruby-identifier">categories</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">category</span><span class="ruby-operator">|</span>
111:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">comment</span>], <span class="ruby-identifier">category</span>.<span class="ruby-identifier">posts</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comments</span>
112:     <span class="ruby-keyword kw">end</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000642" class="method">
  <div id="M000642_title" class="title">
    <b>test_limited_eager_with_multiple_order_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000642_source')" id="l_M000642_source">show source</a> ]</p>
  <div id="M000642_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 587</span>
587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_limited_eager_with_multiple_order_columns</span>
588:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>, <span class="ruby-identifier">:sti_comments</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;authors.name = 'David'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UPPER(posts.title), posts.id'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
589:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_post_and_comments</span>, <span class="ruby-identifier">:sti_comments</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;authors.name = 'David'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UPPER(posts.title) DESC, posts.id'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
590:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000641" class="method">
  <div id="M000641_title" class="title">
    <b>test_limited_eager_with_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000641_source')" id="l_M000641_source">show source</a> ]</p>
  <div id="M000641_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 582</span>
582:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_limited_eager_with_order</span>
583:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>, <span class="ruby-identifier">:sti_comments</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;authors.name = 'David'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UPPER(posts.title)'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
584:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_post_and_comments</span>, <span class="ruby-identifier">:sti_comments</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:comments</span>], <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;authors.name = 'David'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UPPER(posts.title) DESC'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000657" class="method">
  <div id="M000657_title" class="title">
    <b>test_load_with_sti_sharing_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000657_source')" id="l_M000657_source">show source</a> ]</p>
  <div id="M000657_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 708</span>
708:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_load_with_sti_sharing_association</span>
709:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-comment cmt">#should not do 1 query per subclass</span>
710:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>
711:     <span class="ruby-keyword kw">end</span>
712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000571" class="method">
  <div id="M000571_title" class="title">
    <b>test_loading_conditions_with_or</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000571_source')" id="l_M000571_source">show source</a> ]</p>
  <div id="M000571_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 48</span>
48:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_conditions_with_or</span>
49:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;comments.body like 'Normal%' OR comments.#{QUOTED_TYPE} = 'SpecialComment'&quot;</span>)
50:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">author_id</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span> },
51:       <span class="ruby-value str">&quot;expected to find only david's posts&quot;</span>
52:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000582" class="method">
  <div id="M000582_title" class="title">
    <b>test_loading_from_an_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000582_source')" id="l_M000582_source">show source</a> ]</p>
  <div id="M000582_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_from_an_association</span>
156:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000583" class="method">
  <div id="M000583_title" class="title">
    <b>test_loading_from_an_association_that_has_a_hash_of_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000583_source')" id="l_M000583_source">show source</a> ]</p>
  <div id="M000583_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_from_an_association_that_has_a_hash_of_conditions</span>
161:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
162:       <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hello_posts_with_hash_conditions</span>)
163:     <span class="ruby-keyword kw">end</span>
164:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:hello_posts_with_hash_conditions</span>).<span class="ruby-identifier">hello_posts</span>.<span class="ruby-identifier">empty?</span>
165:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000574" class="method">
  <div id="M000574_title" class="title">
    <b>test_loading_with_multiple_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000574_source')" id="l_M000574_source">show source</a> ]</p>
  <div id="M000574_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 75</span>
75:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_with_multiple_associations</span>
76:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:categories</span> ], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>)
77:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
78:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
79:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>))
80:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000584" class="method">
  <div id="M000584_title" class="title">
    <b>test_loading_with_no_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000584_source')" id="l_M000584_source">show source</a> ]</p>
  <div id="M000584_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 167</span>
167:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_with_no_associations</span>
168:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:authorless</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>).<span class="ruby-identifier">author</span>
169:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000569" class="method">
  <div id="M000569_title" class="title">
    <b>test_loading_with_one_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000569_source')" id="l_M000569_source">show source</a> ]</p>
  <div id="M000569_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_with_one_association</span>
28:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>)
29:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
30:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
31:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>))
32: 
33:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.title = 'Welcome to the weblog'&quot;</span>)
34:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
35:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>))
36: 
37:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:last_comment</span>)
38:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
39:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
40:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000570" class="method">
  <div id="M000570_title" class="title">
    <b>test_loading_with_one_association_with_non_preload</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000570_source')" id="l_M000570_source">show source</a> ]</p>
  <div id="M000570_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 42</span>
42:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loading_with_one_association_with_non_preload</span>
43:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:last_comment</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id DESC'</span>)
44:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
45:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">last_comment</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">last_comment</span>
46:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000585" class="method">
  <div id="M000585_title" class="title">
    <b>test_nested_loading_with_no_associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000585_source')" id="l_M000585_source">show source</a> ]</p>
  <div id="M000585_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_loading_with_no_associations</span>
172:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
173:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:authorless</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_addresss</span>})
174:     <span class="ruby-keyword kw">end</span>
175:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000659" class="method">
  <div id="M000659_title" class="title">
    <b>test_order_on_join_table_with_include_and_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000659_source')" id="l_M000659_source">show source</a> ]</p>
  <div id="M000659_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 718</span>
718:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_order_on_join_table_with_include_and_limit</span>
719:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'projects'</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'developers_projects.joined_on DESC'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>).<span class="ruby-identifier">size</span>
720:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000644" class="method">
  <div id="M000644_title" class="title">
    <b>test_polymorphic_type_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000644_source')" id="l_M000644_source">show source</a> ]</p>
  <div id="M000644_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 596</span>
596:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_type_condition</span>
597:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>)
598:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:thinking_general</span>))
599:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">SpecialPost</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>)
600:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:thinking_general</span>))
601:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000651" class="method">
  <div id="M000651_title" class="title">
    <b>test_preconfigured_includes_with_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000651_source')" id="l_M000651_source">show source</a> ]</p>
  <div id="M000651_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preconfigured_includes_with_belongs_to</span>
661:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">author_with_posts</span>
662:     <span class="ruby-identifier">assert_no_queries</span> {<span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>}
663:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000654" class="method">
  <div id="M000654_title" class="title">
    <b>test_preconfigured_includes_with_habtm</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000654_source')" id="l_M000654_source">show source</a> ]</p>
  <div id="M000654_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 679</span>
679:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preconfigured_includes_with_habtm</span>
680:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_categories</span>
681:     <span class="ruby-identifier">one</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
682:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
683:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
684:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">one</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
685:     <span class="ruby-keyword kw">end</span>
686:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000653" class="method">
  <div id="M000653_title" class="title">
    <b>test_preconfigured_includes_with_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000653_source')" id="l_M000653_source">show source</a> ]</p>
  <div id="M000653_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 670</span>
670:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preconfigured_includes_with_has_many</span>
671:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_comments</span>
672:     <span class="ruby-identifier">one</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
673:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
674:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
675:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">one</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
676:     <span class="ruby-keyword kw">end</span>
677:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000655" class="method">
  <div id="M000655_title" class="title">
    <b>test_preconfigured_includes_with_has_many_and_habtm</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000655_source')" id="l_M000655_source">show source</a> ]</p>
  <div id="M000655_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 688</span>
688:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preconfigured_includes_with_has_many_and_habtm</span>
689:     <span class="ruby-identifier">posts</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts_with_comments_and_categories</span>
690:     <span class="ruby-identifier">one</span> = <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> }
691:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
692:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
693:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">one</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
694:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">one</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">size</span>
695:     <span class="ruby-keyword kw">end</span>
696:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000652" class="method">
  <div id="M000652_title" class="title">
    <b>test_preconfigured_includes_with_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000652_source')" id="l_M000652_source">show source</a> ]</p>
  <div id="M000652_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 665</span>
665:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preconfigured_includes_with_has_one</span>
666:     <span class="ruby-identifier">comment</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_comments</span>).<span class="ruby-identifier">very_special_comment_with_post</span>
667:     <span class="ruby-identifier">assert_no_queries</span> {<span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_comments</span>), <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">post</span>}
668:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000665" class="method">
  <div id="M000665_title" class="title">
    <b>test_preload_belongs_to_uses_exclusive_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000665_source')" id="l_M000665_source">show source</a> ]</p>
  <div id="M000665_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 786</span>
786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_belongs_to_uses_exclusive_scope</span>
787:     <span class="ruby-identifier">people</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">males</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:primary_contact</span>)
788:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">people</span>.<span class="ruby-identifier">length</span>, <span class="ruby-value">0</span>
789:     <span class="ruby-identifier">people</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">person</span><span class="ruby-operator">|</span>
790:       <span class="ruby-identifier">assert_no_queries</span> {<span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">person</span>.<span class="ruby-identifier">primary_contact</span>}
791:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">person</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">primary_contact</span>, <span class="ruby-identifier">person</span>.<span class="ruby-identifier">primary_contact</span>
792:     <span class="ruby-keyword kw">end</span>
793:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000666" class="method">
  <div id="M000666_title" class="title">
    <b>test_preload_has_many_uses_exclusive_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000666_source')" id="l_M000666_source">show source</a> ]</p>
  <div id="M000666_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 795</span>
795:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_has_many_uses_exclusive_scope</span>
796:     <span class="ruby-identifier">people</span> = <span class="ruby-constant">Person</span>.<span class="ruby-identifier">males</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:agents</span>
797:     <span class="ruby-identifier">people</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">person</span><span class="ruby-operator">|</span>
798:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Person</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">person</span>.<span class="ruby-identifier">id</span>).<span class="ruby-identifier">agents</span>, <span class="ruby-identifier">person</span>.<span class="ruby-identifier">agents</span>
799:     <span class="ruby-keyword kw">end</span>
800:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000667" class="method">
  <div id="M000667_title" class="title">
    <b>test_preload_has_many_using_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000667_source')" id="l_M000667_source">show source</a> ]</p>
  <div id="M000667_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 802</span>
802:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_has_many_using_primary_key</span>
803:     <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">clients_using_primary_key</span>.<span class="ruby-identifier">to_a</span>
804:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:clients_using_primary_key</span>
805:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
806:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">clients_using_primary_key</span>
807:     <span class="ruby-keyword kw">end</span>
808:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000669" class="method">
  <div id="M000669_title" class="title">
    <b>test_preload_has_one_using_primary_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000669_source')" id="l_M000669_source">show source</a> ]</p>
  <div id="M000669_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 818</span>
818:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_has_one_using_primary_key</span>
819:     <span class="ruby-identifier">expected</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">account_using_primary_key</span>
820:     <span class="ruby-identifier">firm</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account_using_primary_key</span>
821:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
822:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">firm</span>.<span class="ruby-identifier">account_using_primary_key</span>
823:     <span class="ruby-keyword kw">end</span>
824:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000643" class="method">
  <div id="M000643_title" class="title">
    <b>test_preload_with_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000643_source')" id="l_M000643_source">show source</a> ]</p>
  <div id="M000643_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 592</span>
592:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_with_interpolation</span>
593:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>)], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments_with_interpolated_conditions</span>).<span class="ruby-identifier">comments_with_interpolated_conditions</span>
594:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000572" class="method">
  <div id="M000572_title" class="title">
    <b>test_with_ordering</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000572_source')" id="l_M000572_source">show source</a> ]</p>
  <div id="M000572_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 54</span>
54:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_ordering</span>
55:     <span class="ruby-identifier">list</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id DESC&quot;</span>)
56:     [<span class="ruby-identifier">:eager_other</span>, <span class="ruby-identifier">:sti_habtm</span>, <span class="ruby-identifier">:sti_post_and_comments</span>, <span class="ruby-identifier">:sti_comments</span>,
57:      <span class="ruby-identifier">:authorless</span>, <span class="ruby-identifier">:thinking</span>, <span class="ruby-identifier">:welcome</span>
58:     ].<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">post</span>, <span class="ruby-identifier">index</span><span class="ruby-operator">|</span>
59:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">post</span>), <span class="ruby-identifier">list</span>[<span class="ruby-identifier">index</span>]
60:     <span class="ruby-keyword kw">end</span>
61:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000573" class="method">
  <div id="M000573_title" class="title">
    <b>test_with_two_tables_in_from_without_getting_double_quoted</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000573_source')" id="l_M000573_source">show source</a> ]</p>
  <div id="M000573_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/eager_test.rb, line 63</span>
63:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_two_tables_in_from_without_getting_double_quoted</span>
64:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
65:       <span class="ruby-identifier">:select</span>     =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.*&quot;</span>,
66:       <span class="ruby-identifier">:from</span>       =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;authors, posts&quot;</span>,
67:       <span class="ruby-identifier">:include</span>    =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>,
68:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.author_id = authors.id&quot;</span>,
69:       <span class="ruby-identifier">:order</span>      =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;posts.id&quot;</span>
70:     )
71: 
72:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
73:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>