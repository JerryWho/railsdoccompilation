  <div id="C00000063">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RackRequestTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/rack_test_rb.html');">actionpack/test/controller/rack_test.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/BaseRackTest.html');">
BaseRackTest
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000478&name=test_cgi_environment_variables" >test_cgi_environment_variables</a></li>
  <li><a href="index.html?a=M000479&name=test_cookie_syntax_resilience" >test_cookie_syntax_resilience</a></li>
  <li><a href="index.html?a=M000476&name=test_host_if_ipv6_reference" >test_host_if_ipv6_reference</a></li>
  <li><a href="index.html?a=M000477&name=test_host_if_ipv6_reference_with_port" >test_host_if_ipv6_reference_with_port</a></li>
  <li><a href="index.html?a=M000472&name=test_host_with_port_defaults_to_server_name_if_no_host_headers" >test_host_with_port_defaults_to_server_name_if_no_host_headers</a></li>
  <li><a href="index.html?a=M000473&name=test_host_with_port_falls_back_to_server_addr_if_necessary" >test_host_with_port_falls_back_to_server_addr_if_necessary</a></li>
  <li><a href="index.html?a=M000474&name=test_host_with_port_if_http_standard_port_is_specified" >test_host_with_port_if_http_standard_port_is_specified</a></li>
  <li><a href="index.html?a=M000475&name=test_host_with_port_if_https_standard_port_is_specified" >test_host_with_port_if_https_standard_port_is_specified</a></li>
  <li><a href="index.html?a=M000470&name=test_http_host" >test_http_host</a></li>
  <li><a href="index.html?a=M000471&name=test_http_host_with_default_port_overrides_server_port" >test_http_host_with_default_port_overrides_server_port</a></li>
  <li><a href="index.html?a=M000469&name=test_proxy_request" >test_proxy_request</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000478" class="method">
  <div id="M000478_title" class="title">
    <b>test_cgi_environment_variables</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000478_source')" id="l_M000478_source">show source</a> ]</p>
  <div id="M000478_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 123</span>
123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cgi_environment_variables</span>
124:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Basic&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">auth_type</span>
125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">content_length</span>
126:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">content_type</span>
127:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;CGI/1.1&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">gateway_interface</span>
128:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;*/*&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">accept</span>
129:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;UTF-8&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">accept_charset</span>
130:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;gzip, deflate&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">accept_encoding</span>
131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;en&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">accept_language</span>
132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;no-cache, max-age=0&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cache_control</span>
133:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;googlebot&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">from</span>
134:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;glu.ttono.us&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
135:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;trans&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">negotiate</span>
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;no-cache&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">pragma</span>
137:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;http://www.google.com/search?q=glu.ttono.us&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">referer</span>
138:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Mozilla/5.0 (Macintosh; U; PPC Mac OS X; en)&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">user_agent</span>
139:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/homepage/&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_info</span>
140:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/home/kevinc/sites/typo/public/homepage/&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">path_translated</span>
141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">query_string</span>
142:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;207.7.108.53&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">remote_addr</span>
143:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;google.com&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">remote_host</span>
144:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;kevin&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">remote_ident</span>
145:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;kevin&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">remote_user</span>
146:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">:get</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">request_method</span>
147:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;/dispatch.fcgi&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">script_name</span>
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;glu.ttono.us&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_name</span>
149:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">8007</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_port</span>
150:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;HTTP/1.1&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_protocol</span>
151:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;lighttpd&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">server_software</span>
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000479" class="method">
  <div id="M000479_title" class="title">
    <b>test_cookie_syntax_resilience</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000479_source')" id="l_M000479_source">show source</a> ]</p>
  <div id="M000479_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cookie_syntax_resilience</span>
155:     <span class="ruby-identifier">cookies</span> = <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">cookies</span>
156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;c84ace84796670c052c6ceb2451fb0f2&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">&quot;_session_id&quot;</span>], <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">inspect</span>
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;yes&quot;</span>, <span class="ruby-identifier">cookies</span>[<span class="ruby-value str">&quot;is_admin&quot;</span>], <span class="ruby-identifier">cookies</span>.<span class="ruby-identifier">inspect</span>
158: 
159:     <span class="ruby-identifier">alt_cookies</span> = <span class="ruby-ivar">@alt_cookie_fmt_request</span>.<span class="ruby-identifier">cookies</span>
160:     <span class="ruby-comment cmt">#assert_equal &quot;c84ace847,96670c052c6ceb2451fb0f2&quot;, alt_cookies[&quot;_session_id&quot;], alt_cookies.inspect</span>
161:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;yes&quot;</span>, <span class="ruby-identifier">alt_cookies</span>[<span class="ruby-value str">&quot;is_admin&quot;</span>], <span class="ruby-identifier">alt_cookies</span>.<span class="ruby-identifier">inspect</span>
162:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000476" class="method">
  <div id="M000476_title" class="title">
    <b>test_host_if_ipv6_reference</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000476_source')" id="l_M000476_source">show source</a> ]</p>
  <div id="M000476_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_if_ipv6_reference</span>
112:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
113:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_HOST'</span>] = <span class="ruby-value str">&quot;[2001:1234:5678:9abc:def0::dead:beef]&quot;</span>
114:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;[2001:1234:5678:9abc:def0::dead:beef]&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000477" class="method">
  <div id="M000477_title" class="title">
    <b>test_host_if_ipv6_reference_with_port</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000477_source')" id="l_M000477_source">show source</a> ]</p>
  <div id="M000477_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_if_ipv6_reference_with_port</span>
118:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
119:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_HOST'</span>] = <span class="ruby-value str">&quot;[2001:1234:5678:9abc:def0::dead:beef]:8008&quot;</span>
120:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;[2001:1234:5678:9abc:def0::dead:beef]&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000472" class="method">
  <div id="M000472_title" class="title">
    <b>test_host_with_port_defaults_to_server_name_if_no_host_headers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000472_source')" id="l_M000472_source">show source</a> ]</p>
  <div id="M000472_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 85</span>
85:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_with_port_defaults_to_server_name_if_no_host_headers</span>
86:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
87:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_HOST&quot;</span>
88:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;glu.ttono.us:8007&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
89:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000473" class="method">
  <div id="M000473_title" class="title">
    <b>test_host_with_port_falls_back_to_server_addr_if_necessary</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000473_source')" id="l_M000473_source">show source</a> ]</p>
  <div id="M000473_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 91</span>
91:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_with_port_falls_back_to_server_addr_if_necessary</span>
92:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
93:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_HOST&quot;</span>
94:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;SERVER_NAME&quot;</span>
95:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;207.7.108.53&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
96:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">8007</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">port</span>
97:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;207.7.108.53:8007&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
98:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000474" class="method">
  <div id="M000474_title" class="title">
    <b>test_host_with_port_if_http_standard_port_is_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000474_source')" id="l_M000474_source">show source</a> ]</p>
  <div id="M000474_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_with_port_if_http_standard_port_is_specified</span>
101:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_X_FORWARDED_HOST'</span>] = <span class="ruby-value str">&quot;glu.ttono.us:80&quot;</span>
102:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;glu.ttono.us&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
103:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000475" class="method">
  <div id="M000475_title" class="title">
    <b>test_host_with_port_if_https_standard_port_is_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000475_source')" id="l_M000475_source">show source</a> ]</p>
  <div id="M000475_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 105</span>
105:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_host_with_port_if_https_standard_port_is_specified</span>
106:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_X_FORWARDED_PROTO'</span>] = <span class="ruby-value str">&quot;https&quot;</span>
107:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_X_FORWARDED_HOST'</span>] = <span class="ruby-value str">&quot;glu.ttono.us:443&quot;</span>
108:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;glu.ttono.us&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000470" class="method">
  <div id="M000470_title" class="title">
    <b>test_http_host</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000470_source')" id="l_M000470_source">show source</a> ]</p>
  <div id="M000470_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_http_host</span>
70:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
71:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_HOST'</span>] = <span class="ruby-value str">&quot;rubyonrails.org:8080&quot;</span>
72:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;rubyonrails.org&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
73:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;rubyonrails.org:8080&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
74: 
75:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_X_FORWARDED_HOST'</span>] = <span class="ruby-value str">&quot;www.firsthost.org, www.secondhost.org&quot;</span>
76:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;www.secondhost.org&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host</span>
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000471" class="method">
  <div id="M000471_title" class="title">
    <b>test_http_host_with_default_port_overrides_server_port</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000471_source')" id="l_M000471_source">show source</a> ]</p>
  <div id="M000471_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_http_host_with_default_port_overrides_server_port</span>
80:     <span class="ruby-ivar">@env</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">&quot;HTTP_X_FORWARDED_HOST&quot;</span>
81:     <span class="ruby-ivar">@env</span>[<span class="ruby-value str">'HTTP_HOST'</span>] = <span class="ruby-value str">&quot;rubyonrails.org&quot;</span>
82:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;rubyonrails.org&quot;</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
83:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000469" class="method">
  <div id="M000469_title" class="title">
    <b>test_proxy_request</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000469_source')" id="l_M000469_source">show source</a> ]</p>
  <div id="M000469_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/rack_test.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_proxy_request</span>
66:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'glu.ttono.us'</span>, <span class="ruby-ivar">@request</span>.<span class="ruby-identifier">host_with_port</span>
67:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>