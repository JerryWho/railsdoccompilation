  <div id="C00000463">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />NamedScopeTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/named_scope_test_rb.html');">activerecord/test/cases/named_scope_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M002998&name=test_active_records_have_scope_named__all__" >test_active_records_have_scope_named__all__</a></li>
  <li><a href="index.html?a=M002999&name=test_active_records_have_scope_named__scoped__" >test_active_records_have_scope_named__scoped__</a></li>
  <li><a href="index.html?a=M003007&name=test_any_should_call_proxy_found_if_using_a_block" >test_any_should_call_proxy_found_if_using_a_block</a></li>
  <li><a href="index.html?a=M003008&name=test_any_should_not_fire_query_if_named_scope_loaded" >test_any_should_not_fire_query_if_named_scope_loaded</a></li>
  <li><a href="index.html?a=M003006&name=test_any_should_not_load_results" >test_any_should_not_load_results</a></li>
  <li><a href="index.html?a=M003020&name=test_chaining_should_use_latest_conditions_when_creating" >test_chaining_should_use_latest_conditions_when_creating</a></li>
  <li><a href="index.html?a=M003021&name=test_chaining_should_use_latest_conditions_when_searching" >test_chaining_should_use_latest_conditions_when_searching</a></li>
  <li><a href="index.html?a=M003019&name=test_chaining_with_duplicate_joins" >test_chaining_with_duplicate_joins</a></li>
  <li><a href="index.html?a=M002981&name=test_delegates_finds_and_calculations_to_the_base_class" >test_delegates_finds_and_calculations_to_the_base_class</a></li>
  <li><a href="index.html?a=M003005&name=test_empty_should_not_load_results" >test_empty_should_not_load_results</a></li>
  <li><a href="index.html?a=M002993&name=test_extensions" >test_extensions</a></li>
  <li><a href="index.html?a=M003014&name=test_find_all_should_behave_like_select" >test_find_all_should_behave_like_select</a></li>
  <li><a href="index.html?a=M003004&name=test_first_and_last_find_options_should_use_query_when_results_are_loaded" >test_first_and_last_find_options_should_use_query_when_results_are_loaded</a></li>
  <li><a href="index.html?a=M003002&name=test_first_and_last_should_allow_integers_for_limit" >test_first_and_last_should_allow_integers_for_limit</a></li>
  <li><a href="index.html?a=M003003&name=test_first_and_last_should_not_use_query_when_results_are_loaded" >test_first_and_last_should_not_use_query_when_results_are_loaded</a></li>
  <li><a href="index.html?a=M003001&name=test_first_and_last_should_support_find_options" >test_first_and_last_should_support_find_options</a></li>
  <li><a href="index.html?a=M002979&name=test_found_items_are_cached" >test_found_items_are_cached</a></li>
  <li><a href="index.html?a=M002995&name=test_has_many_associations_have_access_to_named_scopes" >test_has_many_associations_have_access_to_named_scopes</a></li>
  <li><a href="index.html?a=M002996&name=test_has_many_through_associations_have_access_to_named_scopes" >test_has_many_through_associations_have_access_to_named_scopes</a></li>
  <li><a href="index.html?a=M002978&name=test_implements_enumerable" >test_implements_enumerable</a></li>
  <li><a href="index.html?a=M002994&name=test_multiple_extensions" >test_multiple_extensions</a></li>
  <li><a href="index.html?a=M003022&name=test_named_scopes_batch_finders" >test_named_scopes_batch_finders</a></li>
  <li><a href="index.html?a=M002997&name=test_named_scopes_honor_current_scopes_from_when_defined" >test_named_scopes_honor_current_scopes_from_when_defined</a></li>
  <li><a href="index.html?a=M002989&name=test_procedural_scopes" >test_procedural_scopes</a></li>
  <li><a href="index.html?a=M002990&name=test_procedural_scopes_returning_nil" >test_procedural_scopes_returning_nil</a></li>
  <li><a href="index.html?a=M003000&name=test_proxy_options" >test_proxy_options</a></li>
  <li><a href="index.html?a=M003015&name=test_rand_should_select_a_random_object_from_proxy" >test_rand_should_select_a_random_object_from_proxy</a></li>
  <li><a href="index.html?a=M002980&name=test_reload_expires_cache_of_found_items" >test_reload_expires_cache_of_found_items</a></li>
  <li><a href="index.html?a=M002983&name=test_respond_to_respects_include_private_parameter" >test_respond_to_respects_include_private_parameter</a></li>
  <li><a href="index.html?a=M002982&name=test_scope_should_respond_to_own_methods_and_methods_of_the_proxy" >test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</a></li>
  <li><a href="index.html?a=M002988&name=test_scopes_are_composable" >test_scopes_are_composable</a></li>
  <li><a href="index.html?a=M002987&name=test_scopes_can_be_specified_with_deep_hash_conditions" >test_scopes_can_be_specified_with_deep_hash_conditions</a></li>
  <li><a href="index.html?a=M002991&name=test_scopes_with_joins" >test_scopes_with_joins</a></li>
  <li><a href="index.html?a=M002992&name=test_scopes_with_joins_respects_custom_select" >test_scopes_with_joins_respects_custom_select</a></li>
  <li><a href="index.html?a=M002985&name=test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified" >test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</a></li>
  <li><a href="index.html?a=M002986&name=test_scopes_with_string_name_can_be_composed" >test_scopes_with_string_name_can_be_composed</a></li>
  <li><a href="index.html?a=M003010&name=test_should_build_new_with_proxy_options" >test_should_build_new_with_proxy_options</a></li>
  <li><a href="index.html?a=M003009&name=test_should_build_with_proxy_options" >test_should_build_with_proxy_options</a></li>
  <li><a href="index.html?a=M003013&name=test_should_build_with_proxy_options_chained" >test_should_build_with_proxy_options_chained</a></li>
  <li><a href="index.html?a=M003012&name=test_should_create_with_bang_with_proxy_options" >test_should_create_with_bang_with_proxy_options</a></li>
  <li><a href="index.html?a=M003011&name=test_should_create_with_proxy_options" >test_should_create_with_proxy_options</a></li>
  <li><a href="index.html?a=M003016&name=test_should_use_where_in_query_for_named_scope" >test_should_use_where_in_query_for_named_scope</a></li>
  <li><a href="index.html?a=M003017&name=test_size_should_use_count_when_results_are_not_loaded" >test_size_should_use_count_when_results_are_not_loaded</a></li>
  <li><a href="index.html?a=M003018&name=test_size_should_use_length_when_results_are_loaded" >test_size_should_use_length_when_results_are_loaded</a></li>
  <li><a href="index.html?a=M002984&name=test_subclasses_inherit_scopes" >test_subclasses_inherit_scopes</a></li>
  <li><a href="index.html?a=M003023&name=test_table_names_for_chaining_scopes_with_and_without_table_name_included" >test_table_names_for_chaining_scopes_with_and_without_table_name_included</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M002998" class="method">
  <div id="M002998_title" class="title">
    <b>test_active_records_have_scope_named__all__</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002998_source')" id="l_M002998_source">show source</a> ]</p>
  <div id="M002998_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_active_records_have_scope_named__all__</span>
161:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>).<span class="ruby-identifier">empty?</span>
162: 
163:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002999" class="method">
  <div id="M002999_title" class="title">
    <b>test_active_records_have_scope_named__scoped__</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002999_source')" id="l_M002999_source">show source</a> ]</p>
  <div id="M002999_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_active_records_have_scope_named__scoped__</span>
167:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">scope</span> = {<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;content LIKE '%Have%'&quot;</span>}).<span class="ruby-identifier">empty?</span>
168: 
169:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">scope</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scoped</span>(<span class="ruby-identifier">scope</span>)
170:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003007" class="method">
  <div id="M003007_title" class="title">
    <b>test_any_should_call_proxy_found_if_using_a_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003007_source')" id="l_M003007_source">show source</a> ]</p>
  <div id="M003007_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 223</span>
223:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_any_should_call_proxy_found_if_using_a_block</span>
224:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
225:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
226:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:empty?</span>).<span class="ruby-identifier">never</span>
227:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-keyword kw">true</span> }
228:     <span class="ruby-keyword kw">end</span>
229:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003008" class="method">
  <div id="M003008_title" class="title">
    <b>test_any_should_not_fire_query_if_named_scope_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003008_source')" id="l_M003008_source">show source</a> ]</p>
  <div id="M003008_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 231</span>
231:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_any_should_not_fire_query_if_named_scope_loaded</span>
232:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
233:     <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment cmt"># force load</span>
234:     <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span> }
235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003006" class="method">
  <div id="M003006_title" class="title">
    <b>test_any_should_not_load_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003006_source')" id="l_M003006_source">show source</a> ]</p>
  <div id="M003006_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 214</span>
214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_any_should_not_load_results</span>
215:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
216:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
217:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span>    <span class="ruby-comment cmt"># use count query</span>
218:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment cmt"># force load</span>
219:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">any?</span>    <span class="ruby-comment cmt"># use loaded (no query)</span>
220:     <span class="ruby-keyword kw">end</span>
221:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003020" class="method">
  <div id="M003020_title" class="title">
    <b>test_chaining_should_use_latest_conditions_when_creating</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003020_source')" id="l_M003020_source">show source</a> ]</p>
  <div id="M003020_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 296</span>
296:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_chaining_should_use_latest_conditions_when_creating</span>
297:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">new</span>
298:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>
299: 
300:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
301:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>
302: 
303:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">new</span>
304:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>
305: 
306:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
307:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">approved?</span>
308:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003021" class="method">
  <div id="M003021_title" class="title">
    <b>test_chaining_should_use_latest_conditions_when_searching</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003021_source')" id="l_M003021_source">show source</a> ]</p>
  <div id="M003021_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 310</span>
310:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_chaining_should_use_latest_conditions_when_searching</span>
311:     <span class="ruby-comment cmt"># Normal hash conditions</span>
312:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">all</span>
313:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>}), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">rejected</span>.<span class="ruby-identifier">all</span>
314: 
315:     <span class="ruby-comment cmt"># Nested hash conditions with same keys</span>
316:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_comments</span>)], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_special_comments</span>.<span class="ruby-identifier">with_very_special_comments</span>.<span class="ruby-identifier">all</span>
317: 
318:     <span class="ruby-comment cmt"># Nested hash conditions with different keys</span>
319:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:sti_comments</span>)], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_special_comments</span>.<span class="ruby-identifier">with_post</span>(<span class="ruby-value">4</span>).<span class="ruby-identifier">all</span>.<span class="ruby-identifier">uniq</span>
320:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003019" class="method">
  <div id="M003019_title" class="title">
    <b>test_chaining_with_duplicate_joins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003019_source')" id="l_M003019_source">show source</a> ]</p>
  <div id="M003019_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 290</span>
290:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_chaining_with_duplicate_joins</span>
291:     <span class="ruby-identifier">join</span> = <span class="ruby-value str">&quot;INNER JOIN comments ON comments.post_id = posts.id&quot;</span>
292:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>)
293:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">scoped</span>(<span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">join</span>).<span class="ruby-identifier">scoped</span>(<span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">join</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.id = #{post.id}&quot;</span>).<span class="ruby-identifier">size</span>
294:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002981" class="method">
  <div id="M002981_title" class="title">
    <b>test_delegates_finds_and_calculations_to_the_base_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002981_source')" id="l_M002981_source">show source</a> ]</p>
  <div id="M002981_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 40</span>
40:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delegates_finds_and_calculations_to_the_base_class</span>
41:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>).<span class="ruby-identifier">empty?</span>
42: 
43:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>),               <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
44:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>),             <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
45:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>,                    <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">count</span>
46:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">average</span>(<span class="ruby-identifier">:replies_count</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">average</span>(<span class="ruby-identifier">:replies_count</span>)
47:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003005" class="method">
  <div id="M003005_title" class="title">
    <b>test_empty_should_not_load_results</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003005_source')" id="l_M003005_source">show source</a> ]</p>
  <div id="M003005_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_should_not_load_results</span>
206:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
207:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
208:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">empty?</span>  <span class="ruby-comment cmt"># use count query</span>
209:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span> <span class="ruby-comment cmt"># force load</span>
210:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">empty?</span>  <span class="ruby-comment cmt"># use loaded (no query)</span>
211:     <span class="ruby-keyword kw">end</span>
212:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002993" class="method">
  <div id="M002993_title" class="title">
    <b>test_extensions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002993_source')" id="l_M002993_source">show source</a> ]</p>
  <div id="M002993_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 127</span>
127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_extensions</span>
128:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">anonymous_extension</span>.<span class="ruby-identifier">one</span>
129:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">named_extension</span>.<span class="ruby-identifier">two</span>
130:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003014" class="method">
  <div id="M003014_title" class="title">
    <b>test_find_all_should_behave_like_select</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003014_source')" id="l_M003014_source">show source</a> ]</p>
  <div id="M003014_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 263</span>
263:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_should_behave_like_select</span>
264:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:approved</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">find_all</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:approved</span>)
265:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003004" class="method">
  <div id="M003004_title" class="title">
    <b>test_first_and_last_find_options_should_use_query_when_results_are_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003004_source')" id="l_M003004_source">show source</a> ]</p>
  <div id="M003004_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_and_last_find_options_should_use_query_when_results_are_loaded</span>
197:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
198:     <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment cmt"># force load</span>
199:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
200:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>)
201:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>)
202:     <span class="ruby-keyword kw">end</span>
203:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003002" class="method">
  <div id="M003002_title" class="title">
    <b>test_first_and_last_should_allow_integers_for_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003002_source')" id="l_M003002_source">show source</a> ]</p>
  <div id="M003002_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_and_last_should_allow_integers_for_limit</span>
183:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">2</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">first</span>(<span class="ruby-value">2</span>)
184:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">last</span>(<span class="ruby-value">2</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">last</span>(<span class="ruby-value">2</span>)
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003003" class="method">
  <div id="M003003_title" class="title">
    <b>test_first_and_last_should_not_use_query_when_results_are_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003003_source')" id="l_M003003_source">show source</a> ]</p>
  <div id="M003003_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_and_last_should_not_use_query_when_results_are_loaded</span>
188:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
189:     <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment cmt"># force load</span>
190:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
191:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>
192:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>
193:     <span class="ruby-keyword kw">end</span>
194:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003001" class="method">
  <div id="M003001_title" class="title">
    <b>test_first_and_last_should_support_find_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003001_source')" id="l_M003001_source">show source</a> ]</p>
  <div id="M003001_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 177</span>
177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_and_last_should_support_find_options</span>
178:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>)
179:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">last</span>(<span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>)
180:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002979" class="method">
  <div id="M002979_title" class="title">
    <b>test_found_items_are_cached</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002979_source')" id="l_M002979_source">show source</a> ]</p>
  <div id="M002979_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 21</span>
21:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_found_items_are_cached</span>
22:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">columns</span>
23:     <span class="ruby-identifier">all_posts</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
24: 
25:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
26:       <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">collect</span>
27:       <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">collect</span>
28:     <span class="ruby-keyword kw">end</span>
29:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002995" class="method">
  <div id="M002995_title" class="title">
    <b>test_has_many_associations_have_access_to_named_scopes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002995_source')" id="l_M002995_source">show source</a> ]</p>
  <div id="M002995_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 137</span>
137:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_associations_have_access_to_named_scopes</span>
138:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>
139:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>.<span class="ruby-identifier">empty?</span>
140: 
141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">containing_the_letter_a</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">containing_the_letter_a</span>
142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002996" class="method">
  <div id="M002996_title" class="title">
    <b>test_has_many_through_associations_have_access_to_named_scopes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002996_source')" id="l_M002996_source">show source</a> ]</p>
  <div id="M002996_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_associations_have_access_to_named_scopes</span>
145:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>
146:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>.<span class="ruby-identifier">empty?</span>
147: 
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span> <span class="ruby-operator">&amp;</span> <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">containing_the_letter_e</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">containing_the_letter_e</span>
149:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002978" class="method">
  <div id="M002978_title" class="title">
    <b>test_implements_enumerable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002978_source')" id="l_M002978_source">show source</a> ]</p>
  <div id="M002978_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 12</span>
12:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_implements_enumerable</span>
13:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>).<span class="ruby-identifier">empty?</span>
14: 
15:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>),   <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
16:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>),   <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">to_a</span>
17:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">first</span>
18:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>),   <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span> }
19:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002994" class="method">
  <div id="M002994_title" class="title">
    <b>test_multiple_extensions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002994_source')" id="l_M002994_source">show source</a> ]</p>
  <div id="M002994_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 132</span>
132:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiple_extensions</span>
133:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">multiple_extensions</span>.<span class="ruby-identifier">extension_two</span>
134:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">multiple_extensions</span>.<span class="ruby-identifier">extension_one</span>
135:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003022" class="method">
  <div id="M003022_title" class="title">
    <b>test_named_scopes_batch_finders</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003022_source')" id="l_M003022_source">show source</a> ]</p>
  <div id="M003022_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_scopes_batch_finders</span>
323:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">count</span>
324: 
325:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">4</span>) <span class="ruby-keyword kw">do</span>
326:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">find_each</span>(<span class="ruby-identifier">:batch_size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">approved?</span> }
327:     <span class="ruby-keyword kw">end</span>
328: 
329:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span>
330:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">find_in_batches</span>(<span class="ruby-identifier">:batch_size</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">group</span><span class="ruby-operator">|</span>
331:         <span class="ruby-identifier">group</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">approved?</span> }
332:       <span class="ruby-keyword kw">end</span>
333:     <span class="ruby-keyword kw">end</span>
334:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002997" class="method">
  <div id="M002997_title" class="title">
    <b>test_named_scopes_honor_current_scopes_from_when_defined</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002997_source')" id="l_M002997_source">show source</a> ]</p>
  <div id="M002997_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 151</span>
151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_scopes_honor_current_scopes_from_when_defined</span>
152:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>).<span class="ruby-identifier">empty?</span>
153:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>).<span class="ruby-identifier">empty?</span>
154:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>)
155:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">top</span>(<span class="ruby-value">5</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">top</span>(<span class="ruby-value">5</span>)
156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>.<span class="ruby-identifier">top</span>(<span class="ruby-value">5</span>)
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Post</span>.<span class="ruby-identifier">ranked_by_comments</span>.<span class="ruby-identifier">limit</span>(<span class="ruby-value">5</span>), <span class="ruby-constant">Post</span>.<span class="ruby-identifier">top</span>(<span class="ruby-value">5</span>)
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002989" class="method">
  <div id="M002989_title" class="title">
    <b>test_procedural_scopes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002989_source')" id="l_M002989_source">show source</a> ]</p>
  <div id="M002989_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 93</span>
 93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_procedural_scopes</span>
 94:     <span class="ruby-identifier">topics_written_before_the_third</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'written_on &lt; ?'</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:third</span>).<span class="ruby-identifier">written_on</span>])
 95:     <span class="ruby-identifier">topics_written_before_the_second</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'written_on &lt; ?'</span>, <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">written_on</span>])
 96:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">topics_written_before_the_second</span>, <span class="ruby-identifier">topics_written_before_the_third</span>
 97: 
 98:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics_written_before_the_third</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:third</span>).<span class="ruby-identifier">written_on</span>)
 99:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics_written_before_the_second</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">written_on</span>)
100:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002990" class="method">
  <div id="M002990_title" class="title">
    <b>test_procedural_scopes_returning_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002990_source')" id="l_M002990_source">show source</a> ]</p>
  <div id="M002990_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_procedural_scopes_returning_nil</span>
103:     <span class="ruby-identifier">all_topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
104: 
105:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">all_topics</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">written_before</span>(<span class="ruby-keyword kw">nil</span>)
106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003000" class="method">
  <div id="M003000_title" class="title">
    <b>test_proxy_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003000_source')" id="l_M003000_source">show source</a> ]</p>
  <div id="M003000_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 172</span>
172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_proxy_options</span>
173:     <span class="ruby-identifier">expected_proxy_options</span> = { <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> } }
174:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_proxy_options</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">proxy_options</span>
175:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003015" class="method">
  <div id="M003015_title" class="title">
    <b>test_rand_should_select_a_random_object_from_proxy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003015_source')" id="l_M003015_source">show source</a> ]</p>
  <div id="M003015_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_rand_should_select_a_random_object_from_proxy</span>
268:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">random_element</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Topic</span>)
269:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002980" class="method">
  <div id="M002980_title" class="title">
    <b>test_reload_expires_cache_of_found_items</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002980_source')" id="l_M002980_source">show source</a> ]</p>
  <div id="M002980_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reload_expires_cache_of_found_items</span>
32:     <span class="ruby-identifier">all_posts</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
33:     <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">inspect</span>
34: 
35:     <span class="ruby-identifier">new_post</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">create!</span>
36:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_post</span>)
37:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">all_posts</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_post</span>)
38:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002983" class="method">
  <div id="M002983_title" class="title">
    <b>test_respond_to_respects_include_private_parameter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002983_source')" id="l_M002983_source">show source</a> ]</p>
  <div id="M002983_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_respond_to_respects_include_private_parameter</span>
56:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:load_found</span>)
57:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:load_found</span>, <span class="ruby-keyword kw">true</span>)
58:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002982" class="method">
  <div id="M002982_title" class="title">
    <b>test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002982_source')" id="l_M002982_source">show source</a> ]</p>
  <div id="M002982_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scope_should_respond_to_own_methods_and_methods_of_the_proxy</span>
50:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:proxy_found</span>)
51:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:count</span>)
52:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:length</span>)
53:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002988" class="method">
  <div id="M002988_title" class="title">
    <b>test_scopes_are_composable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002988_source')" id="l_M002988_source">show source</a> ]</p>
  <div id="M002988_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_are_composable</span>
85:     <span class="ruby-identifier">assert_equal</span> (<span class="ruby-identifier">approved</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>})), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>
86:     <span class="ruby-identifier">assert_equal</span> (<span class="ruby-identifier">replied</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'replies_count &gt; 0'</span>)), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>
87:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">approved</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">replied</span>)
88:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-identifier">approved</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">replied</span>).<span class="ruby-identifier">empty?</span>
89: 
90:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">approved</span> <span class="ruby-operator">&amp;</span> <span class="ruby-identifier">replied</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">replied</span>
91:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002987" class="method">
  <div id="M002987_title" class="title">
    <b>test_scopes_can_be_specified_with_deep_hash_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002987_source')" id="l_M002987_source">show source</a> ]</p>
  <div id="M002987_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 80</span>
80:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_can_be_specified_with_deep_hash_conditions</span>
81:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved_as_hash_condition</span>
82:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002991" class="method">
  <div id="M002991_title" class="title">
    <b>test_scopes_with_joins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002991_source')" id="l_M002991_source">show source</a> ]</p>
  <div id="M002991_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_with_joins</span>
109:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">author_addresses</span>(<span class="ruby-identifier">:david_address</span>)
110:     <span class="ruby-identifier">posts_with_authors_at_address</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(
111:       <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'JOIN authors ON authors.id = posts.author_id'</span>,
112:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">'authors.author_address_id = ?'</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">id</span> ]
113:     )
114:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_with_authors_at_address</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_authors_at_address</span>(<span class="ruby-identifier">address</span>)
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002992" class="method">
  <div id="M002992_title" class="title">
    <b>test_scopes_with_joins_respects_custom_select</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002992_source')" id="l_M002992_source">show source</a> ]</p>
  <div id="M002992_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_with_joins_respects_custom_select</span>
118:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">author_addresses</span>(<span class="ruby-identifier">:david_address</span>)
119:     <span class="ruby-identifier">posts_with_authors_at_address_titles</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>,
120:       <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>,
121:       <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'JOIN authors ON authors.id = posts.author_id'</span>,
122:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [ <span class="ruby-value str">'authors.author_address_id = ?'</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">id</span> ]
123:     )
124:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts_with_authors_at_address_titles</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">with_authors_at_address</span>(<span class="ruby-identifier">address</span>).<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'title'</span>)
125:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002985" class="method">
  <div id="M002985_title" class="title">
    <b>test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002985_source')" id="l_M002985_source">show source</a> ]</p>
  <div id="M002985_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 67</span>
67:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_with_options_limit_finds_to_those_matching_the_criteria_specified</span>
68:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}).<span class="ruby-identifier">empty?</span>
69: 
70:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>
71:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>}), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">count</span>
72:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002986" class="method">
  <div id="M002986_title" class="title">
    <b>test_scopes_with_string_name_can_be_composed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002986_source')" id="l_M002986_source">show source</a> ]</p>
  <div id="M002986_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 74</span>
74:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scopes_with_string_name_can_be_composed</span>
75:     <span class="ruby-comment cmt"># NOTE that scopes defined with a string as a name worked on their own</span>
76:     <span class="ruby-comment cmt"># but when called on another scope the other scope was completely replaced</span>
77:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">replied</span>.<span class="ruby-identifier">approved_as_string</span>
78:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003010" class="method">
  <div id="M003010_title" class="title">
    <b>test_should_build_new_with_proxy_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003010_source')" id="l_M003010_source">show source</a> ]</p>
  <div id="M003010_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 242</span>
242:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_build_new_with_proxy_options</span>
243:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">new</span>
244:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
245:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003009" class="method">
  <div id="M003009_title" class="title">
    <b>test_should_build_with_proxy_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003009_source')" id="l_M003009_source">show source</a> ]</p>
  <div id="M003009_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 237</span>
237:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_build_with_proxy_options</span>
238:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">build</span>({})
239:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
240:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003013" class="method">
  <div id="M003013_title" class="title">
    <b>test_should_build_with_proxy_options_chained</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003013_source')" id="l_M003013_source">show source</a> ]</p>
  <div id="M003013_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 257</span>
257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_build_with_proxy_options_chained</span>
258:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">by_lifo</span>.<span class="ruby-identifier">build</span>({})
259:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
260:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'lifo'</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
261:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003012" class="method">
  <div id="M003012_title" class="title">
    <b>test_should_create_with_bang_with_proxy_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003012_source')" id="l_M003012_source">show source</a> ]</p>
  <div id="M003012_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 252</span>
252:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_create_with_bang_with_proxy_options</span>
253:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">create!</span>({})
254:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
255:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003011" class="method">
  <div id="M003011_title" class="title">
    <b>test_should_create_with_proxy_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003011_source')" id="l_M003011_source">show source</a> ]</p>
  <div id="M003011_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 247</span>
247:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_create_with_proxy_options</span>
248:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">approved</span>.<span class="ruby-identifier">create</span>({})
249:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">approved</span>
250:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003016" class="method">
  <div id="M003016_title" class="title">
    <b>test_should_use_where_in_query_for_named_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003016_source')" id="l_M003016_source">show source</a> ]</p>
  <div id="M003016_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 271</span>
271:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_use_where_in_query_for_named_scope</span>
272:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'Jamis'</span>).<span class="ruby-identifier">to_set</span>, <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find_all_by_id</span>(<span class="ruby-constant">Developer</span>.<span class="ruby-identifier">jamises</span>).<span class="ruby-identifier">to_set</span>
273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003017" class="method">
  <div id="M003017_title" class="title">
    <b>test_size_should_use_count_when_results_are_not_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003017_source')" id="l_M003017_source">show source</a> ]</p>
  <div id="M003017_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 275</span>
275:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_size_should_use_count_when_results_are_not_loaded</span>
276:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
277:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
278:       <span class="ruby-identifier">assert_sql</span>(<span class="ruby-regexp re">/COUNT/i</span>) { <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> }
279:     <span class="ruby-keyword kw">end</span>
280:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003018" class="method">
  <div id="M003018_title" class="title">
    <b>test_size_should_use_length_when_results_are_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003018_source')" id="l_M003018_source">show source</a> ]</p>
  <div id="M003018_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 282</span>
282:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_size_should_use_length_when_results_are_loaded</span>
283:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">base</span>
284:     <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">reload</span> <span class="ruby-comment cmt"># force load</span>
285:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
286:       <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span> <span class="ruby-comment cmt"># use loaded (no query)</span>
287:     <span class="ruby-keyword kw">end</span>
288:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002984" class="method">
  <div id="M002984_title" class="title">
    <b>test_subclasses_inherit_scopes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002984_source')" id="l_M002984_source">show source</a> ]</p>
  <div id="M002984_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 60</span>
60:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclasses_inherit_scopes</span>
61:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">scopes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:base</span>)
62: 
63:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">scopes</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:base</span>)
64:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>), <span class="ruby-constant">Reply</span>.<span class="ruby-identifier">base</span>
65:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M003023" class="method">
  <div id="M003023_title" class="title">
    <b>test_table_names_for_chaining_scopes_with_and_without_table_name_included</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M003023_source')" id="l_M003023_source">show source</a> ]</p>
  <div id="M003023_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/named_scope_test.rb, line 336</span>
336:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_table_names_for_chaining_scopes_with_and_without_table_name_included</span>
337:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
338:       <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">for_first_post</span>.<span class="ruby-identifier">for_first_author</span>.<span class="ruby-identifier">all</span>
339:     <span class="ruby-keyword kw">end</span>
340:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>