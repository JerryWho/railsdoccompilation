  <div id="C00000764">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />SexyMigrationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/migration_test_rb.html');">activerecord/test/cases/migration_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005014&name=test_belongs_to_works_like_references" >test_belongs_to_works_like_references</a></li>
  <li><a href="index.html?a=M005016&name=test_integer_creates_integer_column" >test_integer_creates_integer_column</a></li>
  <li><a href="index.html?a=M005011&name=test_references_column_type_adds_id" >test_references_column_type_adds_id</a></li>
  <li><a href="index.html?a=M005012&name=test_references_column_type_with_polymorphic_adds_type" >test_references_column_type_with_polymorphic_adds_type</a></li>
  <li><a href="index.html?a=M005013&name=test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag" >test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</a></li>
  <li><a href="index.html?a=M005017&name=test_string_creates_string_column" >test_string_creates_string_column</a></li>
  <li><a href="index.html?a=M005015&name=test_timestamps_creates_updated_at_and_created_at" >test_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005018&name=test_xml_creates_xml_column" >test_xml_creates_xml_column</a></li>
  <li><a href="index.html?a=M005019&name=with_new_table" >with_new_table</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005014" class="method">
  <div id="M005014_title" class="title">
    <b>test_belongs_to_works_like_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005014_source')" id="l_M005014_source">show source</a> ]</p>
  <div id="M005014_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1270</span>
1270:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_belongs_to_works_like_references</span>
1271:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1272:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1273:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">:customer</span>
1274:       <span class="ruby-keyword kw">end</span>
1275:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005016" class="method">
  <div id="M005016_title" class="title">
    <b>test_integer_creates_integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005016_source')" id="l_M005016_source">show source</a> ]</p>
  <div id="M005016_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1285</span>
1285:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integer_creates_integer_column</span>
1286:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1287:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:foo</span>, <span class="ruby-value str">'integer'</span>, {})
1288:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:bar</span>, <span class="ruby-value str">'integer'</span>, {})
1289:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1290:       <span class="ruby-keyword kw">end</span>
1291:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005011" class="method">
  <div id="M005011_title" class="title">
    <b>test_references_column_type_adds_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005011_source')" id="l_M005011_source">show source</a> ]</p>
  <div id="M005011_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1247</span>
1247:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_adds_id</span>
1248:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1249:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1250:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:customer</span>
1251:       <span class="ruby-keyword kw">end</span>
1252:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005012" class="method">
  <div id="M005012_title" class="title">
    <b>test_references_column_type_with_polymorphic_adds_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005012_source')" id="l_M005012_source">show source</a> ]</p>
  <div id="M005012_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1254</span>
1254:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_adds_type</span>
1255:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1256:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {})
1257:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1258:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1259:       <span class="ruby-keyword kw">end</span>
1260:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005013" class="method">
  <div id="M005013_title" class="title">
    <b>test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005013_source')" id="l_M005013_source">show source</a> ]</p>
  <div id="M005013_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1262</span>
1262:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</span>
1263:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1264:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1265:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1266:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1267:       <span class="ruby-keyword kw">end</span>
1268:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005017" class="method">
  <div id="M005017_title" class="title">
    <b>test_string_creates_string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005017_source')" id="l_M005017_source">show source</a> ]</p>
  <div id="M005017_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1293</span>
1293:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_creates_string_column</span>
1294:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1295:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:foo</span>, <span class="ruby-value str">'string'</span>, {})
1296:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:bar</span>, <span class="ruby-value str">'string'</span>, {})
1297:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1298:       <span class="ruby-keyword kw">end</span>
1299:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005015" class="method">
  <div id="M005015_title" class="title">
    <b>test_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005015_source')" id="l_M005015_source">show source</a> ]</p>
  <div id="M005015_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1277</span>
1277:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_timestamps_creates_updated_at_and_created_at</span>
1278:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1279:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:created_at</span>, <span class="ruby-identifier">:datetime</span>, <span class="ruby-identifier">kind_of</span>(<span class="ruby-constant">Hash</span>))
1280:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:updated_at</span>, <span class="ruby-identifier">:datetime</span>, <span class="ruby-identifier">kind_of</span>(<span class="ruby-constant">Hash</span>))
1281:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
1282:       <span class="ruby-keyword kw">end</span>
1283:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005018" class="method">
  <div id="M005018_title" class="title">
    <b>test_xml_creates_xml_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005018_source')" id="l_M005018_source">show source</a> ]</p>
  <div id="M005018_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1302</span>
1302:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_creates_xml_column</span>
1303:         <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1304:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:data</span>, <span class="ruby-value str">'xml'</span>, {})
1305:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">xml</span> <span class="ruby-identifier">:data</span>
1306:         <span class="ruby-keyword kw">end</span>
1307:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005019" class="method">
  <div id="M005019_title" class="title">
    <b>with_new_table</b>() {|t| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005019_source')" id="l_M005019_source">show source</a> ]</p>
  <div id="M005019_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1311</span>
1311:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_new_table</span>
1312:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1313:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">t</span>
1314:       <span class="ruby-keyword kw">end</span>
1315:     <span class="ruby-keyword kw">ensure</span>
1316:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">drop_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1317:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>