  <div id="C00000706">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />SexyMigrationsTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/migration_test_rb.html');">activerecord/test/cases/migration_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005048&name=test_belongs_to_works_like_references" >test_belongs_to_works_like_references</a></li>
  <li><a href="index.html?a=M005050&name=test_integer_creates_integer_column" >test_integer_creates_integer_column</a></li>
  <li><a href="index.html?a=M005045&name=test_references_column_type_adds_id" >test_references_column_type_adds_id</a></li>
  <li><a href="index.html?a=M005046&name=test_references_column_type_with_polymorphic_adds_type" >test_references_column_type_with_polymorphic_adds_type</a></li>
  <li><a href="index.html?a=M005047&name=test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag" >test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</a></li>
  <li><a href="index.html?a=M005051&name=test_string_creates_string_column" >test_string_creates_string_column</a></li>
  <li><a href="index.html?a=M005049&name=test_timestamps_creates_updated_at_and_created_at" >test_timestamps_creates_updated_at_and_created_at</a></li>
  <li><a href="index.html?a=M005052&name=test_xml_creates_xml_column" >test_xml_creates_xml_column</a></li>
  <li><a href="index.html?a=M005053&name=with_new_table" >with_new_table</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005048" class="method">
  <div id="M005048_title" class="title">
    <b>test_belongs_to_works_like_references</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005048_source')" id="l_M005048_source">show source</a> ]</p>
  <div id="M005048_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1385</span>
1385:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_belongs_to_works_like_references</span>
1386:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1387:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1388:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">belongs_to</span> <span class="ruby-identifier">:customer</span>
1389:       <span class="ruby-keyword kw">end</span>
1390:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005050" class="method">
  <div id="M005050_title" class="title">
    <b>test_integer_creates_integer_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005050_source')" id="l_M005050_source">show source</a> ]</p>
  <div id="M005050_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1400</span>
1400:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_integer_creates_integer_column</span>
1401:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1402:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:foo</span>, <span class="ruby-value str">'integer'</span>, {})
1403:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:bar</span>, <span class="ruby-value str">'integer'</span>, {})
1404:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">integer</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1405:       <span class="ruby-keyword kw">end</span>
1406:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005045" class="method">
  <div id="M005045_title" class="title">
    <b>test_references_column_type_adds_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005045_source')" id="l_M005045_source">show source</a> ]</p>
  <div id="M005045_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1362</span>
1362:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_adds_id</span>
1363:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1364:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'customer_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1365:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:customer</span>
1366:       <span class="ruby-keyword kw">end</span>
1367:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005046" class="method">
  <div id="M005046_title" class="title">
    <b>test_references_column_type_with_polymorphic_adds_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005046_source')" id="l_M005046_source">show source</a> ]</p>
  <div id="M005046_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1369</span>
1369:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_adds_type</span>
1370:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1371:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {})
1372:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {})
1373:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>
1374:       <span class="ruby-keyword kw">end</span>
1375:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005047" class="method">
  <div id="M005047_title" class="title">
    <b>test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005047_source')" id="l_M005047_source">show source</a> ]</p>
  <div id="M005047_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1377</span>
1377:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_references_column_type_with_polymorphic_and_options_null_is_false_adds_table_flag</span>
1378:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1379:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_type'</span>, <span class="ruby-identifier">:string</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1380:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'taggable_id'</span>, <span class="ruby-identifier">:integer</span>, {<span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
1381:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">references</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:polymorphic</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:null</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>
1382:       <span class="ruby-keyword kw">end</span>
1383:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005051" class="method">
  <div id="M005051_title" class="title">
    <b>test_string_creates_string_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005051_source')" id="l_M005051_source">show source</a> ]</p>
  <div id="M005051_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1408</span>
1408:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_creates_string_column</span>
1409:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1410:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:foo</span>, <span class="ruby-value str">'string'</span>, {})
1411:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:bar</span>, <span class="ruby-value str">'string'</span>, {})
1412:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">string</span> <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:bar</span>
1413:       <span class="ruby-keyword kw">end</span>
1414:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005049" class="method">
  <div id="M005049_title" class="title">
    <b>test_timestamps_creates_updated_at_and_created_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005049_source')" id="l_M005049_source">show source</a> ]</p>
  <div id="M005049_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1392</span>
1392:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_timestamps_creates_updated_at_and_created_at</span>
1393:       <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1394:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:created_at</span>, <span class="ruby-identifier">:datetime</span>, <span class="ruby-identifier">kind_of</span>(<span class="ruby-constant">Hash</span>))
1395:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:updated_at</span>, <span class="ruby-identifier">:datetime</span>, <span class="ruby-identifier">kind_of</span>(<span class="ruby-constant">Hash</span>))
1396:         <span class="ruby-identifier">t</span>.<span class="ruby-identifier">timestamps</span>
1397:       <span class="ruby-keyword kw">end</span>
1398:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005052" class="method">
  <div id="M005052_title" class="title">
    <b>test_xml_creates_xml_column</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005052_source')" id="l_M005052_source">show source</a> ]</p>
  <div id="M005052_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1417</span>
1417:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_creates_xml_column</span>
1418:         <span class="ruby-identifier">with_new_table</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1419:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:column</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:data</span>, <span class="ruby-value str">'xml'</span>, {})
1420:           <span class="ruby-identifier">t</span>.<span class="ruby-identifier">xml</span> <span class="ruby-identifier">:data</span>
1421:         <span class="ruby-keyword kw">end</span>
1422:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M005053" class="method">
  <div id="M005053_title" class="title">
    <b>with_new_table</b>() {|t| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005053_source')" id="l_M005053_source">show source</a> ]</p>
  <div id="M005053_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/migration_test.rb, line 1426</span>
1426:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_new_table</span>
1427:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">create_table</span> <span class="ruby-identifier">:delete_me</span>, <span class="ruby-identifier">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span>
1428:         <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">t</span>
1429:       <span class="ruby-keyword kw">end</span>
1430:     <span class="ruby-keyword kw">ensure</span>
1431:       <span class="ruby-constant">Person</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">drop_table</span> <span class="ruby-identifier">:delete_me</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
1432:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>