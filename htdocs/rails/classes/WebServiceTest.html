  <div id="C00000727">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />WebServiceTest<br/>
  In:
<a href="#" onclick="jsHref('files/actionpack/test/controller/webservice_test_rb.html');">actionpack/test/controller/webservice_test.rb</a>

Parent:&nbsp;
ActionController::IntegrationTest
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005276&name=setup" >setup</a></li>
  <li><a href="index.html?a=M005277&name=teardown" >teardown</a></li>
  <li><a href="index.html?a=M005278&name=test_check_parameters" >test_check_parameters</a></li>
  <li><a href="index.html?a=M005290&name=test_dasherized_keys_as_xml" >test_dasherized_keys_as_xml</a></li>
  <li><a href="index.html?a=M005292&name=test_entities_unescaped_as_xml_simple" >test_entities_unescaped_as_xml_simple</a></li>
  <li><a href="index.html?a=M005279&name=test_post_xml" >test_post_xml</a></li>
  <li><a href="index.html?a=M005284&name=test_post_xml_using_a_root_node_named_type" >test_post_xml_using_a_root_node_named_type</a></li>
  <li><a href="index.html?a=M005283&name=test_post_xml_using_a_type_node" >test_post_xml_using_a_type_node</a></li>
  <li><a href="index.html?a=M005285&name=test_post_xml_using_an_attributted_node_named_type" >test_post_xml_using_an_attributted_node_named_type</a></li>
  <li><a href="index.html?a=M005280&name=test_put_xml" >test_put_xml</a></li>
  <li><a href="index.html?a=M005281&name=test_put_xml_using_a_type_node" >test_put_xml_using_a_type_node</a></li>
  <li><a href="index.html?a=M005282&name=test_put_xml_using_a_type_node_and_attribute" >test_put_xml_using_a_type_node_and_attribute</a></li>
  <li><a href="index.html?a=M005288&name=test_register_and_use_xml_simple" >test_register_and_use_xml_simple</a></li>
  <li><a href="index.html?a=M005286&name=test_register_and_use_yaml" >test_register_and_use_yaml</a></li>
  <li><a href="index.html?a=M005287&name=test_register_and_use_yaml_as_symbol" >test_register_and_use_yaml_as_symbol</a></li>
  <li><a href="index.html?a=M005291&name=test_typecast_as_xml" >test_typecast_as_xml</a></li>
  <li><a href="index.html?a=M005293&name=test_typecast_as_yaml" >test_typecast_as_yaml</a></li>
  <li><a href="index.html?a=M005289&name=test_use_xml_ximple_with_empty_request" >test_use_xml_ximple_with_empty_request</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/WebServiceTest/TestController.html');" class="link">WebServiceTest::TestController</a>"<br />




<div class="sectiontitle">Public Instance methods</div>
<div id="M005276" class="method">
  <div id="M005276_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005276_source')" id="l_M005276_source">show source</a> ]</p>
  <div id="M005276_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 25</span>
25:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
26:     <span class="ruby-ivar">@controller</span> = <span class="ruby-constant">TestController</span>.<span class="ruby-identifier">new</span>
27:     <span class="ruby-ivar">@default_param_parsers</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>.<span class="ruby-identifier">dup</span>
28:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005277" class="method">
  <div id="M005277_title" class="title">
    <b>teardown</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005277_source')" id="l_M005277_source">show source</a> ]</p>
  <div id="M005277_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">teardown</span>
31:     <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span> = <span class="ruby-ivar">@default_param_parsers</span>
32:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005278" class="method">
  <div id="M005278_title" class="title">
    <b>test_check_parameters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005278_source')" id="l_M005278_source">show source</a> ]</p>
  <div id="M005278_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 34</span>
34:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_check_parameters</span>
35:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
36:       <span class="ruby-identifier">get</span> <span class="ruby-value str">&quot;/&quot;</span>
37:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
38:     <span class="ruby-keyword kw">end</span>
39:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005290" class="method">
  <div id="M005290_title" class="title">
    <b>test_dasherized_keys_as_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005290_source')" id="l_M005290_source">show source</a> ]</p>
  <div id="M005290_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dasherized_keys_as_xml</span>
171:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
172:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-identifier">:xml_simple</span>
173:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/?full=1&quot;</span>, <span class="ruby-value str">&quot;&lt;first-key&gt;\n&lt;sub-key&gt;...&lt;/sub-key&gt;\n&lt;/first-key&gt;&quot;</span>,
174:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
175:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'action, controller, first_key(sub_key), full'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
176:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;...&quot;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:first_key</span>][<span class="ruby-identifier">:sub_key</span>]
177:     <span class="ruby-keyword kw">end</span>
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005292" class="method">
  <div id="M005292_title" class="title">
    <b>test_entities_unescaped_as_xml_simple</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005292_source')" id="l_M005292_source">show source</a> ]</p>
  <div id="M005292_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 210</span>
210:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_entities_unescaped_as_xml_simple</span>
211:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
212:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-identifier">:xml_simple</span>
213:       <span class="ruby-identifier">xml</span> = <span class="ruby-value str">&quot;&lt;data&gt;&amp;lt;foo &amp;quot;bar&amp;apos;s&amp;quot; &amp;amp; friends&amp;gt;&lt;/data&gt;\n&quot;</span>
214:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-identifier">xml</span>, {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
215:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(&lt;foo &quot;bar's&quot; &amp; friends&gt;)</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>]
216:     <span class="ruby-keyword kw">end</span>
217:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005279" class="method">
  <div id="M005279_title" class="title">
    <b>test_post_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005279_source')" id="l_M005279_source">show source</a> ]</p>
  <div id="M005279_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_post_xml</span>
42:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
43:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;entry attributed=&quot;true&quot;&gt;&lt;summary&gt;content...&lt;/summary&gt;&lt;/entry&gt;'</span>,
44:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
45: 
46:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'entry'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
47:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:entry</span>)
48:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'content...'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>][<span class="ruby-value str">'summary'</span>]
49:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'true'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>][<span class="ruby-value str">'attributed'</span>]
50:     <span class="ruby-keyword kw">end</span>
51:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005284" class="method">
  <div id="M005284_title" class="title">
    <b>test_post_xml_using_a_root_node_named_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005284_source')" id="l_M005284_source">show source</a> ]</p>
  <div id="M005284_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_post_xml_using_a_root_node_named_type</span>
102:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
103:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;type type=&quot;integer&quot;&gt;33&lt;/type&gt;'</span>,
104:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
105: 
106:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:type</span>)
107:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">33</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'type'</span>]
108:     <span class="ruby-keyword kw">end</span>
109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005283" class="method">
  <div id="M005283_title" class="title">
    <b>test_post_xml_using_a_type_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005283_source')" id="l_M005283_source">show source</a> ]</p>
  <div id="M005283_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_post_xml_using_a_type_node</span>
90:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
91:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;font attributed=&quot;true&quot;&gt;&lt;type&gt;arial&lt;/type&gt;&lt;/font&gt;'</span>,
92:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
93: 
94:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'font'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
95:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:font</span>)
96:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'arial'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'font'</span>][<span class="ruby-value str">'type'</span>]
97:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'true'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;font&quot;</span>][<span class="ruby-value str">'attributed'</span>]
98:     <span class="ruby-keyword kw">end</span>
99:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005285" class="method">
  <div id="M005285_title" class="title">
    <b>test_post_xml_using_an_attributted_node_named_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005285_source')" id="l_M005285_source">show source</a> ]</p>
  <div id="M005285_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 111</span>
111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_post_xml_using_an_attributted_node_named_type</span>
112:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
113:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">data</span>)[<span class="ruby-value str">'request'</span>].<span class="ruby-identifier">with_indifferent_access</span> }
114:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;request&gt;&lt;type type=&quot;string&quot;&gt;Arial,12&lt;/type&gt;&lt;z&gt;3&lt;/z&gt;&lt;/request&gt;'</span>,
115:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
116: 
117:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'type, z'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
118:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:type</span>)
119:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Arial,12'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'type'</span>], <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">inspect</span>
120:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'3'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">'z'</span>], <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">inspect</span>
121:     <span class="ruby-keyword kw">end</span>
122:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005280" class="method">
  <div id="M005280_title" class="title">
    <b>test_put_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005280_source')" id="l_M005280_source">show source</a> ]</p>
  <div id="M005280_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_put_xml</span>
54:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
55:       <span class="ruby-identifier">put</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;entry attributed=&quot;true&quot;&gt;&lt;summary&gt;content...&lt;/summary&gt;&lt;/entry&gt;'</span>,
56:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
57: 
58:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'entry'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
59:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:entry</span>)
60:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'content...'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>][<span class="ruby-value str">'summary'</span>]
61:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'true'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>][<span class="ruby-value str">'attributed'</span>]
62:     <span class="ruby-keyword kw">end</span>
63:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005281" class="method">
  <div id="M005281_title" class="title">
    <b>test_put_xml_using_a_type_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005281_source')" id="l_M005281_source">show source</a> ]</p>
  <div id="M005281_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_put_xml_using_a_type_node</span>
66:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
67:       <span class="ruby-identifier">put</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;type attributed=&quot;true&quot;&gt;&lt;summary&gt;content...&lt;/summary&gt;&lt;/type&gt;'</span>,
68:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
69: 
70:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'type'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
71:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:type</span>)
72:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'content...'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;type&quot;</span>][<span class="ruby-value str">'summary'</span>]
73:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'true'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;type&quot;</span>][<span class="ruby-value str">'attributed'</span>]
74:     <span class="ruby-keyword kw">end</span>
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005282" class="method">
  <div id="M005282_title" class="title">
    <b>test_put_xml_using_a_type_node_and_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005282_source')" id="l_M005282_source">show source</a> ]</p>
  <div id="M005282_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_put_xml_using_a_type_node_and_attribute</span>
78:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
79:       <span class="ruby-identifier">put</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;type attributed=&quot;true&quot;&gt;&lt;summary type=&quot;boolean&quot;&gt;false&lt;/summary&gt;&lt;/type&gt;'</span>,
80:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
81: 
82:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'type'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
83:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:type</span>)
84:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;type&quot;</span>][<span class="ruby-value str">'summary'</span>]
85:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'true'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;type&quot;</span>][<span class="ruby-value str">'attributed'</span>]
86:     <span class="ruby-keyword kw">end</span>
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005288" class="method">
  <div id="M005288_title" class="title">
    <b>test_register_and_use_xml_simple</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005288_source')" id="l_M005288_source">show source</a> ]</p>
  <div id="M005288_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 148</span>
148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_register_and_use_xml_simple</span>
149:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
150:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">data</span><span class="ruby-operator">|</span> <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">from_xml</span>(<span class="ruby-identifier">data</span>)[<span class="ruby-value str">'request'</span>].<span class="ruby-identifier">with_indifferent_access</span> }
151:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">'&lt;request&gt;&lt;summary&gt;content...&lt;/summary&gt;&lt;title&gt;SimpleXml&lt;/title&gt;&lt;/request&gt;'</span>,
152:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
153: 
154:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'summary, title'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
155:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:summary</span>)
156:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:title</span>)
157:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'content...'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;summary&quot;</span>]
158:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'SimpleXml'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;title&quot;</span>]
159:     <span class="ruby-keyword kw">end</span>
160:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005286" class="method">
  <div id="M005286_title" class="title">
    <b>test_register_and_use_yaml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005286_source')" id="l_M005286_source">show source</a> ]</p>
  <div id="M005286_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 124</span>
124:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_register_and_use_yaml</span>
125:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
126:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">YAML</span>] = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-constant">YAML</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">d</span>) }
127:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, {<span class="ruby-value str">&quot;entry&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;loaded from yaml&quot;</span>}.<span class="ruby-identifier">to_yaml</span>,
128:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/x-yaml'</span>}
129: 
130:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'entry'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
131:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:entry</span>)
132:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'loaded from yaml'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>]
133:     <span class="ruby-keyword kw">end</span>
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005287" class="method">
  <div id="M005287_title" class="title">
    <b>test_register_and_use_yaml_as_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005287_source')" id="l_M005287_source">show source</a> ]</p>
  <div id="M005287_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_register_and_use_yaml_as_symbol</span>
137:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
138:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">YAML</span>] = <span class="ruby-identifier">:yaml</span>
139:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, {<span class="ruby-value str">&quot;entry&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;loaded from yaml&quot;</span>}.<span class="ruby-identifier">to_yaml</span>,
140:         {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/x-yaml'</span>}
141: 
142:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'entry'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
143:       <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">:entry</span>)
144:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'loaded from yaml'</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>[<span class="ruby-value str">&quot;entry&quot;</span>]
145:     <span class="ruby-keyword kw">end</span>
146:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005291" class="method">
  <div id="M005291_title" class="title">
    <b>test_typecast_as_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005291_source')" id="l_M005291_source">show source</a> ]</p>
  <div id="M005291_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_typecast_as_xml</span>
181:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
182:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-identifier">:xml_simple</span>
183:       <span class="ruby-identifier">xml</span> = <span class="ruby-value str">&quot;&lt;data&gt;\n&lt;a type=\&quot;integer\&quot;&gt;15&lt;/a&gt;\n&lt;b type=\&quot;boolean\&quot;&gt;false&lt;/b&gt;\n&lt;c type=\&quot;boolean\&quot;&gt;true&lt;/c&gt;\n&lt;d type=\&quot;date\&quot;&gt;2005-03-17&lt;/d&gt;\n&lt;e type=\&quot;datetime\&quot;&gt;2005-03-17T21:41:07Z&lt;/e&gt;\n&lt;f&gt;unparsed&lt;/f&gt;\n&lt;g type=\&quot;integer\&quot;&gt;1&lt;/g&gt;\n&lt;g&gt;hello&lt;/g&gt;\n&lt;g type=\&quot;date\&quot;&gt;1974-07-25&lt;/g&gt;\n&lt;/data&gt;\n&quot;</span>
184:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-identifier">xml</span>, {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>}
185: 
186:       <span class="ruby-identifier">params</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>
187:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:a</span>]
188:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:b</span>]
189:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:c</span>]
190:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2005</span>,<span class="ruby-value">3</span>,<span class="ruby-value">17</span>), <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:d</span>]
191:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2005</span>,<span class="ruby-value">3</span>,<span class="ruby-value">17</span>,<span class="ruby-value">21</span>,<span class="ruby-value">41</span>,<span class="ruby-value">7</span>), <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:e</span>]
192:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;unparsed&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:f</span>]
193:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>, <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1974</span>,<span class="ruby-value">7</span>,<span class="ruby-value">25</span>)], <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:g</span>]
194:     <span class="ruby-keyword kw">end</span>
195:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005293" class="method">
  <div id="M005293_title" class="title">
    <b>test_typecast_as_yaml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005293_source')" id="l_M005293_source">show source</a> ]</p>
  <div id="M005293_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_typecast_as_yaml</span>
223:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
224:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">YAML</span>] = <span class="ruby-identifier">:yaml</span>
225:       <span class="ruby-identifier">yaml</span> = <span class="ruby-value str">&quot;---\ndata:\na: 15\nb: false\nc: true\nd: 2005-03-17\ne: 2005-03-17T21:41:07Z\nf: unparsed\ng:\n- 1\n- hello\n- 1974-07-25\n&quot;</span>
226:       <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-identifier">yaml</span>, {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/x-yaml'</span>}
227:       <span class="ruby-identifier">params</span> = <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">params</span>
228:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:a</span>]
229:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:b</span>]
230:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:c</span>]
231:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">2005</span>,<span class="ruby-value">3</span>,<span class="ruby-value">17</span>), <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:d</span>]
232:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Time</span>.<span class="ruby-identifier">utc</span>(<span class="ruby-value">2005</span>,<span class="ruby-value">3</span>,<span class="ruby-value">17</span>,<span class="ruby-value">21</span>,<span class="ruby-value">41</span>,<span class="ruby-value">7</span>), <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:e</span>]
233:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;unparsed&quot;</span>, <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:f</span>]
234:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>, <span class="ruby-value str">&quot;hello&quot;</span>, <span class="ruby-constant">Date</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">1974</span>,<span class="ruby-value">7</span>,<span class="ruby-value">25</span>)], <span class="ruby-identifier">params</span>[<span class="ruby-identifier">:data</span>][<span class="ruby-identifier">:g</span>]
235:     <span class="ruby-keyword kw">end</span>
236:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005289" class="method">
  <div id="M005289_title" class="title">
    <b>test_use_xml_ximple_with_empty_request</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005289_source')" id="l_M005289_source">show source</a> ]</p>
  <div id="M005289_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File actionpack/test/controller/webservice_test.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_use_xml_ximple_with_empty_request</span>
163:     <span class="ruby-identifier">with_test_route_set</span> <span class="ruby-keyword kw">do</span>
164:       <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">param_parsers</span>[<span class="ruby-constant">Mime</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>] = <span class="ruby-identifier">:xml_simple</span>
165:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">post</span> <span class="ruby-value str">&quot;/&quot;</span>, <span class="ruby-value str">&quot;&quot;</span>, {<span class="ruby-value str">'CONTENT_TYPE'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'application/xml'</span>} }
166:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-ivar">@controller</span>.<span class="ruby-identifier">response</span>.<span class="ruby-identifier">body</span>
167:     <span class="ruby-keyword kw">end</span>
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>