  <div id="C00000811">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />AssociationsJoinModelTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/associations/join_model_test_rb.html');">activerecord/test/cases/associations/join_model_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M005481&name=test_add_to_self_referential_has_many_through" >test_add_to_self_referential_has_many_through</a></li>
  <li><a href="index.html?a=M005488&name=test_adding_junk_to_has_many_through_should_raise_type_mismatch" >test_adding_junk_to_has_many_through_should_raise_type_mismatch</a></li>
  <li><a href="index.html?a=M005489&name=test_adding_to_has_many_through_should_return_self" >test_adding_to_has_many_through_should_return_self</a></li>
  <li><a href="index.html?a=M005484&name=test_associating_unsaved_records_with_has_many_through" >test_associating_unsaved_records_with_has_many_through</a></li>
  <li><a href="index.html?a=M005461&name=test_belongs_to_polymorphic_with_counter_cache" >test_belongs_to_polymorphic_with_counter_cache</a></li>
  <li><a href="index.html?a=M005506&name=test_belongs_to_shared_parent" >test_belongs_to_shared_parent</a></li>
  <li><a href="index.html?a=M005460&name=test_both_scoped_and_explicit_joins_should_be_respected" >test_both_scoped_and_explicit_joins_should_be_respected</a></li>
  <li><a href="index.html?a=M005495&name=test_calculations_on_has_many_through_should_disambiguate_fields" >test_calculations_on_has_many_through_should_disambiguate_fields</a></li>
  <li><a href="index.html?a=M005496&name=test_calculations_on_has_many_through_should_not_disambiguate_fields_unless_necessary" >test_calculations_on_has_many_through_should_not_disambiguate_fields_unless_necessary</a></li>
  <li><a href="index.html?a=M005425&name=test_count_polymorphic_has_many" >test_count_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005485&name=test_create_associate_when_adding_to_has_many_through" >test_create_associate_when_adding_to_has_many_through</a></li>
  <li><a href="index.html?a=M005440&name=test_create_bang_polymorphic_with_has_many_scope" >test_create_bang_polymorphic_with_has_many_scope</a></li>
  <li><a href="index.html?a=M005439&name=test_create_polymorphic_has_many_with_scope" >test_create_polymorphic_has_many_with_scope</a></li>
  <li><a href="index.html?a=M005441&name=test_create_polymorphic_has_one_with_scope" >test_create_polymorphic_has_one_with_scope</a></li>
  <li><a href="index.html?a=M005491&name=test_delete_associate_when_deleting_from_has_many_through" >test_delete_associate_when_deleting_from_has_many_through</a></li>
  <li><a href="index.html?a=M005492&name=test_delete_associate_when_deleting_from_has_many_through_with_multiple_tags" >test_delete_associate_when_deleting_from_has_many_through_with_multiple_tags</a></li>
  <li><a href="index.html?a=M005490&name=test_delete_associate_when_deleting_from_has_many_through_with_nonstandard_id" >test_delete_associate_when_deleting_from_has_many_through_with_nonstandard_id</a></li>
  <li><a href="index.html?a=M005442&name=test_delete_polymorphic_has_many_with_delete_all" >test_delete_polymorphic_has_many_with_delete_all</a></li>
  <li><a href="index.html?a=M005443&name=test_delete_polymorphic_has_many_with_destroy" >test_delete_polymorphic_has_many_with_destroy</a></li>
  <li><a href="index.html?a=M005444&name=test_delete_polymorphic_has_many_with_nullify" >test_delete_polymorphic_has_many_with_nullify</a></li>
  <li><a href="index.html?a=M005445&name=test_delete_polymorphic_has_one_with_destroy" >test_delete_polymorphic_has_one_with_destroy</a></li>
  <li><a href="index.html?a=M005446&name=test_delete_polymorphic_has_one_with_nullify" >test_delete_polymorphic_has_one_with_nullify</a></li>
  <li><a href="index.html?a=M005493&name=test_deleting_junk_from_has_many_through_should_raise_type_mismatch" >test_deleting_junk_from_has_many_through_should_raise_type_mismatch</a></li>
  <li><a href="index.html?a=M005479&name=test_eager_belongs_to_and_has_one_not_singularized" >test_eager_belongs_to_and_has_one_not_singularized</a></li>
  <li><a href="index.html?a=M005466&name=test_eager_has_many_polymorphic_with_source_type" >test_eager_has_many_polymorphic_with_source_type</a></li>
  <li><a href="index.html?a=M005477&name=test_eager_load_has_many_through_has_many" >test_eager_load_has_many_through_has_many</a></li>
  <li><a href="index.html?a=M005478&name=test_eager_load_has_many_through_has_many_with_conditions" >test_eager_load_has_many_through_has_many_with_conditions</a></li>
  <li><a href="index.html?a=M005414&name=test_has_many" >test_has_many</a></li>
  <li><a href="index.html?a=M005458&name=test_has_many_array_methods_called_by_method_missing" >test_has_many_array_methods_called_by_method_missing</a></li>
  <li><a href="index.html?a=M005457&name=test_has_many_class_methods_called_by_method_missing" >test_has_many_class_methods_called_by_method_missing</a></li>
  <li><a href="index.html?a=M005453&name=test_has_many_find_all" >test_has_many_find_all</a></li>
  <li><a href="index.html?a=M005456&name=test_has_many_find_conditions" >test_has_many_find_conditions</a></li>
  <li><a href="index.html?a=M005454&name=test_has_many_find_first" >test_has_many_find_first</a></li>
  <li><a href="index.html?a=M005459&name=test_has_many_going_through_join_model_with_custom_foreign_key" >test_has_many_going_through_join_model_with_custom_foreign_key</a></li>
  <li><a href="index.html?a=M005415&name=test_has_many_inherited" >test_has_many_inherited</a></li>
  <li><a href="index.html?a=M005464&name=test_has_many_polymorphic" >test_has_many_polymorphic</a></li>
  <li><a href="index.html?a=M005465&name=test_has_many_polymorphic_with_source_type" >test_has_many_polymorphic_with_source_type</a></li>
  <li><a href="index.html?a=M005486&name=test_has_many_through_collection_size_doesnt_load_target_if_not_loaded" >test_has_many_through_collection_size_doesnt_load_target_if_not_loaded</a></li>
  <li><a href="index.html?a=M005487&name=test_has_many_through_collection_size_uses_counter_cache_if_it_exists" >test_has_many_through_collection_size_uses_counter_cache_if_it_exists</a></li>
  <li><a href="index.html?a=M005510&name=test_has_many_through_goes_through_all_sti_classes" >test_has_many_through_goes_through_all_sti_classes</a></li>
  <li><a href="index.html?a=M005476&name=test_has_many_through_habtm" >test_has_many_through_habtm</a></li>
  <li><a href="index.html?a=M005467&name=test_has_many_through_has_many_find_all" >test_has_many_through_has_many_find_all</a></li>
  <li><a href="index.html?a=M005468&name=test_has_many_through_has_many_find_all_with_custom_class" >test_has_many_through_has_many_find_all_with_custom_class</a></li>
  <li><a href="index.html?a=M005471&name=test_has_many_through_has_many_find_by_id" >test_has_many_through_has_many_find_by_id</a></li>
  <li><a href="index.html?a=M005470&name=test_has_many_through_has_many_find_conditions" >test_has_many_through_has_many_find_conditions</a></li>
  <li><a href="index.html?a=M005469&name=test_has_many_through_has_many_find_first" >test_has_many_through_has_many_find_first</a></li>
  <li><a href="index.html?a=M005475&name=test_has_many_through_has_many_through" >test_has_many_through_has_many_through</a></li>
  <li><a href="index.html?a=M005497&name=test_has_many_through_has_many_with_sti" >test_has_many_through_has_many_with_sti</a></li>
  <li><a href="index.html?a=M005508&name=test_has_many_through_include_checks_if_record_exists_if_target_not_loaded" >test_has_many_through_include_checks_if_record_exists_if_target_not_loaded</a></li>
  <li><a href="index.html?a=M005509&name=test_has_many_through_include_returns_false_for_non_matching_record_to_verify_scoping" >test_has_many_through_include_returns_false_for_non_matching_record_to_verify_scoping</a></li>
  <li><a href="index.html?a=M005507&name=test_has_many_through_include_uses_array_include_after_loaded" >test_has_many_through_include_uses_array_include_after_loaded</a></li>
  <li><a href="index.html?a=M005463&name=test_has_many_through_join_model_with_conditions" >test_has_many_through_join_model_with_conditions</a></li>
  <li><a href="index.html?a=M005473&name=test_has_many_through_polymorphic_has_many" >test_has_many_through_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005472&name=test_has_many_through_polymorphic_has_one" >test_has_many_through_polymorphic_has_one</a></li>
  <li><a href="index.html?a=M005494&name=test_has_many_through_sum_uses_calculations" >test_has_many_through_sum_uses_calculations</a></li>
  <li><a href="index.html?a=M005482&name=test_has_many_through_uses_conditions_specified_on_the_has_many_association" >test_has_many_through_uses_conditions_specified_on_the_has_many_association</a></li>
  <li><a href="index.html?a=M005483&name=test_has_many_through_uses_correct_attributes" >test_has_many_through_uses_correct_attributes</a></li>
  <li><a href="index.html?a=M005418&name=test_has_many_uniq_through_count" >test_has_many_uniq_through_count</a></li>
  <li><a href="index.html?a=M005420&name=test_has_many_uniq_through_dynamic_find" >test_has_many_uniq_through_dynamic_find</a></li>
  <li><a href="index.html?a=M005419&name=test_has_many_uniq_through_find" >test_has_many_uniq_through_find</a></li>
  <li><a href="index.html?a=M005417&name=test_has_many_uniq_through_join_model" >test_has_many_uniq_through_join_model</a></li>
  <li><a href="index.html?a=M005455&name=test_has_many_with_hash_conditions" >test_has_many_with_hash_conditions</a></li>
  <li><a href="index.html?a=M005447&name=test_has_many_with_piggyback" >test_has_many_with_piggyback</a></li>
  <li><a href="index.html?a=M005448&name=test_include_has_many_through" >test_include_has_many_through</a></li>
  <li><a href="index.html?a=M005474&name=test_include_has_many_through_polymorphic_has_many" >test_include_has_many_through_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005452&name=test_include_polymorphic_has_many" >test_include_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005451&name=test_include_polymorphic_has_many_through" >test_include_polymorphic_has_many_through</a></li>
  <li><a href="index.html?a=M005449&name=test_include_polymorphic_has_one" >test_include_polymorphic_has_one</a></li>
  <li><a href="index.html?a=M005450&name=test_include_polymorphic_has_one_defined_in_abstract_parent" >test_include_polymorphic_has_one_defined_in_abstract_parent</a></li>
  <li><a href="index.html?a=M005416&name=test_inherited_has_many" >test_inherited_has_many</a></li>
  <li><a href="index.html?a=M005501&name=test_polymorphic_belongs_to" >test_polymorphic_belongs_to</a></li>
  <li><a href="index.html?a=M005423&name=test_polymorphic_belongs_to" >test_polymorphic_belongs_to</a></li>
  <li><a href="index.html?a=M005421&name=test_polymorphic_has_many" >test_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005499&name=test_polymorphic_has_many" >test_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005435&name=test_polymorphic_has_many_create_model_with_inheritance" >test_polymorphic_has_many_create_model_with_inheritance</a></li>
  <li><a href="index.html?a=M005432&name=test_polymorphic_has_many_create_model_with_inheritance_and_custom_base_class" >test_polymorphic_has_many_create_model_with_inheritance_and_custom_base_class</a></li>
  <li><a href="index.html?a=M005424&name=test_polymorphic_has_many_going_through_join_model" >test_polymorphic_has_many_going_through_join_model</a></li>
  <li><a href="index.html?a=M005431&name=test_polymorphic_has_many_going_through_join_model_with_custom_foreign_key" >test_polymorphic_has_many_going_through_join_model_with_custom_foreign_key</a></li>
  <li><a href="index.html?a=M005430&name=test_polymorphic_has_many_going_through_join_model_with_custom_select_and_joins" >test_polymorphic_has_many_going_through_join_model_with_custom_select_and_joins</a></li>
  <li><a href="index.html?a=M005429&name=test_polymorphic_has_many_going_through_join_model_with_disabled_include" >test_polymorphic_has_many_going_through_join_model_with_disabled_include</a></li>
  <li><a href="index.html?a=M005426&name=test_polymorphic_has_many_going_through_join_model_with_find" >test_polymorphic_has_many_going_through_join_model_with_find</a></li>
  <li><a href="index.html?a=M005427&name=test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection" >test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection</a></li>
  <li><a href="index.html?a=M005428&name=test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection_with_find" >test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection_with_find</a></li>
  <li><a href="index.html?a=M005433&name=test_polymorphic_has_many_going_through_join_model_with_inheritance" >test_polymorphic_has_many_going_through_join_model_with_inheritance</a></li>
  <li><a href="index.html?a=M005434&name=test_polymorphic_has_many_going_through_join_model_with_inheritance_with_custom_class_name" >test_polymorphic_has_many_going_through_join_model_with_inheritance_with_custom_class_name</a></li>
  <li><a href="index.html?a=M005422&name=test_polymorphic_has_one" >test_polymorphic_has_one</a></li>
  <li><a href="index.html?a=M005500&name=test_polymorphic_has_one" >test_polymorphic_has_one</a></li>
  <li><a href="index.html?a=M005436&name=test_polymorphic_has_one_create_model_with_inheritance" >test_polymorphic_has_one_create_model_with_inheritance</a></li>
  <li><a href="index.html?a=M005504&name=test_preload_nil_polymorphic_belongs_to" >test_preload_nil_polymorphic_belongs_to</a></li>
  <li><a href="index.html?a=M005503&name=test_preload_polymorph_many_types" >test_preload_polymorph_many_types</a></li>
  <li><a href="index.html?a=M005505&name=test_preload_polymorphic_has_many" >test_preload_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005502&name=test_preload_polymorphic_has_many_through" >test_preload_polymorphic_has_many_through</a></li>
  <li><a href="index.html?a=M005480&name=test_self_referential_has_many_through" >test_self_referential_has_many_through</a></li>
  <li><a href="index.html?a=M005437&name=test_set_polymorphic_has_many" >test_set_polymorphic_has_many</a></li>
  <li><a href="index.html?a=M005438&name=test_set_polymorphic_has_one" >test_set_polymorphic_has_one</a></li>
  <li><a href="index.html?a=M005462&name=test_unavailable_through_reflection" >test_unavailable_through_reflection</a></li>
  <li><a href="index.html?a=M005498&name=test_uniq_has_many_through_should_retain_order" >test_uniq_has_many_through_should_retain_order</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M005481" class="method">
  <div id="M005481_title" class="title">
    <b>test_add_to_self_referential_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005481_source')" id="l_M005481_source">show source</a> ]</p>
  <div id="M005481_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 430</span>
430:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_to_self_referential_has_many_through</span>
431:     <span class="ruby-identifier">new_author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Bob&quot;</span>)
432:     <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">author_favorites</span>.<span class="ruby-identifier">create</span> <span class="ruby-identifier">:favorite_author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">new_author</span>
433:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_author</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">favorite_authors</span>.<span class="ruby-identifier">first</span>
434:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005488" class="method">
  <div id="M005488_title" class="title">
    <b>test_adding_junk_to_has_many_through_should_raise_type_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005488_source')" id="l_M005488_source">show source</a> ]</p>
  <div id="M005488_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 520</span>
520:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_junk_to_has_many_through_should_raise_type_mismatch</span>
521:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;Uhh what now?&quot;</span> }
522:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005489" class="method">
  <div id="M005489_title" class="title">
    <b>test_adding_to_has_many_through_should_return_self</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005489_source')" id="l_M005489_source">show source</a> ]</p>
  <div id="M005489_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 524</span>
524:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_adding_to_has_many_through_should_return_self</span>
525:     <span class="ruby-identifier">tags</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>
526:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">push</span>(<span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>))
527:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005484" class="method">
  <div id="M005484_title" class="title">
    <b>test_associating_unsaved_records_with_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005484_source')" id="l_M005484_source">show source</a> ]</p>
  <div id="M005484_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 446</span>
446:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_associating_unsaved_records_with_has_many_through</span>
447:     <span class="ruby-identifier">saved_post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>)
448:     <span class="ruby-identifier">new_tag</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;new&quot;</span>)
449: 
450:     <span class="ruby-identifier">saved_post</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_tag</span>
451:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_tag</span>.<span class="ruby-identifier">new_record?</span> <span class="ruby-comment cmt">#consistent with habtm!</span>
452:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">saved_post</span>.<span class="ruby-identifier">new_record?</span>
453:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">saved_post</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_tag</span>)
454: 
455:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_tag</span>.<span class="ruby-identifier">new_record?</span>
456:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">saved_post</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">new_tag</span>)
457: 
458: 
459:     <span class="ruby-identifier">new_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Association replacmenet works!&quot;</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;You best believe it.&quot;</span>)
460:     <span class="ruby-identifier">saved_tag</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>)
461: 
462:     <span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">saved_tag</span>
463:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">new_record?</span>
464:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">saved_tag</span>.<span class="ruby-identifier">new_record?</span>
465:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saved_tag</span>)
466: 
467:     <span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">save!</span>
468:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">new_record?</span>
469:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_post</span>.<span class="ruby-identifier">reload</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">saved_tag</span>)
470: 
471:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">build</span>.<span class="ruby-identifier">new_record?</span>
472:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">new_record?</span>
473:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005461" class="method">
  <div id="M005461_title" class="title">
    <b>test_belongs_to_polymorphic_with_counter_cache</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005461_source')" id="l_M005461_source">show source</a> ]</p>
  <div id="M005461_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 319</span>
319:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_belongs_to_polymorphic_with_counter_cache</span>
320:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)[<span class="ruby-identifier">:taggings_count</span>]
321:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:tag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>))
322:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:reload</span>)[<span class="ruby-identifier">:taggings_count</span>]
323:     <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">destroy</span>
324:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:reload</span>)[<span class="ruby-identifier">:taggings_count</span>]
325:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005506" class="method">
  <div id="M005506_title" class="title">
    <b>test_belongs_to_shared_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005506_source')" id="l_M005506_source">show source</a> ]</p>
  <div id="M005506_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 656</span>
656:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_belongs_to_shared_parent</span>
657:     <span class="ruby-identifier">comments</span> = <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:post</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'post_id = 1'</span>)
658:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
659:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post</span>, <span class="ruby-identifier">comments</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">post</span>
660:     <span class="ruby-keyword kw">end</span>
661:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005460" class="method">
  <div id="M005460_title" class="title">
    <b>test_both_scoped_and_explicit_joins_should_be_respected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005460_source')" id="l_M005460_source">show source</a> ]</p>
  <div id="M005460_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 311</span>
311:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_scoped_and_explicit_joins_should_be_respected</span>
312:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
313:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:with_scope</span>, <span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;left outer join comments on comments.id = posts.id&quot;</span>}) <span class="ruby-keyword kw">do</span>
314:         <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;comments.id, authors.id&quot;</span>, <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;left outer join authors on authors.id = posts.author_id&quot;</span>
315:       <span class="ruby-keyword kw">end</span>
316:     <span class="ruby-keyword kw">end</span>
317:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005495" class="method">
  <div id="M005495_title" class="title">
    <b>test_calculations_on_has_many_through_should_disambiguate_fields</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005495_source')" id="l_M005495_source">show source</a> ]</p>
  <div id="M005495_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 583</span>
583:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_calculations_on_has_many_through_should_disambiguate_fields</span>
584:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">maximum</span>(<span class="ruby-identifier">:id</span>) }
585:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005496" class="method">
  <div id="M005496_title" class="title">
    <b>test_calculations_on_has_many_through_should_not_disambiguate_fields_unless_necessary</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005496_source')" id="l_M005496_source">show source</a> ]</p>
  <div id="M005496_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 587</span>
587:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_calculations_on_has_many_through_should_not_disambiguate_fields_unless_necessary</span>
588:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">maximum</span>(<span class="ruby-value str">&quot;categories.id&quot;</span>) }
589:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005425" class="method">
  <div id="M005425_title" class="title">
    <b>test_count_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005425_source')" id="l_M005425_source">show source</a> ]</p>
  <div id="M005425_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 72</span>
72:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_polymorphic_has_many</span>
73:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
74:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">count</span>
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005485" class="method">
  <div id="M005485_title" class="title">
    <b>test_create_associate_when_adding_to_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005485_source')" id="l_M005485_source">show source</a> ]</p>
  <div id="M005485_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 475</span>
475:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_associate_when_adding_to_has_many_through</span>
476:     <span class="ruby-identifier">count</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">count</span>
477:     <span class="ruby-identifier">push</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'pushme'</span>)
478:     <span class="ruby-identifier">post_thinking</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>)
479:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">push</span> }
480:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tag</span> },
481:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tag in tags collection, got #{wrong.class}.&quot;</span>)
482:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tagging</span> },
483:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tagging in taggings collection, got #{wrong.class}.&quot;</span>)
484:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">size</span>)
485:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
486: 
487:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Tag</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>)
488:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tag</span> },
489:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tag in tags collection, got #{wrong.class}.&quot;</span>)
490:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tagging</span> },
491:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tagging in taggings collection, got #{wrong.class}.&quot;</span>)
492:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">size</span>)
493:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
494: 
495:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'abc'</span>), <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'def'</span>)) }
496:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tag</span> },
497:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tag in tags collection, got #{wrong.class}.&quot;</span>)
498:     <span class="ruby-identifier">assert_nil</span>( <span class="ruby-identifier">wrong</span> = <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">!=</span> <span class="ruby-constant">Tagging</span> },
499:                 <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;Expected a Tagging in taggings collection, got #{wrong.class}.&quot;</span>)
500:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">size</span>)
501:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
502: 
503:     <span class="ruby-comment cmt"># Raises if the wrong reflection name is used to set the Edge belongs_to</span>
504:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">vertices</span>(<span class="ruby-identifier">:vertex_1</span>).<span class="ruby-identifier">sinks</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">vertices</span>(<span class="ruby-identifier">:vertex_5</span>) }
505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005440" class="method">
  <div id="M005440_title" class="title">
    <b>test_create_bang_polymorphic_with_has_many_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005440_source')" id="l_M005440_source">show source</a> ]</p>
  <div id="M005440_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 163</span>
163:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_bang_polymorphic_with_has_many_scope</span>
164:     <span class="ruby-identifier">old_count</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
165:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:tag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>))
166:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
167:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005439" class="method">
  <div id="M005439_title" class="title">
    <b>test_create_polymorphic_has_many_with_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005439_source')" id="l_M005439_source">show source</a> ]</p>
  <div id="M005439_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 156</span>
156:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_polymorphic_has_many_with_scope</span>
157:     <span class="ruby-identifier">old_count</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
158:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:tag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>))
159:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
160:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
161:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005441" class="method">
  <div id="M005441_title" class="title">
    <b>test_create_polymorphic_has_one_with_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005441_source')" id="l_M005441_source">show source</a> ]</p>
  <div id="M005441_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_polymorphic_has_one_with_scope</span>
171:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
172:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:tag</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>))
173:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
174:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
175:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005491" class="method">
  <div id="M005491_title" class="title">
    <b>test_delete_associate_when_deleting_from_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005491_source')" id="l_M005491_source">show source</a> ]</p>
  <div id="M005491_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 543</span>
543:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_associate_when_deleting_from_has_many_through</span>
544:     <span class="ruby-identifier">count</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">count</span>
545:     <span class="ruby-identifier">tags_before</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>
546:     <span class="ruby-identifier">tag</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'doomed'</span>)
547:     <span class="ruby-identifier">post_thinking</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>)
548:     <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tag</span>
549:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">taggings</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
550:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
551: 
552:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">tag</span>) }
553:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">size</span>)
554:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
555:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">taggings</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
556:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tags_before</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">sort</span>)
557:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005492" class="method">
  <div id="M005492_title" class="title">
    <b>test_delete_associate_when_deleting_from_has_many_through_with_multiple_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005492_source')" id="l_M005492_source">show source</a> ]</p>
  <div id="M005492_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 559</span>
559:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_associate_when_deleting_from_has_many_through_with_multiple_tags</span>
560:     <span class="ruby-identifier">count</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">count</span>
561:     <span class="ruby-identifier">tags_before</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>
562:     <span class="ruby-identifier">doomed</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'doomed'</span>)
563:     <span class="ruby-identifier">doomed2</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'doomed2'</span>)
564:     <span class="ruby-identifier">quaked</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'quaked'</span>)
565:     <span class="ruby-identifier">post_thinking</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>)
566:     <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">doomed</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">doomed2</span>
567:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
568: 
569:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">doomed</span>, <span class="ruby-identifier">doomed2</span>, <span class="ruby-identifier">quaked</span>) }
570:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">size</span>)
571:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
572:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tags_before</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">post_thinking</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">sort</span>)
573:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005490" class="method">
  <div id="M005490_title" class="title">
    <b>test_delete_associate_when_deleting_from_has_many_through_with_nonstandard_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005490_source')" id="l_M005490_source">show source</a> ]</p>
  <div id="M005490_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 529</span>
529:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_associate_when_deleting_from_has_many_through_with_nonstandard_id</span>
530:     <span class="ruby-identifier">count</span> = <span class="ruby-identifier">books</span>(<span class="ruby-identifier">:awdr</span>).<span class="ruby-identifier">references</span>.<span class="ruby-identifier">count</span>
531:     <span class="ruby-identifier">references_before</span> = <span class="ruby-identifier">books</span>(<span class="ruby-identifier">:awdr</span>).<span class="ruby-identifier">references</span>
532:     <span class="ruby-identifier">book</span> = <span class="ruby-constant">Book</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Getting Real'</span>)
533:     <span class="ruby-identifier">book_awdr</span> = <span class="ruby-identifier">books</span>(<span class="ruby-identifier">:awdr</span>)
534:     <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">book</span>
535:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
536: 
537:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">book</span>) }
538:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span>.<span class="ruby-identifier">size</span>)
539:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">count</span>, <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span>(<span class="ruby-keyword kw">true</span>).<span class="ruby-identifier">size</span>)
540:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">references_before</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">book_awdr</span>.<span class="ruby-identifier">references</span>.<span class="ruby-identifier">sort</span>)
541:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005442" class="method">
  <div id="M005442_title" class="title">
    <b>test_delete_polymorphic_has_many_with_delete_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005442_source')" id="l_M005442_source">show source</a> ]</p>
  <div id="M005442_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 177</span>
177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_polymorphic_has_many_with_delete_all</span>
178:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
179:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update_attribute</span> <span class="ruby-identifier">:taggable_type</span>, <span class="ruby-value str">'PostWithHasManyDeleteAll'</span>
180:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">find_post_with_dependency</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:has_many</span>, <span class="ruby-identifier">:taggings</span>, <span class="ruby-identifier">:delete_all</span>)
181: 
182:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
183:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">destroy</span>
184:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
185:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
186:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005443" class="method">
  <div id="M005443_title" class="title">
    <b>test_delete_polymorphic_has_many_with_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005443_source')" id="l_M005443_source">show source</a> ]</p>
  <div id="M005443_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_polymorphic_has_many_with_destroy</span>
189:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
190:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update_attribute</span> <span class="ruby-identifier">:taggable_type</span>, <span class="ruby-value str">'PostWithHasManyDestroy'</span>
191:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">find_post_with_dependency</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:has_many</span>, <span class="ruby-identifier">:taggings</span>, <span class="ruby-identifier">:destroy</span>)
192: 
193:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
194:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">destroy</span>
195:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
196:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
197:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005444" class="method">
  <div id="M005444_title" class="title">
    <b>test_delete_polymorphic_has_many_with_nullify</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005444_source')" id="l_M005444_source">show source</a> ]</p>
  <div id="M005444_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 199</span>
199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_polymorphic_has_many_with_nullify</span>
200:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
201:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">update_attribute</span> <span class="ruby-identifier">:taggable_type</span>, <span class="ruby-value str">'PostWithHasManyNullify'</span>
202:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">find_post_with_dependency</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:has_many</span>, <span class="ruby-identifier">:taggings</span>, <span class="ruby-identifier">:nullify</span>)
203: 
204:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
205:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">destroy</span>
206:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
207:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">count</span>
208:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005445" class="method">
  <div id="M005445_title" class="title">
    <b>test_delete_polymorphic_has_one_with_destroy</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005445_source')" id="l_M005445_source">show source</a> ]</p>
  <div id="M005445_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 210</span>
210:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_polymorphic_has_one_with_destroy</span>
211:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>
212:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">update_attribute</span> <span class="ruby-identifier">:taggable_type</span>, <span class="ruby-value str">'PostWithHasOneDestroy'</span>
213:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">find_post_with_dependency</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:has_one</span>, <span class="ruby-identifier">:tagging</span>, <span class="ruby-identifier">:destroy</span>)
214: 
215:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
216:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">destroy</span>
217:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span><span class="ruby-operator">-</span><span class="ruby-value">1</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
218:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>(<span class="ruby-keyword kw">true</span>)
219:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005446" class="method">
  <div id="M005446_title" class="title">
    <b>test_delete_polymorphic_has_one_with_nullify</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005446_source')" id="l_M005446_source">show source</a> ]</p>
  <div id="M005446_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 221</span>
221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete_polymorphic_has_one_with_nullify</span>
222:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>
223:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">update_attribute</span> <span class="ruby-identifier">:taggable_type</span>, <span class="ruby-value str">'PostWithHasOneNullify'</span>
224:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">find_post_with_dependency</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:has_one</span>, <span class="ruby-identifier">:tagging</span>, <span class="ruby-identifier">:nullify</span>)
225: 
226:     <span class="ruby-identifier">old_count</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
227:     <span class="ruby-identifier">post</span>.<span class="ruby-identifier">destroy</span>
228:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">old_count</span>, <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">count</span>
229:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>(<span class="ruby-keyword kw">true</span>)
230:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005493" class="method">
  <div id="M005493_title" class="title">
    <b>test_deleting_junk_from_has_many_through_should_raise_type_mismatch</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005493_source')" id="l_M005493_source">show source</a> ]</p>
  <div id="M005493_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 575</span>
575:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_deleting_junk_from_has_many_through_should_raise_type_mismatch</span>
576:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">AssociationTypeMismatch</span>) { <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">&quot;Uhh what now?&quot;</span>) }
577:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005479" class="method">
  <div id="M005479_title" class="title">
    <b>test_eager_belongs_to_and_has_one_not_singularized</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005479_source')" id="l_M005479_source">show source</a> ]</p>
  <div id="M005479_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 418</span>
418:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_belongs_to_and_has_one_not_singularized</span>
419:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
420:       <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>)
421:       <span class="ruby-constant">AuthorAddress</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>)
422:     <span class="ruby-keyword kw">end</span>
423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005466" class="method">
  <div id="M005466_title" class="title">
    <b>test_eager_has_many_polymorphic_with_source_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005466_source')" id="l_M005466_source">show source</a> ]</p>
  <div id="M005466_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 349</span>
349:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_has_many_polymorphic_with_source_type</span>
350:     <span class="ruby-identifier">tag_with_include</span> = <span class="ruby-constant">Tag</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tagged_posts</span>)
351:     <span class="ruby-identifier">desired</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>)
352:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
353:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">desired</span>, <span class="ruby-identifier">tag_with_include</span>.<span class="ruby-identifier">tagged_posts</span>
354:     <span class="ruby-keyword kw">end</span>
355:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">tag_with_include</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">length</span>
356:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005477" class="method">
  <div id="M005477_title" class="title">
    <b>test_eager_load_has_many_through_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005477_source')" id="l_M005477_source">show source</a> ]</p>
  <div id="M005477_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 403</span>
403:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_through_has_many</span>
404:     <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'name = ?'</span>, <span class="ruby-value str">'David'</span>], <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:comments</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>
405:     <span class="ruby-constant">SpecialComment</span>.<span class="ruby-identifier">new</span>; <span class="ruby-constant">VerySpecialComment</span>.<span class="ruby-identifier">new</span>
406:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
407:       <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>,<span class="ruby-value">5</span>,<span class="ruby-value">6</span>,<span class="ruby-value">7</span>,<span class="ruby-value">8</span>,<span class="ruby-value">9</span>,<span class="ruby-value">10</span>], <span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
408:     <span class="ruby-keyword kw">end</span>
409:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005478" class="method">
  <div id="M005478_title" class="title">
    <b>test_eager_load_has_many_through_has_many_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005478_source')" id="l_M005478_source">show source</a> ]</p>
  <div id="M005478_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 411</span>
411:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_eager_load_has_many_through_has_many_with_conditions</span>
412:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:invalid_tags</span>)
413:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
414:       <span class="ruby-identifier">post</span>.<span class="ruby-identifier">invalid_tags</span>
415:     <span class="ruby-keyword kw">end</span>
416:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005414" class="method">
  <div id="M005414_title" class="title">
    <b>test_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005414_source')" id="l_M005414_source">show source</a> ]</p>
  <div id="M005414_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 19</span>
19:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many</span>
20:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>))
21:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005458" class="method">
  <div id="M005458_title" class="title">
    <b>test_has_many_array_methods_called_by_method_missing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005458_source')" id="l_M005458_source">show source</a> ]</p>
  <div id="M005458_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 301</span>
301:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_array_methods_called_by_method_missing</span>
302:     <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">category</span><span class="ruby-operator">|</span> <span class="ruby-identifier">category</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'General'</span> }
303:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">sort</span> }
304:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005457" class="method">
  <div id="M005457_title" class="title">
    <b>test_has_many_class_methods_called_by_method_missing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005457_source')" id="l_M005457_source">show source</a> ]</p>
  <div id="M005457_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 296</span>
296:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_class_methods_called_by_method_missing</span>
297:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find_all_by_name</span>(<span class="ruby-value str">'General'</span>).<span class="ruby-identifier">first</span>
298:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">'Technology'</span>)
299:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005453" class="method">
  <div id="M005453_title" class="title">
    <b>test_has_many_find_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005453_source')" id="l_M005453_source">show source</a> ]</p>
  <div id="M005453_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 279</span>
279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_find_all</span>
280:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>)], <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>)
281:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005456" class="method">
  <div id="M005456_title" class="title">
    <b>test_has_many_find_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005456_source')" id="l_M005456_source">show source</a> ]</p>
  <div id="M005456_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 291</span>
291:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_find_conditions</span>
292:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;categories.name = 'General'&quot;</span>)
293:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;categories.name = 'Technology'&quot;</span>)
294:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005454" class="method">
  <div id="M005454_title" class="title">
    <b>test_has_many_find_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005454_source')" id="l_M005454_source">show source</a> ]</p>
  <div id="M005454_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 283</span>
283:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_find_first</span>
284:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
285:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005459" class="method">
  <div id="M005459_title" class="title">
    <b>test_has_many_going_through_join_model_with_custom_foreign_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005459_source')" id="l_M005459_source">show source</a> ]</p>
  <div id="M005459_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_going_through_join_model_with_custom_foreign_key</span>
307:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">authors</span>
308:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>)], <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:authorless</span>).<span class="ruby-identifier">authors</span>
309:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005415" class="method">
  <div id="M005415_title" class="title">
    <b>test_has_many_inherited</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005415_source')" id="l_M005415_source">show source</a> ]</p>
  <div id="M005415_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 23</span>
23:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_inherited</span>
24:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:sti_test</span>))
25:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005464" class="method">
  <div id="M005464_title" class="title">
    <b>test_has_many_polymorphic</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005464_source')" id="l_M005464_source">show source</a> ]</p>
  <div id="M005464_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 336</span>
336:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_polymorphic</span>
337:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasManyThroughAssociationPolymorphicError</span> <span class="ruby-keyword kw">do</span>
338:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>), <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">taggables</span>
339:     <span class="ruby-keyword kw">end</span>
340:     <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">EagerLoadPolymorphicError</span> <span class="ruby-keyword kw">do</span>
341:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>), <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bogus_table.column = 1'</span>)
342:     <span class="ruby-keyword kw">end</span>
343:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005465" class="method">
  <div id="M005465_title" class="title">
    <b>test_has_many_polymorphic_with_source_type</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005465_source')" id="l_M005465_source">show source</a> ]</p>
  <div id="M005465_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 345</span>
345:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_polymorphic_with_source_type</span>
346:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>, <span class="ruby-identifier">:thinking</span>), <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>).<span class="ruby-identifier">tagged_posts</span>
347:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005486" class="method">
  <div id="M005486_title" class="title">
    <b>test_has_many_through_collection_size_doesnt_load_target_if_not_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005486_source')" id="l_M005486_source">show source</a> ]</p>
  <div id="M005486_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 507</span>
507:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_collection_size_doesnt_load_target_if_not_loaded</span>
508:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
509:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
510:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">loaded?</span>
511:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005487" class="method">
  <div id="M005487_title" class="title">
    <b>test_has_many_through_collection_size_uses_counter_cache_if_it_exists</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005487_source')" id="l_M005487_source">show source</a> ]</p>
  <div id="M005487_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 513</span>
513:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_collection_size_uses_counter_cache_if_it_exists</span>
514:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
515:     <span class="ruby-identifier">author</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:read_attribute</span>).<span class="ruby-identifier">with</span>(<span class="ruby-value str">'comments_count'</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-value">100</span>)
516:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">100</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">size</span>
517:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">loaded?</span>
518:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005510" class="method">
  <div id="M005510_title" class="title">
    <b>test_has_many_through_goes_through_all_sti_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005510_source')" id="l_M005510_source">show source</a> ]</p>
  <div id="M005510_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 695</span>
695:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_goes_through_all_sti_classes</span>
696:     <span class="ruby-identifier">sub_sti_post</span> = <span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:author_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
697:     <span class="ruby-identifier">new_comment</span> = <span class="ruby-identifier">sub_sti_post</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>)
698: 
699:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">9</span>, <span class="ruby-value">10</span>, <span class="ruby-identifier">new_comment</span>.<span class="ruby-identifier">id</span>], <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">sti_post_comments</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
700:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005476" class="method">
  <div id="M005476_title" class="title">
    <b>test_has_many_through_habtm</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005476_source')" id="l_M005476_source">show source</a> ]</p>
  <div id="M005476_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 399</span>
399:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_habtm</span>
400:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasManyThroughSourceAssociationMacroError</span>) { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">post_categories</span> }
401:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005467" class="method">
  <div id="M005467_title" class="title">
    <b>test_has_many_through_has_many_find_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005467_source')" id="l_M005467_source">show source</a> ]</p>
  <div id="M005467_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 358</span>
358:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_find_all</span>
359:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>).<span class="ruby-identifier">first</span>
360:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005468" class="method">
  <div id="M005468_title" class="title">
    <b>test_has_many_through_has_many_find_all_with_custom_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005468_source')" id="l_M005468_source">show source</a> ]</p>
  <div id="M005468_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 362</span>
362:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_find_all_with_custom_class</span>
363:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">funky_comments</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>).<span class="ruby-identifier">first</span>
364:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005471" class="method">
  <div id="M005471_title" class="title">
    <b>test_has_many_through_has_many_find_by_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005471_source')" id="l_M005471_source">show source</a> ]</p>
  <div id="M005471_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 375</span>
375:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_find_by_id</span>
376:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:more_greetings</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>)
377:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005470" class="method">
  <div id="M005470_title" class="title">
    <b>test_has_many_through_has_many_find_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005470_source')" id="l_M005470_source">show source</a> ]</p>
  <div id="M005470_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 370</span>
370:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_find_conditions</span>
371:     <span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;comments.#{QUOTED_TYPE}='SpecialComment'&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span> }
372:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:does_it_hurt</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">options</span>)
373:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005469" class="method">
  <div id="M005469_title" class="title">
    <b>test_has_many_through_has_many_find_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005469_source')" id="l_M005469_source">show source</a> ]</p>
  <div id="M005469_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 366</span>
366:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_find_first</span>
367:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:greetings</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'comments.id'</span>)
368:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005475" class="method">
  <div id="M005475_title" class="title">
    <b>test_has_many_through_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005475_source')" id="l_M005475_source">show source</a> ]</p>
  <div id="M005475_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 395</span>
395:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_through</span>
396:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasManyThroughSourceAssociationMacroError</span>) { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">tags</span> }
397:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005497" class="method">
  <div id="M005497_title" class="title">
    <b>test_has_many_through_has_many_with_sti</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005497_source')" id="l_M005497_source">show source</a> ]</p>
  <div id="M005497_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 591</span>
591:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_has_many_with_sti</span>
592:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">comments</span>(<span class="ruby-identifier">:does_it_hurt</span>)], <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">special_post_comments</span>
593:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005508" class="method">
  <div id="M005508_title" class="title">
    <b>test_has_many_through_include_checks_if_record_exists_if_target_not_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005508_source')" id="l_M005508_source">show source</a> ]</p>
  <div id="M005508_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 675</span>
675:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_include_checks_if_record_exists_if_target_not_loaded</span>
676:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
677:     <span class="ruby-identifier">category</span> = <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">first</span>
678: 
679:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">reload</span>
680:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">loaded?</span>
681:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) <span class="ruby-keyword kw">do</span>
682:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">category</span>)
683:     <span class="ruby-keyword kw">end</span>
684:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">loaded?</span>
685:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005509" class="method">
  <div id="M005509_title" class="title">
    <b>test_has_many_through_include_returns_false_for_non_matching_record_to_verify_scoping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005509_source')" id="l_M005509_source">show source</a> ]</p>
  <div id="M005509_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 687</span>
687:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_include_returns_false_for_non_matching_record_to_verify_scoping</span>
688:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
689:     <span class="ruby-identifier">category</span> = <span class="ruby-constant">Category</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Not Associated'</span>)
690: 
691:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">loaded?</span>
692:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">category</span>)
693:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005507" class="method">
  <div id="M005507_title" class="title">
    <b>test_has_many_through_include_uses_array_include_after_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005507_source')" id="l_M005507_source">show source</a> ]</p>
  <div id="M005507_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 663</span>
663:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_include_uses_array_include_after_loaded</span>
664:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>)
665:     <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">class</span> <span class="ruby-comment cmt"># force load target</span>
666: 
667:     <span class="ruby-identifier">category</span> = <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">first</span>
668: 
669:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
670:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">loaded?</span>
671:       <span class="ruby-identifier">assert</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">categories</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">category</span>)
672:     <span class="ruby-keyword kw">end</span>
673:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005463" class="method">
  <div id="M005463_title" class="title">
    <b>test_has_many_through_join_model_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005463_source')" id="l_M005463_source">show source</a> ]</p>
  <div id="M005463_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 331</span>
331:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_join_model_with_conditions</span>
332:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">invalid_taggings</span>
333:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">invalid_tags</span>
334:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005473" class="method">
  <div id="M005473_title" class="title">
    <b>test_has_many_through_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005473_source')" id="l_M005473_source">show source</a> ]</p>
  <div id="M005473_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_polymorphic_has_many</span>
384:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>, <span class="ruby-identifier">:thinking_general</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
385:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005472" class="method">
  <div id="M005472_title" class="title">
    <b>test_has_many_through_polymorphic_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005472_source')" id="l_M005472_source">show source</a> ]</p>
  <div id="M005472_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 379</span>
379:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_polymorphic_has_one</span>
380:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>,<span class="ruby-value">2</span>).<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">tagging</span>
381:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005494" class="method">
  <div id="M005494_title" class="title">
    <b>test_has_many_through_sum_uses_calculations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005494_source')" id="l_M005494_source">show source</a> ]</p>
  <div id="M005494_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 579</span>
579:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_sum_uses_calculations</span>
580:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">sum</span>(<span class="ruby-identifier">:post_id</span>) }
581:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005482" class="method">
  <div id="M005482_title" class="title">
    <b>test_has_many_through_uses_conditions_specified_on_the_has_many_association</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005482_source')" id="l_M005482_source">show source</a> ]</p>
  <div id="M005482_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 436</span>
436:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_uses_conditions_specified_on_the_has_many_association</span>
437:     <span class="ruby-identifier">author</span> = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
438:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">author</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">blank?</span>
439:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">author</span>.<span class="ruby-identifier">nonexistant_comments</span>.<span class="ruby-identifier">blank?</span>
440:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005483" class="method">
  <div id="M005483_title" class="title">
    <b>test_has_many_through_uses_correct_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005483_source')" id="l_M005483_source">show source</a> ]</p>
  <div id="M005483_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 442</span>
442:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_through_uses_correct_attributes</span>
443:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">find_by_name</span>(<span class="ruby-value str">&quot;General&quot;</span>).<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">&quot;tag_id&quot;</span>]
444:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005418" class="method">
  <div id="M005418_title" class="title">
    <b>test_has_many_uniq_through_count</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005418_source')" id="l_M005418_source">show source</a> ]</p>
  <div id="M005418_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_uniq_through_count</span>
37:     <span class="ruby-identifier">author</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>)
38:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">loaded?</span>
39:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">count</span> }
40:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:title</span>) }
41:     <span class="ruby-identifier">assert_queries</span>(<span class="ruby-value">1</span>) { <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:title</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;title is NULL&quot;</span>) }
42:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">loaded?</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005420" class="method">
  <div id="M005420_title" class="title">
    <b>test_has_many_uniq_through_dynamic_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005420_source')" id="l_M005420_source">show source</a> ]</p>
  <div id="M005420_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_uniq_through_dynamic_find</span>
50:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">find_all_by_title</span>(<span class="ruby-value str">&quot;So I was thinking&quot;</span>).<span class="ruby-identifier">size</span>
51:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005419" class="method">
  <div id="M005419_title" class="title">
    <b>test_has_many_uniq_through_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005419_source')" id="l_M005419_source">show source</a> ]</p>
  <div id="M005419_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_uniq_through_find</span>
46:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>).<span class="ruby-identifier">size</span>
47:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005417" class="method">
  <div id="M005417_title" class="title">
    <b>test_has_many_uniq_through_join_model</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005417_source')" id="l_M005417_source">show source</a> ]</p>
  <div id="M005417_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 31</span>
31:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_uniq_through_join_model</span>
32:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">categorized_posts</span>.<span class="ruby-identifier">size</span>
33:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">unique_categorized_posts</span>.<span class="ruby-identifier">size</span>
34:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005455" class="method">
  <div id="M005455_title" class="title">
    <b>test_has_many_with_hash_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005455_source')" id="l_M005455_source">show source</a> ]</p>
  <div id="M005455_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 287</span>
287:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_with_hash_conditions</span>
288:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">categories_like_general</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
289:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005447" class="method">
  <div id="M005447_title" class="title">
    <b>test_has_many_with_piggyback</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005447_source')" id="l_M005447_source">show source</a> ]</p>
  <div id="M005447_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 232</span>
232:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_has_many_with_piggyback</span>
233:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:sti_test</span>).<span class="ruby-identifier">authors</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">post_id</span>.<span class="ruby-identifier">to_s</span>
234:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005448" class="method">
  <div id="M005448_title" class="title">
    <b>test_include_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005448_source')" id="l_M005448_source">show source</a> ]</p>
  <div id="M005448_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 236</span>
236:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_has_many_through</span>
237:     <span class="ruby-identifier">posts</span>              = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
238:     <span class="ruby-identifier">posts_with_authors</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:authors</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
239:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">posts_with_authors</span>.<span class="ruby-identifier">length</span>
240:     <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
241:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">authors</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_authors</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">authors</span>.<span class="ruby-identifier">length</span> }
242:     <span class="ruby-keyword kw">end</span>
243:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005474" class="method">
  <div id="M005474_title" class="title">
    <b>test_include_has_many_through_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005474_source')" id="l_M005474_source">show source</a> ]</p>
  <div id="M005474_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 387</span>
387:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_has_many_through_polymorphic_has_many</span>
388:     <span class="ruby-identifier">author</span>            = <span class="ruby-constant">Author</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>)
389:     <span class="ruby-identifier">expected_taggings</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>, <span class="ruby-identifier">:thinking_general</span>)
390:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
391:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected_taggings</span>, <span class="ruby-identifier">author</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">sort_by</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-identifier">t</span>.<span class="ruby-identifier">id</span> }
392:     <span class="ruby-keyword kw">end</span>
393:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005452" class="method">
  <div id="M005452_title" class="title">
    <b>test_include_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005452_source')" id="l_M005452_source">show source</a> ]</p>
  <div id="M005452_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_polymorphic_has_many</span>
271:     <span class="ruby-identifier">posts</span>               = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
272:     <span class="ruby-identifier">posts_with_taggings</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">posts_with_taggings</span>.<span class="ruby-identifier">length</span>
274:     <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
275:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_taggings</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">length</span> }
276:     <span class="ruby-keyword kw">end</span>
277:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005451" class="method">
  <div id="M005451_title" class="title">
    <b>test_include_polymorphic_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005451_source')" id="l_M005451_source">show source</a> ]</p>
  <div id="M005451_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_polymorphic_has_many_through</span>
262:     <span class="ruby-identifier">posts</span>           = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
263:     <span class="ruby-identifier">posts_with_tags</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tags</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
264:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">posts_with_tags</span>.<span class="ruby-identifier">length</span>
265:     <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
266:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_tags</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span> }
267:     <span class="ruby-keyword kw">end</span>
268:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005449" class="method">
  <div id="M005449_title" class="title">
    <b>test_include_polymorphic_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005449_source')" id="l_M005449_source">show source</a> ]</p>
  <div id="M005449_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 245</span>
245:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_polymorphic_has_one</span>
246:     <span class="ruby-identifier">post</span>    = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tagging</span>)
247:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>)
248:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
249:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tagging</span>, <span class="ruby-identifier">post</span>.<span class="ruby-identifier">tagging</span>
250:     <span class="ruby-keyword kw">end</span>
251:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005450" class="method">
  <div id="M005450_title" class="title">
    <b>test_include_polymorphic_has_one_defined_in_abstract_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005450_source')" id="l_M005450_source">show source</a> ]</p>
  <div id="M005450_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 253</span>
253:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_include_polymorphic_has_one_defined_in_abstract_parent</span>
254:     <span class="ruby-identifier">item</span>    = <span class="ruby-constant">Item</span>.<span class="ruby-identifier">find_by_id</span>(<span class="ruby-identifier">items</span>(<span class="ruby-identifier">:dvd</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tagging</span>)
255:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:godfather</span>)
256:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
257:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tagging</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">tagging</span>
258:     <span class="ruby-keyword kw">end</span>
259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005416" class="method">
  <div id="M005416_title" class="title">
    <b>test_inherited_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005416_source')" id="l_M005416_source">show source</a> ]</p>
  <div id="M005416_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inherited_has_many</span>
28:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">categories</span>(<span class="ruby-identifier">:sti_test</span>).<span class="ruby-identifier">authors</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>))
29:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005501" class="method">
  <div id="M005501_title" class="title">
    <b>test_polymorphic_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005501_source')" id="l_M005501_source">show source</a> ]</p>
  <div id="M005501_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 615</span>
615:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_belongs_to</span>
616:     <span class="ruby-identifier">p</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:taggings</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggable</span>})
617:     <span class="ruby-identifier">assert_no_queries</span> {<span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>), <span class="ruby-identifier">p</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">taggable</span>}
618:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005423" class="method">
  <div id="M005423_title" class="title">
    <b>test_polymorphic_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005423_source')" id="l_M005423_source">show source</a> ]</p>
  <div id="M005423_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_belongs_to</span>
62:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>), <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">taggable</span>
63:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005421" class="method">
  <div id="M005421_title" class="title">
    <b>test_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005421_source')" id="l_M005421_source">show source</a> ]</p>
  <div id="M005421_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many</span>
54:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>))
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005499" class="method">
  <div id="M005499_title" class="title">
    <b>test_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005499_source')" id="l_M005499_source">show source</a> ]</p>
  <div id="M005499_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 601</span>
601:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many</span>
602:     <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>)
603:     <span class="ruby-identifier">p</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>)
604:     <span class="ruby-identifier">assert_no_queries</span> {<span class="ruby-identifier">assert</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expected</span>)}
605:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>))
606:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005435" class="method">
  <div id="M005435_title" class="title">
    <b>test_polymorphic_has_many_create_model_with_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005435_source')" id="l_M005435_source">show source</a> ]</p>
  <div id="M005435_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_create_model_with_inheritance</span>
132:     <span class="ruby-identifier">post</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>)
133:     <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">SpecialPost</span>, <span class="ruby-identifier">post</span>
134: 
135:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:taggable</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">post</span>)
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005432" class="method">
  <div id="M005432_title" class="title">
    <b>test_polymorphic_has_many_create_model_with_inheritance_and_custom_base_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005432_source')" id="l_M005432_source">show source</a> ]</p>
  <div id="M005432_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_create_model_with_inheritance_and_custom_base_class</span>
116:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">SubStiPost</span>.<span class="ruby-identifier">create</span> <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'SubStiPost'</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'SubStiPost body'</span>
117:     <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">SubStiPost</span>, <span class="ruby-identifier">post</span>
118: 
119:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>(<span class="ruby-identifier">:taggable</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">post</span>)
120:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;SubStiPost&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005424" class="method">
  <div id="M005424_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005424_source')" id="l_M005424_source">show source</a> ]</p>
  <div id="M005424_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 65</span>
65:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model</span>
66:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">first</span>
67:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
68:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">tagging</span>
69:     <span class="ruby-keyword kw">end</span>
70:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005431" class="method">
  <div id="M005431_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_custom_foreign_key</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005431_source')" id="l_M005431_source">show source</a> ]</p>
  <div id="M005431_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 110</span>
110:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_custom_foreign_key</span>
111:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>), <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>).<span class="ruby-identifier">super_tag</span>
112:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>), <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">super_tags</span>.<span class="ruby-identifier">first</span>
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005430" class="method">
  <div id="M005430_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_custom_select_and_joins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005430_source')" id="l_M005430_source">show source</a> ]</p>
  <div id="M005430_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 105</span>
105:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_custom_select_and_joins</span>
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">add_joins_and_select</span>.<span class="ruby-identifier">first</span>
107:     <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">author_id</span>
108:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005429" class="method">
  <div id="M005429_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_disabled_include</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005429_source')" id="l_M005429_source">show source</a> ]</p>
  <div id="M005429_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 98</span>
 98:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_disabled_include</span>
 99:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">add_joins_and_select</span>.<span class="ruby-identifier">first</span>
100:     <span class="ruby-identifier">assert_queries</span> <span class="ruby-value">1</span> <span class="ruby-keyword kw">do</span>
101:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">tagging</span>
102:     <span class="ruby-keyword kw">end</span>
103:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005426" class="method">
  <div id="M005426_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005426_source')" id="l_M005426_source">show source</a> ]</p>
  <div id="M005426_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_find</span>
78:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
79:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
80:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">tagging</span>
81:     <span class="ruby-keyword kw">end</span>
82:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005427" class="method">
  <div id="M005427_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005427_source')" id="l_M005427_source">show source</a> ]</p>
  <div id="M005427_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection</span>
85:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">funky_tags</span>.<span class="ruby-identifier">first</span>
86:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
87:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">tagging</span>
88:     <span class="ruby-keyword kw">end</span>
89:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005428" class="method">
  <div id="M005428_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection_with_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005428_source')" id="l_M005428_source">show source</a> ]</p>
  <div id="M005428_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 91</span>
91:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_include_on_source_reflection_with_find</span>
92:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">funky_tags</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>)
93:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
94:       <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">tagging</span>
95:     <span class="ruby-keyword kw">end</span>
96:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005433" class="method">
  <div id="M005433_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005433_source')" id="l_M005433_source">show source</a> ]</p>
  <div id="M005433_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 123</span>
123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_inheritance</span>
124:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">first</span>
125:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005434" class="method">
  <div id="M005434_title" class="title">
    <b>test_polymorphic_has_many_going_through_join_model_with_inheritance_with_custom_class_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005434_source')" id="l_M005434_source">show source</a> ]</p>
  <div id="M005434_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 127</span>
127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_many_going_through_join_model_with_inheritance_with_custom_class_name</span>
128:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:general</span>), <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">funky_tags</span>.<span class="ruby-identifier">first</span>
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005422" class="method">
  <div id="M005422_title" class="title">
    <b>test_polymorphic_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005422_source')" id="l_M005422_source">show source</a> ]</p>
  <div id="M005422_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_one</span>
58:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>), <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>).<span class="ruby-identifier">tagging</span>
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005500" class="method">
  <div id="M005500_title" class="title">
    <b>test_polymorphic_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005500_source')" id="l_M005500_source">show source</a> ]</p>
  <div id="M005500_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 608</span>
608:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_one</span>
609:     <span class="ruby-identifier">expected</span> = <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>)
610: 
611:     <span class="ruby-identifier">tagging</span>  = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">taggings</span>(<span class="ruby-identifier">:welcome_general</span>).<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggable</span>)
612:     <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable</span>}
613:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005436" class="method">
  <div id="M005436_title" class="title">
    <b>test_polymorphic_has_one_create_model_with_inheritance</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005436_source')" id="l_M005436_source">show source</a> ]</p>
  <div id="M005436_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_polymorphic_has_one_create_model_with_inheritance</span>
140:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>).<span class="ruby-identifier">create_tagging</span>(<span class="ruby-identifier">:taggable</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>))
141:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005504" class="method">
  <div id="M005504_title" class="title">
    <b>test_preload_nil_polymorphic_belongs_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005504_source')" id="l_M005504_source">show source</a> ]</p>
  <div id="M005504_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 641</span>
641:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_nil_polymorphic_belongs_to</span>
642:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
643:       <span class="ruby-identifier">taggings</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'taggable_type IS NULL'</span>])
644:     <span class="ruby-keyword kw">end</span>
645:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005503" class="method">
  <div id="M005503_title" class="title">
    <b>test_preload_polymorph_many_types</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005503_source')" id="l_M005503_source">show source</a> ]</p>
  <div id="M005503_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 629</span>
629:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_polymorph_many_types</span>
630:     <span class="ruby-identifier">taggings</span> = <span class="ruby-constant">Tagging</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggable</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'taggable_type != ?'</span>, <span class="ruby-value str">'FakeModel'</span>]
631:     <span class="ruby-identifier">assert_no_queries</span> <span class="ruby-keyword kw">do</span>
632:       <span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">taggable</span>.<span class="ruby-identifier">id</span>
633:       <span class="ruby-identifier">taggings</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">taggable</span>.<span class="ruby-identifier">id</span>
634:     <span class="ruby-keyword kw">end</span>
635: 
636:     <span class="ruby-identifier">taggables</span> = <span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:taggable</span>)
637:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">taggables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">items</span>(<span class="ruby-identifier">:dvd</span>))
638:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">taggables</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:welcome</span>))
639:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005505" class="method">
  <div id="M005505_title" class="title">
    <b>test_preload_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005505_source')" id="l_M005505_source">show source</a> ]</p>
  <div id="M005505_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 647</span>
647:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_polymorphic_has_many</span>
648:     <span class="ruby-identifier">posts</span>               = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
649:     <span class="ruby-identifier">posts_with_taggings</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:taggings</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
650:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">posts_with_taggings</span>.<span class="ruby-identifier">length</span>
651:     <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
652:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_taggings</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">length</span> }
653:     <span class="ruby-keyword kw">end</span>
654:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005502" class="method">
  <div id="M005502_title" class="title">
    <b>test_preload_polymorphic_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005502_source')" id="l_M005502_source">show source</a> ]</p>
  <div id="M005502_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 620</span>
620:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preload_polymorphic_has_many_through</span>
621:     <span class="ruby-identifier">posts</span>           = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
622:     <span class="ruby-identifier">posts_with_tags</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:tags</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
623:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">posts_with_tags</span>.<span class="ruby-identifier">length</span>
624:     <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">length</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
625:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">posts</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">assert_no_queries</span> { <span class="ruby-identifier">posts_with_tags</span>[<span class="ruby-identifier">i</span>].<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">length</span> }
626:     <span class="ruby-keyword kw">end</span>
627:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005480" class="method">
  <div id="M005480_title" class="title">
    <b>test_self_referential_has_many_through</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005480_source')" id="l_M005480_source">show source</a> ]</p>
  <div id="M005480_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 425</span>
425:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_self_referential_has_many_through</span>
426:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>)], <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">favorite_authors</span>
427:     <span class="ruby-identifier">assert_equal</span> [],               <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:mary</span>).<span class="ruby-identifier">favorite_authors</span>
428:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005437" class="method">
  <div id="M005437_title" class="title">
    <b>test_set_polymorphic_has_many</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005437_source')" id="l_M005437_source">show source</a> ]</p>
  <div id="M005437_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_polymorphic_has_many</span>
145:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>
146:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">taggings</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">tagging</span>
147:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005438" class="method">
  <div id="M005438_title" class="title">
    <b>test_set_polymorphic_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005438_source')" id="l_M005438_source">show source</a> ]</p>
  <div id="M005438_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_polymorphic_has_one</span>
151:     <span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tags</span>(<span class="ruby-identifier">:misc</span>).<span class="ruby-identifier">taggings</span>.<span class="ruby-identifier">create</span>
152:     <span class="ruby-identifier">posts</span>(<span class="ruby-identifier">:thinking</span>).<span class="ruby-identifier">tagging</span> = <span class="ruby-identifier">tagging</span>
153:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Post&quot;</span>, <span class="ruby-identifier">tagging</span>.<span class="ruby-identifier">taggable_type</span>
154:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005462" class="method">
  <div id="M005462_title" class="title">
    <b>test_unavailable_through_reflection</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005462_source')" id="l_M005462_source">show source</a> ]</p>
  <div id="M005462_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 327</span>
327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unavailable_through_reflection</span>
328:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">HasManyThroughAssociationNotFoundError</span>) { <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">nothings</span> }
329:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M005498" class="method">
  <div id="M005498_title" class="title">
    <b>test_uniq_has_many_through_should_retain_order</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M005498_source')" id="l_M005498_source">show source</a> ]</p>
  <div id="M005498_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/associations/join_model_test.rb, line 595</span>
595:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uniq_has_many_through_should_retain_order</span>
596:     <span class="ruby-identifier">comment_ids</span> = <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
597:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comment_ids</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">ordered_uniq_comments</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
598:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">comment_ids</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">reverse</span>, <span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">ordered_uniq_comments_desc</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>)
599:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>