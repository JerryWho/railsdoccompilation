  <div id="C00001566">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Loader<br/>
  In:
<a href="#" onclick="jsHref('files/railties/lib/rails/plugin/loader_rb.html');">railties/lib/rails/plugin/loader.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/Object.html');">
Object
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M009165&name=add_engine_controller_paths" >add_engine_controller_paths</a></li>
  <li><a href="index.html?a=M009164&name=add_engine_locales" >add_engine_locales</a></li>
  <li><a href="index.html?a=M009163&name=add_engine_routing_configurations" >add_engine_routing_configurations</a></li>
  <li><a href="index.html?a=M009166&name=add_engine_view_paths" >add_engine_view_paths</a></li>
  <li><a href="index.html?a=M009160&name=add_plugin_load_paths" >add_plugin_load_paths</a></li>
  <li><a href="index.html?a=M009158&name=all_plugins" >all_plugins</a></li>
  <li><a href="index.html?a=M009173&name=application_lib_index" >application_lib_index</a></li>
  <li><a href="index.html?a=M009169&name=configuration" >configuration</a></li>
  <li><a href="index.html?a=M009162&name=configure_engines" >configure_engines</a></li>
  <li><a href="index.html?a=M009172&name=effective_order_of" >effective_order_of</a></li>
  <li><a href="index.html?a=M009174&name=enabled?" >enabled?</a></li>
  <li><a href="index.html?a=M009161&name=engine_metal_paths" >engine_metal_paths</a></li>
  <li><a href="index.html?a=M009157&name=engines" >engines</a></li>
  <li><a href="index.html?a=M009182&name=ensure_all_registered_plugins_are_loaded!" >ensure_all_registered_plugins_are_loaded!</a></li>
  <li><a href="index.html?a=M009175&name=explicit_plugin_loading_order?" >explicit_plugin_loading_order?</a></li>
  <li><a href="index.html?a=M009177&name=explicitly_enabled?" >explicitly_enabled?</a></li>
  <li><a href="index.html?a=M009178&name=explicitly_registered?" >explicitly_registered?</a></li>
  <li><a href="index.html?a=M009159&name=load_plugins" >load_plugins</a></li>
  <li><a href="index.html?a=M009181&name=loaded?" >loaded?</a></li>
  <li><a href="index.html?a=M009167&name=locate_plugins" >locate_plugins</a></li>
  <li><a href="index.html?a=M009155&name=new" >new</a></li>
  <li><a href="index.html?a=M009171&name=order_plugins" >order_plugins</a></li>
  <li><a href="index.html?a=M009156&name=plugins" >plugins</a></li>
  <li><a href="index.html?a=M009168&name=register_plugin_as_loaded" >register_plugin_as_loaded</a></li>
  <li><a href="index.html?a=M009176&name=registered?" >registered?</a></li>
  <li><a href="index.html?a=M009180&name=registered_plugin_names" >registered_plugin_names</a></li>
  <li><a href="index.html?a=M009179&name=registered_plugins_names_plugin?" >registered_plugins_names_plugin?</a></li>
  <li><a href="index.html?a=M009170&name=should_load?" >should_load?</a></li>
  </ul>





  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>initializer</td>
    <td class='attr-desc'></td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M009155" class="method">
  <div id="M009155_title" class="title">
    <b>new</b>(initializer)
  </div>
  <div class="description">
  <p>
Creates a new <a
href="index.html?a=C00001566&name=Plugin::Loader">Plugin::Loader</a>
instance, associated with the given <a
href="index.html?a=C00001552&name=Rails::Initializer">Rails::Initializer</a>.
This default implementation automatically locates all plugins, and adds all
plugin load paths, when it is created. The plugins are then fully loaded
(init.rb is evaluated) when <a
href="index.html?a=M009159&name=load_plugins">load_plugins</a> is called.
</p>
<p>
It is the loader&#8217;s responsibility to ensure that only the plugins
specified in the configuration are actually loaded, and that the order
defined is respected.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009155_source')" id="l_M009155_source">show source</a> ]</p>
  <div id="M009155_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 16</span>
16:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">initializer</span>)
17:         <span class="ruby-ivar">@initializer</span> = <span class="ruby-identifier">initializer</span>
18:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M009160" class="method">
  <div id="M009160_title" class="title">
    <b>add_plugin_load_paths</b>()
  </div>
  <div class="description">
  <p>
Adds the load paths for every plugin into the $LOAD_PATH. <a
href="index.html?a=C00001565&name=Plugin">Plugin</a> load paths are added
<b>after</b> the application&#8217;s <tt>lib</tt> directory, to ensure that
an application can always override code within a plugin.
</p>
<p>
<a href="index.html?a=C00001565&name=Plugin">Plugin</a> load paths are also
added to Dependencies.load_paths, and Dependencies.load_once_paths.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009160_source')" id="l_M009160_source">show source</a> ]</p>
  <div id="M009160_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 52</span>
52:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_plugin_load_paths</span>
53:         <span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span>
54:           <span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span>
55:             <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">insert</span>(<span class="ruby-identifier">application_lib_index</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">path</span>)
56: 
57:             <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>
58: 
59:             <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">reload_plugins?</span>
60:               <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">path</span>
61:             <span class="ruby-keyword kw">end</span>
62:           <span class="ruby-keyword kw">end</span>
63:         <span class="ruby-keyword kw">end</span>
64: 
65:         <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">uniq!</span>
66:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009158" class="method">
  <div id="M009158_title" class="title">
    <b>all_plugins</b>()
  </div>
  <div class="description">
  <p>
Returns all the plugins that could be found by the current locators.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009158_source')" id="l_M009158_source">show source</a> ]</p>
  <div id="M009158_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 31</span>
31:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">all_plugins</span>
32:         <span class="ruby-ivar">@all_plugins</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">locate_plugins</span>
33:         <span class="ruby-ivar">@all_plugins</span>
34:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009161" class="method">
  <div id="M009161_title" class="title">
    <b>engine_metal_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009161_source')" id="l_M009161_source">show source</a> ]</p>
  <div id="M009161_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 68</span>
68:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">engine_metal_paths</span>
69:         <span class="ruby-identifier">engines</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:metal_path</span>)
70:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009157" class="method">
  <div id="M009157_title" class="title">
    <b>engines</b>()
  </div>
  <div class="description">
  <p>
Returns the plugins that are in engine-form (have an app/ directory)
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009157_source')" id="l_M009157_source">show source</a> ]</p>
  <div id="M009157_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 26</span>
26:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">engines</span>
27:         <span class="ruby-ivar">@engines</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:engine?</span>)
28:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009159" class="method">
  <div id="M009159_title" class="title">
    <b>load_plugins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009159_source')" id="l_M009159_source">show source</a> ]</p>
  <div id="M009159_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_plugins</span>
37:         <span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span>
38:           <span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">load</span>(<span class="ruby-identifier">initializer</span>)
39:           <span class="ruby-identifier">register_plugin_as_loaded</span>(<span class="ruby-identifier">plugin</span>)
40:         <span class="ruby-keyword kw">end</span>
41: 
42:         <span class="ruby-identifier">configure_engines</span>
43: 
44:         <span class="ruby-identifier">ensure_all_registered_plugins_are_loaded!</span>
45:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009156" class="method">
  <div id="M009156_title" class="title">
    <b>plugins</b>()
  </div>
  <div class="description">
  <p>
Returns the plugins to be loaded, in the order they should be loaded.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009156_source')" id="l_M009156_source">show source</a> ]</p>
  <div id="M009156_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 21</span>
21:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">plugins</span>
22:         <span class="ruby-ivar">@plugins</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">all_plugins</span>.<span class="ruby-identifier">select</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span> <span class="ruby-identifier">should_load?</span>(<span class="ruby-identifier">plugin</span>) }.<span class="ruby-identifier">sort</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span><span class="ruby-operator">|</span> <span class="ruby-identifier">order_plugins</span>(<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>) }
23:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M009165" class="method">
  <div id="M009165_title" class="title">
    <b>add_engine_controller_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009165_source')" id="l_M009165_source">show source</a> ]</p>
  <div id="M009165_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 94</span>
94:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_engine_controller_paths</span>
95:           <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span>.<span class="ruby-identifier">controller_paths</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">engines</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:controller_path</span>)
96:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009164" class="method">
  <div id="M009164_title" class="title">
    <b>add_engine_locales</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009164_source')" id="l_M009164_source">show source</a> ]</p>
  <div id="M009164_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 88</span>
88:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_engine_locales</span>
89:           <span class="ruby-comment cmt"># reverse it such that the last engine can overwrite translations from the first, like with routes</span>
90:           <span class="ruby-identifier">locale_files</span> = <span class="ruby-identifier">engines</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:localized?</span>).<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:locale_files</span>).<span class="ruby-identifier">reverse</span>.<span class="ruby-identifier">flatten</span>
91:           <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">load_path</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">locale_files</span> <span class="ruby-operator">-</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">load_path</span>
92:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009163" class="method">
  <div id="M009163_title" class="title">
    <b>add_engine_routing_configurations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009163_source')" id="l_M009163_source">show source</a> ]</p>
  <div id="M009163_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 82</span>
82:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_engine_routing_configurations</span>
83:           <span class="ruby-identifier">engines</span>.<span class="ruby-identifier">select</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:routed?</span>).<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:routing_file</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">routing_file</span><span class="ruby-operator">|</span>
84:             <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Routing</span><span class="ruby-operator">::</span><span class="ruby-constant">Routes</span>.<span class="ruby-identifier">add_configuration_file</span>(<span class="ruby-identifier">routing_file</span>)
85:           <span class="ruby-keyword kw">end</span>
86:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009166" class="method">
  <div id="M009166_title" class="title">
    <b>add_engine_view_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009166_source')" id="l_M009166_source">show source</a> ]</p>
  <div id="M009166_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 98</span>
 98:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_engine_view_paths</span>
 99:           <span class="ruby-comment cmt"># reverse it such that the last engine can overwrite view paths from the first, like with routes</span>
100:           <span class="ruby-identifier">paths</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">PathSet</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">engines</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:view_path</span>).<span class="ruby-identifier">reverse</span>)
101:           <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">paths</span>)
102:           <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">view_paths</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">paths</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">frameworks</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">:action_mailer</span>)
103:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009173" class="method">
  <div id="M009173_title" class="title">
    <b>application_lib_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009173_source')" id="l_M009173_source">show source</a> ]</p>
  <div id="M009173_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 147</span>
147:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">application_lib_index</span>
148:           <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-constant">RAILS_ROOT</span>, <span class="ruby-value str">'lib'</span>)) <span class="ruby-operator">||</span> <span class="ruby-value">0</span>
149:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009169" class="method">
  <div id="M009169_title" class="title">
    <b>configuration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009169_source')" id="l_M009169_source">show source</a> ]</p>
  <div id="M009169_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 118</span>
118:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configuration</span>
119:           <span class="ruby-identifier">initializer</span>.<span class="ruby-identifier">configuration</span>
120:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009162" class="method">
  <div id="M009162_title" class="title">
    <b>configure_engines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009162_source')" id="l_M009162_source">show source</a> ]</p>
  <div id="M009162_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 73</span>
73:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">configure_engines</span>
74:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">engines</span>.<span class="ruby-identifier">any?</span>
75:             <span class="ruby-identifier">add_engine_routing_configurations</span>
76:             <span class="ruby-identifier">add_engine_locales</span>
77:             <span class="ruby-identifier">add_engine_controller_paths</span>
78:             <span class="ruby-identifier">add_engine_view_paths</span>
79:           <span class="ruby-keyword kw">end</span>
80:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009172" class="method">
  <div id="M009172_title" class="title">
    <b>effective_order_of</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009172_source')" id="l_M009172_source">show source</a> ]</p>
  <div id="M009172_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 139</span>
139:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">effective_order_of</span>(<span class="ruby-identifier">plugin</span>)
140:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">explicitly_enabled?</span>(<span class="ruby-identifier">plugin</span>)
141:             <span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">index</span>(<span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">name</span>)
142:           <span class="ruby-keyword kw">else</span>
143:             <span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'all'</span>)
144:           <span class="ruby-keyword kw">end</span>
145:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009174" class="method">
  <div id="M009174_title" class="title">
    <b>enabled?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009174_source')" id="l_M009174_source">show source</a> ]</p>
  <div id="M009174_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 151</span>
151:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">enabled?</span>(<span class="ruby-identifier">plugin</span>)
152:           <span class="ruby-operator">!</span><span class="ruby-identifier">explicit_plugin_loading_order?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">registered?</span>(<span class="ruby-identifier">plugin</span>)
153:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009182" class="method">
  <div id="M009182_title" class="title">
    <b>ensure_all_registered_plugins_are_loaded!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009182_source')" id="l_M009182_source">show source</a> ]</p>
  <div id="M009182_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 187</span>
187:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ensure_all_registered_plugins_are_loaded!</span>
188:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">explicit_plugin_loading_order?</span>
189:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">detect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span> <span class="ruby-identifier">plugin</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:all</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">loaded?</span>(<span class="ruby-identifier">plugin</span>) }
190:               <span class="ruby-identifier">missing_plugins</span> = <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">plugins</span> <span class="ruby-operator">-</span> (<span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>} <span class="ruby-operator">+</span> [<span class="ruby-identifier">:all</span>])
191:               <span class="ruby-identifier">raise</span> <span class="ruby-constant">LoadError</span>, <span class="ruby-node">&quot;Could not locate the following plugins: #{missing_plugins.to_sentence(:locale =&gt; :en)}&quot;</span>
192:             <span class="ruby-keyword kw">end</span>
193:           <span class="ruby-keyword kw">end</span>
194:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009175" class="method">
  <div id="M009175_title" class="title">
    <b>explicit_plugin_loading_order?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009175_source')" id="l_M009175_source">show source</a> ]</p>
  <div id="M009175_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 155</span>
155:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">explicit_plugin_loading_order?</span>
156:           <span class="ruby-operator">!</span><span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">nil?</span>
157:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009177" class="method">
  <div id="M009177_title" class="title">
    <b>explicitly_enabled?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009177_source')" id="l_M009177_source">show source</a> ]</p>
  <div id="M009177_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 163</span>
163:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">explicitly_enabled?</span>(<span class="ruby-identifier">plugin</span>)
164:           <span class="ruby-operator">!</span><span class="ruby-identifier">explicit_plugin_loading_order?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">explicitly_registered?</span>(<span class="ruby-identifier">plugin</span>)
165:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009178" class="method">
  <div id="M009178_title" class="title">
    <b>explicitly_registered?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009178_source')" id="l_M009178_source">show source</a> ]</p>
  <div id="M009178_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 167</span>
167:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">explicitly_registered?</span>(<span class="ruby-identifier">plugin</span>)
168:           <span class="ruby-identifier">explicit_plugin_loading_order?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">name</span>)
169:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009181" class="method">
  <div id="M009181_title" class="title">
    <b>loaded?</b>(plugin_name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009181_source')" id="l_M009181_source">show source</a> ]</p>
  <div id="M009181_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 183</span>
183:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">loaded?</span>(<span class="ruby-identifier">plugin_name</span>)
184:           <span class="ruby-identifier">initializer</span>.<span class="ruby-identifier">loaded_plugins</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">plugin</span><span class="ruby-operator">|</span> <span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">plugin_name</span>.<span class="ruby-identifier">to_s</span> }
185:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009167" class="method">
  <div id="M009167_title" class="title">
    <b>locate_plugins</b>()
  </div>
  <div class="description">
  <p>
The <a href="index.html?a=M009167&name=locate_plugins">locate_plugins</a>
method uses each class in config.plugin_locators to find the set of all
plugins available to this <a
href="index.html?a=C00001508&name=Rails">Rails</a> application.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009167_source')" id="l_M009167_source">show source</a> ]</p>
  <div id="M009167_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 107</span>
107:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">locate_plugins</span>
108:           <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">plugin_locators</span>.<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">locator</span><span class="ruby-operator">|</span>
109:             <span class="ruby-identifier">locator</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">initializer</span>).<span class="ruby-identifier">plugins</span>
110:           <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">flatten</span>
111:           <span class="ruby-comment cmt"># TODO: sorting based on config.plugins</span>
112:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009171" class="method">
  <div id="M009171_title" class="title">
    <b>order_plugins</b>(plugin_a, plugin_b)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009171_source')" id="l_M009171_source">show source</a> ]</p>
  <div id="M009171_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 127</span>
127:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">order_plugins</span>(<span class="ruby-identifier">plugin_a</span>, <span class="ruby-identifier">plugin_b</span>)
128:           <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">explicit_plugin_loading_order?</span>
129:             <span class="ruby-identifier">plugin_a</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">plugin_b</span>
130:           <span class="ruby-keyword kw">else</span>
131:             <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">explicitly_enabled?</span>(<span class="ruby-identifier">plugin_a</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">explicitly_enabled?</span>(<span class="ruby-identifier">plugin_b</span>)
132:               <span class="ruby-identifier">plugin_a</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">plugin_b</span>
133:             <span class="ruby-keyword kw">else</span>
134:               <span class="ruby-identifier">effective_order_of</span>(<span class="ruby-identifier">plugin_a</span>) <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">effective_order_of</span>(<span class="ruby-identifier">plugin_b</span>)
135:             <span class="ruby-keyword kw">end</span>
136:           <span class="ruby-keyword kw">end</span>
137:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009168" class="method">
  <div id="M009168_title" class="title">
    <b>register_plugin_as_loaded</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009168_source')" id="l_M009168_source">show source</a> ]</p>
  <div id="M009168_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 114</span>
114:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">register_plugin_as_loaded</span>(<span class="ruby-identifier">plugin</span>)
115:           <span class="ruby-identifier">initializer</span>.<span class="ruby-identifier">loaded_plugins</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">plugin</span>
116:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009176" class="method">
  <div id="M009176_title" class="title">
    <b>registered?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009176_source')" id="l_M009176_source">show source</a> ]</p>
  <div id="M009176_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 159</span>
159:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">registered?</span>(<span class="ruby-identifier">plugin</span>)
160:           <span class="ruby-identifier">explicit_plugin_loading_order?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">registered_plugins_names_plugin?</span>(<span class="ruby-identifier">plugin</span>)
161:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009180" class="method">
  <div id="M009180_title" class="title">
    <b>registered_plugin_names</b>()
  </div>
  <div class="description">
  <p>
The plugins that have been explicitly listed with config.plugins. If this
list is nil then it means the client does not care which plugins or in what
order they are loaded, so we load all in alphabetical order. If it is an
empty array, we load no plugins, if it is non empty, we load the named
plugins in the order specified.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009180_source')" id="l_M009180_source">show source</a> ]</p>
  <div id="M009180_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 179</span>
179:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">registered_plugin_names</span>
180:           <span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">plugins</span> <span class="ruby-value">? </span><span class="ruby-identifier">configuration</span>.<span class="ruby-identifier">plugins</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:to_s</span>) <span class="ruby-operator">:</span> <span class="ruby-keyword kw">nil</span>
181:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009179" class="method">
  <div id="M009179_title" class="title">
    <b>registered_plugins_names_plugin?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009179_source')" id="l_M009179_source">show source</a> ]</p>
  <div id="M009179_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 171</span>
171:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">registered_plugins_names_plugin?</span>(<span class="ruby-identifier">plugin</span>)
172:           <span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">name</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">registered_plugin_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'all'</span>)
173:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M009170" class="method">
  <div id="M009170_title" class="title">
    <b>should_load?</b>(plugin)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M009170_source')" id="l_M009170_source">show source</a> ]</p>
  <div id="M009170_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/lib/rails/plugin/loader.rb, line 122</span>
122:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">should_load?</span>(<span class="ruby-identifier">plugin</span>)
123:           <span class="ruby-comment cmt"># uses Plugin#name and Plugin#valid?</span>
124:           <span class="ruby-identifier">enabled?</span>(<span class="ruby-identifier">plugin</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">plugin</span>.<span class="ruby-identifier">valid?</span>
125:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>