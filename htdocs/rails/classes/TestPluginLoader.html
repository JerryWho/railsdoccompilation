  <div id="C00000382">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestPluginLoader<br/>
  In:
<a href="#" onclick="jsHref('files/railties/test/plugin_loader_test_rb.html');">railties/test/plugin_loader_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M002316&name=setup" >setup</a></li>
  <li><a href="index.html?a=M002332&name=test_engine_controllers_and_action_mailers_should_have_their_view_path_set_when_loaded" >test_engine_controllers_and_action_mailers_should_have_their_view_path_set_when_loaded</a></li>
  <li><a href="index.html?a=M002328&name=test_should_accept_plugin_names_given_as_strings" >test_should_accept_plugin_names_given_as_strings</a></li>
  <li><a href="index.html?a=M002334&name=test_should_add_all_load_paths_from_a_plugin_to_LOAD_PATH_array" >test_should_add_all_load_paths_from_a_plugin_to_LOAD_PATH_array</a></li>
  <li><a href="index.html?a=M002331&name=test_should_add_engine_load_paths_to_Dependencies_load_paths" >test_should_add_engine_load_paths_to_Dependencies_load_paths</a></li>
  <li><a href="index.html?a=M002335&name=test_should_add_locale_files_to_I18n_load_path" >test_should_add_locale_files_to_I18n_load_path</a></li>
  <li><a href="index.html?a=M002333&name=test_should_add_plugin_load_paths_to_Dependencies_load_once_paths" >test_should_add_plugin_load_paths_to_Dependencies_load_once_paths</a></li>
  <li><a href="index.html?a=M002330&name=test_should_add_plugin_load_paths_to_Dependencies_load_paths" >test_should_add_plugin_load_paths_to_Dependencies_load_paths</a></li>
  <li><a href="index.html?a=M002329&name=test_should_add_plugin_load_paths_to_global_LOAD_PATH_array" >test_should_add_plugin_load_paths_to_global_LOAD_PATH_array</a></li>
  <li><a href="index.html?a=M002327&name=test_should_be_able_to_specify_loading_of_plugins_loaded_after_all" >test_should_be_able_to_specify_loading_of_plugins_loaded_after_all</a></li>
  <li><a href="index.html?a=M002320&name=test_should_find_all_availble_plugins_and_return_as_all_plugins" >test_should_find_all_availble_plugins_and_return_as_all_plugins</a></li>
  <li><a href="index.html?a=M002325&name=test_should_load_all_plugins_in_natural_order_when_all_is_used" >test_should_load_all_plugins_in_natural_order_when_all_is_used</a></li>
  <li><a href="index.html?a=M002326&name=test_should_load_specified_plugins_in_order_and_then_all_remaining_plugins_when_all_is_used" >test_should_load_specified_plugins_in_order_and_then_all_remaining_plugins_when_all_is_used</a></li>
  <li><a href="index.html?a=M002317&name=test_should_locate_plugins_by_asking_each_locator_specifed_in_configuration_for_its_plugins_result" >test_should_locate_plugins_by_asking_each_locator_specifed_in_configuration_for_its_plugins_result</a></li>
  <li><a href="index.html?a=M002318&name=test_should_memoize_the_result_of_locate_plugins_as_all_plugins" >test_should_memoize_the_result_of_locate_plugins_as_all_plugins</a></li>
  <li><a href="index.html?a=M002324&name=test_should_respect_the_order_of_plugins_given_in_configuration" >test_should_respect_the_order_of_plugins_given_in_configuration</a></li>
  <li><a href="index.html?a=M002322&name=test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_nil" >test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_nil</a></li>
  <li><a href="index.html?a=M002321&name=test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_untouched" >test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_untouched</a></li>
  <li><a href="index.html?a=M002319&name=test_should_return_empty_array_if_configuration_plugins_is_empty" >test_should_return_empty_array_if_configuration_plugins_is_empty</a></li>
  <li><a href="index.html?a=M002323&name=test_should_return_specific_plugins_named_in_config_plugins_array_if_set" >test_should_return_specific_plugins_named_in_config_plugins_array_if_set</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">ORIGINAL_LOAD_PATH</td>
    <td>=</td>
    <td class="attr-value">$LOAD_PATH.dup</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M002316" class="method">
  <div id="M002316_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002316_source')" id="l_M002316_source">show source</a> ]</p>
  <div id="M002316_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 18</span>
18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
19:     <span class="ruby-identifier">reset_load_path!</span>
20: 
21:     <span class="ruby-ivar">@configuration</span>     = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Configuration</span>.<span class="ruby-identifier">new</span>
22:     <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">plugin_paths</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">plugin_fixture_root_path</span>
23:     <span class="ruby-ivar">@initializer</span>       = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Initializer</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@configuration</span>)
24:     <span class="ruby-ivar">@valid_plugin_path</span> = <span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/stubby'</span>)
25:     <span class="ruby-ivar">@empty_plugin_path</span> = <span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/empty'</span>)
26: 
27:     <span class="ruby-ivar">@failure_tip</span> = <span class="ruby-value str">&quot;It's likely someone has added a new plugin fixture without updating this list&quot;</span>
28: 
29:     <span class="ruby-ivar">@loader</span> = <span class="ruby-constant">Rails</span><span class="ruby-operator">::</span><span class="ruby-constant">Plugin</span><span class="ruby-operator">::</span><span class="ruby-constant">Loader</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@initializer</span>)
30:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002332" class="method">
  <div id="M002332_title" class="title">
    <b>test_engine_controllers_and_action_mailers_should_have_their_view_path_set_when_loaded</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002332_source')" id="l_M002332_source">show source</a> ]</p>
  <div id="M002332_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_engine_controllers_and_action_mailers_should_have_their_view_path_set_when_loaded</span>
131:     <span class="ruby-identifier">only_load_the_following_plugins!</span>([ <span class="ruby-identifier">:engine</span> ])
132: 
133:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:add_engine_view_paths</span>
134:     
135:     <span class="ruby-identifier">assert_equal</span> [ <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'engines/engine'</span>), <span class="ruby-value str">'app'</span>, <span class="ruby-value str">'views'</span>) ], <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">view_paths</span>
136:     <span class="ruby-identifier">assert_equal</span> [ <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'engines/engine'</span>), <span class="ruby-value str">'app'</span>, <span class="ruby-value str">'views'</span>) ], <span class="ruby-constant">ActionMailer</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">view_paths</span>
137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002328" class="method">
  <div id="M002328_title" class="title">
    <b>test_should_accept_plugin_names_given_as_strings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002328_source')" id="l_M002328_source">show source</a> ]</p>
  <div id="M002328_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 93</span>
93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_accept_plugin_names_given_as_strings</span>
94:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-value str">'stubby'</span>, <span class="ruby-value str">'acts_as_chunky_bacon'</span>, <span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>]
95:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
96:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002334" class="method">
  <div id="M002334_title" class="title">
    <b>test_should_add_all_load_paths_from_a_plugin_to_LOAD_PATH_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002334_source')" id="l_M002334_source">show source</a> ]</p>
  <div id="M002334_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 148</span>
148:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_all_load_paths_from_a_plugin_to_LOAD_PATH_array</span>
149:     <span class="ruby-identifier">plugin_load_paths</span> = [<span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-value str">&quot;b&quot;</span>]
150:     <span class="ruby-identifier">plugin</span> = <span class="ruby-identifier">stub</span>(<span class="ruby-identifier">:load_paths</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">plugin_load_paths</span>)
151:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:plugins</span>).<span class="ruby-identifier">returns</span>([<span class="ruby-identifier">plugin</span>])
152: 
153:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">add_plugin_load_paths</span>
154: 
155:     <span class="ruby-identifier">plugin_load_paths</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">path</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert</span> <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">path</span>) }
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002331" class="method">
  <div id="M002331_title" class="title">
    <b>test_should_add_engine_load_paths_to_Dependencies_load_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002331_source')" id="l_M002331_source">show source</a> ]</p>
  <div id="M002331_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_engine_load_paths_to_Dependencies_load_paths</span>
119:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:engine</span>]
120: 
121:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">add_plugin_load_paths</span>
122: 
123:     <span class="ruby-node">%w( models controllers metal helpers )</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">app_part</span><span class="ruby-operator">|</span>
124:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">include?</span>(
125:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'engines/engine'</span>), <span class="ruby-value str">'app'</span>, <span class="ruby-identifier">app_part</span>)
126:       ), <span class="ruby-node">&quot;Couldn't find #{app_part} in load path&quot;</span>
127:     <span class="ruby-keyword kw">end</span>
128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002335" class="method">
  <div id="M002335_title" class="title">
    <b>test_should_add_locale_files_to_I18n_load_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002335_source')" id="l_M002335_source">show source</a> ]</p>
  <div id="M002335_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_locale_files_to_I18n_load_path</span>
159:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:engine</span>]
160: 
161:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">send</span> <span class="ruby-identifier">:add_engine_locales</span>
162: 
163:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">load_path</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'engines/engine'</span>), <span class="ruby-value str">'config'</span>, <span class="ruby-value str">'locales'</span>, <span class="ruby-value str">'en.yml'</span>))
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002333" class="method">
  <div id="M002333_title" class="title">
    <b>test_should_add_plugin_load_paths_to_Dependencies_load_once_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002333_source')" id="l_M002333_source">show source</a> ]</p>
  <div id="M002333_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_plugin_load_paths_to_Dependencies_load_once_paths</span>
140:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>]
141: 
142:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">add_plugin_load_paths</span>
143: 
144:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/stubby'</span>), <span class="ruby-value str">'lib'</span>))
145:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_once_paths</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/acts/acts_as_chunky_bacon'</span>), <span class="ruby-value str">'lib'</span>))
146:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002330" class="method">
  <div id="M002330_title" class="title">
    <b>test_should_add_plugin_load_paths_to_Dependencies_load_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002330_source')" id="l_M002330_source">show source</a> ]</p>
  <div id="M002330_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_plugin_load_paths_to_Dependencies_load_paths</span>
110:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>]
111: 
112:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">add_plugin_load_paths</span>
113: 
114:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/stubby'</span>), <span class="ruby-value str">'lib'</span>))
115:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">Dependencies</span>.<span class="ruby-identifier">load_paths</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/acts/acts_as_chunky_bacon'</span>), <span class="ruby-value str">'lib'</span>))
116:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002329" class="method">
  <div id="M002329_title" class="title">
    <b>test_should_add_plugin_load_paths_to_global_LOAD_PATH_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002329_source')" id="l_M002329_source">show source</a> ]</p>
  <div id="M002329_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 98</span>
 98:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_add_plugin_load_paths_to_global_LOAD_PATH_array</span>
 99:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>]
100:     <span class="ruby-identifier">stubbed_application_lib_index_in_LOAD_PATHS</span> = <span class="ruby-value">4</span>
101:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">stubs</span>(<span class="ruby-identifier">:application_lib_index</span>).<span class="ruby-identifier">returns</span>(<span class="ruby-identifier">stubbed_application_lib_index_in_LOAD_PATHS</span>)
102: 
103:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">add_plugin_load_paths</span>
104: 
105:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/stubby'</span>), <span class="ruby-value str">'lib'</span>)) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">stubbed_application_lib_index_in_LOAD_PATHS</span>
106:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">$LOAD_PATH</span>.<span class="ruby-identifier">index</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">plugin_fixture_path</span>(<span class="ruby-value str">'default/acts/acts_as_chunky_bacon'</span>), <span class="ruby-value str">'lib'</span>)) <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">stubbed_application_lib_index_in_LOAD_PATHS</span>
107:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002327" class="method">
  <div id="M002327_title" class="title">
    <b>test_should_be_able_to_specify_loading_of_plugins_loaded_after_all</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002327_source')" id="l_M002327_source">show source</a> ]</p>
  <div id="M002327_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 88</span>
88:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_be_able_to_specify_loading_of_plugins_loaded_after_all</span>
89:     <span class="ruby-identifier">only_load_the_following_plugins!</span>  [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>]
90:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
91:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002320" class="method">
  <div id="M002320_title" class="title">
    <b>test_should_find_all_availble_plugins_and_return_as_all_plugins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002320_source')" id="l_M002320_source">show source</a> ]</p>
  <div id="M002320_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 53</span>
53:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_find_all_availble_plugins_and_return_as_all_plugins</span>
54:     <span class="ruby-identifier">assert_plugins</span> [ <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:a</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">all_plugins</span>.<span class="ruby-identifier">reverse</span>, <span class="ruby-ivar">@failure_tip</span>
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002325" class="method">
  <div id="M002325_title" class="title">
    <b>test_should_load_all_plugins_in_natural_order_when_all_is_used</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002325_source')" id="l_M002325_source">show source</a> ]</p>
  <div id="M002325_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 78</span>
78:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_load_all_plugins_in_natural_order_when_all_is_used</span>
79:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:all</span>]
80:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>, <span class="ruby-identifier">:stubby</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
81:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002326" class="method">
  <div id="M002326_title" class="title">
    <b>test_should_load_specified_plugins_in_order_and_then_all_remaining_plugins_when_all_is_used</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002326_source')" id="l_M002326_source">show source</a> ]</p>
  <div id="M002326_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_load_specified_plugins_in_order_and_then_all_remaining_plugins_when_all_is_used</span>
84:     <span class="ruby-identifier">only_load_the_following_plugins!</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:all</span>]
85:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
86:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002317" class="method">
  <div id="M002317_title" class="title">
    <b>test_should_locate_plugins_by_asking_each_locator_specifed_in_configuration_for_its_plugins_result</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002317_source')" id="l_M002317_source">show source</a> ]</p>
  <div id="M002317_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_locate_plugins_by_asking_each_locator_specifed_in_configuration_for_its_plugins_result</span>
33:     <span class="ruby-identifier">locator_1</span> = <span class="ruby-identifier">stub</span>(<span class="ruby-identifier">:plugins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:b</span>, <span class="ruby-identifier">:c</span>])
34:     <span class="ruby-identifier">locator_2</span> = <span class="ruby-identifier">stub</span>(<span class="ruby-identifier">:plugins</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">:d</span>, <span class="ruby-identifier">:e</span>, <span class="ruby-identifier">:f</span>])
35:     <span class="ruby-identifier">locator_class_1</span> = <span class="ruby-identifier">stub</span>(<span class="ruby-identifier">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">locator_1</span>)
36:     <span class="ruby-identifier">locator_class_2</span> = <span class="ruby-identifier">stub</span>(<span class="ruby-identifier">:new</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">locator_2</span>)
37:     <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">plugin_locators</span> = [<span class="ruby-identifier">locator_class_1</span>, <span class="ruby-identifier">locator_class_2</span>]
38:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:b</span>, <span class="ruby-identifier">:c</span>, <span class="ruby-identifier">:d</span>, <span class="ruby-identifier">:e</span>, <span class="ruby-identifier">:f</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:locate_plugins</span>)
39:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002318" class="method">
  <div id="M002318_title" class="title">
    <b>test_should_memoize_the_result_of_locate_plugins_as_all_plugins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002318_source')" id="l_M002318_source">show source</a> ]</p>
  <div id="M002318_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_memoize_the_result_of_locate_plugins_as_all_plugins</span>
42:     <span class="ruby-identifier">plugin_list</span> = [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:b</span>, <span class="ruby-identifier">:c</span>]
43:     <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:locate_plugins</span>).<span class="ruby-identifier">once</span>.<span class="ruby-identifier">returns</span>(<span class="ruby-identifier">plugin_list</span>)
44:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">plugin_list</span>, <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">all_plugins</span>
45:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">plugin_list</span>, <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">all_plugins</span> <span class="ruby-comment cmt"># ensuring that locate_plugins isn't called again</span>
46:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002324" class="method">
  <div id="M002324_title" class="title">
    <b>test_should_respect_the_order_of_plugins_given_in_configuration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002324_source')" id="l_M002324_source">show source</a> ]</p>
  <div id="M002324_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 72</span>
72:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_respect_the_order_of_plugins_given_in_configuration</span>
73:     <span class="ruby-identifier">plugin_names</span> = [<span class="ruby-identifier">:stubby</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>]
74:     <span class="ruby-identifier">only_load_the_following_plugins!</span> <span class="ruby-identifier">plugin_names</span>
75:     <span class="ruby-identifier">assert_plugins</span> <span class="ruby-identifier">plugin_names</span>, <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>
76:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002322" class="method">
  <div id="M002322_title" class="title">
    <b>test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002322_source')" id="l_M002322_source">show source</a> ]</p>
  <div id="M002322_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_nil</span>
62:     <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">plugins</span> = <span class="ruby-keyword kw">nil</span>
63:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>, <span class="ruby-identifier">:stubby</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
64:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002321" class="method">
  <div id="M002321_title" class="title">
    <b>test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_untouched</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002321_source')" id="l_M002321_source">show source</a> ]</p>
  <div id="M002321_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_return_all_plugins_as_plugins_when_registered_plugin_list_is_untouched</span>
58:     <span class="ruby-identifier">assert_plugins</span> [<span class="ruby-identifier">:a</span>, <span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:engine</span>, <span class="ruby-identifier">:gemlike</span>, <span class="ruby-identifier">:plugin_with_no_lib_dir</span>, <span class="ruby-identifier">:stubby</span>], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>, <span class="ruby-ivar">@failure_tip</span>
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002319" class="method">
  <div id="M002319_title" class="title">
    <b>test_should_return_empty_array_if_configuration_plugins_is_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002319_source')" id="l_M002319_source">show source</a> ]</p>
  <div id="M002319_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 48</span>
48:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_return_empty_array_if_configuration_plugins_is_empty</span>
49:     <span class="ruby-ivar">@configuration</span>.<span class="ruby-identifier">plugins</span> = []
50:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>
51:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M002323" class="method">
  <div id="M002323_title" class="title">
    <b>test_should_return_specific_plugins_named_in_config_plugins_array_if_set</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M002323_source')" id="l_M002323_source">show source</a> ]</p>
  <div id="M002323_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File railties/test/plugin_loader_test.rb, line 66</span>
66:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_should_return_specific_plugins_named_in_config_plugins_array_if_set</span>
67:     <span class="ruby-identifier">plugin_names</span> = [<span class="ruby-identifier">:acts_as_chunky_bacon</span>, <span class="ruby-identifier">:stubby</span>]
68:     <span class="ruby-identifier">only_load_the_following_plugins!</span> <span class="ruby-identifier">plugin_names</span>
69:     <span class="ruby-identifier">assert_plugins</span> <span class="ruby-identifier">plugin_names</span>, <span class="ruby-ivar">@loader</span>.<span class="ruby-identifier">plugins</span>
70:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>