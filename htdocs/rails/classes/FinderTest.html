  <div id="C00000694">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />FinderTest<br/>
  In:
<a href="#" onclick="jsHref('files/activerecord/test/cases/finder_test_rb.html');">activerecord/test/cases/finder_test.rb</a>

Parent:&nbsp;
ActiveRecord::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M004961&name=bind" >bind</a></li>
  <li><a href="index.html?a=M004877&name=test_bind_arity" >test_bind_arity</a></li>
  <li><a href="index.html?a=M004882&name=test_bind_chars" >test_bind_chars</a></li>
  <li><a href="index.html?a=M004880&name=test_bind_empty_enumerable" >test_bind_empty_enumerable</a></li>
  <li><a href="index.html?a=M004879&name=test_bind_enumerable" >test_bind_enumerable</a></li>
  <li><a href="index.html?a=M004883&name=test_bind_record" >test_bind_record</a></li>
  <li><a href="index.html?a=M004881&name=test_bind_string" >test_bind_string</a></li>
  <li><a href="index.html?a=M004874&name=test_bind_variables" >test_bind_variables</a></li>
  <li><a href="index.html?a=M004875&name=test_bind_variables_with_quotes" >test_bind_variables_with_quotes</a></li>
  <li><a href="index.html?a=M004862&name=test_condition_array_interpolation" >test_condition_array_interpolation</a></li>
  <li><a href="index.html?a=M004863&name=test_condition_hash_interpolation" >test_condition_hash_interpolation</a></li>
  <li><a href="index.html?a=M004861&name=test_condition_interpolation" >test_condition_interpolation</a></li>
  <li><a href="index.html?a=M004886&name=test_count" >test_count</a></li>
  <li><a href="index.html?a=M004887&name=test_count_by_sql" >test_count_by_sql</a></li>
  <li><a href="index.html?a=M004823&name=test_does_not_exist_with_empty_table_and_no_args_given" >test_does_not_exist_with_empty_table_and_no_args_given</a></li>
  <li><a href="index.html?a=M004939&name=test_dynamic_find_or_initialize_from_one_attribute_caches_method" >test_dynamic_find_or_initialize_from_one_attribute_caches_method</a></li>
  <li><a href="index.html?a=M004899&name=test_dynamic_finder_on_one_attribute_with_conditions_caches_method" >test_dynamic_finder_on_one_attribute_with_conditions_caches_method</a></li>
  <li><a href="index.html?a=M004900&name=test_dynamic_finder_on_one_attribute_with_conditions_returns_same_results_after_caching" >test_dynamic_finder_on_one_attribute_with_conditions_returns_same_results_after_caching</a></li>
  <li><a href="index.html?a=M004892&name=test_dynamic_finder_returns_same_results_after_caching" >test_dynamic_finder_returns_same_results_after_caching</a></li>
  <li><a href="index.html?a=M004946&name=test_dynamic_finder_with_invalid_params" >test_dynamic_finder_with_invalid_params</a></li>
  <li><a href="index.html?a=M004888&name=test_dynamic_finders_should_go_through_the_find_class_method" >test_dynamic_finders_should_go_through_the_find_class_method</a></li>
  <li><a href="index.html?a=M004821&name=test_exists" >test_exists</a></li>
  <li><a href="index.html?a=M004822&name=test_exists_returns_true_with_one_record_and_no_args" >test_exists_returns_true_with_one_record_and_no_args</a></li>
  <li><a href="index.html?a=M004824&name=test_exists_with_aggregate_having_three_mappings" >test_exists_with_aggregate_having_three_mappings</a></li>
  <li><a href="index.html?a=M004825&name=test_exists_with_aggregate_having_three_mappings_with_one_difference" >test_exists_with_aggregate_having_three_mappings_with_one_difference</a></li>
  <li><a href="index.html?a=M004826&name=test_exists_with_scoped_include" >test_exists_with_scoped_include</a></li>
  <li><a href="index.html?a=M004819&name=test_find" >test_find</a></li>
  <li><a href="index.html?a=M004916&name=test_find_all_by_array_attribute" >test_find_all_by_array_attribute</a></li>
  <li><a href="index.html?a=M004917&name=test_find_all_by_boolean_attribute" >test_find_all_by_boolean_attribute</a></li>
  <li><a href="index.html?a=M004921&name=test_find_all_by_nil_and_not_nil_attributes" >test_find_all_by_nil_and_not_nil_attributes</a></li>
  <li><a href="index.html?a=M004919&name=test_find_all_by_nil_attribute" >test_find_all_by_nil_attribute</a></li>
  <li><a href="index.html?a=M004911&name=test_find_all_by_one_attribute" >test_find_all_by_one_attribute</a></li>
  <li><a href="index.html?a=M004912&name=test_find_all_by_one_attribute_that_is_an_aggregate" >test_find_all_by_one_attribute_that_is_an_aggregate</a></li>
  <li><a href="index.html?a=M004915&name=test_find_all_by_one_attribute_with_options" >test_find_all_by_one_attribute_with_options</a></li>
  <li><a href="index.html?a=M004913&name=test_find_all_by_two_attributes_that_are_both_aggregates" >test_find_all_by_two_attributes_that_are_both_aggregates</a></li>
  <li><a href="index.html?a=M004914&name=test_find_all_by_two_attributes_with_one_being_an_aggregate" >test_find_all_by_two_attributes_with_one_being_an_aggregate</a></li>
  <li><a href="index.html?a=M004947&name=test_find_all_with_join" >test_find_all_with_join</a></li>
  <li><a href="index.html?a=M004832&name=test_find_all_with_limit" >test_find_all_with_limit</a></li>
  <li><a href="index.html?a=M004834&name=test_find_all_with_limit_and_offset_and_multiple_order_clauses" >test_find_all_with_limit_and_offset_and_multiple_order_clauses</a></li>
  <li><a href="index.html?a=M004833&name=test_find_all_with_prepared_limit_and_offset" >test_find_all_with_prepared_limit_and_offset</a></li>
  <li><a href="index.html?a=M004830&name=test_find_an_empty_array" >test_find_an_empty_array</a></li>
  <li><a href="index.html?a=M004827&name=test_find_by_array_of_one_id" >test_find_by_array_of_one_id</a></li>
  <li><a href="index.html?a=M004952&name=test_find_by_empty_ids" >test_find_by_empty_ids</a></li>
  <li><a href="index.html?a=M004953&name=test_find_by_empty_in_condition" >test_find_by_empty_in_condition</a></li>
  <li><a href="index.html?a=M004950&name=test_find_by_id_with_conditions_with_or" >test_find_by_id_with_conditions_with_or</a></li>
  <li><a href="index.html?a=M004828&name=test_find_by_ids" >test_find_by_ids</a></li>
  <li><a href="index.html?a=M004831&name=test_find_by_ids_missing_one" >test_find_by_ids_missing_one</a></li>
  <li><a href="index.html?a=M004829&name=test_find_by_ids_with_limit_and_offset" >test_find_by_ids_with_limit_and_offset</a></li>
  <li><a href="index.html?a=M004903&name=test_find_by_invalid_method_syntax" >test_find_by_invalid_method_syntax</a></li>
  <li><a href="index.html?a=M004920&name=test_find_by_nil_and_not_nil_attributes" >test_find_by_nil_and_not_nil_attributes</a></li>
  <li><a href="index.html?a=M004918&name=test_find_by_nil_attribute" >test_find_by_nil_attribute</a></li>
  <li><a href="index.html?a=M004889&name=test_find_by_one_attribute" >test_find_by_one_attribute</a></li>
  <li><a href="index.html?a=M004890&name=test_find_by_one_attribute_bang" >test_find_by_one_attribute_bang</a></li>
  <li><a href="index.html?a=M004891&name=test_find_by_one_attribute_caches_dynamic_finder" >test_find_by_one_attribute_caches_dynamic_finder</a></li>
  <li><a href="index.html?a=M004895&name=test_find_by_one_attribute_that_is_an_aggregate" >test_find_by_one_attribute_that_is_an_aggregate</a></li>
  <li><a href="index.html?a=M004896&name=test_find_by_one_attribute_that_is_an_aggregate_with_one_attribute_difference" >test_find_by_one_attribute_that_is_an_aggregate_with_one_attribute_difference</a></li>
  <li><a href="index.html?a=M004894&name=test_find_by_one_attribute_with_conditions" >test_find_by_one_attribute_with_conditions</a></li>
  <li><a href="index.html?a=M004893&name=test_find_by_one_attribute_with_order_option" >test_find_by_one_attribute_with_order_option</a></li>
  <li><a href="index.html?a=M004901&name=test_find_by_one_attribute_with_several_options" >test_find_by_one_attribute_with_several_options</a></li>
  <li><a href="index.html?a=M004902&name=test_find_by_one_missing_attribute" >test_find_by_one_missing_attribute</a></li>
  <li><a href="index.html?a=M004954&name=test_find_by_records" >test_find_by_records</a></li>
  <li><a href="index.html?a=M004840&name=test_find_by_sql_with_sti_on_joined_table" >test_find_by_sql_with_sti_on_joined_table</a></li>
  <li><a href="index.html?a=M004904&name=test_find_by_two_attributes" >test_find_by_two_attributes</a></li>
  <li><a href="index.html?a=M004897&name=test_find_by_two_attributes_that_are_both_aggregates" >test_find_by_two_attributes_that_are_both_aggregates</a></li>
  <li><a href="index.html?a=M004898&name=test_find_by_two_attributes_with_one_being_an_aggregate" >test_find_by_two_attributes_with_one_being_an_aggregate</a></li>
  <li><a href="index.html?a=M004841&name=test_find_first" >test_find_first</a></li>
  <li><a href="index.html?a=M004842&name=test_find_first_failing" >test_find_first_failing</a></li>
  <li><a href="index.html?a=M004951&name=test_find_ignores_previously_inserted_record" >test_find_ignores_previously_inserted_record</a></li>
  <li><a href="index.html?a=M004907&name=test_find_last_by_invalid_method_syntax" >test_find_last_by_invalid_method_syntax</a></li>
  <li><a href="index.html?a=M004905&name=test_find_last_by_one_attribute" >test_find_last_by_one_attribute</a></li>
  <li><a href="index.html?a=M004906&name=test_find_last_by_one_attribute_caches_dynamic_finder" >test_find_last_by_one_attribute_caches_dynamic_finder</a></li>
  <li><a href="index.html?a=M004908&name=test_find_last_by_one_attribute_with_several_options" >test_find_last_by_one_attribute_with_several_options</a></li>
  <li><a href="index.html?a=M004909&name=test_find_last_by_one_missing_attribute" >test_find_last_by_one_missing_attribute</a></li>
  <li><a href="index.html?a=M004910&name=test_find_last_by_two_attributes" >test_find_last_by_two_attributes</a></li>
  <li><a href="index.html?a=M004849&name=test_find_on_array_conditions" >test_find_on_array_conditions</a></li>
  <li><a href="index.html?a=M004856&name=test_find_on_association_proxy_conditions" >test_find_on_association_proxy_conditions</a></li>
  <li><a href="index.html?a=M004848&name=test_find_on_blank_bind_conditions" >test_find_on_blank_bind_conditions</a></li>
  <li><a href="index.html?a=M004847&name=test_find_on_blank_conditions" >test_find_on_blank_conditions</a></li>
  <li><a href="index.html?a=M004850&name=test_find_on_hash_conditions" >test_find_on_hash_conditions</a></li>
  <li><a href="index.html?a=M004858&name=test_find_on_hash_conditions_with_end_exclusive_range" >test_find_on_hash_conditions_with_end_exclusive_range</a></li>
  <li><a href="index.html?a=M004851&name=test_find_on_hash_conditions_with_explicit_table_name" >test_find_on_hash_conditions_with_explicit_table_name</a></li>
  <li><a href="index.html?a=M004855&name=test_find_on_hash_conditions_with_explicit_table_name_and_aggregate" >test_find_on_hash_conditions_with_explicit_table_name_and_aggregate</a></li>
  <li><a href="index.html?a=M004852&name=test_find_on_hash_conditions_with_hashed_table_name" >test_find_on_hash_conditions_with_hashed_table_name</a></li>
  <li><a href="index.html?a=M004859&name=test_find_on_hash_conditions_with_multiple_ranges" >test_find_on_hash_conditions_with_multiple_ranges</a></li>
  <li><a href="index.html?a=M004857&name=test_find_on_hash_conditions_with_range" >test_find_on_hash_conditions_with_range</a></li>
  <li><a href="index.html?a=M004860&name=test_find_on_multiple_hash_conditions" >test_find_on_multiple_hash_conditions</a></li>
  <li><a href="index.html?a=M004846&name=test_find_only_some_columns" >test_find_only_some_columns</a></li>
  <li><a href="index.html?a=M004926&name=test_find_or_create_from_one_aggregate_attribute" >test_find_or_create_from_one_aggregate_attribute</a></li>
  <li><a href="index.html?a=M004927&name=test_find_or_create_from_one_aggregate_attribute_and_hash" >test_find_or_create_from_one_aggregate_attribute_and_hash</a></li>
  <li><a href="index.html?a=M004922&name=test_find_or_create_from_one_attribute" >test_find_or_create_from_one_attribute</a></li>
  <li><a href="index.html?a=M004925&name=test_find_or_create_from_one_attribute_and_hash" >test_find_or_create_from_one_attribute_and_hash</a></li>
  <li><a href="index.html?a=M004931&name=test_find_or_create_from_one_attribute_should_not_set_attribute_even_when_protected" >test_find_or_create_from_one_attribute_should_not_set_attribute_even_when_protected</a></li>
  <li><a href="index.html?a=M004935&name=test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected" >test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected</a></li>
  <li><a href="index.html?a=M004933&name=test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash" >test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</a></li>
  <li><a href="index.html?a=M004923&name=test_find_or_create_from_two_attributes" >test_find_or_create_from_two_attributes</a></li>
  <li><a href="index.html?a=M004924&name=test_find_or_create_from_two_attributes_with_one_being_an_aggregate" >test_find_or_create_from_two_attributes_with_one_being_an_aggregate</a></li>
  <li><a href="index.html?a=M004937&name=test_find_or_create_should_set_protected_attributes_if_given_as_block" >test_find_or_create_should_set_protected_attributes_if_given_as_block</a></li>
  <li><a href="index.html?a=M004938&name=test_find_or_create_should_work_with_block_on_first_call" >test_find_or_create_should_work_with_block_on_first_call</a></li>
  <li><a href="index.html?a=M004929&name=test_find_or_initialize_from_one_aggregate_attribute" >test_find_or_initialize_from_one_aggregate_attribute</a></li>
  <li><a href="index.html?a=M004943&name=test_find_or_initialize_from_one_aggregate_attribute_and_hash" >test_find_or_initialize_from_one_aggregate_attribute_and_hash</a></li>
  <li><a href="index.html?a=M004941&name=test_find_or_initialize_from_one_aggregate_attribute_and_one_not" >test_find_or_initialize_from_one_aggregate_attribute_and_one_not</a></li>
  <li><a href="index.html?a=M004928&name=test_find_or_initialize_from_one_attribute" >test_find_or_initialize_from_one_attribute</a></li>
  <li><a href="index.html?a=M004942&name=test_find_or_initialize_from_one_attribute_and_hash" >test_find_or_initialize_from_one_attribute_and_hash</a></li>
  <li><a href="index.html?a=M004930&name=test_find_or_initialize_from_one_attribute_should_not_set_attribute_even_when_protected" >test_find_or_initialize_from_one_attribute_should_not_set_attribute_even_when_protected</a></li>
  <li><a href="index.html?a=M004934&name=test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected" >test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected</a></li>
  <li><a href="index.html?a=M004932&name=test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash" >test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</a></li>
  <li><a href="index.html?a=M004940&name=test_find_or_initialize_from_two_attributes" >test_find_or_initialize_from_two_attributes</a></li>
  <li><a href="index.html?a=M004936&name=test_find_or_initialize_should_set_protected_attributes_if_given_as_block" >test_find_or_initialize_should_set_protected_attributes_if_given_as_block</a></li>
  <li><a href="index.html?a=M004944&name=test_find_with_bad_sql" >test_find_with_bad_sql</a></li>
  <li><a href="index.html?a=M004838&name=test_find_with_entire_select_statement" >test_find_with_entire_select_statement</a></li>
  <li><a href="index.html?a=M004835&name=test_find_with_group" >test_find_with_group</a></li>
  <li><a href="index.html?a=M004836&name=test_find_with_group_and_having" >test_find_with_group_and_having</a></li>
  <li><a href="index.html?a=M004837&name=test_find_with_group_and_sanitized_having" >test_find_with_group_and_sanitized_having</a></li>
  <li><a href="index.html?a=M004853&name=test_find_with_hash_conditions_on_joined_table" >test_find_with_hash_conditions_on_joined_table</a></li>
  <li><a href="index.html?a=M004854&name=test_find_with_hash_conditions_on_joined_table_and_with_range" >test_find_with_hash_conditions_on_joined_table_and_with_range</a></li>
  <li><a href="index.html?a=M004945&name=test_find_with_invalid_params" >test_find_with_invalid_params</a></li>
  <li><a href="index.html?a=M004958&name=test_find_with_order_on_included_associations_with_construct_finder_sql_for_association_limiting_and_is_distinct" >test_find_with_order_on_included_associations_with_construct_finder_sql_for_association_limiting_and_is_distinct</a></li>
  <li><a href="index.html?a=M004839&name=test_find_with_prepared_select_statement" >test_find_with_prepared_select_statement</a></li>
  <li><a href="index.html?a=M004820&name=test_find_with_string" >test_find_with_string</a></li>
  <li><a href="index.html?a=M004960&name=test_finder_with_scoped_from" >test_finder_with_scoped_from</a></li>
  <li><a href="index.html?a=M004843&name=test_first" >test_first</a></li>
  <li><a href="index.html?a=M004844&name=test_first_failing" >test_first_failing</a></li>
  <li><a href="index.html?a=M004864&name=test_hash_condition_find_malformed" >test_hash_condition_find_malformed</a></li>
  <li><a href="index.html?a=M004869&name=test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_aggregate" >test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_aggregate</a></li>
  <li><a href="index.html?a=M004871&name=test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_attribute_value" >test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_attribute_value</a></li>
  <li><a href="index.html?a=M004868&name=test_hash_condition_find_with_aggregate_having_one_mapping" >test_hash_condition_find_with_aggregate_having_one_mapping</a></li>
  <li><a href="index.html?a=M004870&name=test_hash_condition_find_with_aggregate_having_one_mapping_and_key_value_being_attribute_value" >test_hash_condition_find_with_aggregate_having_one_mapping_and_key_value_being_attribute_value</a></li>
  <li><a href="index.html?a=M004872&name=test_hash_condition_find_with_aggregate_having_three_mappings" >test_hash_condition_find_with_aggregate_having_three_mappings</a></li>
  <li><a href="index.html?a=M004866&name=test_hash_condition_find_with_array" >test_hash_condition_find_with_array</a></li>
  <li><a href="index.html?a=M004865&name=test_hash_condition_find_with_escaped_characters" >test_hash_condition_find_with_escaped_characters</a></li>
  <li><a href="index.html?a=M004867&name=test_hash_condition_find_with_nil" >test_hash_condition_find_with_nil</a></li>
  <li><a href="index.html?a=M004873&name=test_hash_condition_find_with_one_condition_being_aggregate_and_another_not" >test_hash_condition_find_with_one_condition_being_aggregate_and_another_not</a></li>
  <li><a href="index.html?a=M004948&name=test_joins_dont_clobber_id" >test_joins_dont_clobber_id</a></li>
  <li><a href="index.html?a=M004949&name=test_joins_with_string_array" >test_joins_with_string_array</a></li>
  <li><a href="index.html?a=M004878&name=test_named_bind_variables" >test_named_bind_variables</a></li>
  <li><a href="index.html?a=M004876&name=test_named_bind_variables_with_quotes" >test_named_bind_variables_with_quotes</a></li>
  <li><a href="index.html?a=M004884&name=test_named_bind_with_postgresql_type_casts" >test_named_bind_with_postgresql_type_casts</a></li>
  <li><a href="index.html?a=M004957&name=test_select_rows" >test_select_rows</a></li>
  <li><a href="index.html?a=M004955&name=test_select_value" >test_select_value</a></li>
  <li><a href="index.html?a=M004956&name=test_select_values" >test_select_values</a></li>
  <li><a href="index.html?a=M004885&name=test_string_sanitation" >test_string_sanitation</a></li>
  <li><a href="index.html?a=M004845&name=test_unexisting_record_exception_handling" >test_unexisting_record_exception_handling</a></li>
  <li><a href="index.html?a=M004959&name=test_with_limiting_with_custom_select" >test_with_limiting_with_custom_select</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M004877" class="method">
  <div id="M004877_title" class="title">
    <b>test_bind_arity</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004877_source')" id="l_M004877_source">show source</a> ]</p>
  <div id="M004877_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 448</span>
448:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_arity</span>
449:     <span class="ruby-identifier">assert_nothing_raised</span>                                 { <span class="ruby-identifier">bind</span> <span class="ruby-value str">''</span> }
450:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">PreparedStatementInvalid</span>) { <span class="ruby-identifier">bind</span> <span class="ruby-value str">''</span>, <span class="ruby-value">1</span> }
451: 
452:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">PreparedStatementInvalid</span>) { <span class="ruby-identifier">bind</span> <span class="ruby-value str">'?'</span> }
453:     <span class="ruby-identifier">assert_nothing_raised</span>                                 { <span class="ruby-identifier">bind</span> <span class="ruby-value str">'?'</span>, <span class="ruby-value">1</span> }
454:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">PreparedStatementInvalid</span>) { <span class="ruby-identifier">bind</span> <span class="ruby-value str">'?'</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>  }
455:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004882" class="method">
  <div id="M004882_title" class="title">
    <b>test_bind_chars</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004882_source')" id="l_M004882_source">show source</a> ]</p>
  <div id="M004882_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 497</span>
497:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_chars</span>
498:     <span class="ruby-identifier">quoted_bambi</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote</span>(<span class="ruby-value str">&quot;Bambi&quot;</span>)
499:     <span class="ruby-identifier">quoted_bambi_and_thumper</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote</span>(<span class="ruby-value str">&quot;Bambi\nand\nThumper&quot;</span>)
500:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;name=#{quoted_bambi}&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'name=?'</span>, <span class="ruby-value str">&quot;Bambi&quot;</span>)
501:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;name=#{quoted_bambi_and_thumper}&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'name=?'</span>, <span class="ruby-value str">&quot;Bambi\nand\nThumper&quot;</span>)
502:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;name=#{quoted_bambi}&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'name=?'</span>, <span class="ruby-value str">&quot;Bambi&quot;</span>.<span class="ruby-identifier">mb_chars</span>)
503:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;name=#{quoted_bambi_and_thumper}&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'name=?'</span>, <span class="ruby-value str">&quot;Bambi\nand\nThumper&quot;</span>.<span class="ruby-identifier">mb_chars</span>)
504:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004880" class="method">
  <div id="M004880_title" class="title">
    <b>test_bind_empty_enumerable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004880_source')" id="l_M004880_source">show source</a> ]</p>
  <div id="M004880_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 486</span>
486:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_empty_enumerable</span>
487:     <span class="ruby-identifier">quoted_nil</span> = <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote</span>(<span class="ruby-keyword kw">nil</span>)
488:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">quoted_nil</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, [])
489:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot; in (#{quoted_nil})&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">' in (?)'</span>, [])
490:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;foo in (#{quoted_nil})&quot;</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'foo in (?)'</span>, [])
491:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004879" class="method">
  <div id="M004879_title" class="title">
    <b>test_bind_enumerable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004879_source')" id="l_M004879_source">show source</a> ]</p>
  <div id="M004879_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 469</span>
469:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_enumerable</span>
470:     <span class="ruby-identifier">quoted_abc</span> = <span class="ruby-node">%(#{ActiveRecord::Base.connection.quote('a')},#{ActiveRecord::Base.connection.quote('b')},#{ActiveRecord::Base.connection.quote('c')})</span>
471: 
472:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1,2,3'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>])
473:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">quoted_abc</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-node">%w(a b c)</span>)
474: 
475:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1,2,3'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>])
476:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">quoted_abc</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">%w(a b c)</span>) <span class="ruby-comment cmt"># '</span>
477: 
478:     <span class="ruby-identifier">require</span> <span class="ruby-value str">'set'</span>
479:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1,2,3'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>]))
480:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">quoted_abc</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">%w(a b c)</span>))
481: 
482:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1,2,3'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>([<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>]))
483:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">quoted_abc</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">%w(a b c)</span>)) <span class="ruby-comment cmt"># '</span>
484:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004883" class="method">
  <div id="M004883_title" class="title">
    <b>test_bind_record</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004883_source')" id="l_M004883_source">show source</a> ]</p>
  <div id="M004883_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 506</span>
506:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_record</span>
507:     <span class="ruby-identifier">o</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:quoted_id</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value">1</span>)
508:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-identifier">o</span>)
509: 
510:     <span class="ruby-identifier">os</span> = [<span class="ruby-identifier">o</span>] <span class="ruby-operator">*</span> <span class="ruby-value">3</span>
511:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1,1,1'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-identifier">os</span>)
512:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004881" class="method">
  <div id="M004881_title" class="title">
    <b>test_bind_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004881_source')" id="l_M004881_source">show source</a> ]</p>
  <div id="M004881_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 493</span>
493:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_string</span>
494:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">quote</span>(<span class="ruby-value str">''</span>), <span class="ruby-identifier">bind</span>(<span class="ruby-value str">'?'</span>, <span class="ruby-value str">''</span>)
495:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004874" class="method">
  <div id="M004874_title" class="title">
    <b>test_bind_variables</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004874_source')" id="l_M004874_source">show source</a> ]</p>
  <div id="M004874_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 425</span>
425:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_variables</span>
426:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = ?&quot;</span>, <span class="ruby-value str">&quot;37signals&quot;</span>])
427:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = ?&quot;</span>, <span class="ruby-value str">&quot;37signals!&quot;</span>])
428:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = ?&quot;</span>, <span class="ruby-value str">&quot;37signals!' OR 1=1&quot;</span>])
429:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id = ?&quot;</span>, <span class="ruby-value">1</span>]).<span class="ruby-identifier">written_on</span>
430:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">PreparedStatementInvalid</span>) {
431:       <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id=? AND name = ?&quot;</span>, <span class="ruby-value">2</span>])
432:     }
433:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">PreparedStatementInvalid</span>) {
434:      <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id=?&quot;</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>, <span class="ruby-value">4</span>])
435:     }
436:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004875" class="method">
  <div id="M004875_title" class="title">
    <b>test_bind_variables_with_quotes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004875_source')" id="l_M004875_source">show source</a> ]</p>
  <div id="M004875_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 438</span>
438:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bind_variables_with_quotes</span>
439:     <span class="ruby-constant">Company</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals' go'es agains&quot;</span>)
440:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = ?&quot;</span>, <span class="ruby-value str">&quot;37signals' go'es agains&quot;</span>])
441:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004862" class="method">
  <div id="M004862_title" class="title">
    <b>test_condition_array_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004862_source')" id="l_M004862_source">show source</a> ]</p>
  <div id="M004862_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 347</span>
347:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_condition_array_interpolation</span>
348:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals&quot;</span>])
349:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals!&quot;</span>])
350:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals!' OR 1=1&quot;</span>])
351:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id = %d&quot;</span>, <span class="ruby-value">1</span>]).<span class="ruby-identifier">written_on</span>
352:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004863" class="method">
  <div id="M004863_title" class="title">
    <b>test_condition_hash_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004863_source')" id="l_M004863_source">show source</a> ]</p>
  <div id="M004863_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 354</span>
354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_condition_hash_interpolation</span>
355:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals&quot;</span>})
356:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals!&quot;</span>})
357:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>}).<span class="ruby-identifier">written_on</span>
358:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004861" class="method">
  <div id="M004861_title" class="title">
    <b>test_condition_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004861_source')" id="l_M004861_source">show source</a> ]</p>
  <div id="M004861_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_condition_interpolation</span>
341:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals&quot;</span>])
342:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals!&quot;</span>])
343:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = '%s'&quot;</span>, <span class="ruby-value str">&quot;37signals!' OR 1=1&quot;</span>])
344:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id = %d&quot;</span>, <span class="ruby-value">1</span>]).<span class="ruby-identifier">written_on</span>
345:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004886" class="method">
  <div id="M004886_title" class="title">
    <b>test_count</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004886_source')" id="l_M004886_source">show source</a> ]</p>
  <div id="M004886_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 525</span>
525:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count</span>
526:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id &gt; 3&quot;</span>))
527:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id &gt; ?&quot;</span>, <span class="ruby-value">2</span>]))
528:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id &gt; ?&quot;</span>, <span class="ruby-value">1</span>]))
529:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004887" class="method">
  <div id="M004887_title" class="title">
    <b>test_count_by_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004887_source')" id="l_M004887_source">show source</a> ]</p>
  <div id="M004887_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 531</span>
531:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_count_by_sql</span>
532:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count_by_sql</span>(<span class="ruby-value str">&quot;SELECT COUNT(*) FROM entrants WHERE id &gt; 3&quot;</span>))
533:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count_by_sql</span>([<span class="ruby-value str">&quot;SELECT COUNT(*) FROM entrants WHERE id &gt; ?&quot;</span>, <span class="ruby-value">2</span>]))
534:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count_by_sql</span>([<span class="ruby-value str">&quot;SELECT COUNT(*) FROM entrants WHERE id &gt; ?&quot;</span>, <span class="ruby-value">1</span>]))
535:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004823" class="method">
  <div id="M004823_title" class="title">
    <b>test_does_not_exist_with_empty_table_and_no_args_given</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004823_source')" id="l_M004823_source">show source</a> ]</p>
  <div id="M004823_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 102</span>
102:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_does_not_exist_with_empty_table_and_no_args_given</span>
103:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">delete_all</span>
104:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>
105:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004939" class="method">
  <div id="M004939_title" class="title">
    <b>test_dynamic_find_or_initialize_from_one_attribute_caches_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004939_source')" id="l_M004939_source">show source</a> ]</p>
  <div id="M004939_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 908</span>
908:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_find_or_initialize_from_one_attribute_caches_method</span>
909:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Company</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_or_initialize_by_name</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_or_initialize_by_name'</span> }
910:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Company</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_or_initialize_by_name'</span> }
911:     <span class="ruby-identifier">sig38</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>(<span class="ruby-value str">&quot;38signals&quot;</span>)
912:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_or_initialize_by_name'</span> }
913:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004899" class="method">
  <div id="M004899_title" class="title">
    <b>test_dynamic_finder_on_one_attribute_with_conditions_caches_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004899_source')" id="l_M004899_source">show source</a> ]</p>
  <div id="M004899_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 620</span>
620:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_finder_on_one_attribute_with_conditions_caches_method</span>
621:     <span class="ruby-comment cmt"># ensure this test can run independently of order</span>
622:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Account</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_by_credit_limit</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Account</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_credit_limit'</span> }
623:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Account</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_credit_limit'</span> }
624:     <span class="ruby-identifier">a</span> = <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'firm_id = ?'</span>, <span class="ruby-value">6</span>])
625:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Account</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_credit_limit'</span> }
626:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004900" class="method">
  <div id="M004900_title" class="title">
    <b>test_dynamic_finder_on_one_attribute_with_conditions_returns_same_results_after_caching</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004900_source')" id="l_M004900_source">show source</a> ]</p>
  <div id="M004900_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 628</span>
628:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_finder_on_one_attribute_with_conditions_returns_same_results_after_caching</span>
629:     <span class="ruby-comment cmt"># ensure this test can run independently of order</span>
630:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Account</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_by_credit_limit</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Account</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_credit_limit'</span> }
631:     <span class="ruby-identifier">a</span> = <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'firm_id = ?'</span>, <span class="ruby-value">6</span>])
632:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">a</span>, <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'firm_id = ?'</span>, <span class="ruby-value">6</span>]) <span class="ruby-comment cmt"># find_by_credit_limit has been cached</span>
633:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004892" class="method">
  <div id="M004892_title" class="title">
    <b>test_dynamic_finder_returns_same_results_after_caching</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004892_source')" id="l_M004892_source">show source</a> ]</p>
  <div id="M004892_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 570</span>
570:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_finder_returns_same_results_after_caching</span>
571:     <span class="ruby-comment cmt"># ensure this test can run independently of order</span>
572:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Topic</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_by_title</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_method_defined?</span>(<span class="ruby-identifier">:find_by_title</span>)
573:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>)
574:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">t</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>) <span class="ruby-comment cmt"># find_by_title has been cached</span>
575:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004946" class="method">
  <div id="M004946_title" class="title">
    <b>test_dynamic_finder_with_invalid_params</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004946_source')" id="l_M004946_source">show source</a> ]</p>
  <div id="M004946_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 955</span>
955:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_finder_with_invalid_params</span>
956:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span> <span class="ruby-value str">'No Title'</span>, <span class="ruby-identifier">:join</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;It should be `joins'&quot;</span> }
957:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004888" class="method">
  <div id="M004888_title" class="title">
    <b>test_dynamic_finders_should_go_through_the_find_class_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004888_source')" id="l_M004888_source">show source</a> ]</p>
  <div id="M004888_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 537</span>
537:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_finders_should_go_through_the_find_class_method</span>
538:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:find</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'The First Topic!'</span> })
539:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic!&quot;</span>)
540: 
541:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:find</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:last</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'The Last Topic!'</span> })
542:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title</span>(<span class="ruby-value str">&quot;The Last Topic!&quot;</span>)
543: 
544:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:find</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'A Topic.'</span> })
545:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_title</span>(<span class="ruby-value str">&quot;A Topic.&quot;</span>)
546: 
547:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">expects</span>(<span class="ruby-identifier">:find</span>).<span class="ruby-identifier">with</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'Does not exist yet for sure!'</span> }).<span class="ruby-identifier">times</span>(<span class="ruby-value">2</span>)
548:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_initialize_by_title</span>(<span class="ruby-value str">'Does not exist yet for sure!'</span>)
549:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_create_by_title</span>(<span class="ruby-value str">'Does not exist yet for sure!'</span>)
550:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004821" class="method">
  <div id="M004821_title" class="title">
    <b>test_exists</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004821_source')" id="l_M004821_source">show source</a> ]</p>
  <div id="M004821_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exists</span>
80:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-value">1</span>)
81:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-value str">&quot;1&quot;</span>)
82:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;David&quot;</span>)
83:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Mary&quot;</span>, <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>)
84:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>([<span class="ruby-value str">&quot;parent_id = ?&quot;</span>, <span class="ruby-value">1</span>])
85:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-value">45</span>)
86: 
87:     <span class="ruby-keyword kw">begin</span>
88:       <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
89:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>
90:       <span class="ruby-comment cmt"># PostgreSQL complains about string comparison with integer field</span>
91:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
92:       <span class="ruby-identifier">flunk</span>
93:     <span class="ruby-keyword kw">end</span>
94: 
95:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>([<span class="ruby-value">1</span>,<span class="ruby-value">2</span>]) }
96:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004822" class="method">
  <div id="M004822_title" class="title">
    <b>test_exists_returns_true_with_one_record_and_no_args</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004822_source')" id="l_M004822_source">show source</a> ]</p>
  <div id="M004822_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 98</span>
 98:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exists_returns_true_with_one_record_and_no_args</span>
 99:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">exists?</span>
100:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004824" class="method">
  <div id="M004824_title" class="title">
    <b>test_exists_with_aggregate_having_three_mappings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004824_source')" id="l_M004824_source">show source</a> ]</p>
  <div id="M004824_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 107</span>
107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exists_with_aggregate_having_three_mappings</span>
108:     <span class="ruby-identifier">existing_address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
109:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">existing_address</span>)
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004825" class="method">
  <div id="M004825_title" class="title">
    <b>test_exists_with_aggregate_having_three_mappings_with_one_difference</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004825_source')" id="l_M004825_source">show source</a> ]</p>
  <div id="M004825_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exists_with_aggregate_having_three_mappings_with_one_difference</span>
113:     <span class="ruby-identifier">existing_address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
114:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Customer</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span>
115:       <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">country</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>))
116:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Customer</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span>
117:       <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">city</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">country</span>))
118:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Customer</span>.<span class="ruby-identifier">exists?</span>(<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span>
119:       <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">street</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-identifier">existing_address</span>.<span class="ruby-identifier">country</span>))
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004826" class="method">
  <div id="M004826_title" class="title">
    <b>test_exists_with_scoped_include</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004826_source')" id="l_M004826_source">show source</a> ]</p>
  <div id="M004826_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exists_with_scoped_include</span>
123:     <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:projects</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;projects.name&quot;</span> }) <span class="ruby-keyword kw">do</span>
124:       <span class="ruby-identifier">assert</span> <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">exists?</span>
125:     <span class="ruby-keyword kw">end</span>
126:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004819" class="method">
  <div id="M004819_title" class="title">
    <b>test_find</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004819_source')" id="l_M004819_source">show source</a> ]</p>
  <div id="M004819_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find</span>
70:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">title</span>)
71:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004916" class="method">
  <div id="M004916_title" class="title">
    <b>test_find_all_by_array_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004916_source')" id="l_M004916_source">show source</a> ]</p>
  <div id="M004916_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 729</span>
729:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_array_attribute</span>
730:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_title</span>([<span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-value str">&quot;The Second Topic of the day&quot;</span>]).<span class="ruby-identifier">size</span>
731:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004917" class="method">
  <div id="M004917_title" class="title">
    <b>test_find_all_by_boolean_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004917_source')" id="l_M004917_source">show source</a> ]</p>
  <div id="M004917_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 733</span>
733:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_boolean_attribute</span>
734:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_approved</span>(<span class="ruby-keyword kw">false</span>)
735:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
736:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>))
737: 
738:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_approved</span>(<span class="ruby-keyword kw">true</span>)
739:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
740:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>))
741:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004921" class="method">
  <div id="M004921_title" class="title">
    <b>test_find_all_by_nil_and_not_nil_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004921_source')" id="l_M004921_source">show source</a> ]</p>
  <div id="M004921_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_nil_and_not_nil_attributes</span>
761:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_last_read_and_author_name</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;Mary&quot;</span>
762:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
763:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Mary&quot;</span>, <span class="ruby-identifier">topics</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">author_name</span>
764:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004919" class="method">
  <div id="M004919_title" class="title">
    <b>test_find_all_by_nil_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004919_source')" id="l_M004919_source">show source</a> ]</p>
  <div id="M004919_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 749</span>
749:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_nil_attribute</span>
750:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_last_read</span> <span class="ruby-keyword kw">nil</span>
751:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
752:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:last_read</span>).<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:nil?</span>)
753:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004911" class="method">
  <div id="M004911_title" class="title">
    <b>test_find_all_by_one_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004911_source')" id="l_M004911_source">show source</a> ]</p>
  <div id="M004911_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 687</span>
687:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_one_attribute</span>
688:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_content</span>(<span class="ruby-value str">&quot;Have a nice day&quot;</span>)
689:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>
690:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>))
691: 
692:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_title</span>(<span class="ruby-value str">&quot;The First Topic!!&quot;</span>)
693:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004912" class="method">
  <div id="M004912_title" class="title">
    <b>test_find_all_by_one_attribute_that_is_an_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004912_source')" id="l_M004912_source">show source</a> ]</p>
  <div id="M004912_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 695</span>
695:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_one_attribute_that_is_an_aggregate</span>
696:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
697:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
698:     <span class="ruby-identifier">found_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_all_by_balance</span>(<span class="ruby-identifier">balance</span>)
699:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">size</span>
700:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">first</span>
701:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004915" class="method">
  <div id="M004915_title" class="title">
    <b>test_find_all_by_one_attribute_with_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004915_source')" id="l_M004915_source">show source</a> ]</p>
  <div id="M004915_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 721</span>
721:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_one_attribute_with_options</span>
722:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_content</span>(<span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id DESC&quot;</span>)
723:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">last</span>
724: 
725:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_all_by_content</span>(<span class="ruby-value str">&quot;Have a nice day&quot;</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id&quot;</span>)
726:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>
727:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004913" class="method">
  <div id="M004913_title" class="title">
    <b>test_find_all_by_two_attributes_that_are_both_aggregates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004913_source')" id="l_M004913_source">show source</a> ]</p>
  <div id="M004913_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 703</span>
703:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_two_attributes_that_are_both_aggregates</span>
704:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
705:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
706:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
707:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
708:     <span class="ruby-identifier">found_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_all_by_balance_and_address</span>(<span class="ruby-identifier">balance</span>, <span class="ruby-identifier">address</span>)
709:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">size</span>
710:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">first</span>
711:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004914" class="method">
  <div id="M004914_title" class="title">
    <b>test_find_all_by_two_attributes_with_one_being_an_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004914_source')" id="l_M004914_source">show source</a> ]</p>
  <div id="M004914_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 713</span>
713:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_by_two_attributes_with_one_being_an_aggregate</span>
714:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
715:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
716:     <span class="ruby-identifier">found_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_all_by_balance_and_name</span>(<span class="ruby-identifier">balance</span>, <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">name</span>)
717:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">size</span>
718:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customers</span>.<span class="ruby-identifier">first</span>
719:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004947" class="method">
  <div id="M004947_title" class="title">
    <b>test_find_all_with_join</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004947_source')" id="l_M004947_source">show source</a> ]</p>
  <div id="M004947_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 959</span>
959:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_with_join</span>
960:     <span class="ruby-identifier">developers_on_project_one</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(
961:       <span class="ruby-identifier">:all</span>,
962:       <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'LEFT JOIN developers_projects ON developers.id = developers_projects.developer_id'</span>,
963:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'project_id=1'</span>
964:     )
965:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">length</span>
966:     <span class="ruby-identifier">developer_names</span> = <span class="ruby-identifier">developers_on_project_one</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">d</span><span class="ruby-operator">|</span> <span class="ruby-identifier">d</span>.<span class="ruby-identifier">name</span> }
967:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'David'</span>)
968:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developer_names</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'Jamis'</span>)
969:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004832" class="method">
  <div id="M004832_title" class="title">
    <b>test_find_all_with_limit</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004832_source')" id="l_M004832_source">show source</a> ]</p>
  <div id="M004832_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_with_limit</span>
159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>)
160:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">0</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>).<span class="ruby-identifier">size</span>)
161:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004834" class="method">
  <div id="M004834_title" class="title">
    <b>test_find_all_with_limit_and_offset_and_multiple_order_clauses</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004834_source')" id="l_M004834_source">show source</a> ]</p>
  <div id="M004834_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 175</span>
175:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_with_limit_and_offset_and_multiple_order_clauses</span>
176:     <span class="ruby-identifier">first_three_posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'author_id, id'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
177:     <span class="ruby-identifier">second_three_posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">' author_id,id '</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>
178:     <span class="ruby-identifier">last_posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">' author_id, id  '</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">6</span>
179: 
180:     <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value">0</span>,<span class="ruby-value">3</span>],[<span class="ruby-value">1</span>,<span class="ruby-value">1</span>],[<span class="ruby-value">1</span>,<span class="ruby-value">2</span>]], <span class="ruby-identifier">first_three_posts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>.<span class="ruby-identifier">author_id</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span>] }
181:     <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value">1</span>,<span class="ruby-value">4</span>],[<span class="ruby-value">1</span>,<span class="ruby-value">5</span>],[<span class="ruby-value">1</span>,<span class="ruby-value">6</span>]], <span class="ruby-identifier">second_three_posts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>.<span class="ruby-identifier">author_id</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span>] }
182:     <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value">2</span>,<span class="ruby-value">7</span>]], <span class="ruby-identifier">last_posts</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> [<span class="ruby-identifier">p</span>.<span class="ruby-identifier">author_id</span>, <span class="ruby-identifier">p</span>.<span class="ruby-identifier">id</span>] }
183:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004833" class="method">
  <div id="M004833_title" class="title">
    <b>test_find_all_with_prepared_limit_and_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004833_source')" id="l_M004833_source">show source</a> ]</p>
  <div id="M004833_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 163</span>
163:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_all_with_prepared_limit_and_offset</span>
164:     <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id ASC&quot;</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
165: 
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">size</span>)
167:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">entrants</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>)
168: 
169:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">count</span>
170:     <span class="ruby-identifier">entrants</span> = <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;id ASC&quot;</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
171:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">size</span>)
172:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">entrants</span>(<span class="ruby-identifier">:third</span>).<span class="ruby-identifier">name</span>, <span class="ruby-identifier">entrants</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>)
173:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004830" class="method">
  <div id="M004830_title" class="title">
    <b>test_find_an_empty_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004830_source')" id="l_M004830_source">show source</a> ]</p>
  <div id="M004830_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_an_empty_array</span>
151:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>([])
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004827" class="method">
  <div id="M004827_title" class="title">
    <b>test_find_by_array_of_one_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004827_source')" id="l_M004827_source">show source</a> ]</p>
  <div id="M004827_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_array_of_one_id</span>
129:     <span class="ruby-identifier">assert_kind_of</span>(<span class="ruby-constant">Array</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>([ <span class="ruby-value">1</span> ]))
130:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>([ <span class="ruby-value">1</span> ]).<span class="ruby-identifier">length</span>)
131:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004952" class="method">
  <div id="M004952_title" class="title">
    <b>test_find_by_empty_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004952_source')" id="l_M004952_source">show source</a> ]</p>
  <div id="M004952_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1004</span>
1004:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_empty_ids</span>
1005:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>([])
1006:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004953" class="method">
  <div id="M004953_title" class="title">
    <b>test_find_by_empty_in_condition</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004953_source')" id="l_M004953_source">show source</a> ]</p>
  <div id="M004953_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1008</span>
1008:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_empty_in_condition</span>
1009:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'id in (?)'</span>, []])
1010:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004950" class="method">
  <div id="M004950_title" class="title">
    <b>test_find_by_id_with_conditions_with_or</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004950_source')" id="l_M004950_source">show source</a> ]</p>
  <div id="M004950_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 991</span>
991:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_id_with_conditions_with_or</span>
992:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
993:       <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>([<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>],
994:         <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-node">&quot;posts.id &lt;= 3 OR posts.#{QUOTED_TYPE} = 'Post'&quot;</span>)
995:     <span class="ruby-keyword kw">end</span>
996:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004828" class="method">
  <div id="M004828_title" class="title">
    <b>test_find_by_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004828_source')" id="l_M004828_source">show source</a> ]</p>
  <div id="M004828_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 133</span>
133:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_ids</span>
134:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
135:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>([<span class="ruby-value">2</span>]).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>
136:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004831" class="method">
  <div id="M004831_title" class="title">
    <b>test_find_by_ids_missing_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004831_source')" id="l_M004831_source">show source</a> ]</p>
  <div id="M004831_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_ids_missing_one</span>
155:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">45</span>) }
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004829" class="method">
  <div id="M004829_title" class="title">
    <b>test_find_by_ids_with_limit_and_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004829_source')" id="l_M004829_source">show source</a> ]</p>
  <div id="M004829_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_ids_with_limit_and_offset</span>
139:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>([<span class="ruby-value">1</span>,<span class="ruby-value">3</span>,<span class="ruby-value">2</span>], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
140:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Entrant</span>.<span class="ruby-identifier">find</span>([<span class="ruby-value">1</span>,<span class="ruby-value">3</span>,<span class="ruby-value">2</span>], <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
141: 
142:     <span class="ruby-comment cmt"># Also test an edge case: If you have 11 results, and you set a</span>
143:     <span class="ruby-comment cmt">#   limit of 3 and offset of 9, then you should find that there</span>
144:     <span class="ruby-comment cmt">#   will be only 2 results, regardless of the limit.</span>
145:     <span class="ruby-identifier">devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:all</span>
146:     <span class="ruby-identifier">last_devs</span> = <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">devs</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>), <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:offset</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">9</span>
147:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">last_devs</span>.<span class="ruby-identifier">size</span>
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004903" class="method">
  <div id="M004903_title" class="title">
    <b>test_find_by_invalid_method_syntax</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004903_source')" id="l_M004903_source">show source</a> ]</p>
  <div id="M004903_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 643</span>
643:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_invalid_method_syntax</span>
644:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">fail_to_find_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>) }
645:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title?</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>) }
646:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">fail_to_find_or_create_by_title</span>(<span class="ruby-value str">&quot;Nonexistent Title&quot;</span>) }
647:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_create_by_title?</span>(<span class="ruby-value str">&quot;Nonexistent Title&quot;</span>) }
648:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004920" class="method">
  <div id="M004920_title" class="title">
    <b>test_find_by_nil_and_not_nil_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004920_source')" id="l_M004920_source">show source</a> ]</p>
  <div id="M004920_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 755</span>
755:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_nil_and_not_nil_attributes</span>
756:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_last_read_and_author_name</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;Mary&quot;</span>
757:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Mary&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004918" class="method">
  <div id="M004918_title" class="title">
    <b>test_find_by_nil_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004918_source')" id="l_M004918_source">show source</a> ]</p>
  <div id="M004918_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 743</span>
743:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_nil_attribute</span>
744:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_last_read</span> <span class="ruby-keyword kw">nil</span>
745:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">topic</span>
746:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
747:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004889" class="method">
  <div id="M004889_title" class="title">
    <b>test_find_by_one_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004889_source')" id="l_M004889_source">show source</a> ]</p>
  <div id="M004889_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 552</span>
552:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute</span>
553:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>)
554:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic!&quot;</span>)
555:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004890" class="method">
  <div id="M004890_title" class="title">
    <b>test_find_by_one_attribute_bang</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004890_source')" id="l_M004890_source">show source</a> ]</p>
  <div id="M004890_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 557</span>
557:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_bang</span>
558:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title!</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>)
559:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title!</span>(<span class="ruby-value str">&quot;The First Topic!&quot;</span>) }
560:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004891" class="method">
  <div id="M004891_title" class="title">
    <b>test_find_by_one_attribute_caches_dynamic_finder</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004891_source')" id="l_M004891_source">show source</a> ]</p>
  <div id="M004891_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 562</span>
562:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_caches_dynamic_finder</span>
563:     <span class="ruby-comment cmt"># ensure this test can run independently of order</span>
564:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Topic</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_by_title</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_title'</span> }
565:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_title'</span> }
566:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>)
567:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_by_title'</span> }
568:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004895" class="method">
  <div id="M004895_title" class="title">
    <b>test_find_by_one_attribute_that_is_an_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004895_source')" id="l_M004895_source">show source</a> ]</p>
  <div id="M004895_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 586</span>
586:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_that_is_an_aggregate</span>
587:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
588:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
589:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_address</span>(<span class="ruby-identifier">address</span>)
590:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
591:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004896" class="method">
  <div id="M004896_title" class="title">
    <b>test_find_by_one_attribute_that_is_an_aggregate_with_one_attribute_difference</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004896_source')" id="l_M004896_source">show source</a> ]</p>
  <div id="M004896_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 593</span>
593:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_that_is_an_aggregate_with_one_attribute_difference</span>
594:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
595:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
596:     <span class="ruby-identifier">missing_address</span> = <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">country</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>)
597:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_address</span>(<span class="ruby-identifier">missing_address</span>)
598:     <span class="ruby-identifier">missing_address</span> = <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">address</span>.<span class="ruby-identifier">street</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">city</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">country</span>)
599:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_address</span>(<span class="ruby-identifier">missing_address</span>)
600:     <span class="ruby-identifier">missing_address</span> = <span class="ruby-constant">Address</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">address</span>.<span class="ruby-identifier">street</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">city</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">country</span>)
601:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_address</span>(<span class="ruby-identifier">missing_address</span>)
602:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004894" class="method">
  <div id="M004894_title" class="title">
    <b>test_find_by_one_attribute_with_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004894_source')" id="l_M004894_source">show source</a> ]</p>
  <div id="M004894_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 582</span>
582:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_with_conditions</span>
583:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:rails_core_account</span>), <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'firm_id = ?'</span>, <span class="ruby-value">6</span>])
584:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004893" class="method">
  <div id="M004893_title" class="title">
    <b>test_find_by_one_attribute_with_order_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004893_source')" id="l_M004893_source">show source</a> ]</p>
  <div id="M004893_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 577</span>
577:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_with_order_option</span>
578:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>), <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id'</span>)
579:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:rails_core_account</span>), <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span>)
580:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004901" class="method">
  <div id="M004901_title" class="title">
    <b>test_find_by_one_attribute_with_several_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004901_source')" id="l_M004901_source">show source</a> ]</p>
  <div id="M004901_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 635</span>
635:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_attribute_with_several_options</span>
636:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:unknown</span>), <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'id != ?'</span>, <span class="ruby-value">3</span>])
637:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004902" class="method">
  <div id="M004902_title" class="title">
    <b>test_find_by_one_missing_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004902_source')" id="l_M004902_source">show source</a> ]</p>
  <div id="M004902_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 639</span>
639:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_one_missing_attribute</span>
640:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_undertitle</span>(<span class="ruby-value str">&quot;The First Topic!&quot;</span>) }
641:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004954" class="method">
  <div id="M004954_title" class="title">
    <b>test_find_by_records</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004954_source')" id="l_M004954_source">show source</a> ]</p>
  <div id="M004954_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1012</span>
1012:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_records</span>
1013:     <span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
1014:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'id in (?)'</span>, [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>]], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
1015:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'id in (?)'</span>, [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>.<span class="ruby-identifier">id</span>]], <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
1016:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004840" class="method">
  <div id="M004840_title" class="title">
    <b>test_find_by_sql_with_sti_on_joined_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004840_source')" id="l_M004840_source">show source</a> ]</p>
  <div id="M004840_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 220</span>
220:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_sql_with_sti_on_joined_table</span>
221:     <span class="ruby-identifier">accounts</span> = <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_by_sql</span>(<span class="ruby-value str">&quot;SELECT * FROM accounts INNER JOIN companies ON companies.id = accounts.firm_id&quot;</span>)
222:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-constant">Account</span>], <span class="ruby-identifier">accounts</span>.<span class="ruby-identifier">collect</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:class</span>).<span class="ruby-identifier">uniq</span>
223:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004904" class="method">
  <div id="M004904_title" class="title">
    <b>test_find_by_two_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004904_source')" id="l_M004904_source">show source</a> ]</p>
  <div id="M004904_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 650</span>
650:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_two_attributes</span>
651:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>), <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title_and_author_name</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-value str">&quot;David&quot;</span>)
652:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_title_and_author_name</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-value str">&quot;Mary&quot;</span>)
653:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004897" class="method">
  <div id="M004897_title" class="title">
    <b>test_find_by_two_attributes_that_are_both_aggregates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004897_source')" id="l_M004897_source">show source</a> ]</p>
  <div id="M004897_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 604</span>
604:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_two_attributes_that_are_both_aggregates</span>
605:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
606:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
607:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
608:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
609:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_balance_and_address</span>(<span class="ruby-identifier">balance</span>, <span class="ruby-identifier">address</span>)
610:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
611:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004898" class="method">
  <div id="M004898_title" class="title">
    <b>test_find_by_two_attributes_with_one_being_an_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004898_source')" id="l_M004898_source">show source</a> ]</p>
  <div id="M004898_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 613</span>
613:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_two_attributes_with_one_being_an_aggregate</span>
614:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
615:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
616:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_by_balance_and_name</span>(<span class="ruby-identifier">balance</span>, <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">name</span>)
617:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
618:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004841" class="method">
  <div id="M004841_title" class="title">
    <b>test_find_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004841_source')" id="l_M004841_source">show source</a> ]</p>
  <div id="M004841_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 225</span>
225:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_first</span>
226:     <span class="ruby-identifier">first</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;title = 'The First Topic'&quot;</span>)
227:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:first</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
228:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004842" class="method">
  <div id="M004842_title" class="title">
    <b>test_find_first_failing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004842_source')" id="l_M004842_source">show source</a> ]</p>
  <div id="M004842_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 230</span>
230:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_first_failing</span>
231:     <span class="ruby-identifier">first</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;title = 'The First Topic!'&quot;</span>)
232:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">first</span>)
233:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004951" class="method">
  <div id="M004951_title" class="title">
    <b>test_find_ignores_previously_inserted_record</b>()
  </div>
  <div class="description">
  <p>
<a href="http://dev.rubyonrails.org/ticket/6778"
target="_blank">http://dev.rubyonrails.org/ticket/6778</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004951_source')" id="l_M004951_source">show source</a> ]</p>
  <div id="M004951_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 999</span>
 999:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_ignores_previously_inserted_record</span>
1000:     <span class="ruby-identifier">post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">create!</span>(<span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:body</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'it out'</span>)
1001:     <span class="ruby-identifier">assert_equal</span> [], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find_all_by_id</span>(<span class="ruby-keyword kw">nil</span>)
1002:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004907" class="method">
  <div id="M004907_title" class="title">
    <b>test_find_last_by_invalid_method_syntax</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004907_source')" id="l_M004907_source">show source</a> ]</p>
  <div id="M004907_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 668</span>
668:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_invalid_method_syntax</span>
669:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">fail_to_find_last_by_title</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>) }
670:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title?</span>(<span class="ruby-value str">&quot;The First Topic&quot;</span>) }
671:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004905" class="method">
  <div id="M004905_title" class="title">
    <b>test_find_last_by_one_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004905_source')" id="l_M004905_source">show source</a> ]</p>
  <div id="M004905_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 655</span>
655:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_one_attribute</span>
656:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">last</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">title</span>)
657:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title</span>(<span class="ruby-value str">&quot;A title with no matches&quot;</span>)
658:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004906" class="method">
  <div id="M004906_title" class="title">
    <b>test_find_last_by_one_attribute_caches_dynamic_finder</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004906_source')" id="l_M004906_source">show source</a> ]</p>
  <div id="M004906_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_one_attribute_caches_dynamic_finder</span>
661:     <span class="ruby-comment cmt"># ensure this test can run independently of order</span>
662:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Topic</span>; <span class="ruby-keyword kw">self</span>; <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:remove_method</span>, <span class="ruby-identifier">:find_last_by_title</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_last_by_title'</span> }
663:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_last_by_title'</span> }
664:     <span class="ruby-identifier">t</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">title</span>)
665:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">public_methods</span>.<span class="ruby-identifier">any?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">m</span><span class="ruby-operator">|</span> <span class="ruby-identifier">m</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'find_last_by_title'</span> }
666:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004908" class="method">
  <div id="M004908_title" class="title">
    <b>test_find_last_by_one_attribute_with_several_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004908_source')" id="l_M004908_source">show source</a> ]</p>
  <div id="M004908_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 673</span>
673:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_one_attribute_with_several_options</span>
674:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">accounts</span>(<span class="ruby-identifier">:signals37</span>), <span class="ruby-constant">Account</span>.<span class="ruby-identifier">find_last_by_credit_limit</span>(<span class="ruby-value">50</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id DESC'</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'id != ?'</span>, <span class="ruby-value">3</span>])
675:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004909" class="method">
  <div id="M004909_title" class="title">
    <b>test_find_last_by_one_missing_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004909_source')" id="l_M004909_source">show source</a> ]</p>
  <div id="M004909_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 677</span>
677:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_one_missing_attribute</span>
678:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">NoMethodError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_undertitle</span>(<span class="ruby-value str">&quot;The Last Topic!&quot;</span>) }
679:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004910" class="method">
  <div id="M004910_title" class="title">
    <b>test_find_last_by_two_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004910_source')" id="l_M004910_source">show source</a> ]</p>
  <div id="M004910_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 681</span>
681:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_last_by_two_attributes</span>
682:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">last</span>
683:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topic</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title_and_author_name</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>)
684:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_last_by_title_and_author_name</span>(<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>, <span class="ruby-value str">&quot;Anonymous&quot;</span>)
685:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004849" class="method">
  <div id="M004849_title" class="title">
    <b>test_find_on_array_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004849_source')" id="l_M004849_source">show source</a> ]</p>
  <div id="M004849_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 273</span>
273:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_array_conditions</span>
274:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;approved = ?&quot;</span>, <span class="ruby-keyword kw">false</span>])
275:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;approved = ?&quot;</span>, <span class="ruby-keyword kw">true</span>]) }
276:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004856" class="method">
  <div id="M004856_title" class="title">
    <b>test_find_on_association_proxy_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004856_source')" id="l_M004856_source">show source</a> ]</p>
  <div id="M004856_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 313</span>
313:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_association_proxy_conditions</span>
314:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>, <span class="ruby-value">2</span>, <span class="ruby-value">3</span>, <span class="ruby-value">5</span>, <span class="ruby-value">6</span>, <span class="ruby-value">7</span>, <span class="ruby-value">8</span>, <span class="ruby-value">9</span>, <span class="ruby-value">10</span>], <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find_all_by_post_id</span>(<span class="ruby-identifier">authors</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">posts</span>).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
315:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004848" class="method">
  <div id="M004848_title" class="title">
    <b>test_find_on_blank_bind_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004848_source')" id="l_M004848_source">show source</a> ]</p>
  <div id="M004848_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 267</span>
267:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_blank_bind_conditions</span>
268:     [ [<span class="ruby-value str">&quot;&quot;</span>], [<span class="ruby-value str">&quot;&quot;</span>,{}] ].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">blank</span><span class="ruby-operator">|</span>
269:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">blank</span>) }
270:     <span class="ruby-keyword kw">end</span>
271:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004847" class="method">
  <div id="M004847_title" class="title">
    <b>test_find_on_blank_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004847_source')" id="l_M004847_source">show source</a> ]</p>
  <div id="M004847_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_blank_conditions</span>
262:     [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot; &quot;</span>, [], {}].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">blank</span><span class="ruby-operator">|</span>
263:       <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">blank</span>) }
264:     <span class="ruby-keyword kw">end</span>
265:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004850" class="method">
  <div id="M004850_title" class="title">
    <b>test_find_on_hash_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004850_source')" id="l_M004850_source">show source</a> ]</p>
  <div id="M004850_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 278</span>
278:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions</span>
279:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
280:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }) }
281:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004858" class="method">
  <div id="M004858_title" class="title">
    <b>test_find_on_hash_conditions_with_end_exclusive_range</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004858_source')" id="l_M004858_source">show source</a> ]</p>
  <div id="M004858_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_end_exclusive_range</span>
323:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span> }).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
324:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">...</span><span class="ruby-value">3</span> }).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
325:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">3</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span><span class="ruby-operator">...</span><span class="ruby-value">3</span> }) }
326:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004851" class="method">
  <div id="M004851_title" class="title">
    <b>test_find_on_hash_conditions_with_explicit_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004851_source')" id="l_M004851_source">show source</a> ]</p>
  <div id="M004851_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 283</span>
283:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_explicit_table_name</span>
284:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">'topics.approved'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
285:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">'topics.approved'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }) }
286:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004855" class="method">
  <div id="M004855_title" class="title">
    <b>test_find_on_hash_conditions_with_explicit_table_name_and_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004855_source')" id="l_M004855_source">show source</a> ]</p>
  <div id="M004855_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 305</span>
305:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_explicit_table_name_and_aggregate</span>
306:     <span class="ruby-identifier">david</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>)
307:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">'customers.name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">address</span> })
308:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) {
309:       <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">david</span>.<span class="ruby-identifier">id</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-value str">'customers.name'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">david</span>.<span class="ruby-identifier">address</span> })
310:     }
311:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004852" class="method">
  <div id="M004852_title" class="title">
    <b>test_find_on_hash_conditions_with_hashed_table_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004852_source')" id="l_M004852_source">show source</a> ]</p>
  <div id="M004852_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_hashed_table_name</span>
289:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:topics</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }})
290:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:topics</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }}) }
291:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004859" class="method">
  <div id="M004859_title" class="title">
    <b>test_find_on_hash_conditions_with_multiple_ranges</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004859_source')" id="l_M004859_source">show source</a> ]</p>
  <div id="M004859_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 328</span>
328:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_multiple_ranges</span>
329:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>,<span class="ruby-value">3</span>], <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">3</span>, <span class="ruby-identifier">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span> }).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
330:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>], <span class="ruby-constant">Comment</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">1</span>, <span class="ruby-identifier">:post_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">10</span> }).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
331:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004857" class="method">
  <div id="M004857_title" class="title">
    <b>test_find_on_hash_conditions_with_range</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004857_source')" id="l_M004857_source">show source</a> ]</p>
  <div id="M004857_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 317</span>
317:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_hash_conditions_with_range</span>
318:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>], <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">2</span> }).<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:id</span>).<span class="ruby-identifier">sort</span>
319:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span><span class="ruby-operator">..</span><span class="ruby-value">3</span> }) }
320:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004860" class="method">
  <div id="M004860_title" class="title">
    <b>test_find_on_multiple_hash_conditions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004860_source')" id="l_M004860_source">show source</a> ]</p>
  <div id="M004860_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 333</span>
333:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_on_multiple_hash_conditions</span>
334:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">:replies_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> })
335:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">:replies_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }) }
336:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;HHC&quot;</span>, <span class="ruby-identifier">:replies_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span> }) }
337:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:author_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">:title</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;The First Topic&quot;</span>, <span class="ruby-identifier">:replies_count</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:approved</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }) }
338:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004846" class="method">
  <div id="M004846_title" class="title">
    <b>test_find_only_some_columns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004846_source')" id="l_M004846_source">show source</a> ]</p>
  <div id="M004846_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 251</span>
251:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_only_some_columns</span>
252:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;author_name&quot;</span>)
253:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingAttributeError</span>) {<span class="ruby-identifier">topic</span>.<span class="ruby-identifier">title</span>}
254:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;David&quot;</span>, <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">author_name</span>
255:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;title&quot;</span>)
256:     <span class="ruby-comment cmt">#assert !topic.respond_to?(&quot;title&quot;)</span>
257:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">attribute_present?</span>(<span class="ruby-value str">&quot;author_name&quot;</span>)
258:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-value str">&quot;author_name&quot;</span>)
259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004926" class="method">
  <div id="M004926_title" class="title">
    <b>test_find_or_create_from_one_aggregate_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004926_source')" id="l_M004926_source">show source</a> ]</p>
  <div id="M004926_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 801</span>
801:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_aggregate_attribute</span>
802:     <span class="ruby-identifier">number_of_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
803:     <span class="ruby-identifier">created_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>))
804:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_customers</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
805:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">created_customer</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>))
806:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">created_customer</span>.<span class="ruby-identifier">new_record?</span>
807:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004927" class="method">
  <div id="M004927_title" class="title">
    <b>test_find_or_create_from_one_aggregate_attribute_and_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004927_source')" id="l_M004927_source">show source</a> ]</p>
  <div id="M004927_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 809</span>
809:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_aggregate_attribute_and_hash</span>
810:     <span class="ruby-identifier">number_of_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
811:     <span class="ruby-identifier">balance</span> = <span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>)
812:     <span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;Elizabeth&quot;</span>
813:     <span class="ruby-identifier">created_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance</span>({<span class="ruby-identifier">:balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">balance</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>})
814:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_customers</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
815:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">created_customer</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance</span>({<span class="ruby-identifier">:balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">balance</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>})
816:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">created_customer</span>.<span class="ruby-identifier">new_record?</span>
817:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">balance</span>, <span class="ruby-identifier">created_customer</span>.<span class="ruby-identifier">balance</span>
818:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">created_customer</span>.<span class="ruby-identifier">name</span>
819:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004922" class="method">
  <div id="M004922_title" class="title">
    <b>test_find_or_create_from_one_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004922_source')" id="l_M004922_source">show source</a> ]</p>
  <div id="M004922_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 766</span>
766:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_attribute</span>
767:     <span class="ruby-identifier">number_of_companies</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count</span>
768:     <span class="ruby-identifier">sig38</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-value str">&quot;38signals&quot;</span>)
769:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_companies</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count</span>
770:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">sig38</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-value str">&quot;38signals&quot;</span>)
771:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">new_record?</span>
772:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004925" class="method">
  <div id="M004925_title" class="title">
    <b>test_find_or_create_from_one_attribute_and_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004925_source')" id="l_M004925_source">show source</a> ]</p>
  <div id="M004925_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 790</span>
790:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_attribute_and_hash</span>
791:     <span class="ruby-identifier">number_of_companies</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count</span>
792:     <span class="ruby-identifier">sig38</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>({<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">:firm_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">17</span>, <span class="ruby-identifier">:client_of</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">23</span>})
793:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_companies</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count</span>
794:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">sig38</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>({<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">:firm_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">17</span>, <span class="ruby-identifier">:client_of</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">23</span>})
795:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">new_record?</span>
796:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">name</span>
797:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">17</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">firm_id</span>
798:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">23</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">client_of</span>
799:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004931" class="method">
  <div id="M004931_title" class="title">
    <b>test_find_or_create_from_one_attribute_should_not_set_attribute_even_when_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004931_source')" id="l_M004931_source">show source</a> ]</p>
  <div id="M004931_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 841</span>
841:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_attribute_should_not_set_attribute_even_when_protected</span>
842:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>({<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">:rating</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1000</span>})
843:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
844:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
845:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
846:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
847:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004935" class="method">
  <div id="M004935_title" class="title">
    <b>test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004935_source')" id="l_M004935_source">show source</a> ]</p>
  <div id="M004935_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 873</span>
873:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected</span>
874:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name_and_rating</span>(<span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-value">1000</span>)
875:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
876:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
877:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
878:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
879:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004933" class="method">
  <div id="M004933_title" class="title">
    <b>test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004933_source')" id="l_M004933_source">show source</a> ]</p>
  <div id="M004933_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 857</span>
857:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</span>
858:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_rating</span>(<span class="ruby-value">1000</span>, {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>})
859:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
860:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
861:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
862:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
863:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004923" class="method">
  <div id="M004923_title" class="title">
    <b>test_find_or_create_from_two_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004923_source')" id="l_M004923_source">show source</a> ]</p>
  <div id="M004923_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 774</span>
774:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_two_attributes</span>
775:     <span class="ruby-identifier">number_of_topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
776:     <span class="ruby-identifier">another</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_create_by_title_and_author_name</span>(<span class="ruby-value str">&quot;Another topic&quot;</span>,<span class="ruby-value str">&quot;John&quot;</span>)
777:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_topics</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">count</span>
778:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">another</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_create_by_title_and_author_name</span>(<span class="ruby-value str">&quot;Another topic&quot;</span>, <span class="ruby-value str">&quot;John&quot;</span>)
779:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">another</span>.<span class="ruby-identifier">new_record?</span>
780:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004924" class="method">
  <div id="M004924_title" class="title">
    <b>test_find_or_create_from_two_attributes_with_one_being_an_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004924_source')" id="l_M004924_source">show source</a> ]</p>
  <div id="M004924_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 782</span>
782:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_from_two_attributes_with_one_being_an_aggregate</span>
783:     <span class="ruby-identifier">number_of_customers</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
784:     <span class="ruby-identifier">created_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance_and_name</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>), <span class="ruby-value str">&quot;Elizabeth&quot;</span>)
785:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">number_of_customers</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">count</span>
786:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">created_customer</span>, <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_create_by_balance</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>), <span class="ruby-value str">&quot;Elizabeth&quot;</span>)
787:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">created_customer</span>.<span class="ruby-identifier">new_record?</span>
788:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004937" class="method">
  <div id="M004937_title" class="title">
    <b>test_find_or_create_should_set_protected_attributes_if_given_as_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004937_source')" id="l_M004937_source">show source</a> ]</p>
  <div id="M004937_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 889</span>
889:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_should_set_protected_attributes_if_given_as_block</span>
890:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">rating</span> = <span class="ruby-value">1000</span> }
891:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
892:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>.<span class="ruby-identifier">to_f</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>.<span class="ruby-identifier">to_f</span>
893:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
894:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
895:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004938" class="method">
  <div id="M004938_title" class="title">
    <b>test_find_or_create_should_work_with_block_on_first_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004938_source')" id="l_M004938_source">show source</a> ]</p>
  <div id="M004938_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 897</span>
897:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_create_should_work_with_block_on_first_call</span>
898:           <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Company</span>
899:                 <span class="ruby-identifier">undef_method</span>(<span class="ruby-identifier">:find_or_create_by_name</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">method_defined?</span>(<span class="ruby-identifier">:find_or_create_by_name</span>)
900:           <span class="ruby-keyword kw">end</span>
901:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_create_by_name</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">rating</span> = <span class="ruby-value">1000</span> }
902:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
903:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>.<span class="ruby-identifier">to_f</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>.<span class="ruby-identifier">to_f</span>
904:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
905:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
906:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004929" class="method">
  <div id="M004929_title" class="title">
    <b>test_find_or_initialize_from_one_aggregate_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004929_source')" id="l_M004929_source">show source</a> ]</p>
  <div id="M004929_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 827</span>
827:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_aggregate_attribute</span>
828:     <span class="ruby-identifier">new_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_initialize_by_balance</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>))
829:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">123</span>, <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">balance</span>.<span class="ruby-identifier">amount</span>
830:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">new_record?</span>
831:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004943" class="method">
  <div id="M004943_title" class="title">
    <b>test_find_or_initialize_from_one_aggregate_attribute_and_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004943_source')" id="l_M004943_source">show source</a> ]</p>
  <div id="M004943_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 937</span>
937:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_aggregate_attribute_and_hash</span>
938:     <span class="ruby-identifier">balance</span> = <span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>)
939:     <span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;Elizabeth&quot;</span>
940:     <span class="ruby-identifier">new_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_initialize_by_balance</span>({<span class="ruby-identifier">:balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">balance</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>})
941:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">balance</span>, <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">balance</span>
942:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">name</span>, <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">name</span>
943:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">new_record?</span>
944:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004941" class="method">
  <div id="M004941_title" class="title">
    <b>test_find_or_initialize_from_one_aggregate_attribute_and_one_not</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004941_source')" id="l_M004941_source">show source</a> ]</p>
  <div id="M004941_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 922</span>
922:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_aggregate_attribute_and_one_not</span>
923:     <span class="ruby-identifier">new_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find_or_initialize_by_balance_and_name</span>(<span class="ruby-constant">Money</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">123</span>), <span class="ruby-value str">&quot;Elizabeth&quot;</span>)
924:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">123</span>, <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">balance</span>.<span class="ruby-identifier">amount</span>
925:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Elizabeth&quot;</span>, <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">name</span>
926:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_customer</span>.<span class="ruby-identifier">new_record?</span>
927:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004928" class="method">
  <div id="M004928_title" class="title">
    <b>test_find_or_initialize_from_one_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004928_source')" id="l_M004928_source">show source</a> ]</p>
  <div id="M004928_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 821</span>
821:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_attribute</span>
822:     <span class="ruby-identifier">sig38</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>(<span class="ruby-value str">&quot;38signals&quot;</span>)
823:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">name</span>
824:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">new_record?</span>
825:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004942" class="method">
  <div id="M004942_title" class="title">
    <b>test_find_or_initialize_from_one_attribute_and_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004942_source')" id="l_M004942_source">show source</a> ]</p>
  <div id="M004942_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 929</span>
929:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_attribute_and_hash</span>
930:     <span class="ruby-identifier">sig38</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>({<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">:firm_id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">17</span>, <span class="ruby-identifier">:client_of</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">23</span>})
931:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;38signals&quot;</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">name</span>
932:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">17</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">firm_id</span>
933:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">23</span>, <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">client_of</span>
934:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sig38</span>.<span class="ruby-identifier">new_record?</span>
935:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004930" class="method">
  <div id="M004930_title" class="title">
    <b>test_find_or_initialize_from_one_attribute_should_not_set_attribute_even_when_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004930_source')" id="l_M004930_source">show source</a> ]</p>
  <div id="M004930_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 833</span>
833:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_attribute_should_not_set_attribute_even_when_protected</span>
834:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>({<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">:rating</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1000</span>})
835:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
836:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
837:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
838:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
839:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004934" class="method">
  <div id="M004934_title" class="title">
    <b>test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004934_source')" id="l_M004934_source">show source</a> ]</p>
  <div id="M004934_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 865</span>
865:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected</span>
866:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name_and_rating</span>(<span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-value">1000</span>)
867:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
868:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
869:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
870:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
871:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004932" class="method">
  <div id="M004932_title" class="title">
    <b>test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004932_source')" id="l_M004932_source">show source</a> ]</p>
  <div id="M004932_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 849</span>
849:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_one_attribute_should_set_attribute_even_when_protected_and_also_set_the_hash</span>
850:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_rating</span>(<span class="ruby-value">1000</span>, {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>})
851:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
852:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>
853:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
854:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
855:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004940" class="method">
  <div id="M004940_title" class="title">
    <b>test_find_or_initialize_from_two_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004940_source')" id="l_M004940_source">show source</a> ]</p>
  <div id="M004940_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 915</span>
915:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_from_two_attributes</span>
916:     <span class="ruby-identifier">another</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_or_initialize_by_title_and_author_name</span>(<span class="ruby-value str">&quot;Another topic&quot;</span>,<span class="ruby-value str">&quot;John&quot;</span>)
917:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Another topic&quot;</span>, <span class="ruby-identifier">another</span>.<span class="ruby-identifier">title</span>
918:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;John&quot;</span>, <span class="ruby-identifier">another</span>.<span class="ruby-identifier">author_name</span>
919:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">another</span>.<span class="ruby-identifier">new_record?</span>
920:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004936" class="method">
  <div id="M004936_title" class="title">
    <b>test_find_or_initialize_should_set_protected_attributes_if_given_as_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004936_source')" id="l_M004936_source">show source</a> ]</p>
  <div id="M004936_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 881</span>
881:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_or_initialize_should_set_protected_attributes_if_given_as_block</span>
882:     <span class="ruby-identifier">c</span> = <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find_or_initialize_by_name</span>(<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">rating</span> = <span class="ruby-value">1000</span> }
883:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;Fortune 1000&quot;</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">name</span>
884:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1000</span>.<span class="ruby-identifier">to_f</span>, <span class="ruby-identifier">c</span>.<span class="ruby-identifier">rating</span>.<span class="ruby-identifier">to_f</span>
885:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">valid?</span>
886:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">new_record?</span>
887:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004944" class="method">
  <div id="M004944_title" class="title">
    <b>test_find_with_bad_sql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004944_source')" id="l_M004944_source">show source</a> ]</p>
  <div id="M004944_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 946</span>
946:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_bad_sql</span>
947:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_sql</span> <span class="ruby-value str">&quot;select 1 from badtable&quot;</span> }
948:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004838" class="method">
  <div id="M004838_title" class="title">
    <b>test_find_with_entire_select_statement</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004838_source')" id="l_M004838_source">show source</a> ]</p>
  <div id="M004838_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 206</span>
206:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_entire_select_statement</span>
207:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_sql</span> <span class="ruby-value str">&quot;SELECT * FROM topics WHERE author_name = 'Mary'&quot;</span>
208: 
209:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
210:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
211:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004835" class="method">
  <div id="M004835_title" class="title">
    <b>test_find_with_group</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004835_source')" id="l_M004835_source">show source</a> ]</p>
  <div id="M004835_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 186</span>
186:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_group</span>
187:     <span class="ruby-identifier">developers</span> =  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>)
188:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
189:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
190:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004836" class="method">
  <div id="M004836_title" class="title">
    <b>test_find_with_group_and_having</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004836_source')" id="l_M004836_source">show source</a> ]</p>
  <div id="M004836_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 192</span>
192:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_group_and_having</span>
193:     <span class="ruby-identifier">developers</span> =  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>, <span class="ruby-identifier">:having</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;sum(salary) &gt;  10000&quot;</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>)
194:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
195:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
196:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">developer</span><span class="ruby-operator">|</span>  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">10000</span> }
197:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004837" class="method">
  <div id="M004837_title" class="title">
    <b>test_find_with_group_and_sanitized_having</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004837_source')" id="l_M004837_source">show source</a> ]</p>
  <div id="M004837_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 199</span>
199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_group_and_sanitized_having</span>
200:     <span class="ruby-identifier">developers</span> =  <span class="ruby-constant">Developer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:group</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>, <span class="ruby-identifier">:having</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;sum(salary) &gt; ?&quot;</span>, <span class="ruby-value">10000</span>], <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;salary&quot;</span>)
201:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">size</span>
202:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:salary</span>).<span class="ruby-identifier">uniq</span>.<span class="ruby-identifier">size</span>
203:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">developers</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">developer</span><span class="ruby-operator">|</span>  <span class="ruby-identifier">developer</span>.<span class="ruby-identifier">salary</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">10000</span> }
204:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004853" class="method">
  <div id="M004853_title" class="title">
    <b>test_find_with_hash_conditions_on_joined_table</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004853_source')" id="l_M004853_source">show source</a> ]</p>
  <div id="M004853_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 293</span>
293:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_hash_conditions_on_joined_table</span>
294:     <span class="ruby-identifier">firms</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">all</span> <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:accounts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:credit_limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">50</span> }}
295:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">size</span>
296:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:first_firm</span>), <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">first</span>
297:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004854" class="method">
  <div id="M004854_title" class="title">
    <b>test_find_with_hash_conditions_on_joined_table_and_with_range</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004854_source')" id="l_M004854_source">show source</a> ]</p>
  <div id="M004854_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 299</span>
299:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_hash_conditions_on_joined_table_and_with_range</span>
300:     <span class="ruby-identifier">firms</span> = <span class="ruby-constant">DependentFirm</span>.<span class="ruby-identifier">all</span> <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:account</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'RailsCore'</span>, <span class="ruby-identifier">:accounts</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:credit_limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">55</span><span class="ruby-operator">..</span><span class="ruby-value">60</span> }}
301:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">size</span>
302:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">companies</span>(<span class="ruby-identifier">:rails_core</span>), <span class="ruby-identifier">firms</span>.<span class="ruby-identifier">first</span>
303:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004945" class="method">
  <div id="M004945_title" class="title">
    <b>test_find_with_invalid_params</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004945_source')" id="l_M004945_source">show source</a> ]</p>
  <div id="M004945_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 950</span>
950:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_invalid_params</span>
951:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:join</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;It should be `joins'&quot;</span> }
952:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span> <span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'1 = 1'</span>, <span class="ruby-identifier">:join</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;It should be `joins'&quot;</span> }
953:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004958" class="method">
  <div id="M004958_title" class="title">
    <b>test_find_with_order_on_included_associations_with_construct_finder_sql_for_association_limiting_and_is_distinct</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004958_source')" id="l_M004958_source">show source</a> ]</p>
  <div id="M004958_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1041</span>
1041:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_order_on_included_associations_with_construct_finder_sql_for_association_limiting_and_is_distinct</span>
1042:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:authors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span> }, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">' author_addresses.id DESC '</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>).<span class="ruby-identifier">size</span>
1043: 
1044:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:author</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>, <span class="ruby-identifier">:authors</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author_address</span>},
1045:                               <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">' author_addresses_authors.id DESC '</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>).<span class="ruby-identifier">size</span>
1046:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004839" class="method">
  <div id="M004839_title" class="title">
    <b>test_find_with_prepared_select_statement</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004839_source')" id="l_M004839_source">show source</a> ]</p>
  <div id="M004839_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 213</span>
213:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_prepared_select_statement</span>
214:     <span class="ruby-identifier">topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find_by_sql</span> [<span class="ruby-value str">&quot;SELECT * FROM topics WHERE author_name = ?&quot;</span>, <span class="ruby-value str">&quot;Mary&quot;</span>]
215: 
216:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">size</span>)
217:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-identifier">topics</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">title</span>)
218:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004820" class="method">
  <div id="M004820_title" class="title">
    <b>test_find_with_string</b>()
  </div>
  <div class="description">
  <p>
find should handle strings that come from URLs (example:
Category.find(params[:id]))
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004820_source')" id="l_M004820_source">show source</a> ]</p>
  <div id="M004820_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 75</span>
75:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_string</span>
76:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">title</span>,<span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;1&quot;</span>).<span class="ruby-identifier">title</span>)
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004960" class="method">
  <div id="M004960_title" class="title">
    <b>test_finder_with_scoped_from</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004960_source')" id="l_M004960_source">show source</a> ]</p>
  <div id="M004960_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1054</span>
1054:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_finder_with_scoped_from</span>
1055:     <span class="ruby-identifier">all_topics</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>
1056: 
1057:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">with_scope</span>(<span class="ruby-identifier">:find</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:from</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'fake_topics'</span> }) <span class="ruby-keyword kw">do</span>
1058:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">all_topics</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">all</span>(<span class="ruby-identifier">:from</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'topics'</span>)
1059:     <span class="ruby-keyword kw">end</span>
1060:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004843" class="method">
  <div id="M004843_title" class="title">
    <b>test_first</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004843_source')" id="l_M004843_source">show source</a> ]</p>
  <div id="M004843_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 235</span>
235:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first</span>
236:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">topics</span>(<span class="ruby-identifier">:second</span>).<span class="ruby-identifier">title</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;title = 'The Second Topic of the day'&quot;</span>).<span class="ruby-identifier">title</span>
237:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004844" class="method">
  <div id="M004844_title" class="title">
    <b>test_first_failing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004844_source')" id="l_M004844_source">show source</a> ]</p>
  <div id="M004844_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 239</span>
239:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_failing</span>
240:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">first</span>(<span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;title = 'The Second Topic of the day!'&quot;</span>)
241:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004864" class="method">
  <div id="M004864_title" class="title">
    <b>test_hash_condition_find_malformed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004864_source')" id="l_M004864_source">show source</a> ]</p>
  <div id="M004864_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 360</span>
360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_malformed</span>
361:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">StatementInvalid</span>) {
362:       <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:dhh</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> })
363:     }
364:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004869" class="method">
  <div id="M004869_title" class="title">
    <b>test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_aggregate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004869_source')" id="l_M004869_source">show source</a> ]</p>
  <div id="M004869_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 390</span>
390:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_aggregate</span>
391:     <span class="ruby-identifier">gps_location</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">gps_location</span>
392:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">GpsLocation</span>, <span class="ruby-identifier">gps_location</span>
393:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:gps_location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gps_location</span>})
394:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
395:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004871" class="method">
  <div id="M004871_title" class="title">
    <b>test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_attribute_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004871_source')" id="l_M004871_source">show source</a> ]</p>
  <div id="M004871_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 404</span>
404:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_aggregate_attribute_having_same_name_as_field_and_key_value_being_attribute_value</span>
405:     <span class="ruby-identifier">gps_location</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">gps_location</span>
406:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">GpsLocation</span>, <span class="ruby-identifier">gps_location</span>
407:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:gps_location</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">gps_location</span>.<span class="ruby-identifier">gps_location</span>})
408:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
409:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004868" class="method">
  <div id="M004868_title" class="title">
    <b>test_hash_condition_find_with_aggregate_having_one_mapping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004868_source')" id="l_M004868_source">show source</a> ]</p>
  <div id="M004868_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_aggregate_having_one_mapping</span>
384:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
385:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
386:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">balance</span>})
387:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
388:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004870" class="method">
  <div id="M004870_title" class="title">
    <b>test_hash_condition_find_with_aggregate_having_one_mapping_and_key_value_being_attribute_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004870_source')" id="l_M004870_source">show source</a> ]</p>
  <div id="M004870_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_aggregate_having_one_mapping_and_key_value_being_attribute_value</span>
398:     <span class="ruby-identifier">balance</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">balance</span>
399:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Money</span>, <span class="ruby-identifier">balance</span>
400:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:balance</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">balance</span>.<span class="ruby-identifier">amount</span>})
401:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
402:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004872" class="method">
  <div id="M004872_title" class="title">
    <b>test_hash_condition_find_with_aggregate_having_three_mappings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004872_source')" id="l_M004872_source">show source</a> ]</p>
  <div id="M004872_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 411</span>
411:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_aggregate_having_three_mappings</span>
412:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
413:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
414:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>})
415:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
416:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004866" class="method">
  <div id="M004866_title" class="title">
    <b>test_hash_condition_find_with_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004866_source')" id="l_M004866_source">show source</a> ]</p>
  <div id="M004866_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 371</span>
371:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_array</span>
372:     <span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
373:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>] }, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
374:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>], <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-identifier">p1</span>, <span class="ruby-identifier">p2</span>.<span class="ruby-identifier">id</span>] }, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'id asc'</span>)
375:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004865" class="method">
  <div id="M004865_title" class="title">
    <b>test_hash_condition_find_with_escaped_characters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004865_source')" id="l_M004865_source">show source</a> ]</p>
  <div id="M004865_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 366</span>
366:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_escaped_characters</span>
367:     <span class="ruby-constant">Company</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Ain't noth'n like' \#stuff&quot;</span>)
368:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Ain't noth'n like' \#stuff&quot;</span> })
369:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004867" class="method">
  <div id="M004867_title" class="title">
    <b>test_hash_condition_find_with_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004867_source')" id="l_M004867_source">show source</a> ]</p>
  <div id="M004867_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 377</span>
377:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_nil</span>
378:     <span class="ruby-identifier">topic</span> = <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:last_read</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span> } )
379:     <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-identifier">topic</span>
380:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">topic</span>.<span class="ruby-identifier">last_read</span>
381:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004873" class="method">
  <div id="M004873_title" class="title">
    <b>test_hash_condition_find_with_one_condition_being_aggregate_and_another_not</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004873_source')" id="l_M004873_source">show source</a> ]</p>
  <div id="M004873_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 418</span>
418:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_condition_find_with_one_condition_being_aggregate_and_another_not</span>
419:     <span class="ruby-identifier">address</span> = <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">address</span>
420:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Address</span>, <span class="ruby-identifier">address</span>
421:     <span class="ruby-identifier">found_customer</span> = <span class="ruby-constant">Customer</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:address</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">address</span>, <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>).<span class="ruby-identifier">name</span>})
422:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">customers</span>(<span class="ruby-identifier">:david</span>), <span class="ruby-identifier">found_customer</span>
423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004948" class="method">
  <div id="M004948_title" class="title">
    <b>test_joins_dont_clobber_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004948_source')" id="l_M004948_source">show source</a> ]</p>
  <div id="M004948_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 971</span>
971:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_joins_dont_clobber_id</span>
972:     <span class="ruby-identifier">first</span> = <span class="ruby-constant">Firm</span>.<span class="ruby-identifier">find</span>(
973:       <span class="ruby-identifier">:first</span>,
974:       <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'INNER JOIN companies AS clients ON clients.firm_id = companies.id'</span>,
975:       <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'companies.id = 1'</span>
976:     )
977:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">first</span>.<span class="ruby-identifier">id</span>
978:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004949" class="method">
  <div id="M004949_title" class="title">
    <b>test_joins_with_string_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004949_source')" id="l_M004949_source">show source</a> ]</p>
  <div id="M004949_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 980</span>
980:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_joins_with_string_array</span>
981:     <span class="ruby-identifier">person_with_reader_and_post</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(
982:       <span class="ruby-identifier">:all</span>,
983:       <span class="ruby-identifier">:joins</span> =<span class="ruby-operator">&gt;</span> [
984:         <span class="ruby-value str">&quot;INNER JOIN categorizations ON categorizations.post_id = posts.id&quot;</span>,
985:         <span class="ruby-value str">&quot;INNER JOIN categories ON categories.id = categorizations.category_id AND categories.type = 'SpecialCategory'&quot;</span>
986:       ]
987:     )
988:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">person_with_reader_and_post</span>.<span class="ruby-identifier">size</span>
989:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004878" class="method">
  <div id="M004878_title" class="title">
    <b>test_named_bind_variables</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004878_source')" id="l_M004878_source">show source</a> ]</p>
  <div id="M004878_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 457</span>
457:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_bind_variables</span>
458:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>) <span class="ruby-comment cmt"># ' ruby-mode</span>
459:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1 1'</span>, <span class="ruby-identifier">bind</span>(<span class="ruby-value str">':a :a'</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)  <span class="ruby-comment cmt"># ' ruby-mode</span>
460: 
461:     <span class="ruby-identifier">assert_nothing_raised</span> { <span class="ruby-identifier">bind</span>(<span class="ruby-value str">&quot;'+00:00'&quot;</span>, <span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bar&quot;</span>) }
462: 
463:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Firm</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = :name&quot;</span>, { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals&quot;</span> }])
464:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = :name&quot;</span>, { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals!&quot;</span> }])
465:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = :name&quot;</span>, { <span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals!' OR 1=1&quot;</span> }])
466:     <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Time</span>, <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;id = :id&quot;</span>, { <span class="ruby-identifier">:id</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span> }]).<span class="ruby-identifier">written_on</span>
467:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004876" class="method">
  <div id="M004876_title" class="title">
    <b>test_named_bind_variables_with_quotes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004876_source')" id="l_M004876_source">show source</a> ]</p>
  <div id="M004876_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 443</span>
443:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_bind_variables_with_quotes</span>
444:     <span class="ruby-constant">Company</span>.<span class="ruby-identifier">create</span>(<span class="ruby-value str">&quot;name&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals' go'es agains&quot;</span>)
445:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:first</span>, <span class="ruby-identifier">:conditions</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;name = :name&quot;</span>, {<span class="ruby-identifier">:name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;37signals' go'es agains&quot;</span>}])
446:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004884" class="method">
  <div id="M004884_title" class="title">
    <b>test_named_bind_with_postgresql_type_casts</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004884_source')" id="l_M004884_source">show source</a> ]</p>
  <div id="M004884_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 514</span>
514:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_named_bind_with_postgresql_type_casts</span>
515:     <span class="ruby-identifier">l</span> = <span class="ruby-constant">Proc</span>.<span class="ruby-identifier">new</span> { <span class="ruby-identifier">bind</span>(<span class="ruby-value str">&quot;:a::integer '2009-01-01'::date&quot;</span>, <span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>) }
516:     <span class="ruby-identifier">assert_nothing_raised</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">l</span>)
517:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">&quot;#{ActiveRecord::Base.quote_value('10')}::integer '2009-01-01'::date&quot;</span>, <span class="ruby-identifier">l</span>.<span class="ruby-identifier">call</span>
518:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004957" class="method">
  <div id="M004957_title" class="title">
    <b>test_select_rows</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004957_source')" id="l_M004957_source">show source</a> ]</p>
  <div id="M004957_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1031</span>
1031:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_select_rows</span>
1032:     <span class="ruby-identifier">assert_equal</span>(
1033:       [[<span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">&quot;37signals&quot;</span>],
1034:        [<span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-value str">&quot;Summit&quot;</span>],
1035:        [<span class="ruby-value str">&quot;3&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;Microsoft&quot;</span>]],
1036:       <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_rows</span>(<span class="ruby-value str">&quot;SELECT id, firm_id, client_of, name FROM companies WHERE id IN (1,2,3) ORDER BY id&quot;</span>).<span class="ruby-identifier">map!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">map!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">nil?</span>}})
1037:     <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">&quot;1&quot;</span>, <span class="ruby-value str">&quot;37signals&quot;</span>], [<span class="ruby-value str">&quot;2&quot;</span>, <span class="ruby-value str">&quot;Summit&quot;</span>], [<span class="ruby-value str">&quot;3&quot;</span>, <span class="ruby-value str">&quot;Microsoft&quot;</span>]],
1038:       <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_rows</span>(<span class="ruby-value str">&quot;SELECT id, name FROM companies WHERE id IN (1,2,3) ORDER BY id&quot;</span>).<span class="ruby-identifier">map!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">map!</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">to_s</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">nil?</span>}}
1039:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004955" class="method">
  <div id="M004955_title" class="title">
    <b>test_select_value</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004955_source')" id="l_M004955_source">show source</a> ]</p>
  <div id="M004955_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1018</span>
1018:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_select_value</span>
1019:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;37signals&quot;</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-value str">&quot;SELECT name FROM companies WHERE id = 1&quot;</span>)
1020:     <span class="ruby-identifier">assert_nil</span> <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_value</span>(<span class="ruby-value str">&quot;SELECT name FROM companies WHERE id = -1&quot;</span>)
1021:     <span class="ruby-comment cmt"># make sure we didn't break count...</span>
1022:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count_by_sql</span>(<span class="ruby-value str">&quot;SELECT COUNT(*) FROM companies WHERE name = 'Halliburton'&quot;</span>)
1023:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-constant">Company</span>.<span class="ruby-identifier">count_by_sql</span>(<span class="ruby-value str">&quot;SELECT COUNT(*) FROM companies WHERE name = '37signals'&quot;</span>)
1024:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004956" class="method">
  <div id="M004956_title" class="title">
    <b>test_select_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004956_source')" id="l_M004956_source">show source</a> ]</p>
  <div id="M004956_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1026</span>
1026:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_select_values</span>
1027:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;1&quot;</span>,<span class="ruby-value str">&quot;2&quot;</span>,<span class="ruby-value str">&quot;3&quot;</span>,<span class="ruby-value str">&quot;4&quot;</span>,<span class="ruby-value str">&quot;5&quot;</span>,<span class="ruby-value str">&quot;6&quot;</span>,<span class="ruby-value str">&quot;7&quot;</span>,<span class="ruby-value str">&quot;8&quot;</span>,<span class="ruby-value str">&quot;9&quot;</span>], <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_values</span>(<span class="ruby-value str">&quot;SELECT id FROM companies ORDER BY id&quot;</span>).<span class="ruby-identifier">map!</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span> <span class="ruby-identifier">i</span>.<span class="ruby-identifier">to_s</span> }
1028:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;37signals&quot;</span>,<span class="ruby-value str">&quot;Summit&quot;</span>,<span class="ruby-value str">&quot;Microsoft&quot;</span>, <span class="ruby-value str">&quot;Flamboyant Software&quot;</span>, <span class="ruby-value str">&quot;Ex Nihilo&quot;</span>, <span class="ruby-value str">&quot;RailsCore&quot;</span>, <span class="ruby-value str">&quot;Leetsoft&quot;</span>, <span class="ruby-value str">&quot;Jadedpixel&quot;</span>, <span class="ruby-value str">&quot;Odegy&quot;</span>], <span class="ruby-constant">Company</span>.<span class="ruby-identifier">connection</span>.<span class="ruby-identifier">select_values</span>(<span class="ruby-value str">&quot;SELECT name FROM companies ORDER BY id&quot;</span>)
1029:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004885" class="method">
  <div id="M004885_title" class="title">
    <b>test_string_sanitation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004885_source')" id="l_M004885_source">show source</a> ]</p>
  <div id="M004885_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 520</span>
520:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_sanitation</span>
521:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-value str">&quot;'something ' 1=1'&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-value str">&quot;something ' 1=1&quot;</span>)
522:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;'something; select table'&quot;</span>, <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">sanitize</span>(<span class="ruby-value str">&quot;something; select table&quot;</span>)
523:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004845" class="method">
  <div id="M004845_title" class="title">
    <b>test_unexisting_record_exception_handling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004845_source')" id="l_M004845_source">show source</a> ]</p>
  <div id="M004845_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 243</span>
243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unexisting_record_exception_handling</span>
244:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">RecordNotFound</span>) {
245:       <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">1</span>).<span class="ruby-identifier">parent</span>
246:     }
247: 
248:     <span class="ruby-constant">Topic</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value">2</span>).<span class="ruby-identifier">topic</span>
249:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M004959" class="method">
  <div id="M004959_title" class="title">
    <b>test_with_limiting_with_custom_select</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004959_source')" id="l_M004959_source">show source</a> ]</p>
  <div id="M004959_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1048</span>
1048:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_limiting_with_custom_select</span>
1049:     <span class="ruby-identifier">posts</span> = <span class="ruby-constant">Post</span>.<span class="ruby-identifier">find</span>(<span class="ruby-identifier">:all</span>, <span class="ruby-identifier">:include</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:author</span>, <span class="ruby-identifier">:select</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">' posts.*, authors.id as &quot;author_id&quot;'</span>, <span class="ruby-identifier">:limit</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">:order</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'posts.id'</span>)
1050:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">size</span>
1051:     <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value">0</span>, <span class="ruby-value">1</span>, <span class="ruby-value">1</span>], <span class="ruby-identifier">posts</span>.<span class="ruby-identifier">map</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">:author_id</span>).<span class="ruby-identifier">sort</span>
1052:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M004961" class="method">
  <div id="M004961_title" class="title">
    <b>bind</b>(statement, *vars)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M004961_source')" id="l_M004961_source">show source</a> ]</p>
  <div id="M004961_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File activerecord/test/cases/finder_test.rb, line 1063</span>
1063:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">bind</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">vars</span>)
1064:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">vars</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
1065:         <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:replace_named_bind_variables</span>, <span class="ruby-identifier">statement</span>, <span class="ruby-identifier">vars</span>.<span class="ruby-identifier">first</span>)
1066:       <span class="ruby-keyword kw">else</span>
1067:         <span class="ruby-constant">ActiveRecord</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:replace_bind_variables</span>, <span class="ruby-identifier">statement</span>, <span class="ruby-identifier">vars</span>)
1068:       <span class="ruby-keyword kw">end</span>
1069:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>