  <div id="C00001917">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />Fallbacks<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/lib/active_support/vendor/i18n-0_3_7/i18n/backend/fallbacks_rb.html');">activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/fallbacks.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M010735&name=extract_string_default!" >extract_string_default!</a></li>
  <li><a href="index.html?a=M010736&name=find_first_string_default" >find_first_string_default</a></li>
  <li><a href="index.html?a=M010734&name=translate" >translate</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M010735" class="method">
  <div id="M010735_title" class="title">
    <b>extract_string_default!</b>(options)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010735_source')" id="l_M010735_source">show source</a> ]</p>
  <div id="M010735_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/fallbacks.rb, line 55</span>
55:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">extract_string_default!</span>(<span class="ruby-identifier">options</span>)
56:         <span class="ruby-identifier">defaults</span> = <span class="ruby-constant">Array</span>(<span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>])
57:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">index</span> = <span class="ruby-identifier">find_first_string_default</span>(<span class="ruby-identifier">defaults</span>)
58:           <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>] = <span class="ruby-identifier">defaults</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">index</span>]
59:           <span class="ruby-identifier">defaults</span>[<span class="ruby-identifier">index</span>]
60:         <span class="ruby-keyword kw">end</span>
61:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010736" class="method">
  <div id="M010736_title" class="title">
    <b>find_first_string_default</b>(defaults)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010736_source')" id="l_M010736_source">show source</a> ]</p>
  <div id="M010736_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/fallbacks.rb, line 63</span>
63:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">find_first_string_default</span>(<span class="ruby-identifier">defaults</span>)
64:         <span class="ruby-identifier">defaults</span>.<span class="ruby-identifier">each_index</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ix</span><span class="ruby-operator">|</span> <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">ix</span> <span class="ruby-keyword kw">if</span> <span class="ruby-constant">String</span> <span class="ruby-operator">===</span> <span class="ruby-identifier">defaults</span>[<span class="ruby-identifier">ix</span>] }
65:         <span class="ruby-keyword kw">nil</span>
66:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010734" class="method">
  <div id="M010734_title" class="title">
    <b>translate</b>(locale, key, options = {})
  </div>
  <div class="description">
  <p>
Overwrites the <a href="index.html?a=C00001918&name=Base">Base</a> backend
translate method so that it will try each locale given by <a
href="index.html?a=M010681&name=I18n.fallbacks">I18n.fallbacks</a> for the
given locale. E.g. for the locale :&quot;de-DE&quot; it might try the
locales :&quot;de-DE&quot;, :de and :en (depends on the fallbacks
implementation) until it finds a result with the given options. If it does
not find any result for any of the locales it will then raise a <a
href="index.html?a=C00001939&name=MissingTranslationData">MissingTranslationData</a>
exception as usual.
</p>
<p>
The default option takes precedence over fallback locales only when
it&#8217;s not a String. When default contains String it is evaluated after
fallback locales.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010734_source')" id="l_M010734_source">show source</a> ]</p>
  <div id="M010734_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/fallbacks.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">translate</span>(<span class="ruby-identifier">locale</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span> = {})
41:         <span class="ruby-identifier">default</span> = <span class="ruby-identifier">extract_string_default!</span>(<span class="ruby-identifier">options</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:default</span>]
42: 
43:         <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">fallbacks</span>[<span class="ruby-identifier">locale</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">fallback</span><span class="ruby-operator">|</span>
44:           <span class="ruby-keyword kw">begin</span>
45:             <span class="ruby-identifier">result</span> = <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">fallback</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span>)
46:             <span class="ruby-keyword kw">return</span> <span class="ruby-identifier">result</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">nil?</span>
47:           <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">I18n</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTranslationData</span>
48:           <span class="ruby-keyword kw">end</span>
49:         <span class="ruby-keyword kw">end</span>
50: 
51:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">super</span>(<span class="ruby-identifier">locale</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">options</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">:default</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">default</span>)) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">default</span>
52:         <span class="ruby-identifier">raise</span>(<span class="ruby-constant">I18n</span><span class="ruby-operator">::</span><span class="ruby-constant">MissingTranslationData</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">locale</span>, <span class="ruby-identifier">key</span>, <span class="ruby-identifier">options</span>))
53:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>