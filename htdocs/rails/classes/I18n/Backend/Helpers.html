  <div id="C00001915">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />Helpers<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/lib/active_support/vendor/i18n-0_3_7/i18n/backend/helpers_rb.html');">activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M010721&name=deep_symbolize_keys" >deep_symbolize_keys</a></li>
  <li><a href="index.html?a=M010723&name=escape_default_separator" >escape_default_separator</a></li>
  <li><a href="index.html?a=M010724&name=unescape_default_separator" >unescape_default_separator</a></li>
  <li><a href="index.html?a=M010725&name=unwind_keys" >unwind_keys</a></li>
  <li><a href="index.html?a=M010722&name=wind_keys" >wind_keys</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">SEPARATOR_ESCAPE_CHAR</td>
    <td>=</td>
    <td class="attr-value">&quot;\001&quot;</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M010721" class="method">
  <div id="M010721_title" class="title">
    <b>deep_symbolize_keys</b>(hash)
  </div>
  <div class="description">
  <p>
Return a new hash with all keys and nested keys converted to symbols.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010721_source')" id="l_M010721_source">show source</a> ]</p>
  <div id="M010721_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb, line 7</span>
 7:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">deep_symbolize_keys</span>(<span class="ruby-identifier">hash</span>)
 8:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">inject</span>({}) { <span class="ruby-operator">|</span><span class="ruby-identifier">result</span>, (<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>)<span class="ruby-operator">|</span>
 9:           <span class="ruby-identifier">value</span> = <span class="ruby-identifier">deep_symbolize_keys</span>(<span class="ruby-identifier">value</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
10:           <span class="ruby-identifier">result</span>[(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_sym</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-identifier">key</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">key</span>] = <span class="ruby-identifier">value</span>
11:           <span class="ruby-identifier">result</span>
12:         }
13:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010723" class="method">
  <div id="M010723_title" class="title">
    <b>escape_default_separator</b>(key, separator=nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010723_source')" id="l_M010723_source">show source</a> ]</p>
  <div id="M010723_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb, line 36</span>
36:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">escape_default_separator</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">separator</span>=<span class="ruby-keyword kw">nil</span>)
37:         <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-identifier">separator</span> <span class="ruby-operator">||</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">default_separator</span>, <span class="ruby-constant">SEPARATOR_ESCAPE_CHAR</span>)
38:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010724" class="method">
  <div id="M010724_title" class="title">
    <b>unescape_default_separator</b>(key, separator=nil)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010724_source')" id="l_M010724_source">show source</a> ]</p>
  <div id="M010724_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unescape_default_separator</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">separator</span>=<span class="ruby-keyword kw">nil</span>)
41:         <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">tr</span>(<span class="ruby-constant">SEPARATOR_ESCAPE_CHAR</span>, <span class="ruby-identifier">separator</span> <span class="ruby-operator">||</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">default_separator</span>).<span class="ruby-identifier">to_sym</span>
42:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010725" class="method">
  <div id="M010725_title" class="title">
    <b>unwind_keys</b>(hash, separator = &quot;.&quot;)
  </div>
  <div class="description">
  <p>
Expand keys chained by the the given separator through nested Hashes
</p>
<pre>
  &gt;&gt; { &quot;a.b.c&quot; =&gt; &quot;d&quot;, &quot;a.b.e&quot; =&gt; &quot;f&quot;, &quot;a.g&quot; =&gt; &quot;h&quot;, &quot;i&quot; =&gt; &quot;j&quot; }.unwind
  =&gt; { &quot;a&quot; =&gt; { &quot;b&quot; =&gt; { &quot;c&quot; =&gt; &quot;d&quot;, &quot;e&quot; =&gt; &quot;f&quot; }, &quot;g&quot; =&gt; &quot;h&quot; }, &quot;i&quot; =&gt; &quot;j&quot;}
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010725_source')" id="l_M010725_source">show source</a> ]</p>
  <div id="M010725_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb, line 47</span>
47:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">unwind_keys</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-identifier">separator</span> = <span class="ruby-value str">&quot;.&quot;</span>)
48:         <span class="ruby-identifier">result</span> = {}
49:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
50:           <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">key</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">split</span>(<span class="ruby-identifier">separator</span>)
51:           <span class="ruby-identifier">curr</span> = <span class="ruby-identifier">result</span>
52:           <span class="ruby-identifier">curr</span> = <span class="ruby-identifier">curr</span>[<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">shift</span>] <span class="ruby-operator">||=</span> {} <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
53:           <span class="ruby-identifier">curr</span>[<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">shift</span>] = <span class="ruby-identifier">value</span>
54:         <span class="ruby-keyword kw">end</span>
55:         <span class="ruby-identifier">result</span>
56:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M010722" class="method">
  <div id="M010722_title" class="title">
    <b>wind_keys</b>(hash, separator = nil, subtree = false, prev_key = nil, result = {}, orig_hash=hash)
  </div>
  <div class="description">
  <p>
Flatten keys for nested Hashes by chaining up keys using the separator
</p>
<pre>
  &gt;&gt; { &quot;a&quot; =&gt; { &quot;b&quot; =&gt; { &quot;c&quot; =&gt; &quot;d&quot;, &quot;e&quot; =&gt; &quot;f&quot; }, &quot;g&quot; =&gt; &quot;h&quot; }, &quot;i&quot; =&gt; &quot;j&quot;}.wind
  =&gt; { &quot;a.b.c&quot; =&gt; &quot;d&quot;, &quot;a.b.e&quot; =&gt; &quot;f&quot;, &quot;a.g&quot; =&gt; &quot;h&quot;, &quot;i&quot; =&gt; &quot;j&quot; }
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M010722_source')" id="l_M010722_source">show source</a> ]</p>
  <div id="M010722_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/lib/active_support/vendor/i18n-0.3.7/i18n/backend/helpers.rb, line 18</span>
18:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wind_keys</span>(<span class="ruby-identifier">hash</span>, <span class="ruby-identifier">separator</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">subtree</span> = <span class="ruby-keyword kw">false</span>, <span class="ruby-identifier">prev_key</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">result</span> = {}, <span class="ruby-identifier">orig_hash</span>=<span class="ruby-identifier">hash</span>)
19:         <span class="ruby-identifier">separator</span> <span class="ruby-operator">||=</span> <span class="ruby-constant">I18n</span>.<span class="ruby-identifier">default_separator</span>
20: 
21:         <span class="ruby-identifier">hash</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
22:           <span class="ruby-identifier">key</span> = <span class="ruby-identifier">escape_default_separator</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">separator</span>)
23:           <span class="ruby-identifier">curr_key</span> = [<span class="ruby-identifier">prev_key</span>, <span class="ruby-identifier">key</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">separator</span>).<span class="ruby-identifier">to_sym</span>
24: 
25:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
26:             <span class="ruby-identifier">result</span>[<span class="ruby-identifier">curr_key</span>] = <span class="ruby-identifier">value</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">subtree</span>
27:             <span class="ruby-identifier">wind_keys</span>(<span class="ruby-identifier">value</span>, <span class="ruby-identifier">separator</span>, <span class="ruby-identifier">subtree</span>, <span class="ruby-identifier">curr_key</span>, <span class="ruby-identifier">result</span>, <span class="ruby-identifier">orig_hash</span>)
28:           <span class="ruby-keyword kw">else</span>
29:             <span class="ruby-identifier">result</span>[<span class="ruby-identifier">unescape_default_separator</span>(<span class="ruby-identifier">curr_key</span>)] = <span class="ruby-identifier">value</span>
30:           <span class="ruby-keyword kw">end</span>
31:         <span class="ruby-keyword kw">end</span>
32: 
33:         <span class="ruby-identifier">result</span>
34:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>