  <div id="C00000296">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestJSONEncoding<br/>
  In:
<a href="#" onclick="jsHref('files/activesupport/test/json/encoding_test_rb.html');">activesupport/test/json/encoding_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001917&name=object_keys" >object_keys</a></li>
  <li><a href="index.html?a=M001911&name=test_exception_raised_when_encoding_circular_reference" >test_exception_raised_when_encoding_circular_reference</a></li>
  <li><a href="index.html?a=M001909&name=test_hash_encoding" >test_hash_encoding</a></li>
  <li><a href="index.html?a=M001912&name=test_hash_key_identifiers_are_always_quoted" >test_hash_key_identifiers_are_always_quoted</a></li>
  <li><a href="index.html?a=M001914&name=test_hash_should_allow_key_filtering_with_except" >test_hash_should_allow_key_filtering_with_except</a></li>
  <li><a href="index.html?a=M001913&name=test_hash_should_allow_key_filtering_with_only" >test_hash_should_allow_key_filtering_with_only</a></li>
  <li><a href="index.html?a=M001916&name=test_nested_hash_with_float" >test_nested_hash_with_float</a></li>
  <li><a href="index.html?a=M001915&name=test_time_to_json_includes_local_offset" >test_time_to_json_includes_local_offset</a></li>
  <li><a href="index.html?a=M001910&name=test_utf8_string_encoded_properly_when_kcode_is_utf8" >test_utf8_string_encoded_properly_when_kcode_is_utf8</a></li>
  <li><a href="index.html?a=M001918&name=with_env_tz" >with_env_tz</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/TestJSONEncoding/Custom.html');" class="link">TestJSONEncoding::Custom</a>"<br />
Class "<a href="#" onclick="jsHref('classes/TestJSONEncoding/Foo.html');" class="link">TestJSONEncoding::Foo</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">TrueTests</td>
    <td>=</td>
    <td class="attr-value">[[ true,  %(true)  ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">FalseTests</td>
    <td>=</td>
    <td class="attr-value">[[ false, %(false) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">NilTests</td>
    <td>=</td>
    <td class="attr-value">[[ nil,   %(null)  ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">NumericTests</td>
    <td>=</td>
    <td class="attr-value">[[ 1,     %(1)     ],                    [ 2.5,   %(2.5)   ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">StringTests</td>
    <td>=</td>
    <td class="attr-value">[[ 'this is the &lt;string&gt;',     %(&quot;this is the \\u003Cstring\\u003E&quot;)],                    [ 'a &quot;string&quot; with quotes &amp; an ampersand', %(&quot;a \\&quot;string\\&quot; with quotes \\u0026 an ampersand&quot;) ],                    [ 'http://test.host/posts/1', %(&quot;http://test.host/posts/1&quot;)],                    [ &quot;Control characters: \x00\x01\x02\x03\x04\x05\x06\x07\x08\x09\x0a\x0b\x0c\x0d\x0e\x0f\x10\x11\x12\x13\x14\x15\x16\x17\x18\x19\x1a\x1b\x1c\x1d\x1e\x1f&quot;,                      %(&quot;Control characters: \\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000B\\f\\r\\u000E\\u000F\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001A\\u001B\\u001C\\u001D\\u001E\\u001F&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ArrayTests</td>
    <td>=</td>
    <td class="attr-value">[[ ['a', 'b', 'c'],          %([\&quot;a\&quot;,\&quot;b\&quot;,\&quot;c\&quot;])          ],                    [ [1, 'a', :b, nil, false], %([1,\&quot;a\&quot;,\&quot;b\&quot;,null,false]) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">SymbolTests</td>
    <td>=</td>
    <td class="attr-value">[[ :a,     %(&quot;a&quot;)    ],                    [ :this,  %(&quot;this&quot;) ],                    [ :&quot;a b&quot;, %(&quot;a b&quot;)  ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">ObjectTests</td>
    <td>=</td>
    <td class="attr-value">[[ Foo.new(1, 2), %({\&quot;a\&quot;:1,\&quot;b\&quot;:2}) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">CustomTests</td>
    <td>=</td>
    <td class="attr-value">[[ Custom.new, '&quot;custom&quot;' ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">VariableTests</td>
    <td>=</td>
    <td class="attr-value">[[ ActiveSupport::JSON::Variable.new('foo'), 'foo'],                    [ ActiveSupport::JSON::Variable.new('alert(&quot;foo&quot;)'), 'alert(&quot;foo&quot;)']]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">RegexpTests</td>
    <td>=</td>
    <td class="attr-value">[[ /^a/, '/^a/' ], [/^\w{1,2}[a-z]+/ix, '/^\\w{1,2}[a-z]+/ix']]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">DateTests</td>
    <td>=</td>
    <td class="attr-value">[[ Date.new(2005,2,1), %(&quot;2005/02/01&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">TimeTests</td>
    <td>=</td>
    <td class="attr-value">[[ Time.utc(2005,2,1,15,15,10), %(&quot;2005/02/01 15:15:10 +0000&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">DateTimeTests</td>
    <td>=</td>
    <td class="attr-value">[[ DateTime.civil(2005,2,1,15,15,10), %(&quot;2005/02/01 15:15:10 +0000&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">StandardDateTests</td>
    <td>=</td>
    <td class="attr-value">[[ Date.new(2005,2,1), %(&quot;2005-02-01&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">StandardTimeTests</td>
    <td>=</td>
    <td class="attr-value">[[ Time.utc(2005,2,1,15,15,10), %(&quot;2005-02-01T15:15:10Z&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">StandardDateTimeTests</td>
    <td>=</td>
    <td class="attr-value">[[ DateTime.civil(2005,2,1,15,15,10), %(&quot;2005-02-01T15:15:10+00:00&quot;) ]]</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">StandardStringTests</td>
    <td>=</td>
    <td class="attr-value">[[ 'this is the &lt;string&gt;', %(&quot;this is the &lt;string&gt;&quot;)]]</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M001911" class="method">
  <div id="M001911_title" class="title">
    <b>test_exception_raised_when_encoding_circular_reference</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001911_source')" id="l_M001911_source">show source</a> ]</p>
  <div id="M001911_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_raised_when_encoding_circular_reference</span>
90:     <span class="ruby-identifier">a</span> = [<span class="ruby-value">1</span>]
91:     <span class="ruby-identifier">a</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">a</span>
92:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span><span class="ruby-operator">::</span><span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">CircularReferenceError</span>) { <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">a</span>) }
93:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001909" class="method">
  <div id="M001909_title" class="title">
    <b>test_hash_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001909_source')" id="l_M001909_source">show source</a> ]</p>
  <div id="M001909_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 67</span>
67:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_encoding</span>
68:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({\&quot;a\&quot;:\&quot;b\&quot;})</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:b</span>)
69:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({\&quot;a\&quot;:1})</span>,     <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">'a'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>)
70:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({\&quot;a\&quot;:[1,2]})</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">'a'</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value">1</span>,<span class="ruby-value">2</span>])
71:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({&quot;1&quot;:2})</span>,       <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
72: 
73:     <span class="ruby-identifier">sorted_json</span> = <span class="ruby-value str">'{'</span> <span class="ruby-operator">+</span> <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">:a</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:b</span>, <span class="ruby-identifier">:c</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:d</span>)[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">','</span>).<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">','</span>) <span class="ruby-operator">+</span> <span class="ruby-value str">'}'</span>
74:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({\&quot;a\&quot;:\&quot;b\&quot;,\&quot;c\&quot;:\&quot;d\&quot;})</span>, <span class="ruby-identifier">sorted_json</span>
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001912" class="method">
  <div id="M001912_title" class="title">
    <b>test_hash_key_identifiers_are_always_quoted</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001912_source')" id="l_M001912_source">show source</a> ]</p>
  <div id="M001912_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 95</span>
95:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_key_identifiers_are_always_quoted</span>
96:     <span class="ruby-identifier">values</span> = {<span class="ruby-value">0</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value">1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:_</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:_</span>, <span class="ruby-value str">&quot;$&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;$&quot;</span>, <span class="ruby-value str">&quot;a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">:A</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:A</span>, <span class="ruby-identifier">:A0</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:A0</span>, <span class="ruby-value str">&quot;A0B&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;A0B&quot;</span>}
97:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w( &quot;$&quot; &quot;A&quot; &quot;A0&quot; &quot;A0B&quot; &quot;_&quot; &quot;a&quot; &quot;0&quot; &quot;1&quot; )</span>.<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">object_keys</span>(<span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">values</span>))
98:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001914" class="method">
  <div id="M001914_title" class="title">
    <b>test_hash_should_allow_key_filtering_with_except</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001914_source')" id="l_M001914_source">show source</a> ]</p>
  <div id="M001914_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_should_allow_key_filtering_with_except</span>
105:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({&quot;b&quot;:2})</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>({<span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:c</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">:except</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:c</span>])
106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001913" class="method">
  <div id="M001913_title" class="title">
    <b>test_hash_should_allow_key_filtering_with_only</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001913_source')" id="l_M001913_source">show source</a> ]</p>
  <div id="M001913_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hash_should_allow_key_filtering_with_only</span>
101:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%({&quot;a&quot;:1})</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>({<span class="ruby-value str">'a'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:c</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}, <span class="ruby-identifier">:only</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'a'</span>)
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001916" class="method">
  <div id="M001916_title" class="title">
    <b>test_nested_hash_with_float</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001916_source')" id="l_M001916_source">show source</a> ]</p>
  <div id="M001916_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_hash_with_float</span>
118:     <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
119:       <span class="ruby-identifier">hash</span> = {
120:         <span class="ruby-value str">&quot;CHI&quot;</span> =<span class="ruby-operator">&gt;</span> {
121:           <span class="ruby-identifier">:dislay_name</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;chicago&quot;</span>,
122:           <span class="ruby-identifier">:latitude</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">123.234</span>
123:         }
124:       }
125:       <span class="ruby-identifier">result</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-identifier">hash</span>)
126:     <span class="ruby-keyword kw">end</span>
127:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001915" class="method">
  <div id="M001915_title" class="title">
    <b>test_time_to_json_includes_local_offset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001915_source')" id="l_M001915_source">show source</a> ]</p>
  <div id="M001915_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_time_to_json_includes_local_offset</span>
109:     <span class="ruby-constant">ActiveSupport</span>.<span class="ruby-identifier">use_standard_json_time_format</span> = <span class="ruby-keyword kw">true</span>
110:     <span class="ruby-identifier">with_env_tz</span> <span class="ruby-value str">'US/Eastern'</span> <span class="ruby-keyword kw">do</span>
111:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%(&quot;2005-02-01T15:15:10-05:00&quot;)</span>, <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-constant">Time</span>.<span class="ruby-identifier">local</span>(<span class="ruby-value">2005</span>,<span class="ruby-value">2</span>,<span class="ruby-value">1</span>,<span class="ruby-value">15</span>,<span class="ruby-value">15</span>,<span class="ruby-value">10</span>))
112:     <span class="ruby-keyword kw">end</span>
113:   <span class="ruby-keyword kw">ensure</span>
114:     <span class="ruby-constant">ActiveSupport</span>.<span class="ruby-identifier">use_standard_json_time_format</span> = <span class="ruby-keyword kw">false</span>
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001910" class="method">
  <div id="M001910_title" class="title">
    <b>test_utf8_string_encoded_properly_when_kcode_is_utf8</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001910_source')" id="l_M001910_source">show source</a> ]</p>
  <div id="M001910_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utf8_string_encoded_properly_when_kcode_is_utf8</span>
78:     <span class="ruby-identifier">with_kcode</span> <span class="ruby-value str">'UTF8'</span> <span class="ruby-keyword kw">do</span>
79:       <span class="ruby-identifier">result</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">'€2.99'</span>)
80:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;\\u20ac2.99&quot;'</span>, <span class="ruby-identifier">result</span>
81:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-identifier">result</span>.<span class="ruby-identifier">encoding</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:encoding</span>)
82: 
83:       <span class="ruby-identifier">result</span> = <span class="ruby-constant">ActiveSupport</span><span class="ruby-operator">::</span><span class="ruby-constant">JSON</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">'✎☺'</span>)
84:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;\\u270e\\u263a&quot;'</span>, <span class="ruby-identifier">result</span>
85:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Encoding</span><span class="ruby-operator">::</span><span class="ruby-constant">UTF_8</span>, <span class="ruby-identifier">result</span>.<span class="ruby-identifier">encoding</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:encoding</span>)
86:     <span class="ruby-keyword kw">end</span>
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M001917" class="method">
  <div id="M001917_title" class="title">
    <b>object_keys</b>(json_object)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001917_source')" id="l_M001917_source">show source</a> ]</p>
  <div id="M001917_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 131</span>
131:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">object_keys</span>(<span class="ruby-identifier">json_object</span>)
132:       <span class="ruby-identifier">json_object</span>[<span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-value">-2</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/([^{}:,\s]+):/</span>).<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">sort</span>
133:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001918" class="method">
  <div id="M001918_title" class="title">
    <b>with_env_tz</b>(new_tz = 'US/Eastern') {|| ...}
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001918_source')" id="l_M001918_source">show source</a> ]</p>
  <div id="M001918_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File activesupport/test/json/encoding_test.rb, line 135</span>
135:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">with_env_tz</span>(<span class="ruby-identifier">new_tz</span> = <span class="ruby-value str">'US/Eastern'</span>)
136:       <span class="ruby-identifier">old_tz</span>, <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>], <span class="ruby-identifier">new_tz</span>
137:       <span class="ruby-keyword kw">yield</span>
138:     <span class="ruby-keyword kw">ensure</span>
139:       <span class="ruby-identifier">old_tz</span> <span class="ruby-value">? </span><span class="ruby-constant">ENV</span>[<span class="ruby-value str">'TZ'</span>] = <span class="ruby-identifier">old_tz</span> <span class="ruby-operator">:</span> <span class="ruby-constant">ENV</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-value str">'TZ'</span>)
140:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>