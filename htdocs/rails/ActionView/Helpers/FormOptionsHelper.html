<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionView::Helpers::FormOptionsHelper</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">FormOptionsHelper</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionView::Helpers::FormOptionsHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="TextHelper.html" title="ActionView::Helpers::TextHelper (module)">TextHelper</a></span>, <span class='object_link'><a href="../../ERB/Util.html" title="ERB::Util (module)">ERB::Util</a></span></dd>
      
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">ActionView::Helpers</a></span>, <span class='object_link'><a href="InstanceTag.html" title="ActionView::Helpers::InstanceTag (class)">InstanceTag</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">actionpack/lib/action_view/helpers/form_options_helper.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Provides a number of methods for turning different kinds of containers into
a set of option tags.
</p>
<h2>Options</h2>
<p>
The <tt>collection_select</tt>, <tt>select</tt> and
<tt>time_zone_select</tt> methods take an <tt>options</tt> parameter, a
hash:
</p>
<ul>
<li><p>
<tt>:include_blank</tt> - set to true or a prompt string if the first
option element of the select element is a blank. Useful if there is not a
default value required for the select element.
</p>
</li>
</ul>
<p>
For example,
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Post</span><span class='op'>::</span><span class='const'>CATEGORIES</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:include_blank</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
could become:
</p>
<pre class="code">
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Another common case is a select tag for an <tt>belongs_to</tt>-associated
object.
</p>
<p>
Example with @post.person_id => 2:
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span> <span class='lbracket'>[</span> <span class='id p'>p</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id p'>p</span><span class='period'>.</span><span class='id id'>id</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:include_blank</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>None</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
could become:
</p>
<pre class="code">
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;None&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot; selected=&quot;selected&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><p>
<tt>:prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt &#8212; &#8220;Please select&#8221; &#8212; or the given prompt
string.
</p>
</li>
</ul>
<p>
Example:
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span> <span class='lbracket'>[</span> <span class='id p'>p</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id p'>p</span><span class='period'>.</span><span class='id id'>id</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:prompt</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Select Person</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
could become:
</p>
<pre class="code">
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Select Person&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
Like the other form helpers, <tt>select</tt> can accept an <tt>:index</tt>
option to manually set the ID used in the resulting output. Unlike other
helpers, <tt>select</tt> expects this option to be in the
<tt>html_options</tt> parameter.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>album[]</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>genre</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='qwords_beg'>%w[</span><span class='tstring_content'>rap</span><span class='words_sep'> </span><span class='tstring_content'>rock</span><span class='words_sep'> </span><span class='tstring_content'>country</span><span class='words_sep'>]</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:index</span> <span class='op'>=&gt;</span> <span class='kw'>nil</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
becomes:
</p>
<pre class="code">
  &lt;select name=&quot;album[][genre]&quot; id=&quot;album__genre&quot;&gt;
    &lt;option value=&quot;rap&quot;&gt;rap&lt;/option&gt;
    &lt;option value=&quot;rock&quot;&gt;rock&lt;/option&gt;
    &lt;option value=&quot;country&quot;&gt;country&lt;/option&gt;
  &lt;/select&gt;
</pre>
<ul>
<li><p>
<tt>:disabled</tt> - can be a single value or an array of values that will
be disabled options in the final output.
</p>
</li>
</ul>
<p>
Example:
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>category</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Post</span><span class='op'>::</span><span class='const'>CATEGORIES</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:disabled</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>restricted</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
could become:
</p>
<pre class="code">
  &lt;select name=&quot;post[category]&quot;&gt;
    &lt;option&gt;&lt;/option&gt;
    &lt;option&gt;joke&lt;/option&gt;
    &lt;option&gt;poem&lt;/option&gt;
    &lt;option disabled=&quot;disabled&quot;&gt;restricted&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
When used with the <tt>collection_select</tt> helper, <tt>:disabled</tt>
can also be a Proc that identifies those options that should be disabled.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id collection_select'>collection_select</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='symbol'>:category_id</span><span class='comma'>,</span> <span class='const'>Category</span><span class='period'>.</span><span class='id all'>all</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:disabled</span> <span class='op'>=&gt;</span> <span class='id lambda'>lambda</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id category'>category</span><span class='op'>|</span> <span class='id category'>category</span><span class='period'>.</span><span class='id archived?'>archived?</span> <span class='rbrace'>}</span><span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
If the categories &#8220;2008 stuff&#8221; and &#8220;Christmas&#8221;
return true when the method <tt>archived?</tt> is called, this would
return:
</p>
<pre class="code">
  &lt;select name=&quot;post[category_id]&quot;&gt;
    &lt;option value=&quot;1&quot; disabled=&quot;disabled&quot;&gt;2008 stuff&lt;/option&gt;
    &lt;option value=&quot;2&quot; disabled=&quot;disabled&quot;&gt;Christmas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Jokes&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Poems&lt;/option&gt;
  &lt;/select&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div>
  <h2>Constant Summary</h2>
  


  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="TextHelper.html" title="ActionView::Helpers::TextHelper (module)">TextHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="TextHelper.html#AUTO_EMAIL_RE-constant" title="ActionView::Helpers::TextHelper::AUTO_EMAIL_RE (constant)">AUTO_EMAIL_RE</a></span>, <span class='object_link'><a href="TextHelper.html#AUTO_LINK_CRE-constant" title="ActionView::Helpers::TextHelper::AUTO_LINK_CRE (constant)">AUTO_LINK_CRE</a></span>, <span class='object_link'><a href="TextHelper.html#AUTO_LINK_RE-constant" title="ActionView::Helpers::TextHelper::AUTO_LINK_RE (constant)">AUTO_LINK_RE</a></span>, <span class='object_link'><a href="TextHelper.html#BRACKETS-constant" title="ActionView::Helpers::TextHelper::BRACKETS (constant)">BRACKETS</a></span></p>

  
  
  
  
  
  
  
  
  
  
  
  
  <h3 class="inherited">Constants included from <span class='object_link'><a href="../../ERB/Util.html" title="ERB::Util (module)">ERB::Util</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../ERB/Util.html#HTML_ESCAPE-constant" title="ERB::Util::HTML_ESCAPE (constant)">HTML_ESCAPE</a></span>, <span class='object_link'><a href="../../ERB/Util.html#JSON_ESCAPE-constant" title="ERB::Util::JSON_ESCAPE (constant)">JSON_ESCAPE</a></span></p>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#collection_select-instance_method" title="#collection_select (instance method)">- (Object) <strong>collection_select</strong>(object, method, collection, value_method, text_method, options = {}, html_options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>&lt;select&gt;</tt> and <tt>&lt;option&gt;</tt> tags for the
collection of existing return values of <tt>method</tt> for
<tt>object</tt>&#8217;s class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#grouped_collection_select-instance_method" title="#grouped_collection_select (instance method)">- (Object) <strong>grouped_collection_select</strong>(object, method, collection, group_method, group_label_method, option_key_method, option_value_method, options = {}, html_options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>&lt;select&gt;</tt>, <tt>&lt;optgroup&gt;</tt> and
<tt>&lt;option&gt;</tt> tags for the collection of existing return values
of <tt>method</tt> for <tt>object</tt>&#8217;s class.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#grouped_options_for_select-instance_method" title="#grouped_options_for_select (instance method)">- (Object) <strong>grouped_options_for_select</strong>(grouped_options, selected_key = nil, prompt = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like
<tt>options_for_select</tt>, but wraps them with <tt>&lt;optgroup&gt;</tt>
tags.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#option_groups_from_collection_for_select-instance_method" title="#option_groups_from_collection_for_select (instance method)">- (Object) <strong>option_groups_from_collection_for_select</strong>(collection, group_method, group_label_method, option_key_method, option_value_method, selected_key = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like
<tt>options_from_collection_for_select</tt>, but groups them by
<tt>&lt;optgroup&gt;</tt> tags based on the object relationships of the
arguments.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options_for_select-instance_method" title="#options_for_select (instance method)">- (Object) <strong>options_for_select</strong>(container, selected = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Accepts a container (hash, array, enumerable, your type) and returns a
string of option tags.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#options_from_collection_for_select-instance_method" title="#options_from_collection_for_select (instance method)">- (Object) <strong>options_from_collection_for_select</strong>(collection, value_method, text_method, selected = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string of option tags that have been compiled by iterating over
the <tt>collection</tt> and assigning the the result of a call to the
<tt>value_method</tt> as the option value and the <tt>text_method</tt> as
the option text.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">- (Object) <strong>select</strong>(object, method, choices, options = {}, html_options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a select tag and a series of contained option tags for the provided
object and method.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_zone_options_for_select-instance_method" title="#time_zone_options_for_select (instance method)">- (Object) <strong>time_zone_options_for_select</strong>(selected = nil, priority_zones = nil, model = ActiveSupport::TimeZone) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string of option tags for pretty much any time zone in the world.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#time_zone_select-instance_method" title="#time_zone_select (instance method)">- (Object) <strong>time_zone_select</strong>(object, method, priority_zones = nil, options = {}, html_options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return select and option tags for the given object and method, using
#time_zone_options_for_select to generate the list of option tags.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="TextHelper.html" title="ActionView::Helpers::TextHelper (module)">TextHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="TextHelper.html#auto_link-instance_method" title="ActionView::Helpers::TextHelper#auto_link (method)">#auto_link</a></span>, <span class='object_link'><a href="TextHelper.html#concat-instance_method" title="ActionView::Helpers::TextHelper#concat (method)">#concat</a></span>, <span class='object_link'><a href="TextHelper.html#current_cycle-instance_method" title="ActionView::Helpers::TextHelper#current_cycle (method)">#current_cycle</a></span>, <span class='object_link'><a href="TextHelper.html#cycle-instance_method" title="ActionView::Helpers::TextHelper#cycle (method)">#cycle</a></span>, <span class='object_link'><a href="TextHelper.html#excerpt-instance_method" title="ActionView::Helpers::TextHelper#excerpt (method)">#excerpt</a></span>, <span class='object_link'><a href="TextHelper.html#highlight-instance_method" title="ActionView::Helpers::TextHelper#highlight (method)">#highlight</a></span>, <span class='object_link'><a href="TextHelper.html#pluralize-instance_method" title="ActionView::Helpers::TextHelper#pluralize (method)">#pluralize</a></span>, <span class='object_link'><a href="TextHelper.html#reset_cycle-instance_method" title="ActionView::Helpers::TextHelper#reset_cycle (method)">#reset_cycle</a></span>, <span class='object_link'><a href="TextHelper.html#safe_concat-instance_method" title="ActionView::Helpers::TextHelper#safe_concat (method)">#safe_concat</a></span>, <span class='object_link'><a href="TextHelper.html#simple_format-instance_method" title="ActionView::Helpers::TextHelper#simple_format (method)">#simple_format</a></span>, <span class='object_link'><a href="TextHelper.html#truncate-instance_method" title="ActionView::Helpers::TextHelper#truncate (method)">#truncate</a></span>, <span class='object_link'><a href="TextHelper.html#word_wrap-instance_method" title="ActionView::Helpers::TextHelper#word_wrap (method)">#word_wrap</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">#append_features</a></span>, <span class='object_link'><a href="../../ActiveSupport/Concern.html#extended-class_method" title="ActiveSupport::Concern.extended (method)">extended</a></span>, <span class='object_link'><a href="../../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">#included</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SanitizeHelper.html" title="ActionView::Helpers::SanitizeHelper (module)">SanitizeHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SanitizeHelper.html#sanitize-instance_method" title="ActionView::Helpers::SanitizeHelper#sanitize (method)">#sanitize</a></span>, <span class='object_link'><a href="SanitizeHelper.html#sanitize_css-instance_method" title="ActionView::Helpers::SanitizeHelper#sanitize_css (method)">#sanitize_css</a></span>, <span class='object_link'><a href="SanitizeHelper.html#strip_links-instance_method" title="ActionView::Helpers::SanitizeHelper#strip_links (method)">#strip_links</a></span>, <span class='object_link'><a href="SanitizeHelper.html#strip_tags-instance_method" title="ActionView::Helpers::SanitizeHelper#strip_tags (method)">#strip_tags</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../ERB/Util.html" title="ERB::Util (module)">ERB::Util</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../ERB/Util.html#html_escape-instance_method" title="ERB::Util#html_escape (method)">#html_escape</a></span>, <span class='object_link'><a href="../../ERB/Util.html#json_escape-instance_method" title="ERB::Util#json_escape (method)">#json_escape</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="collection_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>collection_select</strong>(object, method, collection, value_method, text_method, options = {}, html_options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>&lt;select&gt;</tt> and <tt>&lt;option&gt;</tt> tags for the
collection of existing return values of <tt>method</tt> for
<tt>object</tt>&#8217;s class. The value returned from calling
<tt>method</tt> on the instance <tt>object</tt> will be selected. If
calling <tt>method</tt> returns <tt>nil</tt>, no selection is made without
including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
The <tt>:value_method</tt> and <tt>:text_method</tt> parameters are methods
to be called on each member of <tt>collection</tt>. The return values are
used as the <tt>value</tt> attribute and contents of each
<tt>&lt;option&gt;</tt> tag, respectively.
</p>
<p>
Example object structure for use with this method:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Post</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id belongs_to'>belongs_to</span> <span class='symbol'>:author</span>
  <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>Author</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id has_many'>has_many</span> <span class='symbol'>:posts</span>
    <span class='kw'>def</span> <span class='id name_with_initial'>name_with_initial</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id first_name'>first_name</span><span class='period'>.</span><span class='id first'>first</span><span class='rbrace'>}</span><span class='tstring_content'>. </span><span class='embexpr_beg'>#{</span><span class='id last_name'>last_name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
</pre>
<p>
Sample usage (selecting the associated Author for an instance of Post,
<tt>@post</tt>):
</p>
<pre class="code">
  <span class='id collection_select'>collection_select</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='symbol'>:author_id</span><span class='comma'>,</span> <span class='const'>Author</span><span class='period'>.</span><span class='id all'>all</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name_with_initial</span><span class='comma'>,</span> <span class='symbol'>:prompt</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
</pre>
<p>
If <tt>@post.author_id</tt> is already <tt>1</tt>, this would return:
</p>
<pre class="code">
  &lt;select name=&quot;post[author_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;Please select&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;D. Heinemeier Hansson&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;D. Thomas&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;M. Clark&lt;/option&gt;
  &lt;/select&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 165</span>

<span class='kw'>def</span> <span class='id collection_select'>collection_select</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='id collection'>collection</span><span class='comma'>,</span> <span class='id value_method'>value_method</span><span class='comma'>,</span> <span class='id text_method'>text_method</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id html_options'>html_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>InstanceTag</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:object</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_collection_select_tag'>to_collection_select_tag</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id value_method'>value_method</span><span class='comma'>,</span> <span class='id text_method'>text_method</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="grouped_collection_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>grouped_collection_select</strong>(object, method, collection, group_method, group_label_method, option_key_method, option_value_method, options = {}, html_options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>&lt;select&gt;</tt>, <tt>&lt;optgroup&gt;</tt> and
<tt>&lt;option&gt;</tt> tags for the collection of existing return values
of <tt>method</tt> for <tt>object</tt>&#8217;s class. The value returned
from calling <tt>method</tt> on the instance <tt>object</tt> will be
selected. If calling <tt>method</tt> returns <tt>nil</tt>, no selection is
made without including <tt>:prompt</tt> or <tt>:include_blank</tt> in the
<tt>options</tt> hash.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>object</tt> - The instance of the class to be used for the select tag
</p>
</li>
<li><p>
<tt>method</tt> - The attribute of <tt>object</tt> corresponding to the
select tag
</p>
</li>
<li><p>
<tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_label_method</tt> - The name of a method which, when called on a
member of <tt>collection</tt>, returns a string to be used as the
<tt>label</tt> attribute for its <tt>&lt;optgroup&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Continent</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id has_many'>has_many</span> <span class='symbol'>:countries</span>
    <span class='comment'># attribs: id, name
</span>  <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>Country</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id belongs_to'>belongs_to</span> <span class='symbol'>:continent</span>
    <span class='comment'># attribs: id, name, continent_id
</span>  <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>City</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id belongs_to'>belongs_to</span> <span class='symbol'>:country</span>
    <span class='comment'># attribs: id, name, country_id
</span>  <span class='kw'>end</span>
</pre>
<p>
Sample usage:
</p>
<pre class="code">
  <span class='id grouped_collection_select'>grouped_collection_select</span><span class='lparen'>(</span><span class='symbol'>:city</span><span class='comma'>,</span> <span class='symbol'>:country_id</span><span class='comma'>,</span> <span class='ivar'>@continents</span><span class='comma'>,</span> <span class='symbol'>:countries</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='rparen'>)</span>
</pre>
<p>
Possible output:
</p>
<pre class="code">
  &lt;select name=&quot;city[country_id]&quot;&gt;
    &lt;optgroup label=&quot;Africa&quot;&gt;
      &lt;option value=&quot;1&quot;&gt;South Africa&lt;/option&gt;
      &lt;option value=&quot;3&quot;&gt;Somalia&lt;/option&gt;
    &lt;/optgroup&gt;
    &lt;optgroup label=&quot;Europe&quot;&gt;
      &lt;option value=&quot;7&quot; selected=&quot;selected&quot;&gt;Denmark&lt;/option&gt;
      &lt;option value=&quot;2&quot;&gt;Ireland&lt;/option&gt;
    &lt;/optgroup&gt;
  &lt;/select&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 217</span>

<span class='kw'>def</span> <span class='id grouped_collection_select'>grouped_collection_select</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='id collection'>collection</span><span class='comma'>,</span> <span class='id group_method'>group_method</span><span class='comma'>,</span> <span class='id group_label_method'>group_label_method</span><span class='comma'>,</span> <span class='id option_key_method'>option_key_method</span><span class='comma'>,</span> <span class='id option_value_method'>option_value_method</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id html_options'>html_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>InstanceTag</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:object</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_grouped_collection_select_tag'>to_grouped_collection_select_tag</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id group_method'>group_method</span><span class='comma'>,</span> <span class='id group_label_method'>group_label_method</span><span class='comma'>,</span> <span class='id option_key_method'>option_key_method</span><span class='comma'>,</span> <span class='id option_value_method'>option_value_method</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="grouped_options_for_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>grouped_options_for_select</strong>(grouped_options, selected_key = nil, prompt = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like
<tt>options_for_select</tt>, but wraps them with <tt>&lt;optgroup&gt;</tt>
tags.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>grouped_options</tt> - Accepts a nested array or hash of strings.  The
first value serves as the <tt>&lt;optgroup&gt;</tt> label while the second
value must be an array of options. The second value can be a nested array
of text-value pairs. See <tt>options_for_select</tt> for more info.
</p>
<pre class="code">
 Ex. [&quot;North America&quot;,[[&quot;United States&quot;,&quot;US&quot;],[&quot;Canada&quot;,&quot;CA&quot;]]]
</pre>
</li>
<li><p>
<tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Note: It is possible for this value to
match multiple options as you might have the same option in multiple
groups.  Each will then get <tt>selected=&quot;selected&quot;</tt>.
</p>
</li>
<li><p>
<tt>prompt</tt> - set to true or a prompt string. When the select element
doesn&#8217;t have a value yet, this prepends an option with a generic
prompt - &#8220;Please select&#8221; - or the given prompt string.
</p>
</li>
</ul>
<p>
Sample usage (Array):
</p>
<pre class="code">
  <span class='id grouped_options'>grouped_options</span> <span class='op'>=</span> <span class='lbracket'>[</span>
   <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>North America</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
     <span class='lbracket'>[</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>United States</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>US</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Canada</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='comma'>,</span>
   <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Europe</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
     <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Denmark</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Germany</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>France</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='rbracket'>]</span>
  <span class='id grouped_options_for_select'>grouped_options_for_select</span><span class='lparen'>(</span><span class='id grouped_options'>grouped_options</span><span class='rparen'>)</span>
</pre>
<p>
Sample usage (Hash):
</p>
<pre class="code">
  grouped_options = {
   'North America' =&gt; [['United States','US], 'Canada'],
   'Europe' =&gt; ['Denmark','Germany','France']
  }
  grouped_options_for_select(grouped_options)
</pre>
<p>
Possible output:
</p>
<pre class="code">
  &lt;optgroup label=&quot;Europe&quot;&gt;
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;
    &lt;option value=&quot;Germany&quot;&gt;Germany&lt;/option&gt;
    &lt;option value=&quot;France&quot;&gt;France&lt;/option&gt;
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;North America&quot;&gt;
    &lt;option value=&quot;US&quot;&gt;United States&lt;/option&gt;
    &lt;option value=&quot;Canada&quot;&gt;Canada&lt;/option&gt;
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


449
450
451
452
453
454
455
456
457
458
459
460</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 449</span>

<span class='kw'>def</span> <span class='id grouped_options_for_select'>grouped_options_for_select</span><span class='lparen'>(</span><span class='id grouped_options'>grouped_options</span><span class='comma'>,</span> <span class='id selected_key'>selected_key</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id prompt'>prompt</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id body'>body</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='id body'>body</span> <span class='op'>&lt;&lt;</span> <span class='id content_tag'>content_tag</span><span class='lparen'>(</span><span class='symbol'>:option</span><span class='comma'>,</span> <span class='id prompt'>prompt</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:value</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id prompt'>prompt</span>

  <span class='id grouped_options'>grouped_options</span> <span class='op'>=</span> <span class='id grouped_options'>grouped_options</span><span class='period'>.</span><span class='id sort'>sort</span> <span class='kw'>if</span> <span class='id grouped_options'>grouped_options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>

  <span class='id grouped_options'>grouped_options</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id group'>group</span><span class='op'>|</span>
    <span class='id body'>body</span> <span class='op'>&lt;&lt;</span> <span class='id content_tag'>content_tag</span><span class='lparen'>(</span><span class='symbol'>:optgroup</span><span class='comma'>,</span> <span class='id options_for_select'>options_for_select</span><span class='lparen'>(</span><span class='id group'>group</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id selected_key'>selected_key</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:label</span> <span class='op'>=&gt;</span> <span class='id group'>group</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id body'>body</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="option_groups_from_collection_for_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>option_groups_from_collection_for_select</strong>(collection, group_method, group_label_method, option_key_method, option_value_method, selected_key = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string of <tt>&lt;option&gt;</tt> tags, like
<tt>options_from_collection_for_select</tt>, but groups them by
<tt>&lt;optgroup&gt;</tt> tags based on the object relationships of the
arguments.
</p>
<p>
Parameters:
</p>
<ul>
<li><p>
<tt>collection</tt> - An array of objects representing the
<tt>&lt;optgroup&gt;</tt> tags.
</p>
</li>
<li><p>
<tt>group_method</tt> - The name of a method which, when called on a member
of <tt>collection</tt>, returns an array of child objects representing the
<tt>&lt;option&gt;</tt> tags.
</p>
</li>
<li><p>
group_label_method+ - The name of a method which, when called on a member
of <tt>collection</tt>, returns a string to be used as the <tt>label</tt>
attribute for its <tt>&lt;optgroup&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_key_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the <tt>value</tt> attribute for its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>option_value_method</tt> - The name of a method which, when called on a
child object of a member of <tt>collection</tt>, returns a value to be used
as the contents of its <tt>&lt;option&gt;</tt> tag.
</p>
</li>
<li><p>
<tt>selected_key</tt> - A value equal to the <tt>value</tt> attribute for
one of the <tt>&lt;option&gt;</tt> tags, which will have the
<tt>selected</tt> attribute set. Corresponds to the return value of one of
the calls to <tt>option_key_method</tt>. If <tt>nil</tt>, no selection is
made. Can also be a hash if disabled values are to be specified.
</p>
</li>
</ul>
<p>
Example object structure for use with this method:
</p>
<pre class="code">
  <span class='kw'>class</span> <span class='const'>Continent</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id has_many'>has_many</span> <span class='symbol'>:countries</span>
    <span class='comment'># attribs: id, name
</span>  <span class='kw'>end</span>
  <span class='kw'>class</span> <span class='const'>Country</span> <span class='op'>&lt;</span> <span class='const'>ActiveRecord</span><span class='op'>::</span><span class='const'>Base</span>
    <span class='id belongs_to'>belongs_to</span> <span class='symbol'>:continent</span>
    <span class='comment'># attribs: id, name, continent_id
</span>  <span class='kw'>end</span>
</pre>
<p>
Sample usage:
</p>
<pre class="code">
  <span class='id option_groups_from_collection_for_select'>option_groups_from_collection_for_select</span><span class='lparen'>(</span><span class='ivar'>@continents</span><span class='comma'>,</span> <span class='symbol'>:countries</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='symbol'>:id</span><span class='comma'>,</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='int'>3</span><span class='rparen'>)</span>
</pre>
<p>
Possible output:
</p>
<pre class="code">
  &lt;optgroup label=&quot;Africa&quot;&gt;
    &lt;option value=&quot;1&quot;&gt;Egypt&lt;/option&gt;
    &lt;option value=&quot;4&quot;&gt;Rwanda&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
  &lt;optgroup label=&quot;Asia&quot;&gt;
    &lt;option value=&quot;3&quot; selected=&quot;selected&quot;&gt;China&lt;/option&gt;
    &lt;option value=&quot;12&quot;&gt;India&lt;/option&gt;
    &lt;option value=&quot;5&quot;&gt;Japan&lt;/option&gt;
    ...
  &lt;/optgroup&gt;
</pre>
<p>
<b>Note:</b> Only the <tt>&lt;optgroup&gt;</tt> and <tt>&lt;option&gt;</tt>
tags are returned, so you still have to wrap the output in an appropriate
<tt>&lt;select&gt;</tt> tag.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


397
398
399
400
401
402
403
404</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 397</span>

<span class='kw'>def</span> <span class='id option_groups_from_collection_for_select'>option_groups_from_collection_for_select</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id group_method'>group_method</span><span class='comma'>,</span> <span class='id group_label_method'>group_label_method</span><span class='comma'>,</span> <span class='id option_key_method'>option_key_method</span><span class='comma'>,</span> <span class='id option_value_method'>option_value_method</span><span class='comma'>,</span> <span class='id selected_key'>selected_key</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id collection'>collection</span><span class='period'>.</span><span class='id inject'>inject</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id options_for_select'>options_for_select</span><span class='comma'>,</span> <span class='id group'>group</span><span class='op'>|</span>
    <span class='id group_label_string'>group_label_string</span> <span class='op'>=</span> <span class='id eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>group.</span><span class='embexpr_beg'>#{</span><span class='id group_label_method'>group_label_method</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id options_for_select'>options_for_select</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;optgroup label=\&quot;</span><span class='embexpr_beg'>#{</span><span class='id html_escape'>html_escape</span><span class='lparen'>(</span><span class='id group_label_string'>group_label_string</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>\&quot;&gt;</span><span class='tstring_end'>&quot;</span></span>
    <span class='id options_for_select'>options_for_select</span> <span class='op'>+=</span> <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='id eval'>eval</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>group.</span><span class='embexpr_beg'>#{</span><span class='id group_method'>group_method</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id option_key_method'>option_key_method</span><span class='comma'>,</span> <span class='id option_value_method'>option_value_method</span><span class='comma'>,</span> <span class='id selected_key'>selected_key</span><span class='rparen'>)</span>
    <span class='id options_for_select'>options_for_select</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;/optgroup&gt;</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="options_for_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>options_for_select</strong>(container, selected = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Accepts a container (hash, array, enumerable, your type) and returns a
string of option tags. Given a container where the elements respond to
first and last (such as a two-element array), the &#8220;lasts&#8221; serve
as option values and the &#8220;firsts&#8221; as option text. Hashes are
turned into this form automatically, so the keys become
&#8220;firsts&#8221; and values become lasts. If <tt>selected</tt> is
specified, the matching &#8220;last&#8221; or element will get the selected
option-tag.  <tt>selected</tt> may also be an array of values to be
selected when using a multiple select.
</p>
<p>
Examples (call, result):
</p>
<pre class="code">
  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;], [&quot;Kroner&quot;, &quot;DKK&quot;]])
    &lt;option value=&quot;$&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot;&gt;Kroner&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot; ], &quot;MasterCard&quot;)
    &lt;option&gt;VISA&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;MasterCard&lt;/option&gt;

  options_for_select({ &quot;Basic&quot; =&gt; &quot;$20&quot;, &quot;Plus&quot; =&gt; &quot;$40&quot; }, &quot;$40&quot;)
    &lt;option value=&quot;$20&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;$40&quot; selected=&quot;selected&quot;&gt;Plus&lt;/option&gt;

  options_for_select([ &quot;VISA&quot;, &quot;MasterCard&quot;, &quot;Discover&quot; ], [&quot;VISA&quot;, &quot;Discover&quot;])
    &lt;option selected=&quot;selected&quot;&gt;VISA&lt;/option&gt;\n&lt;option&gt;MasterCard&lt;/option&gt;\n&lt;option selected=&quot;selected&quot;&gt;Discover&lt;/option&gt;
</pre>
<p>
You can optionally provide html attributes as the last element of the
array.
</p>
<p>
Examples:
</p>
<pre class="code">
  options_for_select([ &quot;Denmark&quot;, [&quot;USA&quot;, {:class=&gt;'bold'}], &quot;Sweden&quot; ], [&quot;USA&quot;, &quot;Sweden&quot;])
    &lt;option value=&quot;Denmark&quot;&gt;Denmark&lt;/option&gt;\n&lt;option value=&quot;USA&quot; class=&quot;bold&quot; selected=&quot;selected&quot;&gt;USA&lt;/option&gt;\n&lt;option value=&quot;Sweden&quot; selected=&quot;selected&quot;&gt;Sweden&lt;/option&gt;

  options_for_select([[&quot;Dollar&quot;, &quot;$&quot;, {:class=&gt;&quot;bold&quot;}], [&quot;Kroner&quot;, &quot;DKK&quot;, {:onclick =&gt; &quot;alert('HI');&quot;}]])
    &lt;option value=&quot;$&quot; class=&quot;bold&quot;&gt;Dollar&lt;/option&gt;\n&lt;option value=&quot;DKK&quot; onclick=&quot;alert('HI');&quot;&gt;Kroner&lt;/option&gt;
</pre>
<p>
If you wish to specify disabled option tags, set <tt>selected</tt> to be a
hash, with <tt>:disabled</tt> being either a value or array of values to be
disabled. In this case, you can use <tt>:selected</tt> to specify selected
option tags.
</p>
<p>
Examples:
</p>
<pre class="code">
  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :disabled =&gt; [&quot;Advanced&quot;, &quot;Super Platinum&quot;])
    &lt;option value=&quot;Free&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot; disabled=&quot;disabled&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;

  options_for_select([&quot;Free&quot;, &quot;Basic&quot;, &quot;Advanced&quot;, &quot;Super Platinum&quot;], :selected =&gt; &quot;Free&quot;, :disabled =&gt; &quot;Super Platinum&quot;)
    &lt;option value=&quot;Free&quot; selected=&quot;selected&quot;&gt;Free&lt;/option&gt;\n&lt;option value=&quot;Basic&quot;&gt;Basic&lt;/option&gt;\n&lt;option value=&quot;Advanced&quot;&gt;Advanced&lt;/option&gt;\n&lt;option value=&quot;Super Platinum&quot; disabled=&quot;disabled&quot;&gt;Super Platinum&lt;/option&gt;
</pre>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


297
298
299
300
301
302
303
304
305
306
307
308
309
310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 297</span>

<span class='kw'>def</span> <span class='id options_for_select'>options_for_select</span><span class='lparen'>(</span><span class='id container'>container</span><span class='comma'>,</span> <span class='id selected'>selected</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='id container'>container</span> <span class='kw'>if</span> <span class='const'>String</span> <span class='op'>===</span> <span class='id container'>container</span>

  <span class='id container'>container</span> <span class='op'>=</span> <span class='id container'>container</span><span class='period'>.</span><span class='id to_a'>to_a</span> <span class='kw'>if</span> <span class='const'>Hash</span> <span class='op'>===</span> <span class='id container'>container</span>
  <span class='id selected'>selected</span><span class='comma'>,</span> <span class='id disabled'>disabled</span> <span class='op'>=</span> <span class='id extract_selected_and_disabled'>extract_selected_and_disabled</span><span class='lparen'>(</span><span class='id selected'>selected</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span> <span class='id r'>r</span> <span class='op'>|</span>
     <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id r'>r</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id container'>container</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id element'>element</span><span class='op'>|</span>
    <span class='id html_attributes'>html_attributes</span> <span class='op'>=</span> <span class='id option_html_attributes'>option_html_attributes</span><span class='lparen'>(</span><span class='id element'>element</span><span class='rparen'>)</span>
    <span class='id text'>text</span><span class='comma'>,</span> <span class='id value'>value</span> <span class='op'>=</span> <span class='id option_text_and_value'>option_text_and_value</span><span class='lparen'>(</span><span class='id element'>element</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='symbol'>:to_s</span><span class='rparen'>)</span>
    <span class='id selected_attribute'>selected_attribute</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> selected=&quot;selected&quot;</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id option_value_selected?'>option_value_selected?</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id selected'>selected</span><span class='rparen'>)</span>
    <span class='id disabled_attribute'>disabled_attribute</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> disabled=&quot;disabled&quot;</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id disabled'>disabled</span> <span class='op'>&amp;&amp;</span> <span class='id option_value_selected?'>option_value_selected?</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id disabled'>disabled</span><span class='rparen'>)</span>
    <span class='tstring'><span class='tstring_beg'>%(</span><span class='tstring_content'>&lt;option value=&quot;</span><span class='embexpr_beg'>#{</span><span class='id html_escape'>html_escape</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id selected_attribute'>selected_attribute</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id disabled_attribute'>disabled_attribute</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id html_attributes'>html_attributes</span><span class='rbrace'>}</span><span class='tstring_content'>&gt;</span><span class='embexpr_beg'>#{</span><span class='id html_escape'>html_escape</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>&lt;/option&gt;</span><span class='tstring_end'>)</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="options_from_collection_for_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>options_from_collection_for_select</strong>(collection, value_method, text_method, selected = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string of option tags that have been compiled by iterating over
the <tt>collection</tt> and assigning the the result of a call to the
<tt>value_method</tt> as the option value and the <tt>text_method</tt> as
the option text. Example:
</p>
<pre class="code">
  <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='ivar'>@people</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>id</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
</pre>
<p>
This will output the same HTML as if you did this:
</p>
<pre class="code">
  &lt;option value=&quot;#{person.id}&quot;&gt;#{person.name}&lt;/option&gt;
</pre>
<p>
This is more often than not used inside a #select_tag like this example:
</p>
<pre class="code">
  <span class='id select_tag'>select_tag</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>person</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='ivar'>@people</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>id</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
</pre>
<p>
If <tt>selected</tt> is specified as a value or array of values, the
element(s) returning a match on <tt>value_method</tt> will be selected
option tag(s).
</p>
<p>
If <tt>selected</tt> is specified as a Proc, those members of the
collection that return true for the anonymous function are the selected
values.
</p>
<p>
<tt>selected</tt> can also be a hash, specifying both <tt>:selected</tt>
and/or <tt>:disabled</tt> values as required.
</p>
<p>
Be sure to specify the same class as the <tt>value_method</tt> when
specifying selected or disabled options. Failure to do this will produce
undesired results. Example:
</p>
<pre class="code">
  <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='ivar'>@people</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>id</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
</pre>
<p>
Will not select a person with the id of 1 because 1 (an Integer) is not the
same as &#8216;1&#8217; (a string)
</p>
<pre class="code">
  <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='ivar'>@people</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>id</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>name</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>1</span><span class='rparen'>)</span>
</pre>
<p>
should produce the desired results.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 339</span>

<span class='kw'>def</span> <span class='id options_from_collection_for_select'>options_from_collection_for_select</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id value_method'>value_method</span><span class='comma'>,</span> <span class='id text_method'>text_method</span><span class='comma'>,</span> <span class='id selected'>selected</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id collection'>collection</span><span class='period'>.</span><span class='id map'>map</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id element'>element</span><span class='op'>|</span>
    <span class='lbracket'>[</span><span class='id element'>element</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id text_method'>text_method</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id element'>element</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id value_method'>value_method</span><span class='rparen'>)</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
  <span class='id selected'>selected</span><span class='comma'>,</span> <span class='id disabled'>disabled</span> <span class='op'>=</span> <span class='id extract_selected_and_disabled'>extract_selected_and_disabled</span><span class='lparen'>(</span><span class='id selected'>selected</span><span class='rparen'>)</span>
  <span class='id select_deselect'>select_deselect</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id select_deselect'>select_deselect</span><span class='lbracket'>[</span><span class='symbol'>:selected</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id extract_values_from_collection'>extract_values_from_collection</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id value_method'>value_method</span><span class='comma'>,</span> <span class='id selected'>selected</span><span class='rparen'>)</span>
  <span class='id select_deselect'>select_deselect</span><span class='lbracket'>[</span><span class='symbol'>:disabled</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id extract_values_from_collection'>extract_values_from_collection</span><span class='lparen'>(</span><span class='id collection'>collection</span><span class='comma'>,</span> <span class='id value_method'>value_method</span><span class='comma'>,</span> <span class='id disabled'>disabled</span><span class='rparen'>)</span>

  <span class='id options_for_select'>options_for_select</span><span class='lparen'>(</span><span class='id options'>options</span><span class='comma'>,</span> <span class='id select_deselect'>select_deselect</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>select</strong>(object, method, choices, options = {}, html_options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create a select tag and a series of contained option tags for the provided
object and method. The option currently held by the object will be
selected, provided that the object is available. See options_for_select for
the required format of the choices parameter.
</p>
<p>
Example with @post.person_id => 1:
</p>
<pre class="code">
  <span class='id select'>select</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>post</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person_id</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>Person</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span> <span class='lbracket'>[</span> <span class='id p'>p</span><span class='period'>.</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id p'>p</span><span class='period'>.</span><span class='id id'>id</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='comma'>,</span> <span class='lbrace'>{</span> <span class='symbol'>:include_blank</span> <span class='op'>=&gt;</span> <span class='kw'>true</span> <span class='rbrace'>}</span><span class='rparen'>)</span>
</pre>
<p>
could become:
</p>
<pre class="code">
  &lt;select name=&quot;post[person_id]&quot;&gt;
    &lt;option value=&quot;&quot;&gt;&lt;/option&gt;
    &lt;option value=&quot;1&quot; selected=&quot;selected&quot;&gt;David&lt;/option&gt;
    &lt;option value=&quot;2&quot;&gt;Sam&lt;/option&gt;
    &lt;option value=&quot;3&quot;&gt;Tobias&lt;/option&gt;
  &lt;/select&gt;
</pre>
<p>
This can be used to provide a default set of options in the standard way:
before rendering the create form, a new model instance is assigned the
default options and bound to @model_name. Usually this model is not saved
to the database. Instead, a second model object is created when the create
request is received. This allows the user to submit a form page more than
once with the expected results of creating multiple records. In addition,
this allows a single partial to be used to generate form inputs for both
edit and create forms.
</p>
<p>
By default, <tt>post.person_id</tt> is the selected option.  Specify
<tt>:selected =&gt; value</tt> to use a different selection or
<tt>:selected =&gt; nil</tt> to leave all options unselected. Similarly,
you can specify values to be disabled in the option tags by specifying the
<tt>:disabled</tt> option. This can either be a single value or an array of
values to be disabled.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


131
132
133</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 131</span>

<span class='kw'>def</span> <span class='id select'>select</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='id choices'>choices</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id html_options'>html_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>InstanceTag</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:object</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_select_tag'>to_select_tag</span><span class='lparen'>(</span><span class='id choices'>choices</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="time_zone_options_for_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>time_zone_options_for_select</strong>(selected = nil, priority_zones = nil, model = ActiveSupport::TimeZone) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string of option tags for pretty much any time zone in the world.
Supply a ActiveSupport::TimeZone name as <tt>selected</tt> to have it
marked as the selected option tag. You can also supply an array of
ActiveSupport::TimeZone objects as <tt>priority_zones</tt>, so that they
will be listed above the rest of the (long) list. (You can use
ActiveSupport::TimeZone.us_zones as a convenience for obtaining a list of
the US time zones, or a Regexp to select the zones of your choice)
</p>
<p>
The <tt>selected</tt> parameter must be either <tt>nil</tt>, or a string
that names a ActiveSupport::TimeZone.
</p>
<p>
By default, <tt>model</tt> is the ActiveSupport::TimeZone constant (which
can be obtained in Active Record as a value object). The only requirement
is that the <tt>model</tt> parameter be an object that responds to
<tt>all</tt>, and returns an array of objects that represent time zones.
</p>
<p>
NOTE: Only the option tags are returned, you have to wrap this call in a
regular HTML select tag.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


480
481
482
483
484
485
486
487
488
489
490
491
492
493
494
495
496
497
498</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 480</span>

<span class='kw'>def</span> <span class='id time_zone_options_for_select'>time_zone_options_for_select</span><span class='lparen'>(</span><span class='id selected'>selected</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id priority_zones'>priority_zones</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id model'>model</span> <span class='op'>=</span> <span class='op'>::</span><span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TimeZone</span><span class='rparen'>)</span>
  <span class='id zone_options'>zone_options</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

  <span class='id zones'>zones</span> <span class='op'>=</span> <span class='id model'>model</span><span class='period'>.</span><span class='id all'>all</span>
  <span class='id convert_zones'>convert_zones</span> <span class='op'>=</span> <span class='id lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id list'>list</span><span class='op'>|</span> <span class='id list'>list</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id z'>z</span><span class='op'>|</span> <span class='lbracket'>[</span> <span class='id z'>z</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='comma'>,</span> <span class='id z'>z</span><span class='period'>.</span><span class='id name'>name</span> <span class='rbracket'>]</span> <span class='rbrace'>}</span> <span class='rbrace'>}</span>

  <span class='kw'>if</span> <span class='id priority_zones'>priority_zones</span>
   <span class='kw'>if</span> <span class='id priority_zones'>priority_zones</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Regexp</span><span class='rparen'>)</span>
      <span class='id priority_zones'>priority_zones</span> <span class='op'>=</span> <span class='id model'>model</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id find_all'>find_all</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id z'>z</span><span class='op'>|</span> <span class='id z'>z</span> <span class='op'>=~</span> <span class='id priority_zones'>priority_zones</span><span class='rbrace'>}</span>
   <span class='kw'>end</span>
    <span class='id zone_options'>zone_options</span> <span class='op'>+=</span> <span class='id options_for_select'>options_for_select</span><span class='lparen'>(</span><span class='id convert_zones'>convert_zones</span><span class='lbracket'>[</span><span class='id priority_zones'>priority_zones</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id selected'>selected</span><span class='rparen'>)</span>
    <span class='id zone_options'>zone_options</span> <span class='op'>+=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;option value=\&quot;\&quot; disabled=\&quot;disabled\&quot;&gt;-------------&lt;/option&gt;\n</span><span class='tstring_end'>&quot;</span></span>

    <span class='id zones'>zones</span> <span class='op'>=</span> <span class='id zones'>zones</span><span class='period'>.</span><span class='id reject'>reject</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id z'>z</span><span class='op'>|</span> <span class='id priority_zones'>priority_zones</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span> <span class='id z'>z</span> <span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>

  <span class='id zone_options'>zone_options</span> <span class='op'>+=</span> <span class='id options_for_select'>options_for_select</span><span class='lparen'>(</span><span class='id convert_zones'>convert_zones</span><span class='lbracket'>[</span><span class='id zones'>zones</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id selected'>selected</span><span class='rparen'>)</span>
  <span class='id zone_options'>zone_options</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="time_zone_select-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>time_zone_select</strong>(object, method, priority_zones = nil, options = {}, html_options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return select and option tags for the given object and method, using
#time_zone_options_for_select to generate the list of option tags.
</p>
<p>
In addition to the <tt>:include_blank</tt> option documented above, this
method also supports a <tt>:model</tt> option, which defaults to
ActiveSupport::TimeZone. This may be used by users to specify a different
time zone model object. (See <tt>time_zone_options_for_select</tt> for more
information.)
</p>
<p>
You can also supply an array of ActiveSupport::TimeZone objects as
<tt>priority_zones</tt>, so that they will be listed above the rest of the
(long) list. (You can use ActiveSupport::TimeZone.us_zones as a convenience
for obtaining a list of the US time zones, or a Regexp to select the zones
of your choice)
</p>
<p>
Finally, this method supports a <tt>:default</tt> option, which selects a
default ActiveSupport::TimeZone if the object&#8217;s time zone is
<tt>nil</tt>.
</p>
<p>
Examples:
</p>
<pre class="code">
  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:include_blank</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>

  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pacific Time (US &amp; Canada)</span><span class='tstring_end'>&quot;</span></span> <span class='rparen'>)</span>

  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TimeZone</span><span class='period'>.</span><span class='id us_zones'>us_zones</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Pacific Time (US &amp; Canada)</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TimeZone</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Alaska</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>TimeZone</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Hawaii</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>Australia</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>

  <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>user</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>time_zone</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Timezone</span><span class='period'>.</span><span class='id all'>all</span><span class='period'>.</span><span class='id sort'>sort</span><span class='comma'>,</span> <span class='symbol'>:model</span> <span class='op'>=&gt;</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Timezone</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


251
252
253</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/form_options_helper.rb', line 251</span>

<span class='kw'>def</span> <span class='id time_zone_select'>time_zone_select</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='id priority_zones'>priority_zones</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id html_options'>html_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='const'>InstanceTag</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id object'>object</span><span class='comma'>,</span> <span class='id method'>method</span><span class='comma'>,</span> <span class='kw'>self</span><span class='comma'>,</span>  <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:object</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_time_zone_select_tag'>to_time_zone_select_tag</span><span class='lparen'>(</span><span class='id priority_zones'>priority_zones</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:04:20 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>