<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionView::Helpers::NumberHelper</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (N)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">NumberHelper</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionView::Helpers::NumberHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">ActionView::Helpers</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">actionpack/lib/action_view/helpers/number_helper.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Provides methods for converting numbers into formatted strings. Methods are
provided for phone numbers, currency, percentage, precision, positional
notation, file size and pretty printing.
</p>
<p>
Most methods expect a <tt>number</tt> argument, and will return it
unchanged if can&#8217;t be converted into a valid number.
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="NumberHelper/InvalidNumberError.html" title="ActionView::Helpers::NumberHelper::InvalidNumberError (class)">InvalidNumberError</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="DEFAULT_CURRENCY_VALUES-constant" class="">DEFAULT_CURRENCY_VALUES =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='symbol'>:format</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%u%n</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:unit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>$</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
<span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='symbol'>:strip_insignificant_zeros</span> <span class='op'>=&gt;</span> <span class='kw'>false</span> <span class='rbrace'>}</span></pre></dd>
      
        <dt id="STORAGE_UNITS-constant" class="">STORAGE_UNITS =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='symbol'>:byte</span><span class='comma'>,</span> <span class='symbol'>:kb</span><span class='comma'>,</span> <span class='symbol'>:mb</span><span class='comma'>,</span> <span class='symbol'>:gb</span><span class='comma'>,</span> <span class='symbol'>:tb</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id freeze'>freeze</span></pre></dd>
      
        <dt id="DECIMAL_UNITS-constant" class="">DECIMAL_UNITS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='int'>0</span> <span class='op'>=&gt;</span> <span class='symbol'>:unit</span><span class='comma'>,</span> <span class='int'>1</span> <span class='op'>=&gt;</span> <span class='symbol'>:ten</span><span class='comma'>,</span> <span class='int'>2</span> <span class='op'>=&gt;</span> <span class='symbol'>:hundred</span><span class='comma'>,</span> <span class='int'>3</span> <span class='op'>=&gt;</span> <span class='symbol'>:thousand</span><span class='comma'>,</span> <span class='int'>6</span> <span class='op'>=&gt;</span> <span class='symbol'>:million</span><span class='comma'>,</span> <span class='int'>9</span> <span class='op'>=&gt;</span> <span class='symbol'>:billion</span><span class='comma'>,</span> <span class='int'>12</span> <span class='op'>=&gt;</span> <span class='symbol'>:trillion</span><span class='comma'>,</span> <span class='int'>15</span> <span class='op'>=&gt;</span> <span class='symbol'>:quadrillion</span><span class='comma'>,</span>
<span class='op'>-</span><span class='int'>1</span> <span class='op'>=&gt;</span> <span class='symbol'>:deci</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>2</span> <span class='op'>=&gt;</span> <span class='symbol'>:centi</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>3</span> <span class='op'>=&gt;</span> <span class='symbol'>:mili</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>6</span> <span class='op'>=&gt;</span> <span class='symbol'>:micro</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>9</span> <span class='op'>=&gt;</span> <span class='symbol'>:nano</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>12</span> <span class='op'>=&gt;</span> <span class='symbol'>:pico</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>15</span> <span class='op'>=&gt;</span> <span class='symbol'>:femto</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id freeze'>freeze</span></pre></dd>
      
    </dl>
  



  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_to_currency-instance_method" title="#number_to_currency (instance method)">- (Object) <strong>number_to_currency</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats a <tt>number</tt> into a currency string (e.g., $13.65).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_to_human-instance_method" title="#number_to_human (instance method)">- (Object) <strong>number_to_human</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Pretty prints (formats and approximates) a number in a way it is more
readable by humans (eg.: 1200000000 becomes &#8220;1.2 Billion&#8221;).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_to_human_size-instance_method" title="#number_to_human_size (instance method)">- (Object) <strong>number_to_human_size</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats the bytes in <tt>number</tt> into a more understandable
representation (e.g., giving it 1500 yields 1.5 KB).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_to_percentage-instance_method" title="#number_to_percentage (instance method)">- (Object) <strong>number_to_percentage</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats a <tt>number</tt> as a percentage string (e.g., 65%).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_to_phone-instance_method" title="#number_to_phone (instance method)">- (Object) <strong>number_to_phone</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats a <tt>number</tt> into a US phone number (e.g., (555) 123-9876).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_with_delimiter-instance_method" title="#number_with_delimiter (instance method)">- (Object) <strong>number_with_delimiter</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats a <tt>number</tt> with grouped thousands using <tt>delimiter</tt>
(e.g., 12,324).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#number_with_precision-instance_method" title="#number_with_precision (instance method)">- (Object) <strong>number_with_precision</strong>(number, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Formats a <tt>number</tt> with the specified level of <tt>:precision</tt>
(e.g., 112.32 has a precision of 2 if <tt>:significant</tt> is
<tt>false</tt>, and 5 if <tt>:significant</tt> is <tt>true</tt>).
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="number_to_currency-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_to_currency</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats a <tt>number</tt> into a currency string (e.g., $13.65). You can
customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     -  Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:precision</tt>  -  Sets the level of precision (defaults to 2).
</p>
</li>
<li><p>
<tt>:unit</tt>       - Sets the denomination of the currency (defaults to
&#8220;$&#8221;).
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the units (defaults to
&#8220;.&#8221;).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;,&#8221;).
</p>
</li>
<li><p>
<tt>:format</tt>     - Sets the format of the output string (defaults to
&#8220;%u%n&#8221;). The field types are:
</p>
<pre class="code">
  %u  The currency unit
  %n  The number
</pre>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.50</span><span class='rparen'>)</span>                    <span class='comment'># =&gt; $1,234,567,890.50
</span> <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.506</span><span class='rparen'>)</span>                   <span class='comment'># =&gt; $1,234,567,890.51
</span> <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.506</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>3</span><span class='rparen'>)</span>  <span class='comment'># =&gt; $1,234,567,890.506
</span> <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.506</span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='symbol'>:fr</span><span class='rparen'>)</span>   <span class='comment'># =&gt; 1 234 567 890,506 ???
</span>
 <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.50</span><span class='comma'>,</span> <span class='symbol'>:unit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;pound;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
 <span class='comment'># =&gt; &amp;pound;1234567890,50
</span> <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='float'>1234567890.50</span><span class='comma'>,</span> <span class='symbol'>:unit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;pound;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:format</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%n %u</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
 <span class='comment'># =&gt; 1234567890,50 &amp;pound;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 106</span>

<span class='kw'>def</span> <span class='id number_to_currency'>number_to_currency</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id number'>number</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='id defaults'>defaults</span>  <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id currency'>currency</span>  <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.currency.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='id defaults'>defaults</span>  <span class='op'>=</span> <span class='const'>DEFAULT_CURRENCY_VALUES</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span><span class='period'>.</span><span class='id merge!'>merge!</span><span class='lparen'>(</span><span class='id currency'>currency</span><span class='rparen'>)</span>
  <span class='id options'>options</span>   <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id merge!'>merge!</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>

  <span class='id unit'>unit</span>      <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:unit</span><span class='rparen'>)</span>
  <span class='id format'>format</span>    <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:format</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='id value'>value</span> <span class='op'>=</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span>
    <span class='id format'>format</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%u</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id unit'>unit</span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
  <span class='kw'>rescue</span> <span class='const'>InvalidNumberError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span>
    <span class='kw'>else</span>
      <span class='id formatted_number'>formatted_number</span> <span class='op'>=</span> <span class='id format'>format</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id e'>e</span><span class='period'>.</span><span class='id number'>number</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%u</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id unit'>unit</span><span class='rparen'>)</span>
      <span class='id e'>e</span><span class='period'>.</span><span class='id number'>number</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id html_safe?'>html_safe?</span> <span class='op'>?</span> <span class='id formatted_number'>formatted_number</span><span class='period'>.</span><span class='id html_safe'>html_safe</span> <span class='op'>:</span> <span class='id formatted_number'>formatted_number</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_to_human-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_to_human</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Pretty prints (formats and approximates) a number in a way it is more
readable by humans (eg.: 1200000000 becomes &#8220;1.2 Billion&#8221;).
This is useful for numbers that can get very large (and too hard to read).
</p>
<p>
See <tt>number_to_human_size</tt> if you want to print a file size.
</p>
<p>
You can also define you own unit-quantifier names if you want to use other
decimal units (eg.: 1500 becomes &#8220;1.5 kilometers&#8221;, 0.150
becomes &#8220;150 mililiters&#8221;, etc). You may define a wide range of
unit quantifiers, even fractional ones (centi, deci, mili, etc).
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     - Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:precision</tt>  - Sets the precision of the number (defaults to 3).
</p>
</li>
<li><p>
<tt>:significant</tt>  - If <tt>true</tt>, precision will be the # of
significant_digits. If <tt>false</tt>, the # of fractional digits (defaults
to <tt>true</tt>)
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the fractional and
integer digits (defaults to &#8220;.&#8221;).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;&#8221;).
</p>
</li>
<li><p>
<tt>:strip_insignificant_zeros</tt>  - If <tt>true</tt> removes
insignificant zeros after the decimal separator (defaults to <tt>true</tt>)
</p>
</li>
<li><p>
<tt>:units</tt> - A Hash of unit quantifier names. Or a string containing
an i18n scope where to find this hash. It might have the following keys:
</p>
<ul>
<li><p>
<b>integers</b>: <tt>:unit</tt>, <tt>:ten</tt>, <tt>:hundred</tt>,
<tt>:thousand</tt>,  <tt>:million</tt>,  <tt>:billion</tt>,
<tt>:trillion</tt>, <tt>:quadrillion</tt>
</p>
</li>
</ul>
<ul>
<li><p>
<b>fractionals</b>: <tt>:deci</tt>, <tt>:centi</tt>, <tt>:mili</tt>,
<tt>:micro</tt>, <tt>:nano</tt>, <tt>:pico</tt>, <tt>:femto</tt>
</p>
</li>
</ul>
</li>
<li><p>
<tt>:format</tt> - Sets the format of the output string (defaults to
&#8220;%n %u&#8221;). The field types are:
</p>
<pre class="code">
  %u  The quantifier (ex.: 'thousand')
  %n  The number
</pre>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>123</span><span class='rparen'>)</span>                                          <span class='comment'># =&gt; &quot;123&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234</span><span class='rparen'>)</span>                                         <span class='comment'># =&gt; &quot;1.23 Thousand&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>12345</span><span class='rparen'>)</span>                                        <span class='comment'># =&gt; &quot;12.3 Thousand&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='rparen'>)</span>                                      <span class='comment'># =&gt; &quot;1.23 Million&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567890</span><span class='rparen'>)</span>                                   <span class='comment'># =&gt; &quot;1.23 Billion&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567890123</span><span class='rparen'>)</span>                                <span class='comment'># =&gt; &quot;1.23 Trillion&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567890123456</span><span class='rparen'>)</span>                             <span class='comment'># =&gt; &quot;1.23 Quadrillion&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567890123456789</span><span class='rparen'>)</span>                          <span class='comment'># =&gt; &quot;1230 Quadrillion&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>489939</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>                      <span class='comment'># =&gt; &quot;490 Thousand&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>489939</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>4</span><span class='rparen'>)</span>                      <span class='comment'># =&gt; &quot;489.9 Thousand&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>4</span><span class='comma'>,</span>
                          <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span>               <span class='comment'># =&gt; &quot;1.2346 Million&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span>
                          <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                          <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span>               <span class='comment'># =&gt; &quot;1,2 Million&quot;
</span></pre>
<p>
Unsignificant zeros after the decimal separator are stripped out by default
(set <tt>:strip_insignificant_zeros</tt> to <tt>false</tt> to change that):
</p>
<pre class="code">
 <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>12345012345</span><span class='comma'>,</span> <span class='symbol'>:significant_digits</span> <span class='op'>=&gt;</span> <span class='int'>6</span><span class='rparen'>)</span>       <span class='comment'># =&gt; &quot;12.345 Billion&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>500000000</span><span class='comma'>,</span> <span class='symbol'>:precision</span><span class='op'>=&gt;</span><span class='int'>5</span><span class='rparen'>)</span>                    <span class='comment'># =&gt; &quot;500 Million&quot;
</span></pre>
<h4>Custom Unit Quantifiers</h4>
<p>
You can also use your own custom unit quantifiers:
</p>
<pre class="code">
 <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>500000</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='symbol'>:unit</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ml</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:thousand</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>lt</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;500 lt&quot;
</span></pre>
<p>
If in your I18n locale you have:
</p>
<pre class="code">
  distance:
    centi:
      one: &quot;centimeter&quot;
      other: &quot;centimeters&quot;
    unit:
      one: &quot;meter&quot;
      other: &quot;meters&quot;
    thousand:
      one: &quot;kilometer&quot;
      other: &quot;kilometers&quot;
    billion: &quot;gazilion-distance&quot;
</pre>
<p>
Then you could do:
</p>
<pre class="code">
 <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>543934</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='rparen'>)</span>                              <span class='comment'># =&gt; &quot;544 kilometers&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>54393498</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='rparen'>)</span>                            <span class='comment'># =&gt; &quot;54400 kilometers&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>54393498000</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='rparen'>)</span>                         <span class='comment'># =&gt; &quot;54.4 gazilion-distance&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>343</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span>                <span class='comment'># =&gt; &quot;300 meters&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='rparen'>)</span>                                   <span class='comment'># =&gt; &quot;1 meter&quot;
</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='float'>0.34</span><span class='comma'>,</span> <span class='symbol'>:units</span> <span class='op'>=&gt;</span> <span class='symbol'>:distance</span><span class='rparen'>)</span>                                <span class='comment'># =&gt; &quot;34 centimeters&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 429</span>

<span class='kw'>def</span> <span class='id number_to_human'>number_to_human</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='id number'>number</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='const'>Float</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'>TypeError</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span> <span class='const'>InvalidNumberError</span><span class='comma'>,</span> <span class='id number'>number</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id number'>number</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id human'>human</span>    <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id human'>human</span><span class='rparen'>)</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span>
  <span class='comment'>#for backwards compatibility with those that didn't add strip_insignificant_zeros to their locale files
</span>  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:strip_insignificant_zeros</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id options'>options</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:strip_insignificant_zeros</span><span class='rparen'>)</span>

  <span class='id units'>units</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='symbol'>:units</span>
  <span class='id unit_exponents'>unit_exponents</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id units'>units</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id units'>units</span>
  <span class='kw'>when</span> <span class='const'>String</span><span class='comma'>,</span> <span class='const'>Symbol</span>
    <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:#{</span><span class='id units'>units</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='kw'>nil</span>
    <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.decimal_units.units</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>:units must be a Hash or String translation scope.</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id map'>map</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id e_name'>e_name</span><span class='op'>|</span> <span class='const'>DECIMAL_UNITS</span><span class='period'>.</span><span class='id invert'>invert</span><span class='lbracket'>[</span><span class='id e_name'>e_name</span><span class='rbracket'>]</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id sort_by'>sort_by</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> <span class='op'>-</span><span class='id e'>e</span><span class='rbrace'>}</span>

  <span class='id number_exponent'>number_exponent</span> <span class='op'>=</span> <span class='const'>Math</span><span class='period'>.</span><span class='id log10'>log10</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span><span class='period'>.</span><span class='id floor'>floor</span>
  <span class='id display_exponent'>display_exponent</span> <span class='op'>=</span> <span class='id unit_exponents'>unit_exponents</span><span class='period'>.</span><span class='id find'>find</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id e'>e</span><span class='op'>|</span> <span class='id number_exponent'>number_exponent</span> <span class='op'>&gt;=</span> <span class='id e'>e</span> <span class='rbrace'>}</span>
  <span class='id number'>number</span>  <span class='op'>/=</span> <span class='int'>10</span> <span class='op'>**</span> <span class='id display_exponent'>display_exponent</span>

  <span class='id unit'>unit</span> <span class='op'>=</span> <span class='kw'>case</span> <span class='id units'>units</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='id units'>units</span><span class='lbracket'>[</span><span class='const'>DECIMAL_UNITS</span><span class='lbracket'>[</span><span class='id display_exponent'>display_exponent</span><span class='rbracket'>]</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='const'>String</span><span class='comma'>,</span> <span class='const'>Symbol</span>
    <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:#{</span><span class='id units'>units</span><span class='rbrace'>}</span><span class='tstring_content'>.</span><span class='embexpr_beg'>#{</span><span class='const'>DECIMAL_UNITS</span><span class='lbracket'>[</span><span class='id display_exponent'>display_exponent</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.decimal_units.units.</span><span class='embexpr_beg'>#{</span><span class='const'>DECIMAL_UNITS</span><span class='lbracket'>[</span><span class='id display_exponent'>display_exponent</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id decimal_format'>decimal_format</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:format</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.decimal_units.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%n %u</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id formatted_number'>formatted_number</span> <span class='op'>=</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id decimal_format'>decimal_format</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id formatted_number'>formatted_number</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%u</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id unit'>unit</span><span class='rparen'>)</span><span class='period'>.</span><span class='id strip'>strip</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_to_human_size-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_to_human_size</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats the bytes in <tt>number</tt> into a more understandable
representation (e.g., giving it 1500 yields 1.5 KB). This method is useful
for reporting file sizes to users. You can customize the format in the
<tt>options</tt> hash.
</p>
<p>
See <tt>number_to_human</tt> if you want to pretty-print a generic number.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     - Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:precision</tt>  - Sets the precision of the number (defaults to 3).
</p>
</li>
<li><p>
<tt>:significant</tt>  - If <tt>true</tt>, precision will be the # of
significant_digits. If <tt>false</tt>, the # of fractional digits (defaults
to <tt>true</tt>)
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the fractional and
integer digits (defaults to &#8220;.&#8221;).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;&#8221;).
</p>
</li>
<li><p>
<tt>:strip_insignificant_zeros</tt>  - If <tt>true</tt> removes
insignificant zeros after the decimal separator (defaults to <tt>true</tt>)
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>123</span><span class='rparen'>)</span>                                          <span class='comment'># =&gt; 123 Bytes
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234</span><span class='rparen'>)</span>                                         <span class='comment'># =&gt; 1.21 KB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>12345</span><span class='rparen'>)</span>                                        <span class='comment'># =&gt; 12.1 KB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='rparen'>)</span>                                      <span class='comment'># =&gt; 1.18 MB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567890</span><span class='rparen'>)</span>                                   <span class='comment'># =&gt; 1.15 GB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567890123</span><span class='rparen'>)</span>                                <span class='comment'># =&gt; 1.12 TB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>                     <span class='comment'># =&gt; 1.2 MB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>483989</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>                      <span class='comment'># =&gt; 470 KB
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>  <span class='comment'># =&gt; 1,2 MB
</span></pre>
<p>
Non-significant zeros after the fractional separator are stripped out by
default (set <tt>:strip_insignificant_zeros</tt> to <tt>false</tt> to
change that):
</p>
<pre class="code">
 <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>1234567890123</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>        <span class='comment'># =&gt; &quot;1.1229 TB&quot;
</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='int'>524288000</span><span class='comma'>,</span> <span class='symbol'>:precision</span><span class='op'>=&gt;</span><span class='int'>5</span><span class='rparen'>)</span>              <span class='comment'># =&gt; &quot;500 MB&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 312</span>

<span class='kw'>def</span> <span class='id number_to_human_size'>number_to_human_size</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='id number'>number</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='const'>Float</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'>TypeError</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span> <span class='const'>InvalidNumberError</span><span class='comma'>,</span> <span class='id number'>number</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id number'>number</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id human'>human</span>    <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id human'>human</span><span class='rparen'>)</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span>
  <span class='comment'>#for backwards compatibility with those that didn't add strip_insignificant_zeros to their locale files
</span>  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:strip_insignificant_zeros</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='kw'>not</span> <span class='id options'>options</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:strip_insignificant_zeros</span><span class='rparen'>)</span>

  <span class='id storage_units_format'>storage_units_format</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.storage_units.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>&lt;</span> <span class='int'>1024</span>
    <span class='id unit'>unit</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.storage_units.units.byte</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='comma'>,</span> <span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='id storage_units_format'>storage_units_format</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%u</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id unit'>unit</span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
  <span class='kw'>else</span>
    <span class='id max_exp'>max_exp</span>  <span class='op'>=</span> <span class='const'>STORAGE_UNITS</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>-</span> <span class='int'>1</span>
    <span class='id exponent'>exponent</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Math</span><span class='period'>.</span><span class='id log'>log</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span> <span class='op'>/</span> <span class='const'>Math</span><span class='period'>.</span><span class='id log'>log</span><span class='lparen'>(</span><span class='int'>1024</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='comment'># Convert to base 1024
</span>    <span class='id exponent'>exponent</span> <span class='op'>=</span> <span class='id max_exp'>max_exp</span> <span class='kw'>if</span> <span class='id exponent'>exponent</span> <span class='op'>&gt;</span> <span class='id max_exp'>max_exp</span> <span class='comment'># we need this to avoid overflow for the highest unit
</span>    <span class='id number'>number</span>  <span class='op'>/=</span> <span class='int'>1024</span> <span class='op'>**</span> <span class='id exponent'>exponent</span>

    <span class='id unit_key'>unit_key</span> <span class='op'>=</span> <span class='const'>STORAGE_UNITS</span><span class='lbracket'>[</span><span class='id exponent'>exponent</span><span class='rbracket'>]</span>
    <span class='id unit'>unit</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.human.storage_units.units.</span><span class='embexpr_beg'>#{</span><span class='id unit_key'>unit_key</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:count</span> <span class='op'>=&gt;</span> <span class='id number'>number</span><span class='comma'>,</span> <span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>

    <span class='id formatted_number'>formatted_number</span> <span class='op'>=</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='id storage_units_format'>storage_units_format</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%n</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id formatted_number'>formatted_number</span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>%u</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id unit'>unit</span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_to_percentage-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_to_percentage</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats a <tt>number</tt> as a percentage string (e.g., 65%). You can
customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     - Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:precision</tt>  - Sets the precision of the number (defaults to 3).
</p>
</li>
<li><p>
<tt>:significant</tt>  - If <tt>true</tt>, precision will be the # of
significant_digits. If <tt>false</tt>, the # of fractional digits (defaults
to <tt>false</tt>)
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the fractional and
integer digits (defaults to &#8220;.&#8221;).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;&#8221;).
</p>
</li>
<li><p>
<tt>:strip_insignificant_zeros</tt>  - If <tt>true</tt> removes
insignificant zeros after the decimal separator (defaults to
<tt>false</tt>)
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='int'>100</span><span class='rparen'>)</span>                                        <span class='comment'># =&gt; 100.000%
</span> <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='int'>100</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>                       <span class='comment'># =&gt; 100%
</span> <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='int'>1000</span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; 1.000,000%
</span> <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='float'>302.24398923423</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>           <span class='comment'># =&gt; 302.24399%
</span> <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='int'>1000</span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='symbol'>:fr</span><span class='rparen'>)</span>                       <span class='comment'># =&gt; 1 000,000%</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 151</span>

<span class='kw'>def</span> <span class='id number_to_percentage'>number_to_percentage</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id number'>number</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='id defaults'>defaults</span>   <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id percentage'>percentage</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.percentage.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id defaults'>defaults</span>  <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id percentage'>percentage</span><span class='rparen'>)</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span>

  <span class='kw'>begin</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:raise</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
  <span class='kw'>rescue</span> <span class='const'>InvalidNumberError</span> <span class='op'>=&gt;</span> <span class='id e'>e</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span>
    <span class='kw'>else</span>
      <span class='id e'>e</span><span class='period'>.</span><span class='id number'>number</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id html_safe?'>html_safe?</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id number'>number</span><span class='rbrace'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span><span class='period'>.</span><span class='id html_safe'>html_safe</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id e'>e</span><span class='period'>.</span><span class='id number'>number</span><span class='rbrace'>}</span><span class='tstring_content'>%</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_to_phone-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_to_phone</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats a <tt>number</tt> into a US phone number (e.g., (555) 123-9876).
You can customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:area_code</tt>  - Adds parentheses around the area code.
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Specifies the delimiter to use (defaults to
&#8220;-&#8221;).
</p>
</li>
<li><p>
<tt>:extension</tt>  - Specifies an extension to add to the end of the
generated number.
</p>
</li>
<li><p>
<tt>:country_code</tt>  - Sets the country code for the phone number.
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 number_to_phone(5551234)                                           # =&gt; 555-1234
 number_to_phone(1235551234)                                        # =&gt; 123-555-1234
 number_to_phone(1235551234, :area_code =&gt; true)                    # =&gt; (123) 555-1234
 number_to_phone(1235551234, :delimiter =&gt; &quot; &quot;)                     # =&gt; 123 555 1234
 number_to_phone(1235551234, :area_code =&gt; true, :extension =&gt; 555) # =&gt; (123) 555-1234 x 555
 number_to_phone(1235551234, :country_code =&gt; 1)                    # =&gt; +1-123-555-1234

 number_to_phone(1235551234, :country_code =&gt; 1, :extension =&gt; 1343, :delimiter =&gt; &quot;.&quot;)
 =&gt; +1.123.555.1234 x 1343</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 49</span>

<span class='kw'>def</span> <span class='id number_to_phone'>number_to_phone</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>nil</span> <span class='kw'>if</span> <span class='id number'>number</span><span class='period'>.</span><span class='id nil?'>nil?</span>

  <span class='kw'>begin</span>
    <span class='const'>Float</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span>
    <span class='id is_number_html_safe'>is_number_html_safe</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'>TypeError</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span> <span class='const'>InvalidNumberError</span><span class='comma'>,</span> <span class='id number'>number</span>
    <span class='kw'>else</span>
      <span class='id is_number_html_safe'>is_number_html_safe</span> <span class='op'>=</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id html_safe?'>html_safe?</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id number'>number</span>       <span class='op'>=</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id strip'>strip</span>
  <span class='id options'>options</span>      <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys'>symbolize_keys</span>
  <span class='id area_code'>area_code</span>    <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:area_code</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>nil</span>
  <span class='id delimiter'>delimiter</span>    <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delimiter</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>-</span><span class='tstring_end'>&quot;</span></span>
  <span class='id extension'>extension</span>    <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:extension</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id strip'>strip</span> <span class='op'>||</span> <span class='kw'>nil</span>
  <span class='id country_code'>country_code</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:country_code</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>nil</span>

  <span class='id str'>str</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>+</span><span class='embexpr_beg'>#{</span><span class='id country_code'>country_code</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id delimiter'>delimiter</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id country_code'>country_code</span><span class='period'>.</span><span class='id blank?'>blank?</span>
  <span class='id str'>str</span> <span class='op'>&lt;&lt;</span> <span class='kw'>if</span> <span class='id area_code'>area_code</span>
    <span class='id number'>number</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([0-9]{1,3})([0-9]{3})([0-9]{4}$)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(\\1) \\2</span><span class='embexpr_beg'>#{</span><span class='id delimiter'>delimiter</span><span class='rbrace'>}</span><span class='tstring_content'>\\3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id number'>number</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([0-9]{0,3})([0-9]{3})([0-9]{4})$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1</span><span class='embexpr_beg'>#{</span><span class='id delimiter'>delimiter</span><span class='rbrace'>}</span><span class='tstring_content'>\\2</span><span class='embexpr_beg'>#{</span><span class='id delimiter'>delimiter</span><span class='rbrace'>}</span><span class='tstring_content'>\\3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id number'>number</span><span class='period'>.</span><span class='id starts_with?'>starts_with?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id number'>number</span><span class='period'>.</span><span class='id slice!'>slice!</span><span class='lparen'>(</span><span class='int'>1</span><span class='op'>..</span><span class='op'>-</span><span class='int'>1</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id number'>number</span>
  <span class='kw'>end</span>
  <span class='id str'>str</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> x </span><span class='embexpr_beg'>#{</span><span class='id extension'>extension</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='id extension'>extension</span><span class='period'>.</span><span class='id blank?'>blank?</span>
  <span class='id is_number_html_safe'>is_number_html_safe</span> <span class='op'>?</span> <span class='id str'>str</span><span class='period'>.</span><span class='id html_safe'>html_safe</span> <span class='op'>:</span> <span class='id str'>str</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_with_delimiter-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_with_delimiter</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats a <tt>number</tt> with grouped thousands using <tt>delimiter</tt>
(e.g., 12,324). You can customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     - Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;,&#8221;).
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the fractional and
integer digits (defaults to &#8220;.&#8221;).
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='int'>12345678</span><span class='rparen'>)</span>                        <span class='comment'># =&gt; 12,345,678
</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='float'>12345678.05</span><span class='rparen'>)</span>                     <span class='comment'># =&gt; 12,345,678.05
</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='int'>12345678</span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>     <span class='comment'># =&gt; 12.345.678
</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='int'>12345678</span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>     <span class='comment'># =&gt; 12,345,678
</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='float'>12345678.05</span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='symbol'>:fr</span><span class='rparen'>)</span>     <span class='comment'># =&gt; 12 345 678,05
</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='float'>98765432.98</span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>,</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
 <span class='comment'># =&gt; 98 765 432,98</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 189</span>

<span class='kw'>def</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='kw'>begin</span>
    <span class='const'>Float</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'>TypeError</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span> <span class='const'>InvalidNumberError</span><span class='comma'>,</span> <span class='id number'>number</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id number'>number</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span>

  <span class='id parts'>parts</span> <span class='op'>=</span> <span class='id number'>number</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id parts'>parts</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(\d)(?=(\d\d\d)+(?!\d))</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:delimiter</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id parts'>parts</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:separator</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="number_with_precision-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>number_with_precision</strong>(number, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Formats a <tt>number</tt> with the specified level of <tt>:precision</tt>
(e.g., 112.32 has a precision of 2 if <tt>:significant</tt> is
<tt>false</tt>, and 5 if <tt>:significant</tt> is <tt>true</tt>). You can
customize the format in the <tt>options</tt> hash.
</p>
<h4>Options</h4>
<ul>
<li><p>
<tt>:locale</tt>     - Sets the locale to be used for formatting (defaults
to current locale).
</p>
</li>
<li><p>
<tt>:precision</tt>  - Sets the precision of the number (defaults to 3).
</p>
</li>
<li><p>
<tt>:significant</tt>  - If <tt>true</tt>, precision will be the # of
significant_digits. If <tt>false</tt>, the # of fractional digits (defaults
to <tt>false</tt>)
</p>
</li>
<li><p>
<tt>:separator</tt>  - Sets the separator between the fractional and
integer digits (defaults to &#8220;.&#8221;).
</p>
</li>
<li><p>
<tt>:delimiter</tt>  - Sets the thousands delimiter (defaults to
&#8220;&#8221;).
</p>
</li>
<li><p>
<tt>:strip_insignificant_zeros</tt>  - If <tt>true</tt> removes
insignificant zeros after the decimal separator (defaults to
<tt>false</tt>)
</p>
</li>
</ul>
<h4>Examples</h4>
<pre class="code">
 <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>111.2345</span><span class='rparen'>)</span>                                            <span class='comment'># =&gt; 111.235
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>111.2345</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>                           <span class='comment'># =&gt; 111.23
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='int'>13</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>                                 <span class='comment'># =&gt; 13.00000
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>389.32314</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>0</span><span class='rparen'>)</span>                          <span class='comment'># =&gt; 389
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>111.2345</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>                      <span class='comment'># =&gt; 111
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>111.2345</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>     <span class='comment'># =&gt; 100
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='int'>13</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>           <span class='comment'># =&gt; 13.000
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>111.234</span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='symbol'>:fr</span><span class='rparen'>)</span>                             <span class='comment'># =&gt; 111,234
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='int'>13</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='id strip_insignificant_zeros'>strip_insignificant_zeros</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>
 <span class='comment'># =&gt; 13
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>389.32314</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>4</span><span class='comma'>,</span> <span class='symbol'>:significant</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>    <span class='comment'># =&gt; 389.3
</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='float'>1111.2345</span><span class='comma'>,</span> <span class='symbol'>:precision</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:delimiter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
 <span class='comment'># =&gt; 1.111,23</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/number_helper.rb', line 237</span>

<span class='kw'>def</span> <span class='id number_with_precision'>number_with_precision</span><span class='lparen'>(</span><span class='id number'>number</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id symbolize_keys!'>symbolize_keys!</span>

  <span class='id number'>number</span> <span class='op'>=</span> <span class='kw'>begin</span>
    <span class='const'>Float</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span>
  <span class='kw'>rescue</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='const'>TypeError</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:raise</span><span class='rbracket'>]</span>
      <span class='id raise'>raise</span> <span class='const'>InvalidNumberError</span><span class='comma'>,</span> <span class='id number'>number</span>
    <span class='kw'>else</span>
      <span class='kw'>return</span> <span class='id number'>number</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='id defaults'>defaults</span>           <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id precision_defaults'>precision_defaults</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id translate'>translate</span><span class='lparen'>(</span><span class='symbol'>:number.precision.format</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:locale</span> <span class='op'>=&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:default</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id defaults'>defaults</span>           <span class='op'>=</span> <span class='id defaults'>defaults</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='id precision_defaults'>precision_defaults</span><span class='rparen'>)</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge'>reverse_merge</span><span class='lparen'>(</span><span class='id defaults'>defaults</span><span class='rparen'>)</span>  <span class='comment'># Allow the user to unset default values: Eg.: :significant =&gt; false
</span>  <span class='id precision'>precision</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='symbol'>:precision</span>
  <span class='id significant'>significant</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='symbol'>:significant</span>
  <span class='id strip_insignificant_zeros'>strip_insignificant_zeros</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span> <span class='symbol'>:strip_insignificant_zeros</span>

  <span class='kw'>if</span> <span class='id significant'>significant</span> <span class='kw'>and</span> <span class='id precision'>precision</span> <span class='op'>&gt;</span> <span class='int'>0</span>
    <span class='kw'>if</span> <span class='id number'>number</span> <span class='op'>==</span> <span class='int'>0</span>
      <span class='id digits'>digits</span><span class='comma'>,</span> <span class='id rounded_number'>rounded_number</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span>
    <span class='kw'>else</span>
      <span class='id digits'>digits</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Math</span><span class='period'>.</span><span class='id log10'>log10</span><span class='lparen'>(</span><span class='id number'>number</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='int'>1</span><span class='rparen'>)</span><span class='period'>.</span><span class='id floor'>floor</span>
      <span class='id rounded_number'>rounded_number</span> <span class='op'>=</span> <span class='const'>BigDecimal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id number'>number</span> <span class='op'>/</span> <span class='int'>10</span> <span class='op'>**</span> <span class='lparen'>(</span><span class='id digits'>digits</span> <span class='op'>-</span> <span class='id precision'>precision</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id round'>round</span><span class='period'>.</span><span class='id to_f'>to_f</span> <span class='op'>*</span> <span class='int'>10</span> <span class='op'>**</span> <span class='lparen'>(</span><span class='id digits'>digits</span> <span class='op'>-</span> <span class='id precision'>precision</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id precision'>precision</span> <span class='op'>=</span> <span class='id precision'>precision</span> <span class='op'>-</span> <span class='id digits'>digits</span>
    <span class='id precision'>precision</span> <span class='op'>=</span> <span class='id precision'>precision</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='id precision'>precision</span> <span class='op'>:</span> <span class='int'>0</span>  <span class='comment'>#don't let it be negative
</span>  <span class='kw'>else</span>
    <span class='id rounded_number'>rounded_number</span> <span class='op'>=</span> <span class='const'>BigDecimal</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id number'>number</span> <span class='op'>*</span> <span class='lparen'>(</span><span class='int'>10</span> <span class='op'>**</span> <span class='id precision'>precision</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span><span class='period'>.</span><span class='id round'>round</span><span class='period'>.</span><span class='id to_f'>to_f</span> <span class='op'>/</span> <span class='int'>10</span> <span class='op'>**</span> <span class='id precision'>precision</span>
  <span class='kw'>end</span>
  <span class='id formatted_number'>formatted_number</span> <span class='op'>=</span> <span class='id number_with_delimiter'>number_with_delimiter</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%01.</span><span class='embexpr_beg'>#{</span><span class='id precision'>precision</span><span class='rbrace'>}</span><span class='tstring_content'>f</span><span class='tstring_end'>&quot;</span></span> <span class='op'>%</span> <span class='id rounded_number'>rounded_number</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id strip_insignificant_zeros'>strip_insignificant_zeros</span>
    <span class='id escaped_separator'>escaped_separator</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:separator</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id formatted_number'>formatted_number</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id escaped_separator'>escaped_separator</span><span class='rbrace'>}</span><span class='tstring_content'>)(\d*[1-9])?0+\z</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\1\2</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='embexpr_beg'>#{</span><span class='id escaped_separator'>escaped_separator</span><span class='rbrace'>}</span><span class='tstring_content'>\z</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
  <span class='kw'>else</span>
    <span class='id formatted_number'>formatted_number</span>
  <span class='kw'>end</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:58 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>