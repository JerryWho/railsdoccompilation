<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionView::Helpers::PrototypeHelper</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (P)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">PrototypeHelper</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionView::Helpers::PrototypeHelper
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">ActionView::Helpers</a></span>, <span class='object_link'><a href="JavaScriptHelper.html" title="ActionView::Helpers::JavaScriptHelper (module)">JavaScriptHelper</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">actionpack/lib/action_view/helpers/prototype_helper.rb<span class="defines">,<br />
  actionpack/lib/action_view/helpers/scriptaculous_helper.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
<a href="http://www.prototypejs.org/">Prototype</a> is a JavaScript library
that provides <a
href="http://en.wikipedia.org/wiki/Document_Object_Model">DOM</a>
manipulation, <a
href="http://www.adaptivepath.com/publications/essays/archives/000385.php">Ajax</a>
functionality, and more traditional object-oriented facilities for
JavaScript. This module provides a set of helpers to make it more
convenient to call functions from Prototype using Rails, including
functionality to call remote Rails methods (that is, making a background
request to a Rails action) using Ajax. This means that you can call actions
in your controllers without reloading the page, but still update certain
parts of it using injections into the DOM. A common use case is having a
form that adds a new element to a list without reloading the page or
updating a shopping cart total when a new item is added.
</p>
<h2>Usage</h2>
<p>
To be able to use these helpers, you must first include the Prototype
JavaScript framework in your pages.
</p>
<pre class="code">
 <span class='id javascript_include_tag'>javascript_include_tag</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>prototype</span><span class='tstring_end'>'</span></span>
</pre>
<p>
(See the documentation for ActionView::Helpers::JavaScriptHelper for more
information on including this and other JavaScript files in your Rails
templates.)
</p>
<p>
Now you&#8217;re ready to call a remote action either through a link&#8230;
</p>
<pre class="code">
 <span class='id link_to_remote'>link_to_remote</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Add to cart</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
   <span class='symbol'>:url</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:action</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>add</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:id</span> <span class='op'>=&gt;</span> <span class='id product'>product</span><span class='period'>.</span><span class='id id'>id</span> <span class='rbrace'>}</span><span class='comma'>,</span>
   <span class='symbol'>:update</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span> <span class='symbol'>:success</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cart</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:failure</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>error</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
</pre>
<p>
&#8230;through a form&#8230;
</p>
<pre class="code">
 &lt;%= form_remote_tag :url =&gt; '/shipping' do -%&gt;
   &lt;div&gt;&lt;%= submit_tag 'Recalculate Shipping' %&gt;&lt;/div&gt;
 &lt;% end -%&gt;
</pre>
<p>
As you can see, there are numerous ways to use Prototype&#8217;s Ajax
functions (and actually more than are listed here); check out the
documentation for each method to find out more about its usage and options.
</p>
<h3>Common Options</h3>
<p>
See link_to_remote for documentation of options common to all Ajax helpers;
any of the options specified by link_to_remote can be used by the other
helpers.
</p>
<h2>Designing your Rails actions for Ajax</h2>
<p>
When building your action handlers (that is, the Rails actions that receive
your background requests), it&#8217;s important to remember a few things. 
First, whatever your action would normally return to the browser, it will
return to the Ajax call.  As such, you typically don&#8217;t want to render
with a layout.  This call will cause the layout to be transmitted back to
your page, and, if you have a full HTML/CSS, will likely mess a lot of
things up. You can turn the layout off on particular actions by doing the
following:
</p>
<pre class="code">
 <span class='kw'>class</span> <span class='const'>SiteController</span> <span class='op'>&lt;</span> <span class='const'>ActionController</span><span class='op'>::</span><span class='const'>Base</span>
   <span class='id layout'>layout</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>standard</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:except</span> <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='symbol'>:ajax_method</span><span class='comma'>,</span> <span class='symbol'>:more_ajax</span><span class='comma'>,</span> <span class='symbol'>:another_ajax</span><span class='rbracket'>]</span>
 <span class='kw'>end</span>
</pre>
<p>
Optionally, you could do this in the method you wish to lack a layout:
</p>
<pre class="code">
 <span class='id render'>render</span> <span class='symbol'>:layout</span> <span class='op'>=&gt;</span> <span class='kw'>false</span>
</pre>
<p>
You can tell the type of request from within your action using the
<tt>request.xhr?</tt> (XmlHttpRequest, the method that Ajax uses to make
background requests) method.
</p>
<pre class="code">
 <span class='kw'>def</span> <span class='id name'>name</span>
   <span class='comment'># Is this an XmlHttpRequest request?
</span>   <span class='kw'>if</span> <span class='lparen'>(</span><span class='id request'>request</span><span class='period'>.</span><span class='id xhr?'>xhr?</span><span class='rparen'>)</span>
     <span class='id render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='ivar'>@name</span><span class='period'>.</span><span class='id to_s'>to_s</span>
   <span class='kw'>else</span>
     <span class='comment'># No?  Then render an action.
</span>     <span class='id render'>render</span> <span class='symbol'>:action</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>view_attribute</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:attr</span> <span class='op'>=&gt;</span> <span class='ivar'>@name</span>
   <span class='kw'>end</span>
 <span class='kw'>end</span>
</pre>
<p>
The else clause can be left off and the current action will render with
full layout and template. An extension to this solution was posted to Ryan
Heneise&#8217;s blog at <a
href=""http://www.artofmission.com/"">ArtOfMission</a>.
</p>
<pre class="code">
 <span class='id layout'>layout</span> <span class='id proc'>proc</span><span class='lbrace'>{</span> <span class='op'>|</span><span class='id c'>c</span><span class='op'>|</span> <span class='id c'>c</span><span class='period'>.</span><span class='id request'>request</span><span class='period'>.</span><span class='id xhr?'>xhr?</span> <span class='op'>?</span> <span class='kw'>false</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>application</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
</pre>
<p>
Dropping this in your ApplicationController turns the layout off for every
request that is an &#8220;xhr&#8221; request.
</p>
<p>
If you are just returning a little data or don&#8217;t want to build a
template for your output, you may opt to simply render text output, like
this:
</p>
<pre class="code">
 <span class='id render'>render</span> <span class='symbol'>:text</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Return this from my method!</span><span class='tstring_end'>'</span></span>
</pre>
<p>
Since whatever the method returns is injected into the DOM, this will
simply inject some text (or HTML, if you tell it to).  This is usually how
small updates, such updating a cart total or a file count, are handled.
</p>
<h2>Updating multiple elements</h2>
<p>
See JavaScriptGenerator for information on updating multiple elements on
the page in an Ajax response.
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="PrototypeHelper/JavaScriptGenerator.html" title="ActionView::Helpers::PrototypeHelper::JavaScriptGenerator (class)">JavaScriptGenerator</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="CALLBACKS-constant" class="">CALLBACKS =
          
        </dt>
        <dd><pre class="code"><span class='const'>Set</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='symbol'>:create</span><span class='comma'>,</span> <span class='symbol'>:uninitialized</span><span class='comma'>,</span> <span class='symbol'>:loading</span><span class='comma'>,</span> <span class='symbol'>:loaded</span><span class='comma'>,</span>
<span class='symbol'>:interactive</span><span class='comma'>,</span> <span class='symbol'>:complete</span><span class='comma'>,</span> <span class='symbol'>:failure</span><span class='comma'>,</span> <span class='symbol'>:success</span> <span class='rbracket'>]</span> <span class='op'>+</span>
<span class='lparen'>(</span><span class='int'>100</span><span class='op'>..</span><span class='int'>599</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_a'>to_a</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="AJAX_OPTIONS-constant" class="">AJAX_OPTIONS =
          
        </dt>
        <dd><pre class="code"><span class='const'>Set</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='symbol'>:before</span><span class='comma'>,</span> <span class='symbol'>:after</span><span class='comma'>,</span> <span class='symbol'>:condition</span><span class='comma'>,</span> <span class='symbol'>:url</span><span class='comma'>,</span>
<span class='symbol'>:asynchronous</span><span class='comma'>,</span> <span class='symbol'>:method</span><span class='comma'>,</span> <span class='symbol'>:insertion</span><span class='comma'>,</span> <span class='symbol'>:position</span><span class='comma'>,</span>
<span class='symbol'>:form</span><span class='comma'>,</span> <span class='symbol'>:with</span><span class='comma'>,</span> <span class='symbol'>:update</span><span class='comma'>,</span> <span class='symbol'>:script</span><span class='comma'>,</span> <span class='symbol'>:type</span> <span class='rbracket'>]</span><span class='rparen'>)</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='const'>CALLBACKS</span><span class='rparen'>)</span></pre></dd>
      
    </dl>
  



  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remote_function-instance_method" title="#remote_function (instance method)">- (Object) <strong>remote_function</strong>(options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the JavaScript needed for a remote function.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_page-instance_method" title="#update_page (instance method)">- (Object) <strong>update_page</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Yields a JavaScriptGenerator and returns the generated JavaScript code.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_page_tag-instance_method" title="#update_page_tag (instance method)">- (Object) <strong>update_page_tag</strong>(html_options = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Works like update_page but wraps the generated JavaScript in a <script>
tag.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="remote_function-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>remote_function</strong>(options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the JavaScript needed for a remote function. See the link_to_remote
documentation at <a
href="http://github.com/rails/prototype_legacy_helper">github.com/rails/prototype_legacy_helper</a>
as it takes the same arguments.
</p>
<p>
Example:
</p>
<pre class="code">
  # Generates: &lt;select id=&quot;options&quot; onchange=&quot;new Ajax.Updater('options',
  # '/testing/update_options', {asynchronous:true, evalScripts:true})&quot;&gt;
  &lt;select id=&quot;options&quot; onchange=&quot;&lt;%= remote_function(:update =&gt; &quot;options&quot;,
      :url =&gt; { :action =&gt; :update_options }) %&gt;&quot;&gt;
    &lt;option value=&quot;0&quot;&gt;Hello&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;World&lt;/option&gt;
  &lt;/select&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/prototype_helper.rb', line 115</span>

<span class='kw'>def</span> <span class='id remote_function'>remote_function</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id javascript_options'>javascript_options</span> <span class='op'>=</span> <span class='id options_for_ajax'>options_for_ajax</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>

  <span class='id update'>update</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id update'>update</span>  <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='id update'>update</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>success:'</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:success</span><span class='rbracket'>]</span>
    <span class='id update'>update</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>failure:'</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:failure</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:failure</span><span class='rbracket'>]</span>
    <span class='id update'>update</span>  <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='id update'>update</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>,</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>}</span><span class='tstring_end'>'</span></span>
  <span class='kw'>elsif</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span>
    <span class='id update'>update</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>'</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:update</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='id function'>function</span> <span class='op'>=</span> <span class='id update'>update</span><span class='period'>.</span><span class='id empty?'>empty?</span> <span class='op'>?</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new Ajax.Request(</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new Ajax.Updater(</span><span class='embexpr_beg'>#{</span><span class='id update'>update</span><span class='rbrace'>}</span><span class='tstring_content'>, </span><span class='tstring_end'>&quot;</span></span>

  <span class='id url_options'>url_options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:url</span><span class='rbracket'>]</span>
  <span class='id url_options'>url_options</span> <span class='op'>=</span> <span class='id url_options'>url_options</span><span class='period'>.</span><span class='id merge'>merge</span><span class='lparen'>(</span><span class='symbol'>:escape</span> <span class='op'>=&gt;</span> <span class='kw'>false</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id url_options'>url_options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
  <span class='id function'>function</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>'</span><span class='embexpr_beg'>#{</span><span class='id html_escape'>html_escape</span><span class='lparen'>(</span><span class='id escape_javascript'>escape_javascript</span><span class='lparen'>(</span><span class='id url_for'>url_for</span><span class='lparen'>(</span><span class='id url_options'>url_options</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
  <span class='id function'>function</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>, </span><span class='embexpr_beg'>#{</span><span class='id javascript_options'>javascript_options</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>

  <span class='id function'>function</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:before</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>; </span><span class='embexpr_beg'>#{</span><span class='id function'>function</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:before</span><span class='rbracket'>]</span>
  <span class='id function'>function</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id function'>function</span><span class='rbrace'>}</span><span class='tstring_content'>; </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:after</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:after</span><span class='rbracket'>]</span>
  <span class='id function'>function</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if (</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:condition</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>) { </span><span class='embexpr_beg'>#{</span><span class='id function'>function</span><span class='rbrace'>}</span><span class='tstring_content'>; }</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:condition</span><span class='rbracket'>]</span>
  <span class='id function'>function</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if (confirm('</span><span class='embexpr_beg'>#{</span><span class='id escape_javascript'>escape_javascript</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:confirm</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>')) { </span><span class='embexpr_beg'>#{</span><span class='id function'>function</span><span class='rbrace'>}</span><span class='tstring_content'>; }</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:confirm</span><span class='rbracket'>]</span>

  <span class='kw'>return</span> <span class='id function'>function</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_page-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_page</strong>(&amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Yields a JavaScriptGenerator and returns the generated JavaScript code. Use
this to update multiple elements on a page in an Ajax response. See
JavaScriptGenerator for more information.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id update_page'>update_page</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id page'>page</span><span class='op'>|</span>
    <span class='id page'>page</span><span class='period'>.</span><span class='id hide'>hide</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>spinner</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


581
582
583</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/prototype_helper.rb', line 581</span>

<span class='kw'>def</span> <span class='id update_page'>update_page</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='const'>JavaScriptGenerator</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id view_context'>view_context</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_page_tag-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_page_tag</strong>(html_options = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Works like update_page but wraps the generated JavaScript in a <script>
tag. Use this to include generated JavaScript in an ERb template. See
JavaScriptGenerator for more information.
</p>
<p>
<tt>html_options</tt> may be a hash of <script> attributes to be passed to
ActionView::Helpers::JavaScriptHelper#javascript_tag.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


591
592
593</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/prototype_helper.rb', line 591</span>

<span class='kw'>def</span> <span class='id update_page_tag'>update_page_tag</span><span class='lparen'>(</span><span class='id html_options'>html_options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id javascript_tag'>javascript_tag</span> <span class='id update_page'>update_page</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id html_options'>html_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:04:09 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>