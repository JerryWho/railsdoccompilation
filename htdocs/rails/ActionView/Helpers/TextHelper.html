<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionView::Helpers::TextHelper</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">Helpers</a></span></span>
     &raquo; 
    <span class="title">TextHelper</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionView::Helpers::TextHelper
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1"><span class='object_link'><a href="../../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></dd>
      
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="SanitizeHelper.html" title="ActionView::Helpers::SanitizeHelper (module)">SanitizeHelper</a></span></dd>
      
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../Helpers.html" title="ActionView::Helpers (module)">ActionView::Helpers</a></span>, <span class='object_link'><a href="FormOptionsHelper.html" title="ActionView::Helpers::FormOptionsHelper (module)">FormOptionsHelper</a></span>, <span class='object_link'><a href="FormTagHelper.html" title="ActionView::Helpers::FormTagHelper (module)">FormTagHelper</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">actionpack/lib/action_view/helpers/text_helper.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
The TextHelper module provides a set of methods for filtering, formatting
and transforming strings, which can reduce the amount of inline Ruby code
in your views. These helper methods extend Action View making them callable
within your template files.
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="TextHelper/Cycle.html" title="ActionView::Helpers::TextHelper::Cycle (class)">Cycle</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="AUTO_LINK_RE-constant" class="">AUTO_LINK_RE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>%r{</span><span class='tstring_content'>
  (?: ([\w+.:-]+:)// | www\. )
  [^\s&lt;]+
</span><span class='regexp_end'>}x</span></span></pre></dd>
      
        <dt id="AUTO_LINK_CRE-constant" class="">AUTO_LINK_CRE =
          <div class="docstring">
  <div class="discussion">
    <p>
regexps for determining context, used high-volume
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;[^&gt;]+$</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^[^&gt;]*&gt;</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;a\b.*?&gt;</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/a&gt;</span><span class='regexp_end'>/i</span></span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="AUTO_EMAIL_RE-constant" class="">AUTO_EMAIL_RE =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[\w.!#\$%+-]+@[\w-]+(?:\.[\w-]+)+</span><span class='regexp_end'>/</span></span></pre></dd>
      
        <dt id="BRACKETS-constant" class="">BRACKETS =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>]</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>[</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>)</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>(</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>}</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>{</span><span class='tstring_end'>'</span></span> <span class='rbrace'>}</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#auto_link-instance_method" title="#auto_link (instance method)">- (Object) <strong>auto_link</strong>(text, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Turns all URLs and e-mail addresses into clickable links.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#concat-instance_method" title="#concat (instance method)">- (Object) <strong>concat</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The preferred method of outputting text in your views is to use the <%=
&#8220;text&#8221; %> eRuby syntax.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current_cycle-instance_method" title="#current_cycle (instance method)">- (Object) <strong>current_cycle</strong>(name = &quot;default&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the current cycle string after a cycle has been started.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cycle-instance_method" title="#cycle (instance method)">- (Object) <strong>cycle</strong>(first_value, *values) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a Cycle object whose <em>to_s</em> method cycles through elements
of an array every time it is called.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#excerpt-instance_method" title="#excerpt (instance method)">- (Object) <strong>excerpt</strong>(text, phrase, *args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Extracts an excerpt from <tt>text</tt> that matches the first instance of
<tt>phrase</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#highlight-instance_method" title="#highlight (instance method)">- (Object) <strong>highlight</strong>(text, phrases, *args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Highlights one or more <tt>phrases</tt> everywhere in <tt>text</tt> by
inserting it into a <tt>:highlighter</tt> string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pluralize-instance_method" title="#pluralize (instance method)">- (Object) <strong>pluralize</strong>(count, singular, plural = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attempts to pluralize the <tt>singular</tt> word unless <tt>count</tt> is
1.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset_cycle-instance_method" title="#reset_cycle (instance method)">- (Object) <strong>reset_cycle</strong>(name = &quot;default&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Resets a cycle so that it starts from the first element the next time it is
called.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_concat-instance_method" title="#safe_concat (instance method)">- (Object) <strong>safe_concat</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#simple_format-instance_method" title="#simple_format (instance method)">- (Object) <strong>simple_format</strong>(text, html_options = {}, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>text</tt> transformed into HTML using simple formatting rules.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#truncate-instance_method" title="#truncate (instance method)">- (Object) <strong>truncate</strong>(text, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Truncates a given <tt>text</tt> after a given <tt>:length</tt> if
<tt>text</tt> is longer than <tt>:length</tt> (defaults to 30).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#word_wrap-instance_method" title="#word_wrap (instance method)">- (Object) <strong>word_wrap</strong>(text, *args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Wraps the <tt>text</tt> into lines no longer than <tt>line_width</tt>
width.
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../../ActiveSupport/Concern.html" title="ActiveSupport::Concern (module)">ActiveSupport::Concern</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../../ActiveSupport/Concern.html#append_features-instance_method" title="ActiveSupport::Concern#append_features (method)">append_features</a></span>, <span class='object_link'><a href="../../ActiveSupport/Concern.html#extended-class_method" title="ActiveSupport::Concern.extended (method)">extended</a></span>, <span class='object_link'><a href="../../ActiveSupport/Concern.html#included-instance_method" title="ActiveSupport::Concern#included (method)">included</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="SanitizeHelper.html" title="ActionView::Helpers::SanitizeHelper (module)">SanitizeHelper</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="SanitizeHelper.html#sanitize-instance_method" title="ActionView::Helpers::SanitizeHelper#sanitize (method)">#sanitize</a></span>, <span class='object_link'><a href="SanitizeHelper.html#sanitize_css-instance_method" title="ActionView::Helpers::SanitizeHelper#sanitize_css (method)">#sanitize_css</a></span>, <span class='object_link'><a href="SanitizeHelper.html#strip_links-instance_method" title="ActionView::Helpers::SanitizeHelper#strip_links (method)">#strip_links</a></span>, <span class='object_link'><a href="SanitizeHelper.html#strip_tags-instance_method" title="ActionView::Helpers::SanitizeHelper#strip_tags (method)">#strip_tags</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="auto_link-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>auto_link</strong>(text, *args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Turns all URLs and e-mail addresses into clickable links. The
<tt>:link</tt> option will limit what should be linked. You can add HTML
attributes to the links using <tt>:html</tt>. Possible values for
<tt>:link</tt> are <tt>:all</tt> (default), <tt>:email_addresses</tt>, and
<tt>:urls</tt>. If a block is given, each URL and e-mail address is yielded
and the result is used as the link text.
</p>
<h4>Examples</h4>
<pre class="code">
  auto_link(&quot;Go to http://www.rubyonrails.org and say hello to david@loudthinking.com&quot;)
  # =&gt; &quot;Go to &lt;a href=\&quot;http://www.rubyonrails.org\&quot;&gt;http://www.rubyonrails.org&lt;/a&gt; and
  #     say hello to &lt;a href=\&quot;mailto:david@loudthinking.com\&quot;&gt;david@loudthinking.com&lt;/a&gt;&quot;

  auto_link(&quot;Visit http://www.loudthinking.com/ or e-mail david@loudthinking.com&quot;, :link =&gt; :urls)
  # =&gt; &quot;Visit &lt;a href=\&quot;http://www.loudthinking.com/\&quot;&gt;http://www.loudthinking.com/&lt;/a&gt;
  #     or e-mail david@loudthinking.com&quot;

  auto_link(&quot;Visit http://www.loudthinking.com/ or e-mail david@loudthinking.com&quot;, :link =&gt; :email_addresses)
  # =&gt; &quot;Visit http://www.loudthinking.com/ or e-mail &lt;a href=\&quot;mailto:david@loudthinking.com\&quot;&gt;david@loudthinking.com&lt;/a&gt;&quot;

  post_body = &quot;Welcome to my new blog at http://www.myblog.com/.  Please e-mail me at me@email.com.&quot;
  auto_link(post_body, :html =&gt; { :target =&gt; '_blank' }) do |text|
    truncate(text, 15)
  end
  # =&gt; &quot;Welcome to my new blog at &lt;a href=\&quot;http://www.myblog.com/\&quot; target=\&quot;_blank\&quot;&gt;http://www.m...&lt;/a&gt;.
        Please e-mail me at &lt;a href=\&quot;mailto:me@email.com\&quot;&gt;me@email.com&lt;/a&gt;.&quot;
</pre>
<p>
You can still use <tt>auto_link</tt> with the old API that accepts the
<tt>link</tt> as its optional second parameter and the
<tt>html_options</tt> hash as its optional third parameter:
</p>
<pre class="code">
  post_body = &quot;Welcome to my new blog at http://www.myblog.com/. Please e-mail me at me@email.com.&quot;
  auto_link(post_body, :urls)     # =&gt; Once upon\na time
  # =&gt; &quot;Welcome to my new blog at &lt;a href=\&quot;http://www.myblog.com/\&quot;&gt;http://www.myblog.com&lt;/a&gt;.
        Please e-mail me at me@email.com.&quot;

  auto_link(post_body, :all, :target =&gt; &quot;_blank&quot;)     # =&gt; Once upon\na time
  # =&gt; &quot;Welcome to my new blog at &lt;a href=\&quot;http://www.myblog.com/\&quot; target=\&quot;_blank\&quot;&gt;http://www.myblog.com&lt;/a&gt;.
        Please e-mail me at &lt;a href=\&quot;mailto:me@email.com\&quot;&gt;me@email.com&lt;/a&gt;.&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 283</span>

<span class='kw'>def</span> <span class='id auto_link'>auto_link</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='comment'>#link = :all, html = {}, &amp;block)
</span>  <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id html_safe'>html_safe</span> <span class='kw'>if</span> <span class='id text'>text</span><span class='period'>.</span><span class='id blank?'>blank?</span>

  <span class='id options'>options</span> <span class='op'>=</span> <span class='id args'>args</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>2</span> <span class='op'>?</span> <span class='lbrace'>{</span><span class='rbrace'>}</span> <span class='op'>:</span> <span class='id args'>args</span><span class='period'>.</span><span class='id extract_options!'>extract_options!</span> <span class='comment'># this is necessary because the old auto_link API has a Hash as its last parameter
</span>  <span class='kw'>unless</span> <span class='id args'>args</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:link</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:all</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge!'>reverse_merge!</span><span class='lparen'>(</span><span class='symbol'>:link</span> <span class='op'>=&gt;</span> <span class='symbol'>:all</span><span class='comma'>,</span> <span class='symbol'>:html</span> <span class='op'>=&gt;</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>

  <span class='kw'>case</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:link</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
    <span class='kw'>when</span> <span class='symbol'>:all</span>                         <span class='kw'>then</span> <span class='id auto_link_email_addresses'>auto_link_email_addresses</span><span class='lparen'>(</span><span class='id auto_link_urls'>auto_link_urls</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:email_addresses</span>             <span class='kw'>then</span> <span class='id auto_link_email_addresses'>auto_link_email_addresses</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>when</span> <span class='symbol'>:urls</span>                        <span class='kw'>then</span> <span class='id auto_link_urls'>auto_link_urls</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:html</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="concat-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>concat</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The preferred method of outputting text in your views is to use the <%=
&#8220;text&#8221; %> eRuby syntax. The regular <em>puts</em> and
<em>print</em> methods do not operate as expected in an eRuby code block.
If you absolutely must output text within a non-output code block (i.e., <%
%>), you can use the concat method.
</p>
<h4>Examples</h4>
<pre class="code">
  &lt;%
      concat &quot;hello&quot;
      # is the equivalent of &lt;%= &quot;hello&quot; %&gt;

      if logged_in
        concat &quot;Logged in!&quot;
      else
        concat link_to('login', :action =&gt; login)
      end
      # will either display &quot;Logged in!&quot; or a login link
  %&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 33</span>

<span class='kw'>def</span> <span class='id concat'>concat</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id output_buffer'>output_buffer</span> <span class='op'>&lt;&lt;</span> <span class='id string'>string</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="current_cycle-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>current_cycle</strong>(name = &quot;default&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the current cycle string after a cycle has been started. Useful for
complex table highlighting or any other design need which requires the
current cycle string in more than one place.
</p>
<h4>Example</h4>
<pre class="code">
  # Alternate background colors
  @items = [1,2,3,4]
  &lt;% @items.each do |item| %&gt;
    &lt;div style=&quot;background-color:&lt;%= cycle(&quot;red&quot;,&quot;white&quot;,&quot;blue&quot;) %&gt;&quot;&gt;
      &lt;span style=&quot;background-color:&lt;%= current_cycle %&gt;&quot;&gt;&lt;%= item %&gt;&lt;/span&gt;
    &lt;/div&gt;
  &lt;% end %&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 366</span>

<span class='kw'>def</span> <span class='id current_cycle'>current_cycle</span><span class='lparen'>(</span><span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id cycle'>cycle</span> <span class='op'>=</span> <span class='id get_cycle'>get_cycle</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id current_value'>current_value</span> <span class='kw'>unless</span> <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cycle-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cycle</strong>(first_value, *values) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a Cycle object whose <em>to_s</em> method cycles through elements
of an array every time it is called. This can be used for example, to
alternate classes for table rows.  You can use named cycles to allow
nesting in loops. Passing a Hash as the last parameter with a
<tt>:name</tt> key will create a named cycle. The default name for a cycle
without a <tt>:name</tt> key is <tt>&quot;default&quot;</tt>. You can
manually reset a cycle by calling reset_cycle and passing the name of the
cycle. The current cycle string can be obtained anytime using the
current_cycle method.
</p>
<h4>Examples</h4>
<pre class="code">
  # Alternate CSS classes for even and odd numbers...
  @items = [1,2,3,4]
  &lt;table&gt;
  &lt;% @items.each do |item| %&gt;
    &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;
      &lt;td&gt;item&lt;/td&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
  &lt;/table&gt;

  # Cycle CSS classes for rows, and text colors for values within each row
  @items = x = [{:first =&gt; 'Robert', :middle =&gt; 'Daniel', :last =&gt; 'James'},
               {:first =&gt; 'Emily', :middle =&gt; 'Shannon', :maiden =&gt; 'Pike', :last =&gt; 'Hicks'},
              {:first =&gt; 'June', :middle =&gt; 'Dae', :last =&gt; 'Jones'}]
  &lt;% @items.each do |item| %&gt;
    &lt;tr class=&quot;&lt;%= cycle(&quot;odd&quot;, &quot;even&quot;, :name =&gt; &quot;row_class&quot;) -%&gt;&quot;&gt;
      &lt;td&gt;
        &lt;% item.values.each do |value| %&gt;
          &lt;%# Create a named cycle &quot;colors&quot; %&gt;
          &lt;span style=&quot;color:&lt;%= cycle(&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, :name =&gt; &quot;colors&quot;) -%&gt;&quot;&gt;
            &lt;%= value %&gt;
          &lt;/span&gt;
        &lt;% end %&gt;
        &lt;% reset_cycle(&quot;colors&quot;) %&gt;
      &lt;/td&gt;
   &lt;/tr&gt;
 &lt;% end %&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340
341
342
343
344
345
346
347
348
349
350
351
352</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 338</span>

<span class='kw'>def</span> <span class='id cycle'>cycle</span><span class='lparen'>(</span><span class='id first_value'>first_value</span><span class='comma'>,</span> <span class='op'>*</span><span class='id values'>values</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id values'>values</span><span class='period'>.</span><span class='id last'>last</span><span class='period'>.</span><span class='id instance_of?'>instance_of?</span> <span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='id params'>params</span> <span class='op'>=</span> <span class='id values'>values</span><span class='period'>.</span><span class='id pop'>pop</span>
    <span class='id name'>name</span> <span class='op'>=</span> <span class='id params'>params</span><span class='lbracket'>[</span><span class='symbol'>:name</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id values'>values</span><span class='period'>.</span><span class='id unshift'>unshift</span><span class='lparen'>(</span><span class='id first_value'>first_value</span><span class='rparen'>)</span>

  <span class='id cycle'>cycle</span> <span class='op'>=</span> <span class='id get_cycle'>get_cycle</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='lparen'>(</span><span class='id cycle'>cycle</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='op'>||</span> <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id values'>values</span> <span class='op'>!=</span> <span class='id values'>values</span><span class='rparen'>)</span>
    <span class='id cycle'>cycle</span> <span class='op'>=</span> <span class='id set_cycle'>set_cycle</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='const'>Cycle</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id values'>values</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id to_s'>to_s</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="excerpt-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>excerpt</strong>(text, phrase, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Extracts an excerpt from <tt>text</tt> that matches the first instance of
<tt>phrase</tt>. The <tt>:radius</tt> option expands the excerpt on each
side of the first occurrence of <tt>phrase</tt> by the number of characters
defined in <tt>:radius</tt> (which defaults to 100). If the excerpt radius
overflows the beginning or end of the <tt>text</tt>, then the
<tt>:omission</tt> option (which defaults to &#8220;&#8230;&#8221;) will be
prepended/appended accordingly. The resulting string will be stripped in
any case. If the <tt>phrase</tt> isn&#8217;t found, nil is returned.
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>an</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:radius</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; ...s is an exam...
</span>
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>is</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:radius</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; This is a...
</span>
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>is</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; This is an example
</span>
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This next thing is an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ex</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:radius</span> <span class='op'>=&gt;</span> <span class='int'>2</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; ...next...
</span>
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is also an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>an</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:radius</span> <span class='op'>=&gt;</span> <span class='int'>8</span><span class='comma'>,</span> <span class='symbol'>:omission</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;chop&gt; </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &lt;chop&gt; is also an example
</span></pre>
<p>
You can still use <tt>excerpt</tt> with the old API that accepts the
<tt>radius</tt> as its optional third and the <tt>ellipsis</tt> as its
optional forth parameter:
</p>
<pre class="code">
  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>an</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>5</span><span class='rparen'>)</span>                   <span class='comment'># =&gt; ...s is an exam...
</span>  <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is also an example</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>an</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>8</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;chop&gt; </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; &lt;chop&gt; is also an example</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 136</span>

<span class='kw'>def</span> <span class='id excerpt'>excerpt</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id phrase'>phrase</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id args'>args</span><span class='period'>.</span><span class='id extract_options!'>extract_options!</span>
  <span class='kw'>unless</span> <span class='id args'>args</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:radius</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>100</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:omission</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge!'>reverse_merge!</span><span class='lparen'>(</span><span class='symbol'>:radius</span> <span class='op'>=&gt;</span> <span class='int'>100</span><span class='comma'>,</span> <span class='symbol'>:omission</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='id text'>text</span> <span class='op'>&amp;&amp;</span> <span class='id phrase'>phrase</span>
    <span class='id phrase'>phrase</span> <span class='op'>=</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id phrase'>phrase</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id found_pos'>found_pos</span> <span class='op'>=</span> <span class='id text'>text</span><span class='period'>.</span><span class='id mb_chars'>mb_chars</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id phrase'>phrase</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='regexp_end'>/i</span></span>
      <span class='id start_pos'>start_pos</span> <span class='op'>=</span> <span class='lbracket'>[</span> <span class='id found_pos'>found_pos</span> <span class='op'>-</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:radius</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='int'>0</span> <span class='rbracket'>]</span><span class='period'>.</span><span class='id max'>max</span>
      <span class='id end_pos'>end_pos</span>   <span class='op'>=</span> <span class='lbracket'>[</span> <span class='lbracket'>[</span> <span class='id found_pos'>found_pos</span> <span class='op'>+</span> <span class='id phrase'>phrase</span><span class='period'>.</span><span class='id mb_chars'>mb_chars</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>+</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:radius</span><span class='rbracket'>]</span> <span class='op'>-</span> <span class='int'>1</span><span class='comma'>,</span> <span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id max'>max</span><span class='comma'>,</span> <span class='id text'>text</span><span class='period'>.</span><span class='id mb_chars'>mb_chars</span><span class='period'>.</span><span class='id length'>length</span> <span class='rbracket'>]</span><span class='period'>.</span><span class='id min'>min</span>

      <span class='id prefix'>prefix</span>  <span class='op'>=</span> <span class='id start_pos'>start_pos</span> <span class='op'>&gt;</span> <span class='int'>0</span> <span class='op'>?</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:omission</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
      <span class='id postfix'>postfix</span> <span class='op'>=</span> <span class='id end_pos'>end_pos</span> <span class='op'>&lt;</span> <span class='id text'>text</span><span class='period'>.</span><span class='id mb_chars'>mb_chars</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>-</span> <span class='int'>1</span> <span class='op'>?</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:omission</span><span class='rbracket'>]</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>

      <span class='id prefix'>prefix</span> <span class='op'>+</span> <span class='id text'>text</span><span class='period'>.</span><span class='id mb_chars'>mb_chars</span><span class='lbracket'>[</span><span class='id start_pos'>start_pos</span><span class='op'>..</span><span class='id end_pos'>end_pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id strip'>strip</span> <span class='op'>+</span> <span class='id postfix'>postfix</span>
    <span class='kw'>else</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="highlight-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>highlight</strong>(text, phrases, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Highlights one or more <tt>phrases</tt> everywhere in <tt>text</tt> by
inserting it into a <tt>:highlighter</tt> string. The highlighter can be
specialized by passing <tt>:highlighter</tt> as a single-quoted string with
\1 where the phrase is to be inserted (defaults to &#8217;<strong
class=&#8220;highlight&#8221;>\1</strong>&#8217;)
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>You searched for: rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rails</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; You searched for: &lt;strong class=&quot;highlight&quot;&gt;rails&lt;/strong&gt;
</span>
  <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>You searched for: ruby, rails, dhh</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>actionpack</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; You searched for: ruby, rails, dhh
</span>
  <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>You searched for: rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>for</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rails</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='symbol'>:highlighter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;em&gt;\1&lt;/em&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; You searched &lt;em&gt;for&lt;/em&gt;: &lt;em&gt;rails&lt;/em&gt;
</span>
  <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>You searched for: rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:highlighter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;a href=&quot;search?q=\1&quot;&gt;\1&lt;/a&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; You searched for: &lt;a href=&quot;search?q=rails&quot;&gt;rails&lt;/a&gt;
</span></pre>
<p>
You can still use <tt>highlight</tt> with the old API that accepts the
<tt>highlighter</tt> as its optional third parameter:
</p>
<pre class="code">
  <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>You searched for: rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rails</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;a href=&quot;search?q=\1&quot;&gt;\1&lt;/a&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>     <span class='comment'># =&gt; You searched for: &lt;a href=&quot;search?q=rails&quot;&gt;rails&lt;/a&gt;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


93
94
95
96
97
98
99
100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 93</span>

<span class='kw'>def</span> <span class='id highlight'>highlight</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id phrases'>phrases</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id args'>args</span><span class='period'>.</span><span class='id extract_options!'>extract_options!</span>
  <span class='kw'>unless</span> <span class='id args'>args</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:highlighter</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge!'>reverse_merge!</span><span class='lparen'>(</span><span class='symbol'>:highlighter</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;strong class=&quot;highlight&quot;&gt;\1&lt;/strong&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>

  <span class='id text'>text</span> <span class='op'>=</span> <span class='id sanitize'>sanitize</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sanitize</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
  <span class='kw'>if</span> <span class='id text'>text</span><span class='period'>.</span><span class='id blank?'>blank?</span> <span class='op'>||</span> <span class='id phrases'>phrases</span><span class='period'>.</span><span class='id blank?'>blank?</span>
    <span class='id text'>text</span>
  <span class='kw'>else</span>
    <span class='id match'>match</span> <span class='op'>=</span> <span class='const'>Array</span><span class='lparen'>(</span><span class='id phrases'>phrases</span><span class='rparen'>)</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span> <span class='const'>Regexp</span><span class='period'>.</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id p'>p</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>|</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
    <span class='id text'>text</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id match'>match</span><span class='rbrace'>}</span><span class='tstring_content'>)(?!(?:[^&lt;]*?)(?:[&quot;'])[^&lt;&gt;]*&gt;)</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:highlighter</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id html_safe'>html_safe</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pluralize-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>pluralize</strong>(count, singular, plural = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attempts to pluralize the <tt>singular</tt> word unless <tt>count</tt> is
1. If <tt>plural</tt> is supplied, it will use that when count is > 1,
otherwise it will use the Inflector to determine the plural form
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id pluralize'>pluralize</span><span class='lparen'>(</span><span class='int'>1</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>person</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; 1 person
</span>
  <span class='id pluralize'>pluralize</span><span class='lparen'>(</span><span class='int'>2</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>person</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; 2 people
</span>
  <span class='id pluralize'>pluralize</span><span class='lparen'>(</span><span class='int'>3</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>person</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>users</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; 3 users
</span>
  <span class='id pluralize'>pluralize</span><span class='lparen'>(</span><span class='int'>0</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>person</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; 0 people</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 177</span>

<span class='kw'>def</span> <span class='id pluralize'>pluralize</span><span class='lparen'>(</span><span class='id count'>count</span><span class='comma'>,</span> <span class='id singular'>singular</span><span class='comma'>,</span> <span class='id plural'>plural</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id count'>count</span> <span class='op'>||</span> <span class='int'>0</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='lparen'>(</span><span class='lparen'>(</span><span class='id count'>count</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>||</span> <span class='id count'>count</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^1(\.0+)?$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id singular'>singular</span> <span class='op'>:</span> <span class='lparen'>(</span><span class='id plural'>plural</span> <span class='op'>||</span> <span class='id singular'>singular</span><span class='period'>.</span><span class='id pluralize'>pluralize</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset_cycle-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset_cycle</strong>(name = &quot;default&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Resets a cycle so that it starts from the first element the next time it is
called. Pass in <tt>name</tt> to reset a named cycle.
</p>
<h4>Example</h4>
<pre class="code">
  # Alternate CSS classes for even and odd numbers...
  @items = [[1,2,3,4], [5,6,3], [3,4,5,6,7,4]]
  &lt;table&gt;
  &lt;% @items.each do |item| %&gt;
    &lt;tr class=&quot;&lt;%= cycle(&quot;even&quot;, &quot;odd&quot;) -%&gt;&quot;&gt;
        &lt;% item.each do |value| %&gt;
          &lt;span style=&quot;color:&lt;%= cycle(&quot;#333&quot;, &quot;#666&quot;, &quot;#999&quot;, :name =&gt; &quot;colors&quot;) -%&gt;&quot;&gt;
            &lt;%= value %&gt;
          &lt;/span&gt;
        &lt;% end %&gt;

        &lt;% reset_cycle(&quot;colors&quot;) %&gt;
    &lt;/tr&gt;
  &lt;% end %&gt;
  &lt;/table&gt;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


390
391
392
393</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 390</span>

<span class='kw'>def</span> <span class='id reset_cycle'>reset_cycle</span><span class='lparen'>(</span><span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>default</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id cycle'>cycle</span> <span class='op'>=</span> <span class='id get_cycle'>get_cycle</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id reset'>reset</span> <span class='kw'>unless</span> <span class='id cycle'>cycle</span><span class='period'>.</span><span class='id nil?'>nil?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="safe_concat-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>safe_concat</strong>(string) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 37</span>

<span class='kw'>def</span> <span class='id safe_concat'>safe_concat</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id output_buffer'>output_buffer</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:safe_concat</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id output_buffer'>output_buffer</span><span class='period'>.</span><span class='id safe_concat'>safe_concat</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id concat'>concat</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="simple_format-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>simple_format</strong>(text, html_options = {}, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>text</tt> transformed into HTML using simple formatting rules.
Two or more consecutive newlines(<tt>\n\n</tt>) are considered as a
paragraph and wrapped in <tt>&lt;p&gt;</tt> tags. One newline (<tt>\n</tt>)
is considered as a linebreak and a <tt>&lt;br /&gt;</tt> tag is appended.
This method does not remove the newlines from the <tt>text</tt>.
</p>
<p>
You can pass any HTML attributes into <tt>html_options</tt>.  These will be
added to all created paragraphs.
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id my_text'>my_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Here is some basic text...\n...with a line break.</span><span class='tstring_end'>&quot;</span></span>

  <span class='id simple_format'>simple_format</span><span class='lparen'>(</span><span class='id my_text'>my_text</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;&lt;p&gt;Here is some basic text...\n&lt;br /&gt;...with a line break.&lt;/p&gt;&quot;
</span>
  <span class='id more_text'>more_text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>We want to put a paragraph...\n\n...right there.</span><span class='tstring_end'>&quot;</span></span>

  <span class='id simple_format'>simple_format</span><span class='lparen'>(</span><span class='id more_text'>more_text</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;&lt;p&gt;We want to put a paragraph...&lt;/p&gt;\n\n&lt;p&gt;...right there.&lt;/p&gt;&quot;
</span>
  <span class='id simple_format'>simple_format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Look ma! A class!</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:class</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>description</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;&lt;p class='description'&gt;Look ma! A class!&lt;/p&gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


235
236
237
238
239
240
241
242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 235</span>

<span class='kw'>def</span> <span class='id simple_format'>simple_format</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='id options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id text'>text</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id html_safe'>html_safe</span> <span class='kw'>if</span> <span class='id text'>text</span><span class='period'>.</span><span class='id nil?'>nil?</span>
  <span class='id start_tag'>start_tag</span> <span class='op'>=</span> <span class='id tag'>tag</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>p</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id html_options'>html_options</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id text'>text</span> <span class='op'>=</span> <span class='id sanitize'>sanitize</span><span class='lparen'>(</span><span class='id text'>text</span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:sanitize</span><span class='rbracket'>]</span> <span class='op'>==</span> <span class='kw'>false</span>
  <span class='id text'>text</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\r\n?</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>                    <span class='comment'># \r\n and \r -&gt; \n
</span>  <span class='id text'>text</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n\n+</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;\n\n</span><span class='embexpr_beg'>#{</span><span class='id start_tag'>start_tag</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># 2+ newline  -&gt; paragraph
</span>  <span class='id text'>text</span><span class='period'>.</span><span class='id gsub!'>gsub!</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^\n]\n)(?=[^\n])</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\1&lt;br /&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='comment'># 1 newline   -&gt; br
</span>  <span class='id text'>text</span><span class='period'>.</span><span class='id insert'>insert</span> <span class='int'>0</span><span class='comma'>,</span> <span class='id start_tag'>start_tag</span>
  <span class='id text'>text</span><span class='period'>.</span><span class='id html_safe'>html_safe</span><span class='period'>.</span><span class='id safe_concat'>safe_concat</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="truncate-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>truncate</strong>(text, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Truncates a given <tt>text</tt> after a given <tt>:length</tt> if
<tt>text</tt> is longer than <tt>:length</tt> (defaults to 30). The last
characters will be replaced with the <tt>:omission</tt> (defaults to
&#8220;&#8230;&#8221;) for a total length not exceeding <tt>:length</tt>.
</p>
<p>
Pass a <tt>:separator</tt> to truncate <tt>text</tt> at a natural break.
</p>
<p>
The result is not marked as HTML-safe, so will be subject to the default
escaping when used in views, unless wrapped by <tt>raw()</tt>. Care should
be taken if <tt>text</tt> contains HTML tags or entities, because
truncation may produce invalid HTML (such as unbalanced or incomplete
tags).
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Once upon a time in a world far far away</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;Once upon a time in a world...&quot;
</span>
  <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Once upon a time in a world far far away</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:length</span> <span class='op'>=&gt;</span> <span class='int'>17</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;Once upon a ti...&quot;
</span>
  <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Once upon a time in a world far far away</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:length</span> <span class='op'>=&gt;</span> <span class='int'>17</span><span class='comma'>,</span> <span class='symbol'>:separator</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;Once upon a...&quot;
</span>
  <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>And they found that many people were sleeping better.</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:length</span> <span class='op'>=&gt;</span> <span class='int'>25</span><span class='comma'>,</span> <span class='symbol'>:omission</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>... (continued)</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;And they f... (continued)&quot;
</span>
  <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;p&gt;Once upon a time in a world far far away&lt;/p&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; &quot;&lt;p&gt;Once upon a time in a wo...&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


67
68
69
70</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 67</span>

<span class='kw'>def</span> <span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge!'>reverse_merge!</span><span class='lparen'>(</span><span class='symbol'>:length</span> <span class='op'>=&gt;</span> <span class='int'>30</span><span class='rparen'>)</span>
  <span class='id text'>text</span><span class='period'>.</span><span class='id truncate'>truncate</span><span class='lparen'>(</span><span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:length</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id text'>text</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="word_wrap-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>word_wrap</strong>(text, *args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Wraps the <tt>text</tt> into lines no longer than <tt>line_width</tt>
width. This method breaks on the first whitespace character that does not
exceed <tt>line_width</tt> (which is 80 by default).
</p>
<h4>Examples</h4>
<pre class="code">
  <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Once upon a time</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; Once upon a time
</span>
  <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding a successor to the throne turned out to be more trouble than anyone could have imagined...</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='comment'># =&gt; Once upon a time, in a kingdom called Far Far Away, a king fell ill, and finding\n a successor to the throne turned out to be more trouble than anyone could have\n imagined...
</span>
  <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Once upon a time</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:line_width</span> <span class='op'>=&gt;</span> <span class='int'>8</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; Once upon\na time
</span>
  <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Once upon a time</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:line_width</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span>
  <span class='comment'># =&gt; Once\nupon\na\ntime
</span></pre>
<p>
You can still use <tt>word_wrap</tt> with the old API that accepts the
<tt>line_width</tt> as its optional second parameter:
</p>
<pre class="code">
  <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Once upon a time</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='int'>8</span><span class='rparen'>)</span>     <span class='comment'># =&gt; Once upon\na time</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205
206
207
208
209
210
211
212</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/helpers/text_helper.rb', line 202</span>

<span class='kw'>def</span> <span class='id word_wrap'>word_wrap</span><span class='lparen'>(</span><span class='id text'>text</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id args'>args</span><span class='period'>.</span><span class='id extract_options!'>extract_options!</span>
  <span class='kw'>unless</span> <span class='id args'>args</span><span class='period'>.</span><span class='id blank?'>blank?</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:line_width</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id args'>args</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='int'>80</span>
  <span class='kw'>end</span>
  <span class='id options'>options</span><span class='period'>.</span><span class='id reverse_merge!'>reverse_merge!</span><span class='lparen'>(</span><span class='symbol'>:line_width</span> <span class='op'>=&gt;</span> <span class='int'>80</span><span class='rparen'>)</span>

  <span class='id text'>text</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id line'>line</span><span class='op'>|</span>
    <span class='id line'>line</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&gt;</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:line_width</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='id line'>line</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.{1,</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:line_width</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>})(\s+|$)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\1\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id strip'>strip</span> <span class='op'>:</span> <span class='id line'>line</span>
  <span class='kw'>end</span> <span class='op'>*</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:47 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>