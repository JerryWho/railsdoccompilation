<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionView::LookupContext::Details</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (D)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionView.html" title="ActionView (module)">ActionView</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../LookupContext.html" title="ActionView::LookupContext (class)">LookupContext</a></span></span>
     &raquo; 
    <span class="title">Details</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionView::LookupContext::Details
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="../LookupContext.html" title="ActionView::LookupContext (class)">ActionView::LookupContext</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">actionpack/lib/action_view/lookup_context.rb</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#details_key-instance_method" title="#details_key (instance method)">- (Object) <strong>details_key</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Calculate the details key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#formats%3D-instance_method" title="#formats= (instance method)">- (Object) <strong>formats=</strong>(values) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Overload formats= to reject [:&#8220;<b>/</b>&#8220;] values.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#freeze_formats-instance_method" title="#freeze_formats (instance method)">- (Object) <strong>freeze_formats</strong>(formats, unless_frozen = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Freeze the current formats in the lookup context.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#locale-instance_method" title="#locale (instance method)">- (Object) <strong>locale</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Overload locale to return a symbol instead of array.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#locale%3D-instance_method" title="#locale= (instance method)">- (Object) <strong>locale=</strong>(value) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Overload locale= to also set the I18n.locale.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_default_locale%21-instance_method" title="#skip_default_locale! (instance method)">- (Object) <strong>skip_default_locale!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Do not use the default locale on template lookup.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#update_details-instance_method" title="#update_details (instance method)">- (Object) <strong>update_details</strong>(new_details) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Update the details keys by merging the given hash into the current details
hash.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_layout_format-instance_method" title="#with_layout_format (instance method)">- (Object) <strong>with_layout_format</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A method which only uses the first format in the formats array for layout
lookup.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="details_key-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>details_key</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Calculate the details key. Remove the handlers from calculation to improve
performance since the user cannot modify it explicitly.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


135
136
137</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 135</span>

<span class='kw'>def</span> <span class='id details_key'>details_key</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@details_key</span> <span class='op'>||=</span> <span class='const'>DetailsKey</span><span class='period'>.</span><span class='id get'>get</span><span class='lparen'>(</span><span class='ivar'>@details</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="formats=-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>formats=</strong>(values) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Overload formats= to reject [:&#8220;<b>/</b>&#8220;] values.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151
152
153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 149</span>

<span class='kw'>def</span> <span class='id formats='>formats=</span><span class='lparen'>(</span><span class='id values'>values</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id values'>values</span> <span class='op'>&amp;&amp;</span> <span class='id values'>values</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='id value'>value</span> <span class='op'>=</span> <span class='id values'>values</span><span class='period'>.</span><span class='id first'>first</span>
    <span class='id values'>values</span> <span class='op'>=</span> <span class='kw'>nil</span>    <span class='kw'>if</span> <span class='id value'>value</span> <span class='op'>==</span> <span class='symbol'>:*/*</span><span class='tstring_end'>&quot;</span></span>
    <span class='id values'>values</span> <span class='op'>&lt;&lt;</span> <span class='symbol'>:html</span> <span class='kw'>if</span> <span class='id value'>value</span> <span class='op'>==</span> <span class='symbol'>:js</span>
  <span class='kw'>end</span>
  <span class='kw'>super</span><span class='lparen'>(</span><span class='id values'>values</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="freeze_formats-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>freeze_formats</strong>(formats, unless_frozen = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Freeze the current formats in the lookup context. By freezing them, you are
guaranteeing that next template lookups are not going to modify the
formats. The controller can also use this, to ensure that formats
won&#8217;t be further modified (as it does in respond_to blocks).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


142
143
144
145
146</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 142</span>

<span class='kw'>def</span> <span class='id freeze_formats'>freeze_formats</span><span class='lparen'>(</span><span class='id formats'>formats</span><span class='comma'>,</span> <span class='id unless_frozen'>unless_frozen</span><span class='op'>=</span><span class='kw'>false</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id unless_frozen'>unless_frozen</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@frozen_formats</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id formats'>formats</span> <span class='op'>=</span> <span class='id formats'>formats</span>
  <span class='ivar'>@frozen_formats</span> <span class='op'>=</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="locale-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>locale</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Overload locale to return a symbol instead of array.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 165</span>

<span class='kw'>def</span> <span class='id locale'>locale</span>
  <span class='ivar'>@details</span><span class='lbracket'>[</span><span class='symbol'>:locale</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id first'>first</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="locale=-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>locale=</strong>(value) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Overload locale= to also set the I18n.locale. If the current I18n.config
object responds to i18n_config, it means that it&#8217;s has a copy of the
original I18n configuration and it&#8217;s acting as proxy, which we need
to skip.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178
179</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 172</span>

<span class='kw'>def</span> <span class='id locale='>locale=</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id value'>value</span>
    <span class='id config'>config</span> <span class='op'>=</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id config'>config</span><span class='period'>.</span><span class='id respond_to?'>respond_to?</span><span class='lparen'>(</span><span class='symbol'>:i18n_config</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id config'>config</span><span class='period'>.</span><span class='id i18n_config'>i18n_config</span> <span class='op'>:</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id config'>config</span>
    <span class='id config'>config</span><span class='period'>.</span><span class='id locale'>locale</span> <span class='op'>=</span> <span class='id value'>value</span>
  <span class='kw'>end</span>

  <span class='kw'>super</span><span class='lparen'>(</span><span class='ivar'>@skip_default_locale</span> <span class='op'>?</span> <span class='const'>I18n</span><span class='period'>.</span><span class='id locale'>locale</span> <span class='op'>:</span> <span class='id _locale_defaults'>_locale_defaults</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="skip_default_locale!-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>skip_default_locale!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Do not use the default locale on template lookup.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


159
160
161
162</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 159</span>

<span class='kw'>def</span> <span class='id skip_default_locale!'>skip_default_locale!</span>
  <span class='ivar'>@skip_default_locale</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id locale'>locale</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="update_details-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>update_details</strong>(new_details) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Update the details keys by merging the given hash into the current details
hash. If a block is given, the details are modified just during the
execution of the block and reverted to the previous value after.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203
204
205
206
207
208
209
210
211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 201</span>

<span class='kw'>def</span> <span class='id update_details'>update_details</span><span class='lparen'>(</span><span class='id new_details'>new_details</span><span class='rparen'>)</span>
  <span class='id old_details'>old_details</span> <span class='op'>=</span> <span class='ivar'>@details</span><span class='period'>.</span><span class='id dup'>dup</span>

  <span class='id registered_detail_setters'>registered_detail_setters</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id setter'>setter</span><span class='op'>|</span>
    <span class='id send'>send</span><span class='lparen'>(</span><span class='id setter'>setter</span><span class='comma'>,</span> <span class='id new_details'>new_details</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id new_details'>new_details</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>begin</span>
    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='ivar'>@details_key</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@details</span> <span class='op'>=</span> <span class='id old_details'>old_details</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="with_layout_format-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>with_layout_format</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A method which only uses the first format in the formats array for layout
lookup. This method plays straight with instance variables for performance
reasons.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_view/lookup_context.rb', line 183</span>

<span class='kw'>def</span> <span class='id with_layout_format'>with_layout_format</span>
  <span class='kw'>if</span> <span class='id formats'>formats</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span>
    <span class='kw'>yield</span>
  <span class='kw'>else</span>
    <span class='id old_formats'>old_formats</span> <span class='op'>=</span> <span class='id formats'>formats</span>
    <span class='id _set_detail'>_set_detail</span><span class='lparen'>(</span><span class='symbol'>:formats</span><span class='comma'>,</span> <span class='id formats'>formats</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='kw'>begin</span>
      <span class='kw'>yield</span>
    <span class='kw'>ensure</span>
      <span class='id _set_detail'>_set_detail</span><span class='lparen'>(</span><span class='symbol'>:formats</span><span class='comma'>,</span> <span class='id old_formats'>old_formats</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:33 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>