<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveSupport::Callbacks::Callback</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (C)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Callbacks.html" title="ActiveSupport::Callbacks (module)">Callbacks</a></span></span>
     &raquo; 
    <span class="title">Callback</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveSupport::Callbacks::Callback
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">ActiveSupport::Callbacks::Callback</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activesupport/lib/active_support/callbacks.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="_callback_sequence-classvariable" class="">@@_callback_sequence =
          
        </dt>
        <dd><pre class="code"><span class='int'>0</span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#chain-instance_method" title="#chain (instance method)">- (Object) <strong>chain</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute chain.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#filter-instance_method" title="#filter (instance method)">- (Object) <strong>filter</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute filter.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#kind-instance_method" title="#kind (instance method)">- (Object) <strong>kind</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute kind.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#klass-instance_method" title="#klass (instance method)">- (Object) <strong>klass</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute klass.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Object) <strong>options</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute options.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#per_key-instance_method" title="#per_key (instance method)">- (Object) <strong>per_key</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute per_key.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#raw_filter-instance_method" title="#raw_filter (instance method)">- (Object) <strong>raw_filter</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute raw_filter.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_compile_per_key_options-instance_method" title="#_compile_per_key_options (instance method)">- (Object) <strong>_compile_per_key_options</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#_update_filter-instance_method" title="#_update_filter (instance method)">- (Object) <strong>_update_filter</strong>(filter_options, new_options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clone-instance_method" title="#clone (instance method)">- (Object) <strong>clone</strong>(chain, klass) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#end-instance_method" title="#end (instance method)">- (Object) <strong>end</strong>(key = nil, object = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This will supply contents for around and after filters, but not before
filters (for the backward pass).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Callback) <strong>initialize</strong>(chain, filter, kind, options, klass) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of Callback.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matches%3F-instance_method" title="#matches? (instance method)">- (Boolean) <strong>matches?</strong>(_kind, _filter) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#name-instance_method" title="#name (instance method)">- (Object) <strong>name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next_id-instance_method" title="#next_id (instance method)">- (Object) <strong>next_id</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_options%21-instance_method" title="#normalize_options! (instance method)">- (Object) <strong>normalize_options!</strong>(options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#recompile%21-instance_method" title="#recompile! (instance method)">- (Object) <strong>recompile!</strong>(_options, _per_key) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-instance_method" title="#start (instance method)">- (Object) <strong>start</strong>(key = nil, object = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This will supply contents for before and around filters, and no contents
for after filters (for the forward pass).
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ActiveSupport::Callbacks::Callback (class)">Callback</a></span></tt>) <strong>initialize</strong>(chain, filter, kind, options, klass) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of Callback
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115
116
117</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 106</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id chain'>chain</span><span class='comma'>,</span> <span class='id filter'>filter</span><span class='comma'>,</span> <span class='id kind'>kind</span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='id klass'>klass</span><span class='rparen'>)</span>
  <span class='ivar'>@chain</span><span class='comma'>,</span> <span class='ivar'>@kind</span><span class='comma'>,</span> <span class='ivar'>@klass</span> <span class='op'>=</span> <span class='id chain'>chain</span><span class='comma'>,</span> <span class='id kind'>kind</span><span class='comma'>,</span> <span class='id klass'>klass</span>
  <span class='id normalize_options!'>normalize_options!</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>

  <span class='ivar'>@per_key</span>              <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:per_key</span><span class='rparen'>)</span>
  <span class='ivar'>@raw_filter</span><span class='comma'>,</span> <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id filter'>filter</span><span class='comma'>,</span> <span class='id options'>options</span>
  <span class='ivar'>@filter</span>               <span class='op'>=</span> <span class='id _compile_filter'>_compile_filter</span><span class='lparen'>(</span><span class='id filter'>filter</span><span class='rparen'>)</span>
  <span class='ivar'>@compiled_options</span>     <span class='op'>=</span> <span class='id _compile_options'>_compile_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@callback_id</span>          <span class='op'>=</span> <span class='id next_id'>next_id</span>

  <span class='id _compile_per_key_options'>_compile_per_key_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="chain=-instance_method"></span>
      <span id="chain-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="chain-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>chain</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute chain
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id chain'>chain</span>
  <span class='ivar'>@chain</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="filter=-instance_method"></span>
      <span id="filter-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="filter-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>filter</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute filter
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id filter'>filter</span>
  <span class='ivar'>@filter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="kind=-instance_method"></span>
      <span id="kind-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="kind-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>kind</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute kind
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id kind'>kind</span>
  <span class='ivar'>@kind</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="klass=-instance_method"></span>
      <span id="klass-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="klass-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>klass</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute klass
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id klass'>klass</span>
  <span class='ivar'>@klass</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="options=-instance_method"></span>
      <span id="options-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="options-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>options</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute options
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="per_key=-instance_method"></span>
      <span id="per_key-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="per_key-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>per_key</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute per_key
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id per_key'>per_key</span>
  <span class='ivar'>@per_key</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="raw_filter=-instance_method"></span>
      <span id="raw_filter-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="raw_filter-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>raw_filter</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute raw_filter
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


104
105
106</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 104</span>

<span class='kw'>def</span> <span class='id raw_filter'>raw_filter</span>
  <span class='ivar'>@raw_filter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="_compile_per_key_options-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>_compile_per_key_options</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


168
169
170
171
172
173
174
175
176</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 168</span>

<span class='kw'>def</span> <span class='id _compile_per_key_options'>_compile_per_key_options</span>
  <span class='id key_options'>key_options</span>  <span class='op'>=</span> <span class='id _compile_options'>_compile_options</span><span class='lparen'>(</span><span class='ivar'>@per_key</span><span class='rparen'>)</span>

  <span class='ivar'>@klass</span><span class='period'>.</span><span class='id class_eval'>class_eval</span> <span class='heredoc_beg'>&lt;&lt;-RUBY_EVAL</span><span class='tstring_content'>    def _one_time_conditions_valid_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@callback_id</span><span class='rbrace'>}</span><span class='tstring_content'>?
</span><span class='tstring_content'>      true </span><span class='embexpr_beg'>#{</span><span class='id key_options'>key_options</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>
    end
</span><span class='heredoc_end'>  RUBY_EVAL
</span><span class='comma'>,</span> <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="_update_filter-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>_update_filter</strong>(filter_options, new_options) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155
156</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 153</span>

<span class='kw'>def</span> <span class='id _update_filter'>_update_filter</span><span class='lparen'>(</span><span class='id filter_options'>filter_options</span><span class='comma'>,</span> <span class='id new_options'>new_options</span><span class='rparen'>)</span>
  <span class='id filter_options'>filter_options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id new_options'>new_options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id new_options'>new_options</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:unless</span><span class='rparen'>)</span>
  <span class='id filter_options'>filter_options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id new_options'>new_options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id new_options'>new_options</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:if</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clone-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clone</strong>(chain, klass) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


119
120
121
122
123
124
125
126
127
128
129
130</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 119</span>

<span class='kw'>def</span> <span class='id clone'>clone</span><span class='lparen'>(</span><span class='id chain'>chain</span><span class='comma'>,</span> <span class='id klass'>klass</span><span class='rparen'>)</span>
  <span class='id obj'>obj</span>                  <span class='op'>=</span> <span class='kw'>super</span><span class='lparen'>(</span><span class='rparen'>)</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id chain'>chain</span>            <span class='op'>=</span> <span class='id chain'>chain</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id klass'>klass</span>            <span class='op'>=</span> <span class='id klass'>klass</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id per_key'>per_key</span>          <span class='op'>=</span> <span class='ivar'>@per_key</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id options'>options</span>          <span class='op'>=</span> <span class='ivar'>@options</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id per_key'>per_key</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='ivar'>@per_key</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id per_key'>per_key</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@per_key</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span>     <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span><span class='period'>.</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id obj'>obj</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="end-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>end</strong>(key = nil, object = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This will supply contents for around and after filters, but not before
filters (for the backward pass).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


234
235
236
237
238
239
240
241
242
243
244
245
246
247</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 234</span>

<span class='kw'>def</span> <span class='kw'>end</span><span class='lparen'>(</span><span class='id key'>key</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id object'>object</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id key'>key</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id object'>object</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_one_time_conditions_valid_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@callback_id</span><span class='rbrace'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='kw'>if</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:around</span> <span class='op'>||</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:after</span>
    <span class='comment'># if condition    # after_save :filter_name, :if =&gt; :condition
</span>    <span class='comment'>#   filter_name
</span>    <span class='comment'># end
</span>    <span class='kw'>if</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:after</span>
      <span class='lbracket'>[</span><span class='ivar'>@compiled_options</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='ivar'>@filter</span><span class='comma'>,</span> <span class='ivar'>@compiled_options</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>end</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="matches?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>matches?</strong>(_kind, _filter) 
  

  
</p><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 149</span>

<span class='kw'>def</span> <span class='id matches?'>matches?</span><span class='lparen'>(</span><span class='id _kind'>_kind</span><span class='comma'>,</span> <span class='id _filter'>_filter</span><span class='rparen'>)</span>
  <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='id _kind'>_kind</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@filter</span> <span class='op'>==</span> <span class='id _filter'>_filter</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="name-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>name</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 141</span>

<span class='kw'>def</span> <span class='id name'>name</span>
  <span class='id chain'>chain</span><span class='period'>.</span><span class='id name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="next_id-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>next_id</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 145</span>

<span class='kw'>def</span> <span class='id next_id'>next_id</span>
  <span class='cvar'>@@_callback_sequence</span> <span class='op'>+=</span> <span class='int'>1</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="normalize_options!-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>normalize_options!</strong>(options) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 132</span>

<span class='kw'>def</span> <span class='id normalize_options!'>normalize_options!</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:per_key</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:per_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:per_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:if</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:per_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Array</span><span class='period'>.</span><span class='id wrap'>wrap</span><span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:per_key</span><span class='rbracket'>]</span><span class='lbracket'>[</span><span class='symbol'>:unless</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="recompile!-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>recompile!</strong>(_options, _per_key) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161
162
163
164
165
166</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 158</span>

<span class='kw'>def</span> <span class='id recompile!'>recompile!</span><span class='lparen'>(</span><span class='id _options'>_options</span><span class='comma'>,</span> <span class='id _per_key'>_per_key</span><span class='rparen'>)</span>
  <span class='id _update_filter'>_update_filter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id options'>options</span><span class='comma'>,</span> <span class='id _options'>_options</span><span class='rparen'>)</span>
  <span class='id _update_filter'>_update_filter</span><span class='lparen'>(</span><span class='kw'>self</span><span class='period'>.</span><span class='id per_key'>per_key</span><span class='comma'>,</span> <span class='id _per_key'>_per_key</span><span class='rparen'>)</span>

  <span class='ivar'>@callback_id</span>      <span class='op'>=</span> <span class='id next_id'>next_id</span>
  <span class='ivar'>@filter</span>           <span class='op'>=</span> <span class='id _compile_filter'>_compile_filter</span><span class='lparen'>(</span><span class='ivar'>@raw_filter</span><span class='rparen'>)</span>
  <span class='ivar'>@compiled_options</span> <span class='op'>=</span> <span class='id _compile_options'>_compile_options</span><span class='lparen'>(</span><span class='ivar'>@options</span><span class='rparen'>)</span>
                      <span class='id _compile_per_key_options'>_compile_per_key_options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>(key = nil, object = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This will supply contents for before and around filters, and no contents
for after filters (for the forward pass).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228
229
230</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/callbacks.rb', line 180</span>

<span class='kw'>def</span> <span class='id start'>start</span><span class='lparen'>(</span><span class='id key'>key</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id object'>object</span><span class='op'>=</span><span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id key'>key</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id object'>object</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_one_time_conditions_valid_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@callback_id</span><span class='rbrace'>}</span><span class='tstring_content'>?</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

  <span class='comment'># options[0] is the compiled form of supplied conditions
</span>  <span class='comment'># options[1] is the &quot;end&quot; for the conditional
</span>  <span class='comment'>#
</span>  <span class='kw'>if</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:before</span> <span class='op'>||</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:around</span>
    <span class='kw'>if</span> <span class='ivar'>@kind</span> <span class='op'>==</span> <span class='symbol'>:before</span>
      <span class='comment'># if condition    # before_save :filter_name, :if =&gt; :condition
</span>      <span class='comment'>#   filter_name
</span>      <span class='comment'># end
</span>      <span class='id filter'>filter</span> <span class='op'>=</span> <span class='heredoc_beg'>&lt;&lt;-RUBY_EVAL</span><span class='tstring_content'>        unless halted
</span><span class='tstring_content'>          result = </span><span class='embexpr_beg'>#{</span><span class='ivar'>@filter</span><span class='rbrace'>}</span><span class='tstring_content'>
</span><span class='tstring_content'>          halted = (</span><span class='embexpr_beg'>#{</span><span class='id chain'>chain</span><span class='period'>.</span><span class='id config'>config</span><span class='lbracket'>[</span><span class='symbol'>:terminator</span><span class='rbracket'>]</span><span class='rbrace'>}</span><span class='tstring_content'>)
        end
</span><span class='heredoc_end'>      RUBY_EVAL
</span>

      <span class='lbracket'>[</span><span class='ivar'>@compiled_options</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id filter'>filter</span><span class='comma'>,</span> <span class='ivar'>@compiled_options</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='comment'># Compile around filters with conditions into proxy methods
</span>      <span class='comment'># that contain the conditions.
</span>      <span class='comment'>#
</span>      <span class='comment'># For `around_save :filter_name, :if =&gt; :condition':
</span>      <span class='comment'>#
</span>      <span class='comment'># def _conditional_callback_save_17
</span>      <span class='comment'>#   if condition
</span>      <span class='comment'>#     filter_name do
</span>      <span class='comment'>#       yield self
</span>      <span class='comment'>#     end
</span>      <span class='comment'>#   else
</span>      <span class='comment'>#     yield self
</span>      <span class='comment'>#   end
</span>      <span class='comment'># end
</span>      <span class='comment'>#
</span>      <span class='id name'>name</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>_conditional_callback_</span><span class='embexpr_beg'>#{</span><span class='ivar'>@kind</span><span class='rbrace'>}</span><span class='tstring_content'>_</span><span class='embexpr_beg'>#{</span><span class='id next_id'>next_id</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
      <span class='ivar'>@klass</span><span class='period'>.</span><span class='id class_eval'>class_eval</span> <span class='heredoc_beg'>&lt;&lt;-RUBY_EVAL</span><span class='tstring_content'>         def </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>(halted)
</span><span class='tstring_content'>          </span><span class='embexpr_beg'>#{</span><span class='ivar'>@compiled_options</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>if true</span><span class='tstring_end'>&quot;</span></span><span class='rbrace'>}</span><span class='tstring_content'> &amp;&amp; !halted
</span><span class='tstring_content'>            </span><span class='embexpr_beg'>#{</span><span class='ivar'>@filter</span><span class='rbrace'>}</span><span class='tstring_content'> do
              yield self
            end
          else
            yield self
          end
        end
</span><span class='heredoc_end'>      RUBY_EVAL
</span><span class='comma'>,</span>  <span class='kw'>__FILE__</span><span class='comma'>,</span> <span class='kw'>__LINE__</span> <span class='op'>+</span> <span class='int'>1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>(halted) do</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:35 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>