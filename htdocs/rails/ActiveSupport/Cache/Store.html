<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: ActiveSupport::Cache::Store</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (S)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActiveSupport.html" title="ActiveSupport (module)">ActiveSupport</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Cache.html" title="ActiveSupport::Cache (module)">Cache</a></span></span>
     &raquo; 
    <span class="title">Store</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: ActiveSupport::Cache::Store
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">ActiveSupport::Cache::Store</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">activesupport/lib/active_support/cache.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
An abstract cache store class. There are multiple cache store
implementations, each having its own additional features. See the classes
under the ActiveSupport::Cache module, e.g.
ActiveSupport::Cache::MemCacheStore. MemCacheStore is currently the most
popular cache store for large production websites.
</p>
<p>
Some implementations may not support all methods beyond the basic cache
methods of <tt>fetch</tt>, <tt>write</tt>, <tt>read</tt>, <tt>exist?</tt>,
and <tt>delete</tt>.
</p>
<p>
ActiveSupport::Cache::Store can store any serializable Ruby object.
</p>
<pre class="code">
  <span class='id cache'>cache</span> <span class='op'>=</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Cache</span><span class='op'>::</span><span class='const'>MemoryStore</span><span class='period'>.</span><span class='id new'>new</span>

  <span class='id cache'>cache</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; nil
</span>  <span class='id cache'>cache</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; &quot;Duckburgh&quot;
</span></pre>
<p>
Keys are always translated into Strings and are case sensitive. When an
object is specified as a key, its <tt>cache_key</tt> method will be called
if it is defined. Otherwise, the <tt>to_param</tt> method will be called.
Hashes and Arrays can be used as keys. The elements will be delimited by
slashes and Hashes elements will be sorted by key so they are consistent.
</p>
<pre class="code">
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='op'>==</span> <span class='id cache'>cache</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='symbol'>:city</span><span class='rparen'>)</span>   <span class='comment'># =&gt; true
</span></pre>
<p>
Nil values can be cached.
</p>
<p>
If your cache is on a shared infrastructure, you can define a namespace for
your cache entries. If a namespace is defined, it will be prefixed on to
every key. The namespace can be either a static value or a Proc. If it is a
Proc, it will be invoked when each key is evaluated so that you can use
application logic to invalidate keys.
</p>
<pre class="code">
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id namespace'>namespace</span> <span class='op'>=</span> <span class='id lambda'>lambda</span> <span class='lbrace'>{</span> <span class='ivar'>@last_mod_time</span> <span class='rbrace'>}</span>  <span class='comment'># Set the namespace to a variable
</span>  <span class='ivar'>@last_mod_time</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span>  <span class='comment'># Invalidate the entire cache by changing namespace
</span></pre>
<p>
Caches can also store values in a compressed format to save space and
reduce time spent sending data. Since there is some overhead, values must
be large enough to warrant compression. To turn on compression either pass
<tt>:compress =&gt; true</tt> in the initializer or to <tt>fetch</tt> or
<tt>write</tt>. To specify the threshold at which to compress values, set
<tt>:compress_threshold</tt>. The default threshold is 32K.
</p>


  </div>
</div>
<div class="tags">
  
</div><div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="FileStore.html" title="ActiveSupport::Cache::FileStore (class)">FileStore</a></span>, <span class='object_link'><a href="MemCacheStore.html" title="ActiveSupport::Cache::MemCacheStore (class)">MemCacheStore</a></span>, <span class='object_link'><a href="MemoryStore.html" title="ActiveSupport::Cache::MemoryStore (class)">MemoryStore</a></span>, <span class='object_link'><a href="Strategy/LocalCache/LocalStore.html" title="ActiveSupport::Cache::Strategy::LocalCache::LocalStore (class)">Strategy::LocalCache::LocalStore</a></span></p>
</div>


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- (Object) <strong>options</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute options.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#silence-instance_method" title="#silence (instance method)">- (Object) <strong>silence</strong> </a>
    

    
      (also: #silence?)
    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the value of attribute silence.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instrument-class_method" title="instrument (class method)">+ (Object) <strong>instrument</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#instrument%3D-class_method" title="instrument= (class method)">+ (Object) <strong>instrument=</strong>(boolean) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set to true if cache stores should be instrumented.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cleanup-instance_method" title="#cleanup (instance method)">- (Object) <strong>cleanup</strong>(options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Cleanup the cache by removing expired entries.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-instance_method" title="#clear (instance method)">- (Object) <strong>clear</strong>(options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Clear the entire cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#decrement-instance_method" title="#decrement (instance method)">- (Object) <strong>decrement</strong>(name, amount = 1, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Increment an integer value in the cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong>(name, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Deletes an entry in the cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_matched-instance_method" title="#delete_matched (instance method)">- (Object) <strong>delete_matched</strong>(matcher, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Delete all entries with keys matching the pattern.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">- (Boolean) <strong>exist?</strong>(name, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return true if the cache contains an entry for the given key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fetch-instance_method" title="#fetch (instance method)">- (Object) <strong>fetch</strong>(name, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Fetches data from the cache, using the given key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#increment-instance_method" title="#increment (instance method)">- (Object) <strong>increment</strong>(name, amount = 1, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Increment an integer value in the cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Store) <strong>initialize</strong>(options = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mute-instance_method" title="#mute (instance method)">- (Object) <strong>mute</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Silence the logger within a block.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read-instance_method" title="#read (instance method)">- (Object) <strong>read</strong>(name, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Fetches data from the cache, using the given key.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#read_multi-instance_method" title="#read_multi (instance method)">- (Object) <strong>read_multi</strong>(*names) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Read multiple values at once from the cache.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#silence%21-instance_method" title="#silence! (instance method)">- (Object) <strong>silence!</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Silence the logger.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#write-instance_method" title="#write (instance method)">- (Object) <strong>write</strong>(name, value, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Writes the value to the cache, with the key.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="ActiveSupport::Cache::Store (class)">Store</a></span></tt>) <strong>initialize</strong>(options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create a new cache. The options will be passed to any write method calls
except for :namespace which can be used to set the global namespace for the
cache.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


153
154
155</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 153</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span> <span class='op'>=</span> <span class='id options'>options</span> <span class='op'>?</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="options-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="options-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>options</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute options
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 148</span>

<span class='kw'>def</span> <span class='id options'>options</span>
  <span class='ivar'>@options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="silence-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="silence-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>silence</strong>  <span class="extras">(readonly)</span>
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='silence?-instance_method'>silence?</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the value of attribute silence
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 148</span>

<span class='kw'>def</span> <span class='id silence'>silence</span>
  <span class='ivar'>@silence</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="instrument-class_method">
  
    + (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>instrument</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 176</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id instrument'>instrument</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:instrument_cache_store</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="instrument=-class_method">
  
    + (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>instrument=</strong>(boolean) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set to true if cache stores should be instrumented. Default is false.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 172</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id instrument='>instrument=</span><span class='lparen'>(</span><span class='id boolean'>boolean</span><span class='rparen'>)</span>
  <span class='const'>Thread</span><span class='period'>.</span><span class='id current'>current</span><span class='lbracket'>[</span><span class='symbol'>:instrument_cache_store</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id boolean'>boolean</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="cleanup-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>cleanup</strong>(options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Cleanup the cache by removing expired entries.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>
<p>
All implementations may not support this method.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


425
426
427</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 425</span>

<span class='kw'>def</span> <span class='id cleanup'>cleanup</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> does not support cleanup</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear</strong>(options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Clear the entire cache. Be careful with this method since it could affect
other processes if shared cache is being used.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>
<p>
All implementations may not support this method.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 435</span>

<span class='kw'>def</span> <span class='id clear'>clear</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> does not support clear</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="decrement-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>decrement</strong>(name, amount = 1, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Increment an integer value in the cache.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>
<p>
All implementations may not support this method.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


416
417
418</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 416</span>

<span class='kw'>def</span> <span class='id decrement'>decrement</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> does not support decrement</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete</strong>(name, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Deletes an entry in the cache. Returns <tt>true</tt> if an entry is
deleted.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


371
372
373
374
375
376</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 371</span>

<span class='kw'>def</span> <span class='id delete'>delete</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:delete</span><span class='comma'>,</span> <span class='id name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
    <span class='id delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="delete_matched-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>delete_matched</strong>(matcher, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Delete all entries with keys matching the pattern.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>
<p>
All implementations may not support this method.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


398
399
400</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 398</span>

<span class='kw'>def</span> <span class='id delete_matched'>delete_matched</span><span class='lparen'>(</span><span class='id matcher'>matcher</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> does not support delete_matched</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="exist?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>exist?</strong>(name, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return true if the cache contains an entry for the given key.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


381
382
383
384
385
386
387
388
389
390
391</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 381</span>

<span class='kw'>def</span> <span class='id exist?'>exist?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:exist?</span><span class='comma'>,</span> <span class='id name'>name</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
    <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id read_entry'>read_entry</span><span class='lparen'>(</span><span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='id entry'>entry</span><span class='period'>.</span><span class='id expired?'>expired?</span>
      <span class='kw'>true</span>
    <span class='kw'>else</span>
      <span class='kw'>false</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fetch-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>fetch</strong>(name, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Fetches data from the cache, using the given key. If there is data in the
cache with the given key, then that data is returned.
</p>
<p>
If there is no such data in the cache (a cache miss occurred), then nil
will be returned. However, if a block has been passed, then that block will
be run in the event of a cache miss. The return value of the block will be
written to the cache under the given cache key, and that return value will
be returned.
</p>
<pre class="code">
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>today</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>today</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;Monday&quot;
</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; nil
</span>  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Duckburgh</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>city</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>   <span class='comment'># =&gt; &quot;Duckburgh&quot;
</span></pre>
<p>
You may also specify additional options via the <tt>options</tt> argument.
Setting <tt>:force =&gt; true</tt> will force a cache miss:
</p>
<pre class="code">
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>today</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Monday</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>today</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>  <span class='comment'># =&gt; nil
</span></pre>
<p>
Setting <tt>:compress</tt> will store a large cache entry set by the call
in a compressed format.
</p>
<p>
Setting <tt>:expires_in</tt> will set an expiration time on the cache. All
caches support auto expiring content after a specified number of seconds.
This value can be specified as an option to the construction in which call
all entries will be affected. Or it can be supplied to the <tt>fetch</tt>
or <tt>write</tt> method for just one entry.
</p>
<pre class="code">
  <span class='id cache'>cache</span> <span class='op'>=</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Cache</span><span class='op'>::</span><span class='const'>MemoryStore</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:expire_in</span> <span class='op'>=&gt;</span> <span class='int'>5</span><span class='period'>.</span><span class='id minutes'>minutes</span><span class='rparen'>)</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id value'>value</span><span class='comma'>,</span> <span class='symbol'>:expire_in</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='period'>.</span><span class='id minute'>minute</span><span class='rparen'>)</span>  <span class='comment'># Set a lower value for one entry
</span></pre>
<p>
Setting <tt>:race_condition_ttl</tt> is very useful in situations where a
cache entry is used very frequently unver heavy load. If a cache expires
and due to heavy load seven different processes will try to read data
natively and then they all will try to write to cache. To avoid that case
the first process to find an expired cache entry will bump the cache
expiration time by the value set in <tt>:race_condition_ttl</tt>. Yes this
process is extending the time for a stale value by another few seconds.
Because of extended life of the previous cache, other processes will
continue to use slightly stale data for a just a big longer. In the
meantime that first process will go ahead and will write into cache the new
value. After that all the processes will start getting new value. The key
is to keep <tt>:race_condition_ttl</tt> small.
</p>
<p>
If the process regenerating the entry errors out, the entry will be
regenerated after the specified number of seconds. Also note that the life
of stale cache is extended only if it expired recently. Otherwise a new
value is generated and <tt>:race_condition_ttl</tt> does not play any role.
</p>
<pre class="code">
  <span class='comment'># Set all values to expire after one minute.
</span>  <span class='id cache'>cache</span> <span class='op'>=</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Cache</span><span class='op'>::</span><span class='const'>MemoryCache</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:expires_in</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='period'>.</span><span class='id minute'>minute</span><span class='rparen'>)</span>

  <span class='id cache'>cache</span><span class='period'>.</span><span class='id write'>write</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>original value</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id val_1'>val_1</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id val_2'>val_2</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id sleep'>sleep</span> <span class='int'>60</span>

  <span class='const'>Thread</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span>
    <span class='id val_1'>val_1</span> <span class='op'>=</span> <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:race_condition_ttl</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='id sleep'>sleep</span> <span class='int'>1</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new value 1</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='const'>Thread</span><span class='period'>.</span><span class='id new'>new</span> <span class='kw'>do</span>
    <span class='id val_2'>val_2</span> <span class='op'>=</span> <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:race_condition_ttl</span> <span class='op'>=&gt;</span> <span class='int'>10</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>new value 2</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='comment'># val_1 =&gt; &quot;new value 1&quot;
</span>  <span class='comment'># val_2 =&gt; &quot;original value&quot;
</span>  <span class='comment'># sleep 10 # First thread extend the life of cache by another 10 seconds
</span>  <span class='comment'># cache.fetch(&quot;foo&quot;) =&gt; &quot;new value 1&quot;
</span></pre>
<p>
Other options will be handled by the specific cache store implementation.
Internally, #fetch calls #read_entry, and calls #write_entry on a cache
miss. <tt>options</tt> will be passed to the #read and #write calls.
</p>
<p>
For example, MemCacheStore&#8217;s #write method supports the <tt>:raw</tt>
option, which tells the memcached server to store all values as strings. We
can use this option with #fetch too:
</p>
<pre class="code">
  <span class='id cache'>cache</span> <span class='op'>=</span> <span class='const'>ActiveSupport</span><span class='op'>::</span><span class='const'>Cache</span><span class='op'>::</span><span class='const'>MemCacheStore</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:raw</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='symbol'>:bar</span>
  <span class='kw'>end</span>
  <span class='id cache'>cache</span><span class='period'>.</span><span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>foo</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>  <span class='comment'># =&gt; &quot;bar&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 271</span>

<span class='kw'>def</span> <span class='id fetch'>fetch</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
    <span class='id key'>key</span> <span class='op'>=</span> <span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
      <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:read</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
        <span class='id payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:super_operation</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='symbol'>:fetch</span> <span class='kw'>if</span> <span class='id payload'>payload</span>
        <span class='id read_entry'>read_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='kw'>if</span> <span class='id entry'>entry</span> <span class='op'>&amp;&amp;</span> <span class='id entry'>entry</span><span class='period'>.</span><span class='id expired?'>expired?</span>
      <span class='id race_ttl'>race_ttl</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:race_condition_ttl</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id to_f'>to_f</span>
      <span class='kw'>if</span> <span class='id race_ttl'>race_ttl</span> <span class='kw'>and</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='period'>.</span><span class='id to_f'>to_f</span> <span class='op'>-</span> <span class='id entry'>entry</span><span class='period'>.</span><span class='id expires_at'>expires_at</span> <span class='op'>&lt;=</span> <span class='id race_ttl'>race_ttl</span>
        <span class='id entry'>entry</span><span class='period'>.</span><span class='id expires_at'>expires_at</span> <span class='op'>=</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span> <span class='op'>+</span> <span class='id race_ttl'>race_ttl</span>
        <span class='id write_entry'>write_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id entry'>entry</span><span class='comma'>,</span> <span class='symbol'>:expires_in</span> <span class='op'>=&gt;</span> <span class='id race_ttl'>race_ttl</span> <span class='op'>*</span> <span class='int'>2</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id entry'>entry</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='kw'>end</span>

    <span class='kw'>if</span> <span class='id entry'>entry</span>
      <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:fetch_hit</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span> <span class='rbrace'>}</span>
      <span class='id entry'>entry</span><span class='period'>.</span><span class='id value'>value</span>
    <span class='kw'>else</span>
      <span class='id result'>result</span> <span class='op'>=</span> <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:generate</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
        <span class='kw'>yield</span>
      <span class='kw'>end</span>
      <span class='id write'>write</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id result'>result</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
      <span class='id result'>result</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id read'>read</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="increment-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>increment</strong>(name, amount = 1, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Increment an integer value in the cache.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>
<p>
All implementations may not support this method.
</p>


  </div>
</div>
<div class="tags">
  <h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>NotImplementedError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


407
408
409</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 407</span>

<span class='kw'>def</span> <span class='id increment'>increment</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id amount'>amount</span> <span class='op'>=</span> <span class='int'>1</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>NotImplementedError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> does not support increment</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mute-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>mute</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Silence the logger within a block.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


164
165
166
167
168
169</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 164</span>

<span class='kw'>def</span> <span class='id mute'>mute</span>
  <span class='id previous_silence'>previous_silence</span><span class='comma'>,</span> <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='ivar'>@silence</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='ivar'>@silence</span><span class='comma'>,</span> <span class='kw'>true</span>
  <span class='kw'>yield</span>
<span class='kw'>ensure</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='id previous_silence'>previous_silence</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read</strong>(name, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Fetches data from the cache, using the given key. If there is data in the
cache with the given key, then that data is returned. Otherwise, nil is
returned.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 312</span>

<span class='kw'>def</span> <span class='id read'>read</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id key'>key</span> <span class='op'>=</span> <span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:read</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
    <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id read_entry'>read_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id entry'>entry</span>
      <span class='kw'>if</span> <span class='id entry'>entry</span><span class='period'>.</span><span class='id expired?'>expired?</span>
        <span class='id delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
        <span class='id payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id payload'>payload</span>
        <span class='kw'>nil</span>
      <span class='kw'>else</span>
        <span class='id payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id payload'>payload</span>
        <span class='id entry'>entry</span><span class='period'>.</span><span class='id value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='id payload'>payload</span><span class='lbracket'>[</span><span class='symbol'>:hit</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span> <span class='kw'>if</span> <span class='id payload'>payload</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="read_multi-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>read_multi</strong>(*names) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Read multiple values at once from the cache. Options can be passed in the
last argument.
</p>
<p>
Some cache implementation may optimize this method.
</p>
<p>
Returns a hash mapping the names provided to the values found.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 339</span>

<span class='kw'>def</span> <span class='id read_multi'>read_multi</span><span class='lparen'>(</span><span class='op'>*</span><span class='id names'>names</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id names'>names</span><span class='period'>.</span><span class='id extract_options!'>extract_options!</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id results'>results</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id names'>names</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='op'>|</span>
    <span class='id key'>key</span> <span class='op'>=</span> <span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='id entry'>entry</span> <span class='op'>=</span> <span class='id read_entry'>read_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id entry'>entry</span>
      <span class='kw'>if</span> <span class='id entry'>entry</span><span class='period'>.</span><span class='id expired?'>expired?</span>
        <span class='id delete_entry'>delete_entry</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='id results'>results</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id entry'>entry</span><span class='period'>.</span><span class='id value'>value</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id results'>results</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="silence!-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>silence!</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Silence the logger.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


158
159
160
161</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 158</span>

<span class='kw'>def</span> <span class='id silence!'>silence!</span>
  <span class='ivar'>@silence</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="write-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>write</strong>(name, value, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Writes the value to the cache, with the key.
</p>
<p>
Options are passed to the underlying cache implementation.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


360
361
362
363
364
365
366</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'activesupport/lib/active_support/cache.rb', line 360</span>

<span class='kw'>def</span> <span class='id write'>write</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id merged_options'>merged_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id instrument'>instrument</span><span class='lparen'>(</span><span class='symbol'>:write</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id payload'>payload</span><span class='op'>|</span>
    <span class='id entry'>entry</span> <span class='op'>=</span> <span class='const'>Entry</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id value'>value</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
    <span class='id write_entry'>write_entry</span><span class='lparen'>(</span><span class='id namespaced_key'>namespaced_key</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='id entry'>entry</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:26 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>