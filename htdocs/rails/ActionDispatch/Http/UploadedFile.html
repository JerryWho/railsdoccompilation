<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: ActionDispatch::Http::UploadedFile</title>
<link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '../..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (U)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../../ActionDispatch.html" title="ActionDispatch (module)">ActionDispatch</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Http.html" title="ActionDispatch::Http (module)">Http</a></span></span>
     &raquo; 
    <span class="title">UploadedFile</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: ActionDispatch::Http::UploadedFile
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">actionpack/lib/action_dispatch/http/upload.rb</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#extended-class_method" title="extended (class method)">+ (Object) <strong>extended</strong>(object) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#original_filename-instance_method" title="#original_filename (instance method)">- (Object) <strong>original_filename</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Take the basename of the upload&#8217;s original filename.
</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="extended-class_method">
  
    + (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>extended</strong>(object) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10
11</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_dispatch/http/upload.rb', line 6</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id extended'>extended</span><span class='lparen'>(</span><span class='id object'>object</span><span class='rparen'>)</span>
  <span class='id object'>object</span><span class='period'>.</span><span class='id class_eval'>class_eval</span> <span class='kw'>do</span>
    <span class='id attr_accessor'>attr_accessor</span> <span class='symbol'>:original_path</span><span class='comma'>,</span> <span class='symbol'>:content_type</span>
    <span class='id alias_method'>alias_method</span> <span class='symbol'>:local_path</span><span class='comma'>,</span> <span class='symbol'>:path</span> <span class='kw'>if</span> <span class='id method_defined?'>method_defined?</span><span class='lparen'>(</span><span class='symbol'>:path</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="original_filename-instance_method">
  
    - (<tt><span class='object_link'><a href="../../Object.html" title="Object (class)">Object</a></span></tt>) <strong>original_filename</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Take the basename of the upload&#8217;s original filename. This handles the
full Windows paths given by Internet Explorer (and perhaps other broken
user agents) without affecting those which give the lone filename. The
Windows regexp is adapted from Perl&#8217;s File::Basename.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'actionpack/lib/action_dispatch/http/upload.rb', line 18</span>

<span class='kw'>def</span> <span class='id original_filename'>original_filename</span>
  <span class='kw'>unless</span> <span class='kw'>defined?</span> <span class='ivar'>@original_filename</span>
    <span class='ivar'>@original_filename</span> <span class='op'>=</span>
      <span class='kw'>unless</span> <span class='id original_path'>original_path</span><span class='period'>.</span><span class='id blank?'>blank?</span>
        <span class='kw'>if</span> <span class='id original_path'>original_path</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^(?:.*[:\\\/])?(.*)</span><span class='regexp_end'>/m</span></span>
          <span class='backref'>$1</span>
        <span class='kw'>else</span>
          <span class='const'>File</span><span class='period'>.</span><span class='id basename'>basename</span> <span class='id original_path'>original_path</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='ivar'>@original_filename</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 20:03:34 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>