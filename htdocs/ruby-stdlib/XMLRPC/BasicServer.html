<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: XMLRPC::BasicServer</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (B)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../XMLRPC.html" title="XMLRPC (module)">XMLRPC</a></span></span>
     &raquo; 
    <span class="title">BasicServer</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: XMLRPC::BasicServer
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">XMLRPC::BasicServer</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="ParseContentType.html" title="XMLRPC::ParseContentType (module)">ParseContentType</a></span>, <span class='object_link'><a href="ParserWriterChooseMixin.html" title="XMLRPC::ParserWriterChooseMixin (module)">ParserWriterChooseMixin</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/xmlrpc/server.rb</dd>
  
</dl>
<div class="clear"></div>

<div id="subclasses">
  <h2>Direct Known Subclasses</h2>
  <p class="children"><span class='object_link'><a href="CGIServer.html" title="XMLRPC::CGIServer (class)">CGIServer</a></span>, <span class='object_link'><a href="ModRubyServer.html" title="XMLRPC::ModRubyServer (class)">ModRubyServer</a></span>, <span class='object_link'><a href="WEBrickServlet.html" title="XMLRPC::WEBrickServlet (class)">WEBrickServlet</a></span></p>
</div>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="ERR_METHOD_MISSING-constant" class="">ERR_METHOD_MISSING =
          
        </dt>
        <dd><pre class="code"><span class='int'>1</span></pre></dd>
      
        <dt id="ERR_UNCAUGHT_EXCEPTION-constant" class="">ERR_UNCAUGHT_EXCEPTION =
          
        </dt>
        <dd><pre class="code"><span class='int'>2</span></pre></dd>
      
        <dt id="ERR_MC_WRONG_PARAM-constant" class="">ERR_MC_WRONG_PARAM =
          
        </dt>
        <dd><pre class="code"><span class='int'>3</span></pre></dd>
      
        <dt id="ERR_MC_MISSING_PARAMS-constant" class="">ERR_MC_MISSING_PARAMS =
          
        </dt>
        <dd><pre class="code"><span class='int'>4</span></pre></dd>
      
        <dt id="ERR_MC_MISSING_METHNAME-constant" class="">ERR_MC_MISSING_METHNAME =
          
        </dt>
        <dd><pre class="code"><span class='int'>5</span></pre></dd>
      
        <dt id="ERR_MC_RECURSIVE_CALL-constant" class="">ERR_MC_RECURSIVE_CALL =
          
        </dt>
        <dd><pre class="code"><span class='int'>6</span></pre></dd>
      
        <dt id="ERR_MC_WRONG_PARAM_PARAMS-constant" class="">ERR_MC_WRONG_PARAM_PARAMS =
          
        </dt>
        <dd><pre class="code"><span class='int'>7</span></pre></dd>
      
        <dt id="ERR_MC_EXPECTED_STRUCT-constant" class="">ERR_MC_EXPECTED_STRUCT =
          
        </dt>
        <dd><pre class="code"><span class='int'>8</span></pre></dd>
      
    </dl>
  


  
  
  
  
  
  
  
  

  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_handler-instance_method" title="#add_handler (instance method)">- (Object) <strong>add_handler</strong>(prefix, obj_or_signature = nil, help = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_introspection-instance_method" title="#add_introspection (instance method)">- (Object) <strong>add_introspection</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_multicall-instance_method" title="#add_multicall (instance method)">- (Object) <strong>add_multicall</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_default_handler-instance_method" title="#get_default_handler (instance method)">- (Object) <strong>get_default_handler</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_service_hook-instance_method" title="#get_service_hook (instance method)">- (Object) <strong>get_service_hook</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (BasicServer) <strong>initialize</strong>(class_delim = &quot;.&quot;) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of BasicServer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#process-instance_method" title="#process (instance method)">- (Object) <strong>process</strong>(data) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_default_handler-instance_method" title="#set_default_handler (instance method)">- (Object) <strong>set_default_handler</strong>(&amp;handler) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_service_hook-instance_method" title="#set_service_hook (instance method)">- (Object) <strong>set_service_hook</strong>(&amp;handler) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ParseContentType.html" title="XMLRPC::ParseContentType (module)">ParseContentType</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ParseContentType.html#parse_content_type-instance_method" title="XMLRPC::ParseContentType#parse_content_type (method)">#parse_content_type</a></span></p>

  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="ParserWriterChooseMixin.html" title="XMLRPC::ParserWriterChooseMixin (module)">ParserWriterChooseMixin</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="ParserWriterChooseMixin.html#set_parser-instance_method" title="XMLRPC::ParserWriterChooseMixin#set_parser (method)">#set_parser</a></span>, <span class='object_link'><a href="ParserWriterChooseMixin.html#set_writer-instance_method" title="XMLRPC::ParserWriterChooseMixin#set_writer (method)">#set_writer</a></span></p>
<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="XMLRPC::BasicServer (class)">BasicServer</a></span></tt>) <strong>initialize</strong>(class_delim = &quot;.&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of BasicServer
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


170
171
172
173
174
175
176
177
178
179
180
181</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 170</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id class_delim'>class_delim</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>.</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='ivar'>@handler</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='ivar'>@default_handler</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@service_hook</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='ivar'>@class_delim</span> <span class='op'>=</span> <span class='id class_delim'>class_delim</span>
  <span class='ivar'>@create</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@parser</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='id add_multicall'>add_multicall</span>     <span class='kw'>if</span> <span class='const'>Config</span><span class='op'>::</span><span class='const'>ENABLE_MULTICALL</span>
  <span class='id add_introspection'>add_introspection</span> <span class='kw'>if</span> <span class='const'>Config</span><span class='op'>::</span><span class='const'>ENABLE_INTROSPECTION</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_handler-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_handler</strong>(prefix, obj_or_signature = nil, help = nil, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200
201</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 183</span>

<span class='kw'>def</span> <span class='id add_handler'>add_handler</span><span class='lparen'>(</span><span class='id prefix'>prefix</span><span class='comma'>,</span> <span class='id obj_or_signature'>obj_or_signature</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='id help'>help</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='comment'># proc-handler
</span>    <span class='ivar'>@handler</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id prefix'>prefix</span><span class='comma'>,</span> <span class='id block'>block</span><span class='comma'>,</span> <span class='id obj_or_signature'>obj_or_signature</span><span class='comma'>,</span> <span class='id help'>help</span><span class='rbracket'>]</span>
  <span class='kw'>else</span>
    <span class='kw'>if</span> <span class='id prefix'>prefix</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>String</span>
      <span class='comment'># class-handler
</span>      <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Expected non-nil value</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id obj_or_signature'>obj_or_signature</span><span class='period'>.</span><span class='id nil?'>nil?</span>
      <span class='ivar'>@handler</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id prefix'>prefix</span> <span class='op'>+</span> <span class='ivar'>@class_delim</span><span class='comma'>,</span> <span class='id obj_or_signature'>obj_or_signature</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='id prefix'>prefix</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>XMLRPC</span><span class='op'>::</span><span class='const'>Service</span><span class='op'>::</span><span class='const'>BasicInterface</span>
      <span class='comment'># class-handler with interface
</span>      <span class='comment'># add all methods
</span>      <span class='ivar'>@handler</span> <span class='op'>+=</span> <span class='id prefix'>prefix</span><span class='period'>.</span><span class='id get_methods'>get_methods</span><span class='lparen'>(</span><span class='id obj_or_signature'>obj_or_signature</span><span class='comma'>,</span> <span class='ivar'>@class_delim</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Wrong type for parameter 'prefix'</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_introspection-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_introspection</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


263
264
265
266
267
268
269
270
271
272
273
274
275
276
277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295
296
297
298
299
300
301
302
303
304
305
306</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 263</span>

<span class='kw'>def</span> <span class='id add_introspection'>add_introspection</span>
  <span class='id add_handler'>add_handler</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.listMethods</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span><span class='qwords_beg'>%w(</span><span class='tstring_content'>array</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>List methods available on this XML-RPC server</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id methods'>methods</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@handler</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Proc</span>
        <span class='id methods'>methods</span> <span class='op'>&lt;&lt;</span> <span class='id name'>name</span>
      <span class='kw'>else</span>
        <span class='id obj'>obj</span><span class='period'>.</span><span class='id class'>class</span><span class='period'>.</span><span class='id public_instance_methods'>public_instance_methods</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id meth'>meth</span><span class='op'>|</span>
          <span class='id methods'>methods</span> <span class='op'>&lt;&lt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id meth'>meth</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id methods'>methods</span>
  <span class='kw'>end</span>

  <span class='id add_handler'>add_handler</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.methodSignature</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>array</span><span class='words_sep'> </span><span class='tstring_content'>string</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Returns method signature</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id meth'>meth</span><span class='op'>|</span>
    <span class='id sigs'>sigs</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='ivar'>@handler</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='comma'>,</span> <span class='id sig'>sig</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Proc</span> <span class='kw'>and</span> <span class='id sig'>sig</span> <span class='op'>!=</span> <span class='kw'>nil</span> <span class='kw'>and</span> <span class='id name'>name</span> <span class='op'>==</span> <span class='id meth'>meth</span>
        <span class='kw'>if</span> <span class='id sig'>sig</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Array</span>
          <span class='comment'># sig contains multiple signatures, e.g. [[&quot;array&quot;], [&quot;array&quot;, &quot;string&quot;]]
</span>          <span class='id sig'>sig</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id s'>s</span><span class='op'>|</span> <span class='id sigs'>sigs</span> <span class='op'>&lt;&lt;</span> <span class='id s'>s</span><span class='rbrace'>}</span>
        <span class='kw'>else</span>
          <span class='comment'># sig is a single signature, e.g. [&quot;array&quot;]
</span>          <span class='id sigs'>sigs</span> <span class='op'>&lt;&lt;</span> <span class='id sig'>sig</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id sigs'>sigs</span><span class='period'>.</span><span class='id uniq!'>uniq!</span> <span class='op'>||</span> <span class='id sigs'>sigs</span>  <span class='comment'># remove eventually duplicated signatures
</span>  <span class='kw'>end</span>

  <span class='id add_handler'>add_handler</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.methodHelp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>string</span><span class='words_sep'> </span><span class='tstring_content'>string</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Returns help on using this method</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id meth'>meth</span><span class='op'>|</span>
    <span class='id help'>help</span> <span class='op'>=</span> <span class='kw'>nil</span>
    <span class='ivar'>@handler</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id obj'>obj</span><span class='comma'>,</span> <span class='id sig'>sig</span><span class='comma'>,</span> <span class='id hlp'>hlp</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id obj'>obj</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span> <span class='const'>Proc</span> <span class='kw'>and</span> <span class='id name'>name</span> <span class='op'>==</span> <span class='id meth'>meth</span>
        <span class='id help'>help</span> <span class='op'>=</span> <span class='id hlp'>hlp</span>
        <span class='kw'>break</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
    <span class='id help'>help</span> <span class='op'>||</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_multicall-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>add_multicall</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


221
222
223
224
225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243
244
245
246
247
248
249
250
251
252
253
254
255
256
257
258
259
260
261</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 221</span>

<span class='kw'>def</span> <span class='id add_multicall'>add_multicall</span>
  <span class='id add_handler'>add_handler</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.multicall</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>array</span><span class='words_sep'> </span><span class='tstring_content'>array</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Multicall Extension</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id arrStructs'>arrStructs</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id arrStructs'>arrStructs</span><span class='period'>.</span><span class='id is_a?'>is_a?</span> <span class='const'>Array</span>
      <span class='id raise'>raise</span> <span class='const'>XMLRPC</span><span class='op'>::</span><span class='const'>FaultException</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='const'>ERR_MC_WRONG_PARAM</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.multicall expects an array</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id arrStructs'>arrStructs</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id call'>call</span><span class='op'>|</span>
      <span class='kw'>if</span> <span class='id call'>call</span><span class='period'>.</span><span class='id is_a?'>is_a?</span> <span class='const'>Hash</span>
        <span class='id methodName'>methodName</span> <span class='op'>=</span> <span class='id call'>call</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>methodName</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
        <span class='id params'>params</span>     <span class='op'>=</span> <span class='id call'>call</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>params</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>

        <span class='kw'>if</span> <span class='id params'>params</span><span class='period'>.</span><span class='id nil?'>nil?</span>
          <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='const'>ERR_MC_MISSING_PARAMS</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing params</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>elsif</span> <span class='id methodName'>methodName</span><span class='period'>.</span><span class='id nil?'>nil?</span>
          <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='const'>ERR_MC_MISSING_METHNAME</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Missing methodName</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
        <span class='kw'>else</span>
          <span class='kw'>if</span> <span class='id methodName'>methodName</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.multicall</span><span class='tstring_end'>&quot;</span></span>
            <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='const'>ERR_MC_RECURSIVE_CALL</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Recursive system.multicall forbidden</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
          <span class='kw'>else</span>
            <span class='kw'>unless</span> <span class='id params'>params</span><span class='period'>.</span><span class='id is_a?'>is_a?</span> <span class='const'>Array</span>
              <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='const'>ERR_MC_WRONG_PARAM_PARAMS</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Parameter params have to be an Array</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
            <span class='kw'>else</span>
              <span class='id ok'>ok</span><span class='comma'>,</span> <span class='id val'>val</span> <span class='op'>=</span> <span class='id call_method'>call_method</span><span class='lparen'>(</span><span class='id methodName'>methodName</span><span class='comma'>,</span> <span class='op'>*</span><span class='id params'>params</span><span class='rparen'>)</span>
              <span class='kw'>if</span> <span class='id ok'>ok</span>
                <span class='comment'># correct return value
</span>                <span class='lbracket'>[</span><span class='id val'>val</span><span class='rbracket'>]</span>
              <span class='kw'>else</span>
                <span class='comment'># exception
</span>                <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='id val'>val</span><span class='period'>.</span><span class='id faultCode'>faultCode</span><span class='comma'>,</span> <span class='id val'>val</span><span class='period'>.</span><span class='id faultString'>faultString</span><span class='rparen'>)</span>
              <span class='kw'>end</span>
            <span class='kw'>end</span>
          <span class='kw'>end</span>
        <span class='kw'>end</span>

      <span class='kw'>else</span>
        <span class='id multicall_fault'>multicall_fault</span><span class='lparen'>(</span><span class='const'>ERR_MC_EXPECTED_STRUCT</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>system.multicall expected struct</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span> <span class='comment'># end add_handler
</span>  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_default_handler-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_default_handler</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 212</span>

<span class='kw'>def</span> <span class='id get_default_handler'>get_default_handler</span>
  <span class='ivar'>@default_handler</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_service_hook-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_service_hook</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


203
204
205</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 203</span>

<span class='kw'>def</span> <span class='id get_service_hook'>get_service_hook</span>
  <span class='ivar'>@service_hook</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="process-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>process</strong>(data) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 310</span>

<span class='kw'>def</span> <span class='id process'>process</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='id method'>method</span><span class='comma'>,</span> <span class='id params'>params</span> <span class='op'>=</span> <span class='id parser'>parser</span><span class='lparen'>(</span><span class='rparen'>)</span><span class='period'>.</span><span class='id parseMethodCall'>parseMethodCall</span><span class='lparen'>(</span><span class='id data'>data</span><span class='rparen'>)</span>
  <span class='id handle'>handle</span><span class='lparen'>(</span><span class='id method'>method</span><span class='comma'>,</span> <span class='op'>*</span><span class='id params'>params</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_default_handler-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_default_handler</strong>(&amp;handler) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


216
217
218
219</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 216</span>

<span class='kw'>def</span> <span class='id set_default_handler'>set_default_handler</span> <span class='lparen'>(</span><span class='op'>&amp;</span><span class='id handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@default_handler</span> <span class='op'>=</span> <span class='id handler'>handler</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_service_hook-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></tt>) <strong>set_service_hook</strong>(&amp;handler) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


207
208
209
210</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/xmlrpc/server.rb', line 207</span>

<span class='kw'>def</span> <span class='id set_service_hook'>set_service_hook</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id handler'>handler</span><span class='rparen'>)</span>
  <span class='ivar'>@service_hook</span> <span class='op'>=</span> <span class='id handler'>handler</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 14 00:02:51 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>