<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: CGI</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (C)</a> &raquo; 
    
    
    <span class="title">CGI</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: CGI
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">CGI</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/cgi/html.rb<span class="defines">,<br />
  lib/cgi/util.rb,<br /> lib/cgi/core.rb,<br /> lib/cgi/cookie.rb,<br /> lib/cgi/session.rb,<br /> lib/cgi/session/pstore.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
Class representing an HTTP cookie.
</p>
<p>
In addition to its specific fields and methods, a Cookie instance is a
delegator to the array of its values.
</p>
<p>
See RFC 2965.
</p>
<h2>Examples of use</h2>
<pre class="code">
  cookie1 = CGI::Cookie::new(&quot;name&quot;, &quot;value1&quot;, &quot;value2&quot;, ...)
  cookie1 = CGI::Cookie::new(&quot;name&quot; =&gt; &quot;name&quot;, &quot;value&quot; =&gt; &quot;value&quot;)
  cookie1 = CGI::Cookie::new('name'    =&gt; 'name',
                             'value'   =&gt; ['value1', 'value2', ...],
                             'path'    =&gt; 'path',   # optional
                             'domain'  =&gt; 'domain', # optional
                             'expires' =&gt; Time.now, # optional
                             'secure'  =&gt; true      # optional
                            )

  cgi.out(&quot;cookie&quot; =&gt; [cookie1, cookie2]) { &quot;string&quot; }

  name    = cookie1.name
  values  = cookie1.value
  path    = cookie1.path
  domain  = cookie1.domain
  expires = cookie1.expires
  secure  = cookie1.secure

  cookie1.name    = 'name'
  cookie1.value   = ['value1', 'value2', ...]
  cookie1.path    = 'path'
  cookie1.domain  = 'domain'
  cookie1.expires = Time.now + 30
  cookie1.secure  = true</pre>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="CGI/Html3.html" title="CGI::Html3 (module)">Html3</a></span>, <span class='object_link'><a href="CGI/Html4.html" title="CGI::Html4 (module)">Html4</a></span>, <span class='object_link'><a href="CGI/Html4Fr.html" title="CGI::Html4Fr (module)">Html4Fr</a></span>, <span class='object_link'><a href="CGI/Html4Tr.html" title="CGI::Html4Tr (module)">Html4Tr</a></span>, <span class='object_link'><a href="CGI/HtmlExtension.html" title="CGI::HtmlExtension (module)">HtmlExtension</a></span>, <span class='object_link'><a href="CGI/QueryExtension.html" title="CGI::QueryExtension (module)">QueryExtension</a></span>, <span class='object_link'><a href="CGI/TagMaker.html" title="CGI::TagMaker (module)">TagMaker</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="CGI/Cookie.html" title="CGI::Cookie (class)">Cookie</a></span>, <span class='object_link'><a href="CGI/InvalidEncoding.html" title="CGI::InvalidEncoding (class)">InvalidEncoding</a></span>, <span class='object_link'><a href="CGI/Session.html" title="CGI::Session (class)">Session</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="TABLE_FOR_ESCAPE_HTML__-constant" class="">TABLE_FOR_ESCAPE_HTML__ =
          
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;amp;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;quot;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;lt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="RFC822_DAYS-constant" class="">RFC822_DAYS =
          <div class="docstring">
  <div class="discussion">
    <p>
Abbreviated day-of-week names specified by RFC 822
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[ </span><span class='tstring_end'>Sun</span></span></pre></dd>
      
        <dt id="RFC822_MONTHS-constant" class="">RFC822_MONTHS =
          <div class="docstring">
  <div class="discussion">
    <p>
Abbreviated month names specified by RFC 822
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='qwords_beg'>%w[ </span><span class='tstring_end'>Jan</span></span></pre></dd>
      
        <dt id="CR-constant" class="">CR =
          <div class="docstring">
  <div class="discussion">
    <p>
String for carriage return
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\015</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="LF-constant" class="">LF =
          <div class="docstring">
  <div class="discussion">
    <p>
String for linefeed
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\012</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
        <dt id="EOL-constant" class="">EOL =
          <div class="docstring">
  <div class="discussion">
    <p>
Standard internet newline sequence
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='const'>CR</span> <span class='op'>+</span> <span class='const'>LF</span></pre></dd>
      
        <dt id="REVISION-constant" class="">REVISION =
          <div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>$Id: core.rb 27581 2010-05-01 23:54:39Z nobu $</span><span class='tstring_end'>'</span></span></pre></dd>
      
        <dt id="NEEDS_BINMODE-constant" class="">NEEDS_BINMODE =
          
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='op'>::</span><span class='const'>BINARY</span> <span class='op'>!=</span> <span class='int'>0</span></pre></dd>
      
        <dt id="PATH_SEPARATOR-constant" class="">PATH_SEPARATOR =
          <div class="docstring">
  <div class="discussion">
    <p>
Path separators in different environments.
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>UNIX</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>WINDOWS</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\\</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>MACINTOSH</span><span class='tstring_end'>'</span></span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="HTTP_STATUS-constant" class="">HTTP_STATUS =
          <div class="docstring">
  <div class="discussion">
    <p>
HTTP status codes.
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span>                  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>200 OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PARTIAL_CONTENT</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>206 Partial Content</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MULTIPLE_CHOICES</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>300 Multiple Choices</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MOVED</span><span class='tstring_end'>&quot;</span></span>               <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>301 Moved Permanently</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>REDIRECT</span><span class='tstring_end'>&quot;</span></span>            <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>302 Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_MODIFIED</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>304 Not Modified</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_REQUEST</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>400 Bad Request</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>AUTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>401 Authorization Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>FORBIDDEN</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>403 Forbidden</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_FOUND</span><span class='tstring_end'>&quot;</span></span>           <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>404 Not Found</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>METHOD_NOT_ALLOWED</span><span class='tstring_end'>&quot;</span></span>  <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>405 Method Not Allowed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_ACCEPTABLE</span><span class='tstring_end'>&quot;</span></span>      <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>406 Not Acceptable</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>LENGTH_REQUIRED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>411 Length Required</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>PRECONDITION_FAILED</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>412 Precondition Failed</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>SERVER_ERROR</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>500 Internal Server Error</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NOT_IMPLEMENTED</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>501 Method Not Implemented</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BAD_GATEWAY</span><span class='tstring_end'>&quot;</span></span>         <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>502 Bad Gateway</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
  <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>VARIANT_ALSO_VARIES</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>506 Variant Also Negotiates</span><span class='tstring_end'>&quot;</span></span>
<span class='rbrace'>}</span></pre></dd>
      
        <dt id="MAX_MULTIPART_LENGTH-constant" class="">MAX_MULTIPART_LENGTH =
          <div class="docstring">
  <div class="discussion">
    <p>
Maximum content length of multipart data
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>128</span> <span class='op'>*</span> <span class='int'>1024</span> <span class='op'>*</span> <span class='int'>1024</span></pre></dd>
      
        <dt id="MAX_MULTIPART_COUNT-constant" class="">MAX_MULTIPART_COUNT =
          <div class="docstring">
  <div class="discussion">
    <p>
Maximum number of request parameters when multipart
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='int'>128</span></pre></dd>
      
        <dt id="accept_charset-classvariable" class="">@@accept_charset =
          <div class="docstring">
  <div class="discussion">
    <p>
@@accept_charset is default accept character set. This default value
default is &#8220;UTF-8&#8221; If you want to change the default accept
character set when create a new CGI instance, set this:
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='period'>.</span><span class='id accept_charset'>accept_charset</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>UTF-8</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset-instance_method" title="#accept_charset (instance method)">- (Object) <strong>accept_charset</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create a new CGI instance.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset-class_method" title="accept_charset (class method)">+ (Object) <strong>accept_charset</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#accept_charset%3D-class_method" title="accept_charset= (class method)">+ (Object) <strong>accept_charset=</strong>(accept_charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape-class_method" title="escape (class method)">+ (Object) <strong>escape</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
URL-encode a string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape_element-class_method" title="escape_element (class method)">+ (Object) <strong>escape_element</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escape_html-class_method" title="escape_html (class method)">+ (Object) <strong>escape_html</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escapeElement-class_method" title="escapeElement (class method)">+ (Object) <strong>escapeElement</strong>(string, *elements) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Escape only the tags of certain HTML elements in <tt>string</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#escapeHTML-class_method" title="escapeHTML (class method)">+ (Object) <strong>escapeHTML</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Escape special characters in HTML, namely &amp;\&#8221;<>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#parse-class_method" title="parse (class method)">+ (Object) <strong>parse</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Parse an HTTP query string into a hash of key=>value pairs.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pretty-class_method" title="pretty (class method)">+ (Object) <strong>pretty</strong>(string, shift = &quot;  &quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Prettify (indent) an HTML string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rfc1123_date-class_method" title="rfc1123_date (class method)">+ (Object) <strong>rfc1123_date</strong>(time) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Format a <tt>Time</tt> object as a String using the format specified by RFC
1123.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape-class_method" title="unescape (class method)">+ (Object) <strong>unescape</strong>(string, encoding = @@accept_charset) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
URL-decode a string with encoding(optional).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape_element-class_method" title="unescape_element (class method)">+ (Object) <strong>unescape_element</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescape_html-class_method" title="unescape_html (class method)">+ (Object) <strong>unescape_html</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescapeElement-class_method" title="unescapeElement (class method)">+ (Object) <strong>unescapeElement</strong>(string, *elements) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Undo escaping such as that done by CGI::escapeElement().
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unescapeHTML-class_method" title="unescapeHTML (class method)">+ (Object) <strong>unescapeHTML</strong>(string) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Unescape a string that has been HTML-escaped.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#header-instance_method" title="#header (instance method)">- (Object) <strong>header</strong>(options = 'text/html') </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Create an HTTP header block as a string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (CGI) <strong>initialize</strong>(options = {}, &amp;block) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
A new instance of CGI.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#nph%3F-instance_method" title="#nph? (instance method)">- (Boolean) <strong>nph?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#out-instance_method" title="#out (instance method)">- (Object) <strong>out</strong>(options = &quot;text/html&quot;) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Print an HTTP header and body to $DEFAULT_OUTPUT ($>).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#print-instance_method" title="#print (instance method)">- (Object) <strong>print</strong>(*options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Print an argument or list of arguments to the default output stream.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="CGI (class)">CGI</a></span></tt>) <strong>initialize</strong>(options = {}, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
A new instance of CGI
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


742
743
744
745
746
747
748
749
750
751
752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 742</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='ivar'>@accept_charset_error_block</span><span class='op'>=</span><span class='id block'>block</span> <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
  <span class='ivar'>@options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='cvar'>@@accept_charset</span><span class='rbrace'>}</span>
  <span class='kw'>case</span> <span class='id options'>options</span>
  <span class='kw'>when</span> <span class='const'>Hash</span>
    <span class='ivar'>@options</span><span class='period'>.</span><span class='id merge!'>merge!</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>when</span> <span class='const'>String</span>
    <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span><span class='op'>=</span><span class='id options'>options</span>
  <span class='kw'>end</span>
  <span class='ivar'>@accept_charset</span><span class='op'>=</span><span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:accept_charset</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='op'>!</span><span class='const'>ENV</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>GATEWAY_INTERFACE</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='const'>Apache</span><span class='period'>.</span><span class='id request'>request</span><span class='period'>.</span><span class='id setup_cgi_env'>setup_cgi_env</span>
  <span class='kw'>end</span>

  <span class='id extend'>extend</span> <span class='const'>QueryExtension</span>
  <span class='ivar'>@multipart</span> <span class='op'>=</span> <span class='kw'>false</span>

  <span class='id initialize_query'>initialize_query</span><span class='lparen'>(</span><span class='rparen'>)</span>  <span class='comment'># set @params, @cookies
</span>  <span class='ivar'>@output_cookies</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='ivar'>@output_hidden</span> <span class='op'>=</span> <span class='kw'>nil</span>

  <span class='kw'>case</span> <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:tag_maker</span><span class='rbracket'>]</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html3</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Tr</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4Tr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html4Fr</span><span class='tstring_end'>&quot;</span></span>
    <span class='id require'>require</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cgi/html</span><span class='tstring_end'>'</span></span>
    <span class='id extend'>extend</span> <span class='const'>Html4Tr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>Html4Fr</span>
    <span class='id element_init'>element_init</span><span class='lparen'>(</span><span class='rparen'>)</span>
    <span class='id extend'>extend</span> <span class='const'>HtmlExtension</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="accept_charset-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="accept_charset-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create a new CGI instance.
</p>
<p>
CGI accept constructor parameters either in a hash, string as a block. But
string is as same as using :tag_maker of hash.
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'>#=&gt;  CGI.new(:tag_maker=&gt;&quot;html3&quot;)
</span></pre>
<p>
And, if you specify string, @accept_charset cannot be changed. Instead,
please use hash parameter.
</p>
<h2>accept_charset</h2>
<p>
:accept_charset specifies encoding of received query string. ( Default
value is @@accept_charset. ) If not valid, raise CGI::InvalidEncoding
</p>
<p>
Example. Suppose @@accept_charset # => &#8220;UTF-8&#8220;
</p>
<p>
when not specified:
</p>
<pre class="code">
  <span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>      <span class='comment'># @accept_charset # =&gt; &quot;UTF-8&quot;
</span></pre>
<p>
when specified &#8220;EUC-JP&#8221;:
</p>
<pre class="code">
  <span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># =&gt; &quot;EUC-JP&quot;
</span></pre>
<h2>block</h2>
<p>
When you use a block, you can write a process that query encoding is
invalid. Example:
</p>
<pre class="code">
  <span class='id encoding_error'>encoding_error</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id cgi'>cgi</span><span class='op'>=</span><span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:accept_charset</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>EUC-JP</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id name'>name</span><span class='comma'>,</span><span class='id value'>value</span><span class='op'>|</span>
    <span class='id encoding_error'>encoding_error</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id value'>value</span>
  <span class='kw'>end</span>
</pre>
<h2>tag_maker</h2>
<p>
:tag_maker specifies which version of HTML to load the HTML generation
methods for.  The following versions of HTML are supported:
</p>
<table>
<tr><td valign="top">html3</td><td><p>
HTML 3.x
</p>
</td></tr>
<tr><td valign="top">html4</td><td><p>
HTML 4.0
</p>
</td></tr>
<tr><td valign="top">html4Tr</td><td><p>
HTML 4.0 Transitional
</p>
</td></tr>
<tr><td valign="top">html4Fr</td><td><p>
HTML 4.0 with Framesets
</p>
</td></tr>
</table>
<p>
If not specified, no HTML generation methods will be loaded.
</p>
<p>
If the CGI object is not created in a standard CGI call environment (that
is, it can&#8217;t locate REQUEST_METHOD in its environment), then it will
run in &#8220;offline&#8221; mode.  In this mode, it reads its parameters
from the command line or (failing that) from standard input.  Otherwise,
cookies and other parameters are parsed automatically from the standard CGI
locations, which varies according to the REQUEST_METHOD. It works this:
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='symbol'>:tag_maker</span><span class='op'>=&gt;</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
</pre>
<p>
This will be obsolete:
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>html3</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


741
742
743</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 741</span>

<span class='kw'>def</span> <span class='id accept_charset'>accept_charset</span>
  <span class='ivar'>@accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="accept_charset-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


672
673
674</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 672</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id accept_charset'>accept_charset</span>
  <span class='cvar'>@@accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="accept_charset=-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>accept_charset=</strong>(accept_charset) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


676
677
678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 676</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id accept_charset='>accept_charset=</span><span class='lparen'>(</span><span class='id accept_charset'>accept_charset</span><span class='rparen'>)</span>
  <span class='cvar'>@@accept_charset</span><span class='op'>=</span><span class='id accept_charset'>accept_charset</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
URL-encode a string.
</p>
<pre class="code">
  <span class='id url_encoded_string'>url_encoded_string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>'Stop!' said Fred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
     <span class='comment'># =&gt; &quot;%27Stop%21%27+said+Fred&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


6
7
8
9
10</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 6</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape'>escape</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>([^ a-zA-Z0-9_.-]+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span> <span class='op'>+</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id unpack'>unpack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>H2</span><span class='tstring_end'>'</span></span> <span class='op'>*</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='rparen'>)</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id upcase'>upcase</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape_element-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape_element</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 137</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape_element'>escape_element</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escape_html-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escape_html</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


86
87
88</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 86</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escape_html'>escape_html</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escapeElement-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escapeElement</strong>(string, *elements) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Escape only the tags of certain HTML elements in <tt>string</tt>.
</p>
<p>
Takes an element or elements or array of elements.  Each element is
specified by the name of the element, without angle brackets. This matches
both the start and the end tag of that element. The attribute list of the
open tag will also be escaped (for instance, the double-quotes surrounding
attribute values).
</p>
<pre class="code">
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;
</span>
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='comment'># &quot;&lt;BR&gt;&amp;lt;A HREF=&amp;quot;url&amp;quot;&amp;gt;&amp;lt;/A&amp;gt&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


106
107
108
109
110
111
112
113
114
115</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 106</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeElement'>escapeElement</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id elements'>elements</span><span class='rparen'>)</span>
  <span class='id elements'>elements</span> <span class='op'>=</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id elements'>elements</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id elements'>elements</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id string'>string</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="escapeHTML-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>escapeHTML</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Escape special characters in HTML, namely &amp;\&#8221;<>
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Usage: foo &quot;bar&quot; &lt;baz&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
     <span class='comment'># =&gt; &quot;Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


33
34
35</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 33</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;\&quot;&lt;&gt;]</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='const'>TABLE_FOR_ESCAPE_HTML__</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="parse-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>parse</strong>(query) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Parse an HTTP query string into a hash of key=>value pairs.
</p>
<pre class="code">
  <span class='id params'>params</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>query_string</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># {&quot;name1&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...],
</span>    <span class='comment'>#  &quot;name2&quot; =&gt; [&quot;value1&quot;, &quot;value2&quot;, ...], ... }</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332
333
334
335
336
337
338
339
340
341
342</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 330</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id parse'>parse</span><span class='lparen'>(</span><span class='id query'>query</span><span class='rparen'>)</span>
  <span class='id params'>params</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='id query'>query</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>[&amp;;]</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id pairs'>pairs</span><span class='op'>|</span>
    <span class='id key'>key</span><span class='comma'>,</span> <span class='id value'>value</span> <span class='op'>=</span> <span class='id pairs'>pairs</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>=</span><span class='tstring_end'>'</span></span><span class='comma'>,</span><span class='int'>2</span><span class='rparen'>)</span><span class='period'>.</span><span class='id collect'>collect</span><span class='lbrace'>{</span><span class='op'>|</span><span class='id v'>v</span><span class='op'>|</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='id v'>v</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
    <span class='kw'>if</span> <span class='id key'>key</span> <span class='op'>&amp;&amp;</span> <span class='id value'>value</span>
      <span class='id params'>params</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='id key'>key</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id push'>push</span><span class='lparen'>(</span><span class='id value'>value</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id value'>value</span><span class='rbracket'>]</span>
    <span class='kw'>elsif</span> <span class='id key'>key</span>
      <span class='id params'>params</span><span class='lbracket'>[</span><span class='id key'>key</span><span class='rbracket'>]</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id params'>params</span><span class='period'>.</span><span class='id default'>default</span><span class='op'>=</span><span class='lbracket'>[</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id freeze'>freeze</span>
  <span class='id params'>params</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pretty-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pretty</strong>(string, shift = &quot;  &quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Prettify (indent) an HTML string.
</p>
<p>
<tt>string</tt> is the HTML string to indent.  <tt>shift</tt> is the
indentation unit to use; it defaults to two spaces.
</p>
<pre class="code">
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># &lt;HTML&gt;
</span>    <span class='comment'>#   &lt;BODY&gt;
</span>    <span class='comment'>#   &lt;/BODY&gt;
</span>    <span class='comment'># &lt;/HTML&gt;
</span>
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&lt;HTML&gt;&lt;BODY&gt;&lt;/BODY&gt;&lt;/HTML&gt;</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\t</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># &lt;HTML&gt;
</span>    <span class='comment'>#         &lt;BODY&gt;
</span>    <span class='comment'>#         &lt;/BODY&gt;
</span>    <span class='comment'># &lt;/HTML&gt;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


178
179
180
181
182
183
184
185
186
187</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 178</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id pretty'>pretty</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='id shift'>shift</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>  </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id lines'>lines</span> <span class='op'>=</span> <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(?!\A)&lt;.*?&gt;</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n\\0</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&lt;.*?&gt;(?!\n)</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\\0\n</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id end_pos'>end_pos</span> <span class='op'>=</span> <span class='int'>0</span>
  <span class='kw'>while</span> <span class='id end_pos'>end_pos</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^&lt;\/(\w+)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='id end_pos'>end_pos</span><span class='rparen'>)</span>
    <span class='id element'>element</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='id start_pos'>start_pos</span> <span class='op'>=</span> <span class='id lines'>lines</span><span class='period'>.</span><span class='id rindex'>rindex</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^\s*&lt;</span><span class='embexpr_beg'>#{</span><span class='id element'>element</span><span class='rbrace'>}</span><span class='regexp_end'>/i</span></span><span class='comma'>,</span> <span class='id end_pos'>end_pos</span><span class='rparen'>)</span>
    <span class='id lines'>lines</span><span class='lbracket'>[</span><span class='id start_pos'>start_pos</span> <span class='op'>...</span> <span class='id end_pos'>end_pos</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id lines'>lines</span><span class='lbracket'>[</span><span class='id start_pos'>start_pos</span> <span class='op'>...</span> <span class='id end_pos'>end_pos</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\n(?!\z)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span> <span class='op'>+</span> <span class='id shift'>shift</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>__</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='id lines'>lines</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>^((?:</span><span class='embexpr_beg'>#{</span><span class='const'>Regexp</span><span class='op'>::</span><span class='id quote'>quote</span><span class='lparen'>(</span><span class='id shift'>shift</span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)*)__(?=&lt;\/?\w)</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\1</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rfc1123_date-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rfc1123_date</strong>(time) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Format a <tt>Time</tt> object as a String using the format specified by RFC
1123.
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='op'>::</span><span class='id rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span><span class='rparen'>)</span>
    <span class='comment'># Sat, 01 Jan 2000 00:00:00 GMT</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 154</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id rfc1123_date'>rfc1123_date</span><span class='lparen'>(</span><span class='id time'>time</span><span class='rparen'>)</span>
  <span class='id t'>t</span> <span class='op'>=</span> <span class='id time'>time</span><span class='period'>.</span><span class='id clone'>clone</span><span class='period'>.</span><span class='id gmtime'>gmtime</span>
  <span class='kw'>return</span> <span class='id format'>format</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%s, %.2d %s %.4d %.2d:%.2d:%.2d GMT</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
              <span class='const'>RFC822_DAYS</span><span class='lbracket'>[</span><span class='id t'>t</span><span class='period'>.</span><span class='id wday'>wday</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id day'>day</span><span class='comma'>,</span> <span class='const'>RFC822_MONTHS</span><span class='lbracket'>[</span><span class='id t'>t</span><span class='period'>.</span><span class='id month'>month</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id year'>year</span><span class='comma'>,</span>
              <span class='id t'>t</span><span class='period'>.</span><span class='id hour'>hour</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id min'>min</span><span class='comma'>,</span> <span class='id t'>t</span><span class='period'>.</span><span class='id sec'>sec</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape</strong>(string, encoding = @@accept_charset) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
URL-decode a string with encoding(optional).
</p>
<pre class="code">
  <span class='id string'>string</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>%27Stop%21%27+said+Fred</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
     <span class='comment'># =&gt; &quot;'Stop!' said Fred&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 16</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape'>unescape</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span><span class='id encoding'>encoding</span><span class='op'>=</span><span class='cvar'>@@accept_charset</span><span class='rparen'>)</span>
  <span class='id str'>str</span><span class='op'>=</span><span class='id string'>string</span><span class='period'>.</span><span class='id tr'>tr</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>+</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>((?:%[0-9a-fA-F]{2})+)</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='lbracket'>[</span><span class='backref'>$1</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id pack'>pack</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>H*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id encoding'>encoding</span><span class='rparen'>)</span>
  <span class='id str'>str</span><span class='period'>.</span><span class='id valid_encoding?'>valid_encoding?</span> <span class='op'>?</span> <span class='id str'>str</span> <span class='op'>:</span> <span class='id str'>str</span><span class='period'>.</span><span class='id force_encoding'>force_encoding</span><span class='lparen'>(</span><span class='id string'>string</span><span class='period'>.</span><span class='id encoding'>encoding</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape_element-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape_element</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


140
141
142</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 140</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape_element'>unescape_element</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescape_html-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescape_html</strong>(str) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


89
90
91</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 89</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescape_html'>unescape_html</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
  <span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id str'>str</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescapeElement-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescapeElement</strong>(string, *elements) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Undo escaping such as that done by CGI::escapeElement()
</p>
<pre class="code">
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
          <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;
</span>
  <span class='id print'>print</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span>
          <span class='const'>CGI</span><span class='op'>::</span><span class='id escapeHTML'>escapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;BR&gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>A</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>IMG</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='comment'># &quot;&amp;lt;BR&amp;gt;&lt;A HREF=&quot;url&quot;&gt;&lt;/A&gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


127
128
129
130
131
132
133
134
135
136</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 127</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeElement'>unescapeElement</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='op'>*</span><span class='id elements'>elements</span><span class='rparen'>)</span>
  <span class='id elements'>elements</span> <span class='op'>=</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id elements'>elements</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>Array</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id elements'>elements</span><span class='period'>.</span><span class='id empty?'>empty?</span>
    <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;lt;\/?(?:</span><span class='embexpr_beg'>#{</span><span class='id elements'>elements</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>|</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span><span class='rbrace'>}</span><span class='tstring_content'>)(?!\w)(?:.|\n)*?&amp;gt;</span><span class='regexp_end'>/i</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='backref'>$&amp;</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id string'>string</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unescapeHTML-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unescapeHTML</strong>(string) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Unescape a string that has been HTML-escaped
</p>
<pre class="code">
  <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Usage: foo &amp;quot;bar&amp;quot; &amp;lt;baz&amp;gt;</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
     <span class='comment'># =&gt; &quot;Usage: foo \&quot;bar\&quot; &lt;baz&gt;&quot;</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/util.rb', line 41</span>

<span class='kw'>def</span> <span class='const'>CGI</span><span class='op'>::</span><span class='id unescapeHTML'>unescapeHTML</span><span class='lparen'>(</span><span class='id string'>string</span><span class='rparen'>)</span>
  <span class='id enc'>enc</span> <span class='op'>=</span> <span class='id string'>string</span><span class='period'>.</span><span class='id encoding'>encoding</span>
  <span class='kw'>if</span> <span class='lbracket'>[</span><span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_16LE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32BE</span><span class='comma'>,</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_32LE</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='const'>Regexp</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;(amp|quot|gt|lt|#[0-9]+|#x[0-9A-Fa-f]+);</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>do</span>
      <span class='kw'>case</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>US-ASCII</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>amp</span><span class='tstring_end'>'</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>quot</span><span class='tstring_end'>'</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span><span class='period'>.</span><span class='id encode'>encode</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>        <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>  <span class='kw'>then</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id asciicompat'>asciicompat</span> <span class='op'>=</span> <span class='const'>Encoding</span><span class='period'>.</span><span class='id compatible?'>compatible?</span><span class='lparen'>(</span><span class='id string'>string</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>a</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='id string'>string</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>&amp;(amp|quot|gt|lt|\#[0-9]+|\#x[0-9A-Fa-f]+);</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='kw'>do</span>
    <span class='id match'>match</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id dup'>dup</span>
    <span class='kw'>case</span> <span class='id match'>match</span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>amp</span><span class='tstring_end'>'</span></span>                 <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&amp;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>quot</span><span class='tstring_end'>'</span></span>                <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&gt;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lt</span><span class='tstring_end'>'</span></span>                  <span class='kw'>then</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&lt;</span><span class='tstring_end'>'</span></span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#0*(\d+)\z</span><span class='regexp_end'>/</span></span>
      <span class='id n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span>
      <span class='kw'>if</span> <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
        <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
        <span class='id asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
        <span class='id n'>n</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\A#x([0-9a-f]+)\z</span><span class='regexp_end'>/i</span></span>
      <span class='id n'>n</span> <span class='op'>=</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id hex'>hex</span>
      <span class='kw'>if</span> <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>UTF_8</span> <span class='kw'>or</span>
        <span class='id enc'>enc</span> <span class='op'>==</span> <span class='const'>Encoding</span><span class='op'>::</span><span class='const'>ISO_8859_1</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>256</span> <span class='kw'>or</span>
        <span class='id asciicompat'>asciicompat</span> <span class='op'>&amp;&amp;</span> <span class='id n'>n</span> <span class='op'>&lt;</span> <span class='int'>128</span>
        <span class='id n'>n</span><span class='period'>.</span><span class='id chr'>chr</span><span class='lparen'>(</span><span class='id enc'>enc</span><span class='rparen'>)</span>
      <span class='kw'>else</span>
        <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;#x</span><span class='embexpr_beg'>#{</span><span class='backref'>$1</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
      <span class='kw'>end</span>
    <span class='kw'>else</span>
      <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>&amp;</span><span class='embexpr_beg'>#{</span><span class='id match'>match</span><span class='rbrace'>}</span><span class='tstring_content'>;</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="header-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>header</strong>(options = 'text/html') 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Create an HTTP header block as a string.
</p>
<p>
Includes the empty line that ends the header block.
</p>
<p>
<tt>options</tt> can be a string specifying the Content-Type (defaults to
text/html), or a hash of header key/value pairs.  The following header keys
are recognized:
</p>
<table>
<tr><td valign="top">type</td><td><p>
the Content-Type header.  Defaults to &#8220;text/html&#8220;
</p>
</td></tr>
<tr><td valign="top">charset</td><td><p>
the charset of the body, appended to the Content-Type header.
</p>
</td></tr>
<tr><td valign="top">nph</td><td><p>
a boolean value.  If true, prepend protocol string and status code, and
date; and sets default values for &#8220;server&#8221; and
&#8220;connection&#8221; if not explicitly set.
</p>
</td></tr>
<tr><td valign="top">status</td><td><p>
the HTTP status code, returned as the Status header.  See the list of
available status codes below.
</p>
</td></tr>
<tr><td valign="top">server</td><td><p>
the server software, returned as the Server header.
</p>
</td></tr>
<tr><td valign="top">connection</td><td><p>
the connection type, returned as the Connection header (for instance,
&#8220;close&#8221;.
</p>
</td></tr>
<tr><td valign="top">length</td><td><p>
the length of the content that will be sent, returned as the Content-Length
header.
</p>
</td></tr>
<tr><td valign="top">language</td><td><p>
the language of the content, returned as the Content-Language header.
</p>
</td></tr>
<tr><td valign="top">expires</td><td><p>
the time on which the current content expires, as a <tt>Time</tt> object,
returned as the Expires header.
</p>
</td></tr>
<tr><td valign="top">cookie</td><td><p>
a cookie or cookies, returned as one or more Set-Cookie headers. The value
can be the literal string of the cookie; a CGI::Cookie object; an Array of
literal cookie strings or Cookie objects; or a hash all of whose values are
literal cookie strings or Cookie objects. These cookies are in addition to
the cookies held in the @output_cookies field.
</p>
</td></tr>
</table>
<p>
Other header lines can also be set; they are appended as key: value.
</p>
<pre class="code">
  header
    # Content-Type: text/html

  header(&quot;text/plain&quot;)
    # Content-Type: text/plain

  header(&quot;nph&quot;        =&gt; true,
         &quot;status&quot;     =&gt; &quot;OK&quot;,  # == &quot;200 OK&quot;
           # &quot;status&quot;     =&gt; &quot;200 GOOD&quot;,
         &quot;server&quot;     =&gt; ENV['SERVER_SOFTWARE'],
         &quot;connection&quot; =&gt; &quot;close&quot;,
         &quot;type&quot;       =&gt; &quot;text/html&quot;,
         &quot;charset&quot;    =&gt; &quot;iso-2022-jp&quot;,
           # Content-Type: text/html; charset=iso-2022-jp
         &quot;length&quot;     =&gt; 103,
         &quot;language&quot;   =&gt; &quot;ja&quot;,
         &quot;expires&quot;    =&gt; Time.now + 30,
         &quot;cookie&quot;     =&gt; [cookie1, cookie2],
         &quot;my_header1&quot; =&gt; &quot;my_value&quot;
         &quot;my_header2&quot; =&gt; &quot;my_value&quot;)
</pre>
<p>
The status codes are:
</p>
<pre class="code">
  &quot;OK&quot;                  --&gt; &quot;200 OK&quot;
  &quot;PARTIAL_CONTENT&quot;     --&gt; &quot;206 Partial Content&quot;
  &quot;MULTIPLE_CHOICES&quot;    --&gt; &quot;300 Multiple Choices&quot;
  &quot;MOVED&quot;               --&gt; &quot;301 Moved Permanently&quot;
  &quot;REDIRECT&quot;            --&gt; &quot;302 Found&quot;
  &quot;NOT_MODIFIED&quot;        --&gt; &quot;304 Not Modified&quot;
  &quot;BAD_REQUEST&quot;         --&gt; &quot;400 Bad Request&quot;
  &quot;AUTH_REQUIRED&quot;       --&gt; &quot;401 Authorization Required&quot;
  &quot;FORBIDDEN&quot;           --&gt; &quot;403 Forbidden&quot;
  &quot;NOT_FOUND&quot;           --&gt; &quot;404 Not Found&quot;
  &quot;METHOD_NOT_ALLOWED&quot;  --&gt; &quot;405 Method Not Allowed&quot;
  &quot;NOT_ACCEPTABLE&quot;      --&gt; &quot;406 Not Acceptable&quot;
  &quot;LENGTH_REQUIRED&quot;     --&gt; &quot;411 Length Required&quot;
  &quot;PRECONDITION_FAILED&quot; --&gt; &quot;412 Precondition Failed&quot;
  &quot;SERVER_ERROR&quot;        --&gt; &quot;500 Internal Server Error&quot;
  &quot;NOT_IMPLEMENTED&quot;     --&gt; &quot;501 Method Not Implemented&quot;
  &quot;BAD_GATEWAY&quot;         --&gt; &quot;502 Bad Gateway&quot;
  &quot;VARIANT_ALSO_VARIES&quot; --&gt; &quot;506 Variant Also Negotiates&quot;
</pre>
<p>
This method does not perform charset conversion.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 136</span>

<span class='kw'>def</span> <span class='id header'>header</span><span class='lparen'>(</span><span class='id options'>options</span><span class='op'>=</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>text/html</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id content_type'>content_type</span> <span class='op'>=</span> <span class='id options'>options</span>
    <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id content_type'>content_type</span><span class='rparen'>)</span>
  <span class='kw'>elsif</span> <span class='id options'>options</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Hash</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>1</span> <span class='op'>&amp;&amp;</span> <span class='id options'>options</span><span class='period'>.</span><span class='id has_key?'>has_key?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>type</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
      <span class='id content_type'>content_type</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>type</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
      <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_string'>_header_for_string</span><span class='lparen'>(</span><span class='id content_type'>content_type</span><span class='rparen'>)</span>
    <span class='kw'>else</span>
      <span class='id buf'>buf</span> <span class='op'>=</span> <span class='id _header_for_hash'>_header_for_hash</span><span class='lparen'>(</span><span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expected String or Hash but got </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='period'>.</span><span class='id class'>class</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='kw'>defined?</span><span class='lparen'>(</span><span class='const'>MOD_RUBY</span><span class='rparen'>)</span>
    <span class='id _header_for_modruby'>_header_for_modruby</span><span class='lparen'>(</span><span class='id buf'>buf</span><span class='rparen'>)</span>
    <span class='kw'>return</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span>
  <span class='kw'>else</span>
    <span class='id buf'>buf</span> <span class='op'>&lt;&lt;</span> <span class='const'>EOL</span>    <span class='comment'># empty line of separator
</span>    <span class='kw'>return</span> <span class='id buf'>buf</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="nph?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>nph?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


231
232
233</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 231</span>

<span class='kw'>def</span> <span class='id nph?'>nph?</span>  <span class='comment'>#:nodoc:
</span>  <span class='kw'>return</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>IIS\/(\d+)</span><span class='regexp_end'>/</span></span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='gvar'>$CGI_ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SERVER_SOFTWARE</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>&amp;&amp;</span> <span class='backref'>$1</span><span class='period'>.</span><span class='id to_i'>to_i</span> <span class='op'>&lt;</span> <span class='int'>5</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="out-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>out</strong>(options = &quot;text/html&quot;) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Print an HTTP header and body to $DEFAULT_OUTPUT ($>)
</p>
<p>
The header is provided by <tt>options</tt>, as for #header(). The body of
the document is that returned by the passed- in block.  This block takes no
arguments.  It is required.
</p>
<pre class="code">
  <span class='id cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='comment'># Content-Type: text/html
</span>    <span class='comment'># Content-Length: 6
</span>    <span class='comment'>#
</span>    <span class='comment'># string
</span>
  <span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/plain</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
    <span class='comment'># Content-Type: text/plain
</span>    <span class='comment'># Content-Length: 6
</span>    <span class='comment'>#
</span>    <span class='comment'># string
</span>
  <span class='id cgi'>cgi</span><span class='period'>.</span><span class='id out'>out</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>nph</span><span class='tstring_end'>&quot;</span></span>        <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>status</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>OK</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>  <span class='comment'># == &quot;200 OK&quot;
</span>          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>server</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='const'>ENV</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>SERVER_SOFTWARE</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>connection</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>close</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span>       <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>charset</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>iso-2022-jp</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
            <span class='comment'># Content-Type: text/html; charset=iso-2022-jp
</span>          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>language</span><span class='tstring_end'>&quot;</span></span>   <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ja</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>expires</span><span class='tstring_end'>&quot;</span></span>    <span class='op'>=&gt;</span> <span class='const'>Time</span><span class='period'>.</span><span class='id now'>now</span> <span class='op'>+</span> <span class='lparen'>(</span><span class='int'>3600</span> <span class='op'>*</span> <span class='int'>24</span> <span class='op'>*</span> <span class='int'>30</span><span class='rparen'>)</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cookie</span><span class='tstring_end'>&quot;</span></span>     <span class='op'>=&gt;</span> <span class='lbracket'>[</span><span class='id cookie1'>cookie1</span><span class='comma'>,</span> <span class='id cookie2'>cookie2</span><span class='rbracket'>]</span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header1</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
          <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_header2</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>my_value</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>string</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
</pre>
<p>
Content-Length is automatically calculated from the size of the String
returned by the content block.
</p>
<p>
If ENV[&#8216;REQUEST_METHOD&#8217;] == &#8220;HEAD&#8221;, then only the
header is outputted (the content block is still required, but it is
ignored).
</p>
<p>
If the charset is &#8220;iso-2022-jp&#8221; or &#8220;euc-jp&#8221; or
&#8220;shift_jis&#8221; then the content is converted to this charset, and
the language is set to &#8220;ja&#8221;.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310
311
312
313</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 304</span>

<span class='kw'>def</span> <span class='id out'>out</span><span class='lparen'>(</span><span class='id options'>options</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>text/html</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='comment'># :yield:
</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>type</span><span class='tstring_end'>&quot;</span></span> <span class='op'>=&gt;</span> <span class='id options'>options</span> <span class='rbrace'>}</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='period'>.</span><span class='id kind_of?'>kind_of?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
  <span class='id content'>content</span> <span class='op'>=</span> <span class='kw'>yield</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>length</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id content'>content</span><span class='period'>.</span><span class='id bytesize'>bytesize</span><span class='period'>.</span><span class='id to_s'>to_s</span>
  <span class='id output'>output</span> <span class='op'>=</span> <span class='id stdoutput'>stdoutput</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id binmode'>binmode</span> <span class='kw'>if</span> <span class='kw'>defined?</span> <span class='id output'>output</span><span class='period'>.</span><span class='id binmode'>binmode</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id print'>print</span> <span class='id header'>header</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id output'>output</span><span class='period'>.</span><span class='id print'>print</span> <span class='id content'>content</span> <span class='kw'>unless</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>HEAD</span><span class='tstring_end'>&quot;</span></span> <span class='op'>==</span> <span class='id env_table'>env_table</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>REQUEST_METHOD</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="print-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>print</strong>(*options) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Print an argument or list of arguments to the default output stream
</p>
<pre class="code">
  <span class='id cgi'>cgi</span> <span class='op'>=</span> <span class='const'>CGI</span><span class='period'>.</span><span class='id new'>new</span>
  <span class='id cgi'>cgi</span><span class='period'>.</span><span class='id print'>print</span>    <span class='comment'># default:  cgi.print == $DEFAULT_OUTPUT.print</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/cgi/core.rb', line 320</span>

<span class='kw'>def</span> <span class='id print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='id stdoutput'>stdoutput</span><span class='period'>.</span><span class='id print'>print</span><span class='lparen'>(</span><span class='op'>*</span><span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 14 00:01:35 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>