<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: StringScanner</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (S)</a> &raquo; 
    
    
    <span class="title">StringScanner</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: StringScanner
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">StringScanner</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">ext/strscan/strscan.c</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>
StringScanner provides for lexical scanning operations on a String.  Here
is an example of its usage:
</p>
<pre class="code">
  <span class='id s'>s</span> <span class='op'>=</span> <span class='const'>StringScanner</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>This is an example string</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='id s'>s</span><span class='period'>.</span><span class='id eos?'>eos?</span>               <span class='comment'># -&gt; false
</span>
  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot;This&quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; nil
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot; &quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; nil
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot;is&quot;
</span>  <span class='id s'>s</span><span class='period'>.</span><span class='id eos?'>eos?</span>               <span class='comment'># -&gt; false
</span>
  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot; &quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot;an&quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot; &quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot;example&quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot; &quot;
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; &quot;string&quot;
</span>  <span class='id s'>s</span><span class='period'>.</span><span class='id eos?'>eos?</span>               <span class='comment'># -&gt; true
</span>
  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\s+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; nil
</span>  <span class='id p'>p</span> <span class='id s'>s</span><span class='period'>.</span><span class='id scan'>scan</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\w+</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span>      <span class='comment'># -&gt; nil
</span></pre>
<p>
Scanning a string means remembering the position of a <em>scan
pointer</em>, which is just an index.  The point of scanning is to move
forward a bit at a time, so matches are sought after the scan pointer;
usually immediately after it.
</p>
<p>
Given the string &#8220;test string&#8221;, here are the pertinent scan
pointer positions:
</p>
<pre class="code">
    t e s t   s t r i n g
  0 1 2 ...             1
                        0
</pre>
<p>
When you #scan for a pattern (a regular expression), the match must occur
at the character after the scan pointer.  If you use #scan_until, then the
match can occur anywhere after the scan pointer.  In both cases, the scan
pointer moves <em>just beyond</em> the last character of the match, ready
to scan again from the next character onwards.  This is demonstrated by the
example above.
</p>
<h2>Method Categories</h2>
<p>
There are other methods besides the plain scanners.  You can look ahead in
the string without actually scanning.  You can access the most recent
match. You can modify the string being scanned, reset or terminate the
scanner, find out or change the position of the scan pointer, skip ahead,
and so on.
</p>
<h3>Advancing the Scan Pointer</h3>
<ul>
<li><p>
#getch
</p>
</li>
<li><p>
#get_byte
</p>
</li>
<li><p>
#scan
</p>
</li>
<li><p>
#scan_until
</p>
</li>
<li><p>
#skip
</p>
</li>
<li><p>
#skip_until
</p>
</li>
</ul>
<h3>Looking Ahead</h3>
<ul>
<li><p>
#check
</p>
</li>
<li><p>
#check_until
</p>
</li>
<li><p>
#exist?
</p>
</li>
<li><p>
#match?
</p>
</li>
<li><p>
#peek
</p>
</li>
</ul>
<h3>Finding Where we Are</h3>
<ul>
<li><p>
#beginning_of_line? (#bol?)
</p>
</li>
<li><p>
#eos?
</p>
</li>
<li><p>
#rest?
</p>
</li>
<li><p>
#rest_size
</p>
</li>
<li><p>
#pos
</p>
</li>
</ul>
<h3>Setting Where we Are</h3>
<ul>
<li><p>
#reset
</p>
</li>
<li><p>
#terminate
</p>
</li>
<li><p>
#pos=
</p>
</li>
</ul>
<h3>Match Data</h3>
<ul>
<li><p>
#matched
</p>
</li>
<li><p>
#matched?
</p>
</li>
<li><p>
#matched_size
</p>
</li>
<li><dl>
<dt></dt><dd></dd>
</dl>
</li>
<li><p>
#pre_match
</p>
</li>
<li><p>
#post_match
</p>
</li>
</ul>
<h3>Miscellaneous</h3>
<ul>
<li><p>
<<
</p>
</li>
<li><p>
#concat
</p>
</li>
<li><p>
#string
</p>
</li>
<li><p>
#string=
</p>
</li>
<li><p>
#unscan
</p>
</li>
</ul>
<p>
There are aliases to several of the methods.
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="StringScanner/Error.html" title="StringScanner::Error (class)">Error</a></span>
    
  
</p>



  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#must_C_version-class_method" title="must_C_version (class method)">+ (Object) <strong>must_C_version</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This method is defined for backward compatibility.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%3C%3C-instance_method" title="#&lt;&lt; (instance method)">- (Object) <strong>&lt;&lt;</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Appends <tt>str</tt> to the string being scanned.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object) <strong>[]</strong>(n) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the n-th subgroup in the most recent match.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#beginning_of_line%3F-instance_method" title="#beginning_of_line? (instance method)">- (Object) <strong>beginning_of_line?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> iff the scan pointer is at the beginning of the line.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check-instance_method" title="#check (instance method)">- (Object) <strong>check</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This returns the value that #scan would return, without advancing the scan
pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#check_until-instance_method" title="#check_until (instance method)">- (Object) <strong>check_until</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This returns the value that #scan_until would return, without advancing the
scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#clear-instance_method" title="#clear (instance method)">- (Object) <strong>clear</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Equivalent to #terminate.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#concat-instance_method" title="#concat (instance method)">- (Object) <strong>concat</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Appends <tt>str</tt> to the string being scanned.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#empty%3F-instance_method" title="#empty? (instance method)">- (Object) <strong>empty?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Equivalent to #eos?.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#eos%3F-instance_method" title="#eos? (instance method)">- (Object) <strong>eos?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if the scan pointer is at the end of the string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exist%3F-instance_method" title="#exist? (instance method)">- (Object) <strong>exist?</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Looks <em>ahead</em> to see if the <tt>pattern</tt> exists
<em>anywhere</em> in the string, without advancing the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_byte-instance_method" title="#get_byte (instance method)">- (Object) <strong>get_byte</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Scans one byte and returns it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getbyte-instance_method" title="#getbyte (instance method)">- (Object) <strong>getbyte</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Equivalent to #get_byte.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#getch-instance_method" title="#getch (instance method)">- (Object) <strong>getch</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Scans one character and returns it.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-instance_method" title="#new (instance method)">- (Object) <strong>new</strong>(string, dup = false) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Creates a new StringScanner object to scan over the given <tt>string</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize_copy-instance_method" title="#initialize_copy (instance method)">- (Object) <strong>initialize_copy</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Duplicates a StringScanner object.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (Object) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns a string that represents the StringScanner object, showing:
</p>
<ul>
<li><p>
the current position
</p>
</li>
<li><p>
the size of the string
</p>
</li>
<li><p>
the characters surrounding the scan pointer.
</p>
</li>
</ul>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match%3F-instance_method" title="#match? (instance method)">- (Object) <strong>match?</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Tests whether the given <tt>pattern</tt> is matched from the current scan
pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matched-instance_method" title="#matched (instance method)">- (Object) <strong>matched</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the last matched string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matched%3F-instance_method" title="#matched? (instance method)">- (Object) <strong>matched?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> iff the last match was successful.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#matched_size-instance_method" title="#matched_size (instance method)">- (Object) <strong>matched_size</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the size of the most recent match (see #matched), or <tt>nil</tt>
if there was no recent match.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peek-instance_method" title="#peek (instance method)">- (Object) <strong>peek</strong>(len) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Extracts a string corresponding to <tt>string[pos,len]</tt>, without
advancing the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#peep-instance_method" title="#peep (instance method)">- (Object) <strong>peep</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Equivalent to #peek.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pointer-instance_method" title="#pointer (instance method)">- (Object) <strong>pointer</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the byte position of the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pos%3D-instance_method" title="#pos= (instance method)">- (Object) <strong>pos=</strong>(n) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the byte position of the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pos-instance_method" title="#pos (instance method)">- (Object) <strong>pos</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the byte position of the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pos%3D-instance_method" title="#pos= (instance method)">- (Object) <strong>pos=</strong>(n) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the byte position of the scan pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#post_match-instance_method" title="#post_match (instance method)">- (Object) <strong>post_match</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the <b><em>post</b>-match</em> (in the regular expression sense) of
the last scan.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pre_match-instance_method" title="#pre_match (instance method)">- (Object) <strong>pre_match</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Return the <b><em>pre</b>-match</em> (in the regular expression sense) of
the last scan.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-instance_method" title="#reset (instance method)">- (Object) <strong>reset</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Reset the scan pointer (index 0) and clear matching data.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest-instance_method" title="#rest (instance method)">- (Object) <strong>rest</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the &#8220;rest&#8221; of the string (i.e. everything after the
scan pointer).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest%3F-instance_method" title="#rest? (instance method)">- (Object) <strong>rest?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true iff there is more data in the string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rest_size-instance_method" title="#rest_size (instance method)">- (Object) <strong>rest_size</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<tt>s.rest_size</tt> is equivalent to <tt>s.rest.size</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restsize-instance_method" title="#restsize (instance method)">- (Object) <strong>restsize</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
<tt>s.restsize</tt> is equivalent to <tt>s.rest_size</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan-instance_method" title="#scan (instance method)">- (Object) <strong>scan</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Tries to match with <tt>pattern</tt> at the current position.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_full-instance_method" title="#scan_full (instance method)">- (Object) <strong>scan_full</strong>(pattern, advance_pointer_p, return_string_p) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Tests whether the given <tt>pattern</tt> is matched from the current scan
pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#scan_until-instance_method" title="#scan_until (instance method)">- (Object) <strong>scan_until</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Scans the string <em>until</em> the <tt>pattern</tt> is matched.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#search_full-instance_method" title="#search_full (instance method)">- (Object) <strong>search_full</strong>(pattern, advance_pointer_p, return_string_p) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Scans the string <em>until</em> the <tt>pattern</tt> is matched.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip-instance_method" title="#skip (instance method)">- (Object) <strong>skip</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attempts to skip over the given <tt>pattern</tt> beginning with the scan
pointer.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#skip_until-instance_method" title="#skip_until (instance method)">- (Object) <strong>skip_until</strong>(pattern) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Advances the scan pointer until <tt>pattern</tt> is matched and consumed.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#string-instance_method" title="#string (instance method)">- (Object) <strong>string</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the string being scanned.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#string%3D-instance_method" title="#string= (instance method)">- (Object) <strong>string=</strong>(str) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Changes the string being scanned to <tt>str</tt> and resets the scanner.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">- (Object) <strong>terminate</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the scan pointer to the end of the string and clear matching data.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unscan-instance_method" title="#unscan (instance method)">- (Object) <strong>unscan</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Set the scan pointer to the previous position.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>new</strong>(string, dup = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Creates a new StringScanner object to scan over the given <tt>string</tt>.
<tt>dup</tt> argument is obsolete and not used now.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: StringScanner.new(string, dup = false)
 *
 * Creates a new StringScanner object to scan over the given +string+.
 * +dup+ argument is obsolete and not used now.
 */
static VALUE
strscan_initialize(int argc, VALUE *argv, VALUE self)
{
    struct strscanner *p;
    VALUE str, need_dup;

    Data_Get_Struct(self, struct strscanner, p);
    rb_scan_args(argc, argv, &quot;11&quot;, &amp;str, &amp;need_dup);
    StringValue(str);
    p-&gt;str = str;

    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="must_C_version-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>must_C_version</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This method is defined for backward compatibility.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: StringScanner.must_C_version
 *
 * This method is defined for backward compatibility.
 */
static VALUE
strscan_s_mustc(VALUE self)
{
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="<<-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>concat</strong>(str) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>&lt;&lt;</strong>(str) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Appends <tt>str</tt> to the string being scanned. This method does not
affect scan pointer.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.scan(/Fri /)
  s &lt;&lt; &quot; +1000 GMT&quot;
  s.string            # -&gt; &quot;Fri Dec 12 1975 14:39 +1000 GMT&quot;
  s.scan(/Dec/)       # -&gt; &quot;Dec&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq:
 *   concat(str)
 *   &lt;&lt;(str)
 *
 * Appends +str+ to the string being scanned.
 * This method does not affect scan pointer.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.scan(/Fri /)
 *   s &lt;&lt; &quot; +1000 GMT&quot;
 *   s.string            # -&gt; &quot;Fri Dec 12 1975 14:39 +1000 GMT&quot;
 *   s.scan(/Dec/)       # -&gt; &quot;Dec&quot;
 */
static VALUE
strscan_concat(VALUE self, VALUE str)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    StringValue(str);
    rb_str_append(p-&gt;str, str);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]</strong>(n) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the n-th subgroup in the most recent match.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.scan(/(\w+) (\w+) (\d+) /)       # -&gt; &quot;Fri Dec 12 &quot;
  s[0]                               # -&gt; &quot;Fri Dec 12 &quot;
  s[1]                               # -&gt; &quot;Fri&quot;
  s[2]                               # -&gt; &quot;Dec&quot;
  s[3]                               # -&gt; &quot;12&quot;
  s.post_match                       # -&gt; &quot;1975 14:39&quot;
  s.pre_match                        # -&gt; &quot;&quot;</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: [](n)
 *
 * Return the n-th subgroup in the most recent match.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.scan(/(\w+) (\w+) (\d+) /)       # -&gt; &quot;Fri Dec 12 &quot;
 *   s[0]                               # -&gt; &quot;Fri Dec 12 &quot;
 *   s[1]                               # -&gt; &quot;Fri&quot;
 *   s[2]                               # -&gt; &quot;Dec&quot;
 *   s[3]                               # -&gt; &quot;12&quot;
 *   s.post_match                       # -&gt; &quot;1975 14:39&quot;
 *   s.pre_match                        # -&gt; &quot;&quot;
 */
static VALUE
strscan_aref(VALUE self, VALUE idx)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))        return Qnil;

    i = NUM2LONG(idx);
    if (i &lt; 0)
        i += p-&gt;regs.num_regs;
    if (i &lt; 0)                 return Qnil;
    if (i &gt;= p-&gt;regs.num_regs) return Qnil;
    if (p-&gt;regs.beg[i] == -1)  return Qnil;

    return extract_range(p, p-&gt;prev + p-&gt;regs.beg[i],
                            p-&gt;prev + p-&gt;regs.end[i]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="beginning_of_line?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>beginning_of_line?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> iff the scan pointer is at the beginning of the line.
</p>
<pre class="code">
  s = StringScanner.new(&quot;test\ntest\n&quot;)
  s.bol?           # =&gt; true
  s.scan(/te/)
  s.bol?           # =&gt; false
  s.scan(/st\n/)
  s.bol?           # =&gt; true
  s.terminate
  s.bol?           # =&gt; true</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns +true+ iff the scan pointer is at the beginning of the line.
 *
 *   s = StringScanner.new(&quot;test\ntest\n&quot;)
 *   s.bol?           # =&gt; true
 *   s.scan(/te/)
 *   s.bol?           # =&gt; false
 *   s.scan(/st\n/)
 *   s.bol?           # =&gt; true
 *   s.terminate
 *   s.bol?           # =&gt; true
 */
static VALUE
strscan_bol_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (CURPTR(p) &gt; S_PEND(p)) return Qnil;
    if (p-&gt;curr == 0) return Qtrue;
    return (*(CURPTR(p) - 1) == '\n') ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>check</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This returns the value that #scan would return, without advancing the scan
pointer.  The match register is affected, though.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.check /Fri/               # -&gt; &quot;Fri&quot;
  s.pos                       # -&gt; 0
  s.matched                   # -&gt; &quot;Fri&quot;
  s.check /12/                # -&gt; nil
  s.matched                   # -&gt; nil
</pre>
<p>
Mnemonic: it &#8220;checks&#8221; to see whether a #scan will return a
value.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: check(pattern)
 *
 * This returns the value that #scan would return, without advancing the scan
 * pointer.  The match register is affected, though.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.check /Fri/               # -&gt; &quot;Fri&quot;
 *   s.pos                       # -&gt; 0
 *   s.matched                   # -&gt; &quot;Fri&quot;
 *   s.check /12/                # -&gt; nil
 *   s.matched                   # -&gt; nil
 *
 * Mnemonic: it &quot;checks&quot; to see whether a #scan will return a value.
 */
static VALUE
strscan_check(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 1);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="check_until-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>check_until</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This returns the value that #scan_until would return, without advancing the
scan pointer.  The match register is affected, though.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.check_until /12/          # -&gt; &quot;Fri Dec 12&quot;
  s.pos                       # -&gt; 0
  s.matched                   # -&gt; 12
</pre>
<p>
Mnemonic: it &#8220;checks&#8221; to see whether a #scan_until will return
a value.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: check_until(pattern)
 *
 * This returns the value that #scan_until would return, without advancing the
 * scan pointer.  The match register is affected, though.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.check_until /12/          # -&gt; &quot;Fri Dec 12&quot;
 *   s.pos                       # -&gt; 0
 *   s.matched                   # -&gt; 12
 *
 * Mnemonic: it &quot;checks&quot; to see whether a #scan_until will return a value.
 */
static VALUE
strscan_check_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 1, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="clear-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Equivalent to #terminate. This method is obsolete; use #terminate instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Equivalent to #terminate.
 * This method is obsolete; use #terminate instead.
 */
static VALUE
strscan_clear(VALUE self)
{
    rb_warning(&quot;StringScanner#clear is obsolete; use #terminate instead&quot;);
    return strscan_terminate(self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="concat-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>concat</strong>(str) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>&lt;&lt;</strong>(str) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Appends <tt>str</tt> to the string being scanned. This method does not
affect scan pointer.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.scan(/Fri /)
  s &lt;&lt; &quot; +1000 GMT&quot;
  s.string            # -&gt; &quot;Fri Dec 12 1975 14:39 +1000 GMT&quot;
  s.scan(/Dec/)       # -&gt; &quot;Dec&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq:
 *   concat(str)
 *   &lt;&lt;(str)
 *
 * Appends +str+ to the string being scanned.
 * This method does not affect scan pointer.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.scan(/Fri /)
 *   s &lt;&lt; &quot; +1000 GMT&quot;
 *   s.string            # -&gt; &quot;Fri Dec 12 1975 14:39 +1000 GMT&quot;
 *   s.scan(/Dec/)       # -&gt; &quot;Dec&quot;
 */
static VALUE
strscan_concat(VALUE self, VALUE str)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    StringValue(str);
    rb_str_append(p-&gt;str, str);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="empty?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>empty?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Equivalent to #eos?. This method is obsolete, use #eos? instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Equivalent to #eos?.
 * This method is obsolete, use #eos? instead.
 */
static VALUE
strscan_empty_p(VALUE self)
{
    rb_warning(&quot;StringScanner#empty? is obsolete; use #eos? instead&quot;);
    return strscan_eos_p(self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="eos?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>eos?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if the scan pointer is at the end of the string.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  p s.eos?          # =&gt; false
  s.scan(/test/)
  p s.eos?          # =&gt; false
  s.terminate
  p s.eos?          # =&gt; true</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns +true+ if the scan pointer is at the end of the string.
 *
 *   s = StringScanner.new('test string')
 *   p s.eos?          # =&gt; false
 *   s.scan(/test/)
 *   p s.eos?          # =&gt; false
 *   s.terminate
 *   p s.eos?          # =&gt; true
 */
static VALUE
strscan_eos_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="exist?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>exist?</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Looks <em>ahead</em> to see if the <tt>pattern</tt> exists
<em>anywhere</em> in the string, without advancing the scan pointer.  This
predicates whether a #scan_until will return a value.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.exist? /s/            # -&gt; 3
  s.scan /test/           # -&gt; &quot;test&quot;
  s.exist? /s/            # -&gt; 2
  s.exist? /e/            # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: exist?(pattern)
 *
 * Looks _ahead_ to see if the +pattern+ exists _anywhere_ in the string,
 * without advancing the scan pointer.  This predicates whether a #scan_until
 * will return a value.
 *
 *   s = StringScanner.new('test string')
 *   s.exist? /s/            # -&gt; 3
 *   s.scan /test/           # -&gt; &quot;test&quot;
 *   s.exist? /s/            # -&gt; 2
 *   s.exist? /e/            # -&gt; nil
 */
static VALUE
strscan_exist_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="get_byte-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>get_byte</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Scans one byte and returns it. This method is not multibyte character
sensitive. See also: #getch.
</p>
<pre class="code">
  s = StringScanner.new('ab')
  s.get_byte         # =&gt; &quot;a&quot;
  s.get_byte         # =&gt; &quot;b&quot;
  s.get_byte         # =&gt; nil

  $KCODE = 'EUC'
  s = StringScanner.new(&quot;\244\242&quot;)
  s.get_byte         # =&gt; &quot;\244&quot;
  s.get_byte         # =&gt; &quot;\242&quot;
  s.get_byte         # =&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Scans one byte and returns it.
 * This method is not multibyte character sensitive.
 * See also: #getch.
 *
 *   s = StringScanner.new('ab')
 *   s.get_byte         # =&gt; &quot;a&quot;
 *   s.get_byte         # =&gt; &quot;b&quot;
 *   s.get_byte         # =&gt; nil
 *
 *   $KCODE = 'EUC'
 *   s = StringScanner.new(&quot;\244\242&quot;)
 *   s.get_byte         # =&gt; &quot;\244&quot;
 *   s.get_byte         # =&gt; &quot;\242&quot;
 *   s.get_byte         # =&gt; nil
 */
static VALUE
strscan_get_byte(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    p-&gt;prev = p-&gt;curr;
    p-&gt;curr++;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p, p-&gt;prev + p-&gt;regs.beg[0],
                            p-&gt;prev + p-&gt;regs.end[0]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getbyte-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>getbyte</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Equivalent to #get_byte. This method is obsolete; use #get_byte instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Equivalent to #get_byte.
 * This method is obsolete; use #get_byte instead.
 */
static VALUE
strscan_getbyte(VALUE self)
{
    rb_warning(&quot;StringScanner#getbyte is obsolete; use #get_byte instead&quot;);
    return strscan_get_byte(self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="getch-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>getch</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Scans one character and returns it. This method is multibyte character
sensitive.
</p>
<pre class="code">
  s = StringScanner.new(&quot;ab&quot;)
  s.getch           # =&gt; &quot;a&quot;
  s.getch           # =&gt; &quot;b&quot;
  s.getch           # =&gt; nil

  $KCODE = 'EUC'
  s = StringScanner.new(&quot;\244\242&quot;)
  s.getch           # =&gt; &quot;\244\242&quot;   # Japanese hira-kana &quot;A&quot; in EUC-JP
  s.getch           # =&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Scans one character and returns it.
 * This method is multibyte character sensitive.
 *
 *   s = StringScanner.new(&quot;ab&quot;)
 *   s.getch           # =&gt; &quot;a&quot;
 *   s.getch           # =&gt; &quot;b&quot;
 *   s.getch           # =&gt; nil
 *
 *   $KCODE = 'EUC'
 *   s = StringScanner.new(&quot;\244\242&quot;)
 *   s.getch           # =&gt; &quot;\244\242&quot;   # Japanese hira-kana &quot;A&quot; in EUC-JP
 *   s.getch           # =&gt; nil
 */
static VALUE
strscan_getch(VALUE self)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);
    CLEAR_MATCH_STATUS(p);
    if (EOS_P(p))
        return Qnil;

    len = rb_enc_mbclen(CURPTR(p), S_PEND(p), rb_enc_get(p-&gt;str));
    if (p-&gt;curr + len &gt; S_LEN(p)) {
        len = S_LEN(p) - p-&gt;curr;
    }
    p-&gt;prev = p-&gt;curr;
    p-&gt;curr += len;
    MATCHED(p);
    adjust_registers_to_matched(p);
    return extract_range(p, p-&gt;prev + p-&gt;regs.beg[0],
                            p-&gt;prev + p-&gt;regs.end[0]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="initialize_copy-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>dup</strong> </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>clone</strong> </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Duplicates a StringScanner object.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq:
 *   dup
 *   clone
 *
 * Duplicates a StringScanner object.
 */
static VALUE
strscan_init_copy(VALUE vself, VALUE vorig)
{
    struct strscanner *self, *orig;

    Data_Get_Struct(vself, struct strscanner, self);
    check_strscan(vorig);
    Data_Get_Struct(vorig, struct strscanner, orig);
    if (self != orig) {
    self-&gt;flags = orig-&gt;flags;
    self-&gt;str = orig-&gt;str;
    self-&gt;prev = orig-&gt;prev;
    self-&gt;curr = orig-&gt;curr;
    onig_region_copy(&amp;self-&gt;regs, &amp;orig-&gt;regs);
    }

    return vself;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns a string that represents the StringScanner object, showing:
</p>
<ul>
<li><p>
the current position
</p>
</li>
<li><p>
the size of the string
</p>
</li>
<li><p>
the characters surrounding the scan pointer
</p>
<p>
s = StringScanner.new(&#8220;Fri Dec 12 1975 14:39&#8221;) s.inspect       
# -> &#8217;#<StringScanner 0/21 @ &#8220;Fri D&#8230;&#8221;>&#8217;
s.scan_until /12/    # -> &#8220;Fri Dec 12&#8221; s.inspect            #
-> &#8217;#<StringScanner 10/21 &#8220;&#8230;ec 12&#8221; @ &#8220;
1975&#8230;&#8221;>&#8217;
</p>
</li>
</ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns a string that represents the StringScanner object, showing:
 * - the current position
 * - the size of the string
 * - the characters surrounding the scan pointer
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.inspect            # -&gt; '#&lt;StringScanner 0/21 @ &quot;Fri D...&quot;&gt;'
 *   s.scan_until /12/    # -&gt; &quot;Fri Dec 12&quot;
 *   s.inspect            # -&gt; '#&lt;StringScanner 10/21 &quot;...ec 12&quot; @ &quot; 1975...&quot;&gt;'
 */
static VALUE
strscan_inspect(VALUE self)
{
    struct strscanner *p;
    char buf[BUFSIZE];
    long len;
    VALUE a, b;

    Data_Get_Struct(self, struct strscanner, p);
    if (NIL_P(p-&gt;str)) {
        len = snprintf(buf, BUFSIZE, &quot;#&lt;%s (uninitialized)&gt;&quot;,
                       rb_class2name(CLASS_OF(self)));
        return infect(rb_str_new(buf, len), p);
    }
    if (EOS_P(p)) {
        len = snprintf(buf, BUFSIZE, &quot;#&lt;%s fin&gt;&quot;,
                       rb_class2name(CLASS_OF(self)));
        return infect(rb_str_new(buf, len), p);
    }
    if (p-&gt;curr == 0) {
        b = inspect2(p);
        len = snprintf(buf, BUFSIZE, &quot;#&lt;%s %ld/%ld @ %s&gt;&quot;,
                       rb_class2name(CLASS_OF(self)),
                       p-&gt;curr, S_LEN(p),
                       RSTRING_PTR(b));
        return infect(rb_str_new(buf, len), p);
    }
    a = inspect1(p);
    b = inspect2(p);
    len = snprintf(buf, BUFSIZE, &quot;#&lt;%s %ld/%ld %s @ %s&gt;&quot;,
                   rb_class2name(CLASS_OF(self)),
                   p-&gt;curr, S_LEN(p),
                   RSTRING_PTR(a),
                   RSTRING_PTR(b));
    return infect(rb_str_new(buf, len), p);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="match?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>match?</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Tests whether the given <tt>pattern</tt> is matched from the current scan
pointer. Returns the length of the match, or <tt>nil</tt>.  The scan
pointer is not advanced.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  p s.match?(/\w+/)   # -&gt; 4
  p s.match?(/\w+/)   # -&gt; 4
  p s.match?(/\s+/)   # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: match?(pattern)
 *
 * Tests whether the given +pattern+ is matched from the current scan pointer.
 * Returns the length of the match, or +nil+.  The scan pointer is not advanced.
 *
 *   s = StringScanner.new('test string')
 *   p s.match?(/\w+/)   # -&gt; 4
 *   p s.match?(/\w+/)   # -&gt; 4
 *   p s.match?(/\s+/)   # -&gt; nil
 */
static VALUE
strscan_match_p(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 0, 0, 1);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="matched-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>matched</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the last matched string.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.match?(/\w+/)     # -&gt; 4
  s.matched           # -&gt; &quot;test&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the last matched string.
 *
 *   s = StringScanner.new('test string')
 *   s.match?(/\w+/)     # -&gt; 4
 *   s.matched           # -&gt; &quot;test&quot;
 */
static VALUE
strscan_matched(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p, p-&gt;prev + p-&gt;regs.beg[0],
                            p-&gt;prev + p-&gt;regs.end[0]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="matched?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>matched?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> iff the last match was successful.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.match?(/\w+/)     # =&gt; 4
  s.matched?          # =&gt; true
  s.match?(/\d+/)     # =&gt; nil
  s.matched?          # =&gt; false</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns +true+ iff the last match was successful.
 *
 *   s = StringScanner.new('test string')
 *   s.match?(/\w+/)     # =&gt; 4
 *   s.matched?          # =&gt; true
 *   s.match?(/\d+/)     # =&gt; nil
 *   s.matched?          # =&gt; false
 */
static VALUE
strscan_matched_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return MATCHED_P(p) ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="matched_size-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>matched_size</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the size of the most recent match (see #matched), or <tt>nil</tt>
if there was no recent match.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.check /\w+/           # -&gt; &quot;test&quot;
  s.matched_size          # -&gt; 4
  s.check /\d+/           # -&gt; nil
  s.matched_size          # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the size of the most recent match (see #matched), or +nil+ if there
 * was no recent match.
 *
 *   s = StringScanner.new('test string')
 *   s.check /\w+/           # -&gt; &quot;test&quot;
 *   s.matched_size          # -&gt; 4
 *   s.check /\d+/           # -&gt; nil
 *   s.matched_size          # -&gt; nil
 */
static VALUE
strscan_matched_size(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return INT2NUM(p-&gt;regs.end[0] - p-&gt;regs.beg[0]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="peek-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>peek</strong>(len) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Extracts a string corresponding to <tt>string[pos,len]</tt>, without
advancing the scan pointer.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.peek(7)          # =&gt; &quot;test st&quot;
  s.peek(7)          # =&gt; &quot;test st&quot;</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: peek(len)
 *
 * Extracts a string corresponding to &lt;tt&gt;string[pos,len]&lt;/tt&gt;, without
 * advancing the scan pointer.
 *
 *   s = StringScanner.new('test string')
 *   s.peek(7)          # =&gt; &quot;test st&quot;
 *   s.peek(7)          # =&gt; &quot;test st&quot;
 *
 */
static VALUE
strscan_peek(VALUE self, VALUE vlen)
{
    struct strscanner *p;
    long len;

    GET_SCANNER(self, p);

    len = NUM2LONG(vlen);
    if (EOS_P(p))
        return infect(str_new(p, &quot;&quot;, 0), p);

    if (p-&gt;curr + len &gt; S_LEN(p))
        len = S_LEN(p) - p-&gt;curr;
    return extract_beg_len(p, p-&gt;curr, len);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="peep-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>peep</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Equivalent to #peek. This method is obsolete; use #peek instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Equivalent to #peek.
 * This method is obsolete; use #peek instead.
 */
static VALUE
strscan_peep(VALUE self, VALUE vlen)
{
    rb_warning(&quot;StringScanner#peep is obsolete; use #peek instead&quot;);
    return strscan_peek(self, vlen);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pointer-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pointer</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the byte position of the scan pointer.  In the &#8216;reset&#8217;
position, this value is zero.  In the &#8216;terminated&#8217; position
(i.e. the string is exhausted), this value is the bytesize of the string.
</p>
<p>
In short, it&#8217;s a 0-based index into the string.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.pos               # -&gt; 0
  s.scan_until /str/  # -&gt; &quot;test str&quot;
  s.pos               # -&gt; 8
  s.terminate         # -&gt; #&lt;StringScanner fin&gt;
  s.pos               # -&gt; 11</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the byte position of the scan pointer.  In the 'reset' position, this
 * value is zero.  In the 'terminated' position (i.e. the string is exhausted),
 * this value is the bytesize of the string.
 *
 * In short, it's a 0-based index into the string.
 *
 *   s = StringScanner.new('test string')
 *   s.pos               # -&gt; 0
 *   s.scan_until /str/  # -&gt; &quot;test str&quot;
 *   s.pos               # -&gt; 8
 *   s.terminate         # -&gt; #&lt;StringScanner fin&gt;
 *   s.pos               # -&gt; 11
 */
static VALUE
strscan_get_pos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return INT2FIX(p-&gt;curr);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pointer=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pos=</strong>(n) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the byte position of the scan pointer.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.pos = 7            # -&gt; 7
  s.rest               # -&gt; &quot;ring&quot;</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: pos=(n)
 *
 * Set the byte position of the scan pointer.
 *
 *   s = StringScanner.new('test string')
 *   s.pos = 7            # -&gt; 7
 *   s.rest               # -&gt; &quot;ring&quot;
 */
static VALUE
strscan_set_pos(VALUE self, VALUE v)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    i = NUM2INT(v);
    if (i &lt; 0) i += S_LEN(p);
    if (i &lt; 0) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    if (i &gt; S_LEN(p)) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    p-&gt;curr = i;
    return INT2NUM(i);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pos-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pos</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the byte position of the scan pointer.  In the &#8216;reset&#8217;
position, this value is zero.  In the &#8216;terminated&#8217; position
(i.e. the string is exhausted), this value is the bytesize of the string.
</p>
<p>
In short, it&#8217;s a 0-based index into the string.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.pos               # -&gt; 0
  s.scan_until /str/  # -&gt; &quot;test str&quot;
  s.pos               # -&gt; 8
  s.terminate         # -&gt; #&lt;StringScanner fin&gt;
  s.pos               # -&gt; 11</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the byte position of the scan pointer.  In the 'reset' position, this
 * value is zero.  In the 'terminated' position (i.e. the string is exhausted),
 * this value is the bytesize of the string.
 *
 * In short, it's a 0-based index into the string.
 *
 *   s = StringScanner.new('test string')
 *   s.pos               # -&gt; 0
 *   s.scan_until /str/  # -&gt; &quot;test str&quot;
 *   s.pos               # -&gt; 8
 *   s.terminate         # -&gt; #&lt;StringScanner fin&gt;
 *   s.pos               # -&gt; 11
 */
static VALUE
strscan_get_pos(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return INT2FIX(p-&gt;curr);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pos=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pos=</strong>(n) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the byte position of the scan pointer.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.pos = 7            # -&gt; 7
  s.rest               # -&gt; &quot;ring&quot;</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: pos=(n)
 *
 * Set the byte position of the scan pointer.
 *
 *   s = StringScanner.new('test string')
 *   s.pos = 7            # -&gt; 7
 *   s.rest               # -&gt; &quot;ring&quot;
 */
static VALUE
strscan_set_pos(VALUE self, VALUE v)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    i = NUM2INT(v);
    if (i &lt; 0) i += S_LEN(p);
    if (i &lt; 0) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    if (i &gt; S_LEN(p)) rb_raise(rb_eRangeError, &quot;index out of range&quot;);
    p-&gt;curr = i;
    return INT2NUM(i);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="post_match-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>post_match</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the <b><em>post</b>-match</em> (in the regular expression sense) of
the last scan.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.scan(/\w+/)           # -&gt; &quot;test&quot;
  s.scan(/\s+/)           # -&gt; &quot; &quot;
  s.pre_match             # -&gt; &quot;test&quot;
  s.post_match            # -&gt; &quot;string&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Return the &lt;i&gt;&lt;b&gt;post&lt;/b&gt;-match&lt;/i&gt; (in the regular expression sense) of the last scan.
 *
 *   s = StringScanner.new('test string')
 *   s.scan(/\w+/)           # -&gt; &quot;test&quot;
 *   s.scan(/\s+/)           # -&gt; &quot; &quot;
 *   s.pre_match             # -&gt; &quot;test&quot;
 *   s.post_match            # -&gt; &quot;string&quot;
 */
static VALUE
strscan_post_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p, p-&gt;prev + p-&gt;regs.end[0], S_LEN(p));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pre_match-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pre_match</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Return the <b><em>pre</b>-match</em> (in the regular expression sense) of
the last scan.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.scan(/\w+/)           # -&gt; &quot;test&quot;
  s.scan(/\s+/)           # -&gt; &quot; &quot;
  s.pre_match             # -&gt; &quot;test&quot;
  s.post_match            # -&gt; &quot;string&quot;</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Return the &lt;i&gt;&lt;b&gt;pre&lt;/b&gt;-match&lt;/i&gt; (in the regular expression sense) of the last scan.
 *
 *   s = StringScanner.new('test string')
 *   s.scan(/\w+/)           # -&gt; &quot;test&quot;
 *   s.scan(/\s+/)           # -&gt; &quot; &quot;
 *   s.pre_match             # -&gt; &quot;test&quot;
 *   s.post_match            # -&gt; &quot;string&quot;
 */
static VALUE
strscan_pre_match(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p)) return Qnil;
    return extract_range(p, 0, p-&gt;prev + p-&gt;regs.beg[0]);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="reset-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>reset</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Reset the scan pointer (index 0) and clear matching data.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Reset the scan pointer (index 0) and clear matching data.
 */
static VALUE
strscan_reset(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rest-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rest</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the &#8220;rest&#8221; of the string (i.e. everything after the
scan pointer). If there is no more data (eos? = true), it returns
<tt>&quot;&quot;</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the &quot;rest&quot; of the string (i.e. everything after the scan pointer).
 * If there is no more data (eos? = true), it returns &lt;tt&gt;&quot;&quot;&lt;/tt&gt;.
 */
static VALUE
strscan_rest(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return infect(str_new(p, &quot;&quot;, 0), p);
    }
    return extract_range(p, p-&gt;curr, S_LEN(p));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rest?-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rest?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true iff there is more data in the string.  See #eos?. This method
is obsolete; use #eos? instead.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.eos?              # These two
  s.rest?             # are opposites.</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns true iff there is more data in the string.  See #eos?.
 * This method is obsolete; use #eos? instead.
 *
 *   s = StringScanner.new('test string')
 *   s.eos?              # These two
 *   s.rest?             # are opposites.
 */
static VALUE
strscan_rest_p(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return EOS_P(p) ? Qfalse : Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rest_size-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rest_size</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<tt>s.rest_size</tt> is equivalent to <tt>s.rest.size</tt>.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * &lt;tt&gt;s.rest_size&lt;/tt&gt; is equivalent to &lt;tt&gt;s.rest.size&lt;/tt&gt;.
 */
static VALUE
strscan_rest_size(VALUE self)
{
    struct strscanner *p;
    long i;

    GET_SCANNER(self, p);
    if (EOS_P(p)) {
        return INT2FIX(0);
    }
    i = S_LEN(p) - p-&gt;curr;
    return INT2FIX(i);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="restsize-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>restsize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
<tt>s.restsize</tt> is equivalent to <tt>s.rest_size</tt>. This method is
obsolete; use #rest_size instead.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * &lt;tt&gt;s.restsize&lt;/tt&gt; is equivalent to &lt;tt&gt;s.rest_size&lt;/tt&gt;.
 * This method is obsolete; use #rest_size instead.
 */
static VALUE
strscan_restsize(VALUE self)
{
    rb_warning(&quot;StringScanner#restsize is obsolete; use #rest_size instead&quot;);
    return strscan_rest_size(self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scan-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>scan</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Tries to match with <tt>pattern</tt> at the current position. If
there&#8217;s a match, the scanner advances the &#8220;scan pointer&#8221;
and returns the matched string. Otherwise, the scanner returns
<tt>nil</tt>.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  p s.scan(/\w+/)   # -&gt; &quot;test&quot;
  p s.scan(/\w+/)   # -&gt; nil
  p s.scan(/\s+/)   # -&gt; &quot; &quot;
  p s.scan(/\w+/)   # -&gt; &quot;string&quot;
  p s.scan(/./)     # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: scan(pattern) =&gt; String
 *
 * Tries to match with +pattern+ at the current position. If there's a match,
 * the scanner advances the &quot;scan pointer&quot; and returns the matched string.
 * Otherwise, the scanner returns +nil+.
 *
 *   s = StringScanner.new('test string')
 *   p s.scan(/\w+/)   # -&gt; &quot;test&quot;
 *   p s.scan(/\w+/)   # -&gt; nil
 *   p s.scan(/\s+/)   # -&gt; &quot; &quot;
 *   p s.scan(/\w+/)   # -&gt; &quot;string&quot;
 *   p s.scan(/./)     # -&gt; nil
 *
 */
static VALUE
strscan_scan(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 1);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scan_full-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>scan_full</strong>(pattern, advance_pointer_p, return_string_p) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Tests whether the given <tt>pattern</tt> is matched from the current scan
pointer. Advances the scan pointer if <tt>advance_pointer_p</tt> is true.
Returns the matched string if <tt>return_string_p</tt> is true. The match
register is affected.
</p>
<p>
&#8220;full&#8221; means &#8220;#scan with full parameters&#8221;.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: scan_full(pattern, advance_pointer_p, return_string_p)
 *
 * Tests whether the given +pattern+ is matched from the current scan pointer.
 * Advances the scan pointer if +advance_pointer_p+ is true.
 * Returns the matched string if +return_string_p+ is true.
 * The match register is affected.
 *
 * &quot;full&quot; means &quot;#scan with full parameters&quot;.
 */
static VALUE
strscan_scan_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 1);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="scan_until-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>scan_until</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Scans the string <em>until</em> the <tt>pattern</tt> is matched.  Returns
the substring up to and including the end of the match, advancing the scan
pointer to that location. If there is no match, <tt>nil</tt> is returned.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.scan_until(/1/)        # -&gt; &quot;Fri Dec 1&quot;
  s.pre_match              # -&gt; &quot;Fri Dec &quot;
  s.scan_until(/XYZ/)      # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: scan_until(pattern)
 *
 * Scans the string _until_ the +pattern+ is matched.  Returns the substring up
 * to and including the end of the match, advancing the scan pointer to that
 * location. If there is no match, +nil+ is returned.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.scan_until(/1/)        # -&gt; &quot;Fri Dec 1&quot;
 *   s.pre_match              # -&gt; &quot;Fri Dec &quot;
 *   s.scan_until(/XYZ/)      # -&gt; nil
 */
static VALUE
strscan_scan_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 1, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="search_full-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>search_full</strong>(pattern, advance_pointer_p, return_string_p) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Scans the string <em>until</em> the <tt>pattern</tt> is matched. Advances
the scan pointer if <tt>advance_pointer_p</tt>, otherwise not. Returns the
matched string if <tt>return_string_p</tt> is true, otherwise returns the
number of bytes advanced. This method does affect the match register.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: search_full(pattern, advance_pointer_p, return_string_p)
 *
 * Scans the string _until_ the +pattern+ is matched.
 * Advances the scan pointer if +advance_pointer_p+, otherwise not.
 * Returns the matched string if +return_string_p+ is true, otherwise
 * returns the number of bytes advanced.
 * This method does affect the match register.
 */
static VALUE
strscan_search_full(VALUE self, VALUE re, VALUE s, VALUE f)
{
    return strscan_do_scan(self, re, RTEST(s), RTEST(f), 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="skip-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>skip</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attempts to skip over the given <tt>pattern</tt> beginning with the scan
pointer. If it matches, the scan pointer is advanced to the end of the
match, and the length of the match is returned.  Otherwise, <tt>nil</tt> is
returned.
</p>
<p>
It&#8217;s similar to #scan, but without returning the matched string.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  p s.skip(/\w+/)   # -&gt; 4
  p s.skip(/\w+/)   # -&gt; nil
  p s.skip(/\s+/)   # -&gt; 1
  p s.skip(/\w+/)   # -&gt; 6
  p s.skip(/./)     # -&gt; nil</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: skip(pattern)
 *
 * Attempts to skip over the given +pattern+ beginning with the scan pointer.
 * If it matches, the scan pointer is advanced to the end of the match, and the
 * length of the match is returned.  Otherwise, +nil+ is returned.
 *
 * It's similar to #scan, but without returning the matched string.
 *
 *   s = StringScanner.new('test string')
 *   p s.skip(/\w+/)   # -&gt; 4
 *   p s.skip(/\w+/)   # -&gt; nil
 *   p s.skip(/\s+/)   # -&gt; 1
 *   p s.skip(/\w+/)   # -&gt; 6
 *   p s.skip(/./)     # -&gt; nil
 *
 */
static VALUE
strscan_skip(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 1);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="skip_until-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>skip_until</strong>(pattern) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Advances the scan pointer until <tt>pattern</tt> is matched and consumed. 
Returns the number of bytes advanced, or <tt>nil</tt> if no match was
found.
</p>
<p>
Look ahead to match <tt>pattern</tt>, and advance the scan pointer to the
<em>end</em> of the match.  Return the number of characters advanced, or
<tt>nil</tt> if the match was unsuccessful.
</p>
<p>
It&#8217;s similar to #scan_until, but without returning the intervening
string.
</p>
<pre class="code">
  s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
  s.skip_until /12/           # -&gt; 10
  s                           #</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: skip_until(pattern)
 *
 * Advances the scan pointer until +pattern+ is matched and consumed.  Returns
 * the number of bytes advanced, or +nil+ if no match was found.
 *
 * Look ahead to match +pattern+, and advance the scan pointer to the _end_
 * of the match.  Return the number of characters advanced, or +nil+ if the
 * match was unsuccessful.
 *
 * It's similar to #scan_until, but without returning the intervening string.
 *
 *   s = StringScanner.new(&quot;Fri Dec 12 1975 14:39&quot;)
 *   s.skip_until /12/           # -&gt; 10
 *   s                           #
 */
static VALUE
strscan_skip_until(VALUE self, VALUE re)
{
    return strscan_do_scan(self, re, 1, 0, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="string-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>string</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the string being scanned.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Returns the string being scanned.
 */
static VALUE
strscan_get_string(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    return p-&gt;str;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="string=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>string=</strong>(str) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Changes the string being scanned to <tt>str</tt> and resets the scanner.
Returns <tt>str</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq: string=(str)
 *
 * Changes the string being scanned to +str+ and resets the scanner.
 * Returns +str+.
 */
static VALUE
strscan_set_string(VALUE self, VALUE str)
{
    struct strscanner *p;

    Data_Get_Struct(self, struct strscanner, p);
    StringValue(str);
    p-&gt;str = str;
    p-&gt;curr = 0;
    CLEAR_MATCH_STATUS(p);
    return str;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="terminate-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>terminate</strong> </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>clear</strong> </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the scan pointer to the end of the string and clear matching data.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * call-seq:
 *   terminate
 *   clear
 *
 * Set the scan pointer to the end of the string and clear matching data.
 */
static VALUE
strscan_terminate(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    p-&gt;curr = S_LEN(p);
    CLEAR_MATCH_STATUS(p);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="unscan-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>unscan</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Set the scan pointer to the previous position.  Only one previous position
is remembered, and it changes with each scanning operation.
</p>
<pre class="code">
  s = StringScanner.new('test string')
  s.scan(/\w+/)        # =&gt; &quot;test&quot;
  s.unscan
  s.scan(/../)         # =&gt; &quot;te&quot;
  s.scan(/\d/)         # =&gt; nil
  s.unscan             # ScanError: unscan failed: previous match record not exist</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/strscan/strscan.c'</span>

/*
 * Set the scan pointer to the previous position.  Only one previous position is
 * remembered, and it changes with each scanning operation.
 *
 *   s = StringScanner.new('test string')
 *   s.scan(/\w+/)        # =&gt; &quot;test&quot;
 *   s.unscan
 *   s.scan(/../)         # =&gt; &quot;te&quot;
 *   s.scan(/\d/)         # =&gt; nil
 *   s.unscan             # ScanError: unscan failed: previous match record not exist
 */
static VALUE
strscan_unscan(VALUE self)
{
    struct strscanner *p;

    GET_SCANNER(self, p);
    if (! MATCHED_P(p))
        rb_raise(ScanError, &quot;unscan failed: previous match record not exist&quot;);
    p-&gt;curr = p-&gt;prev;
    CLEAR_MATCH_STATUS(p);
    return self;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 14 00:01:41 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>