<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Module: FileUtils</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo; 
    
    
    <span class="title">FileUtils</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Module: FileUtils
  
  
  
</h1>

<dl class="box">
  
  
    
      <dt class="r1">Extended by:</dt>
      <dd class="r1"><span class='object_link'><a href="FileUtils/StreamUtils_.html" title="FileUtils::StreamUtils_ (module)">StreamUtils_</a></span></dd>
      
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="FileUtils/StreamUtils_.html" title="FileUtils::StreamUtils_ (module)">StreamUtils_</a></span></dd>
      
    
  
  
    <dt class="r1">Included in:</dt>
    <dd class="r1"><span class='object_link'><a href="FileUtils/DryRun.html" title="FileUtils::DryRun (module)">DryRun</a></span>, <span class='object_link'><a href="FileUtils/NoWrite.html" title="FileUtils::NoWrite (module)">NoWrite</a></span>, <span class='object_link'><a href="FileUtils/Verbose.html" title="FileUtils::Verbose (module)">Verbose</a></span>, <span class='object_link'><a href="RakeFileUtils.html" title="RakeFileUtils (module)">RakeFileUtils</a></span></dd>
    
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/rake.rb<span class="defines">,<br />
  lib/un.rb,<br /> lib/fileutils.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <h1>fileutils.rb</h1>
<p>
Copyright &#169; 2000-2007 Minero Aoki
</p>
<p>
This program is free software. You can distribute/modify this program under
the same terms of ruby.
</p>
<h2>module FileUtils</h2>
<p>
Namespace for several file utility methods for copying, moving, removing,
etc.
</p>
<h3>Module Functions</h3>
<pre class="code">
  cd(dir, options)
  cd(dir, options) {|dir| .... }
  pwd()
  mkdir(dir, options)
  mkdir(list, options)
  mkdir_p(dir, options)
  mkdir_p(list, options)
  rmdir(dir, options)
  rmdir(list, options)
  ln(old, new, options)
  ln(list, destdir, options)
  ln_s(old, new, options)
  ln_s(list, destdir, options)
  ln_sf(src, dest, options)
  cp(src, dest, options)
  cp(list, dir, options)
  cp_r(src, dest, options)
  cp_r(list, dir, options)
  mv(src, dest, options)
  mv(list, dir, options)
  rm(list, options)
  rm_r(list, options)
  rm_rf(list, options)
  install(src, dest, mode = &lt;src's&gt;, options)
  chmod(mode, list, options)
  chmod_R(mode, list, options)
  chown(user, group, list, options)
  chown_R(user, group, list, options)
  touch(list, options)
</pre>
<p>
The <tt>options</tt> parameter is a hash of options, taken from the list
<tt>:force</tt>, <tt>:noop</tt>, <tt>:preserve</tt>, and <tt>:verbose</tt>.
<tt>:noop</tt> means that no changes are made.  The other two are obvious.
Each method documents the options that it honours.
</p>
<p>
All methods that have the concept of a &#8220;source&#8221; file or
directory can take either one file or a list of files in that argument. 
See the method documentation for examples.
</p>
<p>
There are some `low level&#8217; methods, which do not accept any option:
</p>
<pre class="code">
  <span class='id copy_entry'>copy_entry</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id preserve'>preserve</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id dereference'>dereference</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id copy_file'>copy_file</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id preserve'>preserve</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id dereference'>dereference</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id copy_stream'>copy_stream</span><span class='lparen'>(</span><span class='id srcstream'>srcstream</span><span class='comma'>,</span> <span class='id deststream'>deststream</span><span class='rparen'>)</span>
  <span class='id remove_entry'>remove_entry</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id remove_entry_secure'>remove_entry_secure</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id remove_file'>remove_file</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id compare_file'>compare_file</span><span class='lparen'>(</span><span class='id path_a'>path_a</span><span class='comma'>,</span> <span class='id path_b'>path_b</span><span class='rparen'>)</span>
  <span class='id compare_stream'>compare_stream</span><span class='lparen'>(</span><span class='id stream_a'>stream_a</span><span class='comma'>,</span> <span class='id stream_b'>stream_b</span><span class='rparen'>)</span>
  <span class='id uptodate?'>uptodate?</span><span class='lparen'>(</span><span class='id file'>file</span><span class='comma'>,</span> <span class='id cmp_list'>cmp_list</span><span class='rparen'>)</span>
</pre>
<h2>module FileUtils::Verbose</h2>
<p>
This module has all methods of FileUtils module, but it outputs messages
before acting.  This equates to passing the <tt>:verbose</tt> flag to
methods in FileUtils.
</p>
<h2>module FileUtils::NoWrite</h2>
<p>
This module has all methods of FileUtils module, but never changes
files/directories.  This equates to passing the <tt>:noop</tt> flag to
methods in FileUtils.
</p>
<h2>module FileUtils::DryRun</h2>
<p>
This module has all methods of FileUtils module, but never changes
files/directories.  This equates to passing the <tt>:noop</tt> and
<tt>:verbose</tt> flags to methods in FileUtils.
</p>


  </div>
</div>
<div class="tags">
  
</div><h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="FileUtils/DryRun.html" title="FileUtils::DryRun (module)">DryRun</a></span>, <span class='object_link'><a href="FileUtils/NoWrite.html" title="FileUtils::NoWrite (module)">NoWrite</a></span>, <span class='object_link'><a href="FileUtils/StreamUtils_.html" title="FileUtils::StreamUtils_ (module)">StreamUtils_</a></span>, <span class='object_link'><a href="FileUtils/Verbose.html" title="FileUtils::Verbose (module)">Verbose</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="FileUtils/Entry_.html" title="FileUtils::Entry_ (class)">Entry_</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="RUBY_EXT-constant" class="">RUBY_EXT =
          
        </dt>
        <dd><pre class="code"><span class='lparen'>(</span><span class='lparen'>(</span><span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>=~</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\.(com|cmd|exe|bat|rb|sh)$</span><span class='regexp_end'>/</span></span><span class='rparen'>)</span> <span class='op'>?</span>
<span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span> <span class='op'>:</span>
<span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>EXEEXT</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='rparen'>)</span></pre></dd>
      
        <dt id="RUBY-constant" class="">RUBY =
          
        </dt>
        <dd><pre class="code"><span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span>
<span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bindir</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span><span class='comma'>,</span>
<span class='const'>RbConfig</span><span class='op'>::</span><span class='const'>CONFIG</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruby_install_name</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='const'>RUBY_EXT</span><span class='rparen'>)</span><span class='period'>.</span>
<span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>.*\s.*</span><span class='regexp_end'>/m</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>&quot;\&amp;&quot;</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span></pre></dd>
      
        <dt id="LN_SUPPORTED-constant" class="">LN_SUPPORTED =
          
        </dt>
        <dd><pre class="code"><span class='lbracket'>[</span><span class='kw'>true</span><span class='rbracket'>]</span></pre></dd>
      
        <dt id="OPT_TABLE-constant" class="">OPT_TABLE =
          <div class="docstring">
  <div class="discussion">
    <p>
This hash table holds command options.
</p>


  </div>
</div>
<div class="tags">
  
</div>
        </dt>
        <dd><pre class="code"><span class='lbrace'>{</span><span class='rbrace'>}</span></pre></dd>
      
        <dt id="METHODS-constant" class="">METHODS =
          
        </dt>
        <dd><pre class="code"><span class='id singleton_methods'>singleton_methods</span><span class='lparen'>(</span><span class='rparen'>)</span> <span class='op'>-</span> <span class='lbracket'>[</span><span class='symbol'>:private_module_function</span><span class='comma'>,</span>
<span class='symbol'>:commands</span><span class='comma'>,</span> <span class='symbol'>:options</span><span class='comma'>,</span> <span class='symbol'>:have_option?</span><span class='comma'>,</span> <span class='symbol'>:options_of</span><span class='comma'>,</span> <span class='symbol'>:collect_method</span><span class='rbracket'>]</span></pre></dd>
      
    </dl>
  


  
  
  
  

  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#private_module_function-class_method" title="private_module_function (class method)">+ (Object) <strong>private_module_function</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cd-instance_method" title="#cd (instance method)">- (Object) <strong>cd</strong>(dir, options = {}, &amp;block) </a>
    

    
      (also: #chdir)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chmod-instance_method" title="#chmod (instance method)">- (Object) <strong>chmod</strong>(mode, list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chmod_R-instance_method" title="#chmod_R (instance method)">- (Object) <strong>chmod_R</strong>(mode, list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose force.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chown-instance_method" title="#chown (instance method)">- (Object) <strong>chown</strong>(user, group, list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#chown_R-instance_method" title="#chown_R (instance method)">- (Object) <strong>chown_R</strong>(user, group, list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose force.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compare_file-instance_method" title="#compare_file (instance method)">- (Object) <strong>compare_file</strong>(a, b) </a>
    

    
      (also: #identical?, #cmp)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the contents of a file A and a file B are identical.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#compare_stream-instance_method" title="#compare_stream (instance method)">- (Object) <strong>compare_stream</strong>(a, b) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns true if the contents of a stream <tt>a</tt> and <tt>b</tt> are
identical.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_entry-instance_method" title="#copy_entry (instance method)">- (Object) <strong>copy_entry</strong>(src, dest, preserve = false, dereference_root = false, remove_destination = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Copies a file system entry <tt>src</tt> to <tt>dest</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_file-instance_method" title="#copy_file (instance method)">- (Object) <strong>copy_file</strong>(src, dest, preserve = false, dereference = true) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Copies file contents of <tt>src</tt> to <tt>dest</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#copy_stream-instance_method" title="#copy_stream (instance method)">- (Object) <strong>copy_stream</strong>(src, dest) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Copies stream <tt>src</tt> to <tt>dest</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cp-instance_method" title="#cp (instance method)">- (Object) <strong>cp</strong>(src, dest, options = {}) </a>
    

    
      (also: #copy)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: preserve noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#cp_r-instance_method" title="#cp_r (instance method)">- (Object) <strong>cp_r</strong>(src, dest, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: preserve noop verbose dereference_root remove_destination.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fu_have_symlink%3F-instance_method" title="#fu_have_symlink? (instance method)">- (Boolean) <strong>fu_have_symlink?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fu_mkdir-instance_method" title="#fu_mkdir (instance method)">- (Object) <strong>fu_mkdir</strong>(path, mode) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fu_stat_identical_entry%3F-instance_method" title="#fu_stat_identical_entry? (instance method)">- (Boolean) <strong>fu_stat_identical_entry?</strong>(a, b) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#install-instance_method" title="#install (instance method)">- (Object) <strong>install</strong>(src, dest, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: mode preserve noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ln-instance_method" title="#ln (instance method)">- (Object) <strong>ln</strong>(src, dest, options = {}) </a>
    

    
      (also: #link)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: force noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ln_s-instance_method" title="#ln_s (instance method)">- (Object) <strong>ln_s</strong>(src, dest, options = {}) </a>
    

    
      (also: #symlink)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: force noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ln_sf-instance_method" title="#ln_sf (instance method)">- (Object) <strong>ln_sf</strong>(src, dest, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mkdir-instance_method" title="#mkdir (instance method)">- (Object) <strong>mkdir</strong>(list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: mode noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mkdir_p-instance_method" title="#mkdir_p (instance method)">- (Object) <strong>mkdir_p</strong>(list, options = {}) </a>
    

    
      (also: #mkpath, #makedirs)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: mode noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mv-instance_method" title="#mv (instance method)">- (Object) <strong>mv</strong>(src, dest, options = {}) </a>
    

    
      (also: #move)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: force noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pwd-instance_method" title="#pwd (instance method)">- (Object) <strong>pwd</strong> </a>
    

    
      (also: #getwd)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: (none).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_dir-instance_method" title="#remove_dir (instance method)">- (Object) <strong>remove_dir</strong>(path, force = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Removes a directory <tt>dir</tt> and its contents recursively.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_entry-instance_method" title="#remove_entry (instance method)">- (Object) <strong>remove_entry</strong>(path, force = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This method removes a file system entry <tt>path</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_entry_secure-instance_method" title="#remove_entry_secure (instance method)">- (Object) <strong>remove_entry_secure</strong>(path, force = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
This method removes a file system entry <tt>path</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#remove_file-instance_method" title="#remove_file (instance method)">- (Object) <strong>remove_file</strong>(path, force = false) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Removes a file <tt>path</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rename_cannot_overwrite_file%3F-instance_method" title="#rename_cannot_overwrite_file? (instance method)">- (Boolean) <strong>rename_cannot_overwrite_file?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rm-instance_method" title="#rm (instance method)">- (Object) <strong>rm</strong>(list, options = {}) </a>
    

    
      (also: #remove)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: force noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rm_f-instance_method" title="#rm_f (instance method)">- (Object) <strong>rm_f</strong>(list, options = {}) </a>
    

    
      (also: #safe_unlink)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rm_r-instance_method" title="#rm_r (instance method)">- (Object) <strong>rm_r</strong>(list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: force noop verbose secure.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rm_rf-instance_method" title="#rm_rf (instance method)">- (Object) <strong>rm_rf</strong>(list, options = {}) </a>
    

    
      (also: #rmtree)
    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose secure.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#rmdir-instance_method" title="#rmdir (instance method)">- (Object) <strong>rmdir</strong>(list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop, verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ruby-instance_method" title="#ruby (instance method)">- (Object) <strong>ruby</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Run a Ruby interpreter with the given arguments.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_ln-instance_method" title="#safe_ln (instance method)">- (Object) <strong>safe_ln</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attempt to do a normal file link, but fall back to a copy if the link.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sh-instance_method" title="#sh (instance method)">- (Object) <strong>sh</strong>(*cmd, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Run the system command <tt>cmd</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#split_all-instance_method" title="#split_all (instance method)">- (Object) <strong>split_all</strong>(path) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Split a file path into individual directory names.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#touch-instance_method" title="#touch (instance method)">- (Object) <strong>touch</strong>(list, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: noop verbose.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#uptodate%3F-instance_method" title="#uptodate? (instance method)">- (Boolean) <strong>uptodate?</strong>(new, old_list, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Options: (none).
</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="private_module_function-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>private_module_function</strong>(name) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


87
88
89
90</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 87</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id private_module_function'>private_module_function</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>   <span class='comment'>#:nodoc:
</span>  <span class='id module_function'>module_function</span> <span class='id name'>name</span>
  <span class='id private_class_method'>private_class_method</span> <span class='id name'>name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="cd-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cd</strong>(dir, options = {}, &amp;block) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='chdir-instance_method'>chdir</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: verbose
</p>
<p>
Changes the current directory to the directory <tt>dir</tt>.
</p>
<p>
If this method is called with block, resumes to the old working directory
after the block execution finished.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cd'>cd</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='rparen'>)</span>   <span class='comment'># chdir and report it</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


118
119
120
121
122
123</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 118</span>

<span class='kw'>def</span> <span class='id cd'>cd</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span> <span class='comment'># :yield: dir
</span>  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cd</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cd </span><span class='embexpr_beg'>#{</span><span class='id dir'>dir</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='const'>Dir</span><span class='period'>.</span><span class='id chdir'>chdir</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cd -</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='kw'>and</span> <span class='id block'>block</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chmod-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>chmod</strong>(mode, list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='int'>0755</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>somecommand</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='int'>0644</span><span class='comma'>,</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>my.rb</span><span class='words_sep'> </span><span class='tstring_content'>your.rb</span><span class='words_sep'> </span><span class='tstring_content'>his.rb</span><span class='words_sep'> </span><span class='tstring_content'>her.rb</span><span class='words_sep'>)</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='int'>0755</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/bin/ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


868
869
870
871
872
873
874
875
876</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 868</span>

<span class='kw'>def</span> <span class='id chmod'>chmod</span><span class='lparen'>(</span><span class='id mode'>mode</span><span class='comma'>,</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chmod</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chmod %o %s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id mode'>mode</span><span class='comma'>,</span> <span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='id mode'>mode</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chmod_R-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>chmod_R</strong>(mode, list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose force
</p>
<p>
Changes permission bits on the named files (in <tt>list</tt>) to the bit
pattern represented by <tt>mode</tt>.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chmod_R'>chmod_R</span> <span class='int'>0700</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/app.</span><span class='embexpr_beg'>#{</span><span class='gvar'>$$</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


889
890
891
892
893
894
895
896
897
898
899
900
901
902
903
904
905</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 889</span>

<span class='kw'>def</span> <span class='id chmod_R'>chmod_R</span><span class='lparen'>(</span><span class='id mode'>mode</span><span class='comma'>,</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chmod_R</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chmod -R%s %o %s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                            <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                            <span class='id mode'>mode</span><span class='comma'>,</span> <span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id root'>root</span><span class='op'>|</span>
    <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id root'>root</span><span class='rparen'>)</span><span class='period'>.</span><span class='id traverse'>traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id ent'>ent</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='id mode'>mode</span>
      <span class='kw'>rescue</span>
        <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chown-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>chown</strong>(user, group, list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt>.  <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (String). If
<tt>user</tt> or <tt>group</tt> is nil, this method does not change the
attribute.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>root</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>staff</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/local/bin/ruby</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bin</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/bin/*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


922
923
924
925
926
927
928
929
930
931
932
933
934</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 922</span>

<span class='kw'>def</span> <span class='id chown'>chown</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id group'>group</span><span class='comma'>,</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chown</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chown %s%s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                            <span class='lbracket'>[</span><span class='id user'>user</span><span class='comma'>,</span><span class='id group'>group</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                            <span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id uid'>uid</span> <span class='op'>=</span> <span class='id fu_get_uid'>fu_get_uid</span><span class='lparen'>(</span><span class='id user'>user</span><span class='rparen'>)</span>
  <span class='id gid'>gid</span> <span class='op'>=</span> <span class='id fu_get_gid'>fu_get_gid</span><span class='lparen'>(</span><span class='id group'>group</span><span class='rparen'>)</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='id uid'>uid</span><span class='comma'>,</span> <span class='id gid'>gid</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="chown_R-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>chown_R</strong>(user, group, list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose force
</p>
<p>
Changes owner and group on the named files (in <tt>list</tt>) to the user
<tt>user</tt> and the group <tt>group</tt> recursively. <tt>user</tt> and
<tt>group</tt> may be an ID (Integer/String) or a name (String).  If
<tt>user</tt> or <tt>group</tt> is nil, this method does not change the
attribute.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chown_R'>chown_R</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>www</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>www</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/var/www/htdocs</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id chown_R'>chown_R</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cvs</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cvs</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/var/cvs</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 951</span>

<span class='kw'>def</span> <span class='id chown_R'>chown_R</span><span class='lparen'>(</span><span class='id user'>user</span><span class='comma'>,</span> <span class='id group'>group</span><span class='comma'>,</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chown_R</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='id sprintf'>sprintf</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>chown -R%s %s%s</span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                            <span class='lparen'>(</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span>
                            <span class='lbracket'>[</span><span class='id user'>user</span><span class='comma'>,</span><span class='id group'>group</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id compact'>compact</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>:</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='comma'>,</span>
                            <span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id uid'>uid</span> <span class='op'>=</span> <span class='id fu_get_uid'>fu_get_uid</span><span class='lparen'>(</span><span class='id user'>user</span><span class='rparen'>)</span>
  <span class='id gid'>gid</span> <span class='op'>=</span> <span class='id fu_get_gid'>fu_get_gid</span><span class='lparen'>(</span><span class='id group'>group</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id uid'>uid</span> <span class='kw'>or</span> <span class='id gid'>gid</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id root'>root</span><span class='op'>|</span>
    <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id root'>root</span><span class='rparen'>)</span><span class='period'>.</span><span class='id traverse'>traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id ent'>ent</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='id uid'>uid</span><span class='comma'>,</span> <span class='id gid'>gid</span>
      <span class='kw'>rescue</span>
        <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="compare_file-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>compare_file</strong>(a, b) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='identical?-instance_method'>identical?</span>, <span id='cmp-instance_method'>cmp</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the contents of a file A and a file B are identical.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id compare_file'>compare_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>somefile</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>somefile</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>  <span class='comment'>#=&gt; true
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id compare_file'>compare_file</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/bin/cp</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/bin/mv</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>    <span class='comment'>#=&gt; maybe false</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


797
798
799
800
801
802
803
804</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 797</span>

<span class='kw'>def</span> <span class='id compare_file'>compare_file</span><span class='lparen'>(</span><span class='id a'>a</span><span class='comma'>,</span> <span class='id b'>b</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id size'>size</span><span class='lparen'>(</span><span class='id a'>a</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='const'>File</span><span class='period'>.</span><span class='id size'>size</span><span class='lparen'>(</span><span class='id b'>b</span><span class='rparen'>)</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id a'>a</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id fa'>fa</span><span class='op'>|</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id b'>b</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id fb'>fb</span><span class='op'>|</span>
      <span class='kw'>return</span> <span class='id compare_stream'>compare_stream</span><span class='lparen'>(</span><span class='id fa'>fa</span><span class='comma'>,</span> <span class='id fb'>fb</span><span class='rparen'>)</span>
    <span class='rbrace'>}</span>
  <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="compare_stream-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>compare_stream</strong>(a, b) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns true if the contents of a stream <tt>a</tt> and <tt>b</tt> are
identical.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


815
816
817
818
819
820
821
822
823
824
825
826
827
828</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 815</span>

<span class='kw'>def</span> <span class='id compare_stream'>compare_stream</span><span class='lparen'>(</span><span class='id a'>a</span><span class='comma'>,</span> <span class='id b'>b</span><span class='rparen'>)</span>
  <span class='id bsize'>bsize</span> <span class='op'>=</span> <span class='id fu_stream_blksize'>fu_stream_blksize</span><span class='lparen'>(</span><span class='id a'>a</span><span class='comma'>,</span> <span class='id b'>b</span><span class='rparen'>)</span>
  <span class='id sa'>sa</span> <span class='op'>=</span> <span class='id sb'>sb</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='kw'>while</span> <span class='id sa'>sa</span> <span class='op'>==</span> <span class='id sb'>sb</span>
    <span class='id sa'>sa</span> <span class='op'>=</span> <span class='id a'>a</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id bsize'>bsize</span><span class='rparen'>)</span>
    <span class='id sb'>sb</span> <span class='op'>=</span> <span class='id b'>b</span><span class='period'>.</span><span class='id read'>read</span><span class='lparen'>(</span><span class='id bsize'>bsize</span><span class='rparen'>)</span>
    <span class='kw'>unless</span> <span class='id sa'>sa</span> <span class='kw'>and</span> <span class='id sb'>sb</span>
      <span class='kw'>if</span> <span class='id sa'>sa</span><span class='period'>.</span><span class='id nil?'>nil?</span> <span class='kw'>and</span> <span class='id sb'>sb</span><span class='period'>.</span><span class='id nil?'>nil?</span>
        <span class='kw'>return</span> <span class='kw'>true</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>false</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy_entry-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_entry</strong>(src, dest, preserve = false, dereference_root = false, remove_destination = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Copies a file system entry <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt>
is a directory, this method copies its contents recursively. This method
preserves file types, c.f. symlink, directory&#8230; (FIFO, device files
and etc. are not supported yet)
</p>
<p>
Both of <tt>src</tt> and <tt>dest</tt> must be a path name. <tt>src</tt>
must exist, <tt>dest</tt> must not exist.
</p>
<p>
If <tt>preserve</tt> is true, this method preserves owner, group,
permissions and modified time.
</p>
<p>
If <tt>dereference_root</tt> is true, this method dereference tree root.
</p>
<p>
If <tt>remove_destination</tt> is true, this method removes each
destination file before copy.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


457
458
459
460
461
462
463
464</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 457</span>

<span class='kw'>def</span> <span class='id copy_entry'>copy_entry</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id preserve'>preserve</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id dereference_root'>dereference_root</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id remove_destination'>remove_destination</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id dereference_root'>dereference_root</span><span class='rparen'>)</span><span class='period'>.</span><span class='id traverse'>traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
    <span class='id destent'>destent</span> <span class='op'>=</span> <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id dest'>dest</span><span class='comma'>,</span> <span class='id ent'>ent</span><span class='period'>.</span><span class='id rel'>rel</span><span class='comma'>,</span> <span class='kw'>false</span><span class='rparen'>)</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id unlink'>unlink</span> <span class='id destent'>destent</span><span class='period'>.</span><span class='id path'>path</span> <span class='kw'>if</span> <span class='id remove_destination'>remove_destination</span> <span class='op'>&amp;&amp;</span> <span class='const'>File</span><span class='period'>.</span><span class='id file?'>file?</span><span class='lparen'>(</span><span class='id destent'>destent</span><span class='period'>.</span><span class='id path'>path</span><span class='rparen'>)</span>
    <span class='id ent'>ent</span><span class='period'>.</span><span class='id copy'>copy</span> <span class='id destent'>destent</span><span class='period'>.</span><span class='id path'>path</span>
    <span class='id ent'>ent</span><span class='period'>.</span><span class='id copy_metadata'>copy_metadata</span> <span class='id destent'>destent</span><span class='period'>.</span><span class='id path'>path</span> <span class='kw'>if</span> <span class='id preserve'>preserve</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy_file-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_file</strong>(src, dest, preserve = false, dereference = true) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Copies file contents of <tt>src</tt> to <tt>dest</tt>. Both of <tt>src</tt>
and <tt>dest</tt> must be a path name.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


471
472
473
474
475</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 471</span>

<span class='kw'>def</span> <span class='id copy_file'>copy_file</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id preserve'>preserve</span> <span class='op'>=</span> <span class='kw'>false</span><span class='comma'>,</span> <span class='id dereference'>dereference</span> <span class='op'>=</span> <span class='kw'>true</span><span class='rparen'>)</span>
  <span class='id ent'>ent</span> <span class='op'>=</span> <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='id dereference'>dereference</span><span class='rparen'>)</span>
  <span class='id ent'>ent</span><span class='period'>.</span><span class='id copy_file'>copy_file</span> <span class='id dest'>dest</span>
  <span class='id ent'>ent</span><span class='period'>.</span><span class='id copy_metadata'>copy_metadata</span> <span class='id dest'>dest</span> <span class='kw'>if</span> <span class='id preserve'>preserve</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="copy_stream-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>copy_stream</strong>(src, dest) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Copies stream <tt>src</tt> to <tt>dest</tt>. <tt>src</tt> must respond to
#read(n) and <tt>dest</tt> must respond to #write(str).
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


483
484
485</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 483</span>

<span class='kw'>def</span> <span class='id copy_stream'>copy_stream</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span>
  <span class='const'>IO</span><span class='period'>.</span><span class='id copy_stream'>copy_stream</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cp-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cp</strong>(src, dest, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='copy-instance_method'>copy</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: preserve noop verbose
</p>
<p>
Copies a file content <tt>src</tt> to <tt>dest</tt>.  If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
If <tt>src</tt> is a list of files, then <tt>dest</tt> must be a directory.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp'>cp</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>eval.c</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>eval.c.org</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp'>cp</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>cgi.rb</span><span class='words_sep'> </span><span class='tstring_content'>complex.rb</span><span class='words_sep'> </span><span class='tstring_content'>date.rb</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/lib/ruby/1.6</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp'>cp</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>cgi.rb</span><span class='words_sep'> </span><span class='tstring_content'>complex.rb</span><span class='words_sep'> </span><span class='tstring_content'>date.rb</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/lib/ruby/1.6</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp'>cp</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>symlink</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest</span><span class='tstring_end'>'</span></span>   <span class='comment'># copy content, &quot;dest&quot; is not a symlink</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


387
388
389
390
391
392
393
394</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 387</span>

<span class='kw'>def</span> <span class='id cp'>cp</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cp</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cp</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -p</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id fu_each_src_dest'>fu_each_src_dest</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='op'>|</span>
    <span class='id copy_file'>copy_file</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="cp_r-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>cp_r</strong>(src, dest, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: preserve noop verbose dereference_root remove_destination
</p>
<p>
Copies <tt>src</tt> to <tt>dest</tt>. If <tt>src</tt> is a directory, this
method copies all its contents recursively. If <tt>dest</tt> is a
directory, copies <tt>src</tt> to <tt>dest/src</tt>.
</p>
<p>
<tt>src</tt> can be a list of files.
</p>
<pre class="code">
  <span class='comment'># Installing ruby library &quot;mylib&quot; under the site_ruby
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm_r'>rm_r</span> <span class='id site_ruby'>site_ruby</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/mylib</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:force</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp_r'>cp_r</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lib/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='id site_ruby'>site_ruby</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/mylib</span><span class='tstring_end'>'</span></span>

  <span class='comment'># Examples of copying several files to target directory.
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp_r'>cp_r</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>mail.rb</span><span class='words_sep'> </span><span class='tstring_content'>field.rb</span><span class='words_sep'> </span><span class='tstring_content'>debug/</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='id site_ruby'>site_ruby</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/tmail</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp_r'>cp_r</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*.rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/home/aamine/lib/ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:noop</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>

  <span class='comment'># If you want to copy all contents of a directory instead of the
</span>  <span class='comment'># directory itself, c.f. src/x -&gt; dest/x, src/y -&gt; dest/y,
</span>  <span class='comment'># use following code.
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id cp_r'>cp_r</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>src/.</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>dest</span><span class='tstring_end'>'</span></span>     <span class='comment'># cp_r('src', 'dest') makes src/dest,
</span>                                     <span class='comment'># but this doesn't.</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


426
427
428
429
430
431
432
433
434
435</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 426</span>

<span class='kw'>def</span> <span class='id cp_r'>cp_r</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cp_r</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>cp -r</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>p</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:remove_destination</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> --remove-destination</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:dereference_root</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='symbol'>:dereference_root</span><span class='rparen'>)</span>
  <span class='id fu_each_src_dest'>fu_each_src_dest</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='op'>|</span>
    <span class='id copy_entry'>copy_entry</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:dereference_root</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:remove_destination</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fu_have_symlink?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>fu_have_symlink?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


737
738
739
740
741
742
743</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 737</span>

<span class='kw'>def</span> <span class='id fu_have_symlink?'>fu_have_symlink?</span>   <span class='comment'>#:nodoc
</span>  <span class='const'>File</span><span class='period'>.</span><span class='id symlink'>symlink</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>nil</span>
<span class='kw'>rescue</span> <span class='const'>NotImplementedError</span>
  <span class='kw'>return</span> <span class='kw'>false</span>
<span class='kw'>rescue</span>
  <span class='kw'>return</span> <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fu_mkdir-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fu_mkdir</strong>(path, mode) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


237
238
239
240
241
242
243
244
245</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 237</span>

<span class='kw'>def</span> <span class='id fu_mkdir'>fu_mkdir</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id mode'>mode</span><span class='rparen'>)</span>   <span class='comment'>#:nodoc:
</span>  <span class='id path'>path</span> <span class='op'>=</span> <span class='id path'>path</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r&lt;</span><span class='tstring_content'>/\z</span><span class='regexp_end'>&gt;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id mode'>mode</span>
    <span class='const'>Dir</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id mode'>mode</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='id mode'>mode</span><span class='comma'>,</span> <span class='id path'>path</span>
  <span class='kw'>else</span>
    <span class='const'>Dir</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='id path'>path</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fu_stat_identical_entry?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>fu_stat_identical_entry?</strong>(a, b) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


746
747
748</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 746</span>

<span class='kw'>def</span> <span class='id fu_stat_identical_entry?'>fu_stat_identical_entry?</span><span class='lparen'>(</span><span class='id a'>a</span><span class='comma'>,</span> <span class='id b'>b</span><span class='rparen'>)</span>   <span class='comment'>#:nodoc:
</span>  <span class='id a'>a</span><span class='period'>.</span><span class='id dev'>dev</span> <span class='op'>==</span> <span class='id b'>b</span><span class='period'>.</span><span class='id dev'>dev</span> <span class='kw'>and</span> <span class='id a'>a</span><span class='period'>.</span><span class='id ino'>ino</span> <span class='op'>==</span> <span class='id b'>b</span><span class='period'>.</span><span class='id ino'>ino</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="install-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>install</strong>(src, dest, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: mode preserve noop verbose
</p>
<p>
If <tt>src</tt> is not same as <tt>dest</tt>, copies it and changes the
permission mode to <tt>mode</tt>.  If <tt>dest</tt> is a directory,
destination is <tt>dest</tt>/<tt>src</tt>. This method removes destination
before copy.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id install'>install</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/local/bin/ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:mode</span> <span class='op'>=&gt;</span> <span class='int'>0755</span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id install'>install</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>lib.rb</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/local/lib/ruby/site_ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


841
842
843
844
845
846
847
848
849
850
851
852
853</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 841</span>

<span class='kw'>def</span> <span class='id install'>install</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>install</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>install -c</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span> <span class='op'>&amp;&amp;</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -p</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -m 0%o</span><span class='tstring_end'>'</span></span> <span class='op'>%</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id fu_each_src_dest'>fu_each_src_dest</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='id st'>st</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span><span class='lparen'>(</span><span class='id d'>d</span><span class='rparen'>)</span> <span class='kw'>and</span> <span class='id compare_file'>compare_file</span><span class='lparen'>(</span><span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='rparen'>)</span>
      <span class='id remove_file'>remove_file</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='kw'>true</span>
      <span class='id copy_file'>copy_file</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id utime'>utime</span> <span class='id st'>st</span><span class='period'>.</span><span class='id atime'>atime</span><span class='comma'>,</span> <span class='id st'>st</span><span class='period'>.</span><span class='id mtime'>mtime</span><span class='comma'>,</span> <span class='id d'>d</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:preserve</span><span class='rbracket'>]</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id d'>d</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ln-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ln</strong>(src, dest, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='link-instance_method'>link</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: force noop verbose
</p>
<p>
<b><tt>ln(old, new, options = {})</tt></b>
</p>
<p>
Creates a hard link <tt>new</tt> which points to <tt>old</tt>. If
<tt>new</tt> already exists and it is a directory, creates a link
<tt>new/old</tt>. If <tt>new</tt> already exists and it is not a directory,
raises Errno::EEXIST. But if :force option is set, overwrite <tt>new</tt>.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln'>ln</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>gcc</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>cc</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln'>ln</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/bin/emacs21</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/bin/emacs</span><span class='tstring_end'>'</span></span>
</pre>
<p>
<b><tt>ln(list, destdir, options = {})</tt></b>
</p>
<p>
Creates several hard links in a directory, with each one pointing to the
item in <tt>list</tt>.  If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<pre class="code">
  <span class='id include'>include</span> <span class='const'>FileUtils</span>
  <span class='id cd'>cd</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/sbin</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln'>ln</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>cp</span><span class='words_sep'> </span><span class='tstring_content'>mv</span><span class='words_sep'> </span><span class='tstring_content'>mkdir</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/bin</span><span class='tstring_end'>'</span></span>   <span class='comment'># Now /sbin/cp and /bin/cp are linked.</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302
303
304
305
306
307
308
309
310</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 302</span>

<span class='kw'>def</span> <span class='id ln'>ln</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ln</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ln</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id fu_each_src_dest0'>fu_each_src_dest0</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span><span class='id d'>d</span><span class='op'>|</span>
    <span class='id remove_file'>remove_file</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id link'>link</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ln_s-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ln_s</strong>(src, dest, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='symlink-instance_method'>symlink</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: force noop verbose
</p>
<p>
<b><tt>ln_s(old, new, options = {})</tt></b>
</p>
<p>
Creates a symbolic link <tt>new</tt> which points to <tt>old</tt>.  If
<tt>new</tt> already exists and it is a directory, creates a symbolic link
<tt>new/old</tt>.  If <tt>new</tt> already exists and it is not a
directory, raises Errno::EEXIST.  But if :force option is set, overwrite
<tt>new</tt>.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln_s'>ln_s</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/bin/ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/local/bin/ruby</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln_s'>ln_s</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>verylongsourcefilename.c</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>c</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>
</pre>
<p>
<b><tt>ln_s(list, destdir, options = {})</tt></b>
</p>
<p>
Creates several symbolic links in a directory, with each one pointing to
the item in <tt>list</tt>.  If <tt>destdir</tt> is not a directory, raises
Errno::ENOTDIR.
</p>
<p>
If <tt>destdir</tt> is not a directory, raises Errno::ENOTDIR.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id ln_s'>ln_s</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>bin/*.rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/home/aamine/bin</span><span class='tstring_end'>'</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


341
342
343
344
345
346
347
348
349</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 341</span>

<span class='kw'>def</span> <span class='id ln_s'>ln_s</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ln_s</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>ln -s</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id fu_each_src_dest0'>fu_each_src_dest0</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span><span class='id d'>d</span><span class='op'>|</span>
    <span class='id remove_file'>remove_file</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='kw'>true</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id symlink'>symlink</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ln_sf-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ln_sf</strong>(src, dest, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose
</p>
<p>
Same as
</p>
<pre class="code">
  <span class='comment'>#ln_s(src, dest, :force)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


364
365
366
367
368
369</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 364</span>

<span class='kw'>def</span> <span class='id ln_sf'>ln_sf</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ln_sf</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id ln_s'>ln_s</span> <span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mkdir-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>mkdir</strong>(list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: mode noop verbose
</p>
<p>
Creates one or more directories.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>test</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='qwords_beg'>%w( </span><span class='tstring_content'>tmp</span><span class='words_sep'> </span><span class='tstring_content'>data</span><span class='words_sep'> )</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>notexist</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:noop</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>  <span class='comment'># Does not really create.
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir'>mkdir</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>tmp</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:mode</span> <span class='op'>=&gt;</span> <span class='int'>0700</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167
168
169
170
171
172
173
174</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 165</span>

<span class='kw'>def</span> <span class='id mkdir'>mkdir</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mkdir</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mkdir </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-m %03o </span><span class='tstring_end'>'</span></span> <span class='op'>%</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>

  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id dir'>dir</span><span class='op'>|</span>
    <span class='id fu_mkdir'>fu_mkdir</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mkdir_p-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>mkdir_p</strong>(list, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='mkpath-instance_method'>mkpath</span>, <span id='makedirs-instance_method'>makedirs</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: mode noop verbose
</p>
<p>
Creates a directory and all its parent directories. For example,
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mkdir_p'>mkdir_p</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/usr/local/lib/ruby</span><span class='tstring_end'>'</span></span>
</pre>
<p>
causes to make following directories, if it does not exist.
</p>
<pre class="code">
    * /usr
    * /usr/local
    * /usr/local/lib
    * /usr/local/lib/ruby
</pre>
<p>
You can pass several directories at a time in a list.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


195
196
197
198
199
200
201
202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 195</span>

<span class='kw'>def</span> <span class='id mkdir_p'>mkdir_p</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mkdir_p</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mkdir -p </span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-m %03o </span><span class='tstring_end'>'</span></span> <span class='op'>%</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='op'>*</span><span class='id list'>list</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>

  <span class='id list'>list</span><span class='period'>.</span><span class='id map'>map</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span> <span class='id path'>path</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r&lt;</span><span class='tstring_content'>/\z</span><span class='regexp_end'>&gt;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='comment'># optimize for the most common case
</span>    <span class='kw'>begin</span>
      <span class='id fu_mkdir'>fu_mkdir</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span>
      <span class='kw'>next</span>
    <span class='kw'>rescue</span> <span class='const'>SystemCallError</span>
      <span class='kw'>next</span> <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id directory?'>directory?</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
    <span class='kw'>end</span>

    <span class='id stack'>stack</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
    <span class='kw'>until</span> <span class='id path'>path</span> <span class='op'>==</span> <span class='id stack'>stack</span><span class='period'>.</span><span class='id last'>last</span>   <span class='comment'># dirname(&quot;/&quot;)==&quot;/&quot;, dirname(&quot;C:/&quot;)==&quot;C:/&quot;
</span>      <span class='id stack'>stack</span><span class='period'>.</span><span class='id push'>push</span> <span class='id path'>path</span>
      <span class='id path'>path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id dirname'>dirname</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
    <span class='id stack'>stack</span><span class='period'>.</span><span class='id reverse_each'>reverse_each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id dir'>dir</span><span class='op'>|</span>
      <span class='kw'>begin</span>
        <span class='id fu_mkdir'>fu_mkdir</span> <span class='id dir'>dir</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mode</span><span class='rbracket'>]</span>
      <span class='kw'>rescue</span> <span class='const'>SystemCallError</span>
        <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id directory?'>directory?</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='op'>*</span><span class='id list'>list</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="mv-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>mv</strong>(src, dest, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='move-instance_method'>move</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: force noop verbose
</p>
<p>
Moves file(s) <tt>src</tt> to <tt>dest</tt>.  If <tt>file</tt> and
<tt>dest</tt> exist on the different disk partition, the file is copied
then the original file is removed.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mv'>mv</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>badname.rb</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>goodname.rb</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mv'>mv</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>stuff.rb</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/notexist/lib/ruby</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>  <span class='comment'># no error
</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mv'>mv</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>junk.txt</span><span class='words_sep'> </span><span class='tstring_content'>dust.txt</span><span class='words_sep'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/home/aamine/.trash/</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id mv'>mv</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>test*.rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>test</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:noop</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 500</span>

<span class='kw'>def</span> <span class='id mv'>mv</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>mv</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>mv</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='lbracket'>[</span><span class='id src'>src</span><span class='comma'>,</span><span class='id dest'>dest</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id flatten'>flatten</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id fu_each_src_dest'>fu_each_src_dest</span><span class='lparen'>(</span><span class='id src'>src</span><span class='comma'>,</span> <span class='id dest'>dest</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='op'>|</span>
    <span class='id destent'>destent</span> <span class='op'>=</span> <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id d'>d</span><span class='comma'>,</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='kw'>true</span><span class='rparen'>)</span>
    <span class='kw'>begin</span>
      <span class='kw'>if</span> <span class='id destent'>destent</span><span class='period'>.</span><span class='id exist?'>exist?</span>
        <span class='kw'>if</span> <span class='id destent'>destent</span><span class='period'>.</span><span class='id directory?'>directory?</span>
          <span class='id raise'>raise</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EEXIST</span><span class='comma'>,</span> <span class='id dest'>dest</span>
        <span class='kw'>else</span>
          <span class='id destent'>destent</span><span class='period'>.</span><span class='id remove_file'>remove_file</span> <span class='kw'>if</span> <span class='id rename_cannot_overwrite_file?'>rename_cannot_overwrite_file?</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
      <span class='kw'>begin</span>
        <span class='const'>File</span><span class='period'>.</span><span class='id rename'>rename</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span>
      <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>EXDEV</span>
        <span class='id copy_entry'>copy_entry</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id d'>d</span><span class='comma'>,</span> <span class='kw'>true</span>
        <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:secure</span><span class='rbracket'>]</span>
          <span class='id remove_entry_secure'>remove_entry_secure</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
        <span class='kw'>else</span>
          <span class='id remove_entry'>remove_entry</span> <span class='id s'>s</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>SystemCallError</span>
      <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pwd-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>pwd</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='getwd-instance_method'>getwd</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: (none)
</p>
<p>
Returns the name of the current directory.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 100</span>

<span class='kw'>def</span> <span class='id pwd'>pwd</span>
  <span class='const'>Dir</span><span class='period'>.</span><span class='id pwd'>pwd</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_dir-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_dir</strong>(path, force = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Removes a directory <tt>dir</tt> and its contents recursively. This method
ignores StandardError if <tt>force</tt> is true.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


786
787
788</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 786</span>

<span class='kw'>def</span> <span class='id remove_dir'>remove_dir</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='id remove_entry'>remove_entry</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span>   <span class='comment'># FIXME?? check if it is a directory
</span><span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_entry-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_entry</strong>(path, force = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This method removes a file system entry <tt>path</tt>. <tt>path</tt> might
be a regular file, a directory, or something. If <tt>path</tt> is a
directory, remove it recursively.
</p>
<p>
See also #remove_entry_secure.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


758
759
760
761
762
763
764
765
766
767
768</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 758</span>

<span class='kw'>def</span> <span class='id remove_entry'>remove_entry</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id postorder_traverse'>postorder_traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id ent'>ent</span><span class='period'>.</span><span class='id remove'>remove</span>
    <span class='kw'>rescue</span>
      <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id force'>force</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span>
  <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id force'>force</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_entry_secure-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_entry_secure</strong>(path, force = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
This method removes a file system entry <tt>path</tt>.  <tt>path</tt> shall
be a regular file, a directory, or something.  If <tt>path</tt> is a
directory, remove it recursively.  This method is required to avoid TOCTTOU
(time-of-check-to-time-of-use) local security vulnerability of #rm_r. #rm_r
causes security hole when:
</p>
<pre class="code">
  * Parent directory is world writable (including /tmp).
  * Removing directory tree includes world writable directory.
  * The system has symbolic link.
</pre>
<p>
To avoid this security hole, this method applies special preprocess. If
<tt>path</tt> is a directory, this method chown(2) and chmod(2) all
removing directories.  This requires the current process is the owner of
the removing whole directory tree, or is the super user (root).
</p>
<p>
WARNING: You must ensure that <b>ALL</b> parent directories are not world
writable.  Otherwise this method does not work. Only exception is temporary
directory like /tmp and /var/tmp, whose permission is 1777.
</p>
<p>
WARNING: Only the owner of the removing directory tree, or Unix super user
(root) should invoke this method.  Otherwise this method does not work.
</p>
<p>
For details of this security vulnerability, see Perl&#8217;s case:
</p>
<pre class="code">
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2005-0448
  http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CAN-2004-0452
</pre>
<p>
For fileutils.rb, this vulnerability is reported in [ruby-dev:26100].
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


686
687
688
689
690
691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717
718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 686</span>

<span class='kw'>def</span> <span class='id remove_entry_secure'>remove_entry_secure</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id fu_have_symlink?'>fu_have_symlink?</span>
    <span class='id remove_entry'>remove_entry</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='id fullpath'>fullpath</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
  <span class='id st'>st</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id lstat'>lstat</span><span class='lparen'>(</span><span class='id fullpath'>fullpath</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id st'>st</span><span class='period'>.</span><span class='id directory?'>directory?</span>
    <span class='const'>File</span><span class='period'>.</span><span class='id unlink'>unlink</span> <span class='id fullpath'>fullpath</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='comment'># is a directory.
</span>  <span class='id parent_st'>parent_st</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id stat'>stat</span><span class='lparen'>(</span><span class='const'>File</span><span class='period'>.</span><span class='id dirname'>dirname</span><span class='lparen'>(</span><span class='id fullpath'>fullpath</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='id parent_st'>parent_st</span><span class='period'>.</span><span class='id world_writable?'>world_writable?</span>
    <span class='id remove_entry'>remove_entry</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span>
    <span class='kw'>return</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id parent_st'>parent_st</span><span class='period'>.</span><span class='id sticky?'>sticky?</span>
    <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>parent directory is world writable, FileUtils#remove_entry_secure does not work; abort: </span><span class='embexpr_beg'>#{</span><span class='id path'>path</span><span class='period'>.</span><span class='id inspect'>inspect</span><span class='rbrace'>}</span><span class='tstring_content'> (parent directory mode </span><span class='embexpr_beg'>#{</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>%o</span><span class='tstring_end'>'</span></span> <span class='op'>%</span> <span class='id parent_st'>parent_st</span><span class='period'>.</span><span class='id mode'>mode</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='comment'># freeze tree root
</span>  <span class='id euid'>euid</span> <span class='op'>=</span> <span class='const'>Process</span><span class='period'>.</span><span class='id euid'>euid</span>
  <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id fullpath'>fullpath</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/.</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id fu_stat_identical_entry?'>fu_stat_identical_entry?</span><span class='lparen'>(</span><span class='id st'>st</span><span class='comma'>,</span> <span class='id f'>f</span><span class='period'>.</span><span class='id stat'>stat</span><span class='rparen'>)</span>
      <span class='comment'># symlink (TOC-to-TOU attack?)
</span>      <span class='const'>File</span><span class='period'>.</span><span class='id unlink'>unlink</span> <span class='id fullpath'>fullpath</span>
      <span class='kw'>return</span>
    <span class='kw'>end</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='id euid'>euid</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='int'>0700</span>
  <span class='rbrace'>}</span>
  <span class='comment'># ---- tree root is frozen ----
</span>  <span class='id root'>root</span> <span class='op'>=</span> <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
  <span class='id root'>root</span><span class='period'>.</span><span class='id preorder_traverse'>preorder_traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id ent'>ent</span><span class='period'>.</span><span class='id directory?'>directory?</span>
      <span class='id ent'>ent</span><span class='period'>.</span><span class='id chown'>chown</span> <span class='id euid'>euid</span><span class='comma'>,</span> <span class='op'>-</span><span class='int'>1</span>
      <span class='id ent'>ent</span><span class='period'>.</span><span class='id chmod'>chmod</span> <span class='int'>0700</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id root'>root</span><span class='period'>.</span><span class='id postorder_traverse'>postorder_traverse</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ent'>ent</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='id ent'>ent</span><span class='period'>.</span><span class='id remove'>remove</span>
    <span class='kw'>rescue</span>
      <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id force'>force</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>rescue</span>
  <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id force'>force</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="remove_file-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>remove_file</strong>(path, force = false) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Removes a file <tt>path</tt>. This method ignores StandardError if
<tt>force</tt> is true.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


775
776
777
778
779</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 775</span>

<span class='kw'>def</span> <span class='id remove_file'>remove_file</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='id force'>force</span> <span class='op'>=</span> <span class='kw'>false</span><span class='rparen'>)</span>
  <span class='const'>Entry_</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span><span class='period'>.</span><span class='id remove_file'>remove_file</span>
<span class='kw'>rescue</span>
  <span class='id raise'>raise</span> <span class='kw'>unless</span> <span class='id force'>force</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rename_cannot_overwrite_file?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>rename_cannot_overwrite_file?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


537
538
539</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 537</span>

<span class='kw'>def</span> <span class='id rename_cannot_overwrite_file?'>rename_cannot_overwrite_file?</span>   <span class='comment'>#:nodoc:
</span>  <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>cygwin|mswin|mingw|bccwin|emx</span><span class='regexp_end'>/</span></span> <span class='op'>=~</span> <span class='const'>RUBY_PLATFORM</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rm-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rm</strong>(list, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='remove-instance_method'>remove</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: force noop verbose
</p>
<p>
Remove file(s) specified in <tt>list</tt>.  This method cannot remove
directories. All StandardErrors are ignored when the :force option is set.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm'>rm</span> <span class='qwords_beg'>%w( </span><span class='tstring_content'>junk.txt</span><span class='words_sep'> </span><span class='tstring_content'>dust.txt</span><span class='words_sep'> )</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm'>rm</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*.so</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm'>rm</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>NotExistFile</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>   <span class='comment'># never raises exception</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


552
553
554
555
556
557
558
559
560
561</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 552</span>

<span class='kw'>def</span> <span class='id rm'>rm</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rm</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rm</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>

  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='id remove_file'>remove_file</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rm_f-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rm_f</strong>(list, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='safe_unlink-instance_method'>safe_unlink</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose
</p>
<p>
Equivalent to
</p>
<pre class="code">
  <span class='comment'>#rm(list, :force =&gt; true)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


577
578
579
580
581
582</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 577</span>

<span class='kw'>def</span> <span class='id rm_f'>rm_f</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rm_f</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id rm'>rm</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rm_r-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rm_r</strong>(list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: force noop verbose secure
</p>
<p>
remove files <tt>list</tt>[0] <tt>list</tt>[1]&#8230; If <tt>list</tt>[n]
is a directory, removes its all contents recursively. This method ignores
StandardError when :force option is set.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm_r'>rm_r</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/tmp/*</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rm_r'>rm_r</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:force</span> <span class='op'>=&gt;</span> <span class='kw'>true</span>          <span class='comment'>#  :-)
</span></pre>
<p>
WARNING: This method causes local vulnerability if one of parent
directories or removing directory tree are world writable (including /tmp,
whose permission is 1777), and the current process has strong privilege
such as Unix super user (root), and the system has symbolic link.  For
secure removing, read the documentation of #remove_entry_secure carefully,
and set :secure option to true. Default is :secure=>false.
</p>
<p>
NOTE: This method calls #remove_entry_secure if :secure option is set. See
also #remove_entry_secure.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


612
613
614
615
616
617
618
619
620
621
622
623
624
625</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 612</span>

<span class='kw'>def</span> <span class='id rm_r'>rm_r</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rm_r</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='comment'># options[:secure] = true unless options.key?(:secure)
</span>  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rm -r</span><span class='embexpr_beg'>#{</span><span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>f</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:secure</span><span class='rbracket'>]</span>
      <span class='id remove_entry_secure'>remove_entry_secure</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
    <span class='kw'>else</span>
      <span class='id remove_entry'>remove_entry</span> <span class='id path'>path</span><span class='comma'>,</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rm_rf-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rm_rf</strong>(list, options = {}) 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='rmtree-instance_method'>rmtree</span></span>
    </span>
  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose secure
</p>
<p>
Equivalent to
</p>
<pre class="code">
  <span class='comment'>#rm_r(list, :force =&gt; true)
</span></pre>
<p>
WARNING: This method causes local vulnerability. Read the documentation of
#rm_r first.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


640
641
642
643
644
645</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 640</span>

<span class='kw'>def</span> <span class='id rm_rf'>rm_rf</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rm_rf</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id dup'>dup</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:force</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='id rm_r'>rm_r</span> <span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="rmdir-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>rmdir</strong>(list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop, verbose
</p>
<p>
Removes one or more directories.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rmdir'>rmdir</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>somedir</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rmdir'>rmdir</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>somedir</span><span class='words_sep'> </span><span class='tstring_content'>anydir</span><span class='words_sep'> </span><span class='tstring_content'>otherdir</span><span class='words_sep'>)</span>
  <span class='comment'># Does not really remove directory; outputs message.
</span>  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id rmdir'>rmdir</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>somedir</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='symbol'>:verbose</span> <span class='op'>=&gt;</span> <span class='kw'>true</span><span class='comma'>,</span> <span class='symbol'>:noop</span> <span class='op'>=&gt;</span> <span class='kw'>true</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


258
259
260
261
262
263
264
265
266
267
268
269
270
271
272
273
274
275</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 258</span>

<span class='kw'>def</span> <span class='id rmdir'>rmdir</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>rmdir</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id parents'>parents</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:parents</span><span class='rbracket'>]</span>
  <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>rmdir </span><span class='embexpr_beg'>#{</span><span class='id parents'>parents</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>-p </span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id dir'>dir</span><span class='op'>|</span>
    <span class='kw'>begin</span>
      <span class='const'>Dir</span><span class='period'>.</span><span class='id rmdir'>rmdir</span><span class='lparen'>(</span><span class='id dir'>dir</span> <span class='op'>=</span> <span class='id dir'>dir</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='tstring'><span class='regexp_beg'>%r&lt;</span><span class='tstring_content'>/\z</span><span class='regexp_end'>&gt;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rparen'>)</span>
      <span class='kw'>if</span> <span class='id parents'>parents</span>
        <span class='kw'>until</span> <span class='lparen'>(</span><span class='id parent'>parent</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id dirname'>dirname</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='rparen'>)</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span> <span class='kw'>or</span> <span class='id parent'>parent</span> <span class='op'>==</span> <span class='id dir'>dir</span>
          <span class='const'>Dir</span><span class='period'>.</span><span class='id rmdir'>rmdir</span><span class='lparen'>(</span><span class='id dir'>dir</span><span class='rparen'>)</span>
        <span class='kw'>end</span>
      <span class='kw'>end</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOTEMPTY</span><span class='comma'>,</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ruby-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>ruby</strong>(*args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Run a Ruby interpreter with the given arguments.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id ruby'>ruby</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>-pe '$_.upcase!' &lt;README</span><span class='tstring_end'>}</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1022
1023
1024
1025
1026
1027
1028
1029</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rake.rb', line 1022</span>

<span class='kw'>def</span> <span class='id ruby'>ruby</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Hash</span> <span class='op'>===</span> <span class='id args'>args</span><span class='period'>.</span><span class='id last'>last</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id args'>args</span><span class='period'>.</span><span class='id pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id args'>args</span><span class='period'>.</span><span class='id length'>length</span> <span class='op'>&gt;</span> <span class='int'>1</span> <span class='kw'>then</span>
    <span class='id sh'>sh</span><span class='lparen'>(</span><span class='op'>*</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='const'>RUBY</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='id args'>args</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id options'>options</span><span class='rbracket'>]</span><span class='rparen'>)</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id sh'>sh</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='const'>RUBY</span><span class='rbrace'>}</span><span class='tstring_content'> </span><span class='embexpr_beg'>#{</span><span class='id args'>args</span><span class='period'>.</span><span class='id first'>first</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="safe_ln-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>safe_ln</strong>(*args) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attempt to do a normal file link, but fall back to a copy if the link
</p>
<pre class="code">
 fails.</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rake.rb', line 1035</span>

<span class='kw'>def</span> <span class='id safe_ln'>safe_ln</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='const'>LN_SUPPORTED</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id cp'>cp</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='kw'>begin</span>
      <span class='id ln'>ln</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>StandardError</span><span class='comma'>,</span> <span class='const'>NotImplementedError</span> <span class='op'>=&gt;</span> <span class='id ex'>ex</span>
      <span class='const'>LN_SUPPORTED</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id cp'>cp</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sh-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>sh</strong>(*cmd, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Run the system command <tt>cmd</tt>. If multiple arguments are given the
command is not run with the shell (same semantics as Kernel::exec and
Kernel::system).
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='id sh'>sh</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>ls -ltr</span><span class='tstring_end'>}</span></span>

  <span class='id sh'>sh</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>ls</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>file with spaces</span><span class='tstring_end'>'</span></span>

  <span class='comment'># check exit status after command runs
</span>  <span class='id sh'>sh</span> <span class='tstring'><span class='tstring_beg'>%{</span><span class='tstring_content'>grep pattern file</span><span class='tstring_end'>}</span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id ok'>ok</span><span class='comma'>,</span> <span class='id res'>res</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='op'>!</span> <span class='id ok'>ok</span>
      <span class='id puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>pattern not found (status = </span><span class='embexpr_beg'>#{</span><span class='id res'>res</span><span class='period'>.</span><span class='id exitstatus'>exitstatus</span><span class='rbrace'>}</span><span class='tstring_content'>)</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rake.rb', line 986</span>

<span class='kw'>def</span> <span class='id sh'>sh</span><span class='lparen'>(</span><span class='op'>*</span><span class='id cmd'>cmd</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id options'>options</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='const'>Hash</span> <span class='op'>===</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id last'>last</span><span class='rparen'>)</span> <span class='op'>?</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id pop'>pop</span> <span class='op'>:</span> <span class='lbrace'>{</span><span class='rbrace'>}</span>
  <span class='kw'>unless</span> <span class='id block_given?'>block_given?</span>
    <span class='id show_command'>show_command</span> <span class='op'>=</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id show_command'>show_command</span> <span class='op'>=</span> <span class='id show_command'>show_command</span><span class='lbracket'>[</span><span class='int'>0</span><span class='comma'>,</span><span class='int'>42</span><span class='rbracket'>]</span> <span class='op'>+</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>...</span><span class='tstring_end'>&quot;</span></span> <span class='kw'>unless</span> <span class='gvar'>$trace</span>
    <span class='comment'># TODO code application logic heref show_command.length &gt; 45
</span>    <span class='id block'>block</span> <span class='op'>=</span> <span class='id lambda'>lambda</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id ok'>ok</span><span class='comma'>,</span> <span class='id status'>status</span><span class='op'>|</span>
      <span class='id ok'>ok</span> <span class='kw'>or</span> <span class='id fail'>fail</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Command failed with status (</span><span class='embexpr_beg'>#{</span><span class='id status'>status</span><span class='period'>.</span><span class='id exitstatus'>exitstatus</span><span class='rbrace'>}</span><span class='tstring_content'>): [</span><span class='embexpr_beg'>#{</span><span class='id show_command'>show_command</span><span class='rbrace'>}</span><span class='tstring_content'>]</span><span class='tstring_end'>&quot;</span></span>
    <span class='rbrace'>}</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='const'>RakeFileUtils</span><span class='period'>.</span><span class='id verbose_flag'>verbose_flag</span> <span class='op'>==</span> <span class='symbol'>:default</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>else</span>
    <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='const'>RakeFileUtils</span><span class='period'>.</span><span class='id verbose_flag'>verbose_flag</span>
  <span class='kw'>end</span>
  <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>    <span class='op'>||=</span> <span class='const'>RakeFileUtils</span><span class='period'>.</span><span class='id nowrite_flag'>nowrite_flag</span>
  <span class='id rake_check_options'>rake_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='symbol'>:noop</span><span class='comma'>,</span> <span class='symbol'>:verbose</span>
  <span class='id rake_output_message'>rake_output_message</span> <span class='id cmd'>cmd</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'> </span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
  <span class='kw'>unless</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
    <span class='id res'>res</span> <span class='op'>=</span> <span class='id rake_system'>rake_system</span><span class='lparen'>(</span><span class='op'>*</span><span class='id cmd'>cmd</span><span class='rparen'>)</span>
    <span class='id status'>status</span> <span class='op'>=</span> <span class='gvar'>$?</span>
    <span class='id status'>status</span> <span class='op'>=</span> <span class='const'>PseudoStatus</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='op'>!</span><span class='id res'>res</span> <span class='op'>&amp;&amp;</span> <span class='id status'>status</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id block'>block</span><span class='period'>.</span><span class='id call'>call</span><span class='lparen'>(</span><span class='id res'>res</span><span class='comma'>,</span> <span class='id status'>status</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="split_all-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>split_all</strong>(path) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Split a file path into individual directory names.
</p>
<p>
Example:
</p>
<pre class="code">
  split_all(&quot;a/b/c&quot;) =&gt;  ['a', 'b', 'c']</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1053
1054
1055
1056
1057
1058</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/rake.rb', line 1053</span>

<span class='kw'>def</span> <span class='id split_all'>split_all</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
  <span class='id head'>head</span><span class='comma'>,</span> <span class='id tail'>tail</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id split'>split</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='id tail'>tail</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id head'>head</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>.</span><span class='tstring_end'>'</span></span> <span class='op'>||</span> <span class='id tail'>tail</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span>
  <span class='kw'>return</span> <span class='lbracket'>[</span><span class='id head'>head</span><span class='comma'>,</span> <span class='id tail'>tail</span><span class='rbracket'>]</span> <span class='kw'>if</span> <span class='id head'>head</span> <span class='op'>==</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>/</span><span class='tstring_end'>'</span></span>
  <span class='kw'>return</span> <span class='id split_all'>split_all</span><span class='lparen'>(</span><span class='id head'>head</span><span class='rparen'>)</span> <span class='op'>+</span> <span class='lbracket'>[</span><span class='id tail'>tail</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="touch-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>touch</strong>(list, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: noop verbose
</p>
<p>
Updates modification time (mtime) and access time (atime) of file(s) in
<tt>list</tt>.  Files are created if they don&#8217;t exist.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id touch'>touch</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>timestamp</span><span class='tstring_end'>'</span></span>
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id touch'>touch</span> <span class='const'>Dir</span><span class='period'>.</span><span class='id glob'>glob</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*.c</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='semicolon'>;</span>  <span class='id system'>system</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>make</span><span class='tstring_end'>'</span></span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1028
1029
1030
1031
1032
1033
1034
1035
1036
1037
1038
1039
1040
1041
1042
1043
1044
1045
1046
1047
1048
1049
1050</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 1028</span>

<span class='kw'>def</span> <span class='id touch'>touch</span><span class='lparen'>(</span><span class='id list'>list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id fu_check_options'>fu_check_options</span> <span class='id options'>options</span><span class='comma'>,</span> <span class='const'>OPT_TABLE</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>touch</span><span class='tstring_end'>'</span></span><span class='rbracket'>]</span>
  <span class='id list'>list</span> <span class='op'>=</span> <span class='id fu_list'>fu_list</span><span class='lparen'>(</span><span class='id list'>list</span><span class='rparen'>)</span>
  <span class='id created'>created</span> <span class='op'>=</span> <span class='id nocreate'>nocreate</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:nocreate</span><span class='rbracket'>]</span>
  <span class='id t'>t</span> <span class='op'>=</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:mtime</span><span class='rbracket'>]</span>
  <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:verbose</span><span class='rbracket'>]</span>
    <span class='id fu_output_message'>fu_output_message</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>touch </span><span class='embexpr_beg'>#{</span><span class='id nocreate'>nocreate</span> <span class='op'>?</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -c</span><span class='tstring_end'>'</span></span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id t'>t</span> <span class='op'>?</span> <span class='id t'>t</span><span class='period'>.</span><span class='id strftime'>strftime</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> -t %Y%m%d%H%M.%S</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='op'>:</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='embexpr_beg'>#{</span><span class='id list'>list</span><span class='period'>.</span><span class='id join'>join</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='id options'>options</span><span class='lbracket'>[</span><span class='symbol'>:noop</span><span class='rbracket'>]</span>
  <span class='id list'>list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='id created'>created</span> <span class='op'>=</span> <span class='id nocreate'>nocreate</span>
    <span class='kw'>begin</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id utime'>utime</span><span class='lparen'>(</span><span class='id t'>t</span><span class='comma'>,</span> <span class='id t'>t</span><span class='comma'>,</span> <span class='id path'>path</span><span class='rparen'>)</span>
    <span class='kw'>rescue</span> <span class='const'>Errno</span><span class='op'>::</span><span class='const'>ENOENT</span>
      <span class='id raise'>raise</span> <span class='kw'>if</span> <span class='id created'>created</span>
      <span class='const'>File</span><span class='period'>.</span><span class='id open'>open</span><span class='lparen'>(</span><span class='id path'>path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>a</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span> <span class='lbrace'>{</span>
        <span class='semicolon'>;</span>
      <span class='rbrace'>}</span>
      <span class='id created'>created</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='kw'>retry</span> <span class='kw'>if</span> <span class='id t'>t</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="uptodate?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>uptodate?</strong>(new, old_list, options = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Options: (none)
</p>
<p>
Returns true if <tt>newer</tt> is newer than all <tt>old_list</tt>.
Non-existent files are older than any file.
</p>
<pre class="code">
  <span class='const'>FileUtils</span><span class='period'>.</span><span class='id uptodate?'>uptodate?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>hello.o</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='qwords_beg'>%w(</span><span class='tstring_content'>hello.c</span><span class='words_sep'> </span><span class='tstring_content'>hello.h</span><span class='words_sep'>)</span><span class='rparen'>)</span> <span class='kw'>or</span> \
      <span class='id system'>system</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>make hello.o</span><span class='tstring_end'>'</span></span></pre>


  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>
<h3>Raises:</h3>
<ul class="raise">
  
    <li>
      
        <span class='type'>(<tt>ArgumentError</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


141
142
143
144
145
146
147
148
149
150
151
152</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/fileutils.rb', line 141</span>

<span class='kw'>def</span> <span class='id uptodate?'>uptodate?</span><span class='lparen'>(</span><span class='id new'>new</span><span class='comma'>,</span> <span class='id old_list'>old_list</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='rparen'>)</span>
  <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>uptodate? does not accept any option</span><span class='tstring_end'>'</span></span> <span class='kw'>if</span> <span class='id options'>options</span>

  <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span><span class='lparen'>(</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id new_time'>new_time</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id mtime'>mtime</span><span class='lparen'>(</span><span class='id new'>new</span><span class='rparen'>)</span>
  <span class='id old_list'>old_list</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id old'>old</span><span class='op'>|</span>
    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id exist?'>exist?</span><span class='lparen'>(</span><span class='id old'>old</span><span class='rparen'>)</span>
      <span class='kw'>return</span> <span class='kw'>false</span> <span class='kw'>unless</span> <span class='id new_time'>new_time</span> <span class='op'>&gt;</span> <span class='const'>File</span><span class='period'>.</span><span class='id mtime'>mtime</span><span class='lparen'>(</span><span class='id old'>old</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 14 00:01:20 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>