  <div id="C00000019">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />MerbMultipartSupport<br/>
  In:
<a href="#" onclick="jsHref('files/lib/webrat/merb_multipart_support_rb.html');">lib/webrat/merb_multipart_support.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
These methods are copied from merb-core/two-oh.rb which defines new <a
href="index.html?a=M000004&name=multipart_post">multipart_post</a> and <a
href="index.html?a=M000005&name=multipart_put">multipart_put</a> methods
for Merb::Test::MultipartRequestHelper. We can&#8217;t require two-oh.rb
because it alters Merb&#8217;s own behavior, causing failing specs in Merb
when Webrat is required.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000004&name=multipart_post" >multipart_post</a></li>
  <li><a href="index.html?a=M000005&name=multipart_put" >multipart_put</a></li>
  <li><a href="index.html?a=M000003&name=multipart_request" >multipart_request</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000004" class="method">
  <div id="M000004_title" class="title">
    <b>multipart_post</b>(path, params = {}, env = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show source</a> ]</p>
  <div id="M000004_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/webrat/merb_multipart_support.rb, line 17</span>
17:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">multipart_post</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span> = {}, <span class="ruby-identifier">env</span> = {})
18:       <span class="ruby-identifier">env</span>[<span class="ruby-identifier">:method</span>] = <span class="ruby-value str">&quot;POST&quot;</span>
19:       <span class="ruby-identifier">multipart_request</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">env</span>)
20:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000005" class="method">
  <div id="M000005_title" class="title">
    <b>multipart_put</b>(path, params = {}, env = {}, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000005_source')" id="l_M000005_source">show source</a> ]</p>
  <div id="M000005_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/webrat/merb_multipart_support.rb, line 22</span>
22:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">multipart_put</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span> = {}, <span class="ruby-identifier">env</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
23:       <span class="ruby-identifier">env</span>[<span class="ruby-identifier">:method</span>] = <span class="ruby-value str">&quot;PUT&quot;</span>
24:       <span class="ruby-identifier">multipart_request</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span>, <span class="ruby-identifier">env</span>)
25:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000003" class="method">
  <div id="M000003_title" class="title">
    <b>multipart_request</b>(path, params = {}, env = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000003_source')" id="l_M000003_source">show source</a> ]</p>
  <div id="M000003_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/webrat/merb_multipart_support.rb, line 8</span>
 8:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">multipart_request</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">params</span> = {}, <span class="ruby-identifier">env</span> = {})
 9:       <span class="ruby-identifier">multipart</span> = <span class="ruby-constant">Merb</span><span class="ruby-operator">::</span><span class="ruby-constant">Test</span><span class="ruby-operator">::</span><span class="ruby-constant">MultipartRequestHelper</span><span class="ruby-operator">::</span><span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">params</span>)
10:       <span class="ruby-identifier">body</span>, <span class="ruby-identifier">head</span> = <span class="ruby-identifier">multipart</span>.<span class="ruby-identifier">to_multipart</span>
11:       <span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;CONTENT_TYPE&quot;</span>] = <span class="ruby-identifier">head</span>
12:       <span class="ruby-identifier">env</span>[<span class="ruby-value str">&quot;CONTENT_LENGTH&quot;</span>] = <span class="ruby-identifier">body</span>.<span class="ruby-identifier">size</span>
13:       <span class="ruby-identifier">env</span>[<span class="ruby-identifier">:input</span>] = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">body</span>)
14:       <span class="ruby-identifier">request</span>(<span class="ruby-identifier">path</span>, <span class="ruby-identifier">env</span>)
15:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>