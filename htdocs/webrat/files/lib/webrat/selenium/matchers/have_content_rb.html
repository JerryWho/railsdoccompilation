  <div id="fileHeader">
    <h1>have_content.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/webrat/selenium/matchers/have_content.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 20:11:08 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Webrat
  module Selenium
    module Matchers
      class HasContent #:nodoc:
        def initialize(content)
          @content = content
        end

        def matches?(response)
          response.session.wait_for do
            response.selenium.is_text_present(text_finder)
          end
        rescue Webrat::TimeoutError =&gt; e
          @error_message = e.message
          false
        end

        def does_not_match?(response)
          response.session.wait_for do
            !response.selenium.is_text_present(text_finder)
          end
        rescue Webrat::TimeoutError =&gt; e
          @error_message = e.message
          false
        end

        # ==== Returns
        # String:: The failure message.
        def failure_message
          &quot;expected the response to #{content_message}:\n#{@error_message}&quot;
        end

        # ==== Returns
        # String:: The failure message to be displayed in negative matches.
        def negative_failure_message
          &quot;expected the response to not #{content_message}&quot;
        end

        def content_message
          case @content
          when String
            &quot;include \&quot;#{@content}\&quot;&quot;
          when Regexp
            &quot;match #{@content.inspect}&quot;
          end
        end

        def text_finder
          if @content.is_a?(Regexp)
            &quot;regexp:#{@content.source}&quot;
          else
            @content
          end
        end
      end

      # Matches the contents of an HTML document with
      # whatever string is supplied
      def contain(content)
        HasContent.new(content)
      end

      # Asserts that the body of the response contain
      # the supplied string or regexp
      def assert_contain(content)
        hc = HasContent.new(content)
        assert hc.matches?(response), hc.failure_message
      end

      # Asserts that the body of the response
      # does not contain the supplied string or regepx
      def assert_not_contain(content)
        hc = HasContent.new(content)
        assert !hc.matches?(response), hc.negative_failure_message
      end
    end
  end
end
</pre>
    </div>