  <div id="fileHeader">
    <h1>button_locator.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/webrat/core/locators/button_locator.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:11:40 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require &quot;webrat/core/locators/locator&quot;

module Webrat
  module Locators
    
    class ButtonLocator &lt; Locator # :nodoc:
  
      def locate
        ButtonField.load(@session, button_element)
      end
  
      def button_element
        button_elements.detect do |element|
          @value.nil?             ||
          matches_id?(element)    ||
          matches_value?(element) ||
          matches_html?(element)  ||
          matches_alt?(element)
        end
      end
  
      def matches_id?(element)
        (@value.is_a?(Regexp) &amp;&amp; Webrat::XML.attribute(element, &quot;id&quot;) =~ @value) ||
        (!@value.is_a?(Regexp) &amp;&amp; Webrat::XML.attribute(element, &quot;id&quot;) == @value.to_s)
      end
  
      def matches_value?(element)
        Webrat::XML.attribute(element, &quot;value&quot;) =~ /^\W*#{Regexp.escape(@value.to_s)}/i
      end
  
      def matches_html?(element)
        Webrat::XML.inner_html(element) =~ /#{Regexp.escape(@value.to_s)}/i
      end
  
      def matches_alt?(element)
        Webrat::XML.attribute(element, &quot;alt&quot;) =~ /^\W*#{Regexp.escape(@value.to_s)}/i
      end
  
      def button_elements
        Webrat::XML.xpath_search(@dom, *ButtonField.xpath_search)
      end
  
      def error_message
        &quot;Could not find button #{@value.inspect}&quot;
      end
      
    end
    
    def find_button(value) #:nodoc:
      ButtonLocator.new(@session, dom, value).locate!
    end
    
  end
end</pre>
    </div>