  <div id="fileHeader">
    <h1>world.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/cucumber/rails/world.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 18:23:07 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>unless defined?(Test)
  begin
    require 'spec/test/unit'
  rescue LoadError =&gt; ignore_if_rspec_not_installed
  end
end

if defined?(ActiveRecord::Base)
  if Rails.version.to_f &gt;= 3.0
    require 'rails/test_help' 
  else
    require 'test_help' 
  end
else
  # I can't do rescue LoadError because in this files could be loaded
  # from rails gem (ie. load actionpack 2.3.5 if rubygems are not disabled)
  if Rails.version.to_f &lt; 3.0
    require 'action_controller/test_process'
    require 'action_controller/integration'
  else
    require 'action_dispatch/testing/test_process'
    require 'action_dispatch/testing/integration'
  end
end

require 'cucumber/rails/test_unit'
require 'cucumber/rails/action_controller'


if (::Rails.respond_to?(:application) &amp;&amp; !(::Rails.application.config.cache_classes)) || 
  (!(::Rails.respond_to?(:application)) &amp;&amp; ::Rails.respond_to?(:configuration) &amp;&amp; !(::Rails.configuration.cache_classes))
  warn &quot;WARNING: You have set Rails' config.cache_classes to false (most likely in config/environments/cucumber.rb).  This setting is known to break Cucumber's use_transactional_fixtures method. Set config.cache_classes to true if you want to use transactional fixtures.  For more information see https://rspec.lighthouseapp.com/projects/16211/tickets/165.&quot;
end

module Cucumber #:nodoc:
  module Rails
    class World &lt; ActionController::IntegrationTest
      include ActiveSupport::Testing::SetupAndTeardown if ActiveSupport::Testing.const_defined?(&quot;SetupAndTeardown&quot;)
      def initialize #:nodoc:
        @_result = Test::Unit::TestResult.new if defined?(Test::Unit::TestResult)
      end
    end
  end
end

World do
  Cucumber::Rails::World.new
end
</pre>
    </div>