  <div id="C00000013">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />Tableish<br/>
  In:
<a href="#" onclick="jsHref('files/lib/cucumber/web/tableish_rb.html');">lib/cucumber/web/tableish.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000022&name=_tableish" >_tableish</a></li>
  <li><a href="index.html?a=M000021&name=tableish" >tableish</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000022" class="method">
  <div id="M000022_title" class="title">
    <b>_tableish</b>(html, row_selector, column_selectors)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show source</a> ]</p>
  <div id="M000022_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/web/tableish.rb, line 51</span>
51:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_tableish</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">row_selector</span>, <span class="ruby-identifier">column_selectors</span>) <span class="ruby-comment cmt">#:nodoc</span>
52:       <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">html</span>)
53:       <span class="ruby-identifier">column_count</span> = <span class="ruby-keyword kw">nil</span>
54:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">row_selector</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
55:         <span class="ruby-identifier">cells</span> = <span class="ruby-keyword kw">case</span>(<span class="ruby-identifier">column_selectors</span>)
56:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">String</span>
57:           <span class="ruby-identifier">row</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">column_selectors</span>)
58:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Proc</span>
59:           <span class="ruby-identifier">column_selectors</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">row</span>)
60:         <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-identifier">column_count</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">cells</span>.<span class="ruby-identifier">length</span>
62:         (<span class="ruby-value">0</span><span class="ruby-operator">...</span><span class="ruby-identifier">column_count</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
63:           <span class="ruby-identifier">cell</span> = <span class="ruby-identifier">cells</span>[<span class="ruby-identifier">n</span>]
64:           <span class="ruby-identifier">cell</span> <span class="ruby-value">? </span><span class="ruby-identifier">cell</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">strip</span> <span class="ruby-operator">:</span> <span class="ruby-value str">''</span>
65:         <span class="ruby-keyword kw">end</span>
66:       <span class="ruby-keyword kw">end</span>
67:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000021" class="method">
  <div id="M000021_title" class="title">
    <b>tableish</b>(row_selector, column_selectors)
  </div>
  <div class="description">
  <p>
This method returns an Array of Array of String, using CSS3 selectors. This
is particularly handy when using Cucumber&#8217;s Table#diff! method.
</p>
<p>
The <tt>row_selector</tt> argument must be a String, and picks out all the
rows from the web page&#8217;s DOM. If the number of cells in each row
differs, it will be constrained by (or padded with) the number of cells in
the first row
</p>
<p>
The <tt>column_selectors</tt> argument must be a String or a Proc, picking
out cells from each row. If you pass a Proc, it will be yielded an instance
of Nokogiri::HTML::Element.
</p>
<h2>Example with a table</h2>
<pre>
  &lt;table id=&quot;tools&quot;&gt;
    &lt;tr&gt;
      &lt;th&gt;tool&lt;/th&gt;
      &lt;th&gt;dude&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;webrat&lt;/td&gt;
      &lt;td&gt;bryan&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;cucumber&lt;/td&gt;
      &lt;td&gt;aslak&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/table&gt;

  t = tableish('table#tools tr', 'td,th')
</pre>
<h2>Example with a dl</h2>
<pre>
  &lt;dl id=&quot;tools&quot;&gt;
    &lt;dt&gt;webrat&lt;/dt&gt;
    &lt;dd&gt;bryan&lt;/dd&gt;
    &lt;dt&gt;cucumber&lt;/dt&gt;
    &lt;dd&gt;aslak&lt;/dd&gt;
  &lt;/dl&gt;

  t = tableish('dl#tools dt', lambda{|dt| [dt, dt.next.next]})
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show source</a> ]</p>
  <div id="M000021_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/web/tableish.rb, line 46</span>
46:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">tableish</span>(<span class="ruby-identifier">row_selector</span>, <span class="ruby-identifier">column_selectors</span>)
47:       <span class="ruby-identifier">html</span> = <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">Capybara</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">body</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">response_body</span>
48:       <span class="ruby-identifier">_tableish</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">row_selector</span>, <span class="ruby-identifier">column_selectors</span>)
49:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>