  <div id="C00000043">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />Matchers<br/>
  In:
<a href="#" onclick="jsHref('files/lib/spec/matchers/be_rb.html');">lib/spec/matchers/be.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/be_close_rb.html');">lib/spec/matchers/be_close.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/be_instance_of_rb.html');">lib/spec/matchers/be_instance_of.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/be_kind_of_rb.html');">lib/spec/matchers/be_kind_of.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/change_rb.html');">lib/spec/matchers/change.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/dsl_rb.html');">lib/spec/matchers/dsl.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/eql_rb.html');">lib/spec/matchers/eql.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/equal_rb.html');">lib/spec/matchers/equal.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/errors_rb.html');">lib/spec/matchers/errors.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/exist_rb.html');">lib/spec/matchers/exist.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/extensions/instance_exec_rb.html');">lib/spec/matchers/extensions/instance_exec.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/generated_descriptions_rb.html');">lib/spec/matchers/generated_descriptions.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/has_rb.html');">lib/spec/matchers/has.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/have_rb.html');">lib/spec/matchers/have.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/include_rb.html');">lib/spec/matchers/include.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/match_rb.html');">lib/spec/matchers/match.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/match_array_rb.html');">lib/spec/matchers/match_array.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/matcher_rb.html');">lib/spec/matchers/matcher.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/method_missing_rb.html');">lib/spec/matchers/method_missing.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/operator_matcher_rb.html');">lib/spec/matchers/operator_matcher.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/pretty_rb.html');">lib/spec/matchers/pretty.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/raise_error_rb.html');">lib/spec/matchers/raise_error.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/respond_to_rb.html');">lib/spec/matchers/respond_to.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/satisfy_rb.html');">lib/spec/matchers/satisfy.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/simple_matcher_rb.html');">lib/spec/matchers/simple_matcher.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/throw_symbol_rb.html');">lib/spec/matchers/throw_symbol.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers/wrap_expectation_rb.html');">lib/spec/matchers/wrap_expectation.rb</a>
<a href="#" onclick="jsHref('files/lib/spec/matchers_rb.html');">lib/spec/matchers.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
RSpec ships with a number of useful Expression <a
href="index.html?a=C00000043&name=Matchers">Matchers</a>. An Expression <a
href="index.html?a=C00000048&name=Matcher">Matcher</a> is any object that
responds to the following methods:
</p>
<pre>
  matches?(actual)
  failure_message_for_should
</pre>
<p>
These methods are also part of the matcher protocol, but are optional:
</p>
<pre>
  does_not_match?(actual)
  failure_message_for_should_not
  description #optional
</pre>
<p>
These methods are from older versions of the protocol. They are still
supported, but are not recommended:
</p>
<pre>
  failure_message          (use failure_message_for_should instead)
  negative_failure_message (use failure_message_for_should_not instead)
</pre>
<p>
See <a
href="index.html?a=C00000009&name=Spec::Expectations">Spec::Expectations</a>
to learn how to use these as Expectation <a
href="index.html?a=C00000043&name=Matchers">Matchers</a>.
</p>
<h2>Predicates</h2>
<p>
In addition to those Expression <a
href="index.html?a=C00000043&name=Matchers">Matchers</a> that are defined
explicitly, RSpec will create custom <a
href="index.html?a=C00000043&name=Matchers">Matchers</a> on the fly for any
arbitrary predicate, giving your specs a much more natural language feel.
</p>
<p>
A <a href="index.html?a=C00000088&name=Ruby">Ruby</a> predicate is a method
that ends with a &quot;?&quot; and returns true or false. Common examples
are +empty?+, +nil?+, and +instance_of?+.
</p>
<p>
All you need to do is write +should be_+ followed by the predicate without
the question mark, and RSpec will figure it out from there. For example:
</p>
<pre>
  [].should be_empty =&gt; [].empty? #passes
  [].should_not be_empty =&gt; [].empty? #fails
</pre>
<p>
In addtion to prefixing the predicate matchers with &quot;be_&quot;, you
can also use &quot;be_a_&quot; and &quot;be_an_&quot;, making your specs
read much more naturally:
</p>
<pre>
  &quot;a string&quot;.should be_an_instance_of(String) =&gt;&quot;a string&quot;.instance_of?(String) #passes

  3.should be_a_kind_of(Fixnum) =&gt; 3.kind_of?(Numeric) #passes
  3.should be_a_kind_of(Numeric) =&gt; 3.kind_of?(Numeric) #passes
  3.should be_an_instance_of(Fixnum) =&gt; 3.instance_of?(Fixnum) #passes
  3.should_not be_instance_of(Numeric) =&gt; 3.instance_of?(Numeric) #fails
</pre>
<p>
RSpec will also create custom matchers for predicates like +has_key?+. To
use this feature, just state that the object should have_key(:key) and
RSpec will call has_key?(:key) on the target. For example:
</p>
<pre>
  {:a =&gt; &quot;A&quot;}.should have_key(:a) =&gt; {:a =&gt; &quot;A&quot;}.has_key?(:a) #passes
  {:a =&gt; &quot;A&quot;}.should have_key(:b) =&gt; {:a =&gt; &quot;A&quot;}.has_key?(:b) #fails
</pre>
<p>
You can use this feature to invoke any predicate that begins with
&quot;has_&quot;, whether it is part of the <a
href="index.html?a=C00000088&name=Ruby">Ruby</a> libraries (like
+Hash#has_key?+) or a method you wrote on your own class.
</p>
<h2>Custom <a href="index.html?a=C00000043&name=Matchers">Matchers</a></h2>
<p>
When you find that none of the stock Expectation <a
href="index.html?a=C00000043&name=Matchers">Matchers</a> provide a natural
feeling expectation, you can very easily write your own using RSpec&#8217;s
matcher <a href="index.html?a=C00000046&name=DSL">DSL</a> or writing one
from scratch.
</p>
<h3><a href="index.html?a=C00000048&name=Matcher">Matcher</a> <a href="index.html?a=C00000046&name=DSL">DSL</a></h3>
<p>
Imagine that you are writing a game in which players can be in various
zones on a virtual board. To specify that bob should be in zone 4, you
could say:
</p>
<pre>
  bob.current_zone.should eql(Zone.new(&quot;4&quot;))
</pre>
<p>
But you might find it more expressive to say:
</p>
<pre>
  bob.should be_in_zone(&quot;4&quot;)
</pre>
<p>
and/or
</p>
<pre>
  bob.should_not be_in_zone(&quot;3&quot;)
</pre>
<p>
You can create such a matcher like so:
</p>
<pre>
  Spec::Matchers.define :be_in_zone do |zone|
    match do |player|
      player.in_zone?(zone)
    end
  end
</pre>
<p>
This will generate a <tt>be_in_zone</tt> method that returns a matcher with
logical default messages for failures. You can override the failure
messages and the generated description as follows:
</p>
<pre>
  Spec::Matchers.define :be_in_zone do |zone|
    match do |player|
      player.in_zone?(zone)
    end
    failure_message_for_should do |player|
      # generate and return the appropriate string.
    end
    failure_message_for_should_not do |player|
      # generate and return the appropriate string.
    end
    description do
      # generate and return the appropriate string.
    end
  end
</pre>
<p>
Each of the message-generation methods has access to the block arguments
passed to the <tt>create</tt> method (in this case, <tt>zone</tt>). The
failure message methods (<tt>failure_message_for_should</tt> and
<tt>failure_message_for_should_not</tt>) are passed the actual value (the
receiver of <tt>should</tt> or <tt>should_not</tt>).
</p>
<h3>Custom <a href="index.html?a=C00000048&name=Matcher">Matcher</a> from scratch</h3>
<p>
You could also write a custom matcher from scratch, as follows:
</p>
<pre>
  class BeInZone
    def initialize(expected)
      @expected = expected
    end
    def matches?(target)
      @target = target
      @target.current_zone.eql?(Zone.new(@expected))
    end
    def failure_message_for_should
      &quot;expected #{@target.inspect} to be in Zone #{@expected}&quot;
    end
    def failure_message_for_should_not
      &quot;expected #{@target.inspect} not to be in Zone #{@expected}&quot;
    end
  end
</pre>
<p>
&#8230; and a method like this:
</p>
<pre>
  def be_in_zone(expected)
    BeInZone.new(expected)
  end
</pre>
<p>
And then expose the method to your specs. This is normally done by
including the method and the class in a module, which is then included in
your spec:
</p>
<pre>
  module CustomGameMatchers
    class BeInZone
      ...
    end

    def be_in_zone(expected)
      ...
    end
  end

  describe &quot;Player behaviour&quot; do
    include CustomGameMatchers
    ...
  end
</pre>
<p>
or you can include in globally in a spec_helper.rb file <tt>require</tt>d
from your spec file(s):
</p>
<pre>
  Spec::Runner.configure do |config|
    config.include(CustomGameMatchers)
  end
</pre>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000153&name=be" >be</a></li>
  <li><a href="index.html?a=M000154&name=be_a" >be_a</a></li>
  <li><a href="index.html?a=M000159&name=be_a_kind_of" >be_a_kind_of</a></li>
  <li><a href="index.html?a=M000155&name=be_an" >be_an</a></li>
  <li><a href="index.html?a=M000157&name=be_an_instance_of" >be_an_instance_of</a></li>
  <li><a href="index.html?a=M000156&name=be_close" >be_close</a></li>
  <li><a href="index.html?a=M000158&name=be_instance_of" >be_instance_of</a></li>
  <li><a href="index.html?a=M000160&name=be_kind_of" >be_kind_of</a></li>
  <li><a href="index.html?a=M000161&name=change" >change</a></li>
  <li><a href="index.html?a=M000166&name=clear_generated_description" >clear_generated_description</a></li>
  <li><a href="index.html?a=M000162&name=eql" >eql</a></li>
  <li><a href="index.html?a=M000163&name=equal" >equal</a></li>
  <li><a href="index.html?a=M000165&name=exist" >exist</a></li>
  <li><a href="index.html?a=M000167&name=generated_description" >generated_description</a></li>
  <li><a href="index.html?a=M000168&name=have" >have</a></li>
  <li><a href="index.html?a=M000170&name=have_at_least" >have_at_least</a></li>
  <li><a href="index.html?a=M000171&name=have_at_most" >have_at_most</a></li>
  <li><a href="index.html?a=M000169&name=have_exactly" >have_exactly</a></li>
  <li><a href="index.html?a=M000173&name=helper" >helper</a></li>
  <li><a href="index.html?a=M000172&name=include" >include</a></li>
  <li><a href="index.html?a=M000164&name=inspect_object" >inspect_object</a></li>
  <li><a href="index.html?a=M000174&name=match" >match</a></li>
  <li><a href="index.html?a=M000175&name=raise_error" >raise_error</a></li>
  <li><a href="index.html?a=M000176&name=respond_to" >respond_to</a></li>
  <li><a href="index.html?a=M000177&name=satisfy" >satisfy</a></li>
  <li><a href="index.html?a=M000178&name=simple_matcher" >simple_matcher</a></li>
  <li><a href="index.html?a=M000179&name=throw_symbol" >throw_symbol</a></li>
  <li><a href="index.html?a=M000180&name=wrap_expectation" >wrap_expectation</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Module "<a href="#" onclick="jsHref('classes/Spec/Matchers/DSL.html');" class="link">Spec::Matchers::DSL</a>"<br />
Module "<a href="#" onclick="jsHref('classes/Spec/Matchers/InstanceExec.html');" class="link">Spec::Matchers::InstanceExec</a>"<br />
Module "<a href="#" onclick="jsHref('classes/Spec/Matchers/Pretty.html');" class="link">Spec::Matchers::Pretty</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Spec/Matchers/Has.html');" class="link">Spec::Matchers::Has</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Spec/Matchers/Matcher.html');" class="link">Spec::Matchers::Matcher</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Spec/Matchers/MatcherError.html');" class="link">Spec::Matchers::MatcherError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Spec/Matchers/OperatorMatcher.html');" class="link">Spec::Matchers::OperatorMatcher</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Spec/Matchers/SimpleMatcher.html');" class="link">Spec::Matchers::SimpleMatcher</a>"<br />




<div class="sectiontitle">Public Class methods</div>
<div id="M000166" class="method">
  <div id="M000166_title" class="title">
    <b>clear_generated_description</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show source</a> ]</p>
  <div id="M000166_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/generated_descriptions.rb, line 7</span>
 7:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">clear_generated_description</span>
 8:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_matcher</span> = <span class="ruby-keyword kw">nil</span>
 9:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">last_should</span> = <span class="ruby-keyword kw">nil</span>
10:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000167" class="method">
  <div id="M000167_title" class="title">
    <b>generated_description</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show source</a> ]</p>
  <div id="M000167_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/generated_descriptions.rb, line 12</span>
12:     <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">generated_description</span>
13:       <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">nil</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">last_should</span>.<span class="ruby-identifier">nil?</span>
14:       <span class="ruby-node">&quot;#{last_should.to_s.gsub('_',' ')} #{last_description}&quot;</span>
15:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000153" class="method">
  <div id="M000153_title" class="title">
    <b>should be_true<br />
should be_false<br />
should be_nil<br />
should be_[arbitrary_predicate](*args)<br />
should_not be_nil<br />
should_not be_[arbitrary_predicate](*args)<br />
</b>
  </div>
  <div class="description">
  <p>
Given true, false, or nil, will pass if actual value is true, false or nil
(respectively). Given no args means the caller should satisfy an if
condition (to be or not to be).
</p>
<p>
Predicates are any <a href="index.html?a=C00000088&name=Ruby">Ruby</a>
method that ends in a &quot;?&quot; and returns true or false. Given be_
followed by arbitrary_predicate (without the &quot;?&quot;), RSpec will
match convert that into a query against the target object.
</p>
<p>
The arbitrary_predicate feature will handle any predicate prefixed with
&quot;be_an_&quot; (e.g. <a
href="index.html?a=M000157&name=be_an_instance_of">be_an_instance_of</a>),
&quot;be_a_&quot; (e.g. <a
href="index.html?a=M000159&name=be_a_kind_of">be_a_kind_of</a>) or
&quot;be_&quot; (e.g. be_empty), letting you choose the prefix that best
suits the predicate.
</p>
<h2>Examples</h2>
<pre>
  target.should be_true
  target.should be_false
  target.should be_nil
  target.should_not be_nil

  collection.should be_empty #passes if target.empty?
  target.should_not be_empty #passes unless target.empty?
  target.should_not be_old_enough(16) #passes unless target.old_enough?(16)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show source</a> ]</p>
  <div id="M000153_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/be.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
201:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Be</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
202:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000154" class="method">
  <div id="M000154_title" class="title">
    <b>be_a</b>(klass)
  </div>
  <div class="description">
  <p>
passes if target.kind_of?(klass)
</p>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000155&name=be_an">be_an</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show source</a> ]</p>
  <div id="M000154_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/be.rb, line 205</span>
205:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be_a</span>(<span class="ruby-identifier">klass</span>)
206:       <span class="ruby-identifier">be_a_kind_of</span>(<span class="ruby-identifier">klass</span>)
207:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000159" class="method">
  <div id="M000159_title" class="title">
    <b>should be_kind_of(expected)<br />
should be_a_kind_of(expected)<br />
should_not be_kind_of(expected)<br />
should_not be_a_kind_of(expected)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual.kind_of?(expected)
</p>
<h2>Examples</h2>
<pre>
  5.should be_kind_of(Fixnum)
  5.should be_kind_of(Numeric)
  5.should_not be_kind_of(Float)
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000160&name=be_kind_of">be_kind_of</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show source</a> ]</p>
  <div id="M000159_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/be_kind_of.rb, line 16</span>
16:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be_a_kind_of</span>(<span class="ruby-identifier">expected</span>)
17:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:be_a_kind_of</span>, <span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
18:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
19:           <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">kind_of?</span>(<span class="ruby-identifier">_expected_</span>)
20:         <span class="ruby-keyword kw">end</span>
21:       <span class="ruby-keyword kw">end</span>
22:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000155" class="method">
  <div id="M000155_title" class="title">
    <b>be_an</b>(klass)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000154&name=be_a">be_a</a>
</p>
  </div>
</div>
<div id="M000157" class="method">
  <div id="M000157_title" class="title">
    <b>should be_instance_of(expected)<br />
should be_an_instance_of(expected)<br />
should_not be_instance_of(expected)<br />
should_not be_an_instance_of(expected)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual.instance_of?(expected)
</p>
<h2>Examples</h2>
<pre>
  5.should be_instance_of(Fixnum)
  5.should_not be_instance_of(Numeric)
  5.should_not be_instance_of(Float)
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000158&name=be_instance_of">be_instance_of</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show source</a> ]</p>
  <div id="M000157_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/be_instance_of.rb, line 16</span>
16:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be_an_instance_of</span>(<span class="ruby-identifier">expected</span>)
17:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:be_an_instance_of</span>, <span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
18:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
19:           <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">instance_of?</span>(<span class="ruby-identifier">_expected_</span>)
20:         <span class="ruby-keyword kw">end</span>
21:       <span class="ruby-keyword kw">end</span>
22:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000156" class="method">
  <div id="M000156_title" class="title">
    <b>should be_close(expected, delta)<br />
should_not be_close(expected, delta)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual == expected +/- delta
</p>
<h2><a href="index.html?a=C00000062&name=Example">Example</a></h2>
<pre>
  result.should be_close(3.0, 0.5)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show source</a> ]</p>
  <div id="M000156_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/be_close.rb, line 12</span>
12:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">be_close</span>(<span class="ruby-identifier">expected</span>, <span class="ruby-identifier">delta</span>)
13:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:be_close</span>, <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">delta</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span>, <span class="ruby-identifier">_delta_</span><span class="ruby-operator">|</span>
14:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
15:           (<span class="ruby-identifier">actual</span> <span class="ruby-operator">-</span> <span class="ruby-identifier">_expected_</span>).<span class="ruby-identifier">abs</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">_delta_</span>
16:         <span class="ruby-keyword kw">end</span>
17: 
18:         <span class="ruby-identifier">failure_message_for_should</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
19:           <span class="ruby-node">&quot;expected #{_expected_} +/- (&lt; #{_delta_}), got #{actual}&quot;</span>
20:         <span class="ruby-keyword kw">end</span>
21: 
22:         <span class="ruby-identifier">failure_message_for_should_not</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
23:           <span class="ruby-node">&quot;expected #{_expected_} +/- (&lt; #{_delta_}), got #{actual}&quot;</span>
24:         <span class="ruby-keyword kw">end</span>
25: 
26:         <span class="ruby-identifier">description</span> <span class="ruby-keyword kw">do</span>
27:           <span class="ruby-node">&quot;be close to #{_expected_} (within +- #{_delta_})&quot;</span>
28:         <span class="ruby-keyword kw">end</span>
29:       <span class="ruby-keyword kw">end</span>
30:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000158" class="method">
  <div id="M000158_title" class="title">
    <b>be_instance_of</b>(expected)
  </div>
  <div class="description">
  <p>
Alias for <a
href="index.html?a=M000157&name=be_an_instance_of">be_an_instance_of</a>
</p>
  </div>
</div>
<div id="M000160" class="method">
  <div id="M000160_title" class="title">
    <b>be_kind_of</b>(expected)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000159&name=be_a_kind_of">be_a_kind_of</a>
</p>
  </div>
</div>
<div id="M000161" class="method">
  <div id="M000161_title" class="title">
    <b>should change(receiver, message, &block)<br />
should change(receiver, message, &block).by(value)<br />
should change(receiver, message, &block).from(old).to(new)<br />
should_not change(receiver, message, &block)<br />
</b>
  </div>
  <div class="description">
  <p>
Allows you to specify that a Proc will cause some value to change.
</p>
<h2>Examples</h2>
<pre>
  lambda {
    team.add_player(player)
  }.should change(roster, :count)

  lambda {
    team.add_player(player)
  }.should change(roster, :count).by(1)

  lambda {
    team.add_player(player)
  }.should change(roster, :count).by_at_least(1)

  lambda {
    team.add_player(player)
  }.should change(roster, :count).by_at_most(1)

  string = &quot;string&quot;
  lambda {
    string.reverse!
  }.should change { string }.from(&quot;string&quot;).to(&quot;gnirts&quot;)

  lambda {
    person.happy_birthday
  }.should change(person, :birthday).from(32).to(33)

  lambda {
    employee.develop_great_new_social_networking_app
  }.should change(employee, :title).from(&quot;Mail Clerk&quot;).to(&quot;CEO&quot;)
</pre>
<p>
Evaluates <tt>receiver.message</tt> or <tt>block</tt> before and after it
evaluates the c object (generated by the lambdas in the examples above).
</p>
<p>
Then compares the values before and after the <tt>receiver.message</tt> and
evaluates the difference compared to the expected difference.
</p>
<h2>WARNING</h2>
<p>
<tt>should_not change</tt> only supports the form with no subsequent calls
to <tt>by</tt>, <tt>by_at_least</tt>, <tt>by_at_most</tt>, <tt>to</tt> or
<tt>from</tt>.
</p>
<p>
blocks passed to <tt>should</tt> <tt>change</tt> and <tt>should_not</tt>
<tt>change</tt> must use the <tt>{}</tt> form (<tt>do/end</tt> is not
supported).
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show source</a> ]</p>
  <div id="M000161_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/change.rb, line 148</span>
148:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">change</span>(<span class="ruby-identifier">receiver</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">message</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
149:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Change</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">receiver</span>, <span class="ruby-identifier">message</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
150:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000162" class="method">
  <div id="M000162_title" class="title">
    <b>should eql(expected)<br />
should_not eql(expected)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual and expected are of equal value, but not necessarily the
same object.
</p>
<p>
See <a href="http://www.ruby-doc.org/core/classes/Object.html#M001057"
target="_blank">http://www.ruby-doc.org/core/classes/Object.html#M001057</a>
for more information about equality in <a
href="index.html?a=C00000088&name=Ruby">Ruby</a>.
</p>
<h2>Examples</h2>
<pre>
  5.should eql(5)
  5.should_not eql(3)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show source</a> ]</p>
  <div id="M000162_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/eql.rb, line 15</span>
15:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eql</span>(<span class="ruby-identifier">expected</span>)
16:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:eql</span>, <span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
17:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
18:           <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">eql?</span>(<span class="ruby-identifier">_expected_</span>)
19:         <span class="ruby-keyword kw">end</span>
20: 
21:         <span class="ruby-identifier">failure_message_for_should</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
22:           <span class="ruby-value str">&quot;\nexpected \#{_expected_.inspect}\ngot \#{actual.inspect}\n\n(compared using eql?)\n&quot;</span>
23:         <span class="ruby-keyword kw">end</span>
24: 
25:         <span class="ruby-identifier">failure_message_for_should_not</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
26:           <span class="ruby-value str">&quot;\nexpected \#{actual.inspect} not to equal \#{_expected_.inspect}\n\n(compared using eql?)\n&quot;</span>
27:         <span class="ruby-keyword kw">end</span>
28:       <span class="ruby-keyword kw">end</span>
29:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000163" class="method">
  <div id="M000163_title" class="title">
    <b>should equal(expected)<br />
should_not equal(expected)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual and expected are the same object (object identity).
</p>
<p>
See <a href="http://www.ruby-doc.org/core/classes/Object.html#M001057"
target="_blank">http://www.ruby-doc.org/core/classes/Object.html#M001057</a>
for more information about equality in <a
href="index.html?a=C00000088&name=Ruby">Ruby</a>.
</p>
<h2>Examples</h2>
<pre>
  5.should equal(5) #Fixnums are equal
  &quot;5&quot;.should_not equal(&quot;5&quot;) #Strings that look the same are not the same object
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show source</a> ]</p>
  <div id="M000163_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/equal.rb, line 16</span>
16:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">equal</span>(<span class="ruby-identifier">expected</span>)
17:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:equal</span>, <span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
18:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
19:           <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">equal?</span>(<span class="ruby-identifier">_expected_</span>)
20:         <span class="ruby-keyword kw">end</span>
21:         
22:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect_object</span>(<span class="ruby-identifier">o</span>)
23:           <span class="ruby-node">&quot;#&lt;#{o.class}:#{o.object_id}&gt; =&gt; #{o.inspect}&quot;</span>
24:         <span class="ruby-keyword kw">end</span>
25:         
26:         <span class="ruby-identifier">failure_message_for_should</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
27:           <span class="ruby-value str">&quot;\nexpected \#{inspect_object(_expected_)}\ngot \#{inspect_object(actual)}\n\nCompared using equal?, which compares object identity,\nbut expected and actual are not the same object. Use\n'actual.should == expected' if you don't care about\nobject identity in this example.\n\n&quot;</span>
28:         <span class="ruby-keyword kw">end</span>
29: 
30:         <span class="ruby-identifier">failure_message_for_should_not</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
31:           <span class="ruby-value str">&quot;\nexpected not \#{inspect_object(actual)}\ngot \#{inspect_object(_expected_)}\n\nCompared using equal?, which compares object identity.\n\n&quot;</span>
32:         <span class="ruby-keyword kw">end</span>
33:       <span class="ruby-keyword kw">end</span>
34:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000165" class="method">
  <div id="M000165_title" class="title">
    <b>should exist<br />
should_not exist<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual.exist?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show source</a> ]</p>
  <div id="M000165_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/exist.rb, line 8</span>
 8:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exist</span>(<span class="ruby-identifier">arg</span>=<span class="ruby-keyword kw">nil</span>)
 9:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:exist</span> <span class="ruby-keyword kw">do</span>
10:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
11:           <span class="ruby-identifier">arg</span> <span class="ruby-value">? </span><span class="ruby-identifier">actual</span>.<span class="ruby-identifier">exist?</span>(<span class="ruby-identifier">arg</span>) <span class="ruby-operator">:</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">exist?</span>
12:         <span class="ruby-keyword kw">end</span>
13:       <span class="ruby-keyword kw">end</span>
14:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000168" class="method">
  <div id="M000168_title" class="title">
    <b>should have(number).named_collection__or__sugar<br />
should_not have(number).named_collection__or__sugar<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if receiver is a collection with the submitted number of items OR if
the receiver OWNS a collection with the submitted number of items.
</p>
<p>
If the receiver OWNS the collection, you must use the name of the
collection. So if a <tt>Team</tt> instance has a collection named
<tt>players</tt>, you must use that name to set the expectation.
</p>
<p>
If the receiver IS the collection, you can use any name you like for
<tt>named_collection</tt>. We&#8216;d recommend using either
&quot;elements&quot;, &quot;members&quot;, or &quot;items&quot; as these
are all standard ways of describing the things IN a collection.
</p>
<p>
This also works for Strings, letting you set an expectation about its
length
</p>
<h2>Examples</h2>
<pre>
  # Passes if team.players.size == 11
  team.should have(11).players

  # Passes if [1,2,3].length == 3
  [1,2,3].should have(3).items #&quot;items&quot; is pure sugar

  # Passes if &quot;this string&quot;.length == 11
  &quot;this string&quot;.should have(11).characters #&quot;characters&quot; is pure sugar
</pre>
  </div>
<div class="aka">
  This method is also aliased as
  <a href="index.html?a=M000169&name=have_exactly">have_exactly</a>
</div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show source</a> ]</p>
  <div id="M000168_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/have.rb, line 124</span>
124:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have</span>(<span class="ruby-identifier">n</span>)
125:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Have</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">n</span>)
126:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000170" class="method">
  <div id="M000170_title" class="title">
    <b>should have_at_least(number).items<br />
</b>
  </div>
  <div class="description">
  <p>
Exactly like have() with &gt;=.
</p>
<h2>Warning</h2>
<p>
<tt>should_not</tt> <tt><a
href="index.html?a=M000170&name=have_at_least">have_at_least</a></tt> is
not supported
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show source</a> ]</p>
  <div id="M000170_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/have.rb, line 137</span>
137:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have_at_least</span>(<span class="ruby-identifier">n</span>)
138:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Have</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">n</span>, <span class="ruby-identifier">:at_least</span>)
139:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000171" class="method">
  <div id="M000171_title" class="title">
    <b>should have_at_most(number).items<br />
</b>
  </div>
  <div class="description">
  <p>
Exactly like have() with &lt;=.
</p>
<h2>Warning</h2>
<p>
<tt>should_not</tt> <tt><a
href="index.html?a=M000171&name=have_at_most">have_at_most</a></tt> is not
supported
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show source</a> ]</p>
  <div id="M000171_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/have.rb, line 149</span>
149:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">have_at_most</span>(<span class="ruby-identifier">n</span>)
150:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Have</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">n</span>, <span class="ruby-identifier">:at_most</span>)
151:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000169" class="method">
  <div id="M000169_title" class="title">
    <b>have_exactly</b>(n)
  </div>
  <div class="description">
  <p>
Alias for <a href="index.html?a=M000168&name=have">have</a>
</p>
  </div>
</div>
<div id="M000173" class="method">
  <div id="M000173_title" class="title">
    <b>helper</b>(actual, *_expected_)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show source</a> ]</p>
  <div id="M000173_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/include.rb, line 25</span>
25:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">helper</span>(<span class="ruby-identifier">actual</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">_expected_</span>)
26:           <span class="ruby-identifier">_expected_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">expected</span><span class="ruby-operator">|</span>
27:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
28:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
29:                 <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
30:                   <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">v</span>
31:                 <span class="ruby-keyword kw">end</span>
32:               <span class="ruby-keyword kw">else</span>
33:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">expected</span>)
34:               <span class="ruby-keyword kw">end</span>
35:             <span class="ruby-keyword kw">else</span>
36:               <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expected</span>)
37:             <span class="ruby-keyword kw">end</span>
38:           <span class="ruby-keyword kw">end</span>
39:           <span class="ruby-keyword kw">true</span>
40:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000172" class="method">
  <div id="M000172_title" class="title">
    <b>should include(expected)<br />
should_not include(expected)<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if actual includes expected. This works for collections and Strings.
You can also pass in multiple args and it will only pass if all args are
found in collection.
</p>
<h2>Examples</h2>
<pre>
  [1,2,3].should include(3)
  [1,2,3].should include(2,3) #would pass
  [1,2,3].should include(2,3,4) #would fail
  [1,2,3].should_not include(4)
  &quot;spread&quot;.should include(&quot;read&quot;)
  &quot;spread&quot;.should_not include(&quot;red&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show source</a> ]</p>
  <div id="M000172_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/include.rb, line 19</span>
19:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">expected</span>)
20:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:include</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-operator">*</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
21:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
22:           <span class="ruby-identifier">helper</span>(<span class="ruby-identifier">actual</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">_expected_</span>)
23:         <span class="ruby-keyword kw">end</span>
24:         
25:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">helper</span>(<span class="ruby-identifier">actual</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">_expected_</span>)
26:           <span class="ruby-identifier">_expected_</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">expected</span><span class="ruby-operator">|</span>
27:             <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
28:               <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Hash</span>)
29:                 <span class="ruby-identifier">expected</span>.<span class="ruby-identifier">each_pair</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
30:                   <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>[<span class="ruby-identifier">k</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">v</span>
31:                 <span class="ruby-keyword kw">end</span>
32:               <span class="ruby-keyword kw">else</span>
33:                 <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">expected</span>)
34:               <span class="ruby-keyword kw">end</span>
35:             <span class="ruby-keyword kw">else</span>
36:               <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">expected</span>)
37:             <span class="ruby-keyword kw">end</span>
38:           <span class="ruby-keyword kw">end</span>
39:           <span class="ruby-keyword kw">true</span>
40:         <span class="ruby-keyword kw">end</span>
41:       <span class="ruby-keyword kw">end</span>
42:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000164" class="method">
  <div id="M000164_title" class="title">
    <b>inspect_object</b>(o)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show source</a> ]</p>
  <div id="M000164_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/equal.rb, line 22</span>
22:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">inspect_object</span>(<span class="ruby-identifier">o</span>)
23:           <span class="ruby-node">&quot;#&lt;#{o.class}:#{o.object_id}&gt; =&gt; #{o.inspect}&quot;</span>
24:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000174" class="method">
  <div id="M000174_title" class="title">
    <b>should match(pattern)<br />
should_not match(pattern)<br />
</b>
  </div>
  <div class="description">
  <p>
Given a Regexp or String, passes if actual.match(pattern)
</p>
<h2>Examples</h2>
<pre>
  email.should match(/^([^\s]+)((?:[-a-z0-9]+\.)+[a-z]{2,})$/i)
  email.should match(&quot;@example.com&quot;)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show source</a> ]</p>
  <div id="M000174_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/match.rb, line 13</span>
13:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">expected</span>)
14:       <span class="ruby-constant">Matcher</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">:match</span>, <span class="ruby-identifier">expected</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">_expected_</span><span class="ruby-operator">|</span>
15:         <span class="ruby-identifier">match</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">actual</span><span class="ruby-operator">|</span>
16:           <span class="ruby-identifier">actual</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">_expected_</span>)
17:         <span class="ruby-keyword kw">end</span>
18:       <span class="ruby-keyword kw">end</span>
19:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000175" class="method">
  <div id="M000175_title" class="title">
    <b>should raise_error()<br />
should raise_error(NamedError)<br />
should raise_error(NamedError, String)<br />
should raise_error(NamedError, Regexp)<br />
should raise_error() { |error| ... }<br />
should raise_error(NamedError) { |error| ... }<br />
should raise_error(NamedError, String) { |error| ... }<br />
should raise_error(NamedError, Regexp) { |error| ... }<br />
should_not raise_error()<br />
should_not raise_error(NamedError)<br />
should_not raise_error(NamedError, String)<br />
should_not raise_error(NamedError, Regexp)<br />
</b>
  </div>
  <div class="description">
  <p>
With no args, matches if any error is raised. With a named error, matches
only if that specific error is raised. With a named error and messsage
specified as a String, matches only if both match. With a named error and
messsage specified as a Regexp, matches only if both match. Pass an
optional block to perform extra verifications on the exception matched
</p>
<h2>Examples</h2>
<pre>
  lambda { do_something_risky }.should raise_error
  lambda { do_something_risky }.should raise_error(PoorRiskDecisionError)
  lambda { do_something_risky }.should raise_error(PoorRiskDecisionError) { |error| error.data.should == 42 }
  lambda { do_something_risky }.should raise_error(PoorRiskDecisionError, &quot;that was too risky&quot;)
  lambda { do_something_risky }.should raise_error(PoorRiskDecisionError, /oo ri/)

  lambda { do_something_risky }.should_not raise_error
  lambda { do_something_risky }.should_not raise_error(PoorRiskDecisionError)
  lambda { do_something_risky }.should_not raise_error(PoorRiskDecisionError, &quot;that was too risky&quot;)
  lambda { do_something_risky }.should_not raise_error(PoorRiskDecisionError, /oo ri/)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show source</a> ]</p>
  <div id="M000175_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/raise_error.rb, line 125</span>
125:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">raise_error</span>(<span class="ruby-identifier">error</span>=<span class="ruby-constant">Exception</span>, <span class="ruby-identifier">message</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
126:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">RaiseError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">error</span>, <span class="ruby-identifier">message</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
127:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000176" class="method">
  <div id="M000176_title" class="title">
    <b>should respond_to(*names)<br />
should_not respond_to(*names)<br />
</b>
  </div>
  <div class="description">
  <p>
Matches if the target object responds to all of the names provided. Names
can be Strings or Symbols.
</p>
<h2>Examples</h2>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show source</a> ]</p>
  <div id="M000176_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/respond_to.rb, line 67</span>
67:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">respond_to</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">names</span>)
68:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">RespondTo</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">names</span>)
69:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000177" class="method">
  <div id="M000177_title" class="title">
    <b>should satisfy {}<br />
should_not satisfy {}<br />
</b>
  </div>
  <div class="description">
  <p>
Passes if the submitted block returns true. Yields target to the block.
</p>
<p>
Generally speaking, this should be thought of as a last resort when you
can&#8217;t find any other way to specify the behaviour you wish to
specify.
</p>
<p>
If you do find yourself in such a situation, you could always write a
custom matcher, which would likely make your specs more expressive.
</p>
<h2>Examples</h2>
<pre>
  5.should satisfy { |n|
    n &gt; 3
  }
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show source</a> ]</p>
  <div id="M000177_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/satisfy.rb, line 43</span>
43:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">satisfy</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
44:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">Satisfy</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
45:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000178" class="method">
  <div id="M000178_title" class="title">
    <b>simple_matcher</b>(description=nil, &amp;match_block)
  </div>
  <div class="description">
  <p>
<a href="index.html?a=M000178&name=simple_matcher">simple_matcher</a> makes
it easy for you to create your own custom matchers in just a few lines of
code when you don&#8217;t need all the power of a completely custom matcher
object.
</p>
<p>
The <tt>description</tt> argument will appear as part of any failure
message, and is also the source for auto-generated descriptions.
</p>
<p>
The <tt>match_block</tt> can have an arity of 1 or 2. The first block
argument will be the given value. The second, if the block accepts it will
be the matcher itself, giving you access to set custom failure messages in
favor of the defaults.
</p>
<p>
The <tt>match_block</tt> should return a boolean: <tt>true</tt> indicates a
match, which will pass if you use <tt>should</tt> and fail if you use
<tt>should_not</tt>. false (or nil) indicates no match, which will do the
reverse: fail if you use <tt>should</tt> and pass if you use
<tt>should_not</tt>.
</p>
<p>
An error in the <tt>match_block</tt> will bubble up, resulting in a
failure.
</p>
<h2><a href="index.html?a=C00000062&name=Example">Example</a> with default messages</h2>
<pre>
  def be_even
    simple_matcher(&quot;an even number&quot;) { |given| given % 2 == 0 }
  end

  describe 2 do
    it &quot;should be even&quot; do
      2.should be_even
    end
  end
</pre>
<p>
Given an odd number, this example would produce an error message stating:
expected &quot;an even number&quot;, got 3.
</p>
<p>
Unfortunately, if you&#8217;re a fan of auto-generated descriptions, this
will produce &quot;should an even number.&quot; Not the most desirable
result. You can control that using custom messages:
</p>
<h2><a href="index.html?a=C00000062&name=Example">Example</a> with custom messages</h2>
<pre>
  def rhyme_with(expected)
    simple_matcher(&quot;rhyme with #{expected.inspect}&quot;) do |given, matcher|
      matcher.failure_message = &quot;expected #{given.inspect} to rhyme with #{expected.inspect}&quot;
      matcher.negative_failure_message = &quot;expected #{given.inspect} not to rhyme with #{expected.inspect}&quot;
      given.rhymes_with? expected
    end
  end

  # OR

  def rhyme_with(expected)
    simple_matcher do |given, matcher|
      matcher.description = &quot;rhyme with #{expected.inspect}&quot;
      matcher.failure_message = &quot;expected #{given.inspect} to rhyme with #{expected.inspect}&quot;
      matcher.negative_failure_message = &quot;expected #{given.inspect} not to rhyme with #{expected.inspect}&quot;
      given.rhymes_with? expected
    end
  end

  describe &quot;pecan&quot; do
    it &quot;should rhyme with 'be gone'&quot; do
      nut = &quot;pecan&quot;
      nut.extend Rhymer
      nut.should rhyme_with(&quot;be gone&quot;)
    end
  end
</pre>
<p>
The resulting messages would be:
</p>
<pre>
  description:              rhyme with &quot;be gone&quot;
  failure_message:          expected &quot;pecan&quot; to rhyme with &quot;be gone&quot;
  negative failure_message: expected &quot;pecan&quot; not to rhyme with &quot;be gone&quot;
</pre>
<h2>Wrapped <a href="index.html?a=C00000009&name=Expectations">Expectations</a></h2>
<p>
Because errors will bubble up, it is possible to wrap other expectations in
a <a href="index.html?a=C00000047&name=SimpleMatcher">SimpleMatcher</a>.
</p>
<pre>
  def be_even
    simple_matcher(&quot;an even number&quot;) { |given| (given % 2).should == 0 }
  end
</pre>
<p>
BE VERY CAREFUL when you do this. Only use wrapped expectations for
matchers that will always be used in only the positive (<tt>should</tt>) or
negative (<tt>should_not</tt>), but not both. The reason is that is you
wrap a <tt>should</tt> and call the wrapper with <tt>should_not</tt>, the
correct result (the <tt>should</tt> failing), will fail when you want it to
pass.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show source</a> ]</p>
  <div id="M000178_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/simple_matcher.rb, line 129</span>
129:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">simple_matcher</span>(<span class="ruby-identifier">description</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">match_block</span>)
130:       <span class="ruby-constant">SimpleMatcher</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">description</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">match_block</span>)
131:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000179" class="method">
  <div id="M000179_title" class="title">
    <b>should throw_symbol()<br />
should throw_symbol(:sym)<br />
should throw_symbol(:sym, arg)<br />
should_not throw_symbol()<br />
should_not throw_symbol(:sym)<br />
should_not throw_symbol(:sym, arg)<br />
</b>
  </div>
  <div class="description">
  <p>
Given no argument, matches if a proc throws any Symbol.
</p>
<p>
Given a Symbol, matches if the given proc throws the specified Symbol.
</p>
<p>
Given a Symbol and an arg, matches if the given proc throws the specified
Symbol with the specified arg.
</p>
<h2>Examples</h2>
<pre>
  lambda { do_something_risky }.should throw_symbol
  lambda { do_something_risky }.should throw_symbol(:that_was_risky)
  lambda { do_something_risky }.should throw_symbol(:that_was_risky, culprit)

  lambda { do_something_risky }.should_not throw_symbol
  lambda { do_something_risky }.should_not throw_symbol(:that_was_risky)
  lambda { do_something_risky }.should_not throw_symbol(:that_was_risky, culprit)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show source</a> ]</p>
  <div id="M000179_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/spec/matchers/throw_symbol.rb, line 100</span>
100:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">throw_symbol</span>(<span class="ruby-identifier">sym</span>=<span class="ruby-keyword kw">nil</span>)
101:       <span class="ruby-constant">Matchers</span><span class="ruby-operator">::</span><span class="ruby-constant">ThrowSymbol</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">sym</span>)
102:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000180" class="method">
  <div id="M000180_title" class="title">
    <b>wrap_expectation</b>(matcher, &amp;block)
  </div>
  <div class="description">
  <p>
wraps an expectation in a block that will return true if the expectation
passes and false if it fails (without bubbling up the failure).
</p>
<p>
This is intended to be used in the context of a simple matcher, and is
especially useful for wrapping multiple expectations or one or more
assertions from test/unit extensions when running with test/unit.
</p>
<h2>Examples</h2>
<pre>
  def eat_cheese(cheese)
    simple_matcher do |mouse, matcher|
      matcher.failure_message = &quot;expected #{mouse} to eat cheese&quot;
      wrap_expectation do |matcher|
        assert_eats_cheese(mouse)
      end
    end
  end

  describe Mouse do
    it &quot;eats cheese&quot; do
      Mouse.new.should eat_cheese
    end
  end
</pre>
<p>
You might be wondering &quot;why would I do this if I could just say&quot;
assert_eats_cheese?&quot;, a fair question, indeed. You might prefer to
replace the word assert with something more aligned with the rest of your
code examples. You are using rspec, after all.
</p>
<p>
The other benefit you get is that you can use the negative version of the
matcher:
</p>
<pre>
  describe Cat do
    it &quot;does not eat cheese&quot; do
      Cat.new.should_not eat_cheese
    end
  end
</pre>
<p>
So in the event there is no assert_does_not_eat_cheese available,
you&#8217;re all set!
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show source</a> ]</p>
  <div id="M000180_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/matchers/wrap_expectation.rb, line 45</span>
45:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">wrap_expectation</span>(<span class="ruby-identifier">matcher</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
46:       <span class="ruby-keyword kw">begin</span>
47:         <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">matcher</span>)
48:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">true</span>
49:       <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
50:         <span class="ruby-identifier">matcher</span>.<span class="ruby-identifier">failure_message</span> = <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>
51:         <span class="ruby-keyword kw">return</span> <span class="ruby-keyword kw">false</span>
52:       <span class="ruby-keyword kw">end</span>
53:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>