  <div id="C00000080">
<div class='banner'>
  <span class="file-title-prefix">Module</span><br />ModuleReopeningFix<br/>
  In:
<a href="#" onclick="jsHref('files/lib/spec/example/module_reopening_fix_rb.html');">lib/spec/example/module_reopening_fix.rb</a>

</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
When you reopen a module that is included in another module that is
included in a class, the new material you define does not make it to the
class. This fixes that.
</p>
<h2><a href="index.html?a=C00000070&name=Example">Example</a></h2>
<pre>
  module M1; end

  module M2
    def foo; &quot;FOO&quot;; end
  end

  class C
    include M1
  end

  module M1
    include M2
  end

  c = C.new
  c.foo
  NoMethodError: undefined method `foo' for #&lt;C:0x5e89a4&gt;
    from (irb):12
</pre>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000268&name=child_modules" >child_modules</a></li>
  <li><a href="index.html?a=M000270&name=include" >include</a></li>
  <li><a href="index.html?a=M000269&name=included" >included</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000268" class="method">
  <div id="M000268_title" class="title">
    <b>child_modules</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000268_source')" id="l_M000268_source">show source</a> ]</p>
  <div id="M000268_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/example/module_reopening_fix.rb, line 27</span>
27:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">child_modules</span>
28:         <span class="ruby-ivar">@child_modules</span> <span class="ruby-operator">||=</span> []
29:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000270" class="method">
  <div id="M000270_title" class="title">
    <b>include</b>(mod)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000270_source')" id="l_M000270_source">show source</a> ]</p>
  <div id="M000270_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/example/module_reopening_fix.rb, line 35</span>
35:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">include</span>(<span class="ruby-identifier">mod</span>)
36:         <span class="ruby-keyword kw">super</span>
37:         <span class="ruby-identifier">child_modules</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child_module</span><span class="ruby-operator">|</span>
38:           <span class="ruby-identifier">child_module</span>.<span class="ruby-identifier">__send__</span>(<span class="ruby-identifier">:include</span>, <span class="ruby-identifier">mod</span>)
39:         <span class="ruby-keyword kw">end</span>
40:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000269" class="method">
  <div id="M000269_title" class="title">
    <b>included</b>(mod)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000269_source')" id="l_M000269_source">show source</a> ]</p>
  <div id="M000269_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/spec/example/module_reopening_fix.rb, line 31</span>
31:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">included</span>(<span class="ruby-identifier">mod</span>)
32:         <span class="ruby-identifier">child_modules</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">mod</span>
33:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>