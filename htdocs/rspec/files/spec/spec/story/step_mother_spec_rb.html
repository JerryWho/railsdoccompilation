  <div id="fileHeader">
    <h1>step_mother_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/story/step_mother_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/story_helper'

module Spec
  module Story
    describe StepMother do
      it 'should store a step by name and type' do
        # given
        step_mother = StepMother.new
        step = Step.new(&quot;a given&quot;, &amp;lambda {})
        step_mother.store(:given, step)
        
        # when
        found = step_mother.find(:given, &quot;a given&quot;)
        
        # then
        found.should == step
      end
      
      it 'should NOT raise an error if a step is missing' do
        # given
        step_mother = StepMother.new
        
        # then
        lambda do
          # when
          step_mother.find(:given, &quot;doesn't exist&quot;)
        end.should_not raise_error
      end
      
      it &quot;should create a default step which raises a pending error&quot; do
        # given
        step_mother = StepMother.new
        
        # when
        step = step_mother.find(:given, &quot;doesn't exist&quot;)
        
        # then
        step.should be_an_instance_of(Step)
        
        lambda do
          step.perform(Object.new, &quot;doesn't exist&quot;)
        end.should raise_error(Spec::Example::ExamplePendingError, /Unimplemented/)
      end
      
      it &quot;should create a default step with it's name stripped&quot; do
        # given
        step_mother = StepMother.new
        
        # when
        step = step_mother.find(:given, &quot;doesn't exist\n\n&quot;)
        
        # then
        step.should be_an_instance_of(Step)
        step.name.should == &quot;doesn't exist&quot;
      end
      
      it 'should clear itself' do
        # given
        step_mother = StepMother.new
        step = Step.new(&quot;a given&quot;) do end
        step_mother.store(:given, step)

        # when
        step_mother.clear
        
        # then
        step_mother.should be_empty
      end
      
      it &quot;should use assigned steps&quot; do
        step_mother = StepMother.new
        
        step = Step.new('step') {}
        step_group = StepGroup.new
        step_group.add(:given, step)
        
        step_mother.use(step_group)
                
        step_mother.find(:given, &quot;step&quot;).should equal(step)
      end

    end
  end
end
</pre>
    </div>