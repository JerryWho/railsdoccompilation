  <div id="fileHeader">
    <h1>configuration_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/example/configuration_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../spec_helper.rb'

module Spec
  module Example
    describe Configuration do
      with_sandboxed_options do
        with_sandboxed_config do
          describe &quot;#mock_with&quot; do
            it &quot;should default mock framework to rspec&quot; do
              config.mock_framework.should =~ /\/adapters\/mock_frameworks\/rspec$/
            end

            it &quot;should set rspec mocking explicitly&quot; do
              config.mock_with(:rspec)
              config.mock_framework.should =~ /\/adapters\/mock_frameworks\/rspec$/
            end

            it &quot;should set mocha&quot; do
              config.mock_with(:mocha)
              config.mock_framework.should =~ /\/adapters\/mock_frameworks\/mocha$/
            end

            it &quot;should set flexmock&quot; do
              config.mock_with(:flexmock)
              config.mock_framework.should =~ /\/adapters\/mock_frameworks\/flexmock$/
            end

            it &quot;should set rr&quot; do
              config.mock_with(:rr)
              config.mock_framework.should =~ /\/adapters\/mock_frameworks\/rr$/
            end

            it &quot;should set an arbitrary adapter module&quot; do
              adapter = Module.new
              config.mock_with(adapter)
              config.mock_framework.should == adapter
            end
          end

          describe &quot;#include&quot; do
          
            before(:each) do
              @example_group_class = Class.new(ExampleGroup) {}
              ExampleGroupFactory.register(:foobar, @example_group_class)
            end

            it &quot;should include the submitted module in ExampleGroup subclasses&quot; do
              mod = Module.new
              config.include mod
              Class.new(@example_group_class).included_modules.should include(mod)
            end

            it &quot;should scope modules to be included for a specific type&quot; do
              mod = Module.new
              config.include mod, :type =&gt; :foobar
              Class.new(@example_group_class).included_modules.should include(mod)
            end

            it &quot;should not include modules in a type they are not intended for&quot; do
              mod = Module.new
              @other_example_group_class = Class.new(ExampleGroup)
              ExampleGroupFactory.register(:baz, @other_example_group_class)

              config.include mod, :type =&gt; :foobar

              Class.new(@other_example_group_class).included_modules.should_not include(mod)
            end

          end
      
          describe &quot;#extend&quot; do
        
            before(:each) do
              @example_group_class = Class.new(ExampleGroup) {}
              ExampleGroupFactory.register(:foobar, @example_group_class)
            end

            it &quot;should extend all groups&quot; do
              mod = Module.new
              ExampleGroup.should_receive(:extend).with(mod)
              Spec::Runner.configuration.extend mod
            end
      
            it &quot;should extend specified groups&quot; do
              mod = Module.new
              @example_group_class.should_receive(:extend).with(mod)
              Spec::Runner.configuration.extend mod, :type =&gt; :foobar
            end
      
            it &quot;should not extend non-specified groups&quot; do
              @other_example_group_class = Class.new(ExampleGroup)
              ExampleGroupFactory.register(:baz, @other_example_group_class)

              mod = Module.new
              @other_example_group_class.should_not_receive(:extend)          

              Spec::Runner.configuration.extend mod, :type =&gt; :foobar
            end
        
          end
        end
      
        describe &quot;ordering methods: &quot; do
        
          before(:each) do
            @special_example_group = Class.new(ExampleGroup).describe(&quot;special_example_group&quot;)
            @special_child_example_group = Class.new(@special_example_group).describe(&quot;special_child_example_group&quot;)
            @nonspecial_example_group = Class.new(ExampleGroup).describe(&quot;nonspecial_example_group&quot;)
            ExampleGroupFactory.register(:special, @special_example_group)
            ExampleGroupFactory.register(:special_child, @special_child_example_group)
            ExampleGroupFactory.register(:non_special, @nonspecial_example_group)
            @example_group = @special_child_example_group.describe &quot;Special Example Group&quot;
            @unselected_example_group = Class.new(@nonspecial_example_group).describe &quot;Non Special Example Group&quot;
          end

          describe &quot;#prepend_before&quot; do
            it &quot;prepends the before block on all instances of the passed in type&quot; do
              order = []
              config.prepend_before(:all) do
                order &lt;&lt; :prepend__before_all
              end
              config.prepend_before(:all, :type =&gt; :special) do
                order &lt;&lt; :special_prepend__before_all
              end
              config.prepend_before(:all, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_prepend__before_all
              end
              config.prepend_before(:each) do
                order &lt;&lt; :prepend__before_each
              end
              config.prepend_before(:each, :type =&gt; :special) do
                order &lt;&lt; :special_prepend__before_each
              end
              config.prepend_before(:each, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_prepend__before_each
              end
              config.prepend_before(:all, :type =&gt; :non_special) do
                order &lt;&lt; :special_prepend__before_all
              end
              config.prepend_before(:each, :type =&gt; :non_special) do
                order &lt;&lt; :special_prepend__before_each
              end
              @example_group.it &quot;calls prepend_before&quot; do
              end
      
              @example_group.run(options)
              order.should == [
                :prepend__before_all,
                :special_prepend__before_all,
                :special_child_prepend__before_all,
                :prepend__before_each,
                :special_prepend__before_each,
                :special_child_prepend__before_each
              ]
            end
          end

          describe &quot;#append_before&quot; do

            it &quot;calls append_before on the type&quot; do
              order = []
              config.append_before(:all) do
                order &lt;&lt; :append_before_all
              end
              config.append_before(:all, :type =&gt; :special) do
                order &lt;&lt; :special_append_before_all
              end
              config.append_before(:all, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_append_before_all
              end
              config.append_before(:each) do
                order &lt;&lt; :append_before_each
              end
              config.append_before(:each, :type =&gt; :special) do
                order &lt;&lt; :special_append_before_each
              end
              config.append_before(:each, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_append_before_each
              end
              config.append_before(:all, :type =&gt; :non_special) do
                order &lt;&lt; :special_append_before_all
              end
              config.append_before(:each, :type =&gt; :non_special) do
                order &lt;&lt; :special_append_before_each
              end
              @example_group.it &quot;calls append_before&quot; do
              end

              @example_group.run(options)
              order.should == [
                :append_before_all,
                :special_append_before_all,
                :special_child_append_before_all,
                :append_before_each,
                :special_append_before_each,
                :special_child_append_before_each
              ]
            end
          end

          describe &quot;#prepend_after&quot; do

            it &quot;prepends the after block on all instances of the passed in type&quot; do
              order = []
              config.prepend_after(:all) do
                order &lt;&lt; :prepend__after_all
              end
              config.prepend_after(:all, :type =&gt; :special) do
                order &lt;&lt; :special_prepend__after_all
              end
              config.prepend_after(:all, :type =&gt; :special) do
                order &lt;&lt; :special_child_prepend__after_all
              end
              config.prepend_after(:each) do
                order &lt;&lt; :prepend__after_each
              end
              config.prepend_after(:each, :type =&gt; :special) do
                order &lt;&lt; :special_prepend__after_each
              end
              config.prepend_after(:each, :type =&gt; :special) do
                order &lt;&lt; :special_child_prepend__after_each
              end
              config.prepend_after(:all, :type =&gt; :non_special) do
                order &lt;&lt; :special_prepend__after_all
              end
              config.prepend_after(:each, :type =&gt; :non_special) do
                order &lt;&lt; :special_prepend__after_each
              end
              @example_group.it &quot;calls prepend_after&quot; do
              end

              @example_group.run(options)
              order.should == [
                :special_child_prepend__after_each,
                :special_prepend__after_each,
                :prepend__after_each,
                :special_child_prepend__after_all,
                :special_prepend__after_all,
                :prepend__after_all
              ]
            end
          end

          describe &quot;#append_after&quot; do

            it &quot;calls append_after on the type&quot; do
              order = []
              config.append_after(:all) do
                order &lt;&lt; :append__after_all
              end
              config.append_after(:all, :type =&gt; :special) do
                order &lt;&lt; :special_append__after_all
              end
              config.append_after(:all, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_append__after_all
              end
              config.append_after(:each) do
                order &lt;&lt; :append__after_each
              end
              config.append_after(:each, :type =&gt; :special) do
                order &lt;&lt; :special_append__after_each
              end
              config.append_after(:each, :type =&gt; :special_child) do
                order &lt;&lt; :special_child_append__after_each
              end
              config.append_after(:all, :type =&gt; :non_special) do
                order &lt;&lt; :non_special_append_after_all
              end
              config.append_after(:each, :type =&gt; :non_special) do
                order &lt;&lt; :non_special_append_after_each
              end
              @example_group.it &quot;calls append_after&quot; do
              end

              @example_group.run(options)
              order.should == [
                :special_child_append__after_each,
                :special_append__after_each,
                :append__after_each,
                :special_child_append__after_all,
                :special_append__after_all,
                :append__after_all
              ]
            end
          end
        end
      end
    end
  end
end
</pre>
    </div>