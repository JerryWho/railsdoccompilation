  <div id="fileHeader">
    <h1>description_generation_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/matchers/description_generation_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../spec_helper.rb'

describe &quot;Matchers should be able to generate their own descriptions&quot; do
  after(:each) do
    Spec::Matchers.clear_generated_description
  end

  it &quot;should == expected&quot; do
    &quot;this&quot;.should == &quot;this&quot;
    Spec::Matchers.generated_description.should == &quot;should == \&quot;this\&quot;&quot;
  end
  
  it &quot;should not == expected&quot; do
    &quot;this&quot;.should_not == &quot;that&quot;
    Spec::Matchers.generated_description.should == &quot;should not == \&quot;that\&quot;&quot;
  end
  
  it &quot;should be empty (arbitrary predicate)&quot; do
    [].should be_empty
    Spec::Matchers.generated_description.should == &quot;should be empty&quot;
  end
  
  it &quot;should not be empty (arbitrary predicate)&quot; do
    [1].should_not be_empty
    Spec::Matchers.generated_description.should == &quot;should not be empty&quot;
  end
  
  it &quot;should be true&quot; do
    true.should be_true
    Spec::Matchers.generated_description.should == &quot;should be true&quot;
  end
  
  it &quot;should be false&quot; do
    false.should be_false
    Spec::Matchers.generated_description.should == &quot;should be false&quot;
  end
  
  it &quot;should be nil&quot; do
    nil.should be_nil
    Spec::Matchers.generated_description.should == &quot;should be nil&quot;
  end
  
  it &quot;should be &gt; n&quot; do
    5.should be &gt; 3
    Spec::Matchers.generated_description.should == &quot;should be &gt; 3&quot;
  end
  
  it &quot;should be predicate arg1, arg2 and arg3&quot; do
    5.0.should be_between(0,10)
    Spec::Matchers.generated_description.should == &quot;should be between 0 and 10&quot;
  end

  it &quot;should be_few_words predicate should be transformed to 'be few words'&quot; do
    5.should be_kind_of(Fixnum)
    Spec::Matchers.generated_description.should == &quot;should be kind of Fixnum&quot;
  end

  it &quot;should preserve a proper prefix for be predicate&quot; do
    5.should be_a_kind_of(Fixnum)
    Spec::Matchers.generated_description.should == &quot;should be a kind of Fixnum&quot;
    5.should be_an_instance_of(Fixnum)
    Spec::Matchers.generated_description.should == &quot;should be an instance of Fixnum&quot;
  end
  
  it &quot;should equal&quot; do
    expected = &quot;expected&quot;
    expected.should equal(expected)
    Spec::Matchers.generated_description.should == &quot;should equal \&quot;expected\&quot;&quot;
  end
  
  it &quot;should_not equal&quot; do
    5.should_not equal(37)
    Spec::Matchers.generated_description.should == &quot;should not equal 37&quot;
  end
  
  it &quot;should eql&quot; do
    &quot;string&quot;.should eql(&quot;string&quot;)
    Spec::Matchers.generated_description.should == &quot;should eql \&quot;string\&quot;&quot;
  end
  
  it &quot;should not eql&quot; do
    &quot;a&quot;.should_not eql(:a)
    Spec::Matchers.generated_description.should == &quot;should not eql :a&quot;
  end
  
  it &quot;should have_key&quot; do
    {:a =&gt; &quot;a&quot;}.should have_key(:a)
    Spec::Matchers.generated_description.should == &quot;should have key :a&quot;
  end
  
  it &quot;should have n items&quot; do
    team.should have(3).players
    Spec::Matchers.generated_description.should == &quot;should have 3 players&quot;
  end
  
  it &quot;should have at least n items&quot; do
    team.should have_at_least(2).players
    Spec::Matchers.generated_description.should == &quot;should have at least 2 players&quot;
  end
  
  it &quot;should have at most n items&quot; do
    team.should have_at_most(4).players
    Spec::Matchers.generated_description.should == &quot;should have at most 4 players&quot;
  end
  
  it &quot;should include&quot; do
    [1,2,3].should include(3)
    Spec::Matchers.generated_description.should == &quot;should include 3&quot;
  end

  it &quot;array.should =~ [1,2,3]&quot; do
    [1,2,3].should =~ [1,2,3]
    Spec::Matchers.generated_description.should == &quot;should contain exactly 1, 2 and 3&quot;
  end
  
  it &quot;should match&quot; do
    &quot;this string&quot;.should match(/this string/)
    Spec::Matchers.generated_description.should == &quot;should match /this string/&quot;
  end
  
  it &quot;should raise_error&quot; do
    lambda { raise }.should raise_error
    Spec::Matchers.generated_description.should == &quot;should raise Exception&quot;
  end
  
  it &quot;should raise_error with type&quot; do
    lambda { raise }.should raise_error(RuntimeError)
    Spec::Matchers.generated_description.should == &quot;should raise RuntimeError&quot;
  end
  
  it &quot;should raise_error with type and message&quot; do
    lambda { raise &quot;there was an error&quot; }.should raise_error(RuntimeError, &quot;there was an error&quot;)
    Spec::Matchers.generated_description.should == &quot;should raise RuntimeError with \&quot;there was an error\&quot;&quot;
  end
  
  it &quot;should respond_to&quot; do
    [].should respond_to(:insert)
    Spec::Matchers.generated_description.should == &quot;should respond to [:insert]&quot;
  end
  
  it &quot;should throw symbol&quot; do
    lambda { throw :what_a_mess }.should throw_symbol
    Spec::Matchers.generated_description.should == &quot;should throw a Symbol&quot;
  end
  
  it &quot;should throw symbol (with named symbol)&quot; do
    lambda { throw :what_a_mess }.should throw_symbol(:what_a_mess)
    Spec::Matchers.generated_description.should == &quot;should throw :what_a_mess&quot;
  end
  
  def team
    Class.new do
      def players
        [1,2,3]
      end
    end.new
  end
end

describe &quot;a Matcher with no description&quot; do
  def matcher
     Class.new do
       def matches?(ignore); true; end
       def failure_message; &quot;&quot;; end
     end.new
  end
  
  it &quot;should provide a helpful message when used in a string-less example block&quot; do
    5.should matcher
    Spec::Matchers.generated_description.should =~ /When you call.*description method/m
  end
end
</pre>
    </div>