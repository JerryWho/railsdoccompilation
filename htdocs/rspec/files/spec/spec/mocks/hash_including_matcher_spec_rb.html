  <div id="fileHeader">
    <h1>hash_including_matcher_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/mocks/hash_including_matcher_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../spec_helper.rb'

module Spec
  module Mocks
    module ArgumentConstraints
      describe HashIncludingConstraint do
        
        it &quot;should describe itself properly&quot; do
          HashIncludingConstraint.new(:a =&gt; 1).description.should == &quot;hash_including(:a=&gt;1)&quot;
        end      

        describe &quot;passing&quot; do
          it &quot;should match the same hash&quot; do
            hash_including(:a =&gt; 1).should == {:a =&gt; 1}
          end

          it &quot;should match a hash with extra stuff&quot; do
            hash_including(:a =&gt; 1).should == {:a =&gt; 1, :b =&gt; 2}
          end
          
          describe &quot;when matching against other constraints&quot; do
            it &quot;should match an int against anything()&quot; do
              hash_including(:a =&gt; anything, :b =&gt; 2).should == {:a =&gt; 1, :b =&gt; 2}
            end

            it &quot;should match a string against anything()&quot; do
              hash_including(:a =&gt; anything, :b =&gt; 2).should == {:a =&gt; &quot;1&quot;, :b =&gt; 2}
            end
          end
          
          describe &quot;when passed only keys or keys mixed with key/value pairs&quot; do
            it &quot;should match if the key is present&quot; do
              hash_including(:a).should == {:a =&gt; 1, :b =&gt; 2}
            end
            
            it &quot;should match if more keys are present&quot; do
              hash_including(:a, :b).should == {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3}
            end

            it &quot;should match a string against a given key&quot; do
              hash_including(:a).should == {:a =&gt; &quot;1&quot;, :b =&gt; 2}
            end

            it &quot;should match if passed one key and one key/value pair&quot; do
              hash_including(:a, :b =&gt; 2).should == {:a =&gt; 1, :b =&gt; 2}
            end
            
            it &quot;should match if passed many keys and one key/value pair&quot; do
              hash_including(:a, :b, :c =&gt; 3).should == {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3, :d =&gt; 4}
            end
            
            it &quot;should match if passed many keys and many key/value pairs&quot; do
              hash_including(:a, :b, :c =&gt; 3, :e =&gt; 5).should == {:a =&gt; 1, :b =&gt; 2, :c =&gt; 3, :d =&gt; 4, :e =&gt; 5}
            end
          end
        end
        
        describe &quot;failing&quot; do
          it &quot;should not match a non-hash&quot; do
            hash_including(:a =&gt; 1).should_not == 1
          end

          it &quot;should not match a hash with a missing key&quot; do
            hash_including(:a =&gt; 1).should_not == {:b =&gt; 2}
          end
          
          it &quot;should not match a hash with a missing key&quot; do
            hash_including(:a).should_not == {:b =&gt; 2}
          end
          
          it &quot;should not match an empty hash with a given key&quot; do
            hash_including(:a).should_not == {}
          end
          
          it &quot;should not match a hash with a missing key when one pair is matching&quot; do
            hash_including(:a, :b =&gt; 2).should_not == {:b =&gt; 2}
          end
          
          it &quot;should not match a hash with an incorrect value&quot; do
            hash_including(:a =&gt; 1, :b =&gt; 2).should_not == {:a =&gt; 1, :b =&gt; 3}
          end

          it &quot;should not match when values are nil but keys are different&quot; do
            hash_including(:a =&gt; nil).should_not == {:b =&gt; nil}
          end
        end
      end
    end
  end
end
</pre>
    </div>