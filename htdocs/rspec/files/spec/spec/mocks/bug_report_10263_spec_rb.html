  <div id="fileHeader">
    <h1>bug_report_10263_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/mocks/bug_report_10263_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>describe &quot;Mock&quot; do
  before do
    @mock = mock(&quot;test mock&quot;)
  end
  
  specify &quot;when one example has an expectation (non-mock) inside the block passed to the mock&quot; do
    @mock.should_receive(:msg) do |b|
      b.should be_true #this call exposes the problem
    end
    @mock.msg(false) rescue nil
  end
  
  specify &quot;then the next example should behave as expected instead of saying&quot; do
    @mock.should_receive(:foobar)
    @mock.foobar
    @mock.rspec_verify
    begin
      @mock.foobar
    rescue Exception =&gt; e
      e.message.should == &quot;Mock 'test mock' received unexpected message :foobar with (no args)&quot;
    end
  end 
end

</pre>
    </div>