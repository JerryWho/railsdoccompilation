  <div id="fileHeader">
    <h1>spec_parser_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/runner/spec_parser_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + '/../../spec_helper.rb'

describe &quot;SpecParser&quot; do
  with_sandboxed_options do    
    attr_reader :parser, :file
    
    before do
      @parser = Spec::Runner::SpecParser.new(options)
      @file = &quot;#{File.dirname(__FILE__)}/spec_parser/spec_parser_fixture.rb&quot;
      load file
    end

    it &quot;should find spec name for 'specify' at same line&quot; do
      parser.spec_name_for(file, 5).should == &quot;c 1&quot;
    end

    it &quot;should find spec name for 'specify' at end of spec line&quot; do
      parser.spec_name_for(file, 6).should == &quot;c 1&quot;
    end

    it &quot;should find context for 'context' above all specs&quot; do
      parser.spec_name_for(file, 4).should == &quot;c&quot;
    end

    it &quot;should find spec name for 'it' at same line&quot; do
      parser.spec_name_for(file, 15).should == &quot;d 3&quot;
    end

    it &quot;should find spec name for 'it' at end of spec line&quot; do
      parser.spec_name_for(file, 16).should == &quot;d 3&quot;
    end

    it &quot;should find context for 'describe' above all specs&quot; do
      parser.spec_name_for(file, 14).should == &quot;d&quot;
    end

    it &quot;should find nearest example name between examples&quot; do
      parser.spec_name_for(file, 7).should == &quot;c 1&quot;
    end

    it &quot;should find nothing outside a context&quot; do
      parser.spec_name_for(file, 2).should be_nil
    end

    it &quot;should find context name for type&quot; do
      parser.spec_name_for(file, 26).should == &quot;SpecParserSubject&quot;
    end

    it &quot;should find context and spec name for type&quot; do
      parser.spec_name_for(file, 28).should == &quot;SpecParserSubject 5&quot;
    end

    it &quot;should find context and description for type&quot; do
      parser.spec_name_for(file, 33).should == &quot;SpecParserSubject described&quot;
    end

    it &quot;should find context and description and example for type&quot; do
      parser.spec_name_for(file, 36).should == &quot;SpecParserSubject described 6&quot;
    end

    it &quot;should find context and description for type with modifications&quot; do
      parser.spec_name_for(file, 40).should == &quot;SpecParserSubject described&quot;
    end

    it &quot;should find context and described and example for type with modifications&quot; do
      parser.spec_name_for(file, 43).should == &quot;SpecParserSubject described 7&quot;
    end

    it &quot;should find example group&quot; do
      parser.spec_name_for(file, 47).should == &quot;described&quot;
    end

    it &quot;should find example&quot; do
      parser.spec_name_for(file, 50).should == &quot;described 8&quot;
    end

    it &quot;should find nested example&quot; do
      parser.spec_name_for(file, 63).should == &quot;e f 11&quot;
    end

    it &quot;should handle paths which contain colons&quot; do
      fixture =
         { &quot;c:/somepath/somefile.rb:999:in 'method'&quot; =&gt; &quot;c:/somepath/somefile.rb&quot;,
           &quot;./somepath/somefile:999&quot;                 =&gt; &quot;./somepath/somefile&quot; }
      fixture.each_pair do |input, expected|
        parser.send(:parse_backtrace, input ).should == [[expected, 999]]
      end
    end

  end
end
</pre>
    </div>