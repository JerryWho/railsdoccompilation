  <div id="fileHeader">
    <h1>base_formatter_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/spec/runner/formatter/base_formatter_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 29 13:11:11 +0100 2008</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require File.dirname(__FILE__) + &quot;/../../../spec_helper&quot;

module Spec
  module Runner
    module Formatter
      describe BaseFormatter do
        before :each do
          @options, @where = nil, nil
          @formatter = BaseFormatter.new(@options, @where)
        end
        
        class HaveInterfaceMatcher
          def initialize(method)
            @method = method
          end
          
          attr_reader :object
          attr_reader :method
          
          def matches?(object)
            @object = object
            object.respond_to?(@method)
          end
          
          def with(arity)
            WithArity.new(self, @method, arity)
          end
          
          class WithArity
            def initialize(matcher, method, arity)
              @have_matcher = matcher
              @method = method
              @arity  = arity
            end
            
            def matches?(an_object)
              @have_matcher.matches?(an_object) &amp;&amp; real_arity == @arity
            end
            
            def failure_message
              &quot;#{@have_matcher} should have method :#{@method} with #{argument_arity}, but it had #{real_arity}&quot;
            end
            
            def arguments
              self
            end
            
            alias_method :argument, :arguments
            
          private
            
            def real_arity
              @have_matcher.object.method(@method).arity
            end
            
            def argument_arity
              if @arity == 1
                &quot;1 argument&quot;
              else
                &quot;#{@arity} arguments&quot;
              end
            end
          end
        end
        
        def have_interface_for(method)
          HaveInterfaceMatcher.new(method)
        end
        
        it &quot;should have start as an interface with one argument&quot;do
          @formatter.should have_interface_for(:start).with(1).argument
        end
        
        it &quot;should have add_example_group as an interface with one argument&quot; do
          @formatter.should have_interface_for(:add_example_group).with(1).argument
        end
        
        it &quot;should have example_started as an interface with one argument&quot; do
          @formatter.should have_interface_for(:example_started).with(1).argument
        end
        
        it &quot;should have example_failed as an interface with three arguments&quot; do
          @formatter.should have_interface_for(:example_failed).with(3).arguments
        end
        
        it &quot;should have example_pending as an interface with three arguments&quot; do
          @formatter.should have_interface_for(:example_pending).with(3).arguments
        end
        
        it &quot;should have start_dump as an interface with zero arguments&quot; do
          @formatter.should have_interface_for(:start_dump).with(0).arguments
        end
        
        it &quot;should have dump_failure as an interface with two arguments&quot; do
          @formatter.should have_interface_for(:dump_failure).with(2).arguments
        end
        
        it &quot;should have dump_summary as an interface with two arguments&quot; do
          @formatter.should have_interface_for(:dump_failure).with(2).arguments
        end

        it &quot;should have dump_pending as an interface with zero arguments&quot; do
          @formatter.should have_interface_for(:dump_pending).with(0).arguments
        end

        it &quot;should have close  as an interface with zero arguments&quot; do
          @formatter.should have_interface_for(:close).with(0).arguments
        end
      end
    end
  end
end
</pre>
    </div>