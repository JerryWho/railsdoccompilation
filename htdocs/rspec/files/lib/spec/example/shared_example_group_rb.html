  <div id="fileHeader">
    <h1>shared_example_group.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/spec/example/shared_example_group.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:57:53 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Spec
  module Example
    class SharedExampleGroup &lt; Module
      module ClassMethods
        def register(*args, &amp;block)
          new_example_group = new(*args, &amp;block)
          shared_example_groups &lt;&lt; new_example_group unless already_registered?(new_example_group)
          new_example_group
        end

        def find(example_group_description)
          shared_example_groups.find {|b| b.description == example_group_description}
        end

        def clear
          shared_example_groups.clear
        end

        def include?(group)
          shared_example_groups.include?(group)
        end

        def count
          shared_example_groups.length
        end

      private

        def shared_example_groups
          @shared_example_groups ||= []
        end

        def already_registered?(new_example_group)
          existing_example_group = find(new_example_group.description)
          return false unless existing_example_group
          return true if new_example_group.equal?(existing_example_group)
          return true if expanded_path(new_example_group) == expanded_path(existing_example_group)
          raise ArgumentError.new(&quot;Shared Example '#{existing_example_group.description}' already exists&quot;)
        end

        def expanded_path(example_group)
          File.expand_path(example_group.location)
        end
      end

      extend ClassMethods
      include ExampleGroupMethods

      def initialize(*args, &amp;example_group_block)
        set_description(*args)
        @example_group_block = example_group_block
      end

      def included(mod) # :nodoc:
        mod.module_eval(&amp;@example_group_block)
      end
    end
  end
end
</pre>
    </div>