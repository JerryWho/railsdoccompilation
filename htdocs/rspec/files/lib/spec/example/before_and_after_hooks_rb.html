  <div id="fileHeader">
    <h1>before_and_after_hooks.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/spec/example/before_and_after_hooks.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:06:25 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Spec
  module Example
    module BeforeAndAfterHooks
      class &lt;&lt; self
        def before_suite_parts
          @before_suite_parts ||= []
        end
        
        def after_suite_parts
          @after_suite_parts ||= []
        end
      end
      
      # Registers a block to be executed before each example.
      # This method prepends +block+ to existing before blocks.
      def prepend_before(*args, &amp;block)
        before_parts(*args).unshift(block)
      end

      # Registers a block to be executed before each example.
      # This method appends +block+ to existing before blocks.
      def append_before(*args, &amp;block)
        before_parts(*args) &lt;&lt; block
      end
      alias_method :before, :append_before

      # Registers a block to be executed after each example.
      # This method prepends +block+ to existing after blocks.
      def prepend_after(*args, &amp;block)
        after_parts(*args).unshift(block)
      end
      alias_method :after, :prepend_after

      # Registers a block to be executed after each example.
      # This method appends +block+ to existing after blocks.
      def append_after(*args, &amp;block)
        after_parts(*args) &lt;&lt; block
      end

      def before_each_parts # :nodoc:
        @before_each_parts ||= []
      end

      def after_each_parts # :nodoc:
        @after_each_parts ||= []
      end
      
      def before_all_parts # :nodoc:
        @before_all_parts ||= []
      end

      def after_all_parts # :nodoc:
        @after_all_parts ||= []
      end

      def before_suite_parts
        BeforeAndAfterHooks.before_suite_parts
      end
      
      def after_suite_parts
        BeforeAndAfterHooks.after_suite_parts
      end
      
    private  
      
      def before_parts(*args)
        case Spec::Example.scope_from(*args)
        when :each; before_each_parts
        when :all; before_all_parts
        when :suite; before_suite_parts
        end
      end

      def after_parts(*args)
        case Spec::Example.scope_from(*args)
        when :each; after_each_parts
        when :all; after_all_parts
        when :suite; after_suite_parts
        end
      end

    end
  end
end</pre>
    </div>