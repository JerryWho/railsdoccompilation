<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Factory</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (F)</a> &raquo; 
    
    
    <span class="title">Factory</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Factory
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Factory</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/factory_girl.rb<span class="defines">,<br />
  lib/factory_girl/proxy.rb,<br /> lib/factory_girl/syntax.rb,<br /> lib/factory_girl/factory.rb,<br /> lib/factory_girl/aliases.rb,<br /> lib/factory_girl/sequence.rb,<br /> lib/factory_girl/attribute.rb,<br /> lib/factory_girl/proxy/stub.rb,<br /> lib/factory_girl/syntax/sham.rb,<br /> lib/factory_girl/syntax/make.rb,<br /> lib/factory_girl/proxy/build.rb,<br /> lib/factory_girl/proxy/create.rb,<br /> lib/factory_girl/syntax/generate.rb,<br /> lib/factory_girl/attribute/static.rb,<br /> lib/factory_girl/syntax/blueprint.rb,<br /> lib/factory_girl/attribute/dynamic.rb,<br /> lib/factory_girl/attribute/callback.rb,<br /> lib/factory_girl/proxy/attributes_for.rb,<br /> lib/factory_girl/attribute/association.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Defined Under Namespace</h2>
<p class="children">
   
    
      <strong class="modules">Modules:</strong> <span class='object_link'><a href="Factory/Syntax.html" title="Factory::Syntax (module)">Syntax</a></span>
    
   
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Factory/AssociationDefinitionError.html" title="Factory::AssociationDefinitionError (class)">AssociationDefinitionError</a></span>, <span class='object_link'><a href="Factory/Attribute.html" title="Factory::Attribute (class)">Attribute</a></span>, <span class='object_link'><a href="Factory/AttributeDefinitionError.html" title="Factory::AttributeDefinitionError (class)">AttributeDefinitionError</a></span>, <span class='object_link'><a href="Factory/DuplicateDefinitionError.html" title="Factory::DuplicateDefinitionError (class)">DuplicateDefinitionError</a></span>, <span class='object_link'><a href="Factory/InvalidCallbackNameError.html" title="Factory::InvalidCallbackNameError (class)">InvalidCallbackNameError</a></span>, <span class='object_link'><a href="Factory/Proxy.html" title="Factory::Proxy (class)">Proxy</a></span>, <span class='object_link'><a href="Factory/Sequence.html" title="Factory::Sequence (class)">Sequence</a></span>, <span class='object_link'><a href="Factory/SequenceAbuseError.html" title="Factory::SequenceAbuseError (class)">SequenceAbuseError</a></span>
    
  
</p>

  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="VERSION-constant" class="">VERSION =
          
        </dt>
        <dd><pre class="code"><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>1.3.2</span><span class='tstring_end'>&quot;</span></span></pre></dd>
      
    </dl>
  


  <h2>Class Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#aliases-class_method" title="aliases (class method)">+ (Object) <strong>aliases</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#definition_file_paths-class_method" title="definition_file_paths (class method)">+ (Object) <strong>definition_file_paths</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
An Array of strings specifying locations that should be searched for
factory definitions.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#factories-class_method" title="factories (class method)">+ (Object) <strong>factories</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequences-class_method" title="sequences (class method)">+ (Object) <strong>sequences</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
  </ul>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes-instance_method" title="#attributes (instance method)">- (Object) <strong>attributes</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#factory_name-instance_method" title="#factory_name (instance method)">- (Object) <strong>factory_name</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

    
  </ul>


  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alias-class_method" title="alias (class method)">+ (Object) <strong>alias</strong>(pattern, replace) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a new alias for attributes.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#aliases_for-class_method" title="aliases_for (class method)">+ (Object) <strong>aliases_for</strong>(attribute) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#attributes_for-class_method" title="attributes_for (class method)">+ (Object) <strong>attributes_for</strong>(name, overrides = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates and returns a Hash of attributes from this factory.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build-class_method" title="build (class method)">+ (Object) <strong>build</strong>(name, overrides = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates and returns an instance from this factory.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create-class_method" title="create (class method)">+ (Object) <strong>create</strong>(name, overrides = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates, saves, and returns an instance from this factory.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_strategy-class_method" title="default_strategy (class method)">+ (Object) <strong>default_strategy</strong>(name, overrides = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Executes the default strategy for the given factory.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#define-class_method" title="define (class method)">+ (Object) <strong>define</strong>(name, options = {}) {|instance| ... }</a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a new factory that can be used by the build strategies (create and
build) to build new objects.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#factory_by_name-class_method" title="factory_by_name (class method)">+ (Object) <strong>factory_by_name</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#find_definitions-class_method" title="find_definitions (class method)">+ (Object) <strong>find_definitions</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#next-class_method" title="next (class method)">+ (Object) <strong>next</strong>(sequence) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates and returns the next value in a sequence.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequence-class_method" title="sequence (class method)">+ (Object) <strong>sequence</strong>(name, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Defines a new sequence that can be used to generate unique values in a
specific format.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stub-class_method" title="stub (class method)">+ (Object) <strong>stub</strong>(name, overrides = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Generates and returns an object with all attributes from this factory
stubbed out.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_attribute-instance_method" title="#add_attribute (instance method)">- (Object) <strong>add_attribute</strong>(name, value = nil, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds an attribute that should be assigned on generated instances for this
factory.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after_build-instance_method" title="#after_build (instance method)">- (Object) <strong>after_build</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after_create-instance_method" title="#after_create (instance method)">- (Object) <strong>after_create</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#after_stub-instance_method" title="#after_stub (instance method)">- (Object) <strong>after_stub</strong>(&amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#association-instance_method" title="#association (instance method)">- (Object) <strong>association</strong>(name, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds an attribute that builds an association.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#associations-instance_method" title="#associations (instance method)">- (Object) <strong>associations</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#build_class-instance_method" title="#build_class (instance method)">- (Object) <strong>build_class</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#callback-instance_method" title="#callback (instance method)">- (Object) <strong>callback</strong>(name, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#class_name-instance_method" title="#class_name (instance method)">- (Object) <strong>class_name</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_strategy-instance_method" title="#default_strategy (instance method)">- (Object) <strong>default_strategy</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#human_name-instance_method" title="#human_name (instance method)">- (Object) <strong>human_name</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inherit_from-instance_method" title="#inherit_from (instance method)">- (Object) <strong>inherit_from</strong>(parent) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Factory) <strong>initialize</strong>(name, options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_missing-instance_method" title="#method_missing (instance method)">- (Object) <strong>method_missing</strong>(name, *args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Calls add_attribute using the missing method name as the name of the
attribute, so that:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong>(proxy_class, overrides) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#sequence-instance_method" title="#sequence (instance method)">- (Object) <strong>sequence</strong>(name, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds an attribute that will have unique values generated by a sequence with
a specified format.
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Factory (class)">Factory</a></span></tt>) <strong>initialize</strong>(name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


78
79
80
81
82
83</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 78</span>

<span class='kw'>def</span> <span class='id initialize'>initialize</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id assert_valid_options'>assert_valid_options</span><span class='lparen'>(</span><span class='id options'>options</span><span class='rparen'>)</span>
  <span class='ivar'>@factory_name</span> <span class='op'>=</span> <span class='id factory_name_for'>factory_name_for</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='ivar'>@options</span>      <span class='op'>=</span> <span class='id options'>options</span>
  <span class='ivar'>@attributes</span>   <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>
<div id="method_missing_details" class="method_details_list">
  <h2>Dynamic Method Handling</h2>
  <p class="notice this">
    This class handles dynamic methods through the <tt>method_missing</tt> method
    
  </p>
  
    <div class="method_details first">
  <p class="signature first" id="method_missing-instance_method">
  
    - (<tt>Object</tt>) <strong>method_missing</strong>(name, *args, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Calls add_attribute using the missing method name as the name of the
attribute, so that:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:user</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id name'>name</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Billy Idol</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
</pre>
<p>
and:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:user</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id add_attribute'>add_attribute</span> <span class='symbol'>:name</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Billy Idol</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>
</pre>
<p>
are equivilent.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


145
146
147</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 145</span>

<span class='kw'>def</span> <span class='id method_missing'>method_missing</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id add_attribute'>add_attribute</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="class_attr_details" class="attr_details">
    <h2>Class Attribute Details</h2>
    
      
      <span id="aliases=-class_method"></span>
      <span id="aliases-class_method"></span>
      <div class="method_details first">
  <p class="signature first" id="aliases-class_method">
  
    + (<tt>Object</tt>) <strong>aliases</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


4
5
6</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/aliases.rb', line 4</span>

<span class='kw'>def</span> <span class='id aliases'>aliases</span>
  <span class='ivar'>@aliases</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="definition_file_paths=-class_method"></span>
      <span id="definition_file_paths-class_method"></span>
      <div class="method_details ">
  <p class="signature " id="definition_file_paths-class_method">
  
    + (<tt>Object</tt>) <strong>definition_file_paths</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
An Array of strings specifying locations that should be searched for
factory definitions. By default, factory_girl will attempt to require
&#8220;factories,&#8221; &#8220;test/factories,&#8221; and
&#8220;spec/factories.&#8221; Only the first existing file will be loaded.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 24</span>

<span class='kw'>def</span> <span class='id definition_file_paths'>definition_file_paths</span>
  <span class='ivar'>@definition_file_paths</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="factories=-class_method"></span>
      <span id="factories-class_method"></span>
      <div class="method_details ">
  <p class="signature " id="factories-class_method">
  
    + (<tt>Object</tt>) <strong>factories</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


18
19
20</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 18</span>

<span class='kw'>def</span> <span class='id factories'>factories</span>
  <span class='ivar'>@factories</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id="sequences=-class_method"></span>
      <span id="sequences-class_method"></span>
      <div class="method_details ">
  <p class="signature " id="sequences-class_method">
  
    + (<tt>Object</tt>) <strong>sequences</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/sequence.rb', line 24</span>

<span class='kw'>def</span> <span class='id sequences'>sequences</span>
  <span class='ivar'>@sequences</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id=""></span>
      <span id="attributes-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="attributes-instance_method">
  
    - (<tt>Object</tt>) <strong>attributes</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


31
32
33</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 31</span>

<span class='kw'>def</span> <span class='id attributes'>attributes</span>
  <span class='ivar'>@attributes</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="factory_name-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="factory_name-instance_method">
  
    - (<tt>Object</tt>) <strong>factory_name</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


30
31
32</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 30</span>

<span class='kw'>def</span> <span class='id factory_name'>factory_name</span>
  <span class='ivar'>@factory_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="alias-class_method">
  
    + (<tt>Object</tt>) <strong>alias</strong>(pattern, replace) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Defines a new alias for attributes.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
pattern: <tt>Regexp</tt> A pattern that will be matched against attributes
when looking for aliases. Contents captured in the pattern can be used in
the alias.
</p>
</li>
<li><p>
replace: <tt>String</tt> The alias that results from the matched pattern.
Captured strings can be substituted like with <tt>String#sub</tt>.
</p>
</li>
</ul>
<p>
Example:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id alias'>alias</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>(.*)_confirmation</span><span class='regexp_end'>/</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>\1</span><span class='tstring_end'>'</span></span>
</pre>
<p>
factory_girl starts with aliases for foreign keys, so that a :user
association can be overridden by a :user_id parameter:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:post</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id p'>p</span><span class='op'>|</span>
    <span class='id p'>p</span><span class='period'>.</span><span class='id association'>association</span> <span class='symbol'>:user</span>
  <span class='kw'>end</span>

  <span class='comment'># The user association will not be built in this example. The user_id
</span>  <span class='comment'># will be used instead.
</span>  <span class='const'>Factory</span><span class='lparen'>(</span><span class='symbol'>:post</span><span class='comma'>,</span> <span class='symbol'>:user_id</span> <span class='op'>=&gt;</span> <span class='int'>1</span><span class='rparen'>)</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/aliases.rb', line 35</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='kw'>alias</span> <span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='comma'>,</span> <span class='id replace'>replace</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id aliases'>aliases</span> <span class='op'>&lt;&lt;</span> <span class='lbracket'>[</span><span class='id pattern'>pattern</span><span class='comma'>,</span> <span class='id replace'>replace</span><span class='rbracket'>]</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="aliases_for-class_method">
  
    + (<tt>Object</tt>) <strong>aliases_for</strong>(attribute) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/aliases.rb', line 39</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id aliases_for'>aliases_for</span> <span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id aliases'>aliases</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id params'>params</span><span class='op'>|</span>
    <span class='id pattern'>pattern</span><span class='comma'>,</span> <span class='id replace'>replace</span> <span class='op'>=</span> <span class='op'>*</span><span class='id params'>params</span>
    <span class='kw'>if</span> <span class='id pattern'>pattern</span><span class='period'>.</span><span class='id match'>match</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rparen'>)</span>
      <span class='id attribute'>attribute</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id sub'>sub</span><span class='lparen'>(</span><span class='id pattern'>pattern</span><span class='comma'>,</span> <span class='id replace'>replace</span><span class='rparen'>)</span><span class='period'>.</span><span class='id to_sym'>to_sym</span>
    <span class='kw'>else</span>
      <span class='kw'>nil</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span><span class='period'>.</span><span class='id compact'>compact</span> <span class='op'>&lt;&lt;</span> <span class='id attribute'>attribute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="attributes_for-class_method">
  
    + (<tt>Object</tt>) <strong>attributes_for</strong>(name, overrides = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Generates and returns a Hash of attributes from this factory. Attributes
can be individually overridden by passing in a Hash of attribute => value
pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.
</p>
</li>
<li><p>
overrides: <tt>Hash</tt> Attributes to overwrite for this set.
</p>
</li>
</ul>
<p>
Returns: <tt>Hash</tt> A set of attributes that can be used to build an
instance of the class this factory generates.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


233
234
235</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 233</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id attributes_for'>attributes_for</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='const'>Proxy</span><span class='op'>::</span><span class='const'>AttributesFor</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="build-class_method">
  
    + (<tt>Object</tt>) <strong>build</strong>(name, overrides = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Generates and returns an instance from this factory. Attributes can be
individually overridden by passing in a Hash of attribute => value pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.
</p>
</li>
<li><p>
overrides: <tt>Hash</tt> Attributes to overwrite for this instance.
</p>
</li>
</ul>
<p>
Returns: <tt>Object</tt> An instance of the class this factory generates,
with generated attributes assigned.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 249</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id build'>build</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='const'>Proxy</span><span class='op'>::</span><span class='const'>Build</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create-class_method">
  
    + (<tt>Object</tt>) <strong>create</strong>(name, overrides = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Generates, saves, and returns an instance from this factory. Attributes can
be individually overridden by passing in a Hash of attribute => value
pairs.
</p>
<p>
Instances are saved using the <tt>save!</tt> method, so ActiveRecord models
will raise ActiveRecord::RecordInvalid exceptions for invalid attribute
sets.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.
</p>
</li>
<li><p>
overrides: <tt>Hash</tt> Attributes to overwrite for this instance.
</p>
</li>
</ul>
<p>
Returns: <tt>Object</tt> A saved instance of the class this factory
generates, with generated attributes assigned.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


269
270
271</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 269</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id create'>create</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='const'>Proxy</span><span class='op'>::</span><span class='const'>Create</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_strategy-class_method">
  
    + (<tt>Object</tt>) <strong>default_strategy</strong>(name, overrides = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Executes the default strategy for the given factory. This is usually
create, but it can be overridden for each factory.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.
</p>
</li>
<li><p>
overrides: <tt>Hash</tt> Attributes to overwrite for this instance.
</p>
</li>
</ul>
<p>
Returns: <tt>Object</tt> The result of the default strategy.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 300</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id default_strategy'>default_strategy</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id send'>send</span><span class='lparen'>(</span><span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id default_strategy'>default_strategy</span><span class='comma'>,</span> <span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="define-class_method">
  
    + (<tt>Object</tt>) <strong>define</strong>(name, options = {}) {|instance| ... }
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Defines a new factory that can be used by the build strategies (create and
build) to build new objects.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> A unique name used to identify
this factory.
</p>
</li>
<li><p>
options: <tt>Hash</tt>
</p>
</li>
</ul>
<p>
Options:
</p>
<ul>
<li><p>
class: <tt>Symbol</tt>, <tt>Class</tt>, or <tt>String</tt> The class that
will be used when generating instances for this factory. If not specified,
the class will be guessed from the factory name.
</p>
</li>
<li><p>
parent: <tt>Symbol</tt> The parent factory. If specified, the attributes
from the parent factory will be copied to the current one with an ability
to override them.
</p>
</li>
<li><p>
default_strategy: <tt>Symbol</tt> The strategy that will be used by the
Factory shortcut method. Defaults to :create.
</p>
</li>
</ul>
<p>
Yields: <tt>Factory</tt> The newly created factory.
</p>


  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>instance</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


54
55
56
57
58
59
60
61
62
63
64</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 54</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id define'>define</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id instance'>instance</span> <span class='op'>=</span> <span class='const'>Factory</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
  <span class='kw'>yield</span><span class='lparen'>(</span><span class='id instance'>instance</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id parent'>parent</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:parent</span><span class='rparen'>)</span>
    <span class='id instance'>instance</span><span class='period'>.</span><span class='id inherit_from'>inherit_from</span><span class='lparen'>(</span><span class='const'>Factory</span><span class='period'>.</span><span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id parent'>parent</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>if</span> <span class='kw'>self</span><span class='period'>.</span><span class='id factories'>factories</span><span class='lbracket'>[</span><span class='id instance'>instance</span><span class='period'>.</span><span class='id factory_name'>factory_name</span><span class='rbracket'>]</span>
    <span class='id raise'>raise</span> <span class='const'>DuplicateDefinitionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Factory already defined: </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id factories'>factories</span><span class='lbracket'>[</span><span class='id instance'>instance</span><span class='period'>.</span><span class='id factory_name'>factory_name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id instance'>instance</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="factory_by_name-class_method">
  
    + (<tt>Object</tt>) <strong>factory_by_name</strong>(name) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


330
331
332</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 330</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id factory_by_name'>factory_by_name</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span>
  <span class='id factories'>factories</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rbracket'>]</span> <span class='kw'>or</span> <span class='id raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such factory: </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="find_definitions-class_method">
  
    + (<tt>Object</tt>) <strong>find_definitions</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


304
305
306
307
308
309
310
311
312
313
314
315</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 304</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id find_definitions'>find_definitions</span> <span class='comment'>#:nodoc:
</span>  <span class='id definition_file_paths'>definition_file_paths</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id path'>path</span><span class='op'>|</span>
    <span class='id full_path'>full_path</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id expand_path'>expand_path</span><span class='lparen'>(</span><span class='id path'>path</span><span class='rparen'>)</span>
    <span class='id require'>require</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id full_path'>full_path</span><span class='rbrace'>}</span><span class='tstring_content'>.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id exists?'>exists?</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id full_path'>full_path</span><span class='rbrace'>}</span><span class='tstring_content'>.rb</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='const'>File</span><span class='period'>.</span><span class='id directory?'>directory?</span><span class='lparen'>(</span><span class='id full_path'>full_path</span><span class='rparen'>)</span>
      <span class='const'>Dir</span><span class='lbracket'>[</span><span class='const'>File</span><span class='period'>.</span><span class='id join'>join</span><span class='lparen'>(</span><span class='id full_path'>full_path</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>*.rb</span><span class='tstring_end'>'</span></span><span class='rparen'>)</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id file'>file</span><span class='op'>|</span>
        <span class='id require'>require</span><span class='lparen'>(</span><span class='id file'>file</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="next-class_method">
  
    + (<tt>Object</tt>) <strong>next</strong>(sequence) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Generates and returns the next value in a sequence.
</p>
<p>
Arguments:
</p>
<pre class="code">
  name: (Symbol)
    The name of the sequence that a value should be generated for.
</pre>
<p>
Returns:
</p>
<pre class="code">
  The next value in the sequence. (Object)</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/sequence.rb', line 55</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='kw'>next</span> <span class='lparen'>(</span><span class='id sequence'>sequence</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sequences'>sequences</span><span class='period'>.</span><span class='id key?'>key?</span><span class='lparen'>(</span><span class='id sequence'>sequence</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>No such sequence: </span><span class='embexpr_beg'>#{</span><span class='id sequence'>sequence</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id sequences'>sequences</span><span class='lbracket'>[</span><span class='id sequence'>sequence</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id next'>next</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sequence-class_method">
  
    + (<tt>Object</tt>) <strong>sequence</strong>(name, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Defines a new sequence that can be used to generate unique values in a
specific format.
</p>
<p>
Arguments:
</p>
<pre class="code">
  name: (Symbol)
    A unique name for this sequence. This name will be referenced when
    calling next to generate new values from this sequence.
  block: (Proc)
    The code to generate each value in the sequence. This block will be
    called with a unique number each time a value in the sequence is to be
    generated. The block should return the generated value for the
    sequence.
</pre>
<p>
Example:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id sequence'>sequence</span><span class='lparen'>(</span><span class='symbol'>:email</span><span class='rparen'>)</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>somebody_</span><span class='embexpr_beg'>#{</span><span class='id n'>n</span><span class='rbrace'>}</span><span class='tstring_content'>@example.com</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span></pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


43
44
45</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/sequence.rb', line 43</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id sequence'>sequence</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id sequences'>sequences</span><span class='lbracket'>[</span><span class='id name'>name</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='const'>Sequence</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stub-class_method">
  
    + (<tt>Object</tt>) <strong>stub</strong>(name, overrides = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Generates and returns an object with all attributes from this factory
stubbed out. Attributes can be individually overridden by passing in a Hash
of attribute => value pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.
</p>
</li>
<li><p>
overrides: <tt>Hash</tt> Attributes to overwrite for this instance.
</p>
</li>
</ul>
<p>
Returns: <tt>Object</tt> An object with generated attributes stubbed out.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


285
286
287</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 285</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id stub'>stub</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id factory_by_name'>factory_by_name</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span><span class='period'>.</span><span class='id run'>run</span><span class='lparen'>(</span><span class='const'>Proxy</span><span class='op'>::</span><span class='const'>Stub</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_attribute-instance_method">
  
    - (<tt>Object</tt>) <strong>add_attribute</strong>(name, value = nil, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds an attribute that should be assigned on generated instances for this
factory.
</p>
<p>
This method should be called with either a value or block, but not both. If
called with a block, the attribute will be generated &#8220;lazily,&#8221;
whenever an instance is generated. Lazy attribute blocks will not be called
if that attribute is overridden for a specific instance.
</p>
<p>
When defining lazy attributes, an instance of Factory::Proxy will be
yielded, allowing associations to be built using the correct build
strategy.
</p>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> or <tt>String</tt> The name of this attribute. This
will be assigned using :&#8221;#name=&#8221; for generated instances.
</p>
</li>
<li><p>
value: <tt>Object</tt> If no block is given, this value will be used for
this attribute.
</p>
</li>
</ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 113</span>

<span class='kw'>def</span> <span class='id add_attribute'>add_attribute</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id value'>value</span> <span class='op'>=</span> <span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id block_given?'>block_given?</span>
    <span class='kw'>if</span> <span class='id value'>value</span>
      <span class='id raise'>raise</span> <span class='const'>AttributeDefinitionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Both value and block given</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id attribute'>attribute</span> <span class='op'>=</span> <span class='const'>Attribute</span><span class='op'>::</span><span class='const'>Dynamic</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id block'>block</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>else</span>
    <span class='id attribute'>attribute</span> <span class='op'>=</span> <span class='const'>Attribute</span><span class='op'>::</span><span class='const'>Static</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id value'>value</span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='kw'>if</span> <span class='id attribute_defined?'>attribute_defined?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>AttributeDefinitionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Attribute already defined: </span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>

  <span class='ivar'>@attributes</span> <span class='op'>&lt;&lt;</span> <span class='id attribute'>attribute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="after_build-instance_method">
  
    - (<tt>Object</tt>) <strong>after_build</strong>(&amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


201
202
203</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 201</span>

<span class='kw'>def</span> <span class='id after_build'>after_build</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id callback'>callback</span><span class='lparen'>(</span><span class='symbol'>:after_build</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="after_create-instance_method">
  
    - (<tt>Object</tt>) <strong>after_create</strong>(&amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 205</span>

<span class='kw'>def</span> <span class='id after_create'>after_create</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id callback'>callback</span><span class='lparen'>(</span><span class='symbol'>:after_create</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="after_stub-instance_method">
  
    - (<tt>Object</tt>) <strong>after_stub</strong>(&amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


209
210
211</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 209</span>

<span class='kw'>def</span> <span class='id after_stub'>after_stub</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id callback'>callback</span><span class='lparen'>(</span><span class='symbol'>:after_stub</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="association-instance_method">
  
    - (<tt>Object</tt>) <strong>association</strong>(name, options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds an attribute that builds an association. The associated instance will
be built using the same build strategy as the parent instance.
</p>
<p>
Example:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:user</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id name'>name</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>Joey</span><span class='tstring_end'>'</span></span>
  <span class='kw'>end</span>

  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:post</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
    <span class='id f'>f</span><span class='period'>.</span><span class='id association'>association</span> <span class='symbol'>:author</span><span class='comma'>,</span> <span class='symbol'>:factory</span> <span class='op'>=&gt;</span> <span class='symbol'>:user</span>
  <span class='kw'>end</span>
</pre>
<p>
Arguments:
</p>
<ul>
<li><p>
name: <tt>Symbol</tt> The name of this attribute.
</p>
</li>
<li><p>
options: <tt>Hash</tt>
</p>
</li>
</ul>
<p>
Options:
</p>
<ul>
<li><p>
factory: <tt>Symbol</tt> or <tt>String</tt>
</p>
<pre class="code">
 The name of the factory to use when building the associated instance.
 If no name is given, the name of the attribute is assumed to be the
 name of the factory. For example, a &quot;user&quot; association will by
 default use the &quot;user&quot; factory.</pre>
</li>
</ul>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 172</span>

<span class='kw'>def</span> <span class='id association'>association</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id factory_name'>factory_name</span> <span class='op'>=</span> <span class='id options'>options</span><span class='period'>.</span><span class='id delete'>delete</span><span class='lparen'>(</span><span class='symbol'>:factory</span><span class='rparen'>)</span> <span class='op'>||</span> <span class='id name'>name</span>
  <span class='kw'>if</span> <span class='id factory_name_for'>factory_name_for</span><span class='lparen'>(</span><span class='id factory_name'>factory_name</span><span class='rparen'>)</span> <span class='op'>==</span> <span class='kw'>self</span><span class='period'>.</span><span class='id factory_name'>factory_name</span>
    <span class='id raise'>raise</span> <span class='const'>AssociationDefinitionError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Self-referencing association '</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'>' in factory '</span><span class='embexpr_beg'>#{</span><span class='kw'>self</span><span class='period'>.</span><span class='id factory_name'>factory_name</span><span class='rbrace'>}</span><span class='tstring_content'>'</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='ivar'>@attributes</span> <span class='op'>&lt;&lt;</span> <span class='const'>Attribute</span><span class='op'>::</span><span class='const'>Association</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='id factory_name'>factory_name</span><span class='comma'>,</span> <span class='id options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="associations-instance_method">
  
    - (<tt>Object</tt>) <strong>associations</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


342
343
344</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 342</span>

<span class='kw'>def</span> <span class='id associations'>associations</span>
  <span class='id attributes'>attributes</span><span class='period'>.</span><span class='id select'>select</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span> <span class='id attribute'>attribute</span><span class='period'>.</span><span class='id is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Attribute</span><span class='op'>::</span><span class='const'>Association</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="build_class-instance_method">
  
    - (<tt>Object</tt>) <strong>build_class</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


70
71
72</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 70</span>

<span class='kw'>def</span> <span class='id build_class'>build_class</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@build_class</span> <span class='op'>||=</span> <span class='id class_for'>class_for</span><span class='lparen'>(</span><span class='id class_name'>class_name</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="callback-instance_method">
  
    - (<tt>Object</tt>) <strong>callback</strong>(name, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


213
214
215
216
217
218</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 213</span>

<span class='kw'>def</span> <span class='id callback'>callback</span><span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>unless</span> <span class='lbracket'>[</span><span class='symbol'>:after_build</span><span class='comma'>,</span> <span class='symbol'>:after_create</span><span class='comma'>,</span> <span class='symbol'>:after_stub</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='rparen'>)</span>
    <span class='id raise'>raise</span> <span class='const'>InvalidCallbackNameError</span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id name'>name</span><span class='rbrace'>}</span><span class='tstring_content'> is not a valid callback name. Valid callback names are :after_build, :after_create, and :after_stub</span><span class='tstring_end'>&quot;</span></span>
  <span class='kw'>end</span>
  <span class='ivar'>@attributes</span> <span class='op'>&lt;&lt;</span> <span class='const'>Attribute</span><span class='op'>::</span><span class='const'>Callback</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id name'>name</span><span class='period'>.</span><span class='id to_sym'>to_sym</span><span class='comma'>,</span> <span class='id block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="class_name-instance_method">
  
    - (<tt>Object</tt>) <strong>class_name</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


66
67
68</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 66</span>

<span class='kw'>def</span> <span class='id class_name'>class_name</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:class</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id factory_name'>factory_name</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="default_strategy-instance_method">
  
    - (<tt>Object</tt>) <strong>default_strategy</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 74</span>

<span class='kw'>def</span> <span class='id default_strategy'>default_strategy</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:default_strategy</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='symbol'>:create</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="human_name-instance_method">
  
    - (<tt>Object</tt>) <strong>human_name</strong>(*args, &amp;block) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


334
335
336
337
338
339
340</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 334</span>

<span class='kw'>def</span> <span class='id human_name'>human_name</span><span class='lparen'>(</span><span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>if</span> <span class='id args'>args</span><span class='period'>.</span><span class='id size'>size</span> <span class='op'>==</span> <span class='int'>0</span> <span class='op'>&amp;&amp;</span> <span class='id block'>block</span><span class='period'>.</span><span class='id nil?'>nil?</span>
    <span class='id factory_name'>factory_name</span><span class='period'>.</span><span class='id to_s'>to_s</span><span class='period'>.</span><span class='id gsub'>gsub</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'>_</span><span class='tstring_end'>'</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>'</span><span class='tstring_content'> </span><span class='tstring_end'>'</span></span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='id add_attribute'>add_attribute</span><span class='lparen'>(</span><span class='symbol'>:human_name</span><span class='comma'>,</span> <span class='op'>*</span><span class='id args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inherit_from-instance_method">
  
    - (<tt>Object</tt>) <strong>inherit_from</strong>(parent) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87
88
89
90
91
92
93</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 85</span>

<span class='kw'>def</span> <span class='id inherit_from'>inherit_from</span><span class='lparen'>(</span><span class='id parent'>parent</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:class</span><span class='rbracket'>]</span>            <span class='op'>||=</span> <span class='id parent'>parent</span><span class='period'>.</span><span class='id class_name'>class_name</span>
  <span class='ivar'>@options</span><span class='lbracket'>[</span><span class='symbol'>:default_strategy</span><span class='rbracket'>]</span> <span class='op'>||=</span> <span class='id parent'>parent</span><span class='period'>.</span><span class='id default_strategy'>default_strategy</span>
  <span class='id parent'>parent</span><span class='period'>.</span><span class='id attributes'>attributes</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id attribute_defined?'>attribute_defined?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span>
      <span class='ivar'>@attributes</span> <span class='op'>&lt;&lt;</span> <span class='id attribute'>attribute</span><span class='period'>.</span><span class='id clone'>clone</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt>Object</tt>) <strong>run</strong>(proxy_class, overrides) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320
321
322
323
324
325
326
327
328</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 317</span>

<span class='kw'>def</span> <span class='id run'>run</span> <span class='lparen'>(</span><span class='id proxy_class'>proxy_class</span><span class='comma'>,</span> <span class='id overrides'>overrides</span><span class='rparen'>)</span> <span class='comment'>#:nodoc:
</span>  <span class='id proxy'>proxy</span> <span class='op'>=</span> <span class='id proxy_class'>proxy_class</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='id build_class'>build_class</span><span class='rparen'>)</span>
  <span class='id overrides'>overrides</span> <span class='op'>=</span> <span class='id symbolize_keys'>symbolize_keys</span><span class='lparen'>(</span><span class='id overrides'>overrides</span><span class='rparen'>)</span>
  <span class='id overrides'>overrides</span><span class='period'>.</span><span class='id each'>each</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='op'>|</span> <span class='id proxy'>proxy</span><span class='period'>.</span><span class='id set'>set</span><span class='lparen'>(</span><span class='id attr'>attr</span><span class='comma'>,</span> <span class='id val'>val</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='id passed_keys'>passed_keys</span> <span class='op'>=</span> <span class='id overrides'>overrides</span><span class='period'>.</span><span class='id keys'>keys</span><span class='period'>.</span><span class='id collect'>collect</span> <span class='lbrace'>{</span><span class='op'>|</span><span class='id k'>k</span><span class='op'>|</span> <span class='const'>Factory</span><span class='period'>.</span><span class='id aliases_for'>aliases_for</span><span class='lparen'>(</span><span class='id k'>k</span><span class='rparen'>)</span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id flatten'>flatten</span>
  <span class='ivar'>@attributes</span><span class='period'>.</span><span class='id each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id attribute'>attribute</span><span class='op'>|</span>
    <span class='kw'>unless</span> <span class='id passed_keys'>passed_keys</span><span class='period'>.</span><span class='id include?'>include?</span><span class='lparen'>(</span><span class='id attribute'>attribute</span><span class='period'>.</span><span class='id name'>name</span><span class='rparen'>)</span>
      <span class='id attribute'>attribute</span><span class='period'>.</span><span class='id add_to'>add_to</span><span class='lparen'>(</span><span class='id proxy'>proxy</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='id proxy'>proxy</span><span class='period'>.</span><span class='id result'>result</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="sequence-instance_method">
  
    - (<tt>Object</tt>) <strong>sequence</strong>(name, &amp;block) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds an attribute that will have unique values generated by a sequence with
a specified format.
</p>
<p>
The result of:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:user</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
   <span class='id f'>f</span><span class='period'>.</span><span class='id sequence'>sequence</span><span class='lparen'>(</span><span class='symbol'>:email</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person</span><span class='embexpr_beg'>#{</span><span class='id n'>n</span><span class='rbrace'>}</span><span class='tstring_content'>@example.com</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
</pre>
<p>
Is equal to:
</p>
<pre class="code">
  <span class='const'>Factory</span><span class='period'>.</span><span class='id sequence'>sequence</span><span class='lparen'>(</span><span class='symbol'>:email</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='op'>|</span><span class='id n'>n</span><span class='op'>|</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>person</span><span class='embexpr_beg'>#{</span><span class='id n'>n</span><span class='rbrace'>}</span><span class='tstring_content'>@example.com</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>

  <span class='const'>Factory</span><span class='period'>.</span><span class='id define'>define</span> <span class='symbol'>:user</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id f'>f</span><span class='op'>|</span>
   <span class='id f'>f</span><span class='period'>.</span><span class='id email'>email</span> <span class='lbrace'>{</span> <span class='const'>Factory</span><span class='period'>.</span><span class='id next'>next</span><span class='lparen'>(</span><span class='symbol'>:email</span><span class='rparen'>)</span> <span class='rbrace'>}</span>
  <span class='kw'>end</span>
</pre>
<p>
Except that no globally available sequence will be defined.
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/factory_girl/factory.rb', line 196</span>

<span class='kw'>def</span> <span class='id sequence'>sequence</span> <span class='lparen'>(</span><span class='id name'>name</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id s'>s</span> <span class='op'>=</span> <span class='const'>Sequence</span><span class='period'>.</span><span class='id new'>new</span><span class='lparen'>(</span><span class='op'>&amp;</span><span class='id block'>block</span><span class='rparen'>)</span>
  <span class='id add_attribute'>add_attribute</span><span class='lparen'>(</span><span class='id name'>name</span><span class='rparen'>)</span> <span class='lbrace'>{</span> <span class='id s'>s</span><span class='period'>.</span><span class='id next'>next</span> <span class='rbrace'>}</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 19:01:31 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>