  <div id="C00000001">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Factory<br/>
  In:
<a href="#" onclick="jsHref('files/lib/factory_girl/aliases_rb.html');">lib/factory_girl/aliases.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/attribute/association_rb.html');">lib/factory_girl/attribute/association.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/attribute/callback_rb.html');">lib/factory_girl/attribute/callback.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/attribute/dynamic_rb.html');">lib/factory_girl/attribute/dynamic.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/attribute/static_rb.html');">lib/factory_girl/attribute/static.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/attribute_rb.html');">lib/factory_girl/attribute.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/factory_rb.html');">lib/factory_girl/factory.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/proxy/attributes_for_rb.html');">lib/factory_girl/proxy/attributes_for.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/proxy/build_rb.html');">lib/factory_girl/proxy/build.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/proxy/create_rb.html');">lib/factory_girl/proxy/create.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/proxy/stub_rb.html');">lib/factory_girl/proxy/stub.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/proxy_rb.html');">lib/factory_girl/proxy.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/sequence_rb.html');">lib/factory_girl/sequence.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/syntax/blueprint_rb.html');">lib/factory_girl/syntax/blueprint.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/syntax/generate_rb.html');">lib/factory_girl/syntax/generate.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/syntax/make_rb.html');">lib/factory_girl/syntax/make.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/syntax/sham_rb.html');">lib/factory_girl/syntax/sham.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl/syntax_rb.html');">lib/factory_girl/syntax.rb</a>
<a href="#" onclick="jsHref('files/lib/factory_girl_rb.html');">lib/factory_girl.rb</a>

Parent:&nbsp;
Object
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000008&name=add_attribute" >add_attribute</a></li>
  <li><a href="index.html?a=M000012&name=after_build" >after_build</a></li>
  <li><a href="index.html?a=M000013&name=after_create" >after_create</a></li>
  <li><a href="index.html?a=M000014&name=after_stub" >after_stub</a></li>
  <li><a href="index.html?a=M000006&name=alias" >alias</a></li>
  <li><a href="index.html?a=M000010&name=association" >association</a></li>
  <li><a href="index.html?a=M000023&name=associations" >associations</a></li>
  <li><a href="index.html?a=M000016&name=attributes_for" >attributes_for</a></li>
  <li><a href="index.html?a=M000017&name=build" >build</a></li>
  <li><a href="index.html?a=M000015&name=callback" >callback</a></li>
  <li><a href="index.html?a=M000018&name=create" >create</a></li>
  <li><a href="index.html?a=M000020&name=default_strategy" >default_strategy</a></li>
  <li><a href="index.html?a=M000007&name=define" >define</a></li>
  <li><a href="index.html?a=M000021&name=factory_by_name" >factory_by_name</a></li>
  <li><a href="index.html?a=M000022&name=human_name" >human_name</a></li>
  <li><a href="index.html?a=M000009&name=method_missing" >method_missing</a></li>
  <li><a href="index.html?a=M000025&name=next" >next</a></li>
  <li><a href="index.html?a=M000011&name=sequence" >sequence</a></li>
  <li><a href="index.html?a=M000024&name=sequence" >sequence</a></li>
  <li><a href="index.html?a=M000019&name=stub" >stub</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Module "<a href="#" onclick="jsHref('classes/Factory/Syntax.html');" class="link">Factory::Syntax</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/AssociationDefinitionError.html');" class="link">Factory::AssociationDefinitionError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/AttributeDefinitionError.html');" class="link">Factory::AttributeDefinitionError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/DuplicateDefinitionError.html');" class="link">Factory::DuplicateDefinitionError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/InvalidCallbackNameError.html');" class="link">Factory::InvalidCallbackNameError</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/Sequence.html');" class="link">Factory::Sequence</a>"<br />
Class "<a href="#" onclick="jsHref('classes/Factory/SequenceAbuseError.html');" class="link">Factory::SequenceAbuseError</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">VERSION</td>
    <td>=</td>
    <td class="attr-value">&quot;1.3.1&quot;</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>definition_file_paths</td>
    <td class='attr-desc'>
An Array of strings specifying locations that should be searched for
factory definitions. By default, factory_girl will attempt to require
&quot;factories,&quot; &quot;test/factories,&quot; and
&quot;spec/factories.&quot; Only the first existing file will be loaded.

</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M000006" class="method">
  <div id="M000006_title" class="title">
    <b>alias</b>(pattern, replace)
  </div>
  <div class="description">
  <p>
Defines a new alias for attributes.
</p>
<p>
Arguments:
</p>
<ul>
<li>pattern: <tt>Regexp</tt> A pattern that will be matched against attributes
when looking for aliases. Contents captured in the pattern can be used in
the alias.

</li>
<li>replace: <tt>String</tt> The alias that results from the matched pattern.
Captured strings can be substituted like with +String#sub+.

</li>
</ul>
<p>
Example:
</p>
<pre>
  Factory.alias /(.*)_confirmation/, '\1'
</pre>
<p>
factory_girl starts with aliases for foreign keys, so that a :user
association can be overridden by a :user_id parameter:
</p>
<pre>
  Factory.define :post do |p|
    p.association :user
  end

  # The user association will not be built in this example. The user_id
  # will be used instead.
  Factory(:post, :user_id =&gt; 1)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000006_source')" id="l_M000006_source">show source</a> ]</p>
  <div id="M000006_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/factory_girl/aliases.rb, line 35</span>
35:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-keyword kw">alias</span> (<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">replace</span>)
36:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">aliases</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">replace</span>]
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000016" class="method">
  <div id="M000016_title" class="title">
    <b>attributes_for</b>(name, overrides = {})
  </div>
  <div class="description">
  <p>
Generates and returns a Hash of attributes from this factory. Attributes
can be individually overridden by passing in a Hash of attribute =&gt;
value pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.

</li>
<li>overrides: <tt>Hash</tt> Attributes to overwrite for this set.

</li>
</ul>
<p>
Returns: <tt>Hash</tt> A set of attributes that can be used to build an
instance of the class this factory generates.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000016_source')" id="l_M000016_source">show source</a> ]</p>
  <div id="M000016_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 233</span>
233:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">attributes_for</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span> = {})
234:     <span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">run</span>(<span class="ruby-constant">Proxy</span><span class="ruby-operator">::</span><span class="ruby-constant">AttributesFor</span>, <span class="ruby-identifier">overrides</span>)
235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000017" class="method">
  <div id="M000017_title" class="title">
    <b>build</b>(name, overrides = {})
  </div>
  <div class="description">
  <p>
Generates and returns an instance from this factory. Attributes can be
individually overridden by passing in a Hash of attribute =&gt; value
pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.

</li>
<li>overrides: <tt>Hash</tt> Attributes to overwrite for this instance.

</li>
</ul>
<p>
Returns: <tt>Object</tt> An instance of the class this factory generates,
with generated attributes assigned.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000017_source')" id="l_M000017_source">show source</a> ]</p>
  <div id="M000017_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 249</span>
249:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">build</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span> = {})
250:     <span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">run</span>(<span class="ruby-constant">Proxy</span><span class="ruby-operator">::</span><span class="ruby-constant">Build</span>, <span class="ruby-identifier">overrides</span>)
251:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000018" class="method">
  <div id="M000018_title" class="title">
    <b>create</b>(name, overrides = {})
  </div>
  <div class="description">
  <p>
Generates, saves, and returns an instance from this factory. Attributes can
be individually overridden by passing in a Hash of attribute =&gt; value
pairs.
</p>
<p>
Instances are saved using the +save!+ method, so ActiveRecord models will
raise ActiveRecord::RecordInvalid exceptions for invalid attribute sets.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.

</li>
<li>overrides: <tt>Hash</tt> Attributes to overwrite for this instance.

</li>
</ul>
<p>
Returns: <tt>Object</tt> A saved instance of the class this factory
generates, with generated attributes assigned.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show source</a> ]</p>
  <div id="M000018_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 269</span>
269:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">create</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span> = {})
270:     <span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">run</span>(<span class="ruby-constant">Proxy</span><span class="ruby-operator">::</span><span class="ruby-constant">Create</span>, <span class="ruby-identifier">overrides</span>)
271:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000020" class="method">
  <div id="M000020_title" class="title">
    <b>default_strategy</b>(name, overrides = {})
  </div>
  <div class="description">
  <p>
Executes the default strategy for the given factory. This is usually
create, but it can be overridden for each factory.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.

</li>
<li>overrides: <tt>Hash</tt> Attributes to overwrite for this instance.

</li>
</ul>
<p>
Returns: <tt>Object</tt> The result of the default strategy.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000020_source')" id="l_M000020_source">show source</a> ]</p>
  <div id="M000020_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 300</span>
300:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">default_strategy</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span> = {})
301:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">default_strategy</span>, <span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span>)
302:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000007" class="method">
  <div id="M000007_title" class="title">
    <b>define</b>(name, options = {}) {|instance| ...}
  </div>
  <div class="description">
  <p>
Defines a new factory that can be used by the build strategies (create and
build) to build new objects.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> A unique name used to identify
this factory.

</li>
<li>options: <tt>Hash</tt>

</li>
</ul>
<p>
Options:
</p>
<ul>
<li>class: <tt>Symbol</tt>, <tt>Class</tt>, or <tt>String</tt> The class that
will be used when generating instances for this factory. If not specified,
the class will be guessed from the factory name.

</li>
<li>parent: <tt>Symbol</tt> The parent factory. If specified, the attributes
from the parent factory will be copied to the current one with an ability
to override them.

</li>
<li><a href="index.html?a=M000020&name=default_strategy">default_strategy</a>:
<tt>Symbol</tt> The strategy that will be used by the <a
href="index.html?a=C00000001&name=Factory">Factory</a> shortcut method.
Defaults to :create.

</li>
</ul>
<p>
Yields: <tt><a href="index.html?a=C00000001&name=Factory">Factory</a></tt>
The newly created factory.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show source</a> ]</p>
  <div id="M000007_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 54</span>
54:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">define</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
55:     <span class="ruby-identifier">instance</span> = <span class="ruby-constant">Factory</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span>)
56:     <span class="ruby-keyword kw">yield</span>(<span class="ruby-identifier">instance</span>)
57:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">parent</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:parent</span>)
58:       <span class="ruby-identifier">instance</span>.<span class="ruby-identifier">inherit_from</span>(<span class="ruby-constant">Factory</span>.<span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">parent</span>))
59:     <span class="ruby-keyword kw">end</span>
60:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">factories</span>[<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">factory_name</span>]
61:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">DuplicateDefinitionError</span>, <span class="ruby-node">&quot;Factory already defined: #{name}&quot;</span>
62:     <span class="ruby-keyword kw">end</span>
63:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">factories</span>[<span class="ruby-identifier">instance</span>.<span class="ruby-identifier">factory_name</span>] = <span class="ruby-identifier">instance</span>
64:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000021" class="method">
  <div id="M000021_title" class="title">
    <b>factory_by_name</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show source</a> ]</p>
  <div id="M000021_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 329</span>
329:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">factory_by_name</span> (<span class="ruby-identifier">name</span>)
330:     <span class="ruby-identifier">factories</span>[<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>] <span class="ruby-keyword kw">or</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;No such factory: #{name.to_s}&quot;</span>)
331:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000025" class="method">
  <div id="M000025_title" class="title">
    <b>next</b>(sequence)
  </div>
  <div class="description">
  <p>
Generates and returns the next value in a sequence.
</p>
<p>
Arguments:
</p>
<pre>
  name: (Symbol)
    The name of the sequence that a value should be generated for.
</pre>
<p>
Returns:
</p>
<pre>
  The next value in the sequence. (Object)
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show source</a> ]</p>
  <div id="M000025_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/factory_girl/sequence.rb, line 55</span>
55:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-keyword kw">next</span> (<span class="ruby-identifier">sequence</span>)
56:     <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sequences</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-identifier">sequence</span>)
57:       <span class="ruby-identifier">raise</span> <span class="ruby-node">&quot;No such sequence: #{sequence}&quot;</span>
58:     <span class="ruby-keyword kw">end</span>
59: 
60:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sequences</span>[<span class="ruby-identifier">sequence</span>].<span class="ruby-identifier">next</span>
61:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000024" class="method">
  <div id="M000024_title" class="title">
    <b>sequence</b>(name, &amp;block)
  </div>
  <div class="description">
  <p>
Defines a new sequence that can be used to generate unique values in a
specific format.
</p>
<p>
Arguments:
</p>
<pre>
  name: (Symbol)
    A unique name for this sequence. This name will be referenced when
    calling next to generate new values from this sequence.
  block: (Proc)
    The code to generate each value in the sequence. This block will be
    called with a unique number each time a value in the sequence is to be
    generated. The block should return the generated value for the
    sequence.
</pre>
<p>
Example:
</p>
<pre>
  Factory.sequence(:email) {|n| &quot;somebody_#{n}@example.com&quot; }
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000024_source')" id="l_M000024_source">show source</a> ]</p>
  <div id="M000024_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/factory_girl/sequence.rb, line 43</span>
43:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sequence</span> (<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
44:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">sequences</span>[<span class="ruby-identifier">name</span>] = <span class="ruby-constant">Sequence</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
45:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000019" class="method">
  <div id="M000019_title" class="title">
    <b>stub</b>(name, overrides = {})
  </div>
  <div class="description">
  <p>
Generates and returns an object with all attributes from this factory
stubbed out. Attributes can be individually overridden by passing in a Hash
of attribute =&gt; value pairs.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of the factory that
should be used.

</li>
<li>overrides: <tt>Hash</tt> Attributes to overwrite for this instance.

</li>
</ul>
<p>
Returns: <tt>Object</tt> An object with generated attributes stubbed out.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show source</a> ]</p>
  <div id="M000019_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">stub</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">overrides</span> = {})
286:     <span class="ruby-identifier">factory_by_name</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">run</span>(<span class="ruby-constant">Proxy</span><span class="ruby-operator">::</span><span class="ruby-constant">Stub</span>, <span class="ruby-identifier">overrides</span>)
287:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000008" class="method">
  <div id="M000008_title" class="title">
    <b>add_attribute</b>(name, value = nil, &amp;block)
  </div>
  <div class="description">
  <p>
Adds an attribute that should be assigned on generated instances for this
factory.
</p>
<p>
This method should be called with either a value or block, but not both. If
called with a block, the attribute will be generated &quot;lazily,&quot;
whenever an instance is generated. Lazy attribute blocks will not be called
if that attribute is overridden for a specific instance.
</p>
<p>
When defining lazy attributes, an instance of Factory::Proxy will be
yielded, allowing associations to be built using the correct build
strategy.
</p>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> or <tt>String</tt> The name of this attribute. This
will be assigned using :&quot;#{name}=&quot; for generated instances.

</li>
<li>value: <tt>Object</tt> If no block is given, this value will be used for
this attribute.

</li>
</ul>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000008_source')" id="l_M000008_source">show source</a> ]</p>
  <div id="M000008_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 113</span>
113:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_attribute</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
114:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
115:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">value</span>
116:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">AttributeDefinitionError</span>, <span class="ruby-value str">&quot;Both value and block given&quot;</span>
117:       <span class="ruby-keyword kw">else</span>
118:         <span class="ruby-identifier">attribute</span> = <span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">Dynamic</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">block</span>)
119:       <span class="ruby-keyword kw">end</span>
120:     <span class="ruby-keyword kw">else</span>
121:       <span class="ruby-identifier">attribute</span> = <span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">Static</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">value</span>)
122:     <span class="ruby-keyword kw">end</span>
123: 
124:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">attribute_defined?</span>(<span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">name</span>)
125:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AttributeDefinitionError</span>, <span class="ruby-node">&quot;Attribute already defined: #{name}&quot;</span>
126:     <span class="ruby-keyword kw">end</span>
127: 
128:     <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">attribute</span>
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000012" class="method">
  <div id="M000012_title" class="title">
    <b>after_build</b>(&amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000012_source')" id="l_M000012_source">show source</a> ]</p>
  <div id="M000012_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 201</span>
201:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_build</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
202:     <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_build</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
203:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000013" class="method">
  <div id="M000013_title" class="title">
    <b>after_create</b>(&amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000013_source')" id="l_M000013_source">show source</a> ]</p>
  <div id="M000013_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_create</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
206:     <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_create</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
207:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000014" class="method">
  <div id="M000014_title" class="title">
    <b>after_stub</b>(&amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000014_source')" id="l_M000014_source">show source</a> ]</p>
  <div id="M000014_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 209</span>
209:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">after_stub</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
210:     <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">:after_stub</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
211:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000010" class="method">
  <div id="M000010_title" class="title">
    <b>association</b>(name, options = {})
  </div>
  <div class="description">
  <p>
Adds an attribute that builds an association. The associated instance will
be built using the same build strategy as the parent instance.
</p>
<p>
Example:
</p>
<pre>
  Factory.define :user do |f|
    f.name 'Joey'
  end

  Factory.define :post do |f|
    f.association :author, :factory =&gt; :user
  end
</pre>
<p>
Arguments:
</p>
<ul>
<li>name: <tt>Symbol</tt> The name of this attribute.

</li>
<li>options: <tt>Hash</tt>

</li>
</ul>
<p>
Options:
</p>
<ul>
<li>factory: <tt>Symbol</tt> or <tt>String</tt>

<pre>
 The name of the factory to use when building the associated instance.
 If no name is given, the name of the attribute is assumed to be the
 name of the factory. For example, a &quot;user&quot; association will by
 default use the &quot;user&quot; factory.
</pre>
</li>
</ul>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000010_source')" id="l_M000010_source">show source</a> ]</p>
  <div id="M000010_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 172</span>
172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">association</span> (<span class="ruby-identifier">name</span>, <span class="ruby-identifier">options</span> = {})
173:     <span class="ruby-identifier">factory_name</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:factory</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">name</span>
174:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">factory_name_for</span>(<span class="ruby-identifier">factory_name</span>) <span class="ruby-operator">==</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">factory_name</span>
175:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">AssociationDefinitionError</span>, <span class="ruby-node">&quot;Self-referencing association '#{name}' in factory '#{self.factory_name}'&quot;</span>
176:     <span class="ruby-keyword kw">end</span>
177:     <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">Association</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">factory_name</span>, <span class="ruby-identifier">options</span>)
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000023" class="method">
  <div id="M000023_title" class="title">
    <b>associations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show source</a> ]</p>
  <div id="M000023_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 341</span>
341:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">associations</span>
342:     <span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">attribute</span><span class="ruby-operator">|</span> <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">Association</span>) }
343:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000015" class="method">
  <div id="M000015_title" class="title">
    <b>callback</b>(name, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show source</a> ]</p>
  <div id="M000015_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 213</span>
213:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">callback</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
214:     <span class="ruby-keyword kw">unless</span> [<span class="ruby-identifier">:after_build</span>, <span class="ruby-identifier">:after_create</span>, <span class="ruby-identifier">:after_stub</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>)
215:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">InvalidCallbackNameError</span>, <span class="ruby-node">&quot;#{name} is not a valid callback name. Valid callback names are :after_build, :after_create, and :after_stub&quot;</span>
216:     <span class="ruby-keyword kw">end</span>
217:     <span class="ruby-ivar">@attributes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Attribute</span><span class="ruby-operator">::</span><span class="ruby-constant">Callback</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>.<span class="ruby-identifier">to_sym</span>, <span class="ruby-identifier">block</span>)
218:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000022" class="method">
  <div id="M000022_title" class="title">
    <b>human_name</b>(*args, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show source</a> ]</p>
  <div id="M000022_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 333</span>
333:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">human_name</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
334:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">args</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">0</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">block</span>.<span class="ruby-identifier">nil?</span>
335:       <span class="ruby-identifier">factory_name</span>.<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-value str">'_'</span>, <span class="ruby-value str">' '</span>)
336:     <span class="ruby-keyword kw">else</span>
337:       <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">:human_name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
338:     <span class="ruby-keyword kw">end</span>
339:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000009" class="method">
  <div id="M000009_title" class="title">
    <b>method_missing</b>(name, *args, &amp;block)
  </div>
  <div class="description">
  <p>
Calls <a href="index.html?a=M000008&name=add_attribute">add_attribute</a>
using the missing method name as the name of the attribute, so that:
</p>
<pre>
  Factory.define :user do |f|
    f.name 'Billy Idol'
  end
</pre>
<p>
and:
</p>
<pre>
  Factory.define :user do |f|
    f.add_attribute :name, 'Billy Idol'
  end
</pre>
<p>
are equivilent.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000009_source')" id="l_M000009_source">show source</a> ]</p>
  <div id="M000009_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">method_missing</span> (<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
146:     <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">*</span><span class="ruby-identifier">args</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
147:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000011" class="method">
  <div id="M000011_title" class="title">
    <b>sequence</b>(name, &amp;block)
  </div>
  <div class="description">
  <p>
Adds an attribute that will have unique values generated by a sequence with
a specified format.
</p>
<p>
The result of:
</p>
<pre>
  Factory.define :user do |f|
   f.sequence(:email) { |n| &quot;person#{n}@example.com&quot; }
  end
</pre>
<p>
Is equal to:
</p>
<pre>
  Factory.sequence(:email) { |n| &quot;person#{n}@example.com&quot; }

  Factory.define :user do |f|
   f.email { Factory.next(:email) }
  end
</pre>
<p>
Except that no globally available sequence will be defined.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000011_source')" id="l_M000011_source">show source</a> ]</p>
  <div id="M000011_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/factory_girl/factory.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">sequence</span> (<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
197:     <span class="ruby-identifier">s</span> = <span class="ruby-constant">Sequence</span>.<span class="ruby-identifier">new</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
198:     <span class="ruby-identifier">add_attribute</span>(<span class="ruby-identifier">name</span>) { <span class="ruby-identifier">s</span>.<span class="ruby-identifier">next</span> }
199:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>