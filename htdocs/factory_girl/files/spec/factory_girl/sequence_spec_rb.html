  <div id="fileHeader">
    <h1>sequence_spec.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>spec/factory_girl/sequence_spec.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 20:17:10 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'spec_helper'

describe Factory::Sequence do
  describe &quot;a sequence&quot; do
    before do
      @sequence = Factory::Sequence.new {|n| &quot;=#{n}&quot; }
    end

    it &quot;should start with a value of 1&quot; do
      @sequence.next.should == &quot;=1&quot;
    end

    describe &quot;after being called&quot; do
      before do
        @sequence.next
      end

      it &quot;should use the next value&quot; do
        @sequence.next.should == &quot;=2&quot;
      end
    end
  end

  describe &quot;defining a sequence&quot; do
    before do
      @sequence = &quot;sequence&quot;
      @name     = :count
      stub(Factory::Sequence).new { @sequence }
    end

    it &quot;should create a new sequence&quot; do
      mock(Factory::Sequence).new() { @sequence }
      Factory.sequence(@name)
    end

    it &quot;should use the supplied block as the sequence generator&quot; do
      stub(Factory::Sequence).new.yields(1)
      yielded = false
      Factory.sequence(@name) {|n| yielded = true }
      (yielded).should be
    end
  end

  describe &quot;after defining a sequence&quot; do
    before do
      @sequence = &quot;sequence&quot;
      @name     = :test
      @value    = '1 2 5'

      stub(@sequence).next { @value }
      stub(Factory::Sequence).new { @sequence }

      Factory.sequence(@name) {}
    end

    it &quot;should call next on the sequence when sent next&quot; do
      mock(@sequence).next

      Factory.next(@name)
    end

    it &quot;should return the value from the sequence&quot; do
      Factory.next(@name).should == @value
    end
  end
end
</pre>
    </div>