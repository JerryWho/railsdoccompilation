<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Thread</title>
<link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (T)</a> &raquo; 
    
    
    <span class="title">Thread</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Thread
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Thread</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">vm.c</dd>
  
</dl>
<div class="clear"></div>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort_on_exception-class_method" title="abort_on_exception (class method)">+ (Boolean) <strong>abort_on_exception</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the status of the global ``abort on exception&#8217;&#8217;
condition.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort_on_exception%3D-class_method" title="abort_on_exception= (class method)">+ (Boolean) <strong>abort_on_exception=</strong>(boolean) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
When set to <tt>true</tt>, all threads will abort if an exception is
raised.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#current-class_method" title="current (class method)">+ (Object) <strong>current</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the currently executing thread.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#DEBUG-class_method" title="DEBUG (class method)">+ (Numeric) <strong>DEBUG</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the thread debug level.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#DEBUG%3D-class_method" title="DEBUG= (class method)">+ (Object) <strong>DEBUG=</strong>(num) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the thread debug level.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exit-class_method" title="exit (class method)">+ (Object) <strong>exit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Terminates the currently running thread and schedules another thread to be
run.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#fork-class_method" title="fork (class method)">+ (Object) <strong>fork</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Basically the same as <tt>Thread::new</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill-class_method" title="kill (class method)">+ (Object) <strong>kill</strong>(thread) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Causes the given <em>thread</em> to exit (see <tt>Thread::exit</tt>).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#list-class_method" title="list (class method)">+ (Array) <strong>list</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an array of <tt>Thread</tt> objects for all threads that are either
runnable or stopped.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#main-class_method" title="main (class method)">+ (Object) <strong>main</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the main thread.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#new-class_method" title="new (class method)">+ (Object) <strong>new</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pass-class_method" title="pass (class method)">+ (nil) <strong>pass</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Invokes the thread scheduler to pass execution to another thread.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#start-class_method" title="start (class method)">+ (Object) <strong>start</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Basically the same as <tt>Thread::new</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop-class_method" title="stop (class method)">+ (nil) <strong>stop</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Stops execution of the current thread, putting it into a
``sleep&#8217;&#8217; state, and schedules execution of another thread.
</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Object<sup>?</sup>) <strong>[]</strong>(sym) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attribute Reference--Returns the value of a thread-local variable,
using either a symbol or a string name.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(sym) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Attribute Assignment--Sets or creates the value of a thread-local
variable, using either a symbol or a string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort_on_exception-instance_method" title="#abort_on_exception (instance method)">- (Boolean) <strong>abort_on_exception</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the status of the thread-local ``abort on exception&#8217;&#8217;
condition for <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#abort_on_exception%3D-instance_method" title="#abort_on_exception= (instance method)">- (Boolean) <strong>abort_on_exception=</strong>(boolean) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
When set to <tt>true</tt>, causes all threads (including the main program)
to abort if an exception is raised in <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_trace_func-instance_method" title="#add_trace_func (instance method)">- (Proc) <strong>add_trace_func</strong>(proc) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Adds <em>proc</em> as a handler for tracing.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#alive%3F-instance_method" title="#alive? (instance method)">- (Boolean) <strong>alive?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if <em>thr</em> is running or sleeping.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#backtrace-instance_method" title="#backtrace (instance method)">- (Array) <strong>backtrace</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the current back trace of the <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#exit-instance_method" title="#exit (instance method)">- (Object) <strong>exit</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Terminates <em>thr</em> and schedules another thread to be run.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#group-instance_method" title="#group (instance method)">- (nil) <strong>group</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the <tt>ThreadGroup</tt> which contains <em>thr</em>, or nil if the
thread is not a member of any group.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Object) <strong>initialize</strong> </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
:nodoc:.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (String) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Dump the name, id, and status of <em>thr</em> to a string.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#join-instance_method" title="#join (instance method)">- (Object) <strong>join</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
The calling thread will suspend execution and run <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key%3F-instance_method" title="#key? (instance method)">- (Boolean) <strong>key?</strong>(sym) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if the given string (or symbol) exists as a
thread-local variable.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#keys-instance_method" title="#keys (instance method)">- (Array) <strong>keys</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns an an array of the names of the thread-local variables (as
Symbols).
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill-instance_method" title="#kill (instance method)">- (Object) <strong>kill</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Terminates <em>thr</em> and schedules another thread to be run.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#priority-instance_method" title="#priority (instance method)">- (Integer) <strong>priority</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the priority of <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#priority%3D-instance_method" title="#priority= (instance method)">- (Object) <strong>priority=</strong>(integer) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Sets the priority of <em>thr</em> to <em>integer</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#raise-instance_method" title="#raise (instance method)">- (Object) <strong>raise</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Raises an exception (see <tt>Kernel::raise</tt>) from <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Wakes up <em>thr</em>, making it eligible for scheduling.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#safe_level-instance_method" title="#safe_level (instance method)">- (Integer) <strong>safe_level</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the safe level in effect for <em>thr</em>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_trace_func-instance_method" title="#set_trace_func (instance method)">- (Object) <strong>set_trace_func</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Establishes <em>proc</em> on <em>thr</em> as the handler for tracing, or
disables tracing if the parameter is <tt>nil</tt>.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#status-instance_method" title="#status (instance method)">- (String, ...) <strong>status</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns the status of <em>thr</em>: ``<tt>sleep</tt>&#8217;&#8217; if
<em>thr</em> is sleeping or waiting on I/O, ``<tt>run</tt>&#8217;&#8217; if
<em>thr</em> is executing, ``<tt>aborting</tt>&#8217;&#8217; if
<em>thr</em> is aborting, <tt>false</tt> if <em>thr</em> terminated
normally, and <tt>nil</tt> if <em>thr</em> terminated with an exception.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stop%3F-instance_method" title="#stop? (instance method)">- (Boolean) <strong>stop?</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Returns <tt>true</tt> if <em>thr</em> is dead or sleeping.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">- (Object) <strong>terminate</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Terminates <em>thr</em> and schedules another thread to be run.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value-instance_method" title="#value (instance method)">- (Object) <strong>value</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Waits for <em>thr</em> to complete (via <tt>Thread#join</tt>) and returns
its value.
</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wakeup-instance_method" title="#wakeup (instance method)">- (Object) <strong>wakeup</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>
Marks <em>thr</em> as eligible for scheduling (it may still remain blocked
on I/O, however).
</p>
</div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>initialize</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/* :nodoc: */
static VALUE
thread_initialize(VALUE thread, VALUE args)
{
    rb_thread_t *th;
    if (!rb_block_given_p()) {
    rb_raise(rb_eThreadError, &quot;must be called with a block&quot;);
    }
    GetThreadPtr(thread, th);
    if (th-&gt;first_args) {
    VALUE rb_proc_location(VALUE self);
    VALUE proc = th-&gt;first_proc, line, loc;
    const char *file;
        if (!proc || !RTEST(loc = rb_proc_location(proc))) {
            rb_raise(rb_eThreadError, &quot;already initialized thread&quot;);
        }
    file = RSTRING_PTR(RARRAY_PTR(loc)[0]);
    if (NIL_P(line = RARRAY_PTR(loc)[1])) {
        rb_raise(rb_eThreadError, &quot;already initialized thread - %s&quot;,
             file);
    }
        rb_raise(rb_eThreadError, &quot;already initialized thread - %s:%d&quot;,
                 file, NUM2INT(line));
    }
    return thread_create_core(thread, args, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="abort_on_exception-class_method">
  
    + (<tt>Boolean</tt>) <strong>abort_on_exception</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the status of the global ``abort on exception&#8217;&#8217;
condition.  The default is <tt>false</tt>. When set to <tt>true</tt>, or if
the global <tt>$DEBUG</tt> flag is <tt>true</tt> (perhaps because the
command line option <tt>-d</tt> was specified) all threads will abort (the
process will <tt>exit(0)</tt>) if an exception is raised in any thread. See
also <tt>Thread::abort_on_exception=</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.abort_on_exception   -&gt; true or false
 *
 *  Returns the status of the global ``abort on exception'' condition.  The
 *  default is &lt;code&gt;false&lt;/code&gt;. When set to &lt;code&gt;true&lt;/code&gt;, or if the
 *  global &lt;code&gt;$DEBUG&lt;/code&gt; flag is &lt;code&gt;true&lt;/code&gt; (perhaps because the
 *  command line option &lt;code&gt;-d&lt;/code&gt; was specified) all threads will abort
 *  (the process will &lt;code&gt;exit(0)&lt;/code&gt;) if an exception is raised in any
 *  thread. See also &lt;code&gt;Thread::abort_on_exception=&lt;/code&gt;.
 */

static VALUE
rb_thread_s_abort_exc(void)
{
    return GET_THREAD()-&gt;vm-&gt;thread_abort_on_exception ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abort_on_exception=-class_method">
  
    + (<tt>Boolean</tt>) <strong>abort_on_exception=</strong>(boolean) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
When set to <tt>true</tt>, all threads will abort if an exception is
raised. Returns the new state.
</p>
<pre class="code">
   Thread.abort_on_exception = true
   t1 = Thread.new do
     puts  &quot;In new thread&quot;
     raise &quot;Exception from thread&quot;
   end
   sleep(1)
   puts &quot;not reached&quot;
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   In new thread
   prog.rb:4: Exception from thread (RuntimeError)
    from prog.rb:2:in `initialize'
    from prog.rb:2:in `new'
    from prog.rb:2</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.abort_on_exception= boolean   -&gt; true or false
 *
 *  When set to &lt;code&gt;true&lt;/code&gt;, all threads will abort if an exception is
 *  raised. Returns the new state.
 *
 *     Thread.abort_on_exception = true
 *     t1 = Thread.new do
 *       puts  &quot;In new thread&quot;
 *       raise &quot;Exception from thread&quot;
 *     end
 *     sleep(1)
 *     puts &quot;not reached&quot;
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     In new thread
 *     prog.rb:4: Exception from thread (RuntimeError)
 *      from prog.rb:2:in `initialize'
 *      from prog.rb:2:in `new'
 *      from prog.rb:2
 */

static VALUE
rb_thread_s_abort_exc_set(VALUE self, VALUE val)
{
    rb_secure(4);
    GET_THREAD()-&gt;vm-&gt;thread_abort_on_exception = RTEST(val);
    return val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="current-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>current</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the currently executing thread.
</p>
<pre class="code">
   Thread.current   #=&gt; #&lt;Thread:0x401bdf4c run&gt;</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.current   -&gt; thread
 *
 *  Returns the currently executing thread.
 *
 *     Thread.current   #=&gt; #&lt;Thread:0x401bdf4c run&gt;
 */

static VALUE
thread_s_current(VALUE klass)
{
    return rb_thread_current();
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="DEBUG-class_method">
  
    + (<tt><span class='object_link'><a href="Numeric.html" title="Numeric (class)">Numeric</a></span></tt>) <strong>DEBUG</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the thread debug level.  Available only if compiled with
THREAD_DEBUG=-1.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Numeric.html" title="Numeric (class)">Numeric</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.DEBUG     -&gt; num
 *
 *  Returns the thread debug level.  Available only if compiled with
 *  THREAD_DEBUG=-1.
 */

static VALUE
rb_thread_s_debug(void)
{
    return INT2NUM(rb_thread_debug_enabled);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="DEBUG=-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>DEBUG=</strong>(num) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the thread debug level.  Available only if compiled with
THREAD_DEBUG=-1.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.DEBUG = num
 *
 *  Sets the thread debug level.  Available only if compiled with
 *  THREAD_DEBUG=-1.
 */

static VALUE
rb_thread_s_debug_set(VALUE self, VALUE val)
{
    rb_thread_debug_enabled = RTEST(val) ? NUM2INT(val) : 0;
    return val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="exit-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>exit</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Terminates the currently running thread and schedules another thread to be
run. If this thread is already marked to be killed, <tt>exit</tt> returns
the <tt>Thread</tt>. If this is the main thread, or the last thread, exit
the process.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.exit   -&gt; thread
 *
 *  Terminates the currently running thread and schedules another thread to be
 *  run. If this thread is already marked to be killed, &lt;code&gt;exit&lt;/code&gt;
 *  returns the &lt;code&gt;Thread&lt;/code&gt;. If this is the main thread, or the last
 *  thread, exit the process.
 */

static VALUE
rb_thread_exit(void)
{
    return rb_thread_kill(GET_THREAD()-&gt;self);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="fork-class_method">
  
    
      <span class="overload">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>([args]) {|args| ... }</span>
    
      <span class="overload">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fork</strong>([args]) {|args| ... }</span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Basically the same as <tt>Thread::new</tt>. However, if class
<tt>Thread</tt> is subclassed, then calling <tt>start</tt> in that subclass
will not invoke the subclass&#8217;s <tt>initialize</tt> method.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>([args]) {|args| ... }</span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>args</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fork</strong>([args]) {|args| ... }</span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>args</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.start([args]*) {|args| block }   -&gt; thread
 *     Thread.fork([args]*) {|args| block }    -&gt; thread
 *
 *  Basically the same as &lt;code&gt;Thread::new&lt;/code&gt;. However, if class
 *  &lt;code&gt;Thread&lt;/code&gt; is subclassed, then calling &lt;code&gt;start&lt;/code&gt; in that
 *  subclass will not invoke the subclass's &lt;code&gt;initialize&lt;/code&gt; method.
 */

static VALUE
thread_start(VALUE klass, VALUE args)
{
    return thread_create_core(rb_thread_alloc(klass), args, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="kill-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>kill</strong>(thread) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Causes the given <em>thread</em> to exit (see <tt>Thread::exit</tt>).
</p>
<pre class="code">
   count = 0
   a = Thread.new { loop { count += 1 } }
   sleep(0.1)       #=&gt; 0
   Thread.kill(a)   #=&gt; #&lt;Thread:0x401b3d30 dead&gt;
   count            #=&gt; 93947
   a.alive?         #=&gt; false</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.kill(thread)   -&gt; thread
 *
 *  Causes the given &lt;em&gt;thread&lt;/em&gt; to exit (see &lt;code&gt;Thread::exit&lt;/code&gt;).
 *
 *     count = 0
 *     a = Thread.new { loop { count += 1 } }
 *     sleep(0.1)       #=&gt; 0
 *     Thread.kill(a)   #=&gt; #&lt;Thread:0x401b3d30 dead&gt;
 *     count            #=&gt; 93947
 *     a.alive?         #=&gt; false
 */

static VALUE
rb_thread_s_kill(VALUE obj, VALUE th)
{
    return rb_thread_kill(th);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="list-class_method">
  
    + (<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>) <strong>list</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an array of <tt>Thread</tt> objects for all threads that are either
runnable or stopped.
</p>
<pre class="code">
   Thread.new { sleep(200) }
   Thread.new { 1000000.times {|i| i*i } }
   Thread.new { Thread.stop }
   Thread.list.each {|t| p t}
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   #&lt;Thread:0x401b3e84 sleep&gt;
   #&lt;Thread:0x401b3f38 run&gt;
   #&lt;Thread:0x401b3fb0 sleep&gt;
   #&lt;Thread:0x401bdf4c run&gt;</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.list   -&gt; array
 *
 *  Returns an array of &lt;code&gt;Thread&lt;/code&gt; objects for all threads that are
 *  either runnable or stopped.
 *
 *     Thread.new { sleep(200) }
 *     Thread.new { 1000000.times {|i| i*i } }
 *     Thread.new { Thread.stop }
 *     Thread.list.each {|t| p t}
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     #&lt;Thread:0x401b3e84 sleep&gt;
 *     #&lt;Thread:0x401b3f38 run&gt;
 *     #&lt;Thread:0x401b3fb0 sleep&gt;
 *     #&lt;Thread:0x401bdf4c run&gt;
 */

VALUE
rb_thread_list(void)
{
    VALUE ary = rb_ary_new();
    st_foreach(GET_THREAD()-&gt;vm-&gt;living_threads, thread_list_i, ary);
    return ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="main-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>main</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the main thread.
</p>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.main   -&gt; thread
 *
 *  Returns the main thread.
 */

static VALUE
rb_thread_s_main(VALUE klass)
{
    return rb_thread_main();
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="new-class_method">
  
    + (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>new</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
:nodoc:
</p>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/* :nodoc: */
static VALUE
thread_s_new(int argc, VALUE *argv, VALUE klass)
{
    rb_thread_t *th;
    VALUE thread = rb_thread_alloc(klass);
    rb_obj_call_init(thread, argc, argv);
    GetThreadPtr(thread, th);
    if (!th-&gt;first_args) {
    rb_raise(rb_eThreadError, &quot;uninitialized thread - check `%s#initialize'&quot;,
         rb_class2name(klass));
    }
    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pass-class_method">
  
    + (<tt>nil</tt>) <strong>pass</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Invokes the thread scheduler to pass execution to another thread.
</p>
<pre class="code">
   a = Thread.new { print &quot;a&quot;; Thread.pass;
                    print &quot;b&quot;; Thread.pass;
                    print &quot;c&quot; }
   b = Thread.new { print &quot;x&quot;; Thread.pass;
                    print &quot;y&quot;; Thread.pass;
                    print &quot;z&quot; }
   a.join
   b.join
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   axbycz</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.pass   -&gt; nil
 *
 *  Invokes the thread scheduler to pass execution to another thread.
 *
 *     a = Thread.new { print &quot;a&quot;; Thread.pass;
 *                      print &quot;b&quot;; Thread.pass;
 *                      print &quot;c&quot; }
 *     b = Thread.new { print &quot;x&quot;; Thread.pass;
 *                      print &quot;y&quot;; Thread.pass;
 *                      print &quot;z&quot; }
 *     a.join
 *     b.join
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     axbycz
 */

static VALUE
thread_s_pass(VALUE klass)
{
    rb_thread_schedule();
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="start-class_method">
  
    
      <span class="overload">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>([args]) {|args| ... }</span>
    
      <span class="overload">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fork</strong>([args]) {|args| ... }</span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Basically the same as <tt>Thread::new</tt>. However, if class
<tt>Thread</tt> is subclassed, then calling <tt>start</tt> in that subclass
will not invoke the subclass&#8217;s <tt>initialize</tt> method.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>start</strong>([args]) {|args| ... }</span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>args</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">+ (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>fork</strong>([args]) {|args| ... }</span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Yields:</h3>
<ul class="yield">
  
    <li>
      
        <span class='type'>(<tt>args</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.start([args]*) {|args| block }   -&gt; thread
 *     Thread.fork([args]*) {|args| block }    -&gt; thread
 *
 *  Basically the same as &lt;code&gt;Thread::new&lt;/code&gt;. However, if class
 *  &lt;code&gt;Thread&lt;/code&gt; is subclassed, then calling &lt;code&gt;start&lt;/code&gt; in that
 *  subclass will not invoke the subclass's &lt;code&gt;initialize&lt;/code&gt; method.
 */

static VALUE
thread_start(VALUE klass, VALUE args)
{
    return thread_create_core(rb_thread_alloc(klass), args, 0);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop-class_method">
  
    + (<tt>nil</tt>) <strong>stop</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Stops execution of the current thread, putting it into a
``sleep&#8217;&#8217; state, and schedules execution of another thread.
</p>
<pre class="code">
   a = Thread.new { print &quot;a&quot;; Thread.stop; print &quot;c&quot; }
   Thread.pass
   print &quot;b&quot;
   a.run
   a.join
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   abc</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     Thread.stop   -&gt; nil
 *
 *  Stops execution of the current thread, putting it into a ``sleep'' state,
 *  and schedules execution of another thread.
 *
 *     a = Thread.new { print &quot;a&quot;; Thread.stop; print &quot;c&quot; }
 *     Thread.pass
 *     print &quot;b&quot;
 *     a.run
 *     a.join
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     abc
 */

VALUE
rb_thread_stop(void)
{
    if (rb_thread_alone()) {
    rb_raise(rb_eThreadError,
         &quot;stopping only thread\n\tnote: use sleep to stop forever&quot;);
    }
    rb_thread_sleep_deadly();
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt><sup>?</sup>) <strong>[]</strong>(sym) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attribute Reference--Returns the value of a thread-local variable,
using either a symbol or a string name. If the specified variable does not
exist, returns <tt>nil</tt>.
</p>
<pre class="code">
   a = Thread.new { Thread.current[&quot;name&quot;] = &quot;A&quot;; Thread.stop }
   b = Thread.new { Thread.current[:name]  = &quot;B&quot;; Thread.stop }
   c = Thread.new { Thread.current[&quot;name&quot;] = &quot;C&quot;; Thread.stop }
   Thread.list.each {|x| puts &quot;#{x.inspect}: #{x[:name]}&quot; }
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   #&lt;Thread:0x401b3b3c sleep&gt;: C
   #&lt;Thread:0x401b3bc8 sleep&gt;: B
   #&lt;Thread:0x401b3c68 sleep&gt;: A
   #&lt;Thread:0x401bdf4c run&gt;:</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>, <tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *      thr[sym]   -&gt; obj or nil
 *
 *  Attribute Reference---Returns the value of a thread-local variable, using
 *  either a symbol or a string name. If the specified variable does not exist,
 *  returns &lt;code&gt;nil&lt;/code&gt;.
 *
 *     a = Thread.new { Thread.current[&quot;name&quot;] = &quot;A&quot;; Thread.stop }
 *     b = Thread.new { Thread.current[:name]  = &quot;B&quot;; Thread.stop }
 *     c = Thread.new { Thread.current[&quot;name&quot;] = &quot;C&quot;; Thread.stop }
 *     Thread.list.each {|x| puts &quot;#{x.inspect}: #{x[:name]}&quot; }
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     #&lt;Thread:0x401b3b3c sleep&gt;: C
 *     #&lt;Thread:0x401b3bc8 sleep&gt;: B
 *     #&lt;Thread:0x401b3c68 sleep&gt;: A
 *     #&lt;Thread:0x401bdf4c run&gt;:
 */

static VALUE
rb_thread_aref(VALUE thread, VALUE id)
{
    return rb_thread_local_aref(thread, rb_to_id(id));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="[]=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>[]=</strong>(sym) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Attribute Assignment--Sets or creates the value of a thread-local
variable, using either a symbol or a string. See also <tt>Thread#[]</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *      thr[sym] = obj   -&gt; obj
 *
 *  Attribute Assignment---Sets or creates the value of a thread-local variable,
 *  using either a symbol or a string. See also &lt;code&gt;Thread#[]&lt;/code&gt;.
 */

static VALUE
rb_thread_aset(VALUE self, VALUE id, VALUE val)
{
    return rb_thread_local_aset(self, rb_to_id(id), val);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abort_on_exception-instance_method">
  
    - (<tt>Boolean</tt>) <strong>abort_on_exception</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the status of the thread-local ``abort on exception&#8217;&#8217;
condition for <em>thr</em>. The default is <tt>false</tt>. See also
<tt>Thread::abort_on_exception=</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.abort_on_exception   -&gt; true or false
 *
 *  Returns the status of the thread-local ``abort on exception'' condition for
 *  &lt;i&gt;thr&lt;/i&gt;. The default is &lt;code&gt;false&lt;/code&gt;. See also
 *  &lt;code&gt;Thread::abort_on_exception=&lt;/code&gt;.
 */

static VALUE
rb_thread_abort_exc(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);
    return th-&gt;abort_on_exception ? Qtrue : Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="abort_on_exception=-instance_method">
  
    - (<tt>Boolean</tt>) <strong>abort_on_exception=</strong>(boolean) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
When set to <tt>true</tt>, causes all threads (including the main program)
to abort if an exception is raised in <em>thr</em>. The process will
effectively <tt>exit(0)</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.abort_on_exception= boolean   -&gt; true or false
 *
 *  When set to &lt;code&gt;true&lt;/code&gt;, causes all threads (including the main
 *  program) to abort if an exception is raised in &lt;i&gt;thr&lt;/i&gt;. The process will
 *  effectively &lt;code&gt;exit(0)&lt;/code&gt;.
 */

static VALUE
rb_thread_abort_exc_set(VALUE thread, VALUE val)
{
    rb_thread_t *th;
    rb_secure(4);

    GetThreadPtr(thread, th);
    th-&gt;abort_on_exception = RTEST(val);
    return val;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_trace_func-instance_method">
  
    - (<tt><span class='object_link'><a href="Proc.html" title="Proc (class)">Proc</a></span></tt>) <strong>add_trace_func</strong>(proc) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Adds <em>proc</em> as a handler for tracing. See
<tt>Thread#set_trace_func</tt> and <tt>set_trace_func</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Proc.html" title="Proc (class)">Proc</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.add_trace_func(proc)    -&gt; proc
 *
 *  Adds _proc_ as a handler for tracing.
 *  See &lt;code&gt;Thread#set_trace_func&lt;/code&gt; and +set_trace_func+.
 */

static VALUE
thread_add_trace_func_m(VALUE obj, VALUE trace)
{
    rb_thread_t *th;
    GetThreadPtr(obj, th);
    thread_add_trace_func(th, trace);
    return trace;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="alive?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>alive?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if <em>thr</em> is running or sleeping.
</p>
<pre class="code">
   thr = Thread.new { }
   thr.join                #=&gt; #&lt;Thread:0x401b3fb0 dead&gt;
   Thread.current.alive?   #=&gt; true
   thr.alive?              #=&gt; false</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.alive?   -&gt; true or false
 *
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;thr&lt;/i&gt; is running or sleeping.
 *
 *     thr = Thread.new { }
 *     thr.join                #=&gt; #&lt;Thread:0x401b3fb0 dead&gt;
 *     Thread.current.alive?   #=&gt; true
 *     thr.alive?              #=&gt; false
 */

static VALUE
rb_thread_alive_p(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);

    if (rb_threadptr_dead(th))
    return Qfalse;
    return Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="backtrace-instance_method">
  
    - (<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>) <strong>backtrace</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the current back trace of the <em>thr</em>.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.backtrace    -&gt; array
 *
 *  Returns the current back trace of the _thr_.
 */

static VALUE
rb_thread_backtrace_m(VALUE thval)
{
    return rb_thread_backtrace(thval);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="exit-instance_method">
  
    
      <span class="overload">- (<tt>nil</tt>) <strong>exit</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>kill</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>terminate</strong> </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Terminates <em>thr</em> and schedules another thread to be run. If this
thread is already marked to be killed, <tt>exit</tt> returns the
<tt>Thread</tt>. If this is the main thread, or the last thread, exits the
process.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>exit</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>kill</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>terminate</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.exit        -&gt; thr or nil
 *     thr.kill        -&gt; thr or nil
 *     thr.terminate   -&gt; thr or nil
 *
 *  Terminates &lt;i&gt;thr&lt;/i&gt; and schedules another thread to be run. If this thread
 *  is already marked to be killed, &lt;code&gt;exit&lt;/code&gt; returns the
 *  &lt;code&gt;Thread&lt;/code&gt;. If this is the main thread, or the last thread, exits
 *  the process.
 */

VALUE
rb_thread_kill(VALUE thread)
{
    rb_thread_t *th;

    GetThreadPtr(thread, th);

    if (th != GET_THREAD() &amp;&amp; th-&gt;safe_level &lt; 4) {
    rb_secure(4);
    }
    if (th-&gt;status == THREAD_TO_KILL || th-&gt;status == THREAD_KILLED) {
    return thread;
    }
    if (th == th-&gt;vm-&gt;main_thread) {
    rb_exit(EXIT_SUCCESS);
    }

    thread_debug(&quot;rb_thread_kill: %p (%p)\n&quot;, (void *)th, (void *)th-&gt;thread_id);

    rb_threadptr_interrupt(th);
    th-&gt;thrown_errinfo = eKillSignal;
    th-&gt;status = THREAD_TO_KILL;

    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="group-instance_method">
  
    - (<tt>nil</tt>) <strong>group</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the <tt>ThreadGroup</tt> which contains <em>thr</em>, or nil if the
thread is not a member of any group.
</p>
<pre class="code">
   Thread.main.group   #=&gt; #&lt;ThreadGroup:0x4029d914&gt;</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.group   -&gt; thgrp or nil
 *
 *  Returns the &lt;code&gt;ThreadGroup&lt;/code&gt; which contains &lt;i&gt;thr&lt;/i&gt;, or nil if
 *  the thread is not a member of any group.
 *
 *     Thread.main.group   #=&gt; #&lt;ThreadGroup:0x4029d914&gt;
 */

VALUE
rb_thread_group(VALUE thread)
{
    rb_thread_t *th;
    VALUE group;
    GetThreadPtr(thread, th);
    group = th-&gt;thgroup;

    if (!group) {
    group = Qnil;
    }
    return group;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="inspect-instance_method">
  
    - (<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>) <strong>inspect</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Dump the name, id, and status of <em>thr</em> to a string.
</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 * call-seq:
 *   thr.inspect   -&gt; string
 *
 * Dump the name, id, and status of _thr_ to a string.
 */

static VALUE
rb_thread_inspect(VALUE thread)
{
    const char *cname = rb_obj_classname(thread);
    rb_thread_t *th;
    const char *status;
    VALUE str;

    GetThreadPtr(thread, th);
    status = thread_status_name(th-&gt;status);
    str = rb_sprintf(&quot;#&lt;%s:%p %s&gt;&quot;, cname, (void *)thread, status);
    OBJ_INFECT(str, thread);

    return str;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="join-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>join</strong> </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>join</strong>(limit) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
The calling thread will suspend execution and run <em>thr</em>. Does not
return until <em>thr</em> exits or until <em>limit</em> seconds have
passed. If the time limit expires, <tt>nil</tt> will be returned, otherwise
<em>thr</em> is returned.
</p>
<p>
Any threads not joined will be killed when the main program exits.  If
<em>thr</em> had previously raised an exception and the
<tt>abort_on_exception</tt> and <tt>$DEBUG</tt> flags are not set (so the
exception has not yet been processed) it will be processed at this time.
</p>
<pre class="code">
   a = Thread.new { print &quot;a&quot;; sleep(10); print &quot;b&quot;; print &quot;c&quot; }
   x = Thread.new { print &quot;x&quot;; Thread.pass; print &quot;y&quot;; print &quot;z&quot; }
   x.join # Let x thread finish, a will be killed on exit.
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   axyz
</pre>
<p>
The following example illustrates the <em>limit</em> parameter.
</p>
<pre class="code">
   y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
   puts &quot;Waiting&quot; until y.join(0.15)
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   tick...
   Waiting
   tick...
   Waitingtick...

   tick...</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.join          -&gt; thr
 *     thr.join(limit)   -&gt; thr
 *
 *  The calling thread will suspend execution and run &lt;i&gt;thr&lt;/i&gt;. Does not
 *  return until &lt;i&gt;thr&lt;/i&gt; exits or until &lt;i&gt;limit&lt;/i&gt; seconds have passed. If
 *  the time limit expires, &lt;code&gt;nil&lt;/code&gt; will be returned, otherwise
 *  &lt;i&gt;thr&lt;/i&gt; is returned.
 *
 *  Any threads not joined will be killed when the main program exits.  If
 *  &lt;i&gt;thr&lt;/i&gt; had previously raised an exception and the
 *  &lt;code&gt;abort_on_exception&lt;/code&gt; and &lt;code&gt;$DEBUG&lt;/code&gt; flags are not set
 *  (so the exception has not yet been processed) it will be processed at this
 *  time.
 *
 *     a = Thread.new { print &quot;a&quot;; sleep(10); print &quot;b&quot;; print &quot;c&quot; }
 *     x = Thread.new { print &quot;x&quot;; Thread.pass; print &quot;y&quot;; print &quot;z&quot; }
 *     x.join # Let x thread finish, a will be killed on exit.
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     axyz
 *
 *  The following example illustrates the &lt;i&gt;limit&lt;/i&gt; parameter.
 *
 *     y = Thread.new { 4.times { sleep 0.1; puts 'tick... ' }}
 *     puts &quot;Waiting&quot; until y.join(0.15)
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     tick...
 *     Waiting
 *     tick...
 *     Waitingtick...
 *
 *
 *     tick...
 */

static VALUE
thread_join_m(int argc, VALUE *argv, VALUE self)
{
    rb_thread_t *target_th;
    double delay = DELAY_INFTY;
    VALUE limit;

    GetThreadPtr(self, target_th);

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;limit);
    if (!NIL_P(limit)) {
    delay = rb_num2dbl(limit);
    }

    return thread_join(target_th, delay);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="key?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>key?</strong>(sym) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if the given string (or symbol) exists as a
thread-local variable.
</p>
<pre class="code">
   me = Thread.current
   me[:oliver] = &quot;a&quot;
   me.key?(:oliver)    #=&gt; true
   me.key?(:stanley)   #=&gt; false</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.key?(sym)   -&gt; true or false
 *
 *  Returns &lt;code&gt;true&lt;/code&gt; if the given string (or symbol) exists as a
 *  thread-local variable.
 *
 *     me = Thread.current
 *     me[:oliver] = &quot;a&quot;
 *     me.key?(:oliver)    #=&gt; true
 *     me.key?(:stanley)   #=&gt; false
 */

static VALUE
rb_thread_key_p(VALUE self, VALUE key)
{
    rb_thread_t *th;
    ID id = rb_to_id(key);

    GetThreadPtr(self, th);

    if (!th-&gt;local_storage) {
    return Qfalse;
    }
    if (st_lookup(th-&gt;local_storage, id, 0)) {
    return Qtrue;
    }
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="keys-instance_method">
  
    - (<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>) <strong>keys</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns an an array of the names of the thread-local variables (as
Symbols).
</p>
<pre class="code">
   thr = Thread.new do
     Thread.current[:cat] = 'meow'
     Thread.current[&quot;dog&quot;] = 'woof'
   end
   thr.join   #=&gt; #&lt;Thread:0x401b3f10 dead&gt;
   thr.keys   #=&gt; [:dog, :cat]</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Array.html" title="Array (class)">Array</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.keys   -&gt; array
 *
 *  Returns an an array of the names of the thread-local variables (as Symbols).
 *
 *     thr = Thread.new do
 *       Thread.current[:cat] = 'meow'
 *       Thread.current[&quot;dog&quot;] = 'woof'
 *     end
 *     thr.join   #=&gt; #&lt;Thread:0x401b3f10 dead&gt;
 *     thr.keys   #=&gt; [:dog, :cat]
 */

static VALUE
rb_thread_keys(VALUE self)
{
    rb_thread_t *th;
    VALUE ary = rb_ary_new();
    GetThreadPtr(self, th);

    if (th-&gt;local_storage) {
    st_foreach(th-&gt;local_storage, thread_keys_i, ary);
    }
    return ary;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="kill-instance_method">
  
    
      <span class="overload">- (<tt>nil</tt>) <strong>exit</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>kill</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>terminate</strong> </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Terminates <em>thr</em> and schedules another thread to be run. If this
thread is already marked to be killed, <tt>exit</tt> returns the
<tt>Thread</tt>. If this is the main thread, or the last thread, exits the
process.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>exit</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>kill</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>terminate</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.exit        -&gt; thr or nil
 *     thr.kill        -&gt; thr or nil
 *     thr.terminate   -&gt; thr or nil
 *
 *  Terminates &lt;i&gt;thr&lt;/i&gt; and schedules another thread to be run. If this thread
 *  is already marked to be killed, &lt;code&gt;exit&lt;/code&gt; returns the
 *  &lt;code&gt;Thread&lt;/code&gt;. If this is the main thread, or the last thread, exits
 *  the process.
 */

VALUE
rb_thread_kill(VALUE thread)
{
    rb_thread_t *th;

    GetThreadPtr(thread, th);

    if (th != GET_THREAD() &amp;&amp; th-&gt;safe_level &lt; 4) {
    rb_secure(4);
    }
    if (th-&gt;status == THREAD_TO_KILL || th-&gt;status == THREAD_KILLED) {
    return thread;
    }
    if (th == th-&gt;vm-&gt;main_thread) {
    rb_exit(EXIT_SUCCESS);
    }

    thread_debug(&quot;rb_thread_kill: %p (%p)\n&quot;, (void *)th, (void *)th-&gt;thread_id);

    rb_threadptr_interrupt(th);
    th-&gt;thrown_errinfo = eKillSignal;
    th-&gt;status = THREAD_TO_KILL;

    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="priority-instance_method">
  
    - (<tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt>) <strong>priority</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the priority of <em>thr</em>. Default is inherited from the current
thread which creating the new thread, or zero for the initial main thread;
higher-priority thread will run more frequently than lower-priority threads
(but lower-priority threads can also run).
</p>
<p>
This is just hint for Ruby thread scheduler.  It may be ignored on some
platform.
</p>
<pre class="code">
   Thread.current.priority   #=&gt; 0</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.priority   -&gt; integer
 *
 *  Returns the priority of &lt;i&gt;thr&lt;/i&gt;. Default is inherited from the
 *  current thread which creating the new thread, or zero for the
 *  initial main thread; higher-priority thread will run more frequently
 *  than lower-priority threads (but lower-priority threads can also run).
 *
 *  This is just hint for Ruby thread scheduler.  It may be ignored on some
 *  platform.
 *
 *     Thread.current.priority   #=&gt; 0
 */

static VALUE
rb_thread_priority(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);
    return INT2NUM(th-&gt;priority);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="priority=-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>priority=</strong>(integer) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Sets the priority of <em>thr</em> to <em>integer</em>. Higher-priority
threads will run more frequently than lower-priority threads (but
lower-priority threads can also run).
</p>
<p>
This is just hint for Ruby thread scheduler.  It may be ignored on some
platform.
</p>
<pre class="code">
   count1 = count2 = 0
   a = Thread.new do
         loop { count1 += 1 }
       end
   a.priority = -1

   b = Thread.new do
         loop { count2 += 1 }
       end
   b.priority = -2
   sleep 1   #=&gt; 1
   count1    #=&gt; 622504
   count2    #=&gt; 5832</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.priority= integer   -&gt; thr
 *
 *  Sets the priority of &lt;i&gt;thr&lt;/i&gt; to &lt;i&gt;integer&lt;/i&gt;. Higher-priority threads
 *  will run more frequently than lower-priority threads (but lower-priority
 *  threads can also run).
 *
 *  This is just hint for Ruby thread scheduler.  It may be ignored on some
 *  platform.
 *
 *     count1 = count2 = 0
 *     a = Thread.new do
 *           loop { count1 += 1 }
 *         end
 *     a.priority = -1
 *
 *     b = Thread.new do
 *           loop { count2 += 1 }
 *         end
 *     b.priority = -2
 *     sleep 1   #=&gt; 1
 *     count1    #=&gt; 622504
 *     count2    #=&gt; 5832
 */

static VALUE
rb_thread_priority_set(VALUE thread, VALUE prio)
{
    rb_thread_t *th;
    int priority;
    GetThreadPtr(thread, th);

    rb_secure(4);

#if USE_NATIVE_THREAD_PRIORITY
    th-&gt;priority = NUM2INT(prio);
    native_thread_apply_priority(th);
#else
    priority = NUM2INT(prio);
    if (priority &gt; RUBY_THREAD_PRIORITY_MAX) {
    priority = RUBY_THREAD_PRIORITY_MAX;
    }
    else if (priority &lt; RUBY_THREAD_PRIORITY_MIN) {
    priority = RUBY_THREAD_PRIORITY_MIN;
    }
    th-&gt;priority = priority;
    th-&gt;slice = priority;
#endif
    return INT2NUM(th-&gt;priority);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="raise-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>raise</strong> </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>raise</strong>(string) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>raise</strong>(exception[, string [, array]]) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Raises an exception (see <tt>Kernel::raise</tt>) from <em>thr</em>. The
caller does not have to be <em>thr</em>.
</p>
<pre class="code">
   Thread.abort_on_exception = true
   a = Thread.new { sleep(200) }
   a.raise(&quot;Gotcha&quot;)
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   prog.rb:3: Gotcha (RuntimeError)
    from prog.rb:2:in `initialize'
    from prog.rb:2:in `new'
    from prog.rb:2</pre>


  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.raise
 *     thr.raise(string)
 *     thr.raise(exception [, string [, array]])
 *
 *  Raises an exception (see &lt;code&gt;Kernel::raise&lt;/code&gt;) from &lt;i&gt;thr&lt;/i&gt;. The
 *  caller does not have to be &lt;i&gt;thr&lt;/i&gt;.
 *
 *     Thread.abort_on_exception = true
 *     a = Thread.new { sleep(200) }
 *     a.raise(&quot;Gotcha&quot;)
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     prog.rb:3: Gotcha (RuntimeError)
 *      from prog.rb:2:in `initialize'
 *      from prog.rb:2:in `new'
 *      from prog.rb:2
 */

static VALUE
thread_raise_m(int argc, VALUE *argv, VALUE self)
{
    rb_thread_t *th;
    GetThreadPtr(self, th);
    rb_threadptr_raise(th, argc, argv);
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>run</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Wakes up <em>thr</em>, making it eligible for scheduling.
</p>
<pre class="code">
   a = Thread.new { puts &quot;a&quot;; Thread.stop; puts &quot;c&quot; }
   Thread.pass
   puts &quot;Got here&quot;
   a.run
   a.join
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   a
   Got here
   c</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.run   -&gt; thr
 *
 *  Wakes up &lt;i&gt;thr&lt;/i&gt;, making it eligible for scheduling.
 *
 *     a = Thread.new { puts &quot;a&quot;; Thread.stop; puts &quot;c&quot; }
 *     Thread.pass
 *     puts &quot;Got here&quot;
 *     a.run
 *     a.join
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     a
 *     Got here
 *     c
 */

VALUE
rb_thread_run(VALUE thread)
{
    rb_thread_wakeup(thread);
    rb_thread_schedule();
    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="safe_level-instance_method">
  
    - (<tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt>) <strong>safe_level</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the safe level in effect for <em>thr</em>. Setting thread-local
safe levels can help when implementing sandboxes which run insecure code.
</p>
<pre class="code">
   thr = Thread.new { $SAFE = 3; sleep }
   Thread.current.safe_level   #=&gt; 0
   thr.safe_level              #=&gt; 3</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Integer.html" title="Integer (class)">Integer</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.safe_level   -&gt; integer
 *
 *  Returns the safe level in effect for &lt;i&gt;thr&lt;/i&gt;. Setting thread-local safe
 *  levels can help when implementing sandboxes which run insecure code.
 *
 *     thr = Thread.new { $SAFE = 3; sleep }
 *     Thread.current.safe_level   #=&gt; 0
 *     thr.safe_level              #=&gt; 3
 */

static VALUE
rb_thread_safe_level(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);

    return INT2NUM(th-&gt;safe_level);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="set_trace_func-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="Proc.html" title="Proc (class)">Proc</a></span></tt>) <strong>set_trace_func</strong>(proc) </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>set_trace_func</strong>(nil) </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Establishes <em>proc</em> on <em>thr</em> as the handler for tracing, or
disables tracing if the parameter is <tt>nil</tt>. See
<tt>set_trace_func</tt>.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="Proc.html" title="Proc (class)">Proc</a></span></tt>) <strong>set_trace_func</strong>(proc) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Proc.html" title="Proc (class)">Proc</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>set_trace_func</strong>(nil) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.set_trace_func(proc)    -&gt; proc
 *     thr.set_trace_func(nil)     -&gt; nil
 *
 *  Establishes _proc_ on _thr_ as the handler for tracing, or
 *  disables tracing if the parameter is +nil+.
 *  See +set_trace_func+.
 */

static VALUE
thread_set_trace_func_m(VALUE obj, VALUE trace)
{
    rb_thread_t *th;
    GetThreadPtr(obj, th);
    rb_threadptr_revmove_event_hook(th, call_trace_func);

    if (NIL_P(trace)) {
    return Qnil;
    }
    thread_add_trace_func(th, trace);
    return trace;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="status-instance_method">
  
    - (<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, ...) <strong>status</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns the status of <em>thr</em>: ``<tt>sleep</tt>&#8217;&#8217; if
<em>thr</em> is sleeping or waiting on I/O, ``<tt>run</tt>&#8217;&#8217; if
<em>thr</em> is executing, ``<tt>aborting</tt>&#8217;&#8217; if
<em>thr</em> is aborting, <tt>false</tt> if <em>thr</em> terminated
normally, and <tt>nil</tt> if <em>thr</em> terminated with an exception.
</p>
<pre class="code">
   a = Thread.new { raise(&quot;die now&quot;) }
   b = Thread.new { Thread.stop }
   c = Thread.new { Thread.exit }
   d = Thread.new { sleep }
   d.kill                  #=&gt; #&lt;Thread:0x401b3678 aborting&gt;
   a.status                #=&gt; nil
   b.status                #=&gt; &quot;sleep&quot;
   c.status                #=&gt; false
   d.status                #=&gt; &quot;aborting&quot;
   Thread.current.status   #=&gt; &quot;run&quot;</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="String.html" title="String (class)">String</a></span></tt>, <tt>false</tt>, <tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.status   -&gt; string, false or nil
 *
 *  Returns the status of &lt;i&gt;thr&lt;/i&gt;: ``&lt;code&gt;sleep&lt;/code&gt;'' if &lt;i&gt;thr&lt;/i&gt; is
 *  sleeping or waiting on I/O, ``&lt;code&gt;run&lt;/code&gt;'' if &lt;i&gt;thr&lt;/i&gt; is executing,
 *  ``&lt;code&gt;aborting&lt;/code&gt;'' if &lt;i&gt;thr&lt;/i&gt; is aborting, &lt;code&gt;false&lt;/code&gt; if
 *  &lt;i&gt;thr&lt;/i&gt; terminated normally, and &lt;code&gt;nil&lt;/code&gt; if &lt;i&gt;thr&lt;/i&gt;
 *  terminated with an exception.
 *
 *     a = Thread.new { raise(&quot;die now&quot;) }
 *     b = Thread.new { Thread.stop }
 *     c = Thread.new { Thread.exit }
 *     d = Thread.new { sleep }
 *     d.kill                  #=&gt; #&lt;Thread:0x401b3678 aborting&gt;
 *     a.status                #=&gt; nil
 *     b.status                #=&gt; &quot;sleep&quot;
 *     c.status                #=&gt; false
 *     d.status                #=&gt; &quot;aborting&quot;
 *     Thread.current.status   #=&gt; &quot;run&quot;
 */

static VALUE
rb_thread_status(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);

    if (rb_threadptr_dead(th)) {
    if (!NIL_P(th-&gt;errinfo) &amp;&amp; !FIXNUM_P(th-&gt;errinfo)
        /* TODO */ ) {
        return Qnil;
    }
    return Qfalse;
    }
    return rb_str_new2(thread_status_name(th-&gt;status));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stop?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>stop?</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Returns <tt>true</tt> if <em>thr</em> is dead or sleeping.
</p>
<pre class="code">
   a = Thread.new { Thread.stop }
   b = Thread.current
   a.stop?   #=&gt; true
   b.stop?   #=&gt; false</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.stop?   -&gt; true or false
 *
 *  Returns &lt;code&gt;true&lt;/code&gt; if &lt;i&gt;thr&lt;/i&gt; is dead or sleeping.
 *
 *     a = Thread.new { Thread.stop }
 *     b = Thread.current
 *     a.stop?   #=&gt; true
 *     b.stop?   #=&gt; false
 */

static VALUE
rb_thread_stop_p(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);

    if (rb_threadptr_dead(th))
    return Qtrue;
    if (th-&gt;status == THREAD_STOPPED || th-&gt;status == THREAD_STOPPED_FOREVER)
    return Qtrue;
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="terminate-instance_method">
  
    
      <span class="overload">- (<tt>nil</tt>) <strong>exit</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>kill</strong> </span>
    
      <span class="overload">- (<tt>nil</tt>) <strong>terminate</strong> </span>
    
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Terminates <em>thr</em> and schedules another thread to be run. If this
thread is already marked to be killed, <tt>exit</tt> returns the
<tt>Thread</tt>. If this is the main thread, or the last thread, exits the
process.
</p>


  </div>
</div>
<div class="tags">
  
  <h3>Overloads:</h3>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>exit</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>kill</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>nil</tt>) <strong>terminate</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.exit        -&gt; thr or nil
 *     thr.kill        -&gt; thr or nil
 *     thr.terminate   -&gt; thr or nil
 *
 *  Terminates &lt;i&gt;thr&lt;/i&gt; and schedules another thread to be run. If this thread
 *  is already marked to be killed, &lt;code&gt;exit&lt;/code&gt; returns the
 *  &lt;code&gt;Thread&lt;/code&gt;. If this is the main thread, or the last thread, exits
 *  the process.
 */

VALUE
rb_thread_kill(VALUE thread)
{
    rb_thread_t *th;

    GetThreadPtr(thread, th);

    if (th != GET_THREAD() &amp;&amp; th-&gt;safe_level &lt; 4) {
    rb_secure(4);
    }
    if (th-&gt;status == THREAD_TO_KILL || th-&gt;status == THREAD_KILLED) {
    return thread;
    }
    if (th == th-&gt;vm-&gt;main_thread) {
    rb_exit(EXIT_SUCCESS);
    }

    thread_debug(&quot;rb_thread_kill: %p (%p)\n&quot;, (void *)th, (void *)th-&gt;thread_id);

    rb_threadptr_interrupt(th);
    th-&gt;thrown_errinfo = eKillSignal;
    th-&gt;status = THREAD_TO_KILL;

    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="value-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>value</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Waits for <em>thr</em> to complete (via <tt>Thread#join</tt>) and returns
its value.
</p>
<pre class="code">
   a = Thread.new { 2 + 2 }
   a.value   #=&gt; 4</pre>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.value   -&gt; obj
 *
 *  Waits for &lt;i&gt;thr&lt;/i&gt; to complete (via &lt;code&gt;Thread#join&lt;/code&gt;) and returns
 *  its value.
 *
 *     a = Thread.new { 2 + 2 }
 *     a.value   #=&gt; 4
 */

static VALUE
thread_value(VALUE self)
{
    rb_thread_t *th;
    GetThreadPtr(self, th);
    thread_join(th, DELAY_INFTY);
    return th-&gt;value;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="wakeup-instance_method">
  
    - (<tt><span class='object_link'><a href="Object.html" title="Object (class)">Object</a></span></tt>) <strong>wakeup</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>
Marks <em>thr</em> as eligible for scheduling (it may still remain blocked
on I/O, however). Does not invoke the scheduler (see <tt>Thread#run</tt>).
</p>
<pre class="code">
   c = Thread.new { Thread.stop; puts &quot;hey!&quot; }
   c.wakeup
</pre>
<p>
<em>produces:</em>
</p>
<pre class="code">
   hey!</pre>


  </div>
</div>
<div class="tags">
  
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'thread.c'</span>

/*
 *  call-seq:
 *     thr.wakeup   -&gt; thr
 *
 *  Marks &lt;i&gt;thr&lt;/i&gt; as eligible for scheduling (it may still remain blocked on
 *  I/O, however). Does not invoke the scheduler (see &lt;code&gt;Thread#run&lt;/code&gt;).
 *
 *     c = Thread.new { Thread.stop; puts &quot;hey!&quot; }
 *     c.wakeup
 *
 *  &lt;em&gt;produces:&lt;/em&gt;
 *
 *     hey!
 */

VALUE
rb_thread_wakeup(VALUE thread)
{
    rb_thread_t *th;
    GetThreadPtr(thread, th);

    if (th-&gt;status == THREAD_KILLED) {
    rb_raise(rb_eThreadError, &quot;killed thread&quot;);
    }
    rb_threadptr_ready(th);
    if (th-&gt;status != THREAD_TO_KILL) {
    th-&gt;status = THREAD_RUNNABLE;
    }
    return thread;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Oct 14 00:05:57 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>