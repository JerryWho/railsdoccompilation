  <div id="C00000022">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />GherkinBuilder<br/>
  In:
<a href="#" onclick="jsHref('files/lib/cucumber/parser/gherkin_builder_rb.html');">lib/cucumber/parser/gherkin_builder.rb</a>

Parent:&nbsp;
Object
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
This class conforms to the Gherkin event API and builds the
&quot;legacy&quot; AST. It will be replaced later when we have a new
&quot;clean&quot; AST.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000040&name=ast" >ast</a></li>
  <li><a href="index.html?a=M000042&name=background" >background</a></li>
  <li><a href="index.html?a=M000047&name=eof" >eof</a></li>
  <li><a href="index.html?a=M000045&name=examples" >examples</a></li>
  <li><a href="index.html?a=M000041&name=feature" >feature</a></li>
  <li><a href="index.html?a=M000043&name=scenario" >scenario</a></li>
  <li><a href="index.html?a=M000044&name=scenario_outline" >scenario_outline</a></li>
  <li><a href="index.html?a=M000046&name=step" >step</a></li>
  <li><a href="index.html?a=M000048&name=syntax_error" >syntax_error</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('');">Gherkin::Rubify</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M000040" class="method">
  <div id="M000040_title" class="title">
    <b>ast</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000040_source')" id="l_M000040_source">show source</a> ]</p>
  <div id="M000040_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 12</span>
12:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">ast</span>
13:         <span class="ruby-ivar">@feature</span> <span class="ruby-operator">||</span> <span class="ruby-ivar">@multiline_arg</span>
14:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000042" class="method">
  <div id="M000042_title" class="title">
    <b>background</b>(statement)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show source</a> ]</p>
  <div id="M000042_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 27</span>
27:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">background</span>(<span class="ruby-identifier">statement</span>)
28:         <span class="ruby-ivar">@background</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Background</span>.<span class="ruby-identifier">new</span>(
29:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">value</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)), 
30:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">line</span>, 
31:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>, 
32:           <span class="ruby-identifier">legacy_name_for</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">description</span>), 
33:           <span class="ruby-identifier">steps</span>=[]
34:         )
35:         <span class="ruby-ivar">@feature</span>.<span class="ruby-identifier">background</span> = <span class="ruby-ivar">@background</span>
36:         <span class="ruby-ivar">@background</span>.<span class="ruby-identifier">feature</span> = <span class="ruby-ivar">@feature</span>
37:         <span class="ruby-ivar">@step_container</span> = <span class="ruby-ivar">@background</span>
38:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000047" class="method">
  <div id="M000047_title" class="title">
    <b>eof</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000047_source')" id="l_M000047_source">show source</a> ]</p>
  <div id="M000047_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 97</span>
97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eof</span>
98:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000045" class="method">
  <div id="M000045_title" class="title">
    <b>examples</b>(statement, examples_rows)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show source</a> ]</p>
  <div id="M000045_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 74</span>
74:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">examples</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">examples_rows</span>)
75:         <span class="ruby-identifier">examples_fields</span> = [
76:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">value</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)), 
77:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">line</span>, 
78:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>, 
79:           <span class="ruby-identifier">legacy_name_for</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">description</span>), 
80:           <span class="ruby-identifier">matrix</span>(<span class="ruby-identifier">examples_rows</span>)
81:         ]
82:         <span class="ruby-ivar">@step_container</span>.<span class="ruby-identifier">add_examples</span>(<span class="ruby-identifier">examples_fields</span>)
83:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000041" class="method">
  <div id="M000041_title" class="title">
    <b>feature</b>(statement, uri)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000041_source')" id="l_M000041_source">show source</a> ]</p>
  <div id="M000041_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 16</span>
16:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">feature</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">uri</span>)
17:         <span class="ruby-ivar">@feature</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Feature</span>.<span class="ruby-identifier">new</span>(
18:           <span class="ruby-keyword kw">nil</span>, 
19:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">value</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)), 
20:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Tags</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tag</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">name</span>}),
21:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>,
22:           <span class="ruby-identifier">legacy_name_for</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">description</span>),
23:           []
24:         )
25:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000043" class="method">
  <div id="M000043_title" class="title">
    <b>scenario</b>(statement)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000043_source')" id="l_M000043_source">show source</a> ]</p>
  <div id="M000043_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scenario</span>(<span class="ruby-identifier">statement</span>)
41:         <span class="ruby-identifier">scenario</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Scenario</span>.<span class="ruby-identifier">new</span>(
42:           <span class="ruby-ivar">@background</span>, 
43:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">value</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)), 
44:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Tags</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tag</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">name</span>}), 
45:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">line</span>, 
46:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>, 
47:           <span class="ruby-identifier">legacy_name_for</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">description</span>), 
48:           <span class="ruby-identifier">steps</span>=[]
49:         )
50:         <span class="ruby-ivar">@feature</span>.<span class="ruby-identifier">add_feature_element</span>(<span class="ruby-identifier">scenario</span>)
51:         <span class="ruby-ivar">@background</span>.<span class="ruby-identifier">feature_elements</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">scenario</span> <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@background</span>
52:         <span class="ruby-ivar">@step_container</span> = <span class="ruby-identifier">scenario</span>
53:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000044" class="method">
  <div id="M000044_title" class="title">
    <b>scenario_outline</b>(statement)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show source</a> ]</p>
  <div id="M000044_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 55</span>
55:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scenario_outline</span>(<span class="ruby-identifier">statement</span>)
56:         <span class="ruby-identifier">scenario_outline</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">ScenarioOutline</span>.<span class="ruby-identifier">new</span>(
57:           <span class="ruby-ivar">@background</span>, 
58:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Comment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">comment</span><span class="ruby-operator">|</span> <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">value</span>}.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)), 
59:           <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Tags</span>.<span class="ruby-identifier">new</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">tags</span>.<span class="ruby-identifier">map</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">tag</span><span class="ruby-operator">|</span> <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">name</span>}), 
60:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">line</span>, 
61:           <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>, 
62:           <span class="ruby-identifier">legacy_name_for</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">description</span>), 
63:           <span class="ruby-identifier">steps</span>=[],
64:           <span class="ruby-identifier">example_sections</span>=[]
65:         )
66:         <span class="ruby-ivar">@feature</span>.<span class="ruby-identifier">add_feature_element</span>(<span class="ruby-identifier">scenario_outline</span>)
67:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@background</span>
68:           <span class="ruby-ivar">@background</span> = <span class="ruby-ivar">@background</span>.<span class="ruby-identifier">dup</span>
69:           <span class="ruby-ivar">@background</span>.<span class="ruby-identifier">feature_elements</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">scenario_outline</span>
70:         <span class="ruby-keyword kw">end</span>
71:         <span class="ruby-ivar">@step_container</span> = <span class="ruby-identifier">scenario_outline</span>
72:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000046" class="method">
  <div id="M000046_title" class="title">
    <b>step</b>(statement, multiline_arg, result)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show source</a> ]</p>
  <div id="M000046_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 85</span>
85:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">step</span>(<span class="ruby-identifier">statement</span>, <span class="ruby-identifier">multiline_arg</span>, <span class="ruby-identifier">result</span>)
86:         <span class="ruby-ivar">@table_owner</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Step</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">statement</span>.<span class="ruby-identifier">line</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">keyword</span>, <span class="ruby-identifier">statement</span>.<span class="ruby-identifier">name</span>)
87:         <span class="ruby-identifier">multiline_arg</span> = <span class="ruby-identifier">rubify</span>(<span class="ruby-identifier">multiline_arg</span>)
88:         <span class="ruby-keyword kw">case</span>(<span class="ruby-identifier">multiline_arg</span>)
89:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Gherkin</span><span class="ruby-operator">::</span><span class="ruby-constant">Formatter</span><span class="ruby-operator">::</span><span class="ruby-constant">Model</span><span class="ruby-operator">::</span><span class="ruby-constant">PyString</span>
90:           <span class="ruby-ivar">@table_owner</span>.<span class="ruby-identifier">multiline_arg</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">PyString</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">multiline_arg</span>.<span class="ruby-identifier">value</span>)
91:         <span class="ruby-keyword kw">when</span> <span class="ruby-constant">Array</span>
92:           <span class="ruby-ivar">@table_owner</span>.<span class="ruby-identifier">multiline_arg</span> = <span class="ruby-constant">Ast</span><span class="ruby-operator">::</span><span class="ruby-constant">Table</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">matrix</span>(<span class="ruby-identifier">multiline_arg</span>))
93:         <span class="ruby-keyword kw">end</span>
94:         <span class="ruby-ivar">@step_container</span>.<span class="ruby-identifier">add_step</span>(<span class="ruby-ivar">@table_owner</span>)
95:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000048" class="method">
  <div id="M000048_title" class="title">
    <b>syntax_error</b>(state, event, legal_events, line)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000048_source')" id="l_M000048_source">show source</a> ]</p>
  <div id="M000048_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/cucumber/parser/gherkin_builder.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">syntax_error</span>(<span class="ruby-identifier">state</span>, <span class="ruby-identifier">event</span>, <span class="ruby-identifier">legal_events</span>, <span class="ruby-identifier">line</span>)
101:         <span class="ruby-comment cmt"># raise &quot;SYNTAX ERROR&quot;</span>
102:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>