  <div id="fileHeader">
    <h1>py_string.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/cucumber/ast/py_string.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 18:21:09 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Cucumber
  module Ast
    # Represents an inline argument in a step. Example:
    #
    #   Given the message
    #     &quot;&quot;&quot;
    #     I like
    #     Cucumber sandwich
    #     &quot;&quot;&quot;
    #
    # The text between the pair of &lt;tt&gt;&quot;&quot;&quot;&lt;/tt&gt; is stored inside a PyString,
    # which is yielded to the StepDefinition block as the last argument.
    #
    # The StepDefinition can then access the String via the #to_s method. In the
    # example above, that would return: &lt;tt&gt;&quot;I like\nCucumber sandwich&quot;&lt;/tt&gt;
    #
    # Note how the indentation from the source is stripped away.
    #
    class PyString #:nodoc:
      class Builder
        attr_reader :string

        def initialize
          @string = ''
        end

        def py_string(string, line_number)
          @string = string
        end

        def eof
        end
      end

      attr_accessor :file

      def self.default_arg_name
        &quot;string&quot;
      end

      def self.parse(text)
        builder = Builder.new
        lexer = Gherkin::I18nLexer.new(builder)
        lexer.scan(text)
        new(builder.string)
      end

      def initialize(string)
        @string = string
      end

      def to_step_definition_arg
        @string
      end

      def accept(visitor)
        return if Cucumber.wants_to_quit
        visitor.visit_py_string(@string)
      end
      
      def arguments_replaced(arguments) #:nodoc:
        string = @string
        arguments.each do |name, value|
          value ||= ''
          string = string.gsub(name, value)
        end
        PyString.new(string)
      end

      def has_text?(text)
        @string.index(text)
      end

      # For testing only
      def to_sexp #:nodoc:
        [:py_string, to_step_definition_arg]
      end
    end
  end
end
</pre>
    </div>