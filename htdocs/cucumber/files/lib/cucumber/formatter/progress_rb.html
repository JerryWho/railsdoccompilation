  <div id="fileHeader">
    <h1>progress.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/cucumber/formatter/progress.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:11:24 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'cucumber/formatter/console'

module Cucumber
  module Formatter
    class Progress &lt; Ast::Visitor
      include Console

      def initialize(step_mother, io, options)
        super(step_mother)
        @io = io
        @options = options
      end

      def visit_features(features)
        super
        @io.puts
        @io.puts
        print_summary
      end

      def visit_multiline_arg(multiline_arg)
        @multiline_arg = true
        super
        @multiline_arg = false
      end

      def visit_step_name(keyword, step_match, status, source_indent, background)
        progress(status) unless status == :outline
      end

      def visit_table_cell_value(value, width, status)
        progress(status) if (status != :thead) &amp;&amp; !@multiline_arg
      end

      private

      def print_summary
        print_steps(:pending)
        print_steps(:failed)
        print_counts
        print_snippets(@options)
      end

      CHARS = {
        :passed    =&gt; '.',
        :failed    =&gt; 'F',
        :undefined =&gt; 'U',
        :pending   =&gt; 'P',
        :skipped   =&gt; '-'
      }

      def progress(status)
        char = CHARS[status]
        @io.print(format_string(char, status))
        @io.flush
      end
      
    end
  end
end
</pre>
    </div>