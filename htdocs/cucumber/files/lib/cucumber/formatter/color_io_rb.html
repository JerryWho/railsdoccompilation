  <div id="fileHeader">
    <h1>color_io.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/cucumber/formatter/color_io.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Wed Dec 16 18:11:50 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'forwardable'

module Cucumber
  module Formatter
    # Adapter to make #puts/#print/#flush work with win32console
    class ColorIO #:nodoc:
      extend Forwardable
      def_delegators :@kernel, :puts, :print # win32console colours only work when sent to Kernel
      def_delegators :@stdout, :flush, :tty?, :write, :close

      def initialize(kernel, stdout)
        @kernel = kernel
        @stdout = stdout
      end

      # Ensure using &lt;&lt; still gets colours in win32console
      def &lt;&lt;(output)
        print(output)
        self
      end
    end
  end
end
</pre>
    </div>