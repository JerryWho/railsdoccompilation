  <div id="fileHeader">
    <h1>wire_packet.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/cucumber/wire_support/wire_packet.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Dec 28 12:18:34 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Cucumber
  module WireSupport
    # Represents the packet of data sent over the wire as JSON data, containing
    # a message and a hash of arguments
    class WirePacket
      class &lt;&lt; self
        def parse(raw)
          attributes = JSON.parse(raw.strip)
          message = attributes[0]
          params  = attributes[1]
          new(message, params)
        end
      end
      
      attr_reader :message, :params
      
      def initialize(message, params = nil)
        @message, @params = message, params
      end
      
      def to_json
        packet = [@message]
        packet &lt;&lt; @params if @params
        packet.to_json
      end
      
      def handle_with(handler)
        handler.send(&quot;handle_#{@message}&quot;, @params)
      end
    end
  end
end
</pre>
    </div>