  <div id="fileHeader">
    <h1>screenshots.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>examples/watir/features/support/screenshots.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 18:21:09 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre># This is an example of how you can set up screenshots for your
# browser testing. Just run cucumber with --format html --out report.html
#
# The code below will work on OS X or Windows (with IE Watir only).
# Adding support for other platforms should be easy - as long as there is a 
# ruby library or command line tool to take pictures.
#
module Screenshots
  if Cucumber::OS_X
    def embed_screenshot(id)
      `screencapture -t png #{id}.png`
      embed(&quot;#{id}.png&quot;, &quot;image/png&quot;)
    end
  elsif Cucumber::WINDOWS
    # http://wtr.rubyforge.org/rdoc/classes/Watir/ScreenCapture.html
    require 'watir/screen_capture'
    include Watir::ScreenCapture
    def embed_screenshot(id)
      screen_capture(&quot;#{id}.jpg&quot;, true)
      embed(&quot;#{id}.jpg&quot;, &quot;image/jpeg&quot;)
    end
  else
    # Other platforms...
    def embed_screenshot(id)
      STDERR.puts &quot;Sorry - no screenshots on your platform yet.&quot;
    end
  end
end
World(Screenshots)

After do
  embed_screenshot(&quot;screenshot-#{Time.new.to_i}&quot;)
end

# Other variants:
#
# Only take screenshot on failures
#
#   After do |scenario|
#     embed_screenshot(&quot;screenshot-#{Time.new.to_i}&quot;) if scenario.failed?
#   end
#
# Only take screenshot for scenarios or features tagged @screenshot
#
#   After(@screenshot) do
#     embed_screenshot(&quot;screenshot-#{Time.new.to_i}&quot;)
#   end
</pre>
    </div>