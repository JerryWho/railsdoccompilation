<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta name="Content-Type" content="text/html; charset=utf-8" />
<title>Class: Sass::Environment</title>
<link rel="stylesheet" href="../css/style.css" type="text/css" media="screen" charset="utf-8" />
<link rel="stylesheet" href="../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '..';
  if (relpath != '') relpath += '/';
</script>
<script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../js/app.js"></script>

  </head>
  <body>
    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (E)</a> &raquo; 
    <span class='title'><span class='object_link'><a href="../Sass.html" title="Sass (module)">Sass</a></span></span>
     &raquo; 
    <span class="title">Environment</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  <a id="class_list_link" href="#">Class List</a>
  <a id="method_list_link" href="#">Method List</a>
  <a id ="file_list_link" href="#">File List</a>
</div>

      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: Sass::Environment
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName"><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></span>
      
        <ul class="fullTree">
          <li><span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span></li>
          
            <li class="next">Sass::Environment</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">lib/sass/environment.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>The lexical environment for SassScript. This keeps track of variable and mixin definitions.</p>

<p>A new environment is created for each level of Sass nesting. This allows variables to be lexically scoped. The new environment refers to the environment in the upper scope, so it has access to variables defined in enclosing scopes, but new variables are defined locally.</p>

<p>Environment also keeps track of the <span class='object_link'><a href="Engine.html" title="Sass::Engine (class)">Engine</a></span> options so that they can be made available to <span class='object_link'><a href="Script/Functions.html" title="Sass::Script::Functions (module)">Script::Functions</a></span>.</p>

  </div>
</div>
<div class="tags">
  
</div>

  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#options-instance_method" title="#options (instance method)">- ({Symbol =&gt; Object}) <strong>options</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The options hash.</p></div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#parent-instance_method" title="#parent (instance method)">- (Environment) <strong>parent</strong> </a>
    

    
  </span>
  
  
    <span class="note title readonly">readonly</span>
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The enclosing environment, or nil if this is the global environment.</p></div></span>
  
</li>

    
  </ul>


  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (Environment) <strong>initialize</strong>(parent = nil) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A new instance of Environment.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#mixins_in_use-instance_method" title="#mixins_in_use (instance method)">- (Set&lt;String&gt;) <strong>mixins_in_use</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A set of names of mixins currently present in the stack.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pop_frame-instance_method" title="#pop_frame (instance method)">- <strong>pop_frame</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pop a stack frame from the mixin/include stack.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#prepare_frame-instance_method" title="#prepare_frame (instance method)">- <strong>prepare_frame</strong>(frame_info) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Like <span class='object_link'><a href="#push_frame-instance_method" title="Sass::Environment#push_frame (method)">Environment#push_frame</a></span>, but next time a stack frame is pushed, it will be merged with this frame.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_frame-instance_method" title="#push_frame (instance method)">- <strong>push_frame</strong>(frame_info) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Push a new stack frame onto the mixin/include stack.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#stack-instance_method" title="#stack (instance method)">- (Array&lt;{Symbol =&gt; Object}&gt;) <strong>stack</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>A list of stack frames in the mixin/include stack.</p></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Sass::Environment (class)">Environment</a></span></tt>) <strong>initialize</strong>(parent = nil) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of Environment</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Sass::Environment (class)">Environment</a></span></tt>)</span>
      
      
        <span class='name'>parent</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>See <span class='object_link'><a href="#parent-instance_method" title="Sass::Environment#parent (method)">#parent</a></span></p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


24
25
26
27
28
29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 24</span>

def initialize(parent = nil)
  @vars = {}
  @mixins = {}
  @parent = parent
  @stack = [] unless parent
  @mixins_in_use = Set.new unless parent
  set_var(&quot;important&quot;, Script::String.new(&quot;!important&quot;)) unless @parent
end</pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="options=-instance_method"></span>
      <span id="options-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="options-instance_method">
  
    - (<tt>{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>) <strong>options</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The options hash. See <a href="../file.SASS_REFERENCE.html#sass_options" title="the Sass options documentation">the Sass options documentation</a>.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 37</span>

def options
  @options || (parent &amp;&amp; parent.options) || {}
end</pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <span id="parent-instance_method"></span>
      <div class="method_details ">
  <p class="signature " id="parent-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Sass::Environment (class)">Environment</a></span></tt>) <strong>parent</strong>  <span class="extras">(readonly)</span>
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>The enclosing environment, or nil if this is the global environment.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Sass::Environment (class)">Environment</a></span></tt>)</span>
      
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 20</span>

def parent
  @parent
end</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="mixins_in_use-instance_method">
  
    - (<tt>Set&lt;String&gt;</tt>) <strong>mixins_in_use</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A set of names of mixins currently present in the stack.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Set&lt;String&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The mixin names.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


92
93
94</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 92</span>

def mixins_in_use
  @mixins_in_use ||= @parent.mixins_in_use
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="pop_frame-instance_method">
  
    - <strong>pop_frame</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Pop a stack frame from the mixin/include stack.</p>

  </div>
</div>
<div class="tags">
  
</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


74
75
76
77
78</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 74</span>

def pop_frame
  stack.pop if stack.last &amp;&amp; stack.last[:prepared]
  popped = stack.pop
  mixins_in_use.delete(popped[:mixin]) if popped &amp;&amp; popped[:mixin]
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="prepare_frame-instance_method">
  
    - <strong>prepare_frame</strong>(frame_info) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Like <span class='object_link'><a href="#push_frame-instance_method" title="Sass::Environment#push_frame (method)">#push_frame</a></span>, but next time a stack frame is pushed, it will be merged with this frame.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <span class='name'>frame_info</span>
      
      
      
        &mdash;
        <div class='inline'><p>Same as for <span class='object_link'><a href="#push_frame-instance_method" title="Sass::Environment#push_frame (method)">#push_frame</a></span>.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


69
70
71</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 69</span>

def prepare_frame(frame_info)
  push_frame(frame_info.merge(:prepared =&gt; true))
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="push_frame-instance_method">
  
    - <strong>push_frame</strong>(frame_info) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Push a new stack frame onto the mixin/include stack.</p>

  </div>
</div>
<div class="tags">
  <h3>Parameters:</h3>
<ul class="param">
  
    <li>
      
        <span class='type'>(<tt>{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}</tt>)</span>
      
      
        <span class='name'>frame_info</span>
      
      
      
        &mdash;
        <div class='inline'><p>Frame information has the following keys:</p>

<dl>
<dt><code>:filename</code></dt>

<dd>The name of the file in which the lexical scope changed.</dd>

<dt><code>:mixin</code></dt>

<dd>The name of the mixin in which the lexical scope changed, or <code>nil</code> if it wasn&#8217;t within in a mixin.</dd>

<dt><code>:line</code></dt>

<dd>The line of the file on which the lexical scope changed. Never nil.</dd>
</dl></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


55
56
57
58
59
60
61
62
63</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 55</span>

def push_frame(frame_info)
  if stack.last &amp;&amp; stack.last[:prepared]
    stack.last.delete(:prepared)
    stack.last.merge!(frame_info)
  else
    stack.push(frame_info)
  end
  mixins_in_use &lt;&lt; stack.last[:mixin] if stack.last[:mixin] &amp;&amp; !stack.last[:prepared]
end</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="stack-instance_method">
  
    - (<tt>Array&lt;{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}&gt;</tt>) <strong>stack</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A list of stack frames in the mixin/include stack. The last element in the list is the most deeply-nested frame.</p>

  </div>
</div>
<div class="tags">
  <h3>Returns:</h3>
<ul class="return">
  
    <li>
      
        <span class='type'>(<tt>Array&lt;{Symbol =&gt; <span class='object_link'><a href="../Object.html" title="Object (class)">Object</a></span>}&gt;</tt>)</span>
      
      
      
      
        &mdash;
        <div class='inline'><p>The stack frames, of the form passed to <span class='object_link'><a href="#push_frame-instance_method" title="Sass::Environment#push_frame (method)">#push_frame</a></span>.</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


85
86
87</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/sass/environment.rb', line 85</span>

def stack
  @stack ||= @parent.stack
end</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer">
  Generated on Thu Nov  4 19:12:45 2010 by 
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.6.1 (ruby-1.9.2).
</div>

  </body>
</html>