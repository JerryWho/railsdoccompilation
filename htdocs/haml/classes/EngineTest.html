  <div id="C00000006">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />EngineTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/engine_test_rb.html');">test/haml/engine_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000271&name=data_hash" >data_hash</a></li>
  <li><a href="index.html?a=M000272&name=data_val" >data_val</a></li>
  <li><a href="index.html?a=M000140&name=engine" >engine</a></li>
  <li><a href="index.html?a=M000139&name=render" >render</a></li>
  <li><a href="index.html?a=M000197&name=test_ampersand_equals_inline_should_escape" >test_ampersand_equals_inline_should_escape</a></li>
  <li><a href="index.html?a=M000196&name=test_ampersand_equals_should_escape" >test_ampersand_equals_should_escape</a></li>
  <li><a href="index.html?a=M000198&name=test_ampersand_equals_should_escape_before_preserve" >test_ampersand_equals_should_escape_before_preserve</a></li>
  <li><a href="index.html?a=M000257&name=test_arbitrary_output_option" >test_arbitrary_output_option</a></li>
  <li><a href="index.html?a=M000303&name=test_ascii_incompatible_encoding_error" >test_ascii_incompatible_encoding_error</a></li>
  <li><a href="index.html?a=M000165&name=test_attr_hashes_not_modified" >test_attr_hashes_not_modified</a></li>
  <li><a href="index.html?a=M000220&name=test_attr_wrapper" >test_attr_wrapper</a></li>
  <li><a href="index.html?a=M000164&name=test_attribute_hash_with_newlines" >test_attribute_hash_with_newlines</a></li>
  <li><a href="index.html?a=M000144&name=test_attributes_should_render_correctly" >test_attributes_should_render_correctly</a></li>
  <li><a href="index.html?a=M000150&name=test_attributes_with_to_s" >test_attributes_with_to_s</a></li>
  <li><a href="index.html?a=M000222&name=test_attrs_parsed_correctly" >test_attrs_parsed_correctly</a></li>
  <li><a href="index.html?a=M000255&name=test_auto_preserve_unless_ugly" >test_auto_preserve_unless_ugly</a></li>
  <li><a href="index.html?a=M000221&name=test_autoclose_option" >test_autoclose_option</a></li>
  <li><a href="index.html?a=M000235&name=test_balanced_conditional_comments" >test_balanced_conditional_comments</a></li>
  <li><a href="index.html?a=M000200&name=test_bang_equals_inline_should_not_escape" >test_bang_equals_inline_should_not_escape</a></li>
  <li><a href="index.html?a=M000199&name=test_bang_equals_should_not_escape" >test_bang_equals_should_not_escape</a></li>
  <li><a href="index.html?a=M000273&name=test_basic_new_attributes" >test_basic_new_attributes</a></li>
  <li><a href="index.html?a=M000170&name=test_boolean_attributes" >test_boolean_attributes</a></li>
  <li><a href="index.html?a=M000176&name=test_both_case_indentation_work_with_deeply_nested_code" >test_both_case_indentation_work_with_deeply_nested_code</a></li>
  <li><a href="index.html?a=M000171&name=test_both_whitespace_nukes_work_together" >test_both_whitespace_nukes_work_together</a></li>
  <li><a href="index.html?a=M000307&name=test_case_insensitive_coding_comment" >test_case_insensitive_coding_comment</a></li>
  <li><a href="index.html?a=M000147&name=test_class_attr_with_array" >test_class_attr_with_array</a></li>
  <li><a href="index.html?a=M000233&name=test_compile_error" >test_compile_error</a></li>
  <li><a href="index.html?a=M000301&name=test_convert_template_def_method" >test_convert_template_def_method</a></li>
  <li><a href="index.html?a=M000300&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000297&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000299&name=test_convert_template_render_proc" >test_convert_template_render_proc</a></li>
  <li><a href="index.html?a=M000223&name=test_correct_parsing_with_brackets" >test_correct_parsing_with_brackets</a></li>
  <li><a href="index.html?a=M000167&name=test_cr_newline" >test_cr_newline</a></li>
  <li><a href="index.html?a=M000238&name=test_css_filter" >test_css_filter</a></li>
  <li><a href="index.html?a=M000145&name=test_css_id_as_attribute_should_be_appended_with_underscore" >test_css_id_as_attribute_should_be_appended_with_underscore</a></li>
  <li><a href="index.html?a=M000185&name=test_curly_brace" >test_curly_brace</a></li>
  <li><a href="index.html?a=M000252&name=test_def_method_haml_buffer_gets_reset_even_with_exception" >test_def_method_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000248&name=test_def_method_locals" >test_def_method_locals</a></li>
  <li><a href="index.html?a=M000247&name=test_def_method_with_module" >test_def_method_with_module</a></li>
  <li><a href="index.html?a=M000296&name=test_default_encoding" >test_default_encoding</a></li>
  <li><a href="index.html?a=M000305&name=test_different_coding_comment_than_encoding" >test_different_coding_comment_than_encoding</a></li>
  <li><a href="index.html?a=M000306&name=test_different_coding_than_system" >test_different_coding_than_system</a></li>
  <li><a href="index.html?a=M000219&name=test_doctypes" >test_doctypes</a></li>
  <li><a href="index.html?a=M000202&name=test_dynamic_attributes_should_be_escaped" >test_dynamic_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000163&name=test_dynamic_attributes_with_empty_attr" >test_dynamic_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000149&name=test_dynamic_attributes_with_no_content" >test_dynamic_attributes_with_no_content</a></li>
  <li><a href="index.html?a=M000229&name=test_dynamic_attrs_shouldnt_register_as_literal_values" >test_dynamic_attrs_shouldnt_register_as_literal_values</a></li>
  <li><a href="index.html?a=M000230&name=test_dynamic_attrs_with_self_closed_tag" >test_dynamic_attrs_with_self_closed_tag</a></li>
  <li><a href="index.html?a=M000259&name=test_dynamic_hashes_with_suppress_eval" >test_dynamic_hashes_with_suppress_eval</a></li>
  <li><a href="index.html?a=M000276&name=test_dynamic_new_attributes" >test_dynamic_new_attributes</a></li>
  <li><a href="index.html?a=M000314&name=test_emacs_coding_comment" >test_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000315&name=test_emacs_encoding_comment" >test_emacs_encoding_comment</a></li>
  <li><a href="index.html?a=M000312&name=test_emacs_prefixed_coding_comment" >test_emacs_prefixed_coding_comment</a></li>
  <li><a href="index.html?a=M000313&name=test_emacs_suffixed_coding_comment" >test_emacs_suffixed_coding_comment</a></li>
  <li><a href="index.html?a=M000224&name=test_empty_attrs" >test_empty_attrs</a></li>
  <li><a href="index.html?a=M000236&name=test_empty_filter" >test_empty_filter</a></li>
  <li><a href="index.html?a=M000141&name=test_empty_render" >test_empty_render</a></li>
  <li><a href="index.html?a=M000143&name=test_empty_render_should_remain_empty" >test_empty_render_should_remain_empty</a></li>
  <li><a href="index.html?a=M000302&name=test_encoding_error" >test_encoding_error</a></li>
  <li><a href="index.html?a=M000166&name=test_end_of_file_multiline" >test_end_of_file_multiline</a></li>
  <li><a href="index.html?a=M000180&name=test_end_with_method_call" >test_end_with_method_call</a></li>
  <li><a href="index.html?a=M000177&name=test_equals_block_with_ugly" >test_equals_block_with_ugly</a></li>
  <li><a href="index.html?a=M000309&name=test_equals_coding_comment" >test_equals_coding_comment</a></li>
  <li><a href="index.html?a=M000189&name=test_erb_filter_with_multiline_expr" >test_erb_filter_with_multiline_expr</a></li>
  <li><a href="index.html?a=M000186&name=test_escape_html" >test_escape_html</a></li>
  <li><a href="index.html?a=M000204&name=test_escaped_inline_string_double_equals" >test_escaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000209&name=test_escaped_inline_string_interpolation" >test_escaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000159&name=test_escaped_interpolation" >test_escaped_interpolation</a></li>
  <li><a href="index.html?a=M000285&name=test_escaped_loud_ruby_multiline" >test_escaped_loud_ruby_multiline</a></li>
  <li><a href="index.html?a=M000291&name=test_escaped_ruby_multiline_in_tag" >test_escaped_ruby_multiline_in_tag</a></li>
  <li><a href="index.html?a=M000206&name=test_escaped_string_double_equals" >test_escaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000211&name=test_escaped_string_interpolation" >test_escaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000232&name=test_exception" >test_exception</a></li>
  <li><a href="index.html?a=M000231&name=test_exception_line" >test_exception_line</a></li>
  <li><a href="index.html?a=M000298&name=test_fake_ascii_encoding" >test_fake_ascii_encoding</a></li>
  <li><a href="index.html?a=M000217&name=test_filename_and_line" >test_filename_and_line</a></li>
  <li><a href="index.html?a=M000195&name=test_filter_with_newline_and_interp" >test_filter_with_newline_and_interp</a></li>
  <li><a href="index.html?a=M000287&name=test_flattened_loud_ruby_multiline" >test_flattened_loud_ruby_multiline</a></li>
  <li><a href="index.html?a=M000142&name=test_flexible_tabulation" >test_flexible_tabulation</a></li>
  <li><a href="index.html?a=M000251&name=test_haml_buffer_gets_reset_even_with_exception" >test_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000268&name=test_html5_data_attributes" >test_html5_data_attributes</a></li>
  <li><a href="index.html?a=M000270&name=test_html5_data_attributes_with_attr_method" >test_html5_data_attributes_with_attr_method</a></li>
  <li><a href="index.html?a=M000269&name=test_html5_data_attributes_with_multiple_defs" >test_html5_data_attributes_with_multiple_defs</a></li>
  <li><a href="index.html?a=M000267&name=test_html5_doctype" >test_html5_doctype</a></li>
  <li><a href="index.html?a=M000194&name=test_html_attributes_with_hash" >test_html_attributes_with_hash</a></li>
  <li><a href="index.html?a=M000263&name=test_html_doesnt_add_slash_to_self_closing_tags" >test_html_doesnt_add_slash_to_self_closing_tags</a></li>
  <li><a href="index.html?a=M000265&name=test_html_has_different_doctype" >test_html_has_different_doctype</a></li>
  <li><a href="index.html?a=M000261&name=test_html_has_no_self_closing_tags" >test_html_has_no_self_closing_tags</a></li>
  <li><a href="index.html?a=M000264&name=test_html_ignores_xml_prolog_declaration" >test_html_ignores_xml_prolog_declaration</a></li>
  <li><a href="index.html?a=M000262&name=test_html_renders_empty_node_with_closing_tag" >test_html_renders_empty_node_with_closing_tag</a></li>
  <li><a href="index.html?a=M000148&name=test_id_attr_with_array" >test_id_attr_with_array</a></li>
  <li><a href="index.html?a=M000193&name=test_if_without_content_and_else" >test_if_without_content_and_else</a></li>
  <li><a href="index.html?a=M000179&name=test_inline_if" >test_inline_if</a></li>
  <li><a href="index.html?a=M000214&name=test_inline_scripts_should_respect_escape_html_option" >test_inline_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000156&name=test_interpolation" >test_interpolation</a></li>
  <li><a href="index.html?a=M000158&name=test_interpolation_at_the_beginning_of_a_line" >test_interpolation_at_the_beginning_of_a_line</a></li>
  <li><a href="index.html?a=M000157&name=test_interpolation_in_the_middle_of_a_string" >test_interpolation_in_the_middle_of_a_string</a></li>
  <li><a href="index.html?a=M000188&name=test_javascript_filter_with_dynamic_interp_and_escape_html" >test_javascript_filter_with_dynamic_interp_and_escape_html</a></li>
  <li><a href="index.html?a=M000239&name=test_local_assigns_dont_modify_class" >test_local_assigns_dont_modify_class</a></li>
  <li><a href="index.html?a=M000228&name=test_locals" >test_locals</a></li>
  <li><a href="index.html?a=M000284&name=test_loud_ruby_multiline" >test_loud_ruby_multiline</a></li>
  <li><a href="index.html?a=M000288&name=test_loud_ruby_multiline_with_block" >test_loud_ruby_multiline_with_block</a></li>
  <li><a href="index.html?a=M000155&name=test_multi_render" >test_multi_render</a></li>
  <li><a href="index.html?a=M000184&name=test_multiline_in_filter" >test_multiline_in_filter</a></li>
  <li><a href="index.html?a=M000281&name=test_multiline_new_attribute" >test_multiline_new_attribute</a></li>
  <li><a href="index.html?a=M000183&name=test_multiline_with_colon_after_filter" >test_multiline_with_colon_after_filter</a></li>
  <li><a href="index.html?a=M000181&name=test_nested_end_with_method_call" >test_nested_end_with_method_call</a></li>
  <li><a href="index.html?a=M000282&name=test_new_and_old_attributes" >test_new_and_old_attributes</a></li>
  <li><a href="index.html?a=M000275&name=test_new_attribute_classes" >test_new_attribute_classes</a></li>
  <li><a href="index.html?a=M000280&name=test_new_attribute_escaping" >test_new_attribute_escaping</a></li>
  <li><a href="index.html?a=M000274&name=test_new_attribute_ids" >test_new_attribute_ids</a></li>
  <li><a href="index.html?a=M000277&name=test_new_attribute_interpolation" >test_new_attribute_interpolation</a></li>
  <li><a href="index.html?a=M000279&name=test_new_attribute_parsing" >test_new_attribute_parsing</a></li>
  <li><a href="index.html?a=M000187&name=test_new_attrs_with_hash" >test_new_attrs_with_hash</a></li>
  <li><a href="index.html?a=M000225&name=test_nil_attrs" >test_nil_attrs</a></li>
  <li><a href="index.html?a=M000227&name=test_nil_class_with_syntactic_class" >test_nil_class_with_syntactic_class</a></li>
  <li><a href="index.html?a=M000226&name=test_nil_id_with_syntactic_id" >test_nil_id_with_syntactic_id</a></li>
  <li><a href="index.html?a=M000172&name=test_nil_option" >test_nil_option</a></li>
  <li><a href="index.html?a=M000151&name=test_nil_should_render_empty_tag" >test_nil_should_render_empty_tag</a></li>
  <li><a href="index.html?a=M000160&name=test_nil_tag_value_should_render_as_empty" >test_nil_tag_value_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000243&name=test_non_literal_attributes" >test_non_literal_attributes</a></li>
  <li><a href="index.html?a=M000241&name=test_object_ref_before_attrs" >test_object_ref_before_attrs</a></li>
  <li><a href="index.html?a=M000242&name=test_object_ref_with_custom_haml_class" >test_object_ref_with_custom_haml_class</a></li>
  <li><a href="index.html?a=M000240&name=test_object_ref_with_nil_id" >test_object_ref_with_nil_id</a></li>
  <li><a href="index.html?a=M000153&name=test_one_liner_should_be_one_line" >test_one_liner_should_be_one_line</a></li>
  <li><a href="index.html?a=M000154&name=test_one_liner_with_newline_shouldnt_be_one_line" >test_one_liner_with_newline_shouldnt_be_one_line</a></li>
  <li><a href="index.html?a=M000319&name=test_one_of_several_emacs_comments" >test_one_of_several_emacs_comments</a></li>
  <li><a href="index.html?a=M000175&name=test_outer_whitespace_nuke_with_empty_script" >test_outer_whitespace_nuke_with_empty_script</a></li>
  <li><a href="index.html?a=M000178&name=test_plain_equals_with_ugly" >test_plain_equals_with_ugly</a></li>
  <li><a href="index.html?a=M000169&name=test_pre_code" >test_pre_code</a></li>
  <li><a href="index.html?a=M000310&name=test_prefixed_coding_comment" >test_prefixed_coding_comment</a></li>
  <li><a href="index.html?a=M000320&name=test_prefixed_emacs_coding_comment" >test_prefixed_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000316&name=test_quoted_emacs_coding_comment" >test_quoted_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000253&name=test_render_proc_haml_buffer_gets_reset_even_with_exception" >test_render_proc_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000249&name=test_render_proc_locals" >test_render_proc_locals</a></li>
  <li><a href="index.html?a=M000250&name=test_render_proc_with_binding" >test_render_proc_with_binding</a></li>
  <li><a href="index.html?a=M000244&name=test_render_should_accept_a_binding_as_scope" >test_render_should_accept_a_binding_as_scope</a></li>
  <li><a href="index.html?a=M000146&name=test_ruby_code_should_work_inside_attributes" >test_ruby_code_should_work_inside_attributes</a></li>
  <li><a href="index.html?a=M000294&name=test_ruby_multiline_after_filter" >test_ruby_multiline_after_filter</a></li>
  <li><a href="index.html?a=M000290&name=test_ruby_multiline_in_tag" >test_ruby_multiline_in_tag</a></li>
  <li><a href="index.html?a=M000293&name=test_ruby_multiline_with_normal_multiline" >test_ruby_multiline_with_normal_multiline</a></li>
  <li><a href="index.html?a=M000304&name=test_same_coding_comment_as_encoding" >test_same_coding_comment_as_encoding</a></li>
  <li><a href="index.html?a=M000215&name=test_script_ending_in_comment_should_render_when_html_is_escaped" >test_script_ending_in_comment_should_render_when_html_is_escaped</a></li>
  <li><a href="index.html?a=M000216&name=test_script_with_if_shouldnt_output" >test_script_with_if_shouldnt_output</a></li>
  <li><a href="index.html?a=M000213&name=test_scripts_should_respect_escape_html_option" >test_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000182&name=test_silent_end_with_stuff" >test_silent_end_with_stuff</a></li>
  <li><a href="index.html?a=M000283&name=test_silent_ruby_multiline" >test_silent_ruby_multiline</a></li>
  <li><a href="index.html?a=M000289&name=test_silent_ruby_multiline_with_block" >test_silent_ruby_multiline_with_block</a></li>
  <li><a href="index.html?a=M000190&name=test_silent_script_with_hyphen_case" >test_silent_script_with_hyphen_case</a></li>
  <li><a href="index.html?a=M000191&name=test_silent_script_with_hyphen_end" >test_silent_script_with_hyphen_end</a></li>
  <li><a href="index.html?a=M000192&name=test_silent_script_with_hyphen_end_and_block" >test_silent_script_with_hyphen_end_and_block</a></li>
  <li><a href="index.html?a=M000201&name=test_static_attributes_should_be_escaped" >test_static_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000162&name=test_static_attributes_with_empty_attr" >test_static_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000258&name=test_static_hashes" >test_static_hashes</a></li>
  <li><a href="index.html?a=M000218&name=test_stop_eval" >test_stop_eval</a></li>
  <li><a href="index.html?a=M000203&name=test_string_double_equals_should_be_esaped" >test_string_double_equals_should_be_esaped</a></li>
  <li><a href="index.html?a=M000208&name=test_string_interpolation_should_be_esaped" >test_string_interpolation_should_be_esaped</a></li>
  <li><a href="index.html?a=M000152&name=test_strings_should_get_stripped_inside_tags" >test_strings_should_get_stripped_inside_tags</a></li>
  <li><a href="index.html?a=M000311&name=test_suffixed_coding_comment" >test_suffixed_coding_comment</a></li>
  <li><a href="index.html?a=M000321&name=test_suffixed_emacs_coding_comment" >test_suffixed_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000161&name=test_tag_with_failed_if_should_render_as_empty" >test_tag_with_failed_if_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000168&name=test_textareas" >test_textareas</a></li>
  <li><a href="index.html?a=M000278&name=test_truthy_new_attributes" >test_truthy_new_attributes</a></li>
  <li><a href="index.html?a=M000237&name=test_ugly_filter" >test_ugly_filter</a></li>
  <li><a href="index.html?a=M000254&name=test_ugly_true" >test_ugly_true</a></li>
  <li><a href="index.html?a=M000234&name=test_unbalanced_brackets" >test_unbalanced_brackets</a></li>
  <li><a href="index.html?a=M000205&name=test_unescaped_inline_string_double_equals" >test_unescaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000210&name=test_unescaped_inline_string_interpolation" >test_unescaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000286&name=test_unescaped_loud_ruby_multiline" >test_unescaped_loud_ruby_multiline</a></li>
  <li><a href="index.html?a=M000292&name=test_unescaped_ruby_multiline_in_tag" >test_unescaped_ruby_multiline_in_tag</a></li>
  <li><a href="index.html?a=M000207&name=test_unescaped_string_double_equals" >test_unescaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000212&name=test_unescaped_string_interpolation" >test_unescaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000260&name=test_utf8_attrs" >test_utf8_attrs</a></li>
  <li><a href="index.html?a=M000295&name=test_utf_8_bom" >test_utf_8_bom</a></li>
  <li><a href="index.html?a=M000308&name=test_whitespace_insensitive_coding_comment" >test_whitespace_insensitive_coding_comment</a></li>
  <li><a href="index.html?a=M000318&name=test_whitespace_insensitive_emacs_coding_comment" >test_whitespace_insensitive_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000317&name=test_whitespace_insensitive_emacs_coding_comment" >test_whitespace_insensitive_emacs_coding_comment</a></li>
  <li><a href="index.html?a=M000173&name=test_whitespace_nuke_with_both_newlines" >test_whitespace_nuke_with_both_newlines</a></li>
  <li><a href="index.html?a=M000174&name=test_whitespace_nuke_with_tags_and_else" >test_whitespace_nuke_with_tags_and_else</a></li>
  <li><a href="index.html?a=M000256&name=test_xhtml_output_option" >test_xhtml_output_option</a></li>
  <li><a href="index.html?a=M000266&name=test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html" >test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</a></li>
  <li><a href="index.html?a=M000245&name=test_yield_should_work_with_binding" >test_yield_should_work_with_binding</a></li>
  <li><a href="index.html?a=M000246&name=test_yield_should_work_with_def_method" >test_yield_should_work_with_def_method</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/EngineTest/CustomHamlClass.html');" class="link">EngineTest::CustomHamlClass</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">EXCEPTION_MAP</td>
    <td>=</td>
    <td class="attr-value">{     &quot;!!!\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a header command is illegal.&quot;,     &quot;a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within plain text is illegal.&quot;,     &quot;/ a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;,     &quot;% a&quot; =&gt; 'Invalid tag: &quot;% a&quot;.',     &quot;%p a\n  b&quot; =&gt; &quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;,     &quot;%p=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p/\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;,     &quot;:a\n  b&quot; =&gt; ['Filter &quot;a&quot; is not defined.', 1],     &quot;:a= b&quot; =&gt; 'Invalid filter name &quot;:a= b&quot;.',     &quot;.&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.#&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.{} a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.() a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.= a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%p..a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%a/ b&quot; =&gt; &quot;Self-closing tags can't have content.&quot;,     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}/ e&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}=&quot; =&gt; [&quot;There's no Ruby code for = to evaluate.&quot;, 2],     &quot;%p.{:a =&gt; 'b',\n:c =&gt; 'd'} e&quot; =&gt; [&quot;Illegal element: classes and ids must have values.&quot;, 1],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n%p/ a&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; raise('foo'),\n:e =&gt; 'f'}&quot; =&gt; [&quot;foo&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; raise('foo')}&quot; =&gt; [&quot;foo&quot;, 3],     &quot; %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;  %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;- end&quot; =&gt; &lt;&lt;MESSAGE.rstrip, You don't need to use &quot;- end&quot; in Haml. Un-indent to close a block: - if foo?   %strong Foo! - else   Not foo. %p This line is un-indented, so it isn't part of the &quot;if&quot; block MESSAGE .rstrip,     &quot; \n\t\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;\n\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;%p\n  foo\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n%p\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n\t\tfoo\n\tfoo&quot; =&gt; [&quot;Inconsistent indentation: 1 tab was used for indentation, but the rest of the document was indented using 2 tabs.&quot;, 3],     &quot;%p\n  foo\n   foo&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n  %p\n   bar&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n  :plain\n     bar\n   \t  baz&quot; =&gt; ['Inconsistent indentation: &quot;   \t  &quot; was used for indentation, but the rest of the document was indented using 2 spaces.', 4],     &quot;%p\n  foo\n%p\n    bar&quot; =&gt; [&quot;The line was indented 2 levels deeper than the previous line.&quot;, 4],     &quot;%p\n  foo\n  %p\n        bar&quot; =&gt; [&quot;The line was indented 3 levels deeper than the previous line.&quot;, 4],     &quot;%p\n \tfoo&quot; =&gt; [&quot;Indentation can't use both tabs and spaces.&quot;, 2],     &quot;%p(&quot; =&gt; &quot;Invalid attribute list: \&quot;(\&quot;.&quot;,     &quot;%p(foo=\nbar)&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo=\&quot;.&quot;, 1],     &quot;%p(foo=)&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo=)\&quot;.&quot;,     &quot;%p(foo 'bar')&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo 'bar')\&quot;.&quot;,     &quot;%p(foo 'bar'\nbaz='bang')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo 'bar'\&quot;.&quot;, 1],     &quot;%p(foo='bar'\nbaz 'bang'\nbip='bop')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo='bar' baz 'bang'\&quot;.&quot;, 2],     &quot;%p{:foo =&gt; 'bar' :bar =&gt; 'baz'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; }&quot; =&gt; :compile,     &quot;%p{=&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar}&quot; =&gt; :compile,     &quot;%p{'foo =&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar\&quot;}&quot; =&gt; :compile,      # Regression tests     &quot;- raise 'foo'\n\n\n\nbar&quot; =&gt; [&quot;foo&quot;, 1],     &quot;= 'foo'\n-raise 'foo'&quot; =&gt; [&quot;foo&quot;, 2],     &quot;\n\n\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p foo |\n   bar |\n   baz |\nbop\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 5],     &quot;foo\n\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within plain text is illegal.&quot;, 4],     &quot;%p/\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;, 3],     &quot;%p foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;, 3],     &quot;/ foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;, 3],     &quot;!!!\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a header command is illegal.&quot;, 3],     &quot;foo\n:ruby\n  1\n  2\n  3\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],     &quot;foo\n:erb\n  1\n  2\n  3\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],     &quot;foo\n:plain\n  1\n  2\n  3\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],     &quot;foo\n:plain\n  1\n  2\n  3\n4\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 7],     &quot;foo\n:plain\n  1\n  2\n  3\#{''}\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],     &quot;foo\n:plain\n  1\n  2\n  3\#{''}\n4\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 7],     &quot;foo\n:plain\n  1\n  2\n  \#{raise 'foo'}&quot; =&gt; [&quot;foo&quot;, 5],     &quot;= raise 'foo'\nfoo\nbar\nbaz\nbang&quot; =&gt; [&quot;foo&quot;, 1],   }</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
A map of erroneous <a href="index.html?a=C00000072&name=Haml">Haml</a>
documents to the error messages they should produce. The error messages may
be arrays; if so, the second element should be the line number that should
be reported for the error. If this isn&#8217;t provided, the tests will
assume the line number should be the last line of the document.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">User</td>
    <td>=</td>
    <td class="attr-value">Struct.new('User', :id)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000271" class="method">
  <div id="M000271_title" class="title">
    <b>data_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000271_source')" id="l_M000271_source">show source</a> ]</p>
  <div id="M000271_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1305</span>
1305:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data_hash</span>
1306:         {<span class="ruby-identifier">:data</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bang&quot;</span>}}
1307:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000272" class="method">
  <div id="M000272_title" class="title">
    <b>data_val</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000272_source')" id="l_M000272_source">show source</a> ]</p>
  <div id="M000272_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1309</span>
1309:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data_val</span>
1310:         {<span class="ruby-identifier">:data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;dat&quot;</span>}
1311:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000140" class="method">
  <div id="M000140_title" class="title">
    <b>engine</b>(text, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show source</a> ]</p>
  <div id="M000140_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 105</span>
105:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
106:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>]
107:       <span class="ruby-comment cmt"># use caller method name as fake filename. useful for debugging</span>
108:       <span class="ruby-identifier">i</span> = <span class="ruby-value">-1</span>
109:       <span class="ruby-identifier">caller</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/`(.+?)'/</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'test_'</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
110:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>] = <span class="ruby-node">&quot;(#{$1})&quot;</span>
111:     <span class="ruby-keyword kw">end</span>
112:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
113:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000139" class="method">
  <div id="M000139_title" class="title">
    <b>render</b>(text, options = {}, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show source</a> ]</p>
  <div id="M000139_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
100:     <span class="ruby-identifier">scope</span>  = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:scope</span>)  <span class="ruby-operator">||</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
101:     <span class="ruby-identifier">locals</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:locals</span>) <span class="ruby-operator">||</span> {}
102:     <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
103:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000197" class="method">
  <div id="M000197_title" class="title">
    <b>test_ampersand_equals_inline_should_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000197_source')" id="l_M000197_source">show source</a> ]</p>
  <div id="M000197_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 752</span>
752:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_inline_should_escape</span>
753:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
754:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000196" class="method">
  <div id="M000196_title" class="title">
    <b>test_ampersand_equals_should_escape</b>()
  </div>
  <div class="description">
  <p>
HTML escaping tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000196_source')" id="l_M000196_source">show source</a> ]</p>
  <div id="M000196_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 748</span>
748:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape</span>
749:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
750:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000198" class="method">
  <div id="M000198_title" class="title">
    <b>test_ampersand_equals_should_escape_before_preserve</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000198_source')" id="l_M000198_source">show source</a> ]</p>
  <div id="M000198_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 756</span>
756:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape_before_preserve</span>
757:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;foo&amp;#x000A;bar&lt;/textarea&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea&amp;= &quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
758:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000257" class="method">
  <div id="M000257_title" class="title">
    <b>test_arbitrary_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000257_source')" id="l_M000257_source">show source</a> ]</p>
  <div id="M000257_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1226</span>
1226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_arbitrary_output_option</span>
1227:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-value str">&quot;Invalid output format :html1&quot;</span>) { <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html1</span>) }
1228:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000303" class="method">
  <div id="M000303_title" class="title">
    <b>test_ascii_incompatible_encoding_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000303_source')" id="l_M000303_source">show source</a> ]</p>
  <div id="M000303_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1700</span>
1700:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ascii_incompatible_encoding_error</span>
1701:       <span class="ruby-identifier">template</span> = <span class="ruby-value str">&quot;foo\nbar\nb_z&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;utf-16le&quot;</span>)
1702:       <span class="ruby-identifier">template</span>[<span class="ruby-value">9</span>] = <span class="ruby-value str">&quot;\xFE&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;utf-16le&quot;</span>)
1703:       <span class="ruby-identifier">render</span>(<span class="ruby-identifier">template</span>)
1704:       <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1705:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1706:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">3</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">line</span>)
1707:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Invalid UTF-16LE character &quot;\xFE&quot;'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
1708:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000165" class="method">
  <div id="M000165_title" class="title">
    <b>test_attr_hashes_not_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show source</a> ]</p>
  <div id="M000165_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 265</span>
265:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_hashes_not_modified</span>
266:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>}
267:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div color='red'&gt;&lt;/div&gt;\n&lt;div class='special' color='red'&gt;&lt;/div&gt;\n&lt;div color='red'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{hash}\n.special{hash}\n%div{hash}\n&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:hash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">hash</span>}))
268:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">hash</span>, {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>})
269:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000220" class="method">
  <div id="M000220_title" class="title">
    <b>test_attr_wrapper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000220_source')" id="l_M000220_source">show source</a> ]</p>
  <div id="M000220_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 919</span>
919:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_wrapper</span>
920:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p strange=*attrs*&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :strange =&gt; 'attrs'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'*'</span>))
921:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo\&quot;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
922:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;quo'te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\\'te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
923:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;q'uo&amp;quot;te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'q\\'uo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
924:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot; ?&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! XML&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
925:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000164" class="method">
  <div id="M000164_title" class="title">
    <b>test_attribute_hash_with_newlines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show source</a> ]</p>
  <div id="M000164_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 258</span>
258:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_hash_with_newlines</span>
259:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;foop&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'} foop&quot;</span>))
260:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;\n  foop\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}\n  foop&quot;</span>))
261:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}/&quot;</span>))
262:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' e='f'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd',\n   :e =&gt; 'f'}&quot;</span>))
263:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000144" class="method">
  <div id="M000144_title" class="title">
    <b>test_attributes_should_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show source</a> ]</p>
  <div id="M000144_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 132</span>
132:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_should_render_correctly</span>
133:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000150" class="method">
  <div id="M000150_title" class="title">
    <b>test_attributes_with_to_s</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show source</a> ]</p>
  <div id="M000150_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_with_to_s</span>
183:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_2'&gt;&lt;/p&gt;\n&lt;p class='2 foo'&gt;&lt;/p&gt;\n&lt;p blaz='2'&gt;&lt;/p&gt;\n&lt;p 2='2'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{:id =&gt; 1+1}\n%p.foo{:class =&gt; 1+1}\n%p{:blaz =&gt; 1+1}\n%p{(1+1) =&gt; 1+1}\n&quot;</span>))
184:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000222" class="method">
  <div id="M000222_title" class="title">
    <b>test_attrs_parsed_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000222_source')" id="l_M000222_source">show source</a> ]</p>
  <div id="M000222_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 942</span>
942:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attrs_parsed_correctly</span>
943:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p boom=&gt;biddly='bar =&amp;gt; baz'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'boom=&gt;biddly' =&gt; 'bar =&gt; baz'}&quot;</span>))
944:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo,bar='baz, qux'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'foo,bar' =&gt; 'baz, qux'}&quot;</span>))
945:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo&amp;#x000A;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\\nte\&quot;}&quot;</span>))
946:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo4te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\#{2 + 2}te\&quot;}&quot;</span>))
947:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000255" class="method">
  <div id="M000255_title" class="title">
    <b>test_auto_preserve_unless_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000255_source')" id="l_M000255_source">show source</a> ]</p>
  <div id="M000255_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1214</span>
1214:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_auto_preserve_unless_ugly</span>
1215:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo&amp;#x000A;bar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>))
1216:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>))
1217:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1218:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1219:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000221" class="method">
  <div id="M000221_title" class="title">
    <b>test_autoclose_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000221_source')" id="l_M000221_source">show source</a> ]</p>
  <div id="M000221_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 927</span>
927:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_autoclose_option</span>
928:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;flaz foo='bar' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%flaz{:foo =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:autoclose</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">&quot;flaz&quot;</span>]))
929:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;flaz /&gt;\n&lt;flaznicate /&gt;\n&lt;flan&gt;&lt;/flan&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%flaz\n%flaznicate\n%flan\n&quot;</span>, <span class="ruby-identifier">:autoclose</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-regexp re">/^flaz/</span>]))
930:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000235" class="method">
  <div id="M000235_title" class="title">
    <b>test_balanced_conditional_comments</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000235_source')" id="l_M000235_source">show source</a> ]</p>
  <div id="M000235_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1065</span>
1065:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_balanced_conditional_comments</span>
1066:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;!--[if !(IE 6)|(IE 7)]&gt; Bracket: ] &lt;![endif]--&gt;\n&quot;</span>,
1067:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;/[if !(IE 6)|(IE 7)] Bracket: ]&quot;</span>))
1068:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000200" class="method">
  <div id="M000200_title" class="title">
    <b>test_bang_equals_inline_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000200_source')" id="l_M000200_source">show source</a> ]</p>
  <div id="M000200_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 764</span>
764:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_inline_should_not_escape</span>
765:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
766:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000199" class="method">
  <div id="M000199_title" class="title">
    <b>test_bang_equals_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000199_source')" id="l_M000199_source">show source</a> ]</p>
  <div id="M000199_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 760</span>
760:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_should_not_escape</span>
761:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  != 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
762:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000273" class="method">
  <div id="M000273_title" class="title">
    <b>test_basic_new_attributes</b>()
  </div>
  <div class="description">
  <p>
New attributes
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000273_source')" id="l_M000273_source">show source</a> ]</p>
  <div id="M000273_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1326</span>
1326:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_new_attributes</span>
1327:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a() bar&quot;</span>))
1328:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href='foo') bar&quot;</span>))
1329:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='c' c='d' d='e'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(b=&quot;c&quot; c='d' d=&quot;e&quot;) baz}</span>))
1330:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000170" class="method">
  <div id="M000170_title" class="title">
    <b>test_boolean_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show source</a> ]</p>
  <div id="M000170_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 324</span>
324:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_attributes</span>
325:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
326:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
327:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar='bar' baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
328:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
329: 
330:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
331:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
332:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
333:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
334:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000176" class="method">
  <div id="M000176_title" class="title">
    <b>test_both_case_indentation_work_with_deeply_nested_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show source</a> ]</p>
  <div id="M000176_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 416</span>
416:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_case_indentation_work_with_deeply_nested_code</span>
417:     <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&lt;h2&gt;\n  other\n&lt;/h2&gt;\n&quot;</span>
418:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n- when 'test'\n  %h2\n    hi\n- when 'other'\n  %h2\n    other\n&quot;</span>))
419:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n  - when 'test'\n    %h2\n      hi\n  - when 'other'\n    %h2\n      other\n&quot;</span>))
420:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000171" class="method">
  <div id="M000171_title" class="title">
    <b>test_both_whitespace_nukes_work_together</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show source</a> ]</p>
  <div id="M000171_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 336</span>
336:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_whitespace_nukes_work_together</span>
337:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;q&gt;Foo\n  Bar&lt;/q&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %q&gt;&lt;= \&quot;Foo\\\\nBar\&quot;\n&quot;</span>))
338:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000307" class="method">
  <div id="M000307_title" class="title">
    <b>test_case_insensitive_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000307_source')" id="l_M000307_source">show source</a> ]</p>
  <div id="M000307_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1746</span>
1746:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_case_insensitive_coding_comment</span>
1747:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# CodINg: IbM866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1748:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000147" class="method">
  <div id="M000147_title" class="title">
    <b>test_class_attr_with_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show source</a> ]</p>
  <div id="M000147_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_attr_with_array</span>
147:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># basic</span>
148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a b css'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.css{:class =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># merge with css</span>
149:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='b css'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.css{:class =&gt; %w[css b]} foo&quot;</span>)) <span class="ruby-comment cmt"># merge uniquely</span>
150:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a b c d'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; [%w[a b], %w[c d]]} foo&quot;</span>)) <span class="ruby-comment cmt"># flatten</span>
151:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; [:a, :b] } foo&quot;</span>)) <span class="ruby-comment cmt"># stringify</span>
152:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class=''&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; [nil, false] } foo&quot;</span>)) <span class="ruby-comment cmt"># strip falsey</span>
153:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; :a} foo&quot;</span>)) <span class="ruby-comment cmt"># single stringify</span>
154:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; false} foo&quot;</span>)) <span class="ruby-comment cmt"># single falsey</span>
155:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='a b html'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p(class='html'){:class =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># html attrs</span>
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000233" class="method">
  <div id="M000233_title" class="title">
    <b>test_compile_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000233_source')" id="l_M000233_source">show source</a> ]</p>
  <div id="M000233_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1050</span>
1050:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_compile_error</span>
1051:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n- fee)\nc&quot;</span>)
1052:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1053:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/\(test_compile_error\):3: syntax error/i</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
1054:   <span class="ruby-keyword kw">else</span>
1055:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>,
1056:            <span class="ruby-value str">'&quot;a\nb\n- fee)\nc&quot; doesn\'t produce an exception!'</span>)
1057:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000301" class="method">
  <div id="M000301_title" class="title">
    <b>test_convert_template_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000301_source')" id="l_M000301_source">show source</a> ]</p>
  <div id="M000301_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1684</span>
1684:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_def_method</span>
1685:       <span class="ruby-identifier">assert_converts_template_properly</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
1686:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1687:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">:render</span>)
1688:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">render</span>
1689:       <span class="ruby-keyword kw">end</span>
1690:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000300" class="method">
  <div id="M000300_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000300_source')" id="l_M000300_source">show source</a> ]</p>
  <div id="M000300_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1680</span>
1680:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1681:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render</span>}
1682:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000297" class="method">
  <div id="M000297_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000297_source')" id="l_M000297_source">show source</a> ]</p>
  <div id="M000297_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1652</span>
1652:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1653:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;iso-8859-1&quot;</span>), <span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;utf-8&quot;</span>))
1654:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000299" class="method">
  <div id="M000299_title" class="title">
    <b>test_convert_template_render_proc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000299_source')" id="l_M000299_source">show source</a> ]</p>
  <div id="M000299_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1676</span>
1676:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render_proc</span>
1677:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render_proc</span>.<span class="ruby-identifier">call</span>}
1678:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000223" class="method">
  <div id="M000223_title" class="title">
    <b>test_correct_parsing_with_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000223_source')" id="l_M000223_source">show source</a> ]</p>
  <div id="M000223_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 949</span>
949:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_correct_parsing_with_brackets</span>
950:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;{tada} foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} {tada} foo&quot;</span>))
951:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;deep {nested { things }}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} deep {nested { things }}&quot;</span>))
952:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;{a { d&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{{:class =&gt; 'foo'}, :class =&gt; 'bar'} {a { d&quot;</span>))
953:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo='bar'&gt;a}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar'} a}&quot;</span>))
954:     
955:     <span class="ruby-identifier">foo</span> = []
956:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>] = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Foo'</span>, <span class="ruby-identifier">:id</span>).<span class="ruby-identifier">new</span>
957:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
958:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
959:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
960:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
961: 
962:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span> = <span class="ruby-value">1</span>
963:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
964:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
965:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
966:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
967:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000167" class="method">
  <div id="M000167_title" class="title">
    <b>test_cr_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show source</a> ]</p>
  <div id="M000167_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cr_newline</span>
286:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&lt;p&gt;baz&lt;/p&gt;\n&lt;p&gt;boom&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p foo\r%p bar\r\n%p baz\n\r%p boom&quot;</span>))
287:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000238" class="method">
  <div id="M000238_title" class="title">
    <b>test_css_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000238_source')" id="l_M000238_source">show source</a> ]</p>
  <div id="M000238_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1089</span>
1089:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_filter</span>
1090:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;style type='text/css'&gt;\n  /*&lt;![CDATA[*/\n    #foo {\n      bar: baz; }\n  /*]]&gt;*/\n&lt;/style&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:css\n  #foo {\n    bar: baz; }\n&quot;</span>))
1091:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000145" class="method">
  <div id="M000145_title" class="title">
    <b>test_css_id_as_attribute_should_be_appended_with_underscore</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show source</a> ]</p>
  <div id="M000145_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_id_as_attribute_should_be_appended_with_underscore</span>
137:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; '1'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
138:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; 1}&quot;</span>).<span class="ruby-identifier">chomp</span>)
139:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000185" class="method">
  <div id="M000185_title" class="title">
    <b>test_curly_brace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000185_source')" id="l_M000185_source">show source</a> ]</p>
  <div id="M000185_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 579</span>
579:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_curly_brace</span>
580:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo { Bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;== Foo { Bar\n&quot;</span>))
581:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000252" class="method">
  <div id="M000252_title" class="title">
    <b>test_def_method_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000252_source')" id="l_M000252_source">show source</a> ]</p>
  <div id="M000252_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1185</span>
1185:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_haml_buffer_gets_reset_even_with_exception</span>
1186:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1187:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">:render</span>)
1188:     <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">render</span>
1189:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1190:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1191:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000248" class="method">
  <div id="M000248_title" class="title">
    <b>test_def_method_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000248_source')" id="l_M000248_source">show source</a> ]</p>
  <div id="M000248_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1162</span>
1162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_locals</span>
1163:     <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1164:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">:render</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
1165:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>))
1166:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000247" class="method">
  <div id="M000247_title" class="title">
    <b>test_def_method_with_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000247_source')" id="l_M000247_source">show source</a> ]</p>
  <div id="M000247_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1157</span>
1157:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_with_module</span>
1158:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-constant">String</span>, <span class="ruby-identifier">:render_haml</span>)
1159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">render_haml</span> { <span class="ruby-value">12</span> })
1160:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000296" class="method">
  <div id="M000296_title" class="title">
    <b>test_default_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000296_source')" id="l_M000296_source">show source</a> ]</p>
  <div id="M000296_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1644</span>
1644:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_encoding</span>
1645:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>), <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p bar\n%p foo\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;us-ascii&quot;</span>)).<span class="ruby-identifier">encoding</span>)
1646:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000305" class="method">
  <div id="M000305_title" class="title">
    <b>test_different_coding_comment_than_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000305_source')" id="l_M000305_source">show source</a> ]</p>
  <div id="M000305_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1723</span>
1723:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_different_coding_comment_than_encoding</span>
1724:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# coding: ibm866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1725:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000306" class="method">
  <div id="M000306_title" class="title">
    <b>test_different_coding_than_system</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000306_source')" id="l_M000306_source">show source</a> ]</p>
  <div id="M000306_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1736</span>
1736:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_different_coding_than_system</span>
1737:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;\321\202\320\220\320\254&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;%p \321\202\320\220\320\254\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>))
1738:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000219" class="method">
  <div id="M000219_title" class="title">
    <b>test_doctypes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000219_source')" id="l_M000219_source">show source</a> ]</p>
  <div id="M000219_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 893</span>
893:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_doctypes</span>
894:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html&gt;'</span>,
895:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>).<span class="ruby-identifier">strip</span>)
896:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html&gt;'</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! 5'</span>).<span class="ruby-identifier">strip</span>)
897:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;'</span>,
898:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>).<span class="ruby-identifier">strip</span>)
899:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;'</span>,
900:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>).<span class="ruby-identifier">strip</span>)
901:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//WAPFORUM//DTD XHTML Mobile 1.2//EN&quot; &quot;http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd&quot;&gt;'</span>,
902:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! mobile'</span>).<span class="ruby-identifier">strip</span>)
903:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML Basic 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd&quot;&gt;'</span>,
904:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! basic'</span>).<span class="ruby-identifier">strip</span>)
905:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
906:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>).<span class="ruby-identifier">strip</span>)
907:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
908:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>).<span class="ruby-identifier">strip</span>)
909:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;'</span>,
910:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
911:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;'</span>,
912:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
913:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
914:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
915:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
916:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
917:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000202" class="method">
  <div id="M000202_title" class="title">
    <b>test_dynamic_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000202_source')" id="l_M000202_source">show source</a> ]</p>
  <div id="M000202_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 779</span>
779:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_should_be_escaped</span>
780:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='&amp;amp;foo.png' /&gt;\n&quot;</span>,
781:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}&quot;</span>))
782:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p alt='' src='&amp;amp;foo.png'&gt;foo&lt;/p&gt;\n&quot;</span>,
783:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new} foo&quot;</span>))
784:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div alt='' src='&amp;amp;foo.png'&gt;foo&lt;/div&gt;\n&quot;</span>,
785:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}= 'foo'&quot;</span>))
786:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='foo&amp;#x000A;.png' /&gt;\n&quot;</span>,
787:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; \&quot;foo\\n.png\&quot;, :alt =&gt; String.new}&quot;</span>))
788:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000163" class="method">
  <div id="M000163_title" class="title">
    <b>test_dynamic_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show source</a> ]</p>
  <div id="M000163_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 254</span>
254:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_with_empty_attr</span>
255:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '/foo.png', :alt =&gt; String.new}&quot;</span>))
256:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000149" class="method">
  <div id="M000149_title" class="title">
    <b>test_dynamic_attributes_with_no_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000149_source')" id="l_M000149_source">show source</a> ]</p>
  <div id="M000149_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 169</span>
169:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_with_no_content</span>
170:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;a href='http://haml-lang.com'&gt;&lt;/a&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %a{:href =&gt; \&quot;http://\&quot; + \&quot;haml-lang.com\&quot;}\n&quot;</span>))
171:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000229" class="method">
  <div id="M000229_title" class="title">
    <b>test_dynamic_attrs_shouldnt_register_as_literal_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000229_source')" id="l_M000229_source">show source</a> ]</p>
  <div id="M000229_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 996</span>
996:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_shouldnt_register_as_literal_values</span>
997:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p{:a =&gt; &quot;b#{1 + 1}c&quot;}'</span>))
998:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b' + (1 + 1).to_s + 'c'}&quot;</span>))
999:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000230" class="method">
  <div id="M000230_title" class="title">
    <b>test_dynamic_attrs_with_self_closed_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000230_source')" id="l_M000230_source">show source</a> ]</p>
  <div id="M000230_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1001</span>
1001:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_with_self_closed_tag</span>
1002:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='2' /&gt;\nc\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{'b' =&gt; 1 + 1}/\n= 'c'\n&quot;</span>))
1003:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000259" class="method">
  <div id="M000259_title" class="title">
    <b>test_dynamic_hashes_with_suppress_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000259_source')" id="l_M000259_source">show source</a> ]</p>
  <div id="M000259_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1237</span>
1237:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_hashes_with_suppress_eval</span>
1238:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a #{1 + 1} b&quot;, :c =&gt; &quot;d&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1239:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000276" class="method">
  <div id="M000276_title" class="title">
    <b>test_dynamic_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000276_source')" id="l_M000276_source">show source</a> ]</p>
  <div id="M000276_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1360</span>
1360:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_new_attributes</span>
1361:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=foo) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>}))
1362:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='12' c='13' d='14'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(b=b c='13' d=d) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">:d</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">14</span>}))
1363:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000314" class="method">
  <div id="M000314_title" class="title">
    <b>test_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000314_source')" id="l_M000314_source">show source</a> ]</p>
  <div id="M000314_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1837</span>
1837:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_emacs_coding_comment</span>
1838:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- coding: ibm866 -*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1839:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000315" class="method">
  <div id="M000315_title" class="title">
    <b>test_emacs_encoding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000315_source')" id="l_M000315_source">show source</a> ]</p>
  <div id="M000315_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1850</span>
1850:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_emacs_encoding_comment</span>
1851:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- encoding: ibm866 -*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1852:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000312" class="method">
  <div id="M000312_title" class="title">
    <b>test_emacs_prefixed_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000312_source')" id="l_M000312_source">show source</a> ]</p>
  <div id="M000312_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1811</span>
1811:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_emacs_prefixed_coding_comment</span>
1812:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- coding: ibm866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1813:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000313" class="method">
  <div id="M000313_title" class="title">
    <b>test_emacs_suffixed_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000313_source')" id="l_M000313_source">show source</a> ]</p>
  <div id="M000313_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1824</span>
1824:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_emacs_suffixed_coding_comment</span>
1825:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# coding: ibm866 -*- coding: blah\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1826:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000224" class="method">
  <div id="M000224_title" class="title">
    <b>test_empty_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000224_source')" id="l_M000224_source">show source</a> ]</p>
  <div id="M000224_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 969</span>
969:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_attrs</span>
970:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; '' } empty&quot;</span>))
971:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } empty&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>}))
972:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000236" class="method">
  <div id="M000236_title" class="title">
    <b>test_empty_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000236_source')" id="l_M000236_source">show source</a> ]</p>
  <div id="M000236_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1070</span>
1070:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_filter</span>
1071:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    \n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">':javascript'</span>))
1072:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000141" class="method">
  <div id="M000141_title" class="title">
    <b>test_empty_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show source</a> ]</p>
  <div id="M000141_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 115</span>
115:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render</span>
116:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&quot;</span>)
117:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000143" class="method">
  <div id="M000143_title" class="title">
    <b>test_empty_render_should_remain_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show source</a> ]</p>
  <div id="M000143_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render_should_remain_empty</span>
129:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">''</span>))
130:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000302" class="method">
  <div id="M000302_title" class="title">
    <b>test_encoding_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000302_source')" id="l_M000302_source">show source</a> ]</p>
  <div id="M000302_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1692</span>
1692:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encoding_error</span>
1693:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;foo\nbar\nb\xFEaz&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>))
1694:       <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1695:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1696:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">3</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">line</span>)
1697:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Invalid UTF-8 character &quot;\xFE&quot;'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
1698:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000166" class="method">
  <div id="M000166_title" class="title">
    <b>test_end_of_file_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show source</a> ]</p>
  <div id="M000166_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 281</span>
281:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_of_file_multiline</span>
282:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;0&lt;/p&gt;\n&lt;p&gt;1&lt;/p&gt;\n&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for i in (0...3)\n  %p= |\n   i |&quot;</span>))
283:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000180" class="method">
  <div id="M000180_title" class="title">
    <b>test_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show source</a> ]</p>
  <div id="M000180_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 474</span>
474:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_with_method_call</span>
475:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;2|3|4\nb-a-r\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= [1, 2, 3].map do |i|\n  - i + 1\n- end.join(\&quot;|\&quot;)\n= \&quot;bar\&quot;.gsub(/./) do |s|\n  - s + \&quot;-\&quot;\n- end.gsub(/-$/) do |s|\n  - ''\n&quot;</span>))
476:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000177" class="method">
  <div id="M000177_title" class="title">
    <b>test_equals_block_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show source</a> ]</p>
  <div id="M000177_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 445</span>
445:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equals_block_with_ugly</span>
446:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= capture_haml do\n  foo\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
447:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000309" class="method">
  <div id="M000309_title" class="title">
    <b>test_equals_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000309_source')" id="l_M000309_source">show source</a> ]</p>
  <div id="M000309_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1772</span>
1772:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equals_coding_comment</span>
1773:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# CodINg= ibm866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1774:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000189" class="method">
  <div id="M000189_title" class="title">
    <b>test_erb_filter_with_multiline_expr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000189_source')" id="l_M000189_source">show source</a> ]</p>
  <div id="M000189_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 680</span>
680:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_erb_filter_with_multiline_expr</span>
681:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foobarbaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:erb\n  &lt;%= \&quot;foo\&quot; +\n      \&quot;bar\&quot; +\n      \&quot;baz\&quot; %&gt;\n&quot;</span>))
682:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000186" class="method">
  <div id="M000186_title" class="title">
    <b>test_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show source</a> ]</p>
  <div id="M000186_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 589</span>
589:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_html</span>
590:     <span class="ruby-identifier">html</span> = <span class="ruby-value str">&quot;&amp;amp;\n&amp;\n&amp;amp;\n&quot;</span>
591: 
592:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;= \&quot;&amp;\&quot;\n!= \&quot;&amp;\&quot;\n= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
593: 
594:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;~ \&quot;&amp;\&quot;\n!~ \&quot;&amp;\&quot;\n~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
595: 
596:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp; \\\#{\&quot;&amp;\&quot;}\n! \\\#{\&quot;&amp;\&quot;}\n\\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
597: 
598:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;== \\\#{\&quot;&amp;\&quot;}\n!== \\\#{\&quot;&amp;\&quot;}\n== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
599: 
600:     <span class="ruby-identifier">tag_html</span> = <span class="ruby-value str">&quot;&lt;p&gt;&amp;amp;&lt;/p&gt;\n&lt;p&gt;&amp;&lt;/p&gt;\n&lt;p&gt;&amp;amp;&lt;/p&gt;\n&quot;</span>
601: 
602:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= \&quot;&amp;\&quot;\n%p!= \&quot;&amp;\&quot;\n%p= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
603: 
604:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;~ \&quot;&amp;\&quot;\n%p!~ \&quot;&amp;\&quot;\n%p~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
605: 
606:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \\\#{\&quot;&amp;\&quot;}\n%p! \\\#{\&quot;&amp;\&quot;}\n%p \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
607: 
608:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \\\#{\&quot;&amp;\&quot;}\n%p!== \\\#{\&quot;&amp;\&quot;}\n%p== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
609:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000204" class="method">
  <div id="M000204_title" class="title">
    <b>test_escaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show source</a> ]</p>
  <div id="M000204_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 795</span>
795:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_double_equals</span>
796:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
797:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
798:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000209" class="method">
  <div id="M000209_title" class="title">
    <b>test_escaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000209_source')" id="l_M000209_source">show source</a> ]</p>
  <div id="M000209_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 820</span>
820:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_interpolation</span>
821:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
822:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
823:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000159" class="method">
  <div id="M000159_title" class="title">
    <b>test_escaped_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show source</a> ]</p>
  <div id="M000159_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 238</span>
238:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_interpolation</span>
239:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Foo &amp;amp; Bar &amp; Baz&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p&amp; Foo #{&quot;&amp;&quot;} Bar &amp; Baz'</span>))
240:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000285" class="method">
  <div id="M000285_title" class="title">
    <b>test_escaped_loud_ruby_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000285_source')" id="l_M000285_source">show source</a> ]</p>
  <div id="M000285_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1455</span>
1455:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_loud_ruby_multiline</span>
1456:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar&amp;lt;, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;= [\&quot;bar&lt;\&quot;,\n    \&quot;baz\&quot;,\n    \&quot;bang\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1457:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000291" class="method">
  <div id="M000291_title" class="title">
    <b>test_escaped_ruby_multiline_in_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000291_source')" id="l_M000291_source">show source</a> ]</p>
  <div id="M000291_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1557</span>
1557:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_ruby_multiline_in_tag</span>
1558:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&amp;lt;, bar, baz&lt;/p&gt;\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= [\&quot;foo&lt;\&quot;,\n      \&quot;bar\&quot;,\n      \&quot;baz\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1559:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000206" class="method">
  <div id="M000206_title" class="title">
    <b>test_escaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000206_source')" id="l_M000206_source">show source</a> ]</p>
  <div id="M000206_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 805</span>
805:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_double_equals</span>
806:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
807:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
808:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000211" class="method">
  <div id="M000211_title" class="title">
    <b>test_escaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000211_source')" id="l_M000211_source">show source</a> ]</p>
  <div id="M000211_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 830</span>
830:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_interpolation</span>
831:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
832:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
833:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000232" class="method">
  <div id="M000232_title" class="title">
    <b>test_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000232_source')" id="l_M000232_source">show source</a> ]</p>
  <div id="M000232_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1041</span>
1041:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception</span>
1042:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  hi\n  %a= undefined\n= 12&quot;</span>)
1043:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1044:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-value str">&quot;(test_exception):3&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
1045:   <span class="ruby-keyword kw">else</span>
1046:     <span class="ruby-comment cmt"># Test failed... should have raised an exception</span>
1047:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>)
1048:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000231" class="method">
  <div id="M000231_title" class="title">
    <b>test_exception_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000231_source')" id="l_M000231_source">show source</a> ]</p>
  <div id="M000231_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1033</span>
1033:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_line</span>
1034:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n!!!\n  c\nd&quot;</span>)
1035:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1036:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;(test_exception_line):4&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
1037:   <span class="ruby-keyword kw">else</span>
1038:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">'&quot;a\nb\n!!!\n  c\nd&quot; doesn\'t produce an exception'</span>)
1039:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000298" class="method">
  <div id="M000298_title" class="title">
    <b>test_fake_ascii_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000298_source')" id="l_M000298_source">show source</a> ]</p>
  <div id="M000298_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1664</span>
1664:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fake_ascii_encoding</span>
1665:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;ascii-8bit&quot;</span>), <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>, <span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ascii-8bit&quot;</span>))
1666:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000217" class="method">
  <div id="M000217_title" class="title">
    <b>test_filename_and_line</b>()
  </div>
  <div class="description">
  <p>
Options tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000217_source')" id="l_M000217_source">show source</a> ]</p>
  <div id="M000217_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 868</span>
868:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filename_and_line</span>
869:     <span class="ruby-keyword kw">begin</span>
870:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n = abc&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
871:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
872:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>, <span class="ruby-identifier">e</span>
873:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:4/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
874:     <span class="ruby-keyword kw">end</span>
875: 
876:     <span class="ruby-keyword kw">begin</span>
877:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n= 123\n\n= nil[]&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
878:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
879:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-identifier">e</span>
880:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:6/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
881:     <span class="ruby-keyword kw">end</span>
882:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000195" class="method">
  <div id="M000195_title" class="title">
    <b>test_filter_with_newline_and_interp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000195_source')" id="l_M000195_source">show source</a> ]</p>
  <div id="M000195_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 735</span>
735:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filter_with_newline_and_interp</span>
736:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\\\\n\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  \\\\n\\\#{\&quot;\&quot;}\n&quot;</span>))
737:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000287" class="method">
  <div id="M000287_title" class="title">
    <b>test_flattened_loud_ruby_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000287_source')" id="l_M000287_source">show source</a> ]</p>
  <div id="M000287_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1487</span>
1487:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flattened_loud_ruby_multiline</span>
1488:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;bar&amp;#x000A;baz&amp;#x000A;bang&lt;/pre&gt;\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;~ \&quot;&lt;pre&gt;\&quot; + [\&quot;bar\&quot;,\n             \&quot;baz\&quot;,\n             \&quot;bang\&quot;].join(\&quot;\\\\n\&quot;) + \&quot;&lt;/pre&gt;\&quot;\n%p foo\n%p bar\n&quot;</span>))
1489:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000142" class="method">
  <div id="M000142_title" class="title">
    <b>test_flexible_tabulation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show source</a> ]</p>
  <div id="M000142_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 119</span>
119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flexible_tabulation</span>
120:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
121:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n foo\n%q\n bar\n %a\n  baz&quot;</span>))
122:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
123:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n\tfoo\n%q\n\tbar\n\t%a\n\t\tbaz&quot;</span>))
124:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n      \t \t bar\n   baz\n&lt;/p&gt;\n&quot;</span>,
125:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  :plain\n        \t \t bar\n     baz&quot;</span>))
126:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000251" class="method">
  <div id="M000251_title" class="title">
    <b>test_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000251_source')" id="l_M000251_source">show source</a> ]</p>
  <div id="M000251_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1177</span>
1177:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_buffer_gets_reset_even_with_exception</span>
1178:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1179:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scope</span>)
1180:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1181:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1182:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1183:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000268" class="method">
  <div id="M000268_title" class="title">
    <b>test_html5_data_attributes</b>()
  </div>
  <div class="description">
  <p>
HTML5 custom data attributes
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000268_source')" id="l_M000268_source">show source</a> ]</p>
  <div id="M000268_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1284</span>
1284:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_data_attributes</span>
1285:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-author_id='123' data-biz='baz' data-foo='bar'&gt;&lt;/div&gt;\n&quot;</span>,
1286:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:data =&gt; {:author_id =&gt; 123, :foo =&gt; 'bar', :biz =&gt; 'baz'}}&quot;</span>))
1287: 
1288:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-one_plus_one='2'&gt;&lt;/div&gt;\n&quot;</span>,
1289:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:data =&gt; {:one_plus_one =&gt; 1+1}}&quot;</span>))
1290: 
1291:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-foo='Here&amp;apos;s a \&quot;quoteful\&quot; string.'&gt;&lt;/div&gt;\n&quot;</span>,
1292:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">%{%div{:data =&gt; {:foo =&gt; %{Here's a &quot;quoteful&quot; string.}}}}</span>)) <span class="ruby-comment cmt">#'</span>
1293:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000270" class="method">
  <div id="M000270_title" class="title">
    <b>test_html5_data_attributes_with_attr_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000270_source')" id="l_M000270_source">show source</a> ]</p>
  <div id="M000270_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1303</span>
1303:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_data_attributes_with_attr_method</span>
1304:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-keyword kw">do</span>
1305:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data_hash</span>
1306:         {<span class="ruby-identifier">:data</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bar&quot;</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;bang&quot;</span>}}
1307:       <span class="ruby-keyword kw">end</span>
1308: 
1309:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data_val</span>
1310:         {<span class="ruby-identifier">:data</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;dat&quot;</span>}
1311:       <span class="ruby-keyword kw">end</span>
1312:     <span class="ruby-keyword kw">end</span>
1313: 
1314:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-baz='bang' data-brat='wurst' data-foo='blip'&gt;&lt;/div&gt;\n&quot;</span>,
1315:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{data_hash, :data =&gt; {:foo =&gt; 'blip', :brat =&gt; 'wurst'}}&quot;</span>))
1316:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-baz='bang' data-foo='blip'&gt;&lt;/div&gt;\n&quot;</span>,
1317:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{data_hash, 'data-foo' =&gt; 'blip'}&quot;</span>))
1318:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-baz='bang' data-foo='bar' data='dat'&gt;&lt;/div&gt;\n&quot;</span>,
1319:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{data_hash, :data =&gt; 'dat'}&quot;</span>))
1320:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-brat='wurst' data-foo='blip' data='dat'&gt;&lt;/div&gt;\n&quot;</span>,
1321:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{data_val, :data =&gt; {:foo =&gt; 'blip', :brat =&gt; 'wurst'}}&quot;</span>))
1322:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000269" class="method">
  <div id="M000269_title" class="title">
    <b>test_html5_data_attributes_with_multiple_defs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000269_source')" id="l_M000269_source">show source</a> ]</p>
  <div id="M000269_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1295</span>
1295:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_data_attributes_with_multiple_defs</span>
1296:     <span class="ruby-comment cmt"># Should always use the more-explicit attribute</span>
1297:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-foo='second'&gt;&lt;/div&gt;\n&quot;</span>,
1298:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:data =&gt; {:foo =&gt; 'first'}, 'data-foo' =&gt; 'second'}&quot;</span>))
1299:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div data-foo='first'&gt;&lt;/div&gt;\n&quot;</span>,
1300:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{'data-foo' =&gt; 'first', :data =&gt; {:foo =&gt; 'second'}}&quot;</span>))
1301:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000267" class="method">
  <div id="M000267_title" class="title">
    <b>test_html5_doctype</b>()
  </div>
  <div class="description">
  <p>
HTML5
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000267_source')" id="l_M000267_source">show source</a> ]</p>
  <div id="M000267_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1279</span>
1279:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_doctype</span>
1280:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>)
1281:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000194" class="method">
  <div id="M000194_title" class="title">
    <b>test_html_attributes_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000194_source')" id="l_M000194_source">show source</a> ]</p>
  <div id="M000194_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 726</span>
726:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_attributes_with_hash</span>
727:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#' rel='top'&gt;Foo&lt;/a&gt;\n&quot;</span>,
728:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#&quot; rel=&quot;top&quot;) Foo'</span>))
729:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#'&gt;Foo&lt;/a&gt;\n&quot;</span>,
730:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#&quot;) #{&quot;Foo&quot;}'</span>))
731: 
732:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#\&quot;'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#\\&quot;&quot;)'</span>))
733:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000263" class="method">
  <div id="M000263_title" class="title">
    <b>test_html_doesnt_add_slash_to_self_closing_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000263_source')" id="l_M000263_source">show source</a> ]</p>
  <div id="M000263_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1257</span>
1257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_doesnt_add_slash_to_self_closing_tags</span>
1258:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1259:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:foo =&gt; 1 + 1}/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1260:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1261:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta{:foo =&gt; 1 + 1}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1262:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000265" class="method">
  <div id="M000265_title" class="title">
    <b>test_html_has_different_doctype</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000265_source')" id="l_M000265_source">show source</a> ]</p>
  <div id="M000265_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1268</span>
1268:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_different_doctype</span>
1269:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n}</span>,
1270:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1271:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000261" class="method">
  <div id="M000261_title" class="title">
    <b>test_html_has_no_self_closing_tags</b>()
  </div>
  <div class="description">
  <p>
HTML 4.0
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000261_source')" id="l_M000261_source">show source</a> ]</p>
  <div id="M000261_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1248</span>
1248:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_no_self_closing_tags</span>
1249:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1250:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;br&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%br/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1251:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000264" class="method">
  <div id="M000264_title" class="title">
    <b>test_html_ignores_xml_prolog_declaration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000264_source')" id="l_M000264_source">show source</a> ]</p>
  <div id="M000264_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1264</span>
1264:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_ignores_xml_prolog_declaration</span>
1265:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! XML'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1266:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000262" class="method">
  <div id="M000262_title" class="title">
    <b>test_html_renders_empty_node_with_closing_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000262_source')" id="l_M000262_source">show source</a> ]</p>
  <div id="M000262_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1253</span>
1253:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_renders_empty_node_with_closing_tag</span>
1254:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div class='foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1255:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000148" class="method">
  <div id="M000148_title" class="title">
    <b>test_id_attr_with_array</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show source</a> ]</p>
  <div id="M000148_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_id_attr_with_array</span>
159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='a_b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># basic</span>
160:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='css_a_b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#css{:id =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># merge with css</span>
161:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='a_b_c_d'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; [%w[a b], %w[c d]]} foo&quot;</span>)) <span class="ruby-comment cmt"># flatten</span>
162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='a_b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; [:a, :b] } foo&quot;</span>)) <span class="ruby-comment cmt"># stringify</span>
163:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id=''&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; [nil, false] } foo&quot;</span>)) <span class="ruby-comment cmt"># strip falsey</span>
164:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='a'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; :a} foo&quot;</span>)) <span class="ruby-comment cmt"># single stringify</span>
165:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; false} foo&quot;</span>)) <span class="ruby-comment cmt"># single falsey</span>
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='html_a_b'&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p(id='html'){:id =&gt; %w[a b]} foo&quot;</span>)) <span class="ruby-comment cmt"># html attrs</span>
167:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000193" class="method">
  <div id="M000193_title" class="title">
    <b>test_if_without_content_and_else</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000193_source')" id="l_M000193_source">show source</a> ]</p>
  <div id="M000193_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_if_without_content_and_else</span>
715:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- if false\n- else\n  foo\n&quot;</span>))
716:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000179" class="method">
  <div id="M000179_title" class="title">
    <b>test_inline_if</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show source</a> ]</p>
  <div id="M000179_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 461</span>
461:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_if</span>
462:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;One&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Three&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for name in [\&quot;One\&quot;, \&quot;Two\&quot;, \&quot;Three\&quot;]\n  %p= name unless name == \&quot;Two\&quot;\n&quot;</span>))
463:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000214" class="method">
  <div id="M000214_title" class="title">
    <b>test_inline_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000214_source')" id="l_M000214_source">show source</a> ]</p>
  <div id="M000214_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 845</span>
845:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_scripts_should_respect_escape_html_option</span>
846:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
847:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
848:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000156" class="method">
  <div id="M000156_title" class="title">
    <b>test_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show source</a> ]</p>
  <div id="M000156_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 223</span>
223:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation</span>
224:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello World&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello #{who}'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
225:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  Hello World\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  Hello \#{who}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
226:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000158" class="method">
  <div id="M000158_title" class="title">
    <b>test_interpolation_at_the_beginning_of_a_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show source</a> ]</p>
  <div id="M000158_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 233</span>
233:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_at_the_beginning_of_a_line</span>
234:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p #{1 + 1}'</span>))
235:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  \#{1 + 1}&quot;</span>))
236:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000157" class="method">
  <div id="M000157_title" class="title">
    <b>test_interpolation_in_the_middle_of_a_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show source</a> ]</p>
  <div id="M000157_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 228</span>
228:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_in_the_middle_of_a_string</span>
229:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\&quot;title 'Title'. \&quot;\n&quot;</span>,
230:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\&quot;title '\#{\&quot;Title\&quot;}'. \&quot;&quot;</span>))
231:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000188" class="method">
  <div id="M000188_title" class="title">
    <b>test_javascript_filter_with_dynamic_interp_and_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000188_source')" id="l_M000188_source">show source</a> ]</p>
  <div id="M000188_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 665</span>
665:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_javascript_filter_with_dynamic_interp_and_escape_html</span>
666:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    &amp; &lt; &gt; &amp;\n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:javascript\n &amp; &lt; &gt; \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
667:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000239" class="method">
  <div id="M000239_title" class="title">
    <b>test_local_assigns_dont_modify_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000239_source')" id="l_M000239_source">show source</a> ]</p>
  <div id="M000239_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1106</span>
1106:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_assigns_dont_modify_class</span>
1107:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= foo&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
1108:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">foo</span>))
1109:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000228" class="method">
  <div id="M000228_title" class="title">
    <b>test_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000228_source')" id="l_M000228_source">show source</a> ]</p>
  <div id="M000228_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 992</span>
992:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_locals</span>
993:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Paragraph!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= text&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Paragraph!&quot;</span> }))
994:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000284" class="method">
  <div id="M000284_title" class="title">
    <b>test_loud_ruby_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000284_source')" id="l_M000284_source">show source</a> ]</p>
  <div id="M000284_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1439</span>
1439:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loud_ruby_multiline</span>
1440:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= [\&quot;bar\&quot;,\n   \&quot;baz\&quot;,\n   \&quot;bang\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1441:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000288" class="method">
  <div id="M000288_title" class="title">
    <b>test_loud_ruby_multiline_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000288_source')" id="l_M000288_source">show source</a> ]</p>
  <div id="M000288_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1503</span>
1503:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_loud_ruby_multiline_with_block</span>
1504:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;farfazfang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= [\&quot;bar\&quot;,\n   \&quot;baz\&quot;,\n   \&quot;bang\&quot;].map do |str|\n  - str.gsub(\&quot;ba\&quot;,\n             \&quot;fa\&quot;)\n%p foo\n%p bar\n&quot;</span>))
1505:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000155" class="method">
  <div id="M000155_title" class="title">
    <b>test_multi_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show source</a> ]</p>
  <div id="M000155_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 216</span>
216:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_render</span>
217:     <span class="ruby-identifier">engine</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%strong Hi there!&quot;</span>)
218:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
219:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
220:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
221:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000184" class="method">
  <div id="M000184_title" class="title">
    <b>test_multiline_in_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000184_source')" id="l_M000184_source">show source</a> ]</p>
  <div id="M000184_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 564</span>
564:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_in_filter</span>
565:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo |\nBar |\nBaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo |\n  Bar |\n  Baz\n&quot;</span>))
566:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000281" class="method">
  <div id="M000281_title" class="title">
    <b>test_multiline_new_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000281_source')" id="l_M000281_source">show source</a> ]</p>
  <div id="M000281_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1403</span>
1403:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_new_attribute</span>
1404:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'\n  c='d') bar&quot;</span>))
1405:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e' e='f' f='j'&gt;bar&lt;/a&gt;\n&quot;</span>,
1406:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b' b='c'\n  c='d' d=e\n  e='f' f='j') bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:e</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'e'</span>}))
1407:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000183" class="method">
  <div id="M000183_title" class="title">
    <b>test_multiline_with_colon_after_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show source</a> ]</p>
  <div id="M000183_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 540</span>
540:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_with_colon_after_filter</span>
541:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
542:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
543:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000181" class="method">
  <div id="M000181_title" class="title">
    <b>test_nested_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show source</a> ]</p>
  <div id="M000181_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 491</span>
491:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_end_with_method_call</span>
492:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2|3|4\n  b-a-r\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = [1, 2, 3].map do |i|\n    - i + 1\n  - end.join(\&quot;|\&quot;)\n  = \&quot;bar\&quot;.gsub(/./) do |s|\n    - s + \&quot;-\&quot;\n  - end.gsub(/-$/) do |s|\n    - ''\n&quot;</span>))
493:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000282" class="method">
  <div id="M000282_title" class="title">
    <b>test_new_and_old_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000282_source')" id="l_M000282_source">show source</a> ]</p>
  <div id="M000282_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1409</span>
1409:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_and_old_attributes</span>
1410:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'){:c =&gt; 'd'} bar&quot;</span>))
1411:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:c =&gt; 'd'}(a='b') bar&quot;</span>))
1412:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(c='d'){:a =&gt; 'b'} bar&quot;</span>))
1413:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(c='d') bar&quot;</span>))
1414: 
1415:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(a='d') bar&quot;</span>))
1416:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='d'){:a =&gt; 'b'} bar&quot;</span>))
1417: 
1418:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e'&gt;bar&lt;/a&gt;\n&quot;</span>,
1419:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b',\n:b =&gt; 'c'}(c='d'\nd='e') bar&quot;</span>))
1420:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000275" class="method">
  <div id="M000275_title" class="title">
    <b>test_new_attribute_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000275_source')" id="l_M000275_source">show source</a> ]</p>
  <div id="M000275_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1347</span>
1347:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_classes</span>
1348:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='bar')&quot;</span>))
1349:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo{:class =&gt; 'bar'}(class='baz')&quot;</span>))
1350:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}&quot;</span>))
1351:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1352:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1353:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1354:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1355:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo](class='baz'){:class =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1356:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1357:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo]{:class =&gt; 'bar'}(class='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1358:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000280" class="method">
  <div id="M000280_title" class="title">
    <b>test_new_attribute_escaping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000280_source')" id="l_M000280_source">show source</a> ]</p>
  <div id="M000280_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1392</span>
1392:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_escaping</span>
1393:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo &quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \&quot; bar&quot;) bar}</span>))
1394:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\&quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\\&quot; bar&quot;) bar}</span>))
1395: 
1396:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo ' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \' bar') bar}</span>))
1397:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo \\' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \\\\\' bar') bar}</span>))
1398: 
1399:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\ bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\ bar&quot;) bar}</span>))
1400:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \#{1 + 1} bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \#{1 + 1} bar&quot;) bar}</span>))
1401:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000274" class="method">
  <div id="M000274_title" class="title">
    <b>test_new_attribute_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000274_source')" id="l_M000274_source">show source</a> ]</p>
  <div id="M000274_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1332</span>
1332:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_ids</span>
1333:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='bar')&quot;</span>))
1334:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar_baz'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:id =&gt; 'bar'}(id='baz')&quot;</span>))
1335:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_baz_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}&quot;</span>))
1336:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1337:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1338:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1339:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1340:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz')[foo]{:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1341:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1342:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo](id='baz'){:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1343:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_bar_baz_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1344:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo]{:id =&gt; 'bar'}(id='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1345:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000277" class="method">
  <div id="M000277_title" class="title">
    <b>test_new_attribute_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000277_source')" id="l_M000277_source">show source</a> ]</p>
  <div id="M000277_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1365</span>
1365:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_interpolation</span>
1366:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1#{1 + 1}&quot;) bar'</span>))
1367:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='2: 2, 3: 3'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(href='2: #{1 + 1}, 3: #{foo}') bar}</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}))
1368:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a href='1\#{1 + 1}'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1\#{1 + 1}&quot;) bar'</span>))
1369:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000279" class="method">
  <div id="M000279_title" class="title">
    <b>test_new_attribute_parsing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000279_source')" id="l_M000279_source">show source</a> ]</p>
  <div id="M000279_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1378</span>
1378:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_parsing</span>
1379:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a2='b2'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a2=b2) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'b2'</span>}))
1380:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{'foo&quot;bar'}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1381:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{&quot;foo'bar&quot;}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1382:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo&quot;bar') bar}</span>))
1383:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo'bar&quot;) bar}</span>))
1384:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a:b='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a:b='foo') bar&quot;</span>))
1385:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = 'foo' b = 'bar') bar&quot;</span>))
1386:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = foo b = bar) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:bar</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
1387:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;(b='bar')&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo')(b='bar')&quot;</span>))
1388:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo)bar'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo)bar') baz&quot;</span>))
1389:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a( a = 'foo' ) baz&quot;</span>))
1390:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000187" class="method">
  <div id="M000187_title" class="title">
    <b>test_new_attrs_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show source</a> ]</p>
  <div id="M000187_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 661</span>
661:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attrs_with_hash</span>
662:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#&quot;)'</span>))
663:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000225" class="method">
  <div id="M000225_title" class="title">
    <b>test_nil_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000225_source')" id="l_M000225_source">show source</a> ]</p>
  <div id="M000225_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 974</span>
974:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_attrs</span>
975:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; nil } nil&quot;</span>))
976:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } nil&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}))
977:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000227" class="method">
  <div id="M000227_title" class="title">
    <b>test_nil_class_with_syntactic_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000227_source')" id="l_M000227_source">show source</a> ]</p>
  <div id="M000227_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 985</span>
985:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_class_with_syntactic_class</span>
986:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{:class =&gt; nil} nil&quot;</span>))
987:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.bar.foo{:class =&gt; nil} nil&quot;</span>))
988:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; 'bar'}, :class =&gt; nil} nil&quot;</span>))
989:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; nil}, :class =&gt; 'bar'} nil&quot;</span>))
990:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000226" class="method">
  <div id="M000226_title" class="title">
    <b>test_nil_id_with_syntactic_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000226_source')" id="l_M000226_source">show source</a> ]</p>
  <div id="M000226_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 979</span>
979:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_id_with_syntactic_id</span>
980:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{:id =&gt; nil} nil&quot;</span>))
981:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; 'bar'}, :id =&gt; nil} nil&quot;</span>))
982:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; nil}, :id =&gt; 'bar'} nil&quot;</span>))
983:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000172" class="method">
  <div id="M000172_title" class="title">
    <b>test_nil_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show source</a> ]</p>
  <div id="M000172_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 348</span>
348:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_option</span>
349:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo='bar'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p{:foo =&gt; &quot;bar&quot;}'</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>))
350:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000151" class="method">
  <div id="M000151_title" class="title">
    <b>test_nil_should_render_empty_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show source</a> ]</p>
  <div id="M000151_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 198</span>
198:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_should_render_empty_tag</span>
199:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='no_attributes'&gt;&lt;/div&gt;&quot;</span>,
200:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.no_attributes{:nil =&gt; nil}&quot;</span>).<span class="ruby-identifier">chomp</span>)
201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000160" class="method">
  <div id="M000160_title" class="title">
    <b>test_nil_tag_value_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show source</a> ]</p>
  <div id="M000160_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 242</span>
242:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_tag_value_should_render_as_empty</span>
243:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= nil&quot;</span>))
244:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000243" class="method">
  <div id="M000243_title" class="title">
    <b>test_non_literal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000243_source')" id="l_M000243_source">show source</a> ]</p>
  <div id="M000243_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1129</span>
1129:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_literal_attributes</span>
1130:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a1='foo' a2='bar' a3='baz' /&gt;\n&quot;</span>,
1131:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{a2, a1, :a3 =&gt; 'baz'}/&quot;</span>,
1132:                         <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>}, <span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}}))
1133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000241" class="method">
  <div id="M000241_title" class="title">
    <b>test_object_ref_before_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000241_source')" id="l_M000241_source">show source</a> ]</p>
  <div id="M000241_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1117</span>
1117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_before_attrs</span>
1118:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">42</span>
1119:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_42' style='width: 100px;'&gt;New User&lt;/p&gt;\n&quot;</span>,
1120:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user]{:style =&gt; 'width: 100px;'} New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
1121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000242" class="method">
  <div id="M000242_title" class="title">
    <b>test_object_ref_with_custom_haml_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000242_source')" id="l_M000242_source">show source</a> ]</p>
  <div id="M000242_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1123</span>
1123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_with_custom_haml_class</span>
1124:     <span class="ruby-identifier">custom</span> = <span class="ruby-constant">CustomHamlClass</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">42</span>
1125:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='my_thing' id='my_thing_42' style='width: 100px;'&gt;My Thing&lt;/p&gt;\n&quot;</span>,
1126:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[custom]{:style =&gt; 'width: 100px;'} My Thing&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:custom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">custom</span>}))
1127:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000240" class="method">
  <div id="M000240_title" class="title">
    <b>test_object_ref_with_nil_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000240_source')" id="l_M000240_source">show source</a> ]</p>
  <div id="M000240_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1111</span>
1111:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_with_nil_id</span>
1112:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
1113:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_new'&gt;New User&lt;/p&gt;\n&quot;</span>,
1114:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user] New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
1115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000153" class="method">
  <div id="M000153_title" class="title">
    <b>test_one_liner_should_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show source</a> ]</p>
  <div id="M000153_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_should_be_one_line</span>
209:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello'</span>).<span class="ruby-identifier">chomp</span>)
210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000154" class="method">
  <div id="M000154_title" class="title">
    <b>test_one_liner_with_newline_shouldnt_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show source</a> ]</p>
  <div id="M000154_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 212</span>
212:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_with_newline_shouldnt_be_one_line</span>
213:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n  bar\n&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p= &quot;foo\nbar&quot;'</span>).<span class="ruby-identifier">chomp</span>)
214:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000319" class="method">
  <div id="M000319_title" class="title">
    <b>test_one_of_several_emacs_comments</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000319_source')" id="l_M000319_source">show source</a> ]</p>
  <div id="M000319_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1902</span>
1902:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_of_several_emacs_comments</span>
1903:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- foo: bar; coding: ibm866; baz: bang -*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1904:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000175" class="method">
  <div id="M000175_title" class="title">
    <b>test_outer_whitespace_nuke_with_empty_script</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show source</a> ]</p>
  <div id="M000175_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 402</span>
402:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_outer_whitespace_nuke_with_empty_script</span>
403:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo&lt;a&gt;&lt;/a&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  foo\n  = \&quot;  \&quot;\n  %a&gt;\n&quot;</span>))
404:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000178" class="method">
  <div id="M000178_title" class="title">
    <b>test_plain_equals_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show source</a> ]</p>
  <div id="M000178_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 453</span>
453:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_plain_equals_with_ugly</span>
454:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\nbar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= \&quot;foo\&quot;\nbar\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
455:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000169" class="method">
  <div id="M000169_title" class="title">
    <b>test_pre_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show source</a> ]</p>
  <div id="M000169_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 309</span>
309:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pre_code</span>
310:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;&lt;code&gt;Foo&amp;#x000A;  bar&amp;#x000A;    baz&lt;/code&gt;&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  %code\n    :preserve\n      Foo\n        bar\n          baz\n&quot;</span>))
311:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000310" class="method">
  <div id="M000310_title" class="title">
    <b>test_prefixed_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000310_source')" id="l_M000310_source">show source</a> ]</p>
  <div id="M000310_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1785</span>
1785:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_prefixed_coding_comment</span>
1786:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# foo BAR FAOJcoding: ibm866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1787:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000320" class="method">
  <div id="M000320_title" class="title">
    <b>test_prefixed_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000320_source')" id="l_M000320_source">show source</a> ]</p>
  <div id="M000320_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1915</span>
1915:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_prefixed_emacs_coding_comment</span>
1916:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# foo bar coding: baz -*- coding: ibm866 -*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1917:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000316" class="method">
  <div id="M000316_title" class="title">
    <b>test_quoted_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000316_source')" id="l_M000316_source">show source</a> ]</p>
  <div id="M000316_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1863</span>
1863:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_quoted_emacs_coding_comment</span>
1864:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- coding: \&quot;ibm866\&quot; -*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1865:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000253" class="method">
  <div id="M000253_title" class="title">
    <b>test_render_proc_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000253_source')" id="l_M000253_source">show source</a> ]</p>
  <div id="M000253_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1194</span>
1194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_haml_buffer_gets_reset_even_with_exception</span>
1195:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1196:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-identifier">scope</span>)
1197:     <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">call</span>
1198:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1199:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1200:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000249" class="method">
  <div id="M000249_title" class="title">
    <b>test_render_proc_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000249_source')" id="l_M000249_source">show source</a> ]</p>
  <div id="M000249_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1168</span>
1168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_locals</span>
1169:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
1170:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">proc</span>[<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>])
1171:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000250" class="method">
  <div id="M000250_title" class="title">
    <b>test_render_proc_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000250_source')" id="l_M000250_source">show source</a> ]</p>
  <div id="M000250_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1173</span>
1173:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_with_binding</span>
1174:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FOO\n&quot;</span>, <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= upcase&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}).<span class="ruby-identifier">call</span>)
1175:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000244" class="method">
  <div id="M000244_title" class="title">
    <b>test_render_should_accept_a_binding_as_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000244_source')" id="l_M000244_source">show source</a> ]</p>
  <div id="M000244_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1135</span>
1135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_should_accept_a_binding_as_scope</span>
1136:     <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;This is a string!&quot;</span>
1137:     <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@var&quot;</span>, <span class="ruby-value str">&quot;Instance variable&quot;</span>)
1138:     <span class="ruby-identifier">b</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span>
1139:       <span class="ruby-identifier">var</span> = <span class="ruby-value str">&quot;Local variable&quot;</span>
1140:       <span class="ruby-identifier">binding</span>
1141:     <span class="ruby-keyword kw">end</span>
1142: 
1143:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;THIS IS A STRING!&lt;/p&gt;\n&lt;p&gt;Instance variable&lt;/p&gt;\n&lt;p&gt;Local variable&lt;/p&gt;\n&quot;</span>,
1144:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= upcase\n%p= @var\n%p= var&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>))
1145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000146" class="method">
  <div id="M000146_title" class="title">
    <b>test_ruby_code_should_work_inside_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show source</a> ]</p>
  <div id="M000146_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_code_should_work_inside_attributes</span>
142:     <span class="ruby-identifier">author</span> = <span class="ruby-value str">'hcatlin'</span>
143:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='3'&gt;foo&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 1+2} foo&quot;</span>).<span class="ruby-identifier">chomp</span>)
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000294" class="method">
  <div id="M000294_title" class="title">
    <b>test_ruby_multiline_after_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000294_source')" id="l_M000294_source">show source</a> ]</p>
  <div id="M000294_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1607</span>
1607:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_multiline_after_filter</span>
1608:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\nbar\nbar, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  foo\n  bar\n= [\&quot;bar\&quot;,\n   \&quot;baz\&quot;,\n   \&quot;bang\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1609:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000290" class="method">
  <div id="M000290_title" class="title">
    <b>test_ruby_multiline_in_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000290_source')" id="l_M000290_source">show source</a> ]</p>
  <div id="M000290_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1541</span>
1541:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_multiline_in_tag</span>
1542:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo, bar, baz&lt;/p&gt;\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= [\&quot;foo\&quot;,\n     \&quot;bar\&quot;,\n     \&quot;baz\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1543:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000293" class="method">
  <div id="M000293_title" class="title">
    <b>test_ruby_multiline_with_normal_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000293_source')" id="l_M000293_source">show source</a> ]</p>
  <div id="M000293_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1589</span>
1589:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_multiline_with_normal_multiline</span>
1590:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foobarbar, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= \&quot;foo\&quot; + |\n  \&quot;bar\&quot; + |\n  [\&quot;bar\&quot;, |\n   \&quot;baz\&quot;,\n   \&quot;bang\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>))
1591:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000304" class="method">
  <div id="M000304_title" class="title">
    <b>test_same_coding_comment_as_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000304_source')" id="l_M000304_source">show source</a> ]</p>
  <div id="M000304_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1710</span>
1710:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_same_coding_comment_as_encoding</span>
1711:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>, <span class="ruby-value str">&quot;-# coding: utf-8\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1712:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000215" class="method">
  <div id="M000215_title" class="title">
    <b>test_script_ending_in_comment_should_render_when_html_is_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000215_source')" id="l_M000215_source">show source</a> ]</p>
  <div id="M000215_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 850</span>
850:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_ending_in_comment_should_render_when_html_is_escaped</span>
851:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo&amp;amp;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'foo&amp;bar' #comment&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
852:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000216" class="method">
  <div id="M000216_title" class="title">
    <b>test_script_with_if_shouldnt_output</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000216_source')" id="l_M000216_source">show source</a> ]</p>
  <div id="M000216_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 854</span>
854:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_with_if_shouldnt_output</span>
855:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= \&quot;foo\&quot;\n%p= \&quot;bar\&quot; if false\n&quot;</span>))
856:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000213" class="method">
  <div id="M000213_title" class="title">
    <b>test_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000213_source')" id="l_M000213_source">show source</a> ]</p>
  <div id="M000213_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 840</span>
840:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scripts_should_respect_escape_html_option</span>
841:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
842:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
843:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000182" class="method">
  <div id="M000182_title" class="title">
    <b>test_silent_end_with_stuff</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000182_source')" id="l_M000182_source">show source</a> ]</p>
  <div id="M000182_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 511</span>
511:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_end_with_stuff</span>
512:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;e\nd\nc\nb\na\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- str = \&quot;abcde\&quot;\n- if true\n  = str.slice!(-1).chr\n- end until str.empty?\n&quot;</span>))
513: 
514:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;hi!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- if true\n  %p hi!\n- end if \&quot;foo\&quot;.gsub(/f/) do\n  - \&quot;z\&quot;\n- end + \&quot;bar\&quot;\n&quot;</span>))
515:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000283" class="method">
  <div id="M000283_title" class="title">
    <b>test_silent_ruby_multiline</b>()
  </div>
  <div class="description">
  <p>
Ruby Multiline
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000283_source')" id="l_M000283_source">show source</a> ]</p>
  <div id="M000283_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1424</span>
1424:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_ruby_multiline</span>
1425:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- foo = [\&quot;bar\&quot;,\n         \&quot;baz\&quot;,\n         \&quot;bang\&quot;]\n= foo.join(\&quot;, \&quot;)\n%p foo\n&quot;</span>))
1426:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000289" class="method">
  <div id="M000289_title" class="title">
    <b>test_silent_ruby_multiline_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000289_source')" id="l_M000289_source">show source</a> ]</p>
  <div id="M000289_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1521</span>
1521:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_ruby_multiline_with_block</span>
1522:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;far\nfaz\nfang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- [\&quot;bar\&quot;,\n   \&quot;baz\&quot;,\n   \&quot;bang\&quot;].map do |str|\n  = str.gsub(\&quot;ba\&quot;,\n             \&quot;fa\&quot;)\n%p foo\n%p bar\n&quot;</span>))
1523:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000190" class="method">
  <div id="M000190_title" class="title">
    <b>test_silent_script_with_hyphen_case</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000190_source')" id="l_M000190_source">show source</a> ]</p>
  <div id="M000190_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 693</span>
693:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_case</span>
694:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-case-bar-case'&quot;</span>))
695:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000191" class="method">
  <div id="M000191_title" class="title">
    <b>test_silent_script_with_hyphen_end</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000191_source')" id="l_M000191_source">show source</a> ]</p>
  <div id="M000191_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 697</span>
697:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end</span>
698:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-end-bar-end'&quot;</span>))
699:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000192" class="method">
  <div id="M000192_title" class="title">
    <b>test_silent_script_with_hyphen_end_and_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000192_source')" id="l_M000192_source">show source</a> ]</p>
  <div id="M000192_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 701</span>
701:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end_and_block</span>
702:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo-end&lt;/p&gt;\n&lt;p&gt;bar-end&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- (\&quot;foo-end-bar-end\&quot;.gsub(/\\\\w+-end/) do |s|\n  %p= s\n- end; nil)\n&quot;</span>))
703:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000201" class="method">
  <div id="M000201_title" class="title">
    <b>test_static_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000201_source')" id="l_M000201_source">show source</a> ]</p>
  <div id="M000201_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 768</span>
768:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_should_be_escaped</span>
769:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img class='atlantis' style='ugly&amp;amp;stupid' /&gt;\n&quot;</span>,
770:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img.atlantis{:style =&gt; 'ugly&amp;stupid'}&quot;</span>))
771:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/div&gt;\n&quot;</span>,
772:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly&amp;stupid'} foo&quot;</span>))
773:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/p&gt;\n&quot;</span>,
774:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; 'ugly&amp;stupid'}= 'foo'&quot;</span>))
775:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;#x000A;stupid'&gt;&lt;/p&gt;\n&quot;</span>,
776:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; \&quot;ugly\\nstupid\&quot;}&quot;</span>))
777:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000162" class="method">
  <div id="M000162_title" class="title">
    <b>test_static_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show source</a> ]</p>
  <div id="M000162_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_with_empty_attr</span>
251:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:src =&gt; '/foo.png', :alt =&gt; ''}&quot;</span>))
252:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000258" class="method">
  <div id="M000258_title" class="title">
    <b>test_static_hashes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000258_source')" id="l_M000258_source">show source</a> ]</p>
  <div id="M000258_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1230</span>
1230:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_hashes</span>
1231:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a =&amp;gt; b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a =&gt; b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1232:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a, b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a, b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1233:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\tb'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\tb&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1234:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\#{foo}b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\\#{foo}b&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000218" class="method">
  <div id="M000218_title" class="title">
    <b>test_stop_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000218_source')" id="l_M000218_source">show source</a> ]</p>
  <div id="M000218_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 884</span>
884:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_stop_eval</span>
885:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'Hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
886:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_concat 'foo'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
887:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' yes='no' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no'}/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
888:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no', :call =&gt; a_function() }/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
889:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div[1]/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
890:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:ruby\n  Kernel.puts 'hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
891:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000203" class="method">
  <div id="M000203_title" class="title">
    <b>test_string_double_equals_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show source</a> ]</p>
  <div id="M000203_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 790</span>
790:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_double_equals_should_be_esaped</span>
791:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
792:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
793:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000208" class="method">
  <div id="M000208_title" class="title">
    <b>test_string_interpolation_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000208_source')" id="l_M000208_source">show source</a> ]</p>
  <div id="M000208_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 815</span>
815:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_interpolation_should_be_esaped</span>
816:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
817:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
818:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000152" class="method">
  <div id="M000152_title" class="title">
    <b>test_strings_should_get_stripped_inside_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show source</a> ]</p>
  <div id="M000152_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_strings_should_get_stripped_inside_tags</span>
204:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='stripped'&gt;This should have no spaces in front of it&lt;/div&gt;&quot;</span>,
205:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.stripped    This should have no spaces in front of it&quot;</span>).<span class="ruby-identifier">chomp</span>)
206:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000311" class="method">
  <div id="M000311_title" class="title">
    <b>test_suffixed_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000311_source')" id="l_M000311_source">show source</a> ]</p>
  <div id="M000311_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1798</span>
1798:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_suffixed_coding_comment</span>
1799:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# coding: ibm866 ASFJ (&amp;(&amp;#!$\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1800:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000321" class="method">
  <div id="M000321_title" class="title">
    <b>test_suffixed_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000321_source')" id="l_M000321_source">show source</a> ]</p>
  <div id="M000321_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1928</span>
1928:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_suffixed_emacs_coding_comment</span>
1929:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-# -*- coding: ibm866 -*- foo bar coding: baz\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1930:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000161" class="method">
  <div id="M000161_title" class="title">
    <b>test_tag_with_failed_if_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show source</a> ]</p>
  <div id="M000161_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 246</span>
246:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tag_with_failed_if_should_render_as_empty</span>
247:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'Hello' if false&quot;</span>))
248:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000168" class="method">
  <div id="M000168_title" class="title">
    <b>test_textareas</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show source</a> ]</p>
  <div id="M000168_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 289</span>
289:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_textareas</span>
290:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/textarea&gt;\n&quot;</span>,
291:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea= &quot;Foo\n  bar\n   baz&quot;'</span>))
292: 
293:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/pre&gt;\n&quot;</span>,
294:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre= &quot;Foo\n  bar\n   baz&quot;'</span>))
295: 
296:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;textarea&gt;#{'a' * 100}&lt;/textarea&gt;\n&quot;</span>,
297:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%textarea #{'a' * 100}&quot;</span>))
298: 
299:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;textarea&gt;Foo\n  Bar\n  Baz&lt;/textarea&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %textarea\n    Foo\n    Bar\n    Baz\n&quot;</span>))
300:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000278" class="method">
  <div id="M000278_title" class="title">
    <b>test_truthy_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000278_source')" id="l_M000278_source">show source</a> ]</p>
  <div id="M000278_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1371</span>
1371:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_truthy_new_attributes</span>
1372:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href) bar&quot;</span>))
1373:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a bar='baz' href&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href bar='baz') bar&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>))
1374:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=true) bar&quot;</span>))
1375:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=false) bar&quot;</span>))
1376:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000237" class="method">
  <div id="M000237_title" class="title">
    <b>test_ugly_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000237_source')" id="l_M000237_source">show source</a> ]</p>
  <div id="M000237_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1081</span>
1081:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_filter</span>
1082:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;#foo {\n  bar: baz; }\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:sass\n  #foo\n    bar: baz&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1083:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000254" class="method">
  <div id="M000254_title" class="title">
    <b>test_ugly_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000254_source')" id="l_M000254_source">show source</a> ]</p>
  <div id="M000254_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1203</span>
1203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_true</span>
1204:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='outer'&gt;\n&lt;div id='inner'&gt;\n&lt;p&gt;hello world&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&quot;</span>,
1205:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#outer\n  #inner\n    %p hello world&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1206: 
1207:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
1208:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%p #{'s' * 75}&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1209: 
1210:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
1211:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 's' * 75&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1212:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000234" class="method">
  <div id="M000234_title" class="title">
    <b>test_unbalanced_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000234_source')" id="l_M000234_source">show source</a> ]</p>
  <div id="M000234_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1059</span>
1059:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unbalanced_brackets</span>
1060:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'foo #{1 + 5} foo #{6 + 7 bar #{8 + 9}'</span>)
1061:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
1062:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Unbalanced brackets.&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
1063:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000205" class="method">
  <div id="M000205_title" class="title">
    <b>test_unescaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000205_source')" id="l_M000205_source">show source</a> ]</p>
  <div id="M000205_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 800</span>
800:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_double_equals</span>
801:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
802:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
803:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000210" class="method">
  <div id="M000210_title" class="title">
    <b>test_unescaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000210_source')" id="l_M000210_source">show source</a> ]</p>
  <div id="M000210_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 825</span>
825:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_interpolation</span>
826:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
827:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
828:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000286" class="method">
  <div id="M000286_title" class="title">
    <b>test_unescaped_loud_ruby_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000286_source')" id="l_M000286_source">show source</a> ]</p>
  <div id="M000286_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1471</span>
1471:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_loud_ruby_multiline</span>
1472:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar&lt;, baz, bang\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!= [\&quot;bar&lt;\&quot;,\n    \&quot;baz\&quot;,\n    \&quot;bang\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1473:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000292" class="method">
  <div id="M000292_title" class="title">
    <b>test_unescaped_ruby_multiline_in_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000292_source')" id="l_M000292_source">show source</a> ]</p>
  <div id="M000292_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1573</span>
1573:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_ruby_multiline_in_tag</span>
1574:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;, bar, baz&lt;/p&gt;\n&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!= [\&quot;foo&lt;\&quot;,\n      \&quot;bar\&quot;,\n      \&quot;baz\&quot;].join(\&quot;, \&quot;)\n%p foo\n%p bar\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1575:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000207" class="method">
  <div id="M000207_title" class="title">
    <b>test_unescaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000207_source')" id="l_M000207_source">show source</a> ]</p>
  <div id="M000207_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 810</span>
810:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_double_equals</span>
811:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
812:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
813:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000212" class="method">
  <div id="M000212_title" class="title">
    <b>test_unescaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000212_source')" id="l_M000212_source">show source</a> ]</p>
  <div id="M000212_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 835</span>
835:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_interpolation</span>
836:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
837:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
838:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000260" class="method">
  <div id="M000260_title" class="title">
    <b>test_utf8_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000260_source')" id="l_M000260_source">show source</a> ]</p>
  <div id="M000260_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1241</span>
1241:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utf8_attrs</span>
1242:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='hllo'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:href =&gt; 'hllo'}&quot;</span>))
1243:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='hllo'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href='hllo')&quot;</span>))
1244:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000295" class="method">
  <div id="M000295_title" class="title">
    <b>test_utf_8_bom</b>()
  </div>
  <div class="description">
  <p>
Encodings
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000295_source')" id="l_M000295_source">show source</a> ]</p>
  <div id="M000295_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1630</span>
1630:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utf_8_bom</span>
1631:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div class='foo'&gt;\n  &lt;p&gt;baz&lt;/p&gt;\n&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\\xEF\\xBB\\xBF.foo\n  %p baz\n&quot;</span>)
1632:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000308" class="method">
  <div id="M000308_title" class="title">
    <b>test_whitespace_insensitive_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000308_source')" id="l_M000308_source">show source</a> ]</p>
  <div id="M000308_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1759</span>
1759:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_insensitive_coding_comment</span>
1760:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-#coding:ibm866\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1761:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000318" class="method">
  <div id="M000318_title" class="title">
    <b>test_whitespace_insensitive_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000318_source')" id="l_M000318_source">show source</a> ]</p>
  <div id="M000318_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1889</span>
1889:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_insensitive_emacs_coding_comment</span>
1890:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-#-*-coding:ibm866-*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1891:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000317" class="method">
  <div id="M000317_title" class="title">
    <b>test_whitespace_insensitive_emacs_coding_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000317_source')" id="l_M000317_source">show source</a> ]</p>
  <div id="M000317_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1876</span>
1876:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_insensitive_emacs_coding_comment</span>
1877:       <span class="ruby-identifier">assert_renders_encoded</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;IBM866&quot;</span>), <span class="ruby-value str">&quot;-#-*-coding:ibm866-*-\n%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>)
1878:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000173" class="method">
  <div id="M000173_title" class="title">
    <b>test_whitespace_nuke_with_both_newlines</b>()
  </div>
  <div class="description">
  <p>
Regression tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show source</a> ]</p>
  <div id="M000173_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 354</span>
354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_both_newlines</span>
355:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p&lt;= &quot;\nfoo\n&quot;'</span>))
356:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;p&gt;foo&lt;/p&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %p&lt;= \&quot;\\\\nfoo\\\\n\&quot;\n&quot;</span>))
357:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000174" class="method">
  <div id="M000174_title" class="title">
    <b>test_whitespace_nuke_with_tags_and_else</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show source</a> ]</p>
  <div id="M000174_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 368</span>
368:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_tags_and_else</span>
369:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;foo&lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b&lt;\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
370: 
371:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;\n    foo\n  &lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
372:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000256" class="method">
  <div id="M000256_title" class="title">
    <b>test_xhtml_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000256_source')" id="l_M000256_source">show source</a> ]</p>
  <div id="M000256_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1221</span>
1221:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xhtml_output_option</span>
1222:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br /&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1223:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000266" class="method">
  <div id="M000266_title" class="title">
    <b>test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</b>()
  </div>
  <div class="description">
  <p>
because anything before the doctype triggers quirks mode in IE
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000266_source')" id="l_M000266_source">show source</a> ]</p>
  <div id="M000266_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1274</span>
1274:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</span>
1275:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/^\s+/</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! xml\n!!!&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
1276:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000245" class="method">
  <div id="M000245_title" class="title">
    <b>test_yield_should_work_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000245_source')" id="l_M000245_source">show source</a> ]</p>
  <div id="M000245_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1147</span>
1147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_binding</span>
1148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}) { <span class="ruby-value">12</span> })
1149:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000246" class="method">
  <div id="M000246_title" class="title">
    <b>test_yield_should_work_with_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000246_source')" id="l_M000246_source">show source</a> ]</p>
  <div id="M000246_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1151</span>
1151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_def_method</span>
1152:     <span class="ruby-identifier">s</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1153:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">:render</span>)
1154:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">render</span> { <span class="ruby-value">12</span> })
1155:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>