  <div id="C00000005">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />EngineTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/engine_test_rb.html');">test/haml/engine_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000068&name=engine" >engine</a></li>
  <li><a href="index.html?a=M000067&name=render" >render</a></li>
  <li><a href="index.html?a=M000114&name=test_ampersand_equals_inline_should_escape" >test_ampersand_equals_inline_should_escape</a></li>
  <li><a href="index.html?a=M000113&name=test_ampersand_equals_should_escape" >test_ampersand_equals_should_escape</a></li>
  <li><a href="index.html?a=M000115&name=test_ampersand_equals_should_escape_before_preserve" >test_ampersand_equals_should_escape_before_preserve</a></li>
  <li><a href="index.html?a=M000168&name=test_arbitrary_output_option" >test_arbitrary_output_option</a></li>
  <li><a href="index.html?a=M000088&name=test_attr_hashes_not_modified" >test_attr_hashes_not_modified</a></li>
  <li><a href="index.html?a=M000137&name=test_attr_wrapper" >test_attr_wrapper</a></li>
  <li><a href="index.html?a=M000087&name=test_attribute_hash_with_newlines" >test_attribute_hash_with_newlines</a></li>
  <li><a href="index.html?a=M000072&name=test_attributes_should_render_correctly" >test_attributes_should_render_correctly</a></li>
  <li><a href="index.html?a=M000138&name=test_attrs_parsed_correctly" >test_attrs_parsed_correctly</a></li>
  <li><a href="index.html?a=M000166&name=test_auto_preserve_unless_ugly" >test_auto_preserve_unless_ugly</a></li>
  <li><a href="index.html?a=M000151&name=test_balanced_conditional_comments" >test_balanced_conditional_comments</a></li>
  <li><a href="index.html?a=M000117&name=test_bang_equals_inline_should_not_escape" >test_bang_equals_inline_should_not_escape</a></li>
  <li><a href="index.html?a=M000116&name=test_bang_equals_should_not_escape" >test_bang_equals_should_not_escape</a></li>
  <li><a href="index.html?a=M000178&name=test_basic_new_attributes" >test_basic_new_attributes</a></li>
  <li><a href="index.html?a=M000093&name=test_boolean_attributes" >test_boolean_attributes</a></li>
  <li><a href="index.html?a=M000097&name=test_both_case_indentation_work_with_deeply_nested_code" >test_both_case_indentation_work_with_deeply_nested_code</a></li>
  <li><a href="index.html?a=M000094&name=test_both_whitespace_nukes_work_together" >test_both_whitespace_nukes_work_together</a></li>
  <li><a href="index.html?a=M000149&name=test_compile_error" >test_compile_error</a></li>
  <li><a href="index.html?a=M000192&name=test_convert_template_def_method" >test_convert_template_def_method</a></li>
  <li><a href="index.html?a=M000189&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000191&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000190&name=test_convert_template_render_proc" >test_convert_template_render_proc</a></li>
  <li><a href="index.html?a=M000139&name=test_correct_parsing_with_brackets" >test_correct_parsing_with_brackets</a></li>
  <li><a href="index.html?a=M000090&name=test_cr_newline" >test_cr_newline</a></li>
  <li><a href="index.html?a=M000073&name=test_css_id_as_attribute_should_be_appended_with_underscore" >test_css_id_as_attribute_should_be_appended_with_underscore</a></li>
  <li><a href="index.html?a=M000106&name=test_curly_brace" >test_curly_brace</a></li>
  <li><a href="index.html?a=M000162&name=test_def_method_locals" >test_def_method_locals</a></li>
  <li><a href="index.html?a=M000161&name=test_def_method_with_module" >test_def_method_with_module</a></li>
  <li><a href="index.html?a=M000188&name=test_default_encoding" >test_default_encoding</a></li>
  <li><a href="index.html?a=M000136&name=test_doctypes" >test_doctypes</a></li>
  <li><a href="index.html?a=M000119&name=test_dynamic_attributes_should_be_escaped" >test_dynamic_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000086&name=test_dynamic_attributes_with_empty_attr" >test_dynamic_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000145&name=test_dynamic_attrs_shouldnt_register_as_literal_values" >test_dynamic_attrs_shouldnt_register_as_literal_values</a></li>
  <li><a href="index.html?a=M000146&name=test_dynamic_attrs_with_self_closed_tag" >test_dynamic_attrs_with_self_closed_tag</a></li>
  <li><a href="index.html?a=M000170&name=test_dynamic_hashes_with_suppress_eval" >test_dynamic_hashes_with_suppress_eval</a></li>
  <li><a href="index.html?a=M000181&name=test_dynamic_new_attributes" >test_dynamic_new_attributes</a></li>
  <li><a href="index.html?a=M000140&name=test_empty_attrs" >test_empty_attrs</a></li>
  <li><a href="index.html?a=M000152&name=test_empty_filter" >test_empty_filter</a></li>
  <li><a href="index.html?a=M000069&name=test_empty_render" >test_empty_render</a></li>
  <li><a href="index.html?a=M000071&name=test_empty_render_should_remain_empty" >test_empty_render_should_remain_empty</a></li>
  <li><a href="index.html?a=M000089&name=test_end_of_file_multiline" >test_end_of_file_multiline</a></li>
  <li><a href="index.html?a=M000101&name=test_end_with_method_call" >test_end_with_method_call</a></li>
  <li><a href="index.html?a=M000098&name=test_equals_block_with_ugly" >test_equals_block_with_ugly</a></li>
  <li><a href="index.html?a=M000107&name=test_escape_html" >test_escape_html</a></li>
  <li><a href="index.html?a=M000121&name=test_escaped_inline_string_double_equals" >test_escaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000126&name=test_escaped_inline_string_interpolation" >test_escaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000123&name=test_escaped_string_double_equals" >test_escaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000128&name=test_escaped_string_interpolation" >test_escaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000148&name=test_exception" >test_exception</a></li>
  <li><a href="index.html?a=M000147&name=test_exception_line" >test_exception_line</a></li>
  <li><a href="index.html?a=M000134&name=test_filename_and_line" >test_filename_and_line</a></li>
  <li><a href="index.html?a=M000070&name=test_flexible_tabulation" >test_flexible_tabulation</a></li>
  <li><a href="index.html?a=M000177&name=test_html5_doctype" >test_html5_doctype</a></li>
  <li><a href="index.html?a=M000173&name=test_html_doesnt_add_slash_to_self_closing_tags" >test_html_doesnt_add_slash_to_self_closing_tags</a></li>
  <li><a href="index.html?a=M000175&name=test_html_has_different_doctype" >test_html_has_different_doctype</a></li>
  <li><a href="index.html?a=M000171&name=test_html_has_no_self_closing_tags" >test_html_has_no_self_closing_tags</a></li>
  <li><a href="index.html?a=M000174&name=test_html_ignores_xml_prolog_declaration" >test_html_ignores_xml_prolog_declaration</a></li>
  <li><a href="index.html?a=M000172&name=test_html_renders_empty_node_with_closing_tag" >test_html_renders_empty_node_with_closing_tag</a></li>
  <li><a href="index.html?a=M000100&name=test_inline_if" >test_inline_if</a></li>
  <li><a href="index.html?a=M000131&name=test_inline_scripts_should_respect_escape_html_option" >test_inline_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000080&name=test_interpolation" >test_interpolation</a></li>
  <li><a href="index.html?a=M000082&name=test_interpolation_at_the_beginning_of_a_line" >test_interpolation_at_the_beginning_of_a_line</a></li>
  <li><a href="index.html?a=M000081&name=test_interpolation_in_the_middle_of_a_string" >test_interpolation_in_the_middle_of_a_string</a></li>
  <li><a href="index.html?a=M000109&name=test_javascript_filter_with_dynamic_interp_and_escape_html" >test_javascript_filter_with_dynamic_interp_and_escape_html</a></li>
  <li><a href="index.html?a=M000154&name=test_local_assigns_dont_modify_class" >test_local_assigns_dont_modify_class</a></li>
  <li><a href="index.html?a=M000144&name=test_locals" >test_locals</a></li>
  <li><a href="index.html?a=M000079&name=test_multi_render" >test_multi_render</a></li>
  <li><a href="index.html?a=M000105&name=test_multiline_in_filter" >test_multiline_in_filter</a></li>
  <li><a href="index.html?a=M000186&name=test_multiline_new_attribute" >test_multiline_new_attribute</a></li>
  <li><a href="index.html?a=M000104&name=test_multiline_with_colon_after_filter" >test_multiline_with_colon_after_filter</a></li>
  <li><a href="index.html?a=M000102&name=test_nested_end_with_method_call" >test_nested_end_with_method_call</a></li>
  <li><a href="index.html?a=M000187&name=test_new_and_old_attributes" >test_new_and_old_attributes</a></li>
  <li><a href="index.html?a=M000180&name=test_new_attribute_classes" >test_new_attribute_classes</a></li>
  <li><a href="index.html?a=M000185&name=test_new_attribute_escaping" >test_new_attribute_escaping</a></li>
  <li><a href="index.html?a=M000179&name=test_new_attribute_ids" >test_new_attribute_ids</a></li>
  <li><a href="index.html?a=M000182&name=test_new_attribute_interpolation" >test_new_attribute_interpolation</a></li>
  <li><a href="index.html?a=M000184&name=test_new_attribute_parsing" >test_new_attribute_parsing</a></li>
  <li><a href="index.html?a=M000108&name=test_new_attrs_with_hash" >test_new_attrs_with_hash</a></li>
  <li><a href="index.html?a=M000141&name=test_nil_attrs" >test_nil_attrs</a></li>
  <li><a href="index.html?a=M000143&name=test_nil_class_with_syntactic_class" >test_nil_class_with_syntactic_class</a></li>
  <li><a href="index.html?a=M000142&name=test_nil_id_with_syntactic_id" >test_nil_id_with_syntactic_id</a></li>
  <li><a href="index.html?a=M000075&name=test_nil_should_render_empty_tag" >test_nil_should_render_empty_tag</a></li>
  <li><a href="index.html?a=M000083&name=test_nil_tag_value_should_render_as_empty" >test_nil_tag_value_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000157&name=test_non_literal_attributes" >test_non_literal_attributes</a></li>
  <li><a href="index.html?a=M000156&name=test_object_ref_before_attrs" >test_object_ref_before_attrs</a></li>
  <li><a href="index.html?a=M000155&name=test_object_ref_with_nil_id" >test_object_ref_with_nil_id</a></li>
  <li><a href="index.html?a=M000077&name=test_one_liner_should_be_one_line" >test_one_liner_should_be_one_line</a></li>
  <li><a href="index.html?a=M000078&name=test_one_liner_with_newline_shouldnt_be_one_line" >test_one_liner_with_newline_shouldnt_be_one_line</a></li>
  <li><a href="index.html?a=M000099&name=test_plain_equals_with_ugly" >test_plain_equals_with_ugly</a></li>
  <li><a href="index.html?a=M000092&name=test_pre_code" >test_pre_code</a></li>
  <li><a href="index.html?a=M000163&name=test_render_proc_locals" >test_render_proc_locals</a></li>
  <li><a href="index.html?a=M000164&name=test_render_proc_with_binding" >test_render_proc_with_binding</a></li>
  <li><a href="index.html?a=M000158&name=test_render_should_accept_a_binding_as_scope" >test_render_should_accept_a_binding_as_scope</a></li>
  <li><a href="index.html?a=M000074&name=test_ruby_code_should_work_inside_attributes" >test_ruby_code_should_work_inside_attributes</a></li>
  <li><a href="index.html?a=M000132&name=test_script_ending_in_comment_should_render_when_html_is_escaped" >test_script_ending_in_comment_should_render_when_html_is_escaped</a></li>
  <li><a href="index.html?a=M000133&name=test_script_with_if_shouldnt_output" >test_script_with_if_shouldnt_output</a></li>
  <li><a href="index.html?a=M000130&name=test_scripts_should_respect_escape_html_option" >test_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000103&name=test_silent_end_with_stuff" >test_silent_end_with_stuff</a></li>
  <li><a href="index.html?a=M000110&name=test_silent_script_with_hyphen_case" >test_silent_script_with_hyphen_case</a></li>
  <li><a href="index.html?a=M000111&name=test_silent_script_with_hyphen_end" >test_silent_script_with_hyphen_end</a></li>
  <li><a href="index.html?a=M000112&name=test_silent_script_with_hyphen_end_and_block" >test_silent_script_with_hyphen_end_and_block</a></li>
  <li><a href="index.html?a=M000118&name=test_static_attributes_should_be_escaped" >test_static_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000085&name=test_static_attributes_with_empty_attr" >test_static_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000169&name=test_static_hashes" >test_static_hashes</a></li>
  <li><a href="index.html?a=M000135&name=test_stop_eval" >test_stop_eval</a></li>
  <li><a href="index.html?a=M000120&name=test_string_double_equals_should_be_esaped" >test_string_double_equals_should_be_esaped</a></li>
  <li><a href="index.html?a=M000125&name=test_string_interpolation_should_be_esaped" >test_string_interpolation_should_be_esaped</a></li>
  <li><a href="index.html?a=M000076&name=test_strings_should_get_stripped_inside_tags" >test_strings_should_get_stripped_inside_tags</a></li>
  <li><a href="index.html?a=M000084&name=test_tag_with_failed_if_should_render_as_empty" >test_tag_with_failed_if_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000091&name=test_textareas" >test_textareas</a></li>
  <li><a href="index.html?a=M000183&name=test_truthy_new_attributes" >test_truthy_new_attributes</a></li>
  <li><a href="index.html?a=M000153&name=test_ugly_filter" >test_ugly_filter</a></li>
  <li><a href="index.html?a=M000165&name=test_ugly_true" >test_ugly_true</a></li>
  <li><a href="index.html?a=M000150&name=test_unbalanced_brackets" >test_unbalanced_brackets</a></li>
  <li><a href="index.html?a=M000122&name=test_unescaped_inline_string_double_equals" >test_unescaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000127&name=test_unescaped_inline_string_interpolation" >test_unescaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000124&name=test_unescaped_string_double_equals" >test_unescaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000129&name=test_unescaped_string_interpolation" >test_unescaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000095&name=test_whitespace_nuke_with_both_newlines" >test_whitespace_nuke_with_both_newlines</a></li>
  <li><a href="index.html?a=M000096&name=test_whitespace_nuke_with_tags_and_else" >test_whitespace_nuke_with_tags_and_else</a></li>
  <li><a href="index.html?a=M000167&name=test_xhtml_output_option" >test_xhtml_output_option</a></li>
  <li><a href="index.html?a=M000176&name=test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html" >test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</a></li>
  <li><a href="index.html?a=M000159&name=test_yield_should_work_with_binding" >test_yield_should_work_with_binding</a></li>
  <li><a href="index.html?a=M000160&name=test_yield_should_work_with_def_method" >test_yield_should_work_with_def_method</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">EXCEPTION_MAP</td>
    <td>=</td>
    <td class="attr-value">{     &quot;!!!\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a header command is illegal.&quot;,     &quot;a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within plain text is illegal.&quot;,     &quot;/ a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;,     &quot;% a&quot; =&gt; 'Invalid tag: &quot;% a&quot;.',     &quot;%p a\n  b&quot; =&gt; &quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;,     &quot;%p=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p/\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;,     &quot;:a\n  b&quot; =&gt; ['Filter &quot;a&quot; is not defined.', 1],     &quot;:a= b&quot; =&gt; 'Invalid filter name &quot;:a= b&quot;.',     &quot;.&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.#&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.{} a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.() a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.= a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%p..a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%a/ b&quot; =&gt; &quot;Self-closing tags can't have content.&quot;,     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}/ e&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}=&quot; =&gt; [&quot;There's no Ruby code for = to evaluate.&quot;, 2],     &quot;%p.{:a =&gt; 'b',\n:c =&gt; 'd'} e&quot; =&gt; [&quot;Illegal element: classes and ids must have values.&quot;, 1],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n%p/ a&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; raise('foo'),\n:e =&gt; 'f'}&quot; =&gt; [&quot;foo&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; raise('foo')}&quot; =&gt; [&quot;foo&quot;, 3],     &quot; %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;  %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;- end&quot; =&gt; &quot;You don't need to use \&quot;- end\&quot; in Haml. Use indentation instead:\n- if foo?\n  %strong Foo!\n- else\n  Not foo.&quot;,     &quot; \n\t\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;\n\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;%p\n  foo\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n%p\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n\t\tfoo\n\tfoo&quot; =&gt; [&quot;Inconsistent indentation: 1 tab was used for indentation, but the rest of the document was indented using 2 tabs.&quot;, 3],     &quot;%p\n  foo\n   foo&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n  %p\n   bar&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n  :plain\n     bar\n   \t  baz&quot; =&gt; ['Inconsistent indentation: &quot;   \t  &quot; was used for indentation, but the rest of the document was indented using 2 spaces.', 4],     &quot;%p\n  foo\n%p\n    bar&quot; =&gt; [&quot;The line was indented 2 levels deeper than the previous line.&quot;, 4],     &quot;%p\n  foo\n  %p\n        bar&quot; =&gt; [&quot;The line was indented 3 levels deeper than the previous line.&quot;, 4],     &quot;%p\n \tfoo&quot; =&gt; [&quot;Indentation can't use both tabs and spaces.&quot;, 2],     &quot;%p(&quot; =&gt; &quot;Invalid attribute list: \&quot;(\&quot;.&quot;,     &quot;%p(foo=\nbar)&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo=\&quot;.&quot;, 1],     &quot;%p(foo=)&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo=)\&quot;.&quot;,     &quot;%p(foo 'bar')&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo 'bar')\&quot;.&quot;,     &quot;%p(foo 'bar'\nbaz='bang')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo 'bar'\&quot;.&quot;, 1],     &quot;%p(foo='bar'\nbaz 'bang'\nbip='bop')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo='bar' baz 'bang'\&quot;.&quot;, 2],     &quot;%p{:foo =&gt; 'bar' :bar =&gt; 'baz'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; }&quot; =&gt; :compile,     &quot;%p{=&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar}&quot; =&gt; :compile,     &quot;%p{'foo =&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar\&quot;}&quot; =&gt; :compile,      # Regression tests     &quot;- raise 'foo'\n\n\n\nbar&quot; =&gt; [&quot;foo&quot;, 1],     &quot;= 'foo'\n-raise 'foo'&quot; =&gt; [&quot;foo&quot;, 2],     &quot;\n\n\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p foo |\n   bar |\n   baz |\nbop\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 5],     &quot;foo\n\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within plain text is illegal.&quot;, 4],     &quot;%p/\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;, 3],     &quot;%p foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;, 3],     &quot;/ foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;, 3],     &quot;!!!\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a header command is illegal.&quot;, 3],     &quot;foo\n:ruby\n  1\n  2\n  3\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],   }</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
A map of erroneous <a href="index.html?a=C00000029&name=Haml">Haml</a>
documents to the error messages they should produce. The error messages may
be arrays; if so, the second element should be the line number that should
be reported for the error. If this isn&#8217;t provided, the tests will
assume the line number should be the last line of the document.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">User</td>
    <td>=</td>
    <td class="attr-value">Struct.new('User', :id)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000068" class="method">
  <div id="M000068_title" class="title">
    <b>engine</b>(text, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show source</a> ]</p>
  <div id="M000068_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 85</span>
85:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
86:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>]
87:       <span class="ruby-comment cmt"># use caller method name as fake filename. useful for debugging</span>
88:       <span class="ruby-identifier">i</span> = <span class="ruby-value">-1</span>
89:       <span class="ruby-identifier">caller</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/`(.+?)'/</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'test_'</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
90:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>] = <span class="ruby-node">&quot;(#{$1})&quot;</span>
91:     <span class="ruby-keyword kw">end</span>
92:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
93:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000067" class="method">
  <div id="M000067_title" class="title">
    <b>render</b>(text, options = {}, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show source</a> ]</p>
  <div id="M000067_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
80:     <span class="ruby-identifier">scope</span>  = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:scope</span>)  <span class="ruby-operator">||</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
81:     <span class="ruby-identifier">locals</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:locals</span>) <span class="ruby-operator">||</span> {}
82:     <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
83:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000114" class="method">
  <div id="M000114_title" class="title">
    <b>test_ampersand_equals_inline_should_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show source</a> ]</p>
  <div id="M000114_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 612</span>
612:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_inline_should_escape</span>
613:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
614:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000113" class="method">
  <div id="M000113_title" class="title">
    <b>test_ampersand_equals_should_escape</b>()
  </div>
  <div class="description">
  <p>
HTML escaping tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show source</a> ]</p>
  <div id="M000113_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 608</span>
608:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape</span>
609:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
610:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000115" class="method">
  <div id="M000115_title" class="title">
    <b>test_ampersand_equals_should_escape_before_preserve</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show source</a> ]</p>
  <div id="M000115_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 616</span>
616:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape_before_preserve</span>
617:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;foo&amp;#x000A;bar&lt;/textarea&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea&amp;= &quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
618:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000168" class="method">
  <div id="M000168_title" class="title">
    <b>test_arbitrary_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show source</a> ]</p>
  <div id="M000168_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1015</span>
1015:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_arbitrary_output_option</span>
1016:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-value str">&quot;Invalid output format :html1&quot;</span>) { <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html1</span>) }
1017:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000088" class="method">
  <div id="M000088_title" class="title">
    <b>test_attr_hashes_not_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show source</a> ]</p>
  <div id="M000088_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 189</span>
189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_hashes_not_modified</span>
190:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>}
191:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div color='red'&gt;&lt;/div&gt;\n&lt;div class='special' color='red'&gt;&lt;/div&gt;\n&lt;div color='red'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{hash}\n.special{hash}\n%div{hash}\n&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:hash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">hash</span>}))
192:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">hash</span>, {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>})
193:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000137" class="method">
  <div id="M000137_title" class="title">
    <b>test_attr_wrapper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show source</a> ]</p>
  <div id="M000137_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 778</span>
778:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_wrapper</span>
779:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p strange=*attrs*&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :strange =&gt; 'attrs'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'*'</span>))
780:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo\&quot;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
781:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;quo'te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\\'te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
782:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;q'uo&amp;quot;te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'q\\'uo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
783:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot; ?&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! XML&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
784:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000087" class="method">
  <div id="M000087_title" class="title">
    <b>test_attribute_hash_with_newlines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show source</a> ]</p>
  <div id="M000087_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_hash_with_newlines</span>
183:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;foop&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'} foop&quot;</span>))
184:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;\n  foop\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}\n  foop&quot;</span>))
185:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}/&quot;</span>))
186:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' e='f'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd',\n   :e =&gt; 'f'}&quot;</span>))
187:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000072" class="method">
  <div id="M000072_title" class="title">
    <b>test_attributes_should_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show source</a> ]</p>
  <div id="M000072_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_should_render_correctly</span>
113:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000138" class="method">
  <div id="M000138_title" class="title">
    <b>test_attrs_parsed_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show source</a> ]</p>
  <div id="M000138_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 786</span>
786:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attrs_parsed_correctly</span>
787:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p boom=&gt;biddly='bar =&amp;gt; baz'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'boom=&gt;biddly' =&gt; 'bar =&gt; baz'}&quot;</span>))
788:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo,bar='baz, qux'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'foo,bar' =&gt; 'baz, qux'}&quot;</span>))
789:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo&amp;#x000A;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\\nte\&quot;}&quot;</span>))
790:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo4te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\#{2 + 2}te\&quot;}&quot;</span>))
791:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000166" class="method">
  <div id="M000166_title" class="title">
    <b>test_auto_preserve_unless_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show source</a> ]</p>
  <div id="M000166_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1003</span>
1003:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_auto_preserve_unless_ugly</span>
1004:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo&amp;#x000A;bar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>))
1005:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>))
1006:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1007:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1008:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000151" class="method">
  <div id="M000151_title" class="title">
    <b>test_balanced_conditional_comments</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show source</a> ]</p>
  <div id="M000151_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 903</span>
903:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_balanced_conditional_comments</span>
904:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;!--[if !(IE 6)|(IE 7)]&gt; Bracket: ] &lt;![endif]--&gt;\n&quot;</span>,
905:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;/[if !(IE 6)|(IE 7)] Bracket: ]&quot;</span>))
906:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000117" class="method">
  <div id="M000117_title" class="title">
    <b>test_bang_equals_inline_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show source</a> ]</p>
  <div id="M000117_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 624</span>
624:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_inline_should_not_escape</span>
625:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
626:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000116" class="method">
  <div id="M000116_title" class="title">
    <b>test_bang_equals_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show source</a> ]</p>
  <div id="M000116_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 620</span>
620:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_should_not_escape</span>
621:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  != 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
622:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000178" class="method">
  <div id="M000178_title" class="title">
    <b>test_basic_new_attributes</b>()
  </div>
  <div class="description">
  <p>
New attributes
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show source</a> ]</p>
  <div id="M000178_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1069</span>
1069:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_new_attributes</span>
1070:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a() bar&quot;</span>))
1071:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href='foo') bar&quot;</span>))
1072:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='c' c='d' d='e'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(b=&quot;c&quot; c='d' d=&quot;e&quot;) baz}</span>))
1073:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000093" class="method">
  <div id="M000093_title" class="title">
    <b>test_boolean_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show source</a> ]</p>
  <div id="M000093_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 248</span>
248:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_attributes</span>
249:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
250:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
251:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar='bar' baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
252:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
253: 
254:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
255:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
256:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
257:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
258:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000097" class="method">
  <div id="M000097_title" class="title">
    <b>test_both_case_indentation_work_with_deeply_nested_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show source</a> ]</p>
  <div id="M000097_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 322</span>
322:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_case_indentation_work_with_deeply_nested_code</span>
323:     <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&lt;h2&gt;\n  other\n&lt;/h2&gt;\n&quot;</span>
324:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n- when 'test'\n  %h2\n    hi\n- when 'other'\n  %h2\n    other\n&quot;</span>))
325:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n  - when 'test'\n    %h2\n      hi\n  - when 'other'\n    %h2\n      other\n&quot;</span>))
326:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000094" class="method">
  <div id="M000094_title" class="title">
    <b>test_both_whitespace_nukes_work_together</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show source</a> ]</p>
  <div id="M000094_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 260</span>
260:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_whitespace_nukes_work_together</span>
261:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;q&gt;Foo\n  Bar&lt;/q&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %q&gt;&lt;= \&quot;Foo\\\\nBar\&quot;\n&quot;</span>))
262:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000149" class="method">
  <div id="M000149_title" class="title">
    <b>test_compile_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000149_source')" id="l_M000149_source">show source</a> ]</p>
  <div id="M000149_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 888</span>
888:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_compile_error</span>
889:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n- fee)\nc&quot;</span>)
890:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
891:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/\(test_compile_error\):3: syntax error/i</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
892:   <span class="ruby-keyword kw">else</span>
893:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>,
894:            <span class="ruby-value str">'&quot;a\nb\n- fee)\nc&quot; doesn\'t produce an exception!'</span>)
895:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000192" class="method">
  <div id="M000192_title" class="title">
    <b>test_convert_template_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000192_source')" id="l_M000192_source">show source</a> ]</p>
  <div id="M000192_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1197</span>
1197:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_def_method</span>
1198:       <span class="ruby-identifier">assert_converts_template_properly</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
1199:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1200:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">:render</span>)
1201:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">render</span>
1202:       <span class="ruby-keyword kw">end</span>
1203:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000189" class="method">
  <div id="M000189_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000189_source')" id="l_M000189_source">show source</a> ]</p>
  <div id="M000189_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1177</span>
1177:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1178:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;iso-8859-1&quot;</span>), <span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;utf-8&quot;</span>))
1179:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000191" class="method">
  <div id="M000191_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000191_source')" id="l_M000191_source">show source</a> ]</p>
  <div id="M000191_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1193</span>
1193:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1194:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render</span>}
1195:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000190" class="method">
  <div id="M000190_title" class="title">
    <b>test_convert_template_render_proc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000190_source')" id="l_M000190_source">show source</a> ]</p>
  <div id="M000190_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1189</span>
1189:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render_proc</span>
1190:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render_proc</span>.<span class="ruby-identifier">call</span>}
1191:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000139" class="method">
  <div id="M000139_title" class="title">
    <b>test_correct_parsing_with_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show source</a> ]</p>
  <div id="M000139_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 793</span>
793:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_correct_parsing_with_brackets</span>
794:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;{tada} foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} {tada} foo&quot;</span>))
795:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;deep {nested { things }}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} deep {nested { things }}&quot;</span>))
796:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;{a { d&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{{:class =&gt; 'foo'}, :class =&gt; 'bar'} {a { d&quot;</span>))
797:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo='bar'&gt;a}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar'} a}&quot;</span>))
798:     
799:     <span class="ruby-identifier">foo</span> = []
800:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>] = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Foo'</span>, <span class="ruby-identifier">:id</span>).<span class="ruby-identifier">new</span>
801:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
802:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
803:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
804:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
805: 
806:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span> = <span class="ruby-value">1</span>
807:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
808:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
809:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
810:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
811:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000090" class="method">
  <div id="M000090_title" class="title">
    <b>test_cr_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show source</a> ]</p>
  <div id="M000090_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 209</span>
209:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cr_newline</span>
210:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&lt;p&gt;baz&lt;/p&gt;\n&lt;p&gt;boom&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p foo\r%p bar\r\n%p baz\n\r%p boom&quot;</span>))
211:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000073" class="method">
  <div id="M000073_title" class="title">
    <b>test_css_id_as_attribute_should_be_appended_with_underscore</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show source</a> ]</p>
  <div id="M000073_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_id_as_attribute_should_be_appended_with_underscore</span>
117:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; '1'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
118:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; 1}&quot;</span>).<span class="ruby-identifier">chomp</span>)
119:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000106" class="method">
  <div id="M000106_title" class="title">
    <b>test_curly_brace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show source</a> ]</p>
  <div id="M000106_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 485</span>
485:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_curly_brace</span>
486:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo { Bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;== Foo { Bar\n&quot;</span>))
487:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000162" class="method">
  <div id="M000162_title" class="title">
    <b>test_def_method_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show source</a> ]</p>
  <div id="M000162_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 977</span>
977:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_locals</span>
978:     <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
979:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">:render</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
980:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>))
981:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000161" class="method">
  <div id="M000161_title" class="title">
    <b>test_def_method_with_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show source</a> ]</p>
  <div id="M000161_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 972</span>
972:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_with_module</span>
973:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-constant">String</span>, <span class="ruby-identifier">:render_haml</span>)
974:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">render_haml</span> { <span class="ruby-value">12</span> })
975:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000188" class="method">
  <div id="M000188_title" class="title">
    <b>test_default_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000188_source')" id="l_M000188_source">show source</a> ]</p>
  <div id="M000188_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1168</span>
1168:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_encoding</span>
1169:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>), <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;HTML\n%p bar\n%p foo\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;us-ascii&quot;</span>)).<span class="ruby-identifier">encoding</span>)
1170:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000136" class="method">
  <div id="M000136_title" class="title">
    <b>test_doctypes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show source</a> ]</p>
  <div id="M000136_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 753</span>
753:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_doctypes</span>
754:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html&gt;'</span>,
755:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>).<span class="ruby-identifier">strip</span>)
756:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;'</span>,
757:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>).<span class="ruby-identifier">strip</span>)
758:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;'</span>,
759:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>).<span class="ruby-identifier">strip</span>)
760:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//WAPFORUM//DTD XHTML Mobile 1.2//EN&quot; &quot;http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd&quot;&gt;'</span>,
761:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! mobile'</span>).<span class="ruby-identifier">strip</span>)
762:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML Basic 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd&quot;&gt;'</span>,
763:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! basic'</span>).<span class="ruby-identifier">strip</span>)
764:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
765:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>).<span class="ruby-identifier">strip</span>)
766:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
767:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>).<span class="ruby-identifier">strip</span>)
768:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;'</span>,
769:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
770:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;'</span>,
771:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
772:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
773:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
774:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
775:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
776:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000119" class="method">
  <div id="M000119_title" class="title">
    <b>test_dynamic_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show source</a> ]</p>
  <div id="M000119_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 639</span>
639:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_should_be_escaped</span>
640:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='&amp;amp;foo.png' /&gt;\n&quot;</span>,
641:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}&quot;</span>))
642:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p alt='' src='&amp;amp;foo.png'&gt;foo&lt;/p&gt;\n&quot;</span>,
643:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new} foo&quot;</span>))
644:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div alt='' src='&amp;amp;foo.png'&gt;foo&lt;/div&gt;\n&quot;</span>,
645:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}= 'foo'&quot;</span>))
646:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='foo&amp;#x000A;.png' /&gt;\n&quot;</span>,
647:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; \&quot;foo\\n.png\&quot;, :alt =&gt; String.new}&quot;</span>))
648:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000086" class="method">
  <div id="M000086_title" class="title">
    <b>test_dynamic_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show source</a> ]</p>
  <div id="M000086_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_with_empty_attr</span>
179:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '/foo.png', :alt =&gt; String.new}&quot;</span>))
180:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000145" class="method">
  <div id="M000145_title" class="title">
    <b>test_dynamic_attrs_shouldnt_register_as_literal_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show source</a> ]</p>
  <div id="M000145_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 840</span>
840:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_shouldnt_register_as_literal_values</span>
841:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p{:a =&gt; &quot;b#{1 + 1}c&quot;}'</span>))
842:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b' + (1 + 1).to_s + 'c'}&quot;</span>))
843:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000146" class="method">
  <div id="M000146_title" class="title">
    <b>test_dynamic_attrs_with_self_closed_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show source</a> ]</p>
  <div id="M000146_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 845</span>
845:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_with_self_closed_tag</span>
846:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='2' /&gt;\nc\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{'b' =&gt; 1 + 1}/\n= 'c'\n&quot;</span>))
847:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000170" class="method">
  <div id="M000170_title" class="title">
    <b>test_dynamic_hashes_with_suppress_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show source</a> ]</p>
  <div id="M000170_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1026</span>
1026:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_hashes_with_suppress_eval</span>
1027:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a #{1 + 1} b&quot;, :c =&gt; &quot;d&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1028:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000181" class="method">
  <div id="M000181_title" class="title">
    <b>test_dynamic_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show source</a> ]</p>
  <div id="M000181_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1103</span>
1103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_new_attributes</span>
1104:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=foo) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>}))
1105:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='12' c='13' d='14'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(b=b c='13' d=d) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">:d</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">14</span>}))
1106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000140" class="method">
  <div id="M000140_title" class="title">
    <b>test_empty_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show source</a> ]</p>
  <div id="M000140_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 813</span>
813:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_attrs</span>
814:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; '' } empty&quot;</span>))
815:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } empty&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>}))
816:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000152" class="method">
  <div id="M000152_title" class="title">
    <b>test_empty_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show source</a> ]</p>
  <div id="M000152_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 908</span>
908:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_filter</span>
909:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    \n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">':javascript'</span>))
910:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000069" class="method">
  <div id="M000069_title" class="title">
    <b>test_empty_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show source</a> ]</p>
  <div id="M000069_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 95</span>
95:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render</span>
96:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&quot;</span>)
97:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000071" class="method">
  <div id="M000071_title" class="title">
    <b>test_empty_render_should_remain_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show source</a> ]</p>
  <div id="M000071_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 108</span>
108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render_should_remain_empty</span>
109:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">''</span>))
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000089" class="method">
  <div id="M000089_title" class="title">
    <b>test_end_of_file_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show source</a> ]</p>
  <div id="M000089_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 205</span>
205:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_of_file_multiline</span>
206:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;0&lt;/p&gt;\n&lt;p&gt;1&lt;/p&gt;\n&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for i in (0...3)\n  %p= |\n   i |&quot;</span>))
207:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000101" class="method">
  <div id="M000101_title" class="title">
    <b>test_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show source</a> ]</p>
  <div id="M000101_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 380</span>
380:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_with_method_call</span>
381:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;2|3|4\nb-a-r\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= [1, 2, 3].map do |i|\n  - i + 1\n- end.join(\&quot;|\&quot;)\n= \&quot;bar\&quot;.gsub(/./) do |s|\n  - s + \&quot;-\&quot;\n- end.gsub(/-$/) do |s|\n  - ''\n&quot;</span>))
382:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000098" class="method">
  <div id="M000098_title" class="title">
    <b>test_equals_block_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show source</a> ]</p>
  <div id="M000098_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 351</span>
351:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equals_block_with_ugly</span>
352:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= capture_haml do\n  foo\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
353:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000107" class="method">
  <div id="M000107_title" class="title">
    <b>test_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show source</a> ]</p>
  <div id="M000107_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 495</span>
495:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_html</span>
496:     <span class="ruby-identifier">html</span> = <span class="ruby-value str">&quot;&amp;amp;\n&amp;\n&amp;amp;\n&quot;</span>
497: 
498:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;= \&quot;&amp;\&quot;\n!= \&quot;&amp;\&quot;\n= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
499: 
500:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;~ \&quot;&amp;\&quot;\n!~ \&quot;&amp;\&quot;\n~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
501: 
502:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp; \\\#{\&quot;&amp;\&quot;}\n! \\\#{\&quot;&amp;\&quot;}\n\\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
503: 
504:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;== \\\#{\&quot;&amp;\&quot;}\n!== \\\#{\&quot;&amp;\&quot;}\n== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
505: 
506:     <span class="ruby-identifier">tag_html</span> = <span class="ruby-value str">&quot;&lt;p&gt;&amp;amp;&lt;/p&gt;\n&lt;p&gt;&amp;&lt;/p&gt;\n&lt;p&gt;&amp;amp;&lt;/p&gt;\n&quot;</span>
507: 
508:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= \&quot;&amp;\&quot;\n%p!= \&quot;&amp;\&quot;\n%p= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
509: 
510:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;~ \&quot;&amp;\&quot;\n%p!~ \&quot;&amp;\&quot;\n%p~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
511: 
512:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \\\#{\&quot;&amp;\&quot;}\n%p! \\\#{\&quot;&amp;\&quot;}\n%p \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
513: 
514:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \\\#{\&quot;&amp;\&quot;}\n%p!== \\\#{\&quot;&amp;\&quot;}\n%p== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
515:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000121" class="method">
  <div id="M000121_title" class="title">
    <b>test_escaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show source</a> ]</p>
  <div id="M000121_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 655</span>
655:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_double_equals</span>
656:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
657:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
658:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000126" class="method">
  <div id="M000126_title" class="title">
    <b>test_escaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000126_source')" id="l_M000126_source">show source</a> ]</p>
  <div id="M000126_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 680</span>
680:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_interpolation</span>
681:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
682:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
683:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000123" class="method">
  <div id="M000123_title" class="title">
    <b>test_escaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show source</a> ]</p>
  <div id="M000123_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 665</span>
665:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_double_equals</span>
666:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
667:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
668:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000128" class="method">
  <div id="M000128_title" class="title">
    <b>test_escaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show source</a> ]</p>
  <div id="M000128_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 690</span>
690:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_interpolation</span>
691:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
692:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
693:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000148" class="method">
  <div id="M000148_title" class="title">
    <b>test_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show source</a> ]</p>
  <div id="M000148_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 879</span>
879:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception</span>
880:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  hi\n  %a= undefined\n= 12&quot;</span>)
881:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
882:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-value str">&quot;(test_exception):3&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
883:   <span class="ruby-keyword kw">else</span>
884:     <span class="ruby-comment cmt"># Test failed... should have raised an exception</span>
885:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>)
886:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000147" class="method">
  <div id="M000147_title" class="title">
    <b>test_exception_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show source</a> ]</p>
  <div id="M000147_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 871</span>
871:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_line</span>
872:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n!!!\n  c\nd&quot;</span>)
873:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
874:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;(test_exception_line):4&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
875:   <span class="ruby-keyword kw">else</span>
876:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">'&quot;a\nb\n!!!\n  c\nd&quot; doesn\'t produce an exception'</span>)
877:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000134" class="method">
  <div id="M000134_title" class="title">
    <b>test_filename_and_line</b>()
  </div>
  <div class="description">
  <p>
Options tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show source</a> ]</p>
  <div id="M000134_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 728</span>
728:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filename_and_line</span>
729:     <span class="ruby-keyword kw">begin</span>
730:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n = abc&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
731:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
732:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>, <span class="ruby-identifier">e</span>
733:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:4/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
734:     <span class="ruby-keyword kw">end</span>
735: 
736:     <span class="ruby-keyword kw">begin</span>
737:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n= 123\n\n= nil[]&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
738:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
739:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-identifier">e</span>
740:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:6/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
741:     <span class="ruby-keyword kw">end</span>
742:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000070" class="method">
  <div id="M000070_title" class="title">
    <b>test_flexible_tabulation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show source</a> ]</p>
  <div id="M000070_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flexible_tabulation</span>
100:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
101:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n foo\n%q\n bar\n %a\n  baz&quot;</span>))
102:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
103:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n\tfoo\n%q\n\tbar\n\t%a\n\t\tbaz&quot;</span>))
104:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n      \t \t bar\n   baz\n&lt;/p&gt;\n&quot;</span>,
105:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  :plain\n        \t \t bar\n     baz&quot;</span>))
106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000177" class="method">
  <div id="M000177_title" class="title">
    <b>test_html5_doctype</b>()
  </div>
  <div class="description">
  <p>
HTML5
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show source</a> ]</p>
  <div id="M000177_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1063</span>
1063:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_doctype</span>
1064:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>)
1065:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000173" class="method">
  <div id="M000173_title" class="title">
    <b>test_html_doesnt_add_slash_to_self_closing_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show source</a> ]</p>
  <div id="M000173_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1041</span>
1041:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_doesnt_add_slash_to_self_closing_tags</span>
1042:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1043:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:foo =&gt; 1 + 1}/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1044:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1045:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta{:foo =&gt; 1 + 1}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1046:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000175" class="method">
  <div id="M000175_title" class="title">
    <b>test_html_has_different_doctype</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show source</a> ]</p>
  <div id="M000175_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1052</span>
1052:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_different_doctype</span>
1053:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n}</span>,
1054:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1055:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000171" class="method">
  <div id="M000171_title" class="title">
    <b>test_html_has_no_self_closing_tags</b>()
  </div>
  <div class="description">
  <p>
HTML 4.0
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show source</a> ]</p>
  <div id="M000171_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1032</span>
1032:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_no_self_closing_tags</span>
1033:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1034:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;br&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%br/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1035:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000174" class="method">
  <div id="M000174_title" class="title">
    <b>test_html_ignores_xml_prolog_declaration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show source</a> ]</p>
  <div id="M000174_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1048</span>
1048:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_ignores_xml_prolog_declaration</span>
1049:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! XML'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1050:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000172" class="method">
  <div id="M000172_title" class="title">
    <b>test_html_renders_empty_node_with_closing_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show source</a> ]</p>
  <div id="M000172_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1037</span>
1037:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_renders_empty_node_with_closing_tag</span>
1038:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div class='foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1039:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000100" class="method">
  <div id="M000100_title" class="title">
    <b>test_inline_if</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show source</a> ]</p>
  <div id="M000100_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 367</span>
367:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_if</span>
368:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;One&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Three&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for name in [\&quot;One\&quot;, \&quot;Two\&quot;, \&quot;Three\&quot;]\n  %p= name unless name == \&quot;Two\&quot;\n&quot;</span>))
369:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000131" class="method">
  <div id="M000131_title" class="title">
    <b>test_inline_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show source</a> ]</p>
  <div id="M000131_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 705</span>
705:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_scripts_should_respect_escape_html_option</span>
706:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
707:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
708:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000080" class="method">
  <div id="M000080_title" class="title">
    <b>test_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show source</a> ]</p>
  <div id="M000080_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 151</span>
151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation</span>
152:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello World&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello #{who}'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
153:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  Hello World\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  Hello \#{who}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
154:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000082" class="method">
  <div id="M000082_title" class="title">
    <b>test_interpolation_at_the_beginning_of_a_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show source</a> ]</p>
  <div id="M000082_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_at_the_beginning_of_a_line</span>
162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p #{1 + 1}'</span>))
163:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  \#{1 + 1}&quot;</span>))
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000081" class="method">
  <div id="M000081_title" class="title">
    <b>test_interpolation_in_the_middle_of_a_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show source</a> ]</p>
  <div id="M000081_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 156</span>
156:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_in_the_middle_of_a_string</span>
157:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\&quot;title 'Title'. \&quot;\n&quot;</span>,
158:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\&quot;title '\#{\&quot;Title\&quot;}'. \&quot;&quot;</span>))
159:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000109" class="method">
  <div id="M000109_title" class="title">
    <b>test_javascript_filter_with_dynamic_interp_and_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show source</a> ]</p>
  <div id="M000109_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 571</span>
571:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_javascript_filter_with_dynamic_interp_and_escape_html</span>
572:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    &amp; &lt; &gt; &amp;\n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:javascript\n &amp; &lt; &gt; \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
573:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000154" class="method">
  <div id="M000154_title" class="title">
    <b>test_local_assigns_dont_modify_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show source</a> ]</p>
  <div id="M000154_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 927</span>
927:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_assigns_dont_modify_class</span>
928:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= foo&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
929:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">foo</span>))
930:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000144" class="method">
  <div id="M000144_title" class="title">
    <b>test_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show source</a> ]</p>
  <div id="M000144_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 836</span>
836:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_locals</span>
837:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Paragraph!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= text&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Paragraph!&quot;</span> }))
838:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000079" class="method">
  <div id="M000079_title" class="title">
    <b>test_multi_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show source</a> ]</p>
  <div id="M000079_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 144</span>
144:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_render</span>
145:     <span class="ruby-identifier">engine</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%strong Hi there!&quot;</span>)
146:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
147:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
149:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000105" class="method">
  <div id="M000105_title" class="title">
    <b>test_multiline_in_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show source</a> ]</p>
  <div id="M000105_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 470</span>
470:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_in_filter</span>
471:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo |\nBar |\nBaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo |\n  Bar |\n  Baz\n&quot;</span>))
472:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000186" class="method">
  <div id="M000186_title" class="title">
    <b>test_multiline_new_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show source</a> ]</p>
  <div id="M000186_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1146</span>
1146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_new_attribute</span>
1147:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'\n  c='d') bar&quot;</span>))
1148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e' e='f' f='j'&gt;bar&lt;/a&gt;\n&quot;</span>,
1149:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b' b='c'\n  c='d' d=e\n  e='f' f='j') bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:e</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'e'</span>}))
1150:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000104" class="method">
  <div id="M000104_title" class="title">
    <b>test_multiline_with_colon_after_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show source</a> ]</p>
  <div id="M000104_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 446</span>
446:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_with_colon_after_filter</span>
447:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
448:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
449:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000102" class="method">
  <div id="M000102_title" class="title">
    <b>test_nested_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show source</a> ]</p>
  <div id="M000102_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 397</span>
397:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_end_with_method_call</span>
398:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2|3|4\n  b-a-r\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = [1, 2, 3].map do |i|\n    - i + 1\n  - end.join(\&quot;|\&quot;)\n  = \&quot;bar\&quot;.gsub(/./) do |s|\n    - s + \&quot;-\&quot;\n  - end.gsub(/-$/) do |s|\n    - ''\n&quot;</span>))
399:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000187" class="method">
  <div id="M000187_title" class="title">
    <b>test_new_and_old_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show source</a> ]</p>
  <div id="M000187_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1152</span>
1152:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_and_old_attributes</span>
1153:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'){:c =&gt; 'd'} bar&quot;</span>))
1154:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:c =&gt; 'd'}(a='b') bar&quot;</span>))
1155:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(c='d'){:a =&gt; 'b'} bar&quot;</span>))
1156:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(c='d') bar&quot;</span>))
1157: 
1158:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(a='d') bar&quot;</span>))
1159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='d'){:a =&gt; 'b'} bar&quot;</span>))
1160: 
1161:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e'&gt;bar&lt;/a&gt;\n&quot;</span>,
1162:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b',\n:b =&gt; 'c'}(c='d'\nd='e') bar&quot;</span>))
1163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000180" class="method">
  <div id="M000180_title" class="title">
    <b>test_new_attribute_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show source</a> ]</p>
  <div id="M000180_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1090</span>
1090:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_classes</span>
1091:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='bar')&quot;</span>))
1092:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo{:class =&gt; 'bar'}(class='baz')&quot;</span>))
1093:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}&quot;</span>))
1094:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1095:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1096:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1097:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1098:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo](class='baz'){:class =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1099:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1100:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo]{:class =&gt; 'bar'}(class='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1101:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000185" class="method">
  <div id="M000185_title" class="title">
    <b>test_new_attribute_escaping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000185_source')" id="l_M000185_source">show source</a> ]</p>
  <div id="M000185_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1135</span>
1135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_escaping</span>
1136:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo &quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \&quot; bar&quot;) bar}</span>))
1137:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\&quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\\&quot; bar&quot;) bar}</span>))
1138: 
1139:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo ' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \' bar') bar}</span>))
1140:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo \\' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \\\\\' bar') bar}</span>))
1141: 
1142:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\ bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\ bar&quot;) bar}</span>))
1143:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \#{1 + 1} bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \#{1 + 1} bar&quot;) bar}</span>))
1144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000179" class="method">
  <div id="M000179_title" class="title">
    <b>test_new_attribute_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show source</a> ]</p>
  <div id="M000179_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1075</span>
1075:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_ids</span>
1076:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='bar')&quot;</span>))
1077:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar_baz'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:id =&gt; 'bar'}(id='baz')&quot;</span>))
1078:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_baz_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}&quot;</span>))
1079:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1080:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1081:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1082:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1083:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz')[foo]{:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1084:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1085:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo](id='baz'){:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1086:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_bar_baz_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1087:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo]{:id =&gt; 'bar'}(id='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1088:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000182" class="method">
  <div id="M000182_title" class="title">
    <b>test_new_attribute_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000182_source')" id="l_M000182_source">show source</a> ]</p>
  <div id="M000182_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1108</span>
1108:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_interpolation</span>
1109:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1#{1 + 1}&quot;) bar'</span>))
1110:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='2: 2, 3: 3'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(href='2: #{1 + 1}, 3: #{foo}') bar}</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}))
1111:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a href='1\#{1 + 1}'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1\#{1 + 1}&quot;) bar'</span>))
1112:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000184" class="method">
  <div id="M000184_title" class="title">
    <b>test_new_attribute_parsing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000184_source')" id="l_M000184_source">show source</a> ]</p>
  <div id="M000184_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1121</span>
1121:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_parsing</span>
1122:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a2='b2'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a2=b2) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'b2'</span>}))
1123:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{'foo&quot;bar'}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1124:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{&quot;foo'bar&quot;}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1125:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo&quot;bar') bar}</span>))
1126:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo'bar&quot;) bar}</span>))
1127:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a:b='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a:b='foo') bar&quot;</span>))
1128:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = 'foo' b = 'bar') bar&quot;</span>))
1129:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = foo b = bar) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:bar</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
1130:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;(b='bar')&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo')(b='bar')&quot;</span>))
1131:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo)bar'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo)bar') baz&quot;</span>))
1132:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a( a = 'foo' ) baz&quot;</span>))
1133:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000108" class="method">
  <div id="M000108_title" class="title">
    <b>test_new_attrs_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show source</a> ]</p>
  <div id="M000108_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 567</span>
567:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attrs_with_hash</span>
568:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#&quot;)'</span>))
569:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000141" class="method">
  <div id="M000141_title" class="title">
    <b>test_nil_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show source</a> ]</p>
  <div id="M000141_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 818</span>
818:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_attrs</span>
819:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; nil } nil&quot;</span>))
820:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } nil&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}))
821:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000143" class="method">
  <div id="M000143_title" class="title">
    <b>test_nil_class_with_syntactic_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show source</a> ]</p>
  <div id="M000143_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 829</span>
829:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_class_with_syntactic_class</span>
830:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{:class =&gt; nil} nil&quot;</span>))
831:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.bar.foo{:class =&gt; nil} nil&quot;</span>))
832:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; 'bar'}, :class =&gt; nil} nil&quot;</span>))
833:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; nil}, :class =&gt; 'bar'} nil&quot;</span>))
834:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000142" class="method">
  <div id="M000142_title" class="title">
    <b>test_nil_id_with_syntactic_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show source</a> ]</p>
  <div id="M000142_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 823</span>
823:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_id_with_syntactic_id</span>
824:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{:id =&gt; nil} nil&quot;</span>))
825:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; 'bar'}, :id =&gt; nil} nil&quot;</span>))
826:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; nil}, :id =&gt; 'bar'} nil&quot;</span>))
827:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000075" class="method">
  <div id="M000075_title" class="title">
    <b>test_nil_should_render_empty_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show source</a> ]</p>
  <div id="M000075_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 126</span>
126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_should_render_empty_tag</span>
127:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='no_attributes'&gt;&lt;/div&gt;&quot;</span>,
128:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.no_attributes{:nil =&gt; nil}&quot;</span>).<span class="ruby-identifier">chomp</span>)
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000083" class="method">
  <div id="M000083_title" class="title">
    <b>test_nil_tag_value_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show source</a> ]</p>
  <div id="M000083_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_tag_value_should_render_as_empty</span>
167:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= nil&quot;</span>))
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000157" class="method">
  <div id="M000157_title" class="title">
    <b>test_non_literal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show source</a> ]</p>
  <div id="M000157_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 944</span>
944:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_literal_attributes</span>
945:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a1='foo' a2='bar' a3='baz' /&gt;\n&quot;</span>,
946:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{a2, a1, :a3 =&gt; 'baz'}/&quot;</span>,
947:                         <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>}, <span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}}))
948:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000156" class="method">
  <div id="M000156_title" class="title">
    <b>test_object_ref_before_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show source</a> ]</p>
  <div id="M000156_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 938</span>
938:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_before_attrs</span>
939:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">42</span>
940:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_42' style='width: 100px;'&gt;New User&lt;/p&gt;\n&quot;</span>,
941:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user]{:style =&gt; 'width: 100px;'} New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
942:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000155" class="method">
  <div id="M000155_title" class="title">
    <b>test_object_ref_with_nil_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show source</a> ]</p>
  <div id="M000155_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 932</span>
932:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_with_nil_id</span>
933:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
934:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_new'&gt;New User&lt;/p&gt;\n&quot;</span>,
935:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user] New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
936:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000077" class="method">
  <div id="M000077_title" class="title">
    <b>test_one_liner_should_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show source</a> ]</p>
  <div id="M000077_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_should_be_one_line</span>
137:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello'</span>).<span class="ruby-identifier">chomp</span>)
138:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000078" class="method">
  <div id="M000078_title" class="title">
    <b>test_one_liner_with_newline_shouldnt_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show source</a> ]</p>
  <div id="M000078_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 140</span>
140:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_with_newline_shouldnt_be_one_line</span>
141:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n  bar\n&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p= &quot;foo\nbar&quot;'</span>).<span class="ruby-identifier">chomp</span>)
142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000099" class="method">
  <div id="M000099_title" class="title">
    <b>test_plain_equals_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show source</a> ]</p>
  <div id="M000099_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 359</span>
359:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_plain_equals_with_ugly</span>
360:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\nbar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= \&quot;foo\&quot;\nbar\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
361:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000092" class="method">
  <div id="M000092_title" class="title">
    <b>test_pre_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show source</a> ]</p>
  <div id="M000092_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 233</span>
233:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pre_code</span>
234:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;&lt;code&gt;Foo&amp;#x000A;  bar&amp;#x000A;    baz&lt;/code&gt;&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  %code\n    :preserve\n      Foo\n        bar\n          baz\n&quot;</span>))
235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000163" class="method">
  <div id="M000163_title" class="title">
    <b>test_render_proc_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show source</a> ]</p>
  <div id="M000163_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 983</span>
983:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_locals</span>
984:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
985:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">proc</span>[<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>])
986:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000164" class="method">
  <div id="M000164_title" class="title">
    <b>test_render_proc_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show source</a> ]</p>
  <div id="M000164_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 988</span>
988:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_with_binding</span>
989:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FOO\n&quot;</span>, <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= upcase&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}).<span class="ruby-identifier">call</span>)
990:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000158" class="method">
  <div id="M000158_title" class="title">
    <b>test_render_should_accept_a_binding_as_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show source</a> ]</p>
  <div id="M000158_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 950</span>
950:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_should_accept_a_binding_as_scope</span>
951:     <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;This is a string!&quot;</span>
952:     <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@var&quot;</span>, <span class="ruby-value str">&quot;Instance variable&quot;</span>)
953:     <span class="ruby-identifier">b</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span>
954:       <span class="ruby-identifier">var</span> = <span class="ruby-value str">&quot;Local variable&quot;</span>
955:       <span class="ruby-identifier">binding</span>
956:     <span class="ruby-keyword kw">end</span>
957: 
958:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;THIS IS A STRING!&lt;/p&gt;\n&lt;p&gt;Instance variable&lt;/p&gt;\n&lt;p&gt;Local variable&lt;/p&gt;\n&quot;</span>,
959:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= upcase\n%p= @var\n%p= var&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>))
960:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000074" class="method">
  <div id="M000074_title" class="title">
    <b>test_ruby_code_should_work_inside_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show source</a> ]</p>
  <div id="M000074_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 121</span>
121:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_code_should_work_inside_attributes</span>
122:     <span class="ruby-identifier">author</span> = <span class="ruby-value str">'hcatlin'</span>
123:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='3'&gt;foo&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 1+2} foo&quot;</span>).<span class="ruby-identifier">chomp</span>)
124:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000132" class="method">
  <div id="M000132_title" class="title">
    <b>test_script_ending_in_comment_should_render_when_html_is_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show source</a> ]</p>
  <div id="M000132_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 710</span>
710:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_ending_in_comment_should_render_when_html_is_escaped</span>
711:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo&amp;amp;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'foo&amp;bar' #comment&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000133" class="method">
  <div id="M000133_title" class="title">
    <b>test_script_with_if_shouldnt_output</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000133_source')" id="l_M000133_source">show source</a> ]</p>
  <div id="M000133_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_with_if_shouldnt_output</span>
715:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= \&quot;foo\&quot;\n%p= \&quot;bar\&quot; if false\n&quot;</span>))
716:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000130" class="method">
  <div id="M000130_title" class="title">
    <b>test_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show source</a> ]</p>
  <div id="M000130_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 700</span>
700:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scripts_should_respect_escape_html_option</span>
701:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
702:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
703:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000103" class="method">
  <div id="M000103_title" class="title">
    <b>test_silent_end_with_stuff</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show source</a> ]</p>
  <div id="M000103_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 417</span>
417:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_end_with_stuff</span>
418:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;e\nd\nc\nb\na\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- str = \&quot;abcde\&quot;\n- if true\n  = str.slice!(-1).chr\n- end until str.empty?\n&quot;</span>))
419: 
420:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;hi!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- if true\n  %p hi!\n- end if \&quot;foo\&quot;.gsub(/f/) do\n  - \&quot;z\&quot;\n- end + \&quot;bar\&quot;\n&quot;</span>))
421:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000110" class="method">
  <div id="M000110_title" class="title">
    <b>test_silent_script_with_hyphen_case</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show source</a> ]</p>
  <div id="M000110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 586</span>
586:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_case</span>
587:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-case-bar-case'&quot;</span>))
588:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000111" class="method">
  <div id="M000111_title" class="title">
    <b>test_silent_script_with_hyphen_end</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show source</a> ]</p>
  <div id="M000111_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 590</span>
590:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end</span>
591:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-end-bar-end'&quot;</span>))
592:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000112" class="method">
  <div id="M000112_title" class="title">
    <b>test_silent_script_with_hyphen_end_and_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show source</a> ]</p>
  <div id="M000112_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 594</span>
594:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end_and_block</span>
595:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo-end&lt;/p&gt;\n&lt;p&gt;bar-end&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- \&quot;foo-end-bar-end\&quot;.gsub(/\\\\w+-end/) do |s|\n  %p= s\n&quot;</span>))
596:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000118" class="method">
  <div id="M000118_title" class="title">
    <b>test_static_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show source</a> ]</p>
  <div id="M000118_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 628</span>
628:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_should_be_escaped</span>
629:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img class='atlantis' style='ugly&amp;amp;stupid' /&gt;\n&quot;</span>,
630:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img.atlantis{:style =&gt; 'ugly&amp;stupid'}&quot;</span>))
631:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/div&gt;\n&quot;</span>,
632:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly&amp;stupid'} foo&quot;</span>))
633:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/p&gt;\n&quot;</span>,
634:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; 'ugly&amp;stupid'}= 'foo'&quot;</span>))
635:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;#x000A;stupid'&gt;&lt;/p&gt;\n&quot;</span>,
636:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; \&quot;ugly\\nstupid\&quot;}&quot;</span>))
637:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000085" class="method">
  <div id="M000085_title" class="title">
    <b>test_static_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show source</a> ]</p>
  <div id="M000085_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_with_empty_attr</span>
175:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:src =&gt; '/foo.png', :alt =&gt; ''}&quot;</span>))
176:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000169" class="method">
  <div id="M000169_title" class="title">
    <b>test_static_hashes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show source</a> ]</p>
  <div id="M000169_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1019</span>
1019:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_hashes</span>
1020:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a =&amp;gt; b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a =&gt; b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1021:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a, b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a, b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1022:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\tb'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\tb&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1023:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\#{foo}b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\\#{foo}b&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1024:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000135" class="method">
  <div id="M000135_title" class="title">
    <b>test_stop_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show source</a> ]</p>
  <div id="M000135_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 744</span>
744:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_stop_eval</span>
745:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'Hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
746:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_concat 'foo'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
747:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' yes='no' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no'}/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
748:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no', :call =&gt; a_function() }/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
749:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div[1]/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
750:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:ruby\n  Kernel.puts 'hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
751:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000120" class="method">
  <div id="M000120_title" class="title">
    <b>test_string_double_equals_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show source</a> ]</p>
  <div id="M000120_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 650</span>
650:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_double_equals_should_be_esaped</span>
651:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
652:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
653:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000125" class="method">
  <div id="M000125_title" class="title">
    <b>test_string_interpolation_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show source</a> ]</p>
  <div id="M000125_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 675</span>
675:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_interpolation_should_be_esaped</span>
676:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
677:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
678:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000076" class="method">
  <div id="M000076_title" class="title">
    <b>test_strings_should_get_stripped_inside_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show source</a> ]</p>
  <div id="M000076_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 131</span>
131:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_strings_should_get_stripped_inside_tags</span>
132:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='stripped'&gt;This should have no spaces in front of it&lt;/div&gt;&quot;</span>,
133:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.stripped    This should have no spaces in front of it&quot;</span>).<span class="ruby-identifier">chomp</span>)
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000084" class="method">
  <div id="M000084_title" class="title">
    <b>test_tag_with_failed_if_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show source</a> ]</p>
  <div id="M000084_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tag_with_failed_if_should_render_as_empty</span>
171:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'Hello' if false&quot;</span>))
172:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000091" class="method">
  <div id="M000091_title" class="title">
    <b>test_textareas</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show source</a> ]</p>
  <div id="M000091_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 213</span>
213:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_textareas</span>
214:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/textarea&gt;\n&quot;</span>,
215:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea= &quot;Foo\n  bar\n   baz&quot;'</span>))
216: 
217:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/pre&gt;\n&quot;</span>,
218:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre= &quot;Foo\n  bar\n   baz&quot;'</span>))
219: 
220:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;textarea&gt;#{'a' * 100}&lt;/textarea&gt;\n&quot;</span>,
221:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%textarea #{'a' * 100}&quot;</span>))
222: 
223:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;textarea&gt;Foo\n  Bar\n  Baz&lt;/textarea&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %textarea\n    Foo\n    Bar\n    Baz\n&quot;</span>))
224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000183" class="method">
  <div id="M000183_title" class="title">
    <b>test_truthy_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show source</a> ]</p>
  <div id="M000183_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1114</span>
1114:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_truthy_new_attributes</span>
1115:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href) bar&quot;</span>))
1116:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a bar='baz' href&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href bar='baz') bar&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>))
1117:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=true) bar&quot;</span>))
1118:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=false) bar&quot;</span>))
1119:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000153" class="method">
  <div id="M000153_title" class="title">
    <b>test_ugly_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show source</a> ]</p>
  <div id="M000153_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 919</span>
919:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_filter</span>
920:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;#foo {\n  bar: baz; }\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:sass\n  #foo\n    bar: baz&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
921:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000165" class="method">
  <div id="M000165_title" class="title">
    <b>test_ugly_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show source</a> ]</p>
  <div id="M000165_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 992</span>
 992:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_true</span>
 993:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='outer'&gt;\n&lt;div id='inner'&gt;\n&lt;p&gt;hello world&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&quot;</span>,
 994:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#outer\n  #inner\n    %p hello world&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
 995: 
 996:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
 997:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%p #{'s' * 75}&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
 998: 
 999:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
1000:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 's' * 75&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1001:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000150" class="method">
  <div id="M000150_title" class="title">
    <b>test_unbalanced_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show source</a> ]</p>
  <div id="M000150_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 897</span>
897:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unbalanced_brackets</span>
898:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'foo #{1 + 5} foo #{6 + 7 bar #{8 + 9}'</span>)
899:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
900:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Unbalanced brackets.&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
901:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000122" class="method">
  <div id="M000122_title" class="title">
    <b>test_unescaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show source</a> ]</p>
  <div id="M000122_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_double_equals</span>
661:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
662:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
663:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000127" class="method">
  <div id="M000127_title" class="title">
    <b>test_unescaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show source</a> ]</p>
  <div id="M000127_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 685</span>
685:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_interpolation</span>
686:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
687:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;3&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
688:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000124" class="method">
  <div id="M000124_title" class="title">
    <b>test_unescaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show source</a> ]</p>
  <div id="M000124_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 670</span>
670:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_double_equals</span>
671:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
672:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
673:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000129" class="method">
  <div id="M000129_title" class="title">
    <b>test_unescaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show source</a> ]</p>
  <div id="M000129_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 695</span>
695:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_interpolation</span>
696:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
697:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;3\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{2+1}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
698:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000095" class="method">
  <div id="M000095_title" class="title">
    <b>test_whitespace_nuke_with_both_newlines</b>()
  </div>
  <div class="description">
  <p>
Regression tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show source</a> ]</p>
  <div id="M000095_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 274</span>
274:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_both_newlines</span>
275:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p&lt;= &quot;\nfoo\n&quot;'</span>))
276:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;p&gt;foo&lt;/p&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %p&lt;= \&quot;\\\\nfoo\\\\n\&quot;\n&quot;</span>))
277:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000096" class="method">
  <div id="M000096_title" class="title">
    <b>test_whitespace_nuke_with_tags_and_else</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show source</a> ]</p>
  <div id="M000096_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 288</span>
288:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_tags_and_else</span>
289:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;foo&lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b&lt;\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
290: 
291:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;\n    foo\n  &lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
292:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000167" class="method">
  <div id="M000167_title" class="title">
    <b>test_xhtml_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show source</a> ]</p>
  <div id="M000167_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1010</span>
1010:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xhtml_output_option</span>
1011:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br /&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1012:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1013:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000176" class="method">
  <div id="M000176_title" class="title">
    <b>test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</b>()
  </div>
  <div class="description">
  <p>
because anything before the doctype triggers quirks mode in IE
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show source</a> ]</p>
  <div id="M000176_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1058</span>
1058:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</span>
1059:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/^\s+/</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! xml\n!!!&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
1060:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000159" class="method">
  <div id="M000159_title" class="title">
    <b>test_yield_should_work_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show source</a> ]</p>
  <div id="M000159_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 962</span>
962:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_binding</span>
963:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}) { <span class="ruby-value">12</span> })
964:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000160" class="method">
  <div id="M000160_title" class="title">
    <b>test_yield_should_work_with_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show source</a> ]</p>
  <div id="M000160_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 966</span>
966:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_def_method</span>
967:     <span class="ruby-identifier">s</span> = <span class="ruby-value str">&quot;foo&quot;</span>
968:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">:render</span>)
969:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">render</span> { <span class="ruby-value">12</span> })
970:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>