  <div id="C00000005">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />EngineTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/engine_test_rb.html');">test/haml/engine_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000071&name=engine" >engine</a></li>
  <li><a href="index.html?a=M000070&name=render" >render</a></li>
  <li><a href="index.html?a=M000121&name=test_ampersand_equals_inline_should_escape" >test_ampersand_equals_inline_should_escape</a></li>
  <li><a href="index.html?a=M000120&name=test_ampersand_equals_should_escape" >test_ampersand_equals_should_escape</a></li>
  <li><a href="index.html?a=M000122&name=test_ampersand_equals_should_escape_before_preserve" >test_ampersand_equals_should_escape_before_preserve</a></li>
  <li><a href="index.html?a=M000178&name=test_arbitrary_output_option" >test_arbitrary_output_option</a></li>
  <li><a href="index.html?a=M000093&name=test_attr_hashes_not_modified" >test_attr_hashes_not_modified</a></li>
  <li><a href="index.html?a=M000144&name=test_attr_wrapper" >test_attr_wrapper</a></li>
  <li><a href="index.html?a=M000092&name=test_attribute_hash_with_newlines" >test_attribute_hash_with_newlines</a></li>
  <li><a href="index.html?a=M000075&name=test_attributes_should_render_correctly" >test_attributes_should_render_correctly</a></li>
  <li><a href="index.html?a=M000145&name=test_attrs_parsed_correctly" >test_attrs_parsed_correctly</a></li>
  <li><a href="index.html?a=M000176&name=test_auto_preserve_unless_ugly" >test_auto_preserve_unless_ugly</a></li>
  <li><a href="index.html?a=M000158&name=test_balanced_conditional_comments" >test_balanced_conditional_comments</a></li>
  <li><a href="index.html?a=M000124&name=test_bang_equals_inline_should_not_escape" >test_bang_equals_inline_should_not_escape</a></li>
  <li><a href="index.html?a=M000123&name=test_bang_equals_should_not_escape" >test_bang_equals_should_not_escape</a></li>
  <li><a href="index.html?a=M000189&name=test_basic_new_attributes" >test_basic_new_attributes</a></li>
  <li><a href="index.html?a=M000098&name=test_boolean_attributes" >test_boolean_attributes</a></li>
  <li><a href="index.html?a=M000103&name=test_both_case_indentation_work_with_deeply_nested_code" >test_both_case_indentation_work_with_deeply_nested_code</a></li>
  <li><a href="index.html?a=M000099&name=test_both_whitespace_nukes_work_together" >test_both_whitespace_nukes_work_together</a></li>
  <li><a href="index.html?a=M000156&name=test_compile_error" >test_compile_error</a></li>
  <li><a href="index.html?a=M000204&name=test_convert_template_def_method" >test_convert_template_def_method</a></li>
  <li><a href="index.html?a=M000200&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000203&name=test_convert_template_render" >test_convert_template_render</a></li>
  <li><a href="index.html?a=M000202&name=test_convert_template_render_proc" >test_convert_template_render_proc</a></li>
  <li><a href="index.html?a=M000146&name=test_correct_parsing_with_brackets" >test_correct_parsing_with_brackets</a></li>
  <li><a href="index.html?a=M000095&name=test_cr_newline" >test_cr_newline</a></li>
  <li><a href="index.html?a=M000076&name=test_css_id_as_attribute_should_be_appended_with_underscore" >test_css_id_as_attribute_should_be_appended_with_underscore</a></li>
  <li><a href="index.html?a=M000112&name=test_curly_brace" >test_curly_brace</a></li>
  <li><a href="index.html?a=M000173&name=test_def_method_haml_buffer_gets_reset_even_with_exception" >test_def_method_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000169&name=test_def_method_locals" >test_def_method_locals</a></li>
  <li><a href="index.html?a=M000168&name=test_def_method_with_module" >test_def_method_with_module</a></li>
  <li><a href="index.html?a=M000199&name=test_default_encoding" >test_default_encoding</a></li>
  <li><a href="index.html?a=M000143&name=test_doctypes" >test_doctypes</a></li>
  <li><a href="index.html?a=M000126&name=test_dynamic_attributes_should_be_escaped" >test_dynamic_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000091&name=test_dynamic_attributes_with_empty_attr" >test_dynamic_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000078&name=test_dynamic_attributes_with_no_content" >test_dynamic_attributes_with_no_content</a></li>
  <li><a href="index.html?a=M000152&name=test_dynamic_attrs_shouldnt_register_as_literal_values" >test_dynamic_attrs_shouldnt_register_as_literal_values</a></li>
  <li><a href="index.html?a=M000153&name=test_dynamic_attrs_with_self_closed_tag" >test_dynamic_attrs_with_self_closed_tag</a></li>
  <li><a href="index.html?a=M000180&name=test_dynamic_hashes_with_suppress_eval" >test_dynamic_hashes_with_suppress_eval</a></li>
  <li><a href="index.html?a=M000192&name=test_dynamic_new_attributes" >test_dynamic_new_attributes</a></li>
  <li><a href="index.html?a=M000147&name=test_empty_attrs" >test_empty_attrs</a></li>
  <li><a href="index.html?a=M000159&name=test_empty_filter" >test_empty_filter</a></li>
  <li><a href="index.html?a=M000072&name=test_empty_render" >test_empty_render</a></li>
  <li><a href="index.html?a=M000074&name=test_empty_render_should_remain_empty" >test_empty_render_should_remain_empty</a></li>
  <li><a href="index.html?a=M000094&name=test_end_of_file_multiline" >test_end_of_file_multiline</a></li>
  <li><a href="index.html?a=M000107&name=test_end_with_method_call" >test_end_with_method_call</a></li>
  <li><a href="index.html?a=M000104&name=test_equals_block_with_ugly" >test_equals_block_with_ugly</a></li>
  <li><a href="index.html?a=M000113&name=test_escape_html" >test_escape_html</a></li>
  <li><a href="index.html?a=M000128&name=test_escaped_inline_string_double_equals" >test_escaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000133&name=test_escaped_inline_string_interpolation" >test_escaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000087&name=test_escaped_interpolation" >test_escaped_interpolation</a></li>
  <li><a href="index.html?a=M000130&name=test_escaped_string_double_equals" >test_escaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000135&name=test_escaped_string_interpolation" >test_escaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000155&name=test_exception" >test_exception</a></li>
  <li><a href="index.html?a=M000154&name=test_exception_line" >test_exception_line</a></li>
  <li><a href="index.html?a=M000201&name=test_fake_ascii_encoding" >test_fake_ascii_encoding</a></li>
  <li><a href="index.html?a=M000141&name=test_filename_and_line" >test_filename_and_line</a></li>
  <li><a href="index.html?a=M000073&name=test_flexible_tabulation" >test_flexible_tabulation</a></li>
  <li><a href="index.html?a=M000172&name=test_haml_buffer_gets_reset_even_with_exception" >test_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000188&name=test_html5_doctype" >test_html5_doctype</a></li>
  <li><a href="index.html?a=M000184&name=test_html_doesnt_add_slash_to_self_closing_tags" >test_html_doesnt_add_slash_to_self_closing_tags</a></li>
  <li><a href="index.html?a=M000186&name=test_html_has_different_doctype" >test_html_has_different_doctype</a></li>
  <li><a href="index.html?a=M000182&name=test_html_has_no_self_closing_tags" >test_html_has_no_self_closing_tags</a></li>
  <li><a href="index.html?a=M000185&name=test_html_ignores_xml_prolog_declaration" >test_html_ignores_xml_prolog_declaration</a></li>
  <li><a href="index.html?a=M000183&name=test_html_renders_empty_node_with_closing_tag" >test_html_renders_empty_node_with_closing_tag</a></li>
  <li><a href="index.html?a=M000119&name=test_if_without_content_and_else" >test_if_without_content_and_else</a></li>
  <li><a href="index.html?a=M000106&name=test_inline_if" >test_inline_if</a></li>
  <li><a href="index.html?a=M000138&name=test_inline_scripts_should_respect_escape_html_option" >test_inline_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000084&name=test_interpolation" >test_interpolation</a></li>
  <li><a href="index.html?a=M000086&name=test_interpolation_at_the_beginning_of_a_line" >test_interpolation_at_the_beginning_of_a_line</a></li>
  <li><a href="index.html?a=M000085&name=test_interpolation_in_the_middle_of_a_string" >test_interpolation_in_the_middle_of_a_string</a></li>
  <li><a href="index.html?a=M000115&name=test_javascript_filter_with_dynamic_interp_and_escape_html" >test_javascript_filter_with_dynamic_interp_and_escape_html</a></li>
  <li><a href="index.html?a=M000161&name=test_local_assigns_dont_modify_class" >test_local_assigns_dont_modify_class</a></li>
  <li><a href="index.html?a=M000151&name=test_locals" >test_locals</a></li>
  <li><a href="index.html?a=M000083&name=test_multi_render" >test_multi_render</a></li>
  <li><a href="index.html?a=M000111&name=test_multiline_in_filter" >test_multiline_in_filter</a></li>
  <li><a href="index.html?a=M000197&name=test_multiline_new_attribute" >test_multiline_new_attribute</a></li>
  <li><a href="index.html?a=M000110&name=test_multiline_with_colon_after_filter" >test_multiline_with_colon_after_filter</a></li>
  <li><a href="index.html?a=M000108&name=test_nested_end_with_method_call" >test_nested_end_with_method_call</a></li>
  <li><a href="index.html?a=M000198&name=test_new_and_old_attributes" >test_new_and_old_attributes</a></li>
  <li><a href="index.html?a=M000191&name=test_new_attribute_classes" >test_new_attribute_classes</a></li>
  <li><a href="index.html?a=M000196&name=test_new_attribute_escaping" >test_new_attribute_escaping</a></li>
  <li><a href="index.html?a=M000190&name=test_new_attribute_ids" >test_new_attribute_ids</a></li>
  <li><a href="index.html?a=M000193&name=test_new_attribute_interpolation" >test_new_attribute_interpolation</a></li>
  <li><a href="index.html?a=M000195&name=test_new_attribute_parsing" >test_new_attribute_parsing</a></li>
  <li><a href="index.html?a=M000114&name=test_new_attrs_with_hash" >test_new_attrs_with_hash</a></li>
  <li><a href="index.html?a=M000148&name=test_nil_attrs" >test_nil_attrs</a></li>
  <li><a href="index.html?a=M000150&name=test_nil_class_with_syntactic_class" >test_nil_class_with_syntactic_class</a></li>
  <li><a href="index.html?a=M000149&name=test_nil_id_with_syntactic_id" >test_nil_id_with_syntactic_id</a></li>
  <li><a href="index.html?a=M000079&name=test_nil_should_render_empty_tag" >test_nil_should_render_empty_tag</a></li>
  <li><a href="index.html?a=M000088&name=test_nil_tag_value_should_render_as_empty" >test_nil_tag_value_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000164&name=test_non_literal_attributes" >test_non_literal_attributes</a></li>
  <li><a href="index.html?a=M000163&name=test_object_ref_before_attrs" >test_object_ref_before_attrs</a></li>
  <li><a href="index.html?a=M000162&name=test_object_ref_with_nil_id" >test_object_ref_with_nil_id</a></li>
  <li><a href="index.html?a=M000081&name=test_one_liner_should_be_one_line" >test_one_liner_should_be_one_line</a></li>
  <li><a href="index.html?a=M000082&name=test_one_liner_with_newline_shouldnt_be_one_line" >test_one_liner_with_newline_shouldnt_be_one_line</a></li>
  <li><a href="index.html?a=M000102&name=test_outer_whitespace_nuke_with_empty_script" >test_outer_whitespace_nuke_with_empty_script</a></li>
  <li><a href="index.html?a=M000105&name=test_plain_equals_with_ugly" >test_plain_equals_with_ugly</a></li>
  <li><a href="index.html?a=M000097&name=test_pre_code" >test_pre_code</a></li>
  <li><a href="index.html?a=M000174&name=test_render_proc_haml_buffer_gets_reset_even_with_exception" >test_render_proc_haml_buffer_gets_reset_even_with_exception</a></li>
  <li><a href="index.html?a=M000170&name=test_render_proc_locals" >test_render_proc_locals</a></li>
  <li><a href="index.html?a=M000171&name=test_render_proc_with_binding" >test_render_proc_with_binding</a></li>
  <li><a href="index.html?a=M000165&name=test_render_should_accept_a_binding_as_scope" >test_render_should_accept_a_binding_as_scope</a></li>
  <li><a href="index.html?a=M000077&name=test_ruby_code_should_work_inside_attributes" >test_ruby_code_should_work_inside_attributes</a></li>
  <li><a href="index.html?a=M000139&name=test_script_ending_in_comment_should_render_when_html_is_escaped" >test_script_ending_in_comment_should_render_when_html_is_escaped</a></li>
  <li><a href="index.html?a=M000140&name=test_script_with_if_shouldnt_output" >test_script_with_if_shouldnt_output</a></li>
  <li><a href="index.html?a=M000137&name=test_scripts_should_respect_escape_html_option" >test_scripts_should_respect_escape_html_option</a></li>
  <li><a href="index.html?a=M000109&name=test_silent_end_with_stuff" >test_silent_end_with_stuff</a></li>
  <li><a href="index.html?a=M000116&name=test_silent_script_with_hyphen_case" >test_silent_script_with_hyphen_case</a></li>
  <li><a href="index.html?a=M000117&name=test_silent_script_with_hyphen_end" >test_silent_script_with_hyphen_end</a></li>
  <li><a href="index.html?a=M000118&name=test_silent_script_with_hyphen_end_and_block" >test_silent_script_with_hyphen_end_and_block</a></li>
  <li><a href="index.html?a=M000125&name=test_static_attributes_should_be_escaped" >test_static_attributes_should_be_escaped</a></li>
  <li><a href="index.html?a=M000090&name=test_static_attributes_with_empty_attr" >test_static_attributes_with_empty_attr</a></li>
  <li><a href="index.html?a=M000179&name=test_static_hashes" >test_static_hashes</a></li>
  <li><a href="index.html?a=M000142&name=test_stop_eval" >test_stop_eval</a></li>
  <li><a href="index.html?a=M000127&name=test_string_double_equals_should_be_esaped" >test_string_double_equals_should_be_esaped</a></li>
  <li><a href="index.html?a=M000132&name=test_string_interpolation_should_be_esaped" >test_string_interpolation_should_be_esaped</a></li>
  <li><a href="index.html?a=M000080&name=test_strings_should_get_stripped_inside_tags" >test_strings_should_get_stripped_inside_tags</a></li>
  <li><a href="index.html?a=M000089&name=test_tag_with_failed_if_should_render_as_empty" >test_tag_with_failed_if_should_render_as_empty</a></li>
  <li><a href="index.html?a=M000096&name=test_textareas" >test_textareas</a></li>
  <li><a href="index.html?a=M000194&name=test_truthy_new_attributes" >test_truthy_new_attributes</a></li>
  <li><a href="index.html?a=M000160&name=test_ugly_filter" >test_ugly_filter</a></li>
  <li><a href="index.html?a=M000175&name=test_ugly_true" >test_ugly_true</a></li>
  <li><a href="index.html?a=M000157&name=test_unbalanced_brackets" >test_unbalanced_brackets</a></li>
  <li><a href="index.html?a=M000129&name=test_unescaped_inline_string_double_equals" >test_unescaped_inline_string_double_equals</a></li>
  <li><a href="index.html?a=M000134&name=test_unescaped_inline_string_interpolation" >test_unescaped_inline_string_interpolation</a></li>
  <li><a href="index.html?a=M000131&name=test_unescaped_string_double_equals" >test_unescaped_string_double_equals</a></li>
  <li><a href="index.html?a=M000136&name=test_unescaped_string_interpolation" >test_unescaped_string_interpolation</a></li>
  <li><a href="index.html?a=M000181&name=test_utf8_attrs" >test_utf8_attrs</a></li>
  <li><a href="index.html?a=M000100&name=test_whitespace_nuke_with_both_newlines" >test_whitespace_nuke_with_both_newlines</a></li>
  <li><a href="index.html?a=M000101&name=test_whitespace_nuke_with_tags_and_else" >test_whitespace_nuke_with_tags_and_else</a></li>
  <li><a href="index.html?a=M000177&name=test_xhtml_output_option" >test_xhtml_output_option</a></li>
  <li><a href="index.html?a=M000187&name=test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html" >test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</a></li>
  <li><a href="index.html?a=M000166&name=test_yield_should_work_with_binding" >test_yield_should_work_with_binding</a></li>
  <li><a href="index.html?a=M000167&name=test_yield_should_work_with_def_method" >test_yield_should_work_with_def_method</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">EXCEPTION_MAP</td>
    <td>=</td>
    <td class="attr-value">{     &quot;!!!\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a header command is illegal.&quot;,     &quot;a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within plain text is illegal.&quot;,     &quot;/ a\n  b&quot; =&gt; &quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;,     &quot;% a&quot; =&gt; 'Invalid tag: &quot;% a&quot;.',     &quot;%p a\n  b&quot; =&gt; &quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;,     &quot;%p=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;~&quot; =&gt; &quot;There's no Ruby code for ~ to evaluate.&quot;,     &quot;=&quot; =&gt; &quot;There's no Ruby code for = to evaluate.&quot;,     &quot;%p/\n  a&quot; =&gt; &quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;,     &quot;:a\n  b&quot; =&gt; ['Filter &quot;a&quot; is not defined.', 1],     &quot;:a= b&quot; =&gt; 'Invalid filter name &quot;:a= b&quot;.',     &quot;.&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.#&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.{} a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.() a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;.= a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%p..a&quot; =&gt; &quot;Illegal element: classes and ids must have values.&quot;,     &quot;%a/ b&quot; =&gt; &quot;Self-closing tags can't have content.&quot;,     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}/ e&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd'}=&quot; =&gt; [&quot;There's no Ruby code for = to evaluate.&quot;, 2],     &quot;%p.{:a =&gt; 'b',\n:c =&gt; 'd'} e&quot; =&gt; [&quot;Illegal element: classes and ids must have values.&quot;, 1],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n%p/ a&quot; =&gt; [&quot;Self-closing tags can't have content.&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; 'f'}\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p{:a =&gt; 'b',\n:c =&gt; raise('foo'),\n:e =&gt; 'f'}&quot; =&gt; [&quot;foo&quot;, 2],     &quot;%p{:a =&gt; 'b',\n:c =&gt; 'd',\n:e =&gt; raise('foo')}&quot; =&gt; [&quot;foo&quot;, 3],     &quot; %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;  %p foo&quot; =&gt; &quot;Indenting at the beginning of the document is illegal.&quot;,     &quot;- end&quot; =&gt; &quot;You don't need to use \&quot;- end\&quot; in Haml. Use indentation instead:\n- if foo?\n  %strong Foo!\n- else\n  Not foo.&quot;,     &quot; \n\t\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;\n\n %p foo&quot; =&gt; [&quot;Indenting at the beginning of the document is illegal.&quot;, 3],     &quot;%p\n  foo\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n%p\n foo&quot; =&gt; [&quot;Inconsistent indentation: 1 space was used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n\t\tfoo\n\tfoo&quot; =&gt; [&quot;Inconsistent indentation: 1 tab was used for indentation, but the rest of the document was indented using 2 tabs.&quot;, 3],     &quot;%p\n  foo\n   foo&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 3],     &quot;%p\n  foo\n  %p\n   bar&quot; =&gt; [&quot;Inconsistent indentation: 3 spaces were used for indentation, but the rest of the document was indented using 2 spaces.&quot;, 4],     &quot;%p\n  :plain\n     bar\n   \t  baz&quot; =&gt; ['Inconsistent indentation: &quot;   \t  &quot; was used for indentation, but the rest of the document was indented using 2 spaces.', 4],     &quot;%p\n  foo\n%p\n    bar&quot; =&gt; [&quot;The line was indented 2 levels deeper than the previous line.&quot;, 4],     &quot;%p\n  foo\n  %p\n        bar&quot; =&gt; [&quot;The line was indented 3 levels deeper than the previous line.&quot;, 4],     &quot;%p\n \tfoo&quot; =&gt; [&quot;Indentation can't use both tabs and spaces.&quot;, 2],     &quot;%p(&quot; =&gt; &quot;Invalid attribute list: \&quot;(\&quot;.&quot;,     &quot;%p(foo=\nbar)&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo=\&quot;.&quot;, 1],     &quot;%p(foo=)&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo=)\&quot;.&quot;,     &quot;%p(foo 'bar')&quot; =&gt; &quot;Invalid attribute list: \&quot;(foo 'bar')\&quot;.&quot;,     &quot;%p(foo 'bar'\nbaz='bang')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo 'bar'\&quot;.&quot;, 1],     &quot;%p(foo='bar'\nbaz 'bang'\nbip='bop')&quot; =&gt; [&quot;Invalid attribute list: \&quot;(foo='bar' baz 'bang'\&quot;.&quot;, 2],     &quot;%p{:foo =&gt; 'bar' :bar =&gt; 'baz'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; }&quot; =&gt; :compile,     &quot;%p{=&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar}&quot; =&gt; :compile,     &quot;%p{'foo =&gt; 'bar'}&quot; =&gt; :compile,     &quot;%p{:foo =&gt; 'bar\&quot;}&quot; =&gt; :compile,      # Regression tests     &quot;- raise 'foo'\n\n\n\nbar&quot; =&gt; [&quot;foo&quot;, 1],     &quot;= 'foo'\n-raise 'foo'&quot; =&gt; [&quot;foo&quot;, 2],     &quot;\n\n\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 4],     &quot;%p foo |\n   bar |\n   baz |\nbop\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 5],     &quot;foo\n\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within plain text is illegal.&quot;, 4],     &quot;%p/\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a self-closing tag is illegal.&quot;, 3],     &quot;%p foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: content can't be both given on the same line as %p and nested within it.&quot;, 3],     &quot;/ foo\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a tag that already has content is illegal.&quot;, 3],     &quot;!!!\n\n  bar&quot; =&gt; [&quot;Illegal nesting: nesting within a header command is illegal.&quot;, 3],     &quot;foo\n:ruby\n  1\n  2\n  3\n- raise 'foo'&quot; =&gt; [&quot;foo&quot;, 6],     &quot;= raise 'foo'\nfoo\nbar\nbaz\nbang&quot; =&gt; [&quot;foo&quot;, 1],   }</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
A map of erroneous <a href="index.html?a=C00000023&name=Haml">Haml</a>
documents to the error messages they should produce. The error messages may
be arrays; if so, the second element should be the line number that should
be reported for the error. If this isn&#8217;t provided, the tests will
assume the line number should be the last line of the document.

</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">User</td>
    <td>=</td>
    <td class="attr-value">Struct.new('User', :id)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000071" class="method">
  <div id="M000071_title" class="title">
    <b>engine</b>(text, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show source</a> ]</p>
  <div id="M000071_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 86</span>
86:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
87:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>]
88:       <span class="ruby-comment cmt"># use caller method name as fake filename. useful for debugging</span>
89:       <span class="ruby-identifier">i</span> = <span class="ruby-value">-1</span>
90:       <span class="ruby-identifier">caller</span>[<span class="ruby-identifier">i</span><span class="ruby-operator">+=</span><span class="ruby-value">1</span>] <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/`(.+?)'/</span> <span class="ruby-keyword kw">until</span> <span class="ruby-identifier">$1</span> <span class="ruby-keyword kw">and</span> <span class="ruby-identifier">$1</span>.<span class="ruby-identifier">index</span>(<span class="ruby-value str">'test_'</span>) <span class="ruby-operator">==</span> <span class="ruby-value">0</span>
91:       <span class="ruby-identifier">options</span>[<span class="ruby-identifier">:filename</span>] = <span class="ruby-node">&quot;(#{$1})&quot;</span>
92:     <span class="ruby-keyword kw">end</span>
93:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>)
94:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000070" class="method">
  <div id="M000070_title" class="title">
    <b>render</b>(text, options = {}, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show source</a> ]</p>
  <div id="M000070_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 80</span>
80:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
81:     <span class="ruby-identifier">scope</span>  = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:scope</span>)  <span class="ruby-operator">||</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
82:     <span class="ruby-identifier">locals</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span>(<span class="ruby-identifier">:locals</span>) <span class="ruby-operator">||</span> {}
83:     <span class="ruby-identifier">engine</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
84:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000121" class="method">
  <div id="M000121_title" class="title">
    <b>test_ampersand_equals_inline_should_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show source</a> ]</p>
  <div id="M000121_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 656</span>
656:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_inline_should_escape</span>
657:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
658:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000120" class="method">
  <div id="M000120_title" class="title">
    <b>test_ampersand_equals_should_escape</b>()
  </div>
  <div class="description">
  <p>
HTML escaping tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show source</a> ]</p>
  <div id="M000120_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 652</span>
652:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape</span>
653:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
654:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000122" class="method">
  <div id="M000122_title" class="title">
    <b>test_ampersand_equals_should_escape_before_preserve</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show source</a> ]</p>
  <div id="M000122_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 660</span>
660:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ampersand_equals_should_escape_before_preserve</span>
661:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;foo&amp;#x000A;bar&lt;/textarea&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea&amp;= &quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
662:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000178" class="method">
  <div id="M000178_title" class="title">
    <b>test_arbitrary_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000178_source')" id="l_M000178_source">show source</a> ]</p>
  <div id="M000178_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1092</span>
1092:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_arbitrary_output_option</span>
1093:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-value str">&quot;Invalid output format :html1&quot;</span>) { <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html1</span>) }
1094:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000093" class="method">
  <div id="M000093_title" class="title">
    <b>test_attr_hashes_not_modified</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show source</a> ]</p>
  <div id="M000093_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 207</span>
207:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_hashes_not_modified</span>
208:     <span class="ruby-identifier">hash</span> = {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>}
209:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div color='red'&gt;&lt;/div&gt;\n&lt;div class='special' color='red'&gt;&lt;/div&gt;\n&lt;div color='red'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{hash}\n.special{hash}\n%div{hash}\n&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:hash</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">hash</span>}))
210:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">hash</span>, {<span class="ruby-identifier">:color</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'red'</span>})
211:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000144" class="method">
  <div id="M000144_title" class="title">
    <b>test_attr_wrapper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000144_source')" id="l_M000144_source">show source</a> ]</p>
  <div id="M000144_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 823</span>
823:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attr_wrapper</span>
824:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p strange=*attrs*&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :strange =&gt; 'attrs'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'*'</span>))
825:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo\&quot;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
826:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;quo'te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'quo\\'te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
827:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped=\&quot;q'uo&amp;quot;te\&quot;&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; 'q\\'uo\&quot;te'}&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
828:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot; encoding=\&quot;utf-8\&quot; ?&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! XML&quot;</span>, <span class="ruby-identifier">:attr_wrapper</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&quot;'</span>))
829:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000092" class="method">
  <div id="M000092_title" class="title">
    <b>test_attribute_hash_with_newlines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show source</a> ]</p>
  <div id="M000092_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 200</span>
200:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_hash_with_newlines</span>
201:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;foop&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'} foop&quot;</span>))
202:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d'&gt;\n  foop\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}\n  foop&quot;</span>))
203:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd'}/&quot;</span>))
204:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b' c='d' e='f'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b',\n   :c =&gt; 'd',\n   :e =&gt; 'f'}&quot;</span>))
205:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000075" class="method">
  <div id="M000075_title" class="title">
    <b>test_attributes_should_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show source</a> ]</p>
  <div id="M000075_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 113</span>
113:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes_should_render_correctly</span>
114:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000145" class="method">
  <div id="M000145_title" class="title">
    <b>test_attrs_parsed_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000145_source')" id="l_M000145_source">show source</a> ]</p>
  <div id="M000145_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 831</span>
831:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attrs_parsed_correctly</span>
832:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p boom=&gt;biddly='bar =&amp;gt; baz'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'boom=&gt;biddly' =&gt; 'bar =&gt; baz'}&quot;</span>))
833:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo,bar='baz, qux'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{'foo,bar' =&gt; 'baz, qux'}&quot;</span>))
834:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo&amp;#x000A;te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\\nte\&quot;}&quot;</span>))
835:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p escaped='quo4te'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :escaped =&gt; \&quot;quo\#{2 + 2}te\&quot;}&quot;</span>))
836:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000176" class="method">
  <div id="M000176_title" class="title">
    <b>test_auto_preserve_unless_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000176_source')" id="l_M000176_source">show source</a> ]</p>
  <div id="M000176_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1080</span>
1080:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_auto_preserve_unless_ugly</span>
1081:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo&amp;#x000A;bar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>))
1082:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>))
1083:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre=&quot;foo\nbar&quot;'</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1084:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;foo\nbar&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  foo\n  bar&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1085:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000158" class="method">
  <div id="M000158_title" class="title">
    <b>test_balanced_conditional_comments</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show source</a> ]</p>
  <div id="M000158_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 954</span>
954:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_balanced_conditional_comments</span>
955:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;!--[if !(IE 6)|(IE 7)]&gt; Bracket: ] &lt;![endif]--&gt;\n&quot;</span>,
956:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;/[if !(IE 6)|(IE 7)] Bracket: ]&quot;</span>))
957:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000124" class="method">
  <div id="M000124_title" class="title">
    <b>test_bang_equals_inline_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show source</a> ]</p>
  <div id="M000124_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 668</span>
668:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_inline_should_not_escape</span>
669:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
670:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000123" class="method">
  <div id="M000123_title" class="title">
    <b>test_bang_equals_should_not_escape</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show source</a> ]</p>
  <div id="M000123_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 664</span>
664:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_equals_should_not_escape</span>
665:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  != 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
666:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000189" class="method">
  <div id="M000189_title" class="title">
    <b>test_basic_new_attributes</b>()
  </div>
  <div class="description">
  <p>
New attributes
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000189_source')" id="l_M000189_source">show source</a> ]</p>
  <div id="M000189_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1151</span>
1151:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_basic_new_attributes</span>
1152:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a() bar&quot;</span>))
1153:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href='foo') bar&quot;</span>))
1154:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='c' c='d' d='e'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(b=&quot;c&quot; c='d' d=&quot;e&quot;) baz}</span>))
1155:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000098" class="method">
  <div id="M000098_title" class="title">
    <b>test_boolean_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show source</a> ]</p>
  <div id="M000098_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 266</span>
266:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_boolean_attributes</span>
267:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
268:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
269:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p bar='bar' baz='true' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
270:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; true, :baz =&gt; 'true'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
271: 
272:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
273:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
274:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p baz='false' foo='bar'&gt;&lt;/p&gt;\n&quot;</span>,
275:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar', :bar =&gt; false, :baz =&gt; 'false'}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>))
276:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000103" class="method">
  <div id="M000103_title" class="title">
    <b>test_both_case_indentation_work_with_deeply_nested_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show source</a> ]</p>
  <div id="M000103_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 354</span>
354:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_case_indentation_work_with_deeply_nested_code</span>
355:     <span class="ruby-identifier">result</span> = <span class="ruby-value str">&quot;&lt;h2&gt;\n  other\n&lt;/h2&gt;\n&quot;</span>
356:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n- when 'test'\n  %h2\n    hi\n- when 'other'\n  %h2\n    other\n&quot;</span>))
357:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">result</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- case 'other'\n  - when 'test'\n    %h2\n      hi\n  - when 'other'\n    %h2\n      other\n&quot;</span>))
358:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000099" class="method">
  <div id="M000099_title" class="title">
    <b>test_both_whitespace_nukes_work_together</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show source</a> ]</p>
  <div id="M000099_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 278</span>
278:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_both_whitespace_nukes_work_together</span>
279:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;q&gt;Foo\n  Bar&lt;/q&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %q&gt;&lt;= \&quot;Foo\\\\nBar\&quot;\n&quot;</span>))
280:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000156" class="method">
  <div id="M000156_title" class="title">
    <b>test_compile_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show source</a> ]</p>
  <div id="M000156_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 939</span>
939:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_compile_error</span>
940:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n- fee)\nc&quot;</span>)
941:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
942:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/\(test_compile_error\):3: syntax error/i</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
943:   <span class="ruby-keyword kw">else</span>
944:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>,
945:            <span class="ruby-value str">'&quot;a\nb\n- fee)\nc&quot; doesn\'t produce an exception!'</span>)
946:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000204" class="method">
  <div id="M000204_title" class="title">
    <b>test_convert_template_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show source</a> ]</p>
  <div id="M000204_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1291</span>
1291:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_def_method</span>
1292:       <span class="ruby-identifier">assert_converts_template_properly</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span>
1293:         <span class="ruby-identifier">o</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1294:         <span class="ruby-identifier">e</span>.<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">o</span>, <span class="ruby-identifier">:render</span>)
1295:         <span class="ruby-identifier">o</span>.<span class="ruby-identifier">render</span>
1296:       <span class="ruby-keyword kw">end</span>
1297:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000200" class="method">
  <div id="M000200_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000200_source')" id="l_M000200_source">show source</a> ]</p>
  <div id="M000200_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1259</span>
1259:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1260:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;iso-8859-1&quot;</span>), <span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;utf-8&quot;</span>))
1261:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000203" class="method">
  <div id="M000203_title" class="title">
    <b>test_convert_template_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show source</a> ]</p>
  <div id="M000203_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1287</span>
1287:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render</span>
1288:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render</span>}
1289:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000202" class="method">
  <div id="M000202_title" class="title">
    <b>test_convert_template_render_proc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000202_source')" id="l_M000202_source">show source</a> ]</p>
  <div id="M000202_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1283</span>
1283:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_convert_template_render_proc</span>
1284:       <span class="ruby-identifier">assert_converts_template_properly</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">render_proc</span>.<span class="ruby-identifier">call</span>}
1285:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000146" class="method">
  <div id="M000146_title" class="title">
    <b>test_correct_parsing_with_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000146_source')" id="l_M000146_source">show source</a> ]</p>
  <div id="M000146_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 838</span>
838:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_correct_parsing_with_brackets</span>
839:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;{tada} foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} {tada} foo&quot;</span>))
840:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;deep {nested { things }}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 'foo'} deep {nested { things }}&quot;</span>))
841:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;{a { d&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{{:class =&gt; 'foo'}, :class =&gt; 'bar'} {a { d&quot;</span>))
842:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p foo='bar'&gt;a}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:foo =&gt; 'bar'} a}&quot;</span>))
843:     
844:     <span class="ruby-identifier">foo</span> = []
845:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>] = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Foo'</span>, <span class="ruby-identifier">:id</span>).<span class="ruby-identifier">new</span>
846:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
847:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
848:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_new'&gt;New User]&lt;/p&gt;\n&quot;</span>,
849:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
850: 
851:     <span class="ruby-identifier">foo</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">id</span> = <span class="ruby-value">1</span>
852:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_foo' id='struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
853:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0]] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
854:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='prefix_struct_foo' id='prefix_struct_foo_1'&gt;New User]&lt;/p&gt;\n&quot;</span>,
855:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[foo[0], :prefix] New User]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
856:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000095" class="method">
  <div id="M000095_title" class="title">
    <b>test_cr_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show source</a> ]</p>
  <div id="M000095_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cr_newline</span>
228:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;bar&lt;/p&gt;\n&lt;p&gt;baz&lt;/p&gt;\n&lt;p&gt;boom&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p foo\r%p bar\r\n%p baz\n\r%p boom&quot;</span>))
229:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000076" class="method">
  <div id="M000076_title" class="title">
    <b>test_css_id_as_attribute_should_be_appended_with_underscore</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show source</a> ]</p>
  <div id="M000076_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_id_as_attribute_should_be_appended_with_underscore</span>
118:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; '1'}&quot;</span>).<span class="ruby-identifier">chomp</span>)
119:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='my_id_1'&gt;&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#my_id{:id =&gt; 1}&quot;</span>).<span class="ruby-identifier">chomp</span>)
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000112" class="method">
  <div id="M000112_title" class="title">
    <b>test_curly_brace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show source</a> ]</p>
  <div id="M000112_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 517</span>
517:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_curly_brace</span>
518:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo { Bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;== Foo { Bar\n&quot;</span>))
519:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000173" class="method">
  <div id="M000173_title" class="title">
    <b>test_def_method_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000173_source')" id="l_M000173_source">show source</a> ]</p>
  <div id="M000173_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1051</span>
1051:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_haml_buffer_gets_reset_even_with_exception</span>
1052:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1053:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">:render</span>)
1054:     <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">render</span>
1055:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1056:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1057:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1058:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000169" class="method">
  <div id="M000169_title" class="title">
    <b>test_def_method_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000169_source')" id="l_M000169_source">show source</a> ]</p>
  <div id="M000169_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1028</span>
1028:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_locals</span>
1029:     <span class="ruby-identifier">obj</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1030:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">obj</span>, <span class="ruby-identifier">:render</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
1031:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>))
1032:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000168" class="method">
  <div id="M000168_title" class="title">
    <b>test_def_method_with_module</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000168_source')" id="l_M000168_source">show source</a> ]</p>
  <div id="M000168_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1023</span>
1023:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_def_method_with_module</span>
1024:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-constant">String</span>, <span class="ruby-identifier">:render_haml</span>)
1025:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">render_haml</span> { <span class="ruby-value">12</span> })
1026:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000199" class="method">
  <div id="M000199_title" class="title">
    <b>test_default_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000199_source')" id="l_M000199_source">show source</a> ]</p>
  <div id="M000199_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1250</span>
1250:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_encoding</span>
1251:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-constant">Encoding</span>.<span class="ruby-identifier">find</span>(<span class="ruby-value str">&quot;utf-8&quot;</span>), <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;HTML\n%p bar\n%p foo\n&quot;</span>.<span class="ruby-identifier">encode</span>(<span class="ruby-value str">&quot;us-ascii&quot;</span>)).<span class="ruby-identifier">encoding</span>)
1252:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000143" class="method">
  <div id="M000143_title" class="title">
    <b>test_doctypes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000143_source')" id="l_M000143_source">show source</a> ]</p>
  <div id="M000143_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 797</span>
797:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_doctypes</span>
798:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html&gt;'</span>,
799:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>).<span class="ruby-identifier">strip</span>)
800:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html&gt;'</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! 5'</span>).<span class="ruby-identifier">strip</span>)
801:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Strict//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd&quot;&gt;'</span>,
802:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>).<span class="ruby-identifier">strip</span>)
803:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Frameset//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd&quot;&gt;'</span>,
804:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>).<span class="ruby-identifier">strip</span>)
805:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//WAPFORUM//DTD XHTML Mobile 1.2//EN&quot; &quot;http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd&quot;&gt;'</span>,
806:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! mobile'</span>).<span class="ruby-identifier">strip</span>)
807:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML Basic 1.1//EN&quot; &quot;http://www.w3.org/TR/xhtml-basic/xhtml-basic11.dtd&quot;&gt;'</span>,
808:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! basic'</span>).<span class="ruby-identifier">strip</span>)
809:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
810:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>).<span class="ruby-identifier">strip</span>)
811:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;&gt;'</span>,
812:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>).<span class="ruby-identifier">strip</span>)
813:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot; &quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;'</span>,
814:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! strict'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
815:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Frameset//EN&quot; &quot;http://www.w3.org/TR/html4/frameset.dtd&quot;&gt;'</span>,
816:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! frameset'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
817:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
818:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! transitional'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
819:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;'</span>,
820:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>).<span class="ruby-identifier">strip</span>)
821:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000126" class="method">
  <div id="M000126_title" class="title">
    <b>test_dynamic_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000126_source')" id="l_M000126_source">show source</a> ]</p>
  <div id="M000126_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 683</span>
683:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_should_be_escaped</span>
684:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='&amp;amp;foo.png' /&gt;\n&quot;</span>,
685:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}&quot;</span>))
686:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p alt='' src='&amp;amp;foo.png'&gt;foo&lt;/p&gt;\n&quot;</span>,
687:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new} foo&quot;</span>))
688:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div alt='' src='&amp;amp;foo.png'&gt;foo&lt;/div&gt;\n&quot;</span>,
689:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:width =&gt; nil, :src =&gt; '&amp;foo.png', :alt =&gt; String.new}= 'foo'&quot;</span>))
690:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='foo&amp;#x000A;.png' /&gt;\n&quot;</span>,
691:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; \&quot;foo\\n.png\&quot;, :alt =&gt; String.new}&quot;</span>))
692:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000091" class="method">
  <div id="M000091_title" class="title">
    <b>test_dynamic_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show source</a> ]</p>
  <div id="M000091_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 196</span>
196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_with_empty_attr</span>
197:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:width =&gt; nil, :src =&gt; '/foo.png', :alt =&gt; String.new}&quot;</span>))
198:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000078" class="method">
  <div id="M000078_title" class="title">
    <b>test_dynamic_attributes_with_no_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show source</a> ]</p>
  <div id="M000078_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 127</span>
127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attributes_with_no_content</span>
128:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;a href='http://haml-lang.com'&gt;&lt;/a&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %a{:href =&gt; \&quot;http://\&quot; + \&quot;haml-lang.com\&quot;}\n&quot;</span>))
129:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000152" class="method">
  <div id="M000152_title" class="title">
    <b>test_dynamic_attrs_shouldnt_register_as_literal_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show source</a> ]</p>
  <div id="M000152_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 885</span>
885:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_shouldnt_register_as_literal_values</span>
886:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p{:a =&gt; &quot;b#{1 + 1}c&quot;}'</span>))
887:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a='b2c'&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:a =&gt; 'b' + (1 + 1).to_s + 'c'}&quot;</span>))
888:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000153" class="method">
  <div id="M000153_title" class="title">
    <b>test_dynamic_attrs_with_self_closed_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show source</a> ]</p>
  <div id="M000153_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 890</span>
890:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_attrs_with_self_closed_tag</span>
891:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='2' /&gt;\nc\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{'b' =&gt; 1 + 1}/\n= 'c'\n&quot;</span>))
892:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000180" class="method">
  <div id="M000180_title" class="title">
    <b>test_dynamic_hashes_with_suppress_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000180_source')" id="l_M000180_source">show source</a> ]</p>
  <div id="M000180_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1103</span>
1103:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_hashes_with_suppress_eval</span>
1104:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a #{1 + 1} b&quot;, :c =&gt; &quot;d&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1105:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000192" class="method">
  <div id="M000192_title" class="title">
    <b>test_dynamic_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000192_source')" id="l_M000192_source">show source</a> ]</p>
  <div id="M000192_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1185</span>
1185:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dynamic_new_attributes</span>
1186:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=foo) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>}))
1187:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='12' c='13' d='14'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(b=b c='13' d=d) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">:d</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">14</span>}))
1188:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000147" class="method">
  <div id="M000147_title" class="title">
    <b>test_empty_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000147_source')" id="l_M000147_source">show source</a> ]</p>
  <div id="M000147_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 858</span>
858:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_attrs</span>
859:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; '' } empty&quot;</span>))
860:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr=''&gt;empty&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } empty&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>}))
861:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000159" class="method">
  <div id="M000159_title" class="title">
    <b>test_empty_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show source</a> ]</p>
  <div id="M000159_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 959</span>
959:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_filter</span>
960:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    \n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">':javascript'</span>))
961:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000072" class="method">
  <div id="M000072_title" class="title">
    <b>test_empty_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show source</a> ]</p>
  <div id="M000072_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 96</span>
96:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render</span>
97:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&quot;</span>)
98:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000074" class="method">
  <div id="M000074_title" class="title">
    <b>test_empty_render_should_remain_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show source</a> ]</p>
  <div id="M000074_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render_should_remain_empty</span>
110:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">''</span>))
111:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000094" class="method">
  <div id="M000094_title" class="title">
    <b>test_end_of_file_multiline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show source</a> ]</p>
  <div id="M000094_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 223</span>
223:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_of_file_multiline</span>
224:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;0&lt;/p&gt;\n&lt;p&gt;1&lt;/p&gt;\n&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for i in (0...3)\n  %p= |\n   i |&quot;</span>))
225:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000107" class="method">
  <div id="M000107_title" class="title">
    <b>test_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show source</a> ]</p>
  <div id="M000107_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 412</span>
412:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_with_method_call</span>
413:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;2|3|4\nb-a-r\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= [1, 2, 3].map do |i|\n  - i + 1\n- end.join(\&quot;|\&quot;)\n= \&quot;bar\&quot;.gsub(/./) do |s|\n  - s + \&quot;-\&quot;\n- end.gsub(/-$/) do |s|\n  - ''\n&quot;</span>))
414:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000104" class="method">
  <div id="M000104_title" class="title">
    <b>test_equals_block_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show source</a> ]</p>
  <div id="M000104_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_equals_block_with_ugly</span>
384:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= capture_haml do\n  foo\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
385:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000113" class="method">
  <div id="M000113_title" class="title">
    <b>test_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show source</a> ]</p>
  <div id="M000113_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 527</span>
527:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escape_html</span>
528:     <span class="ruby-identifier">html</span> = <span class="ruby-value str">&quot;&amp;amp;\n&amp;\n&amp;amp;\n&quot;</span>
529: 
530:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;= \&quot;&amp;\&quot;\n!= \&quot;&amp;\&quot;\n= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
531: 
532:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;~ \&quot;&amp;\&quot;\n!~ \&quot;&amp;\&quot;\n~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
533: 
534:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp; \\\#{\&quot;&amp;\&quot;}\n! \\\#{\&quot;&amp;\&quot;}\n\\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
535: 
536:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;&amp;== \\\#{\&quot;&amp;\&quot;}\n!== \\\#{\&quot;&amp;\&quot;}\n== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
537: 
538:     <span class="ruby-identifier">tag_html</span> = <span class="ruby-value str">&quot;&lt;p&gt;&amp;amp;&lt;/p&gt;\n&lt;p&gt;&amp;&lt;/p&gt;\n&lt;p&gt;&amp;amp;&lt;/p&gt;\n&quot;</span>
539: 
540:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;= \&quot;&amp;\&quot;\n%p!= \&quot;&amp;\&quot;\n%p= \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
541: 
542:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;~ \&quot;&amp;\&quot;\n%p!~ \&quot;&amp;\&quot;\n%p~ \&quot;&amp;\&quot;\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
543: 
544:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \\\#{\&quot;&amp;\&quot;}\n%p! \\\#{\&quot;&amp;\&quot;}\n%p \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
545: 
546:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">tag_html</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \\\#{\&quot;&amp;\&quot;}\n%p!== \\\#{\&quot;&amp;\&quot;}\n%p== \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
547:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000128" class="method">
  <div id="M000128_title" class="title">
    <b>test_escaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show source</a> ]</p>
  <div id="M000128_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 699</span>
699:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_double_equals</span>
700:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
701:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
702:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000133" class="method">
  <div id="M000133_title" class="title">
    <b>test_escaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000133_source')" id="l_M000133_source">show source</a> ]</p>
  <div id="M000133_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 724</span>
724:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_inline_string_interpolation</span>
725:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
726:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p&amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
727:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000087" class="method">
  <div id="M000087_title" class="title">
    <b>test_escaped_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show source</a> ]</p>
  <div id="M000087_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_interpolation</span>
181:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Foo &amp;amp; Bar &amp; Baz&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p&amp; Foo #{&quot;&amp;&quot;} Bar &amp; Baz'</span>))
182:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000130" class="method">
  <div id="M000130_title" class="title">
    <b>test_escaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show source</a> ]</p>
  <div id="M000130_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 709</span>
709:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_double_equals</span>
710:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
711:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp;== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
712:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000135" class="method">
  <div id="M000135_title" class="title">
    <b>test_escaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000135_source')" id="l_M000135_source">show source</a> ]</p>
  <div id="M000135_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 734</span>
734:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_escaped_string_interpolation</span>
735:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
736:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&amp;lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  &amp; \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
737:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000155" class="method">
  <div id="M000155_title" class="title">
    <b>test_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show source</a> ]</p>
  <div id="M000155_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 930</span>
930:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception</span>
931:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  hi\n  %a= undefined\n= 12&quot;</span>)
932:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
933:     <span class="ruby-identifier">assert_match</span>(<span class="ruby-value str">&quot;(test_exception):3&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
934:   <span class="ruby-keyword kw">else</span>
935:     <span class="ruby-comment cmt"># Test failed... should have raised an exception</span>
936:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>)
937:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000154" class="method">
  <div id="M000154_title" class="title">
    <b>test_exception_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show source</a> ]</p>
  <div id="M000154_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 922</span>
922:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exception_line</span>
923:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;a\nb\n!!!\n  c\nd&quot;</span>)
924:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
925:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;(test_exception_line):4&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
926:   <span class="ruby-keyword kw">else</span>
927:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">'&quot;a\nb\n!!!\n  c\nd&quot; doesn\'t produce an exception'</span>)
928:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000201" class="method">
  <div id="M000201_title" class="title">
    <b>test_fake_ascii_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000201_source')" id="l_M000201_source">show source</a> ]</p>
  <div id="M000201_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1271</span>
1271:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fake_ascii_encoding</span>
1272:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;b\303\242r&lt;/p&gt;\n&lt;p&gt;f\303\266\303\266&lt;/p&gt;\n&quot;</span>.<span class="ruby-identifier">force_encoding</span>(<span class="ruby-value str">&quot;ascii-8bit&quot;</span>), <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p b\303\242r\n%p f\303\266\303\266\n&quot;</span>, <span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;ascii-8bit&quot;</span>))
1273:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000141" class="method">
  <div id="M000141_title" class="title">
    <b>test_filename_and_line</b>()
  </div>
  <div class="description">
  <p>
Options tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000141_source')" id="l_M000141_source">show source</a> ]</p>
  <div id="M000141_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 772</span>
772:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filename_and_line</span>
773:     <span class="ruby-keyword kw">begin</span>
774:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n = abc&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
775:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
776:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>, <span class="ruby-identifier">e</span>
777:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:4/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
778:     <span class="ruby-keyword kw">end</span>
779: 
780:     <span class="ruby-keyword kw">begin</span>
781:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\n\n= 123\n\n= nil[]&quot;</span>, <span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>)
782:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
783:       <span class="ruby-identifier">assert_kind_of</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-identifier">e</span>
784:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/test:6/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>.<span class="ruby-identifier">first</span>)
785:     <span class="ruby-keyword kw">end</span>
786:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000073" class="method">
  <div id="M000073_title" class="title">
    <b>test_flexible_tabulation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show source</a> ]</p>
  <div id="M000073_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flexible_tabulation</span>
101:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
102:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n foo\n%q\n bar\n %a\n  baz&quot;</span>))
103:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n&lt;/p&gt;\n&lt;q&gt;\n  bar\n  &lt;a&gt;\n    baz\n  &lt;/a&gt;\n&lt;/q&gt;\n&quot;</span>,
104:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n\tfoo\n%q\n\tbar\n\t%a\n\t\tbaz&quot;</span>))
105:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n      \t \t bar\n   baz\n&lt;/p&gt;\n&quot;</span>,
106:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  :plain\n        \t \t bar\n     baz&quot;</span>))
107:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000172" class="method">
  <div id="M000172_title" class="title">
    <b>test_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000172_source')" id="l_M000172_source">show source</a> ]</p>
  <div id="M000172_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1043</span>
1043:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_buffer_gets_reset_even_with_exception</span>
1044:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1045:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scope</span>)
1046:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1047:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1048:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1049:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000188" class="method">
  <div id="M000188_title" class="title">
    <b>test_html5_doctype</b>()
  </div>
  <div class="description">
  <p>
HTML5
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000188_source')" id="l_M000188_source">show source</a> ]</p>
  <div id="M000188_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1145</span>
1145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html5_doctype</span>
1146:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>)
1147:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000184" class="method">
  <div id="M000184_title" class="title">
    <b>test_html_doesnt_add_slash_to_self_closing_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000184_source')" id="l_M000184_source">show source</a> ]</p>
  <div id="M000184_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1123</span>
1123:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_doesnt_add_slash_to_self_closing_tags</span>
1124:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:foo =&gt; 1 + 1}/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1126:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1127:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;meta foo='2'&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%meta{:foo =&gt; 1 + 1}&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000186" class="method">
  <div id="M000186_title" class="title">
    <b>test_html_has_different_doctype</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000186_source')" id="l_M000186_source">show source</a> ]</p>
  <div id="M000186_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1134</span>
1134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_different_doctype</span>
1135:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">%{&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot; &quot;http://www.w3.org/TR/html4/loose.dtd&quot;&gt;\n}</span>,
1136:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!!'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1137:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000182" class="method">
  <div id="M000182_title" class="title">
    <b>test_html_has_no_self_closing_tags</b>()
  </div>
  <div class="description">
  <p>
HTML 4.0
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000182_source')" id="l_M000182_source">show source</a> ]</p>
  <div id="M000182_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1114</span>
1114:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_has_no_self_closing_tags</span>
1115:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1116:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;br&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%br/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1117:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000185" class="method">
  <div id="M000185_title" class="title">
    <b>test_html_ignores_xml_prolog_declaration</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000185_source')" id="l_M000185_source">show source</a> ]</p>
  <div id="M000185_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1130</span>
1130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_ignores_xml_prolog_declaration</span>
1131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'!!! XML'</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000183" class="method">
  <div id="M000183_title" class="title">
    <b>test_html_renders_empty_node_with_closing_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000183_source')" id="l_M000183_source">show source</a> ]</p>
  <div id="M000183_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1119</span>
1119:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_renders_empty_node_with_closing_tag</span>
1120:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div class='foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>)
1121:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000119" class="method">
  <div id="M000119_title" class="title">
    <b>test_if_without_content_and_else</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show source</a> ]</p>
  <div id="M000119_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 638</span>
638:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_if_without_content_and_else</span>
639:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- if false\n- else\n  foo\n&quot;</span>))
640:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000106" class="method">
  <div id="M000106_title" class="title">
    <b>test_inline_if</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show source</a> ]</p>
  <div id="M000106_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 399</span>
399:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_if</span>
400:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;One&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&lt;p&gt;Three&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- for name in [\&quot;One\&quot;, \&quot;Two\&quot;, \&quot;Three\&quot;]\n  %p= name unless name == \&quot;Two\&quot;\n&quot;</span>))
401:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000138" class="method">
  <div id="M000138_title" class="title">
    <b>test_inline_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000138_source')" id="l_M000138_source">show source</a> ]</p>
  <div id="M000138_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 749</span>
749:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inline_scripts_should_respect_escape_html_option</span>
750:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp;amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
751:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo &amp; bar&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
752:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000084" class="method">
  <div id="M000084_title" class="title">
    <b>test_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show source</a> ]</p>
  <div id="M000084_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation</span>
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello World&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello #{who}'</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
167:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  Hello World\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  Hello \#{who}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:who</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'World'</span>}))
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000086" class="method">
  <div id="M000086_title" class="title">
    <b>test_interpolation_at_the_beginning_of_a_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show source</a> ]</p>
  <div id="M000086_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 175</span>
175:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_at_the_beginning_of_a_line</span>
176:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;2&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p #{1 + 1}'</span>))
177:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  \#{1 + 1}&quot;</span>))
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000085" class="method">
  <div id="M000085_title" class="title">
    <b>test_interpolation_in_the_middle_of_a_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show source</a> ]</p>
  <div id="M000085_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_interpolation_in_the_middle_of_a_string</span>
171:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\&quot;title 'Title'. \&quot;\n&quot;</span>,
172:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;\&quot;title '\#{\&quot;Title\&quot;}'. \&quot;&quot;</span>))
173:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000115" class="method">
  <div id="M000115_title" class="title">
    <b>test_javascript_filter_with_dynamic_interp_and_escape_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show source</a> ]</p>
  <div id="M000115_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 603</span>
603:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_javascript_filter_with_dynamic_interp_and_escape_html</span>
604:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script type='text/javascript'&gt;\n  //&lt;![CDATA[\n    &amp; &lt; &gt; &amp;\n  //]]&gt;\n&lt;/script&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:javascript\n &amp; &lt; &gt; \\\#{\&quot;&amp;\&quot;}\n&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
605:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000161" class="method">
  <div id="M000161_title" class="title">
    <b>test_local_assigns_dont_modify_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show source</a> ]</p>
  <div id="M000161_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 978</span>
978:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_local_assigns_dont_modify_class</span>
979:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= foo&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
980:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">defined?</span>(<span class="ruby-identifier">foo</span>))
981:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000151" class="method">
  <div id="M000151_title" class="title">
    <b>test_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show source</a> ]</p>
  <div id="M000151_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 881</span>
881:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_locals</span>
882:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Paragraph!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= text&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> { <span class="ruby-identifier">:text</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;Paragraph!&quot;</span> }))
883:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000083" class="method">
  <div id="M000083_title" class="title">
    <b>test_multi_render</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show source</a> ]</p>
  <div id="M000083_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_render</span>
159:     <span class="ruby-identifier">engine</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%strong Hi there!&quot;</span>)
160:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
161:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;strong&gt;Hi there!&lt;/strong&gt;\n&quot;</span>, <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">to_html</span>)
163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000111" class="method">
  <div id="M000111_title" class="title">
    <b>test_multiline_in_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show source</a> ]</p>
  <div id="M000111_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 502</span>
502:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_in_filter</span>
503:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo |\nBar |\nBaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo |\n  Bar |\n  Baz\n&quot;</span>))
504:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000197" class="method">
  <div id="M000197_title" class="title">
    <b>test_multiline_new_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000197_source')" id="l_M000197_source">show source</a> ]</p>
  <div id="M000197_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1228</span>
1228:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_new_attribute</span>
1229:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'\n  c='d') bar&quot;</span>))
1230:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e' e='f' f='j'&gt;bar&lt;/a&gt;\n&quot;</span>,
1231:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b' b='c'\n  c='d' d=e\n  e='f' f='j') bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:e</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'e'</span>}))
1232:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000110" class="method">
  <div id="M000110_title" class="title">
    <b>test_multiline_with_colon_after_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show source</a> ]</p>
  <div id="M000110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 478</span>
478:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multiline_with_colon_after_filter</span>
479:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n  Foo\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
480:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\nBar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:plain\n= { :a =&gt; \&quot;Bar\&quot;,      |\n    :b =&gt; \&quot;Baz\&quot; }[:a] |\n&quot;</span>))
481:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000108" class="method">
  <div id="M000108_title" class="title">
    <b>test_nested_end_with_method_call</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show source</a> ]</p>
  <div id="M000108_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 429</span>
429:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_end_with_method_call</span>
430:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  2|3|4\n  b-a-r\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = [1, 2, 3].map do |i|\n    - i + 1\n  - end.join(\&quot;|\&quot;)\n  = \&quot;bar\&quot;.gsub(/./) do |s|\n    - s + \&quot;-\&quot;\n  - end.gsub(/-$/) do |s|\n    - ''\n&quot;</span>))
431:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000198" class="method">
  <div id="M000198_title" class="title">
    <b>test_new_and_old_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000198_source')" id="l_M000198_source">show source</a> ]</p>
  <div id="M000198_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1234</span>
1234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_and_old_attributes</span>
1235:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='b'){:c =&gt; 'd'} bar&quot;</span>))
1236:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:c =&gt; 'd'}(a='b') bar&quot;</span>))
1237:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(c='d'){:a =&gt; 'b'} bar&quot;</span>))
1238:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' c='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(c='d') bar&quot;</span>))
1239: 
1240:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='d'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b'}(a='d') bar&quot;</span>))
1241:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='d'){:a =&gt; 'b'} bar&quot;</span>))
1242: 
1243:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='b' b='c' c='d' d='e'&gt;bar&lt;/a&gt;\n&quot;</span>,
1244:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:a =&gt; 'b',\n:b =&gt; 'c'}(c='d'\nd='e') bar&quot;</span>))
1245:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000191" class="method">
  <div id="M000191_title" class="title">
    <b>test_new_attribute_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000191_source')" id="l_M000191_source">show source</a> ]</p>
  <div id="M000191_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1172</span>
1172:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_classes</span>
1173:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='bar')&quot;</span>))
1174:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo{:class =&gt; 'bar'}(class='baz')&quot;</span>))
1175:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}&quot;</span>))
1176:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1177:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1178:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo(class='baz'){:class =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1179:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1180:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo](class='baz'){:class =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1181:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='bar baz foo struct_user' id='struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1182:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.foo[foo]{:class =&gt; 'bar'}(class='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1183:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000196" class="method">
  <div id="M000196_title" class="title">
    <b>test_new_attribute_escaping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000196_source')" id="l_M000196_source">show source</a> ]</p>
  <div id="M000196_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1217</span>
1217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_escaping</span>
1218:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo &quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \&quot; bar&quot;) bar}</span>))
1219:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\&quot; bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\\&quot; bar&quot;) bar}</span>))
1220: 
1221:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo ' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \' bar') bar}</span>))
1222:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo \\' bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo \\\\\' bar') bar}</span>))
1223: 
1224:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \\ bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \\\\ bar&quot;) bar}</span>))
1225:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo \#{1 + 1} bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo \#{1 + 1} bar&quot;) bar}</span>))
1226:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000190" class="method">
  <div id="M000190_title" class="title">
    <b>test_new_attribute_ids</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000190_source')" id="l_M000190_source">show source</a> ]</p>
  <div id="M000190_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1157</span>
1157:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_ids</span>
1158:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='bar')&quot;</span>))
1159:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_bar_baz'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:id =&gt; 'bar'}(id='baz')&quot;</span>))
1160:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo_baz_bar'&gt;&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}&quot;</span>))
1161:     <span class="ruby-identifier">foo</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value">42</span>)
1162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1163:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz'){:id =&gt; 'bar'}[foo]&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1164:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1165:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo(id='baz')[foo]{:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_baz_bar_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1167:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo](id='baz'){:id =&gt; 'bar'}&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1168:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='struct_user' id='foo_bar_baz_struct_user_42'&gt;&lt;/div&gt;\n&quot;</span>,
1169:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo[foo]{:id =&gt; 'bar'}(id='baz')&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">foo</span>}))
1170:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000193" class="method">
  <div id="M000193_title" class="title">
    <b>test_new_attribute_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000193_source')" id="l_M000193_source">show source</a> ]</p>
  <div id="M000193_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1190</span>
1190:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_interpolation</span>
1191:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='12'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1#{1 + 1}&quot;) bar'</span>))
1192:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='2: 2, 3: 3'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(href='2: #{1 + 1}, 3: #{foo}') bar}</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>}))
1193:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a href='1\#{1 + 1}'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;1\#{1 + 1}&quot;) bar'</span>))
1194:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000195" class="method">
  <div id="M000195_title" class="title">
    <b>test_new_attribute_parsing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000195_source')" id="l_M000195_source">show source</a> ]</p>
  <div id="M000195_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1203</span>
1203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attribute_parsing</span>
1204:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a2='b2'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a2=b2) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:b2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'b2'</span>}))
1205:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{'foo&quot;bar'}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1206:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;#{&quot;foo'bar&quot;}&quot;) bar}</span>)) <span class="ruby-comment cmt">#'</span>
1207:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a='foo&quot;bar'&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a='foo&quot;bar') bar}</span>))
1208:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%Q{&lt;a a=&quot;foo'bar&quot;&gt;bar&lt;/a&gt;\n}</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">%q{%a(a=&quot;foo'bar&quot;) bar}</span>))
1209:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a:b='foo'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a:b='foo') bar&quot;</span>))
1210:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = 'foo' b = 'bar') bar&quot;</span>))
1211:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo' b='bar'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a = foo b = bar) bar&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">:bar</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}))
1212:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;(b='bar')&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo')(b='bar')&quot;</span>))
1213:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo)bar'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(a='foo)bar') baz&quot;</span>))
1214:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a a='foo'&gt;baz&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a( a = 'foo' ) baz&quot;</span>))
1215:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000114" class="method">
  <div id="M000114_title" class="title">
    <b>test_new_attrs_with_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show source</a> ]</p>
  <div id="M000114_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 599</span>
599:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_attrs_with_hash</span>
600:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='#'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a(href=&quot;#&quot;)'</span>))
601:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000148" class="method">
  <div id="M000148_title" class="title">
    <b>test_nil_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000148_source')" id="l_M000148_source">show source</a> ]</p>
  <div id="M000148_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 863</span>
863:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_attrs</span>
864:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; nil } nil&quot;</span>))
865:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{ :attr =&gt; x } nil&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:x</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>}))
866:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000150" class="method">
  <div id="M000150_title" class="title">
    <b>test_nil_class_with_syntactic_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000150_source')" id="l_M000150_source">show source</a> ]</p>
  <div id="M000150_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 874</span>
874:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_class_with_syntactic_class</span>
875:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{:class =&gt; nil} nil&quot;</span>))
876:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.bar.foo{:class =&gt; nil} nil&quot;</span>))
877:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; 'bar'}, :class =&gt; nil} nil&quot;</span>))
878:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='bar foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.foo{{:class =&gt; nil}, :class =&gt; 'bar'} nil&quot;</span>))
879:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000149" class="method">
  <div id="M000149_title" class="title">
    <b>test_nil_id_with_syntactic_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000149_source')" id="l_M000149_source">show source</a> ]</p>
  <div id="M000149_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 868</span>
868:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_id_with_syntactic_id</span>
869:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{:id =&gt; nil} nil&quot;</span>))
870:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; 'bar'}, :id =&gt; nil} nil&quot;</span>))
871:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo_bar'&gt;nil&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p#foo{{:id =&gt; nil}, :id =&gt; 'bar'} nil&quot;</span>))
872:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000079" class="method">
  <div id="M000079_title" class="title">
    <b>test_nil_should_render_empty_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show source</a> ]</p>
  <div id="M000079_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 140</span>
140:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_should_render_empty_tag</span>
141:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='no_attributes'&gt;&lt;/div&gt;&quot;</span>,
142:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.no_attributes{:nil =&gt; nil}&quot;</span>).<span class="ruby-identifier">chomp</span>)
143:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000088" class="method">
  <div id="M000088_title" class="title">
    <b>test_nil_tag_value_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show source</a> ]</p>
  <div id="M000088_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 184</span>
184:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nil_tag_value_should_render_as_empty</span>
185:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= nil&quot;</span>))
186:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000164" class="method">
  <div id="M000164_title" class="title">
    <b>test_non_literal_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show source</a> ]</p>
  <div id="M000164_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 995</span>
995:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_literal_attributes</span>
996:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p a1='foo' a2='bar' a3='baz' /&gt;\n&quot;</span>,
997:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{a2, a1, :a3 =&gt; 'baz'}/&quot;</span>,
998:                         <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a1</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'foo'</span>}, <span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:a2</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>}}))
999:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000163" class="method">
  <div id="M000163_title" class="title">
    <b>test_object_ref_before_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show source</a> ]</p>
  <div id="M000163_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 989</span>
989:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_before_attrs</span>
990:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span> <span class="ruby-value">42</span>
991:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_42' style='width: 100px;'&gt;New User&lt;/p&gt;\n&quot;</span>,
992:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user]{:style =&gt; 'width: 100px;'} New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
993:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000162" class="method">
  <div id="M000162_title" class="title">
    <b>test_object_ref_with_nil_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show source</a> ]</p>
  <div id="M000162_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 983</span>
983:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_object_ref_with_nil_id</span>
984:     <span class="ruby-identifier">user</span> = <span class="ruby-constant">User</span>.<span class="ruby-identifier">new</span>
985:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='struct_user' id='struct_user_new'&gt;New User&lt;/p&gt;\n&quot;</span>,
986:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p[user] New User&quot;</span>, <span class="ruby-identifier">:locals</span> =<span class="ruby-operator">&gt;</span> {<span class="ruby-identifier">:user</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">user</span>}))
987:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000081" class="method">
  <div id="M000081_title" class="title">
    <b>test_one_liner_should_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show source</a> ]</p>
  <div id="M000081_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_should_be_one_line</span>
151:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;Hello&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p Hello'</span>).<span class="ruby-identifier">chomp</span>)
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000082" class="method">
  <div id="M000082_title" class="title">
    <b>test_one_liner_with_newline_shouldnt_be_one_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show source</a> ]</p>
  <div id="M000082_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_one_liner_with_newline_shouldnt_be_one_line</span>
155:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo\n  bar\n&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p= &quot;foo\nbar&quot;'</span>).<span class="ruby-identifier">chomp</span>)
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000102" class="method">
  <div id="M000102_title" class="title">
    <b>test_outer_whitespace_nuke_with_empty_script</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show source</a> ]</p>
  <div id="M000102_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 340</span>
340:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_outer_whitespace_nuke_with_empty_script</span>
341:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo&lt;a&gt;&lt;/a&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  foo\n  = \&quot;  \&quot;\n  %a&gt;\n&quot;</span>))
342:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000105" class="method">
  <div id="M000105_title" class="title">
    <b>test_plain_equals_with_ugly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show source</a> ]</p>
  <div id="M000105_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 391</span>
391:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_plain_equals_with_ugly</span>
392:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\nbar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= \&quot;foo\&quot;\nbar\n&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
393:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000097" class="method">
  <div id="M000097_title" class="title">
    <b>test_pre_code</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show source</a> ]</p>
  <div id="M000097_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 251</span>
251:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pre_code</span>
252:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;&lt;code&gt;Foo&amp;#x000A;  bar&amp;#x000A;    baz&lt;/code&gt;&lt;/pre&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%pre\n  %code\n    :preserve\n      Foo\n        bar\n          baz\n&quot;</span>))
253:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000174" class="method">
  <div id="M000174_title" class="title">
    <b>test_render_proc_haml_buffer_gets_reset_even_with_exception</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000174_source')" id="l_M000174_source">show source</a> ]</p>
  <div id="M000174_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1060</span>
1060:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_haml_buffer_gets_reset_even_with_exception</span>
1061:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
1062:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;- raise Haml::Error&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-identifier">scope</span>)
1063:     <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">call</span>
1064:     <span class="ruby-identifier">assert</span>(<span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected exception&quot;</span>)
1065:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span>
1066:     <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:haml_buffer</span>))
1067:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000170" class="method">
  <div id="M000170_title" class="title">
    <b>test_render_proc_locals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000170_source')" id="l_M000170_source">show source</a> ]</p>
  <div id="M000170_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1034</span>
1034:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_locals</span>
1035:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;%p= foo\n.bar{:baz =&gt; baz}= boom&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">:foo</span>, <span class="ruby-identifier">:baz</span>, <span class="ruby-identifier">:boom</span>)
1036:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;1&lt;/p&gt;\n&lt;div baz='2' class='bar'&gt;3&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">proc</span>[<span class="ruby-identifier">:foo</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">:baz</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">:boom</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>])
1037:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000171" class="method">
  <div id="M000171_title" class="title">
    <b>test_render_proc_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000171_source')" id="l_M000171_source">show source</a> ]</p>
  <div id="M000171_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1039</span>
1039:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_proc_with_binding</span>
1040:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FOO\n&quot;</span>, <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= upcase&quot;</span>).<span class="ruby-identifier">render_proc</span>(<span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}).<span class="ruby-identifier">call</span>)
1041:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000165" class="method">
  <div id="M000165_title" class="title">
    <b>test_render_should_accept_a_binding_as_scope</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000165_source')" id="l_M000165_source">show source</a> ]</p>
  <div id="M000165_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1001</span>
1001:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_should_accept_a_binding_as_scope</span>
1002:     <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;This is a string!&quot;</span>
1003:     <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@var&quot;</span>, <span class="ruby-value str">&quot;Instance variable&quot;</span>)
1004:     <span class="ruby-identifier">b</span> = <span class="ruby-identifier">string</span>.<span class="ruby-identifier">instance_eval</span> <span class="ruby-keyword kw">do</span>
1005:       <span class="ruby-identifier">var</span> = <span class="ruby-value str">&quot;Local variable&quot;</span>
1006:       <span class="ruby-identifier">binding</span>
1007:     <span class="ruby-keyword kw">end</span>
1008: 
1009:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;THIS IS A STRING!&lt;/p&gt;\n&lt;p&gt;Instance variable&lt;/p&gt;\n&lt;p&gt;Local variable&lt;/p&gt;\n&quot;</span>,
1010:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= upcase\n%p= @var\n%p= var&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">b</span>))
1011:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000077" class="method">
  <div id="M000077_title" class="title">
    <b>test_ruby_code_should_work_inside_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show source</a> ]</p>
  <div id="M000077_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ruby_code_should_work_inside_attributes</span>
123:     <span class="ruby-identifier">author</span> = <span class="ruby-value str">'hcatlin'</span>
124:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='3'&gt;foo&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; 1+2} foo&quot;</span>).<span class="ruby-identifier">chomp</span>)
125:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000139" class="method">
  <div id="M000139_title" class="title">
    <b>test_script_ending_in_comment_should_render_when_html_is_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000139_source')" id="l_M000139_source">show source</a> ]</p>
  <div id="M000139_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 754</span>
754:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_ending_in_comment_should_render_when_html_is_escaped</span>
755:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo&amp;amp;bar\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'foo&amp;bar' #comment&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
756:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000140" class="method">
  <div id="M000140_title" class="title">
    <b>test_script_with_if_shouldnt_output</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000140_source')" id="l_M000140_source">show source</a> ]</p>
  <div id="M000140_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 758</span>
758:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_script_with_if_shouldnt_output</span>
759:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= \&quot;foo\&quot;\n%p= \&quot;bar\&quot; if false\n&quot;</span>))
760:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000137" class="method">
  <div id="M000137_title" class="title">
    <b>test_scripts_should_respect_escape_html_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000137_source')" id="l_M000137_source">show source</a> ]</p>
  <div id="M000137_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 744</span>
744:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scripts_should_respect_escape_html_option</span>
745:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp;amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
746:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  foo &amp; bar\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  = 'foo &amp; bar'&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
747:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000109" class="method">
  <div id="M000109_title" class="title">
    <b>test_silent_end_with_stuff</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show source</a> ]</p>
  <div id="M000109_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 449</span>
449:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_end_with_stuff</span>
450:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;e\nd\nc\nb\na\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- str = \&quot;abcde\&quot;\n- if true\n  = str.slice!(-1).chr\n- end until str.empty?\n&quot;</span>))
451: 
452:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;hi!&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- if true\n  %p hi!\n- end if \&quot;foo\&quot;.gsub(/f/) do\n  - \&quot;z\&quot;\n- end + \&quot;bar\&quot;\n&quot;</span>))
453:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000116" class="method">
  <div id="M000116_title" class="title">
    <b>test_silent_script_with_hyphen_case</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show source</a> ]</p>
  <div id="M000116_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 618</span>
618:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_case</span>
619:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-case-bar-case'&quot;</span>))
620:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000117" class="method">
  <div id="M000117_title" class="title">
    <b>test_silent_script_with_hyphen_end</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show source</a> ]</p>
  <div id="M000117_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 622</span>
622:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end</span>
623:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- 'foo-end-bar-end'&quot;</span>))
624:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000118" class="method">
  <div id="M000118_title" class="title">
    <b>test_silent_script_with_hyphen_end_and_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show source</a> ]</p>
  <div id="M000118_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 626</span>
626:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_silent_script_with_hyphen_end_and_block</span>
627:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo-end&lt;/p&gt;\n&lt;p&gt;bar-end&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- \&quot;foo-end-bar-end\&quot;.gsub(/\\\\w+-end/) do |s|\n  %p= s\n&quot;</span>))
628:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000125" class="method">
  <div id="M000125_title" class="title">
    <b>test_static_attributes_should_be_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show source</a> ]</p>
  <div id="M000125_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 672</span>
672:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_should_be_escaped</span>
673:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img class='atlantis' style='ugly&amp;amp;stupid' /&gt;\n&quot;</span>,
674:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img.atlantis{:style =&gt; 'ugly&amp;stupid'}&quot;</span>))
675:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/div&gt;\n&quot;</span>,
676:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.atlantis{:style =&gt; 'ugly&amp;stupid'} foo&quot;</span>))
677:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;amp;stupid'&gt;foo&lt;/p&gt;\n&quot;</span>,
678:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; 'ugly&amp;stupid'}= 'foo'&quot;</span>))
679:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='atlantis' style='ugly&amp;#x000A;stupid'&gt;&lt;/p&gt;\n&quot;</span>,
680:                 <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p.atlantis{:style =&gt; \&quot;ugly\\nstupid\&quot;}&quot;</span>))
681:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000090" class="method">
  <div id="M000090_title" class="title">
    <b>test_static_attributes_with_empty_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show source</a> ]</p>
  <div id="M000090_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 192</span>
192:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_attributes_with_empty_attr</span>
193:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;img alt='' src='/foo.png' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%img{:src =&gt; '/foo.png', :alt =&gt; ''}&quot;</span>))
194:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000179" class="method">
  <div id="M000179_title" class="title">
    <b>test_static_hashes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000179_source')" id="l_M000179_source">show source</a> ]</p>
  <div id="M000179_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1096</span>
1096:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_hashes</span>
1097:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a =&amp;gt; b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a =&gt; b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1098:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a, b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:b =&gt; 'a, b'}&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1099:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\tb'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\tb&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1100:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a b='a\#{foo}b'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%a{:b =&gt; &quot;a\\#{foo}b&quot;}'</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1101:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000142" class="method">
  <div id="M000142_title" class="title">
    <b>test_stop_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000142_source')" id="l_M000142_source">show source</a> ]</p>
  <div id="M000142_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 788</span>
788:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_stop_eval</span>
789:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 'Hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
790:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_concat 'foo'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
791:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' yes='no' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no'}/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
792:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='foo' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#foo{:yes =&gt; 'no', :call =&gt; a_function() }/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
793:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div[1]/&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
794:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:ruby\n  Kernel.puts 'hello'&quot;</span>, <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
795:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000127" class="method">
  <div id="M000127_title" class="title">
    <b>test_string_double_equals_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show source</a> ]</p>
  <div id="M000127_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 694</span>
694:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_double_equals_should_be_esaped</span>
695:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
696:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
697:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000132" class="method">
  <div id="M000132_title" class="title">
    <b>test_string_interpolation_should_be_esaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show source</a> ]</p>
  <div id="M000132_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 719</span>
719:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_string_interpolation_should_be_esaped</span>
720:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&amp;lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
721:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
722:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000080" class="method">
  <div id="M000080_title" class="title">
    <b>test_strings_should_get_stripped_inside_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show source</a> ]</p>
  <div id="M000080_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 145</span>
145:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_strings_should_get_stripped_inside_tags</span>
146:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='stripped'&gt;This should have no spaces in front of it&lt;/div&gt;&quot;</span>,
147:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.stripped    This should have no spaces in front of it&quot;</span>).<span class="ruby-identifier">chomp</span>)
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000089" class="method">
  <div id="M000089_title" class="title">
    <b>test_tag_with_failed_if_should_render_as_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show source</a> ]</p>
  <div id="M000089_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tag_with_failed_if_should_render_as_empty</span>
189:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 'Hello' if false&quot;</span>))
190:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000096" class="method">
  <div id="M000096_title" class="title">
    <b>test_textareas</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show source</a> ]</p>
  <div id="M000096_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 231</span>
231:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_textareas</span>
232:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;textarea&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/textarea&gt;\n&quot;</span>,
233:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%textarea= &quot;Foo\n  bar\n   baz&quot;'</span>))
234: 
235:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;  bar&amp;#x000A;   baz&lt;/pre&gt;\n&quot;</span>,
236:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%pre= &quot;Foo\n  bar\n   baz&quot;'</span>))
237: 
238:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;textarea&gt;#{'a' * 100}&lt;/textarea&gt;\n&quot;</span>,
239:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%textarea #{'a' * 100}&quot;</span>))
240: 
241:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;textarea&gt;Foo\n  Bar\n  Baz&lt;/textarea&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %textarea\n    Foo\n    Bar\n    Baz\n&quot;</span>))
242:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000194" class="method">
  <div id="M000194_title" class="title">
    <b>test_truthy_new_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000194_source')" id="l_M000194_source">show source</a> ]</p>
  <div id="M000194_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1196</span>
1196:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_truthy_new_attributes</span>
1197:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href) bar&quot;</span>))
1198:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a bar='baz' href&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href bar='baz') bar&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html5</span>))
1199:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='href'&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=true) bar&quot;</span>))
1200:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;bar&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href=false) bar&quot;</span>))
1201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000160" class="method">
  <div id="M000160_title" class="title">
    <b>test_ugly_filter</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show source</a> ]</p>
  <div id="M000160_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 970</span>
970:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_filter</span>
971:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;#foo {\n  bar: baz; }\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;:sass\n  #foo\n    bar: baz&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
972:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000175" class="method">
  <div id="M000175_title" class="title">
    <b>test_ugly_true</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000175_source')" id="l_M000175_source">show source</a> ]</p>
  <div id="M000175_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1069</span>
1069:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ugly_true</span>
1070:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div id='outer'&gt;\n&lt;div id='inner'&gt;\n&lt;p&gt;hello world&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&quot;</span>,
1071:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;#outer\n  #inner\n    %p hello world&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1072: 
1073:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
1074:                  <span class="ruby-identifier">render</span>(<span class="ruby-node">&quot;%p #{'s' * 75}&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1075: 
1076:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'s' * 75}&lt;/p&gt;\n&quot;</span>,
1077:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= 's' * 75&quot;</span>, <span class="ruby-identifier">:ugly</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
1078:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000157" class="method">
  <div id="M000157_title" class="title">
    <b>test_unbalanced_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show source</a> ]</p>
  <div id="M000157_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 948</span>
948:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unbalanced_brackets</span>
949:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">'foo #{1 + 5} foo #{6 + 7 bar #{8 + 9}'</span>)
950:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
951:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Unbalanced brackets.&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
952:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000129" class="method">
  <div id="M000129_title" class="title">
    <b>test_unescaped_inline_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show source</a> ]</p>
  <div id="M000129_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 704</span>
704:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_double_equals</span>
705:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
706:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p!== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
707:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000134" class="method">
  <div id="M000134_title" class="title">
    <b>test_unescaped_inline_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000134_source')" id="l_M000134_source">show source</a> ]</p>
  <div id="M000134_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 729</span>
729:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_inline_string_interpolation</span>
730:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
731:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;4&amp;&lt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
732:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000131" class="method">
  <div id="M000131_title" class="title">
    <b>test_unescaped_string_double_equals</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show source</a> ]</p>
  <div id="M000131_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 714</span>
714:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_double_equals</span>
715:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
716:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  !== \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
717:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000136" class="method">
  <div id="M000136_title" class="title">
    <b>test_unescaped_string_interpolation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000136_source')" id="l_M000136_source">show source</a> ]</p>
  <div id="M000136_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 739</span>
739:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unescaped_string_interpolation</span>
740:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
741:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  4&amp;&lt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  ! \#{2+2}&amp;\#{'&lt;'}&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>))
742:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000181" class="method">
  <div id="M000181_title" class="title">
    <b>test_utf8_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000181_source')" id="l_M000181_source">show source</a> ]</p>
  <div id="M000181_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1107</span>
1107:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_utf8_attrs</span>
1108:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='héllo'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a{:href =&gt; 'héllo'}&quot;</span>))
1109:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a href='héllo'&gt;&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a(href='héllo')&quot;</span>))
1110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000100" class="method">
  <div id="M000100_title" class="title">
    <b>test_whitespace_nuke_with_both_newlines</b>()
  </div>
  <div class="description">
  <p>
Regression tests
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show source</a> ]</p>
  <div id="M000100_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 292</span>
292:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_both_newlines</span>
293:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;foo&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">'%p&lt;= &quot;\nfoo\n&quot;'</span>))
294:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;p&gt;foo&lt;/p&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %p&lt;= \&quot;\\\\nfoo\\\\n\&quot;\n&quot;</span>))
295:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000101" class="method">
  <div id="M000101_title" class="title">
    <b>test_whitespace_nuke_with_tags_and_else</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show source</a> ]</p>
  <div id="M000101_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 306</span>
306:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nuke_with_tags_and_else</span>
307:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;foo&lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b&lt;\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
308: 
309:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;a&gt;\n  &lt;b&gt;\n    foo\n  &lt;/b&gt;\n&lt;/a&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a\n  %b\n    - if false\n      = \&quot;foo\&quot;\n    - else\n      foo\n&quot;</span>))
310:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000177" class="method">
  <div id="M000177_title" class="title">
    <b>test_xhtml_output_option</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000177_source')" id="l_M000177_source">show source</a> ]</p>
  <div id="M000177_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1087</span>
1087:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xhtml_output_option</span>
1088:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;\n  &lt;br /&gt;\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p\n  %br&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1089:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%a/&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:xhtml</span>)
1090:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000187" class="method">
  <div id="M000187_title" class="title">
    <b>test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</b>()
  </div>
  <div class="description">
  <p>
because anything before the doctype triggers quirks mode in IE
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000187_source')" id="l_M000187_source">show source</a> ]</p>
  <div id="M000187_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1140</span>
1140:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_prolog_and_doctype_dont_result_in_a_leading_whitespace_in_html</span>
1141:     <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/^\s+/</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;!!! xml\n!!!&quot;</span>, <span class="ruby-identifier">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:html4</span>))
1142:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000166" class="method">
  <div id="M000166_title" class="title">
    <b>test_yield_should_work_with_binding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000166_source')" id="l_M000166_source">show source</a> ]</p>
  <div id="M000166_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1013</span>
1013:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_binding</span>
1014:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>, <span class="ruby-identifier">:scope</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;foo&quot;</span>.<span class="ruby-identifier">instance_eval</span>{<span class="ruby-identifier">binding</span>}) { <span class="ruby-value">12</span> })
1015:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000167" class="method">
  <div id="M000167_title" class="title">
    <b>test_yield_should_work_with_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000167_source')" id="l_M000167_source">show source</a> ]</p>
  <div id="M000167_source" class="dyn-source">
<pre>
      <span class="ruby-comment cmt"># File test/haml/engine_test.rb, line 1017</span>
1017:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_yield_should_work_with_def_method</span>
1018:     <span class="ruby-identifier">s</span> = <span class="ruby-value str">&quot;foo&quot;</span>
1019:     <span class="ruby-identifier">engine</span>(<span class="ruby-value str">&quot;= yield\n= upcase&quot;</span>).<span class="ruby-identifier">def_method</span>(<span class="ruby-identifier">s</span>, <span class="ruby-identifier">:render</span>)
1020:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;12\nFOO\n&quot;</span>, <span class="ruby-identifier">s</span>.<span class="ruby-identifier">render</span> { <span class="ruby-value">12</span> })
1021:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>