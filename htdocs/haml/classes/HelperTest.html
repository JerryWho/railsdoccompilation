  <div id="C00000003">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />HelperTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/helper_test_rb.html');">test/haml/helper_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000033&name=render" >render</a></li>
  <li><a href="index.html?a=M000032&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000039&name=test_action_view_included" >test_action_view_included</a></li>
  <li><a href="index.html?a=M000036&name=test_buffer_access" >test_buffer_access</a></li>
  <li><a href="index.html?a=M000054&name=test_capture_deals_properly_with_collections" >test_capture_deals_properly_with_collections</a></li>
  <li><a href="index.html?a=M000042&name=test_capture_haml" >test_capture_haml</a></li>
  <li><a href="index.html?a=M000066&name=test_capture_with_nuke_outer" >test_capture_with_nuke_outer</a></li>
  <li><a href="index.html?a=M000043&name=test_content_tag_block" >test_content_tag_block</a></li>
  <li><a href="index.html?a=M000061&name=test_content_tag_nested" >test_content_tag_nested</a></li>
  <li><a href="index.html?a=M000062&name=test_error_return" >test_error_return</a></li>
  <li><a href="index.html?a=M000063&name=test_error_return_line" >test_error_return_line</a></li>
  <li><a href="index.html?a=M000064&name=test_error_return_line_in_helper" >test_error_return_line_in_helper</a></li>
  <li><a href="index.html?a=M000056&name=test_find_and_preserve_with_block" >test_find_and_preserve_with_block</a></li>
  <li><a href="index.html?a=M000057&name=test_find_and_preserve_with_block_and_tags" >test_find_and_preserve_with_block_and_tags</a></li>
  <li><a href="index.html?a=M000034&name=test_flatten" >test_flatten</a></li>
  <li><a href="index.html?a=M000040&name=test_form_tag" >test_form_tag</a></li>
  <li><a href="index.html?a=M000044&name=test_haml_tag_attribute_html_escaping" >test_haml_tag_attribute_html_escaping</a></li>
  <li><a href="index.html?a=M000045&name=test_haml_tag_autoclosed_tags_are_closed" >test_haml_tag_autoclosed_tags_are_closed</a></li>
  <li><a href="index.html?a=M000050&name=test_haml_tag_error_return" >test_haml_tag_error_return</a></li>
  <li><a href="index.html?a=M000049&name=test_haml_tag_flags" >test_haml_tag_flags</a></li>
  <li><a href="index.html?a=M000046&name=test_haml_tag_non_autoclosed_tags_arent_closed" >test_haml_tag_non_autoclosed_tags_arent_closed</a></li>
  <li><a href="index.html?a=M000048&name=test_haml_tag_raises_error_for_multiple_content" >test_haml_tag_raises_error_for_multiple_content</a></li>
  <li><a href="index.html?a=M000047&name=test_haml_tag_renders_text_on_a_single_line" >test_haml_tag_renders_text_on_a_single_line</a></li>
  <li><a href="index.html?a=M000038&name=test_helpers_dont_leak" >test_helpers_dont_leak</a></li>
  <li><a href="index.html?a=M000053&name=test_indented_capture" >test_indented_capture</a></li>
  <li><a href="index.html?a=M000059&name=test_init_haml_helpers" >test_init_haml_helpers</a></li>
  <li><a href="index.html?a=M000051&name=test_is_haml" >test_is_haml</a></li>
  <li><a href="index.html?a=M000035&name=test_list_of_should_render_correctly" >test_list_of_should_render_correctly</a></li>
  <li><a href="index.html?a=M000060&name=test_non_haml" >test_non_haml</a></li>
  <li><a href="index.html?a=M000052&name=test_page_class" >test_page_class</a></li>
  <li><a href="index.html?a=M000058&name=test_preserve_with_block" >test_preserve_with_block</a></li>
  <li><a href="index.html?a=M000065&name=test_random_class_includes_tag_helper" >test_random_class_includes_tag_helper</a></li>
  <li><a href="index.html?a=M000037&name=test_tabs" >test_tabs</a></li>
  <li><a href="index.html?a=M000041&name=test_text_area" >test_text_area</a></li>
  <li><a href="index.html?a=M000055&name=trc" >trc</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/HelperTest/ActsLikeTag.html');" class="link">HelperTest::ActsLikeTag</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">Post</td>
    <td>=</td>
    <td class="attr-value">Struct.new('Post', :body)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000033" class="method">
  <div id="M000033_title" class="title">
    <b>render</b>(text, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000033_source')" id="l_M000033_source">show source</a> ]</p>
  <div id="M000033_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 32</span>
32:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
33:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:action_view</span>
34:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span> <span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">text</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:haml</span>
35:     <span class="ruby-keyword kw">else</span>
36:       <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">:scope_object</span>
37:       <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">scope</span> <span class="ruby-value">? </span><span class="ruby-identifier">scope</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>)
38:     <span class="ruby-keyword kw">end</span>
39:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000032" class="method">
  <div id="M000032_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000032_source')" id="l_M000032_source">show source</a> ]</p>
  <div id="M000032_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
21:     <span class="ruby-ivar">@base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
22:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">controller</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
23: 
24:     <span class="ruby-keyword kw">if</span> <span class="ruby-keyword kw">defined?</span>(<span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Response</span>)
25:       <span class="ruby-comment cmt"># This is needed for &gt;=3.0.0</span>
26:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">controller</span>.<span class="ruby-identifier">response</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Response</span>.<span class="ruby-identifier">new</span>
27:     <span class="ruby-keyword kw">end</span>
28: 
29:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">'@post'</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Foo bar\nbaz&quot;</span>))
30:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000039" class="method">
  <div id="M000039_title" class="title">
    <b>test_action_view_included</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000039_source')" id="l_M000039_source">show source</a> ]</p>
  <div id="M000039_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_view_included</span>
90:     <span class="ruby-identifier">assert</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">action_view?</span>)
91:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000036" class="method">
  <div id="M000036_title" class="title">
    <b>test_buffer_access</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000036_source')" id="l_M000036_source">show source</a> ]</p>
  <div id="M000036_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 59</span>
59:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_buffer_access</span>
60:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= buffer&quot;</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/#&lt;Haml::Buffer:0x[a-z0-9]+&gt;/</span>)
61:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= (buffer == _hamlout)&quot;</span>), <span class="ruby-value str">&quot;true\n&quot;</span>)
62:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000054" class="method">
  <div id="M000054_title" class="title">
    <b>test_capture_deals_properly_with_collections</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000054_source')" id="l_M000054_source">show source</a> ]</p>
  <div id="M000054_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 182</span>
182:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_capture_deals_properly_with_collections</span>
183:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-keyword kw">do</span> 
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trc</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
185:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span>
186:           <span class="ruby-identifier">haml_concat</span> <span class="ruby-identifier">capture_haml</span>(<span class="ruby-identifier">record</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
187:         <span class="ruby-keyword kw">end</span>
188:       <span class="ruby-keyword kw">end</span>
189:     <span class="ruby-keyword kw">end</span>
190: 
191:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;1\n\n2\n\n3\n\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- trc([1, 2, 3]) do |i|\n  = i.inspect&quot;</span>))
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000042" class="method">
  <div id="M000042_title" class="title">
    <b>test_capture_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000042_source')" id="l_M000042_source">show source</a> ]</p>
  <div id="M000042_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_capture_haml</span>
113:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\&quot;&lt;p&gt;13&lt;/p&gt;\\n\&quot;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- foo = capture_haml(13) do |a|\n  %p= a\n= foo.dump&quot;</span>))
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000066" class="method">
  <div id="M000066_title" class="title">
    <b>test_capture_with_nuke_outer</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show source</a> ]</p>
  <div id="M000066_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_capture_with_nuke_outer</span>
271:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;&lt;/div&gt;\n*&lt;div&gt;hi there!&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div\n= precede(\&quot;*\&quot;) do\n  %div&gt; hi there!\n&quot;</span>)
272: 
273:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;&lt;/div&gt;\n*&lt;div&gt;hi there!&lt;/div&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div\n= precede(\&quot;*\&quot;) do\n  = \&quot;  \&quot;\n  %div&gt; hi there!\n&quot;</span>)
274:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000043" class="method">
  <div id="M000043_title" class="title">
    <b>test_content_tag_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000043_source')" id="l_M000043_source">show source</a> ]</p>
  <div id="M000043_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 116</span>
116:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content_tag_block</span>
117:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div&gt;&lt;p&gt;bar&lt;/p&gt;\n&lt;strong&gt;bar&lt;/strong&gt;\n&lt;/div&gt;\n&quot;</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- content_tag :div do\n  %p bar\n  %strong bar\n&quot;</span>, <span class="ruby-identifier">:action_view</span>))
118:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000061" class="method">
  <div id="M000061_title" class="title">
    <b>test_content_tag_nested</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000061_source')" id="l_M000061_source">show source</a> ]</p>
  <div id="M000061_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 229</span>
229:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content_tag_nested</span>
230:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;&lt;div&gt;something&lt;/div&gt;&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= nested_tag&quot;</span>, <span class="ruby-identifier">:action_view</span>).<span class="ruby-identifier">strip</span>
231:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000062" class="method">
  <div id="M000062_title" class="title">
    <b>test_error_return</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show source</a> ]</p>
  <div id="M000062_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 233</span>
233:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_error_return</span>
234:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>, <span class="ruby-value str">&quot;haml_concat outputs directly to the Haml template.\nDisregard its return value and use the - operator,\nor use capture_haml to get the value as a String.\n&quot;</span>) {<span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= haml_concat 'foo'&quot;</span>)}
235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000063" class="method">
  <div id="M000063_title" class="title">
    <b>test_error_return_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show source</a> ]</p>
  <div id="M000063_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 242</span>
242:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_error_return_line</span>
243:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p foo\n= haml_concat 'foo'\n%p bar&quot;</span>)
244:     <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected Haml::Error&quot;</span>
245:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
246:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/:(\d+)/</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_i</span>
247:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000064" class="method">
  <div id="M000064_title" class="title">
    <b>test_error_return_line_in_helper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show source</a> ]</p>
  <div id="M000064_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 249</span>
249:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_error_return_line_in_helper</span>
250:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- something_that_uses_haml_concat&quot;</span>)
251:     <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-value str">&quot;Expected Haml::Error&quot;</span>
252:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
253:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">13</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/:(\d+)/</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_i</span>
254:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000056" class="method">
  <div id="M000056_title" class="title">
    <b>test_find_and_preserve_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000056_source')" id="l_M000056_source">show source</a> ]</p>
  <div id="M000056_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_and_preserve_with_block</span>
195:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;Bar&lt;/pre&gt;\nFoo\nBar\n&quot;</span>,
196:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= find_and_preserve do\n  %pre\n    Foo\n    Bar\n  Foo\n  Bar&quot;</span>))
197:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000057" class="method">
  <div id="M000057_title" class="title">
    <b>test_find_and_preserve_with_block_and_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000057_source')" id="l_M000057_source">show source</a> ]</p>
  <div id="M000057_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 199</span>
199:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_and_preserve_with_block_and_tags</span>
200:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo\nBar&lt;/pre&gt;\nFoo\nBar\n&quot;</span>,
201:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= find_and_preserve([]) do\n  %pre\n    Foo\n    Bar\n  Foo\n  Bar&quot;</span>))
202:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000034" class="method">
  <div id="M000034_title" class="title">
    <b>test_flatten</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000034_source')" id="l_M000034_source">show source</a> ]</p>
  <div id="M000034_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 41</span>
41:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flatten</span>
42:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>))
43: 
44:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Foo\rBar&quot;</span>))
45: 
46:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo&amp;#x000A;Bar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Foo\nBar&quot;</span>))
47: 
48:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Hello&amp;#x000A;World!&amp;#x000A;YOU ARE FLAT?&amp;#x000A;OMGZ!&quot;</span>,
49:       <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Hello\nWorld!\nYOU ARE \rFLAT?\n\rOMGZ!&quot;</span>))
50:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000040" class="method">
  <div id="M000040_title" class="title">
    <b>test_form_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000040_source')" id="l_M000040_source">show source</a> ]</p>
  <div id="M000040_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 93</span>
93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_form_tag</span>
94:     <span class="ruby-comment cmt"># This is usually provided by ActionController::Base.</span>
95:     <span class="ruby-keyword kw">def</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">protect_against_forgery?</span>; <span class="ruby-keyword kw">false</span>; <span class="ruby-keyword kw">end</span>
96:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- form_tag 'foo' do\n  %p bar\n  %strong baz&quot;</span>, <span class="ruby-identifier">:action_view</span>)
97:     <span class="ruby-identifier">should_be</span> = <span class="ruby-value str">&quot;&lt;form action=\&quot;foo\&quot; method=\&quot;post\&quot;&gt;\n  &lt;p&gt;bar&lt;/p&gt;\n  &lt;strong&gt;baz&lt;/strong&gt;\n&lt;/form&gt;\n&quot;</span>
98:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">should_be</span>, <span class="ruby-identifier">result</span>)
99:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000044" class="method">
  <div id="M000044_title" class="title">
    <b>test_haml_tag_attribute_html_escaping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000044_source')" id="l_M000044_source">show source</a> ]</p>
  <div id="M000044_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_attribute_html_escaping</span>
131:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo&amp;amp;bar'&gt;baz&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; 'foo&amp;bar'} baz&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000045" class="method">
  <div id="M000045_title" class="title">
    <b>test_haml_tag_autoclosed_tags_are_closed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000045_source')" id="l_M000045_source">show source</a> ]</p>
  <div id="M000045_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_autoclosed_tags_are_closed</span>
135:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;br class='foo' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :br, :class =&gt; 'foo'&quot;</span>))
136:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000050" class="method">
  <div id="M000050_title" class="title">
    <b>test_haml_tag_error_return</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000050_source')" id="l_M000050_source">show source</a> ]</p>
  <div id="M000050_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 158</span>
158:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_error_return</span>
159:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= haml_tag :p&quot;</span>) }
160:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000049" class="method">
  <div id="M000049_title" class="title">
    <b>test_haml_tag_flags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000049_source')" id="l_M000049_source">show source</a> ]</p>
  <div id="M000049_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 150</span>
150:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_flags</span>
151:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :/&quot;</span>))
152:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;kumquat&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :&lt; do\n  kumquat&quot;</span>))
153: 
154:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'foo', :/&quot;</span>) }
155:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :/ do\n  foo&quot;</span>) }
156:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000046" class="method">
  <div id="M000046_title" class="title">
    <b>test_haml_tag_non_autoclosed_tags_arent_closed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000046_source')" id="l_M000046_source">show source</a> ]</p>
  <div id="M000046_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_non_autoclosed_tags_arent_closed</span>
139:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p&quot;</span>))
140:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000048" class="method">
  <div id="M000048_title" class="title">
    <b>test_haml_tag_raises_error_for_multiple_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000048_source')" id="l_M000048_source">show source</a> ]</p>
  <div id="M000048_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_raises_error_for_multiple_content</span>
147:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'foo' do\n  bar&quot;</span>) }
148:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000047" class="method">
  <div id="M000047_title" class="title">
    <b>test_haml_tag_renders_text_on_a_single_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000047_source')" id="l_M000047_source">show source</a> ]</p>
  <div id="M000047_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_renders_text_on_a_single_line</span>
143:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'a' * 100}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'a' * 100&quot;</span>))
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000038" class="method">
  <div id="M000038_title" class="title">
    <b>test_helpers_dont_leak</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000038_source')" id="l_M000038_source">show source</a> ]</p>
  <div id="M000038_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 69</span>
69:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_helpers_dont_leak</span>
70:     <span class="ruby-comment cmt"># Haml helpers shouldn't be accessible from ERB</span>
71:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
72:     <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">false</span>
73: 
74:     <span class="ruby-keyword kw">begin</span>
75:       <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&lt;%= flatten('Foo\\nBar') %&gt;&quot;</span>)
76:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>, <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">TemplateError</span>
77:       <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">true</span>
78:     <span class="ruby-keyword kw">end</span>
79:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">proper_behavior</span>)
80: 
81:     <span class="ruby-keyword kw">begin</span>
82:       <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&lt;%= concat('foo') %&gt;&quot;</span>)
83:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-constant">NameError</span>
84:       <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">true</span>
85:     <span class="ruby-keyword kw">end</span>    
86:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">proper_behavior</span>)
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000053" class="method">
  <div id="M000053_title" class="title">
    <b>test_indented_capture</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000053_source')" id="l_M000053_source">show source</a> ]</p>
  <div id="M000053_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_indented_capture</span>
179:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;  \n  Foo\n  &quot;</span>, <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;  &lt;% res = capture do %&gt;\n  Foo\n  &lt;% end %&gt;&lt;%= res %&gt;&quot;</span>))
180:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000059" class="method">
  <div id="M000059_title" class="title">
    <b>test_init_haml_helpers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000059_source')" id="l_M000059_source">show source</a> ]</p>
  <div id="M000059_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 209</span>
209:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_init_haml_helpers</span>
210:     <span class="ruby-identifier">context</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
211:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">context</span>
212:       <span class="ruby-identifier">include</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>
213:     <span class="ruby-keyword kw">end</span>
214:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">init_haml_helpers</span>
215: 
216:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">context</span>.<span class="ruby-identifier">capture_haml</span> <span class="ruby-keyword kw">do</span>
217:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">haml_tag</span> <span class="ruby-identifier">:p</span>, <span class="ruby-identifier">:attr</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;val&quot;</span> <span class="ruby-keyword kw">do</span>
218:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">haml_concat</span> <span class="ruby-value str">&quot;Blah&quot;</span>
219:       <span class="ruby-keyword kw">end</span>
220:     <span class="ruby-keyword kw">end</span>
221: 
222:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr='val'&gt;\n  Blah\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">result</span>)
223:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000051" class="method">
  <div id="M000051_title" class="title">
    <b>test_is_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000051_source')" id="l_M000051_source">show source</a> ]</p>
  <div id="M000051_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_is_haml</span>
163:     <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">is_haml?</span>)
164:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;true\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= is_haml?&quot;</span>))
165:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;true\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= is_haml?&quot;</span>, <span class="ruby-identifier">:action_view</span>))
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&lt;%= is_haml? %&gt;'</span>))
167:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= render :inline =&gt; '&lt;%= is_haml? %&gt;'&quot;</span>, <span class="ruby-identifier">:action_view</span>))
168:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000035" class="method">
  <div id="M000035_title" class="title">
    <b>test_list_of_should_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000035_source')" id="l_M000035_source">show source</a> ]</p>
  <div id="M000035_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 52</span>
52:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_list_of_should_render_correctly</span>
53:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;1&lt;/li&gt;\n&lt;li&gt;2&lt;/li&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of([1, 2]) do |i|\n  = i&quot;</span>))
54:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;[1]&lt;/li&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of([[1]]) do |i|\n  = i.inspect&quot;</span>))
55:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;\n  &lt;h1&gt;Fee&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fi&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fo&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fum&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&quot;</span>,
56:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of(['Fee', 'Fi', 'Fo', 'Fum']) do |title|\n  %h1= title\n  %p A word!&quot;</span>))
57:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000060" class="method">
  <div id="M000060_title" class="title">
    <b>test_non_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000060_source')" id="l_M000060_source">show source</a> ]</p>
  <div id="M000060_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 225</span>
225:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_haml</span>
226:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= non_haml { is_haml? }&quot;</span>))
227:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000052" class="method">
  <div id="M000052_title" class="title">
    <b>test_page_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000052_source')" id="l_M000052_source">show source</a> ]</p>
  <div id="M000052_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_page_class</span>
171:     <span class="ruby-identifier">controller</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller_name</span>, <span class="ruby-identifier">:action_name</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'troller'</span>, <span class="ruby-value str">'tion'</span>)
172:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">controller</span>)
173:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:class =&gt; page_class} MyDiv&quot;</span>, <span class="ruby-identifier">:scope_object</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scope</span>)
174:     <span class="ruby-identifier">expected</span> = <span class="ruby-value str">&quot;&lt;div class='troller tion'&gt;MyDiv&lt;/div&gt;\n&quot;</span>
175:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">result</span>
176:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000058" class="method">
  <div id="M000058_title" class="title">
    <b>test_preserve_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000058_source')" id="l_M000058_source">show source</a> ]</p>
  <div id="M000058_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 204</span>
204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserve_with_block</span>
205:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;Bar&lt;/pre&gt;&amp;#x000A;Foo&amp;#x000A;Bar\n&quot;</span>,
206:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= preserve do\n  %pre\n    Foo\n    Bar\n  Foo\n  Bar&quot;</span>))
207:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000065" class="method">
  <div id="M000065_title" class="title">
    <b>test_random_class_includes_tag_helper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show source</a> ]</p>
  <div id="M000065_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 266</span>
266:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_random_class_includes_tag_helper</span>
267:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;some tag content&lt;/p&gt;&quot;</span>, <span class="ruby-constant">ActsLikeTag</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span>
268:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000037" class="method">
  <div id="M000037_title" class="title">
    <b>test_tabs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000037_source')" id="l_M000037_source">show source</a> ]</p>
  <div id="M000037_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 64</span>
64:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tabs</span>
65:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n  bar\nbaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;foo\n- tab_up\nbar\n- tab_down\nbaz&quot;</span>))
66:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;          &lt;p&gt;tabbed&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- buffer.tabulation=5\n%p tabbed&quot;</span>))
67:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000041" class="method">
  <div id="M000041_title" class="title">
    <b>test_text_area</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000041_source')" id="l_M000041_source">show source</a> ]</p>
  <div id="M000041_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_text_area</span><span class="ruby-identifier">test_text_area</span>
102:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;textarea id=&quot;body&quot; name=&quot;body&quot;&gt;Foo&amp;#x000A;Bar&amp;#x000A; Baz&amp;#x000A;   Boom&lt;/textarea&gt;\n)</span>,
103:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= text_area_tag &quot;body&quot;, &quot;Foo\nBar\n Baz\n   Boom&quot;'</span>, <span class="ruby-identifier">:action_view</span>))
104: 
105:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;textarea cols=&quot;40&quot; id=&quot;post_body&quot; name=&quot;post[body]&quot; rows=&quot;20&quot;&gt;Foo bar&amp;#x000A;baz&lt;/textarea&gt;\n)</span>,
106:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= text_area :post, :body'</span>, <span class="ruby-identifier">:action_view</span>))    
107: 
108:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;pre&gt;Foo bar&amp;#x000A;   baz&lt;/pre&gt;\n)</span>,
109:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= content_tag &quot;pre&quot;, &quot;Foo bar\n   baz&quot;'</span>, <span class="ruby-identifier">:action_view</span>))    
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000055" class="method">
  <div id="M000055_title" class="title">
    <b>trc</b>(collection, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000055_source')" id="l_M000055_source">show source</a> ]</p>
  <div id="M000055_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 184</span>
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trc</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
185:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span>
186:           <span class="ruby-identifier">haml_concat</span> <span class="ruby-identifier">capture_haml</span>(<span class="ruby-identifier">record</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
187:         <span class="ruby-keyword kw">end</span>
188:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>