  <div id="C00000001">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />HelperTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/helper_test_rb.html');">test/haml/helper_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000004&name=render" >render</a></li>
  <li><a href="index.html?a=M000003&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000010&name=test_action_view_included" >test_action_view_included</a></li>
  <li><a href="index.html?a=M000007&name=test_buffer_access" >test_buffer_access</a></li>
  <li><a href="index.html?a=M000024&name=test_capture_deals_properly_with_collections" >test_capture_deals_properly_with_collections</a></li>
  <li><a href="index.html?a=M000013&name=test_capture_haml" >test_capture_haml</a></li>
  <li><a href="index.html?a=M000014&name=test_content_tag_block" >test_content_tag_block</a></li>
  <li><a href="index.html?a=M000030&name=test_content_tag_nested" >test_content_tag_nested</a></li>
  <li><a href="index.html?a=M000026&name=test_find_and_preserve_with_block" >test_find_and_preserve_with_block</a></li>
  <li><a href="index.html?a=M000005&name=test_flatten" >test_flatten</a></li>
  <li><a href="index.html?a=M000011&name=test_form_tag" >test_form_tag</a></li>
  <li><a href="index.html?a=M000015&name=test_haml_tag_attribute_html_escaping" >test_haml_tag_attribute_html_escaping</a></li>
  <li><a href="index.html?a=M000016&name=test_haml_tag_autoclosed_tags_are_closed" >test_haml_tag_autoclosed_tags_are_closed</a></li>
  <li><a href="index.html?a=M000020&name=test_haml_tag_flags" >test_haml_tag_flags</a></li>
  <li><a href="index.html?a=M000017&name=test_haml_tag_non_autoclosed_tags_arent_closed" >test_haml_tag_non_autoclosed_tags_arent_closed</a></li>
  <li><a href="index.html?a=M000019&name=test_haml_tag_raises_error_for_multiple_content" >test_haml_tag_raises_error_for_multiple_content</a></li>
  <li><a href="index.html?a=M000018&name=test_haml_tag_renders_text_on_a_single_line" >test_haml_tag_renders_text_on_a_single_line</a></li>
  <li><a href="index.html?a=M000009&name=test_helpers_dont_leak" >test_helpers_dont_leak</a></li>
  <li><a href="index.html?a=M000023&name=test_indented_capture" >test_indented_capture</a></li>
  <li><a href="index.html?a=M000028&name=test_init_haml_helpers" >test_init_haml_helpers</a></li>
  <li><a href="index.html?a=M000021&name=test_is_haml" >test_is_haml</a></li>
  <li><a href="index.html?a=M000006&name=test_list_of_should_render_correctly" >test_list_of_should_render_correctly</a></li>
  <li><a href="index.html?a=M000029&name=test_non_haml" >test_non_haml</a></li>
  <li><a href="index.html?a=M000022&name=test_page_class" >test_page_class</a></li>
  <li><a href="index.html?a=M000027&name=test_preserve_with_block" >test_preserve_with_block</a></li>
  <li><a href="index.html?a=M000031&name=test_random_class_includes_tag_helper" >test_random_class_includes_tag_helper</a></li>
  <li><a href="index.html?a=M000008&name=test_tabs" >test_tabs</a></li>
  <li><a href="index.html?a=M000012&name=test_text_area" >test_text_area</a></li>
  <li><a href="index.html?a=M000025&name=trc" >trc</a></li>
  </ul>



  <div class="sectiontitle">Classes and Modules</div>
  Class "<a href="#" onclick="jsHref('classes/HelperTest/ActsLikeTag.html');" class="link">HelperTest::ActsLikeTag</a>"<br />


  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">Post</td>
    <td>=</td>
    <td class="attr-value">Struct.new('Post', :body)</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000004" class="method">
  <div id="M000004_title" class="title">
    <b>render</b>(text, options = {})
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000004_source')" id="l_M000004_source">show source</a> ]</p>
  <div id="M000004_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 20</span>
20:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span> = {})
21:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">options</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:action_view</span>
22:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span> <span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">text</span>, <span class="ruby-identifier">:type</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:haml</span>
23:     <span class="ruby-keyword kw">else</span>
24:       <span class="ruby-identifier">scope</span> = <span class="ruby-identifier">options</span>.<span class="ruby-identifier">delete</span> <span class="ruby-identifier">:scope_object</span>
25:       <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>, <span class="ruby-identifier">options</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">scope</span> <span class="ruby-value">? </span><span class="ruby-identifier">scope</span> <span class="ruby-operator">:</span> <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>)
26:     <span class="ruby-keyword kw">end</span>
27:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000003" class="method">
  <div id="M000003_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000003_source')" id="l_M000003_source">show source</a> ]</p>
  <div id="M000003_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
15:     <span class="ruby-ivar">@base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
16:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">controller</span> = <span class="ruby-constant">ActionController</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>
17:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">'@post'</span>, <span class="ruby-constant">Post</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;Foo bar\nbaz&quot;</span>))
18:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000010" class="method">
  <div id="M000010_title" class="title">
    <b>test_action_view_included</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000010_source')" id="l_M000010_source">show source</a> ]</p>
  <div id="M000010_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 77</span>
77:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_view_included</span>
78:     <span class="ruby-identifier">assert</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">action_view?</span>)
79:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000007" class="method">
  <div id="M000007_title" class="title">
    <b>test_buffer_access</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000007_source')" id="l_M000007_source">show source</a> ]</p>
  <div id="M000007_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 47</span>
47:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_buffer_access</span>
48:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= buffer&quot;</span>) <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/#&lt;Haml::Buffer:0x[a-z0-9]+&gt;/</span>)
49:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= (buffer == _hamlout)&quot;</span>), <span class="ruby-value str">&quot;true\n&quot;</span>)
50:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000024" class="method">
  <div id="M000024_title" class="title">
    <b>test_capture_deals_properly_with_collections</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000024_source')" id="l_M000024_source">show source</a> ]</p>
  <div id="M000024_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 166</span>
166:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_capture_deals_properly_with_collections</span>
167:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">module_eval</span> <span class="ruby-keyword kw">do</span> 
168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trc</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
169:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span>
170:           <span class="ruby-identifier">haml_concat</span> <span class="ruby-identifier">capture_haml</span>(<span class="ruby-identifier">record</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
171:         <span class="ruby-keyword kw">end</span>
172:       <span class="ruby-keyword kw">end</span>
173:     <span class="ruby-keyword kw">end</span>
174: 
175:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;1\n\n2\n\n3\n\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- trc([1, 2, 3]) do |i|\n  = i.inspect&quot;</span>))
176:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000013" class="method">
  <div id="M000013_title" class="title">
    <b>test_capture_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000013_source')" id="l_M000013_source">show source</a> ]</p>
  <div id="M000013_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 100</span>
100:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_capture_haml</span>
101:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;\&quot;&lt;p&gt;13&lt;/p&gt;\\n\&quot;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- foo = capture_haml(13) do |a|\n  %p= a\n= foo.dump&quot;</span>))
102:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000014" class="method">
  <div id="M000014_title" class="title">
    <b>test_content_tag_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000014_source')" id="l_M000014_source">show source</a> ]</p>
  <div id="M000014_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 104</span>
104:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content_tag_block</span>
105:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div&gt;&lt;p&gt;bar&lt;/p&gt;\n&lt;strong&gt;bar&lt;/strong&gt;\n&lt;/div&gt;\n&quot;</span>.<span class="ruby-identifier">strip</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- content_tag :div do\n  %p bar\n  %strong bar\n&quot;</span>, <span class="ruby-identifier">:action_view</span>))
106:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000030" class="method">
  <div id="M000030_title" class="title">
    <b>test_content_tag_nested</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000030_source')" id="l_M000030_source">show source</a> ]</p>
  <div id="M000030_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 208</span>
208:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content_tag_nested</span>
209:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;&lt;div&gt;something&lt;/div&gt;&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= nested_tag&quot;</span>, <span class="ruby-identifier">:action_view</span>).<span class="ruby-identifier">strip</span>
210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000026" class="method">
  <div id="M000026_title" class="title">
    <b>test_find_and_preserve_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000026_source')" id="l_M000026_source">show source</a> ]</p>
  <div id="M000026_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_and_preserve_with_block</span>
179:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;Bar&lt;/pre&gt;\nFoo\nBar\n&quot;</span>,
180:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= find_and_preserve do\n  %pre\n    Foo\n    Bar\n  Foo\n  Bar&quot;</span>))
181:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000005" class="method">
  <div id="M000005_title" class="title">
    <b>test_flatten</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000005_source')" id="l_M000005_source">show source</a> ]</p>
  <div id="M000005_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 29</span>
29:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_flatten</span>
30:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>))
31: 
32:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;FooBar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Foo\rBar&quot;</span>))
33: 
34:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Foo&amp;#x000A;Bar&quot;</span>, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Foo\nBar&quot;</span>))
35: 
36:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Hello&amp;#x000A;World!&amp;#x000A;YOU ARE FLAT?&amp;#x000A;OMGZ!&quot;</span>,
37:       <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>.<span class="ruby-identifier">flatten</span>(<span class="ruby-value str">&quot;Hello\nWorld!\nYOU ARE \rFLAT?\n\rOMGZ!&quot;</span>))
38:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000011" class="method">
  <div id="M000011_title" class="title">
    <b>test_form_tag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000011_source')" id="l_M000011_source">show source</a> ]</p>
  <div id="M000011_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 81</span>
81:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_form_tag</span>
82:     <span class="ruby-comment cmt"># This is usually provided by ActionController::Base.</span>
83:     <span class="ruby-keyword kw">def</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">protect_against_forgery?</span>; <span class="ruby-keyword kw">false</span>; <span class="ruby-keyword kw">end</span>
84:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- form_tag 'foo' do\n  %p bar\n  %strong baz&quot;</span>, <span class="ruby-identifier">:action_view</span>)
85:     <span class="ruby-identifier">should_be</span> = <span class="ruby-value str">&quot;&lt;form action=\&quot;foo\&quot; method=\&quot;post\&quot;&gt;\n  &lt;p&gt;bar&lt;/p&gt;\n  &lt;strong&gt;baz&lt;/strong&gt;\n&lt;/form&gt;\n&quot;</span>
86:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">should_be</span>, <span class="ruby-identifier">result</span>)
87:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000015" class="method">
  <div id="M000015_title" class="title">
    <b>test_haml_tag_attribute_html_escaping</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000015_source')" id="l_M000015_source">show source</a> ]</p>
  <div id="M000015_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 118</span>
118:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_attribute_html_escaping</span>
119:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p id='foo&amp;amp;bar'&gt;baz&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:id =&gt; 'foo&amp;bar'} baz&quot;</span>, <span class="ruby-identifier">:escape_html</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>))
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000016" class="method">
  <div id="M000016_title" class="title">
    <b>test_haml_tag_autoclosed_tags_are_closed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000016_source')" id="l_M000016_source">show source</a> ]</p>
  <div id="M000016_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_autoclosed_tags_are_closed</span>
123:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;br class='foo' /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :br, :class =&gt; 'foo'&quot;</span>))
124:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000020" class="method">
  <div id="M000020_title" class="title">
    <b>test_haml_tag_flags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000020_source')" id="l_M000020_source">show source</a> ]</p>
  <div id="M000020_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 138</span>
138:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_flags</span>
139:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p /&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :/&quot;</span>))
140:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;kumquat&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :&lt; do\n  kumquat&quot;</span>))
141: 
142:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'foo', :/&quot;</span>) }
143:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, :/ do\n  foo&quot;</span>) }
144:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000017" class="method">
  <div id="M000017_title" class="title">
    <b>test_haml_tag_non_autoclosed_tags_arent_closed</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000017_source')" id="l_M000017_source">show source</a> ]</p>
  <div id="M000017_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 126</span>
126:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_non_autoclosed_tags_arent_closed</span>
127:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p&quot;</span>))
128:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000019" class="method">
  <div id="M000019_title" class="title">
    <b>test_haml_tag_raises_error_for_multiple_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000019_source')" id="l_M000019_source">show source</a> ]</p>
  <div id="M000019_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_raises_error_for_multiple_content</span>
135:     <span class="ruby-identifier">assert_raise</span>(<span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Error</span>) { <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'foo' do\n  bar&quot;</span>) }
136:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000018" class="method">
  <div id="M000018_title" class="title">
    <b>test_haml_tag_renders_text_on_a_single_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000018_source')" id="l_M000018_source">show source</a> ]</p>
  <div id="M000018_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_tag_renders_text_on_a_single_line</span>
131:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-node">&quot;&lt;p&gt;#{'a' * 100}&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- haml_tag :p, 'a' * 100&quot;</span>))
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000009" class="method">
  <div id="M000009_title" class="title">
    <b>test_helpers_dont_leak</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000009_source')" id="l_M000009_source">show source</a> ]</p>
  <div id="M000009_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_helpers_dont_leak</span>
58:     <span class="ruby-comment cmt"># Haml helpers shouldn't be accessible from ERB</span>
59:     <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
60:     <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">false</span>
61: 
62:     <span class="ruby-keyword kw">begin</span>
63:       <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&lt;%= flatten('Foo\\nBar') %&gt;&quot;</span>)
64:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">NoMethodError</span>
65:       <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">true</span>
66:     <span class="ruby-keyword kw">end</span>
67:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">proper_behavior</span>)
68: 
69:     <span class="ruby-keyword kw">begin</span>
70:       <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;&lt;%= concat('foo') %&gt;&quot;</span>)
71:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-constant">NameError</span>
72:       <span class="ruby-identifier">proper_behavior</span> = <span class="ruby-keyword kw">true</span>
73:     <span class="ruby-keyword kw">end</span>    
74:     <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">proper_behavior</span>)
75:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000023" class="method">
  <div id="M000023_title" class="title">
    <b>test_indented_capture</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000023_source')" id="l_M000023_source">show source</a> ]</p>
  <div id="M000023_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 162</span>
162:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_indented_capture</span>
163:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;  \n  Foo\n  &quot;</span>, <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;  &lt;% res = capture do %&gt;\n  Foo\n  &lt;% end %&gt;&lt;%= res %&gt;&quot;</span>))
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000028" class="method">
  <div id="M000028_title" class="title">
    <b>test_init_haml_helpers</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000028_source')" id="l_M000028_source">show source</a> ]</p>
  <div id="M000028_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 188</span>
188:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_init_haml_helpers</span>
189:     <span class="ruby-identifier">context</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
190:     <span class="ruby-keyword kw">class</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">context</span>
191:       <span class="ruby-identifier">include</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Helpers</span>
192:     <span class="ruby-keyword kw">end</span>
193:     <span class="ruby-identifier">context</span>.<span class="ruby-identifier">init_haml_helpers</span>
194: 
195:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">context</span>.<span class="ruby-identifier">capture_haml</span> <span class="ruby-keyword kw">do</span>
196:       <span class="ruby-identifier">context</span>.<span class="ruby-identifier">haml_tag</span> <span class="ruby-identifier">:p</span>, <span class="ruby-identifier">:attr</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;val&quot;</span> <span class="ruby-keyword kw">do</span>
197:         <span class="ruby-identifier">context</span>.<span class="ruby-identifier">haml_concat</span> <span class="ruby-value str">&quot;Blah&quot;</span>
198:       <span class="ruby-keyword kw">end</span>
199:     <span class="ruby-keyword kw">end</span>
200: 
201:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p attr='val'&gt;\n  Blah\n&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">result</span>)
202:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000021" class="method">
  <div id="M000021_title" class="title">
    <b>test_is_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000021_source')" id="l_M000021_source">show source</a> ]</p>
  <div id="M000021_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 146</span>
146:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_is_haml</span>
147:     <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">is_haml?</span>)
148:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;true\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= is_haml?&quot;</span>))
149:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;true\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= is_haml?&quot;</span>, <span class="ruby-identifier">:action_view</span>))
150:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false&quot;</span>, <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:inline</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'&lt;%= is_haml? %&gt;'</span>))
151:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= render :inline =&gt; '&lt;%= is_haml? %&gt;'&quot;</span>, <span class="ruby-identifier">:action_view</span>))
152:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000006" class="method">
  <div id="M000006_title" class="title">
    <b>test_list_of_should_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000006_source')" id="l_M000006_source">show source</a> ]</p>
  <div id="M000006_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 40</span>
40:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_list_of_should_render_correctly</span>
41:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;1&lt;/li&gt;\n&lt;li&gt;2&lt;/li&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of([1, 2]) do |i|\n  = i&quot;</span>))
42:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;[1]&lt;/li&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of([[1]]) do |i|\n  = i.inspect&quot;</span>))
43:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;li&gt;\n  &lt;h1&gt;Fee&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fi&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fo&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&lt;li&gt;\n  &lt;h1&gt;Fum&lt;/h1&gt;\n  &lt;p&gt;A word!&lt;/p&gt;\n&lt;/li&gt;\n&quot;</span>,
44:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= list_of(['Fee', 'Fi', 'Fo', 'Fum']) do |title|\n  %h1= title\n  %p A word!&quot;</span>))
45:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000029" class="method">
  <div id="M000029_title" class="title">
    <b>test_non_haml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000029_source')" id="l_M000029_source">show source</a> ]</p>
  <div id="M000029_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 204</span>
204:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_haml</span>
205:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;false\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= non_haml { is_haml? }&quot;</span>))
206:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000022" class="method">
  <div id="M000022_title" class="title">
    <b>test_page_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000022_source')" id="l_M000022_source">show source</a> ]</p>
  <div id="M000022_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 154</span>
154:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_page_class</span>
155:     <span class="ruby-identifier">controller</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller_name</span>, <span class="ruby-identifier">:action_name</span>).<span class="ruby-identifier">new</span>(<span class="ruby-value str">'troller'</span>, <span class="ruby-value str">'tion'</span>)
156:     <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Struct</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:controller</span>).<span class="ruby-identifier">new</span>(<span class="ruby-identifier">controller</span>)
157:     <span class="ruby-identifier">result</span> = <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%div{:class =&gt; page_class} MyDiv&quot;</span>, <span class="ruby-identifier">:scope_object</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">scope</span>)
158:     <span class="ruby-identifier">expected</span> = <span class="ruby-value str">&quot;&lt;div class='troller tion'&gt;MyDiv&lt;/div&gt;\n&quot;</span>
159:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">expected</span>, <span class="ruby-identifier">result</span>
160:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000027" class="method">
  <div id="M000027_title" class="title">
    <b>test_preserve_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000027_source')" id="l_M000027_source">show source</a> ]</p>
  <div id="M000027_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 183</span>
183:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_preserve_with_block</span>
184:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;pre&gt;Foo&amp;#x000A;Bar&lt;/pre&gt;&amp;#x000A;Foo&amp;#x000A;Bar\n&quot;</span>,
185:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= preserve do\n  %pre\n    Foo\n    Bar\n  Foo\n  Bar&quot;</span>))
186:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000031" class="method">
  <div id="M000031_title" class="title">
    <b>test_random_class_includes_tag_helper</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000031_source')" id="l_M000031_source">show source</a> ]</p>
  <div id="M000031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_random_class_includes_tag_helper</span>
223:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;some tag content&lt;/p&gt;&quot;</span>, <span class="ruby-constant">ActsLikeTag</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">to_s</span>
224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000008" class="method">
  <div id="M000008_title" class="title">
    <b>test_tabs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000008_source')" id="l_M000008_source">show source</a> ]</p>
  <div id="M000008_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 52</span>
52:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tabs</span>
53:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;foo\n  bar\nbaz\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;foo\n- tab_up\nbar\n- tab_down\nbaz&quot;</span>))
54:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;          &lt;p&gt;tabbed&lt;/p&gt;\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- buffer.tabulation=5\n%p tabbed&quot;</span>))
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000012" class="method">
  <div id="M000012_title" class="title">
    <b>test_text_area</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000012_source')" id="l_M000012_source">show source</a> ]</p>
  <div id="M000012_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 89</span>
89:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_text_area</span><span class="ruby-identifier">test_text_area</span>
90:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;textarea id=&quot;body&quot; name=&quot;body&quot;&gt;Foo&amp;#x000A;Bar&amp;#x000A; Baz&amp;#x000A;   Boom&lt;/textarea&gt;\n)</span>,
91:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= text_area_tag &quot;body&quot;, &quot;Foo\nBar\n Baz\n   Boom&quot;'</span>, <span class="ruby-identifier">:action_view</span>))
92: 
93:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;textarea cols=&quot;40&quot; id=&quot;post_body&quot; name=&quot;post[body]&quot; rows=&quot;20&quot;&gt;Foo bar&amp;#x000A;baz&lt;/textarea&gt;\n)</span>,
94:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= text_area :post, :body'</span>, <span class="ruby-identifier">:action_view</span>))    
95: 
96:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">%(&lt;pre&gt;Foo bar&amp;#x000A;   baz&lt;/pre&gt;\n)</span>,
97:                  <span class="ruby-identifier">render</span>(<span class="ruby-value str">'= content_tag &quot;pre&quot;, &quot;Foo bar\n   baz&quot;'</span>, <span class="ruby-identifier">:action_view</span>))    
98:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000025" class="method">
  <div id="M000025_title" class="title">
    <b>trc</b>(collection, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000025_source')" id="l_M000025_source">show source</a> ]</p>
  <div id="M000025_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/helper_test.rb, line 168</span>
168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">trc</span>(<span class="ruby-identifier">collection</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
169:         <span class="ruby-identifier">collection</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">record</span><span class="ruby-operator">|</span>
170:           <span class="ruby-identifier">haml_concat</span> <span class="ruby-identifier">capture_haml</span>(<span class="ruby-identifier">record</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
171:         <span class="ruby-keyword kw">end</span>
172:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>