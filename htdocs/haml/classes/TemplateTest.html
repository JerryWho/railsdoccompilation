  <div id="C00000010">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TemplateTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/template_test_rb.html');">test/haml/template_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000155&name=assert_renders_correctly" >assert_renders_correctly</a></li>
  <li><a href="index.html?a=M000152&name=create_base" >create_base</a></li>
  <li><a href="index.html?a=M000154&name=load_result" >load_result</a></li>
  <li><a href="index.html?a=M000153&name=render" >render</a></li>
  <li><a href="index.html?a=M000151&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000159&name=test_action_view_templates_render_correctly" >test_action_view_templates_render_correctly</a></li>
  <li><a href="index.html?a=M000156&name=test_empty_render_should_remain_empty" >test_empty_render_should_remain_empty</a></li>
  <li><a href="index.html?a=M000164&name=test_exceptions_should_work_correctly" >test_exceptions_should_work_correctly</a></li>
  <li><a href="index.html?a=M000163&name=test_haml_options" >test_haml_options</a></li>
  <li><a href="index.html?a=M000161&name=test_instance_variables_should_work_inside_attributes" >test_instance_variables_should_work_inside_attributes</a></li>
  <li><a href="index.html?a=M000160&name=test_instance_variables_should_work_inside_templates" >test_instance_variables_should_work_inside_templates</a></li>
  <li><a href="index.html?a=M000162&name=test_template_renders_should_eval" >test_template_renders_should_eval</a></li>
  <li><a href="index.html?a=M000158&name=test_templates_should_render_correctly_with_def_method" >test_templates_should_render_correctly_with_def_method</a></li>
  <li><a href="index.html?a=M000157&name=test_templates_should_render_correctly_with_render_proc" >test_templates_should_render_correctly_with_render_proc</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">TEMPLATE_PATH</td>
    <td>=</td>
    <td class="attr-value">File.join(File.dirname(__FILE__), &quot;templates&quot;)</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">TEMPLATES</td>
    <td>=</td>
    <td class="attr-value">%w{         very_basic        standard    helpers     whitespace_handling   original_engine   list        helpful     silent_script         tag_parsing       just_stuff  partials     filters               nuke_outer_whitespace         nuke_inner_whitespace     render_layout }</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000155" class="method">
  <div id="M000155_title" class="title">
    <b>assert_renders_correctly</b>(name, &amp;render_method)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000155_source')" id="l_M000155_source">show source</a> ]</p>
  <div id="M000155_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 93</span>
 93:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">render_method</span>)
 94:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">MAJOR</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span> <span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">MINOR</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>
 95:       <span class="ruby-identifier">render_method</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">name</span>) }
 96:     <span class="ruby-keyword kw">else</span>
 97:       <span class="ruby-identifier">render_method</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>) }
 98:     <span class="ruby-keyword kw">end</span>
 99: 
100:     <span class="ruby-identifier">load_result</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">render_method</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span>, <span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
101:       <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;template: #{name}\nline:     #{line}&quot;</span>
102:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">pair</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">message</span>)
103:     <span class="ruby-keyword kw">end</span>
104:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">TemplateError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
105:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/Can't run [\w:]+ filter; required (one of|file) ((?:'\w+'(?: or )?)+)(, but none were found| not found)/</span>
106:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\nCouldn't require #{$2}; skipping a test.&quot;</span>
107:     <span class="ruby-keyword kw">else</span>
108:       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
109:     <span class="ruby-keyword kw">end</span>
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000152" class="method">
  <div id="M000152_title" class="title">
    <b>create_base</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000152_source')" id="l_M000152_source">show source</a> ]</p>
  <div id="M000152_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_base</span>
58:     <span class="ruby-identifier">vars</span> = { <span class="ruby-value str">'article'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Article</span>.<span class="ruby-identifier">new</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'value one'</span> }
59:     
60:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">has?</span>(<span class="ruby-identifier">:instance_method</span>, <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>, <span class="ruby-identifier">:finder</span>)
61:       <span class="ruby-identifier">base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">TEMPLATE_PATH</span>, <span class="ruby-identifier">vars</span>)
62:     <span class="ruby-keyword kw">else</span>
63:       <span class="ruby-comment cmt"># Rails 2.1.0</span>
64:       <span class="ruby-identifier">base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>([], <span class="ruby-identifier">vars</span>)
65:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">finder</span>.<span class="ruby-identifier">append_view_path</span>(<span class="ruby-constant">TEMPLATE_PATH</span>)
66:     <span class="ruby-keyword kw">end</span>
67:     
68:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">has?</span>(<span class="ruby-identifier">:private_method</span>, <span class="ruby-identifier">base</span>, <span class="ruby-identifier">:evaluate_assigns</span>)
69:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:evaluate_assigns</span>)
70:     <span class="ruby-keyword kw">else</span>
71:       <span class="ruby-comment cmt"># Rails 2.2</span>
72:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:_evaluate_assigns_and_ivars</span>)
73:     <span class="ruby-keyword kw">end</span>
74: 
75:     <span class="ruby-comment cmt"># This is used by form_for.</span>
76:     <span class="ruby-comment cmt"># It's usually provided by ActionController::Base.</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base</span>.<span class="ruby-identifier">protect_against_forgery?</span>; <span class="ruby-keyword kw">false</span>; <span class="ruby-keyword kw">end</span>
78: 
79:     <span class="ruby-identifier">base</span>.<span class="ruby-identifier">controller</span> = <span class="ruby-constant">DummyController</span>.<span class="ruby-identifier">new</span>
80:     <span class="ruby-identifier">base</span>
81:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000154" class="method">
  <div id="M000154_title" class="title">
    <b>load_result</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000154_source')" id="l_M000154_source">show source</a> ]</p>
  <div id="M000154_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_result</span>(<span class="ruby-identifier">name</span>)
88:     <span class="ruby-ivar">@result</span> = <span class="ruby-value str">''</span>
89:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/results/#{name}.xhtml&quot;</span>).<span class="ruby-identifier">each_line</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@result</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">l</span> }
90:     <span class="ruby-ivar">@result</span>
91:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000153" class="method">
  <div id="M000153_title" class="title">
    <b>render</b>(text)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000153_source')" id="l_M000153_source">show source</a> ]</p>
  <div id="M000153_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 83</span>
83:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">render</span><span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>)
84:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-ivar">@base</span>)
85:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000151" class="method">
  <div id="M000151_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000151_source')" id="l_M000151_source">show source</a> ]</p>
  <div id="M000151_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
51:     <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">create_base</span>
52: 
53:     <span class="ruby-comment cmt"># filters template uses :sass</span>
54:     <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Plugin</span>.<span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">:line_comments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:compact</span>)
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000159" class="method">
  <div id="M000159_title" class="title">
    <b>test_action_view_templates_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000159_source')" id="l_M000159_source">show source</a> ]</p>
  <div id="M000159_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 137</span>
137:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_view_templates_render_correctly</span>
138:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@content_for_layout&quot;</span>, <span class="ruby-value str">'Lorem ipsum dolor sit amet'</span>)
139:     <span class="ruby-identifier">assert_renders_correctly</span> <span class="ruby-value str">'content_for_layout'</span>
140:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000156" class="method">
  <div id="M000156_title" class="title">
    <b>test_empty_render_should_remain_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000156_source')" id="l_M000156_source">show source</a> ]</p>
  <div id="M000156_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render_should_remain_empty</span>
113:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">''</span>))
114:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000164" class="method">
  <div id="M000164_title" class="title">
    <b>test_exceptions_should_work_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000164_source')" id="l_M000164_source">show source</a> ]</p>
  <div id="M000164_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exceptions_should_work_correctly</span>
175:     <span class="ruby-keyword kw">begin</span>
176:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- raise 'oops!'&quot;</span>)
177:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
178:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;oops!&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
179:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^\(haml\):1/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
180:     <span class="ruby-keyword kw">else</span>
181:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>
182:     <span class="ruby-keyword kw">end</span>
183: 
184:     <span class="ruby-identifier">template</span> = <span class="ruby-value str">&quot;%p\n  %h1 Hello!\n  = \&quot;lots of lines\&quot;\n  = \&quot;even more!\&quot;\n  - raise 'oh no!'\n  %p\n    this is after the exception\n    %strong yes it is!\nho ho ho.\n&quot;</span>
185: 
186:     <span class="ruby-keyword kw">begin</span>
187:       <span class="ruby-identifier">render</span>(<span class="ruby-identifier">template</span>.<span class="ruby-identifier">chomp</span>)
188:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
189:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^\(haml\):5/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
190:     <span class="ruby-keyword kw">else</span>
191:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>
192:     <span class="ruby-keyword kw">end</span>
193:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000163" class="method">
  <div id="M000163_title" class="title">
    <b>test_haml_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000163_source')" id="l_M000163_source">show source</a> ]</p>
  <div id="M000163_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 165</span>
165:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_options</span>
166:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }
167:     <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span>)
168:     <span class="ruby-identifier">old_base</span>, <span class="ruby-ivar">@base</span> = <span class="ruby-ivar">@base</span>, <span class="ruby-identifier">create_base</span>
169:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;eval_suppressed&quot;</span>)
170:     <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">old_base</span>
171:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span> = {}
172:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000161" class="method">
  <div id="M000161_title" class="title">
    <b>test_instance_variables_should_work_inside_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000161_source')" id="l_M000161_source">show source</a> ]</p>
  <div id="M000161_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 156</span>
156:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_instance_variables_should_work_inside_attributes</span>
157:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'hcatlin'&quot;</span>)
158:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='hcatlin'&gt;foo&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; @author} foo&quot;</span>).<span class="ruby-identifier">chomp</span>)
159:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000160" class="method">
  <div id="M000160_title" class="title">
    <b>test_instance_variables_should_work_inside_templates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000160_source')" id="l_M000160_source">show source</a> ]</p>
  <div id="M000160_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_instance_variables_should_work_inside_templates</span>
143:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@content_for_layout&quot;</span>, <span class="ruby-value str">'something'</span>)
144:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;something&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= @content_for_layout&quot;</span>).<span class="ruby-identifier">chomp</span>)
145: 
146:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Hampton Catlin'&quot;</span>)
147:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='author'&gt;Hampton Catlin&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.author= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
148: 
149:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Hampton'&quot;</span>)
150:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Hampton&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
151: 
152:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Catlin'&quot;</span>)
153:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Catlin&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
154:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000162" class="method">
  <div id="M000162_title" class="title">
    <b>test_template_renders_should_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000162_source')" id="l_M000162_source">show source</a> ]</p>
  <div id="M000162_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 161</span>
161:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_template_renders_should_eval</span>
162:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;2\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 1+1&quot;</span>))
163:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000158" class="method">
  <div id="M000158_title" class="title">
    <b>test_templates_should_render_correctly_with_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000158_source')" id="l_M000158_source">show source</a> ]</p>
  <div id="M000158_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 129</span>
129:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_templates_should_render_correctly_with_def_method</span>
130:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;standard&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
131:       <span class="ruby-identifier">engine</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/templates/#{name}.haml&quot;</span>))
132:       <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">def_method</span>(<span class="ruby-ivar">@base</span>, <span class="ruby-value str">&quot;render_standard&quot;</span>)
133:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render_standard</span>
134:     <span class="ruby-keyword kw">end</span>
135:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000157" class="method">
  <div id="M000157_title" class="title">
    <b>test_templates_should_render_correctly_with_render_proc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000157_source')" id="l_M000157_source">show source</a> ]</p>
  <div id="M000157_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_templates_should_render_correctly_with_render_proc</span>
123:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;standard&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
124:       <span class="ruby-identifier">engine</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/templates/#{name}.haml&quot;</span>))
125:       <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">render_proc</span>(<span class="ruby-ivar">@base</span>).<span class="ruby-identifier">call</span>
126:     <span class="ruby-keyword kw">end</span>
127:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>