  <div id="C00000014">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TemplateTest<br/>
  In:
<a href="#" onclick="jsHref('files/test/haml/template_test_rb.html');">test/haml/template_test.rb</a>

Parent:&nbsp;
Test::Unit::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000277&name=assert_renders_correctly" >assert_renders_correctly</a></li>
  <li><a href="index.html?a=M000274&name=create_base" >create_base</a></li>
  <li><a href="index.html?a=M000276&name=load_result" >load_result</a></li>
  <li><a href="index.html?a=M000275&name=render" >render</a></li>
  <li><a href="index.html?a=M000273&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000281&name=test_action_view_templates_render_correctly" >test_action_view_templates_render_correctly</a></li>
  <li><a href="index.html?a=M000278&name=test_empty_render_should_remain_empty" >test_empty_render_should_remain_empty</a></li>
  <li><a href="index.html?a=M000286&name=test_exceptions_should_work_correctly" >test_exceptions_should_work_correctly</a></li>
  <li><a href="index.html?a=M000285&name=test_haml_options" >test_haml_options</a></li>
  <li><a href="index.html?a=M000283&name=test_instance_variables_should_work_inside_attributes" >test_instance_variables_should_work_inside_attributes</a></li>
  <li><a href="index.html?a=M000282&name=test_instance_variables_should_work_inside_templates" >test_instance_variables_should_work_inside_templates</a></li>
  <li><a href="index.html?a=M000284&name=test_template_renders_should_eval" >test_template_renders_should_eval</a></li>
  <li><a href="index.html?a=M000280&name=test_templates_should_render_correctly_with_def_method" >test_templates_should_render_correctly_with_def_method</a></li>
  <li><a href="index.html?a=M000279&name=test_templates_should_render_correctly_with_render_proc" >test_templates_should_render_correctly_with_render_proc</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">TEMPLATE_PATH</td>
    <td>=</td>
    <td class="attr-value">File.join(File.dirname(__FILE__), &quot;templates&quot;)</td>
  </tr>
  <tr valign='top'>
    <td class="attr-name">TEMPLATES</td>
    <td>=</td>
    <td class="attr-value">%w{         very_basic        standard    helpers     whitespace_handling   original_engine   list        helpful     silent_script         tag_parsing       just_stuff  partials     filters               nuke_outer_whitespace         nuke_inner_whitespace     render_layout }</td>
  </tr>
  </table>


<div class="sectiontitle">Public Instance methods</div>
<div id="M000277" class="method">
  <div id="M000277_title" class="title">
    <b>assert_renders_correctly</b>(name, &amp;render_method)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000277_source')" id="l_M000277_source">show source</a> ]</p>
  <div id="M000277_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 97</span>
 97:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-identifier">name</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">render_method</span>)
 98:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">MAJOR</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span> <span class="ruby-operator">||</span>
 99:         (<span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">MAJOR</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-constant">ActionPack</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION</span><span class="ruby-operator">::</span><span class="ruby-constant">MINOR</span> <span class="ruby-operator">&lt;</span> <span class="ruby-value">2</span>)
100:       <span class="ruby-identifier">render_method</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">name</span>) }
101:     <span class="ruby-keyword kw">else</span>
102:       <span class="ruby-identifier">render_method</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">proc</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render</span>(<span class="ruby-identifier">:file</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">name</span>) }
103:     <span class="ruby-keyword kw">end</span>
104: 
105:     <span class="ruby-identifier">load_result</span>(<span class="ruby-identifier">name</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">zip</span>(<span class="ruby-identifier">render_method</span>[<span class="ruby-identifier">name</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>)).<span class="ruby-identifier">each_with_index</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">pair</span>, <span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
106:       <span class="ruby-identifier">message</span> = <span class="ruby-node">&quot;template: #{name}\nline:     #{line}&quot;</span>
107:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">pair</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">pair</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">message</span>)
108:     <span class="ruby-keyword kw">end</span>
109:   <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">TemplateError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
110:     <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/Can't run [\w:]+ filter; required (one of|file) ((?:'\w+'(?: or )?)+)(, but none were found| not found)/</span>
111:       <span class="ruby-identifier">puts</span> <span class="ruby-node">&quot;\nCouldn't require #{$2}; skipping a test.&quot;</span>
112:     <span class="ruby-keyword kw">else</span>
113:       <span class="ruby-identifier">raise</span> <span class="ruby-identifier">e</span>
114:     <span class="ruby-keyword kw">end</span>
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000274" class="method">
  <div id="M000274_title" class="title">
    <b>create_base</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000274_source')" id="l_M000274_source">show source</a> ]</p>
  <div id="M000274_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 61</span>
61:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">create_base</span>
62:     <span class="ruby-identifier">vars</span> = { <span class="ruby-value str">'article'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-constant">Article</span>.<span class="ruby-identifier">new</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'value one'</span> }
63:     
64:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">has?</span>(<span class="ruby-identifier">:instance_method</span>, <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>, <span class="ruby-identifier">:finder</span>)
65:       <span class="ruby-identifier">base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">TEMPLATE_PATH</span>, <span class="ruby-identifier">vars</span>)
66:     <span class="ruby-keyword kw">else</span>
67:       <span class="ruby-comment cmt"># Rails 2.1.0</span>
68:       <span class="ruby-identifier">base</span> = <span class="ruby-constant">ActionView</span><span class="ruby-operator">::</span><span class="ruby-constant">Base</span>.<span class="ruby-identifier">new</span>([], <span class="ruby-identifier">vars</span>)
69:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">finder</span>.<span class="ruby-identifier">append_view_path</span>(<span class="ruby-constant">TEMPLATE_PATH</span>)
70:     <span class="ruby-keyword kw">end</span>
71:     
72:     <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">has?</span>(<span class="ruby-identifier">:private_method</span>, <span class="ruby-identifier">base</span>, <span class="ruby-identifier">:evaluate_assigns</span>)
73:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:evaluate_assigns</span>)
74:     <span class="ruby-keyword kw">else</span>
75:       <span class="ruby-comment cmt"># Rails 2.2</span>
76:       <span class="ruby-identifier">base</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">:_evaluate_assigns_and_ivars</span>)
77:     <span class="ruby-keyword kw">end</span>
78: 
79:     <span class="ruby-comment cmt"># This is used by form_for.</span>
80:     <span class="ruby-comment cmt"># It's usually provided by ActionController::Base.</span>
81:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">base</span>.<span class="ruby-identifier">protect_against_forgery?</span>; <span class="ruby-keyword kw">false</span>; <span class="ruby-keyword kw">end</span>
82: 
83:     <span class="ruby-identifier">base</span>.<span class="ruby-identifier">controller</span> = <span class="ruby-constant">DummyController</span>.<span class="ruby-identifier">new</span>
84:     <span class="ruby-identifier">base</span>
85:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000276" class="method">
  <div id="M000276_title" class="title">
    <b>load_result</b>(name)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000276_source')" id="l_M000276_source">show source</a> ]</p>
  <div id="M000276_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 91</span>
91:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_result</span>(<span class="ruby-identifier">name</span>)
92:     <span class="ruby-ivar">@result</span> = <span class="ruby-value str">''</span>
93:     <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/results/#{name}.xhtml&quot;</span>).<span class="ruby-identifier">each_line</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span> <span class="ruby-ivar">@result</span> <span class="ruby-operator">+=</span> <span class="ruby-identifier">l</span> }
94:     <span class="ruby-ivar">@result</span>
95:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000275" class="method">
  <div id="M000275_title" class="title">
    <b>render</b>(text)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000275_source')" id="l_M000275_source">show source</a> ]</p>
  <div id="M000275_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 87</span>
87:   <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">render</span><span class="ruby-identifier">render</span>(<span class="ruby-identifier">text</span>)
88:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">text</span>).<span class="ruby-identifier">to_html</span>(<span class="ruby-ivar">@base</span>)
89:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000273" class="method">
  <div id="M000273_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000273_source')" id="l_M000273_source">show source</a> ]</p>
  <div id="M000273_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 54</span>
54:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
55:     <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">create_base</span>
56: 
57:     <span class="ruby-comment cmt"># filters template uses :sass</span>
58:     <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">Plugin</span>.<span class="ruby-identifier">options</span>.<span class="ruby-identifier">update</span>(<span class="ruby-identifier">:line_comments</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span>, <span class="ruby-identifier">:style</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">:compact</span>)
59:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000281" class="method">
  <div id="M000281_title" class="title">
    <b>test_action_view_templates_render_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000281_source')" id="l_M000281_source">show source</a> ]</p>
  <div id="M000281_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 142</span>
142:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_action_view_templates_render_correctly</span>
143:     <span class="ruby-identifier">proc</span> = <span class="ruby-identifier">lambda</span> <span class="ruby-keyword kw">do</span>
144:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">content_for</span>(<span class="ruby-identifier">:layout</span>) {<span class="ruby-value str">'Lorem ipsum dolor sit amet'</span>}
145:       <span class="ruby-identifier">assert_renders_correctly</span> <span class="ruby-value str">'content_for_layout'</span>
146:     <span class="ruby-keyword kw">end</span>
147: 
148:     <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:with_output_buffer</span>)
149:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">with_output_buffer</span>(<span class="ruby-value str">&quot;&quot;</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">proc</span>)
150:     <span class="ruby-keyword kw">else</span>
151:       <span class="ruby-identifier">proc</span>.<span class="ruby-identifier">call</span>
152:     <span class="ruby-keyword kw">end</span>
153:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000278" class="method">
  <div id="M000278_title" class="title">
    <b>test_empty_render_should_remain_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000278_source')" id="l_M000278_source">show source</a> ]</p>
  <div id="M000278_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_render_should_remain_empty</span>
118:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">''</span>))
119:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000286" class="method">
  <div id="M000286_title" class="title">
    <b>test_exceptions_should_work_correctly</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000286_source')" id="l_M000286_source">show source</a> ]</p>
  <div id="M000286_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 187</span>
187:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_exceptions_should_work_correctly</span>
188:     <span class="ruby-keyword kw">begin</span>
189:       <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;- raise 'oops!'&quot;</span>)
190:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
191:       <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;oops!&quot;</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">message</span>)
192:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^\(haml\):1/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
193:     <span class="ruby-keyword kw">else</span>
194:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>
195:     <span class="ruby-keyword kw">end</span>
196: 
197:     <span class="ruby-identifier">template</span> = <span class="ruby-value str">&quot;%p\n  %h1 Hello!\n  = \&quot;lots of lines\&quot;\n  = \&quot;even more!\&quot;\n  - raise 'oh no!'\n  %p\n    this is after the exception\n    %strong yes it is!\nho ho ho.\n&quot;</span>
198: 
199:     <span class="ruby-keyword kw">begin</span>
200:       <span class="ruby-identifier">render</span>(<span class="ruby-identifier">template</span>.<span class="ruby-identifier">chomp</span>)
201:     <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Exception</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
202:       <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/^\(haml\):5/</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">backtrace</span>[<span class="ruby-value">0</span>])
203:     <span class="ruby-keyword kw">else</span>
204:       <span class="ruby-identifier">assert</span> <span class="ruby-keyword kw">false</span>
205:     <span class="ruby-keyword kw">end</span>
206:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000285" class="method">
  <div id="M000285_title" class="title">
    <b>test_haml_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000285_source')" id="l_M000285_source">show source</a> ]</p>
  <div id="M000285_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 178</span>
178:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_haml_options</span>
179:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span> = { <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }
180:     <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-identifier">:suppress_eval</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">true</span> }, <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span>)
181:     <span class="ruby-identifier">old_base</span>, <span class="ruby-ivar">@base</span> = <span class="ruby-ivar">@base</span>, <span class="ruby-identifier">create_base</span>
182:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;eval_suppressed&quot;</span>)
183:     <span class="ruby-ivar">@base</span> = <span class="ruby-identifier">old_base</span>
184:     <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Template</span>.<span class="ruby-identifier">options</span> = {}
185:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000283" class="method">
  <div id="M000283_title" class="title">
    <b>test_instance_variables_should_work_inside_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000283_source')" id="l_M000283_source">show source</a> ]</p>
  <div id="M000283_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 169</span>
169:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_instance_variables_should_work_inside_attributes</span>
170:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'hcatlin'&quot;</span>)
171:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p class='hcatlin'&gt;foo&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p{:class =&gt; @author} foo&quot;</span>).<span class="ruby-identifier">chomp</span>)
172:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000282" class="method">
  <div id="M000282_title" class="title">
    <b>test_instance_variables_should_work_inside_templates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000282_source')" id="l_M000282_source">show source</a> ]</p>
  <div id="M000282_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_instance_variables_should_work_inside_templates</span>
156:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_variable_set</span>(<span class="ruby-value str">&quot;@content_for_layout&quot;</span>, <span class="ruby-value str">'something'</span>)
157:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;something&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;%p= @content_for_layout&quot;</span>).<span class="ruby-identifier">chomp</span>)
158: 
159:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Hampton Catlin'&quot;</span>)
160:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;div class='author'&gt;Hampton Catlin&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;.author= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
161: 
162:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Hampton'&quot;</span>)
163:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Hampton&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
164: 
165:     <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">instance_eval</span>(<span class="ruby-value str">&quot;@author = 'Catlin'&quot;</span>)
166:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;Catlin&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= @author&quot;</span>).<span class="ruby-identifier">chomp</span>)
167:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000284" class="method">
  <div id="M000284_title" class="title">
    <b>test_template_renders_should_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000284_source')" id="l_M000284_source">show source</a> ]</p>
  <div id="M000284_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 174</span>
174:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_template_renders_should_eval</span>
175:     <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;2\n&quot;</span>, <span class="ruby-identifier">render</span>(<span class="ruby-value str">&quot;= 1+1&quot;</span>))
176:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000280" class="method">
  <div id="M000280_title" class="title">
    <b>test_templates_should_render_correctly_with_def_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000280_source')" id="l_M000280_source">show source</a> ]</p>
  <div id="M000280_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 134</span>
134:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_templates_should_render_correctly_with_def_method</span>
135:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;standard&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
136:       <span class="ruby-identifier">engine</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/templates/#{name}.haml&quot;</span>))
137:       <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">def_method</span>(<span class="ruby-ivar">@base</span>, <span class="ruby-value str">&quot;render_standard&quot;</span>)
138:       <span class="ruby-ivar">@base</span>.<span class="ruby-identifier">render_standard</span>
139:     <span class="ruby-keyword kw">end</span>
140:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000279" class="method">
  <div id="M000279_title" class="title">
    <b>test_templates_should_render_correctly_with_render_proc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000279_source')" id="l_M000279_source">show source</a> ]</p>
  <div id="M000279_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/haml/template_test.rb, line 127</span>
127:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_templates_should_render_correctly_with_render_proc</span>
128:     <span class="ruby-identifier">assert_renders_correctly</span>(<span class="ruby-value str">&quot;standard&quot;</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">name</span><span class="ruby-operator">|</span>
129:       <span class="ruby-identifier">engine</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Engine</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>) <span class="ruby-operator">+</span> <span class="ruby-node">&quot;/templates/#{name}.haml&quot;</span>))
130:       <span class="ruby-identifier">engine</span>.<span class="ruby-identifier">render_proc</span>(<span class="ruby-ivar">@base</span>).<span class="ruby-identifier">call</span>
131:     <span class="ruby-keyword kw">end</span>
132:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>