  <div id="C00000172">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />RuleNode<br/>
  In:
<a href="#" onclick="jsHref('files/lib/sass/tree/rule_node_rb.html');">lib/sass/tree/rule_node.rb</a>

Parent:&nbsp;
        <a href="#" onclick="jsHref('classes/Sass/Tree/Node.html');">
Node
         </a>
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
A static node reprenting a <a
href="index.html?a=C00000181&name=CSS">CSS</a> rule.
</p>
<p>
@see <a href="index.html?a=C00000157&name=Sass::Tree">Sass::Tree</a>
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001623&name===" >==</a></li>
  <li><a href="index.html?a=M001631&name=_cssize" >_cssize</a></li>
  <li><a href="index.html?a=M001629&name=_to_s" >_to_s</a></li>
  <li><a href="index.html?a=M001624&name=add_rules" >add_rules</a></li>
  <li><a href="index.html?a=M001625&name=continued?" >continued?</a></li>
  <li><a href="index.html?a=M001632&name=cssize!" >cssize!</a></li>
  <li><a href="index.html?a=M001634&name=debug_info" >debug_info</a></li>
  <li><a href="index.html?a=M001628&name=do_extend" >do_extend</a></li>
  <li><a href="index.html?a=M001633&name=invalid_child?" >invalid_child?</a></li>
  <li><a href="index.html?a=M001622&name=new" >new</a></li>
  <li><a href="index.html?a=M001630&name=perform!" >perform!</a></li>
  <li><a href="index.html?a=M001626&name=to_sass" >to_sass</a></li>
  <li><a href="index.html?a=M001627&name=to_scss" >to_scss</a></li>
  </ul>




  <div class="sectiontitle">Constants</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class="attr-name">PARENT</td>
    <td>=</td>
    <td class="attr-value">'&amp;'</td>
  </tr>
  <tr valign='top'>
    <td>&nbsp;</td>
    <td colspan="2" class="attr-desc">
The character used to include the parent selector

</td>
  </tr>
  </table>

  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>group_end</td>
    <td class='attr-desc'>
Whether or not this rule is the last rule in a nested group. This is only
set in a <a href="index.html?a=C00000181&name=CSS">CSS</a> tree.

<p>
@return [Boolean]
</p>
</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>parsed_rules</td>
    <td class='attr-desc'>
The <a href="index.html?a=C00000181&name=CSS">CSS</a> selector for this
rule, without any unresolved interpolation but with parent references still
intact. It&#8217;s only set once {<a
href="index.html?a=M001545&name=Tree::Node#perform">Tree::Node#perform</a>}
has been called.

<p>
@return [<a
href="index.html?a=C00000113&name=Selector::CommaSequence">Selector::CommaSequence</a>]
</p>
</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>resolved_rules</td>
    <td class='attr-desc'>
The <a href="index.html?a=C00000181&name=CSS">CSS</a> selector for this
rule, without any unresolved interpolation or parent references. It&#8217;s
only set once {<a
href="index.html?a=M001544&name=Tree::Node#cssize">Tree::Node#cssize</a>}
has been called.

<p>
@return [<a
href="index.html?a=C00000113&name=Selector::CommaSequence">Selector::CommaSequence</a>]
</p>
</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>rule</td>
    <td class='attr-desc'>
The <a href="index.html?a=C00000181&name=CSS">CSS</a> selector for this
rule, interspersed with {<a
href="index.html?a=C00000138&name=Sass::Script::Node">Sass::Script::Node</a>}s
representing `#{}`-interpolation. Any adjacent strings will be merged
together.

<p>
@return [Array&lt;String, <a
href="index.html?a=C00000138&name=Sass::Script::Node">Sass::Script::Node</a>&gt;]
</p>
</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>tabs</td>
    <td class='attr-desc'>
How deep this rule is indented relative to a base-level rule. This is only
greater than 0 in the case that:

<ul>
<li>This node is in a <a href="index.html?a=C00000181&name=CSS">CSS</a> tree

</li>
<li>The style is :nested

</li>
<li>This is a child rule of another rule

</li>
<li>The parent rule has properties, and thus will be rendered

</li>
</ul>
<p>
@return [Fixnum]
</p>
</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M001622" class="method">
  <div id="M001622_title" class="title">
    <b>new</b>(rule)
  </div>
  <div class="description">
  <p>
@param rule [Array&lt;String, <a
href="index.html?a=C00000138&name=Sass::Script::Node">Sass::Script::Node</a>&gt;]
</p>
<pre>
  The CSS rule. See \{#rule}
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001622_source')" id="l_M001622_source">show source</a> ]</p>
  <div id="M001622_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 55</span>
55:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">rule</span>)
56:       <span class="ruby-comment cmt">#p rule</span>
57:       <span class="ruby-identifier">merged</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">merge_adjacent_strings</span>(<span class="ruby-identifier">rule</span>)
58:       <span class="ruby-comment cmt">#p merged</span>
59:       <span class="ruby-ivar">@rule</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">strip_string_array</span>(<span class="ruby-identifier">merged</span>)
60:       <span class="ruby-comment cmt">#p @rule</span>
61:       <span class="ruby-ivar">@tabs</span> = <span class="ruby-value">0</span>
62:       <span class="ruby-keyword kw">super</span>()
63:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M001623" class="method">
  <div id="M001623_title" class="title">
    <b>==</b>(other)
  </div>
  <div class="description">
  <p>
Compares the contents of two rules.
</p>
<p>
@param other [<a href="index.html?a=C00000008&name=Object">Object</a>] The
object to compare with @return [Boolean] Whether or not this node and the
other object
</p>
<pre>
  are the same
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001623_source')" id="l_M001623_source">show source</a> ]</p>
  <div id="M001623_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 70</span>
70:     <span class="ruby-keyword kw">def</span> <span class="ruby-operator">==</span>(<span class="ruby-identifier">other</span>)
71:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">class</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">rule</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">other</span>.<span class="ruby-identifier">rule</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-keyword kw">super</span>
72:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001624" class="method">
  <div id="M001624_title" class="title">
    <b>add_rules</b>(node)
  </div>
  <div class="description">
  <p>
Adds another {<a
href="index.html?a=C00000172&name=RuleNode">RuleNode</a>}&#8217;s rules to
this one&#8217;s.
</p>
<p>
@param node [<a href="index.html?a=C00000172&name=RuleNode">RuleNode</a>]
The other node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001624_source')" id="l_M001624_source">show source</a> ]</p>
  <div id="M001624_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 77</span>
77:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add_rules</span>(<span class="ruby-identifier">node</span>)
78:       <span class="ruby-ivar">@rule</span> = <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">strip_string_array</span>(
79:         <span class="ruby-constant">Haml</span><span class="ruby-operator">::</span><span class="ruby-constant">Util</span>.<span class="ruby-identifier">merge_adjacent_strings</span>(<span class="ruby-ivar">@rule</span> <span class="ruby-operator">+</span> [<span class="ruby-value str">&quot;\n&quot;</span>] <span class="ruby-operator">+</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">rule</span>))
80:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001625" class="method">
  <div id="M001625_title" class="title">
    <b>continued?</b>()
  </div>
  <div class="description">
  <p>
@return [Boolean] Whether or not this rule is continued on the next line
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001625_source')" id="l_M001625_source">show source</a> ]</p>
  <div id="M001625_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 83</span>
83:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">continued?</span>
84:       <span class="ruby-identifier">last</span> = <span class="ruby-ivar">@rule</span>.<span class="ruby-identifier">last</span>
85:       <span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">last</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?,</span>
86:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001628" class="method">
  <div id="M001628_title" class="title">
    <b>do_extend</b>(extends)
  </div>
  <div class="description">
  <p>
Extends this Rule&#8217;s selector with the given `extends`.
</p>
<p>
@see <a href="index.html?a=M001543&name=Node#do_extend">Node#do_extend</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001628_source')" id="l_M001628_source">show source</a> ]</p>
  <div id="M001628_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 111</span>
111:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">do_extend</span>(<span class="ruby-identifier">extends</span>)
112:       <span class="ruby-identifier">node</span> = <span class="ruby-identifier">dup</span>
113:       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">resolved_rules</span> = <span class="ruby-identifier">resolved_rules</span>.<span class="ruby-identifier">do_extend</span>(<span class="ruby-identifier">extends</span>)
114:       <span class="ruby-identifier">node</span>
115:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001626" class="method">
  <div id="M001626_title" class="title">
    <b>to_sass</b>(tabs, opts = {})
  </div>
  <div class="description">
  <p>
@see <a href="index.html?a=M001547&name=Node#to_sass">Node#to_sass</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001626_source')" id="l_M001626_source">show source</a> ]</p>
  <div id="M001626_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 89</span>
89:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_sass</span>(<span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">opts</span> = {})
90:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">selector_to_sass</span>(<span class="ruby-identifier">rule</span>, <span class="ruby-identifier">opts</span>)
91:       <span class="ruby-identifier">name</span> = <span class="ruby-value str">&quot;\\&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">name</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">==</span> <span class="ruby-value">?:</span>
92:       <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/^/</span>, <span class="ruby-value str">'  '</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">tabs</span>) <span class="ruby-operator">+</span> <span class="ruby-identifier">children_to_src</span>(<span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">:sass</span>)
93:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001627" class="method">
  <div id="M001627_title" class="title">
    <b>to_scss</b>(tabs, opts = {})
  </div>
  <div class="description">
  <p>
@see <a href="index.html?a=M001548&name=Node#to_scss">Node#to_scss</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001627_source')" id="l_M001627_source">show source</a> ]</p>
  <div id="M001627_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 96</span>
 96:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_scss</span>(<span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">opts</span> = {})
 97:       <span class="ruby-identifier">name</span> = <span class="ruby-identifier">selector_to_scss</span>(<span class="ruby-identifier">rule</span>, <span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">opts</span>)
 98:       <span class="ruby-identifier">res</span> = <span class="ruby-identifier">name</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">children_to_src</span>(<span class="ruby-identifier">tabs</span>, <span class="ruby-identifier">opts</span>, <span class="ruby-identifier">:scss</span>)
 99: 
100:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">CommentNode</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">silent</span>
101:         <span class="ruby-identifier">res</span>.<span class="ruby-identifier">slice!</span>(<span class="ruby-value">-3</span><span class="ruby-operator">..</span><span class="ruby-value">-1</span>)
102:         <span class="ruby-identifier">res</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">&lt;&lt;</span> (<span class="ruby-value str">'  '</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">tabs</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;}\n&quot;</span>
103:       <span class="ruby-keyword kw">end</span>
104: 
105:       <span class="ruby-identifier">res</span>
106:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Protected Instance methods</div>
<div id="M001631" class="method">
  <div id="M001631_title" class="title">
    <b>_cssize</b>(extends, parent)
  </div>
  <div class="description">
  <p>
Converts nested rules into a flat list of rules.
</p>
<p>
@param extends [<a
href="index.html?a=C00000075&name=Haml::Util::SubsetMap">Haml::Util::SubsetMap</a>{<a
href="index.html?a=C00000121&name=Selector::Simple">Selector::Simple</a>
=&gt; <a
href="index.html?a=C00000119&name=Selector::Sequence">Selector::Sequence</a>}]
</p>
<pre>
  The extensions defined for this tree
</pre>
<p>
@param parent [<a href="index.html?a=C00000172&name=RuleNode">RuleNode</a>,
nil] The parent node of this node,
</p>
<pre>
  or nil if the parent isn't a {RuleNode}
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001631_source')" id="l_M001631_source">show source</a> ]</p>
  <div id="M001631_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 200</span>
200:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_cssize</span>(<span class="ruby-identifier">extends</span>, <span class="ruby-identifier">parent</span>)
201:       <span class="ruby-identifier">node</span> = <span class="ruby-keyword kw">super</span>
202:       <span class="ruby-identifier">rules</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">select</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RuleNode</span>)}
203:       <span class="ruby-identifier">props</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">reject</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">RuleNode</span>) <span class="ruby-operator">||</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">invisible?</span>}
204: 
205:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">props</span>.<span class="ruby-identifier">empty?</span>
206:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span> = <span class="ruby-identifier">props</span>
207:         <span class="ruby-identifier">rules</span>.<span class="ruby-identifier">each</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">r</span><span class="ruby-operator">|</span> <span class="ruby-identifier">r</span>.<span class="ruby-identifier">tabs</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>} <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">style</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:nested</span>
208:         <span class="ruby-identifier">rules</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-identifier">node</span>)
209:       <span class="ruby-keyword kw">end</span>
210: 
211:       <span class="ruby-identifier">rules</span>.<span class="ruby-identifier">last</span>.<span class="ruby-identifier">group_end</span> = <span class="ruby-keyword kw">true</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">parent</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">rules</span>.<span class="ruby-identifier">empty?</span>
212: 
213:       <span class="ruby-identifier">rules</span>
214:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001629" class="method">
  <div id="M001629_title" class="title">
    <b>_to_s</b>(tabs)
  </div>
  <div class="description">
  <p>
Computes the <a href="index.html?a=C00000181&name=CSS">CSS</a> for the
rule.
</p>
<p>
@param tabs [Fixnum] The level of indentation for the <a
href="index.html?a=C00000181&name=CSS">CSS</a> @return [String] The
resulting <a href="index.html?a=C00000181&name=CSS">CSS</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001629_source')" id="l_M001629_source">show source</a> ]</p>
  <div id="M001629_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 123</span>
123:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">_to_s</span>(<span class="ruby-identifier">tabs</span>)
124:       <span class="ruby-identifier">tabs</span> = <span class="ruby-identifier">tabs</span> <span class="ruby-operator">+</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">tabs</span>
125: 
126:       <span class="ruby-identifier">rule_separator</span> = <span class="ruby-identifier">style</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:compressed</span> <span class="ruby-operator">?</span> <span class="ruby-value str">','</span> <span class="ruby-operator">:</span> <span class="ruby-value str">', '</span>
127:       <span class="ruby-identifier">line_separator</span> =
128:         <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">style</span>
129:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:nested</span>, <span class="ruby-identifier">:expanded</span>; <span class="ruby-value str">&quot;\n&quot;</span>
130:           <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">:compressed</span>; <span class="ruby-value str">&quot;&quot;</span>
131:           <span class="ruby-keyword kw">else</span>; <span class="ruby-value str">&quot; &quot;</span>
132:         <span class="ruby-keyword kw">end</span>
133:       <span class="ruby-identifier">rule_indent</span> = <span class="ruby-value str">'  '</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">tabs</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
134:       <span class="ruby-identifier">per_rule_indent</span>, <span class="ruby-identifier">total_indent</span> = [<span class="ruby-identifier">:nested</span>, <span class="ruby-identifier">:expanded</span>].<span class="ruby-identifier">include?</span>(<span class="ruby-identifier">style</span>) <span class="ruby-operator">?</span> [<span class="ruby-identifier">rule_indent</span>, <span class="ruby-value str">''</span>] <span class="ruby-operator">:</span> [<span class="ruby-value str">''</span>, <span class="ruby-identifier">rule_indent</span>]
135: 
136:       <span class="ruby-identifier">total_rule</span> = <span class="ruby-identifier">total_indent</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">resolved_rules</span>.<span class="ruby-identifier">members</span>.
137:         <span class="ruby-identifier">map</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">seq</span><span class="ruby-operator">|</span> <span class="ruby-identifier">seq</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">join</span>}.
138:         <span class="ruby-identifier">join</span>(<span class="ruby-identifier">rule_separator</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>).<span class="ruby-identifier">map</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">line</span><span class="ruby-operator">|</span>
139:         <span class="ruby-identifier">per_rule_indent</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">line</span>.<span class="ruby-identifier">strip</span>
140:       <span class="ruby-keyword kw">end</span>.<span class="ruby-identifier">join</span>(<span class="ruby-identifier">line_separator</span>)
141: 
142:       <span class="ruby-identifier">to_return</span> = <span class="ruby-value str">''</span>
143:       <span class="ruby-identifier">old_spaces</span> = <span class="ruby-value str">'  '</span> <span class="ruby-operator">*</span> (<span class="ruby-identifier">tabs</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>)
144:       <span class="ruby-identifier">spaces</span> = <span class="ruby-value str">'  '</span> <span class="ruby-operator">*</span> <span class="ruby-identifier">tabs</span>
145:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">style</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">:compressed</span>
146:         <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:debug_info</span>]
147:           <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">debug_info_rule</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">tabs</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot;\n&quot;</span>
148:         <span class="ruby-keyword kw">elsif</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:line_comments</span>]
149:           <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{old_spaces}/* line #{line}&quot;</span>
150: 
151:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">filename</span>
152:             <span class="ruby-identifier">relative_filename</span> = <span class="ruby-keyword kw">if</span> <span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:css_filename</span>]
153:               <span class="ruby-keyword kw">begin</span>
154:                 <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">filename</span>).<span class="ruby-identifier">relative_path_from</span>(
155:                   <span class="ruby-constant">Pathname</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-ivar">@options</span>[<span class="ruby-identifier">:css_filename</span>]))).<span class="ruby-identifier">to_s</span>
156:               <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">ArgumentError</span>
157:                 <span class="ruby-keyword kw">nil</span>
158:               <span class="ruby-keyword kw">end</span>
159:             <span class="ruby-keyword kw">end</span>
160:             <span class="ruby-identifier">relative_filename</span> <span class="ruby-operator">||=</span> <span class="ruby-identifier">filename</span>
161:             <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;, #{relative_filename}&quot;</span>
162:           <span class="ruby-keyword kw">end</span>
163: 
164:           <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; */\n&quot;</span>
165:         <span class="ruby-keyword kw">end</span>
166:       <span class="ruby-keyword kw">end</span>
167: 
168:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">style</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:compact</span>
169:         <span class="ruby-identifier">properties</span> = <span class="ruby-identifier">children</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-value">1</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">' '</span>)
170:         <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{total_rule} { #{properties} }#{&quot;\n&quot; if group_end}&quot;</span>
171:       <span class="ruby-keyword kw">elsif</span> <span class="ruby-identifier">style</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:compressed</span>
172:         <span class="ruby-identifier">properties</span> = <span class="ruby-identifier">children</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-value">1</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">';'</span>)
173:         <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{total_rule}{#{properties}}&quot;</span>
174:       <span class="ruby-keyword kw">else</span>
175:         <span class="ruby-identifier">properties</span> = <span class="ruby-identifier">children</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">to_s</span>(<span class="ruby-identifier">tabs</span> <span class="ruby-operator">+</span> <span class="ruby-value">1</span>) }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
176:         <span class="ruby-identifier">end_props</span> = (<span class="ruby-identifier">style</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">:expanded</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;\n&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">old_spaces</span> <span class="ruby-operator">:</span> <span class="ruby-value str">' '</span>)
177:         <span class="ruby-identifier">to_return</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;#{total_rule} {\n#{properties}#{end_props}}#{&quot;\n&quot; if group_end}&quot;</span>
178:       <span class="ruby-keyword kw">end</span>
179: 
180:       <span class="ruby-identifier">to_return</span>
181:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001632" class="method">
  <div id="M001632_title" class="title">
    <b>cssize!</b>(extends, parent)
  </div>
  <div class="description">
  <p>
Resolves parent references and nested selectors, and updates the
indentation based on the parent&#8217;s indentation.
</p>
<p>
@param extends [<a
href="index.html?a=C00000075&name=Haml::Util::SubsetMap">Haml::Util::SubsetMap</a>{<a
href="index.html?a=C00000121&name=Selector::Simple">Selector::Simple</a>
=&gt; <a
href="index.html?a=C00000119&name=Selector::Sequence">Selector::Sequence</a>}]
</p>
<pre>
  The extensions defined for this tree
</pre>
<p>
@param parent [<a href="index.html?a=C00000172&name=RuleNode">RuleNode</a>,
nil] The parent node of this node,
</p>
<pre>
  or nil if the parent isn't a {RuleNode}
</pre>
<p>
@raise [<a
href="index.html?a=C00000183&name=Sass::SyntaxError">Sass::SyntaxError</a>]
if the rule has no parents but uses `&amp;`
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001632_source')" id="l_M001632_source">show source</a> ]</p>
  <div id="M001632_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 224</span>
224:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">cssize!</span>(<span class="ruby-identifier">extends</span>, <span class="ruby-identifier">parent</span>)
225:       <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resolved_rules</span> = <span class="ruby-ivar">@parsed_rules</span>.<span class="ruby-identifier">resolve_parent_refs</span>(<span class="ruby-identifier">parent</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">parent</span>.<span class="ruby-identifier">resolved_rules</span>)
226:       <span class="ruby-keyword kw">super</span>
227:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001634" class="method">
  <div id="M001634_title" class="title">
    <b>debug_info</b>()
  </div>
  <div class="description">
  <p>
A hash that will be associated with this rule in the <a
href="index.html?a=C00000181&name=CSS">CSS</a> document if the
{file:SASS_REFERENCE.md#debug_info-option `:<a
href="index.html?a=M001634&name=debug_info">debug_info</a>` option} is
enabled. This data is used by e.g. [the FireSass Firebug extension](<a
href="#"
onclick="jsHref('https://addons.mozilla.org/en-US/firefox/addon/103988');">addons.mozilla.org/en-US/firefox/addon/103988</a>).
</p>
<p>
@return [{to_s =&gt; to_s}]
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001634_source')" id="l_M001634_source">show source</a> ]</p>
  <div id="M001634_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 246</span>
246:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">debug_info</span>
247:       {<span class="ruby-identifier">:filename</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">filename</span> <span class="ruby-operator">&amp;&amp;</span> (<span class="ruby-value str">&quot;file://&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-constant">URI</span>.<span class="ruby-identifier">escape</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-identifier">filename</span>))),
248:        <span class="ruby-identifier">:line</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">line</span>}
249:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001633" class="method">
  <div id="M001633_title" class="title">
    <b>invalid_child?</b>(child)
  </div>
  <div class="description">
  <p>
Returns an error message if the given child node is invalid, and false
otherwise.
</p>
<p>
{<a href="index.html?a=C00000169&name=ExtendNode">ExtendNode</a>}s are
valid within {<a
href="index.html?a=C00000172&name=RuleNode">RuleNode</a>}s.
</p>
<p>
@param child [<a
href="index.html?a=C00000161&name=Tree::Node">Tree::Node</a>] A potential
child node. @return [Boolean, String] Whether or not the child node is
valid,
</p>
<pre>
  as well as the error message to display if it is invalid
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001633_source')" id="l_M001633_source">show source</a> ]</p>
  <div id="M001633_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 237</span>
237:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">invalid_child?</span>(<span class="ruby-identifier">child</span>)
238:       <span class="ruby-keyword kw">super</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">ExtendNode</span>)
239:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001630" class="method">
  <div id="M001630_title" class="title">
    <b>perform!</b>(environment)
  </div>
  <div class="description">
  <p>
Runs SassScript interpolation in the selector, and then parses the result
into a {<a
href="index.html?a=C00000113&name=Sass::Selector::CommaSequence">Sass::Selector::CommaSequence</a>}.
</p>
<p>
@param environment [<a
href="index.html?a=C00000184&name=Sass::Environment">Sass::Environment</a>]
The lexical environment containing
</p>
<pre>
  variable and mixin values
</pre>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001630_source')" id="l_M001630_source">show source</a> ]</p>
  <div id="M001630_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File lib/sass/tree/rule_node.rb, line 188</span>
188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">perform!</span>(<span class="ruby-identifier">environment</span>)
189:       <span class="ruby-ivar">@parsed_rules</span> = <span class="ruby-constant">Sass</span><span class="ruby-operator">::</span><span class="ruby-constant">SCSS</span><span class="ruby-operator">::</span><span class="ruby-constant">StaticParser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">run_interp</span>(<span class="ruby-ivar">@rule</span>, <span class="ruby-identifier">environment</span>), <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">line</span>).
190:         <span class="ruby-identifier">parse_selector</span>(<span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">filename</span>)
191:       <span class="ruby-keyword kw">super</span>
192:     <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>