  <div id="fileHeader">
    <h1>color.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/sass/constant/color.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:21:07 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'sass/constant/literal'

module Sass::Constant # :nodoc:
  class Color &lt; Literal # :nodoc:

    HTML4_COLORS = {
      'black'   =&gt; 0x000000,
      'silver'  =&gt; 0xc0c0c0,
      'gray'    =&gt; 0x808080,
      'white'   =&gt; 0xffffff,
      'maroon'  =&gt; 0x800000,
      'red'     =&gt; 0xff0000,
      'purple'  =&gt; 0x800080,
      'fuchsia' =&gt; 0xff00ff,
      'green'   =&gt; 0x008000,
      'lime'    =&gt; 0x00ff00,
      'olive'   =&gt; 0x808000,
      'yellow'  =&gt; 0xffff00,
      'navy'    =&gt; 0x000080,
      'blue'    =&gt; 0x0000ff,
      'teal'    =&gt; 0x008080,
      'aqua'    =&gt; 0x00ffff
    }

    REGEXP = /\##{&quot;([0-9a-fA-F]{1,2})&quot; * 3}/

    def parse(value)
      if (value =~ REGEXP)
        @value = value.scan(REGEXP)[0].map { |num| num.ljust(2, num).to_i(16) }
      else
        color = HTML4_COLORS[value.downcase]
        @value = (0..2).map{ |n| color &gt;&gt; (n &lt;&lt; 3) &amp; 0xff }.reverse
      end
    end

    def plus(other)
      if other.is_a? Sass::Constant::String
        Sass::Constant::String.from_value(self.to_s + other.to_s)
      else
        piecewise(other, :+)
      end
    end

    def minus(other)
      if other.is_a? Sass::Constant::String
        raise NoMethodError.new(nil, :minus)
      else
        piecewise(other, :-)
      end
    end

    def times(other)
      if other.is_a? Sass::Constant::String
        raise NoMethodError.new(nil, :times)
      else
        piecewise(other, :*)
      end
    end

    def div(other)
      if other.is_a? Sass::Constant::String
        raise NoMethodError.new(nil, :div)
      else
        piecewise(other, :/)
      end
    end

    def mod(other)
      if other.is_a? Sass::Constant::String
        raise NoMethodError.new(nil, :mod)
      else
        piecewise(other, :%)
      end
    end

    def to_s
      red, green, blue = @value.map { |num| num.to_s(16).rjust(2, '0') }
      &quot;##{red}#{green}#{blue}&quot;
    end

    protected

    def self.filter_value(value)
      value.map { |num| num.to_i }
    end

    private

    def piecewise(other, operation)
      other_num = other.is_a? Number
      other_val = other.value

      rgb = []
      for i in (0...3)
        res = @value[i].send(operation, other_num ? other_val : other_val[i])
        rgb[i] = [ [res, 255].min, 0 ].max
      end
      Color.from_value(rgb)
    end
  end
end
</pre>
    </div>