  <div id="fileHeader">
    <h1>number.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/sass/constant/number.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sat Mar 28 20:21:07 +0100 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'sass/constant/literal'

module Sass::Constant  # :nodoc:
  class Number &lt; Literal # :nodoc:

    attr_reader :unit

    def parse(value)
      first, second, unit = value.scan(Literal::NUMBER)[0]
      @value = first.empty? ? second.to_i : &quot;#{first}#{second}&quot;.to_f
      @unit = unit.empty? ? nil : unit
    end

    def plus(other)
      if other.is_a? Number
        operate(other, :+)
      elsif other.is_a? Color
        other.plus(self)
      else
        Sass::Constant::String.from_value(self.to_s + other.to_s)
      end
    end

    def minus(other)
      if other.is_a? Number
        operate(other, :-)
      else
        raise NoMethodError.new(nil, :minus)
      end
    end

    def times(other)
      if other.is_a? Number
        operate(other, :*)
      elsif other.is_a? Color
        other.times(self)
      else
        raise NoMethodError.new(nil, :times)
      end
    end

    def div(other)
      if other.is_a? Number
        operate(other, :/)
      else
        raise NoMethodError.new(nil, :div)
      end
    end

    def mod(other)
      if other.is_a? Number
        operate(other, :%)
      else
        raise NoMethodError.new(nil, :mod)
      end
    end

    def to_s
      value = @value
      value = value.to_i if value % 1 == 0.0
      &quot;#{value}#{@unit}&quot;
    end

    protected

    def self.from_value(value, unit=nil)
      instance = super(value)
      instance.instance_variable_set('@unit', unit)
      instance
    end

    def operate(other, operation)
      unit = nil
      if other.unit.nil?
        unit = self.unit
      elsif self.unit.nil?
        unit = other.unit
      elsif other.unit == self.unit
        unit = self.unit
      else
        raise Sass::SyntaxError.new(&quot;Incompatible units: #{self.unit} and #{other.unit}.&quot;)
      end

      Number.from_value(self.value.send(operation, other.value), unit)
    end
  end
end
</pre>
    </div>