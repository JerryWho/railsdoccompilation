  <div id="fileHeader">
    <h1>railtie.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/haml/railtie.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Sun Jul 25 20:12:45 +0200 2010</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>if Haml::Util.ap_geq_3? &amp;&amp; !Haml::Util.ap_geq?(&quot;3.0.0.beta4&quot;)
  raise &lt;&lt;ERROR
Haml and Sass no longer support Rails 3 versions before beta 4.
  Please upgrade to Rails 3.0.0.beta4 or later.
ERROR
end

# Rails 3.0.0.beta.2+
if defined?(ActiveSupport) &amp;&amp; Haml::Util.has?(:public_method, ActiveSupport, :on_load)
  require 'haml/template/options'
  require 'sass/plugin/configuration'
  ActiveSupport.on_load(:before_initialize) do
    require 'sass'
    require 'sass/plugin'

    # Haml requires AV, but Sass doesn't
    ActiveSupport.on_load(:action_view) do
      Haml.init_rails(binding)
    end
  end
end
</pre>
    </div>