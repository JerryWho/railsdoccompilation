  <div id="fileHeader">
    <h1>namespace.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/nokogiri/ffi/xml/namespace.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 14:56:40 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>module Nokogiri
  module XML
    class Namespace
      # :stopdoc:

      attr_accessor :cstruct
      attr_accessor :document

      def prefix
        cstruct[:prefix].nil? ? nil : cstruct[:prefix] # TODO: encoding?
      end

      def href
        cstruct[:href].nil? ? nil : cstruct[:href] # TODO: encoding?
      end

      class &lt;&lt; self
        def wrap(document, node_struct)
          if node_struct.is_a?(FFI::Pointer)
            # cast native pointers up into a node cstruct
            return nil if node_struct.null?
            node_struct = LibXML::XmlNs.new(node_struct) 
          end

          ruby_node = node_struct.ruby_node
          return ruby_node unless ruby_node.nil?

          ns = Nokogiri::XML::Namespace.allocate
          ns.document = document.ruby_doc
          ns.cstruct = node_struct

          ns.cstruct.ruby_node = ns

          cache = ns.document.instance_variable_get(:@node_cache)
          cache &lt;&lt; ns

          ns
        end
      end

      # :startdoc:
    end
  end
end
</pre>
    </div>