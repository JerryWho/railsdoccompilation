  <div id="fileHeader">
    <h1>action-nokogiri.rb</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>lib/action-nokogiri.rb</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 19:03:28 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>require 'nokogiri'

#
#  to use this in your Rails view or controller tests, simply:
#
#  require 'action-nokogiri'
#
#  class KittehControllerTest &lt; ActionController::TestCase
#  def test_i_can_does_test_with_nokogiri
#    get(:index, {:wants =&gt; &quot;cheezburgers&quot;})
#    assert @response.html.at(&quot;h2.lolcats&quot;)
#  end
#
module ActionController
  module TestResponseBehavior # :nodoc:

    ###
    # Get your response as a Nokogiri::XML::Document using the
    # Nokogiri.HTML parser
    def html(flavor=nil)
      warn &quot;@response.html is deprecated and will be removed in nokogiri 1.4.0&quot;
      if flavor == :hpricot
        @_nokogiri_html_hpricot ||= Nokogiri::Hpricot(body)
      else
        @_nokogiri_html_vanilla ||= Nokogiri::HTML(body)
      end
    end

    ###
    # Get your response as a Nokogiri::XML::Document using the
    # Nokogiri.XML parser
    def xml
      warn &quot;@response.html is deprecated and will be removed in nokogiri 1.4.0&quot;
      @_nokogiri_xml ||= Nokogiri::XML(body)
    end

  end
end
</pre>
    </div>