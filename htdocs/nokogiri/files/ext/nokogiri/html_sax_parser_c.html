  <div id="fileHeader">
    <h1>html_sax_parser.c</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>ext/nokogiri/html_sax_parser.c</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 19:03:28 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>#include &lt;html_sax_parser.h&gt;

/*
 * call-seq:
 *  native_parse_file(data, encoding)
 *
 * Parse +data+ with +encoding+
 */
static VALUE native_parse_file(VALUE self, VALUE data, VALUE encoding)
{
  xmlSAXHandlerPtr handler;
  htmlDocPtr hdoc ;
  Data_Get_Struct(self, xmlSAXHandler, handler);
  hdoc = htmlSAXParseFile( StringValuePtr(data),
                           (const char *)StringValuePtr(encoding),
                           (htmlSAXHandlerPtr)handler,
                           (void *)self );
  xmlFreeDoc(hdoc);
  return data;
}

/*
 * call-seq:
 *  native_parse_memory(data, encoding)
 *
 * Parse +data+ with +encoding+
 */
static VALUE native_parse_memory(VALUE self, VALUE data, VALUE encoding)
{
  xmlSAXHandlerPtr handler;
  htmlDocPtr hdoc ;
  Data_Get_Struct(self, xmlSAXHandler, handler);
  hdoc = htmlSAXParseDoc(  (xmlChar *)StringValuePtr(data),
                           (const char *)StringValuePtr(encoding),
                           (htmlSAXHandlerPtr)handler,
                           (void *)self );
  xmlFreeDoc(hdoc);
  return data;
}

VALUE cNokogiriHtmlSaxParser ;
void init_html_sax_parser()
{
  VALUE nokogiri  = rb_define_module(&quot;Nokogiri&quot;);
  VALUE html      = rb_define_module_under(nokogiri, &quot;HTML&quot;);
  VALUE sax       = rb_define_module_under(html, &quot;SAX&quot;);
  /*
   * Nokogiri::HTML::SAX::Parser is used for parsing HTML with SAX
   * callbacks.
   */
  VALUE klass     = rb_define_class_under(sax, &quot;Parser&quot;, cNokogiriXmlSaxParser);

  cNokogiriHtmlSaxParser = klass;

  rb_define_private_method(klass, &quot;native_parse_memory&quot;, native_parse_memory, 2);
  rb_define_private_method(klass, &quot;native_parse_file&quot;, native_parse_file, 2);
}
</pre>
    </div>