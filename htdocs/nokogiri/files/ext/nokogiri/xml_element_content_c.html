  <div id="fileHeader">
    <h1>xml_element_content.c</h1>
    <table class="header-table">
    <tr class="top-aligned-row">
      <td><strong>Path:</strong></td>
      <td>ext/nokogiri/xml_element_content.c</td>
    </tr>
    <tr class="top-aligned-row">
      <td><strong>Last Update:</strong></td>
      <td>Mon Oct 12 19:40:25 +0200 2009</td>
    </tr>
    </table>
  </div>
 <!-- banner header -->

  <div id="bodyContent" >
    <h2>Source Code</h2>
    <pre>#include &lt;xml_element_content.h&gt;

VALUE cNokogiriXmlElementContent;

/*
 * call-seq:
 *  name
 *
 * Get the require element +name+
 */
static VALUE get_name(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  if(!elem-&gt;name) return Qnil;
  return NOKOGIRI_STR_NEW2(elem-&gt;name);
}

/*
 * call-seq:
 *  type
 *
 * Get the element content +type+.  Possible values are PCDATA, ELEMENT, SEQ,
 * or OR.
 */
static VALUE get_type(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  return INT2NUM((long)elem-&gt;type);
}

/*
 * call-seq:
 *  c1
 *
 * Get the first child.
 */
static VALUE get_c1(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  if(!elem-&gt;c1) return Qnil;
  return Nokogiri_wrap_element_content(rb_iv_get(self, &quot;@document&quot;), elem-&gt;c1);
}

/*
 * call-seq:
 *  c2
 *
 * Get the first child.
 */
static VALUE get_c2(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  if(!elem-&gt;c2) return Qnil;
  return Nokogiri_wrap_element_content(rb_iv_get(self, &quot;@document&quot;), elem-&gt;c2);
}

/*
 * call-seq:
 *  occur
 *
 * Get the element content +occur+ flag.  Possible values are ONCE, OPT, MULT
 * or PLUS.
 */
static VALUE get_occur(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  return INT2NUM((long)elem-&gt;ocur);
}

/*
 * call-seq:
 *  prefix
 *
 * Get the element content namespace +prefix+.
 */
static VALUE get_prefix(VALUE self)
{
  xmlElementContentPtr elem;
  Data_Get_Struct(self, xmlElementContent, elem);

  if(!elem-&gt;prefix) return Qnil;

  return NOKOGIRI_STR_NEW2(elem-&gt;prefix);
}

VALUE Nokogiri_wrap_element_content(VALUE doc, xmlElementContentPtr element)
{
  VALUE elem = Data_Wrap_Struct(cNokogiriXmlElementContent, 0, 0, element);

  // Setting the document is necessary so that this does not get GC'd until
  // the document is GC'd
  rb_iv_set(elem, &quot;@document&quot;, doc);

  return elem;
}

void init_xml_element_content()
{
  VALUE nokogiri = rb_define_module(&quot;Nokogiri&quot;);
  VALUE xml = rb_define_module_under(nokogiri, &quot;XML&quot;);

  VALUE klass = rb_define_class_under(xml, &quot;ElementContent&quot;, rb_cObject);

  cNokogiriXmlElementContent = klass;

  rb_define_method(klass, &quot;name&quot;, get_name, 0);
  rb_define_method(klass, &quot;type&quot;, get_type, 0);
  rb_define_method(klass, &quot;occur&quot;, get_occur, 0);
  rb_define_method(klass, &quot;prefix&quot;, get_prefix, 0);

  rb_define_private_method(klass, &quot;c1&quot;, get_c1, 0);
  rb_define_private_method(klass, &quot;c2&quot;, get_c2, 0);
}
</pre>
    </div>