  <div id="C00000009">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestAlter<br/>
  In:
<a href="#" onclick="jsHref('files/test/hpricot/test_alter_rb.html');">test/hpricot/test_alter.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000071&name=assert_changed" >assert_changed</a></li>
  <li><a href="index.html?a=M000062&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000066&name=test_add_class" >test_add_class</a></li>
  <li><a href="index.html?a=M000064&name=test_after" >test_after</a></li>
  <li><a href="index.html?a=M000063&name=test_before" >test_before</a></li>
  <li><a href="index.html?a=M000067&name=test_change_attributes" >test_change_attributes</a></li>
  <li><a href="index.html?a=M000070&name=test_remove_all_classes" >test_remove_all_classes</a></li>
  <li><a href="index.html?a=M000068&name=test_remove_attr" >test_remove_attr</a></li>
  <li><a href="index.html?a=M000069&name=test_remove_class" >test_remove_class</a></li>
  <li><a href="index.html?a=M000065&name=test_wrap" >test_wrap</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M000071" class="method">
  <div id="M000071_title" class="title">
    <b>assert_changed</b>(original, selector, set, &amp;block)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show source</a> ]</p>
  <div id="M000071_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 64</span>
64:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">assert_changed</span> <span class="ruby-identifier">original</span>, <span class="ruby-identifier">selector</span>, <span class="ruby-identifier">set</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>
65:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span>.<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
66:     <span class="ruby-identifier">assert</span> <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">original</span>.<span class="ruby-identifier">to_html</span>).<span class="ruby-identifier">search</span>(<span class="ruby-identifier">selector</span>).<span class="ruby-identifier">all?</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
67:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000062" class="method">
  <div id="M000062_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000062_source')" id="l_M000062_source">show source</a> ]</p>
  <div id="M000062_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 8:     <span class="ruby-keyword kw">super</span>
 9:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
10:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000066" class="method">
  <div id="M000066_title" class="title">
    <b>test_add_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show source</a> ]</p>
  <div id="M000066_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 30</span>
30:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_class</span>
31:     <span class="ruby-identifier">first_p</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p:first&quot;</span>).<span class="ruby-identifier">add_class</span>(<span class="ruby-value str">&quot;testing123&quot;</span>)
32:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">first_p</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">&quot;class&quot;</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;testing123&quot;</span>)
33:     <span class="ruby-identifier">assert</span>((<span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">to_html</span>)<span class="ruby-operator">/</span><span class="ruby-value str">&quot;p:first&quot;</span>)[<span class="ruby-value">0</span>][<span class="ruby-value str">&quot;class&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;testing123&quot;</span>))
34:     <span class="ruby-comment cmt">####</span>
35:     <span class="ruby-comment cmt"># Modified.  We do not support OB1 bug.</span>
36:     <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span>(<span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">to_html</span>)<span class="ruby-operator">/</span><span class="ruby-value str">&quot;p:gt(1)&quot;</span>)[<span class="ruby-value">0</span>][<span class="ruby-value str">&quot;class&quot;</span>].<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot; &quot;</span>).<span class="ruby-identifier">include?</span>(<span class="ruby-value str">&quot;testing123&quot;</span>)
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000064" class="method">
  <div id="M000064_title" class="title">
    <b>test_after</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show source</a> ]</p>
  <div id="M000064_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 18</span>
18:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_after</span>
19:     <span class="ruby-identifier">test_inf</span> = <span class="ruby-value str">&quot;&lt;link rel='stylesheet' href='test_inf.css' /&gt;&quot;</span>
20:     <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;link&quot;</span>)[<span class="ruby-value">-1</span>].<span class="ruby-identifier">after</span>(<span class="ruby-identifier">test_inf</span>)
21:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test_inf.css'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;link&quot;</span>)[<span class="ruby-value">-1</span>][<span class="ruby-value str">'href'</span>]
22:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000063" class="method">
  <div id="M000063_title" class="title">
    <b>test_before</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show source</a> ]</p>
  <div id="M000063_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 12</span>
12:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_before</span>
13:     <span class="ruby-identifier">test0</span> = <span class="ruby-value str">&quot;&lt;link rel='stylesheet' href='test0.css' /&gt;&quot;</span>
14:     <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;link&quot;</span>).<span class="ruby-identifier">before</span>(<span class="ruby-identifier">test0</span>)
15:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test0.css'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;link&quot;</span>).<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">'href'</span>].<span class="ruby-identifier">to_s</span>
16:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000067" class="method">
  <div id="M000067_title" class="title">
    <b>test_change_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show source</a> ]</p>
  <div id="M000067_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_change_attributes</span>
40:     <span class="ruby-identifier">all_ps</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p&quot;</span>).<span class="ruby-identifier">attr</span>(<span class="ruby-value str">&quot;title&quot;</span>, <span class="ruby-value str">&quot;Some Title&quot;</span>)
41:     <span class="ruby-identifier">all_as</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;a&quot;</span>).<span class="ruby-identifier">attr</span>(<span class="ruby-value str">&quot;href&quot;</span>, <span class="ruby-value str">&quot;http://my_new_href.com&quot;</span>)
42:     <span class="ruby-identifier">all_lb</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;link&quot;</span>).<span class="ruby-identifier">attr</span>(<span class="ruby-value str">&quot;href&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">name</span> }
43:     <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span> <span class="ruby-comment cmt"># try to shake out GC bugs with xpath and node sets.</span>
44:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;p&quot;</span>, <span class="ruby-identifier">all_ps</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">&quot;title&quot;</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Some Title&quot;</span>}
45:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">all_as</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">&quot;href&quot;</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;http://my_new_href.com&quot;</span>}
46:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;link&quot;</span>, <span class="ruby-identifier">all_lb</span>) {<span class="ruby-operator">|</span><span class="ruby-identifier">a</span><span class="ruby-operator">|</span> <span class="ruby-identifier">a</span>.<span class="ruby-identifier">attributes</span>[<span class="ruby-value str">&quot;href&quot;</span>].<span class="ruby-identifier">to_s</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;link&quot;</span> }
47:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000070" class="method">
  <div id="M000070_title" class="title">
    <b>test_remove_all_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show source</a> ]</p>
  <div id="M000070_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 59</span>
59:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_all_classes</span>
60:     <span class="ruby-identifier">all_c2</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p[@class]&quot;</span>).<span class="ruby-identifier">remove_class</span>
61:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;p[@class]&quot;</span>, <span class="ruby-identifier">all_c2</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>[<span class="ruby-value str">'class'</span>].<span class="ruby-identifier">nil?</span> }
62:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000068" class="method">
  <div id="M000068_title" class="title">
    <b>test_remove_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show source</a> ]</p>
  <div id="M000068_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 49</span>
49:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_attr</span>
50:     <span class="ruby-identifier">all_rl</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;link&quot;</span>).<span class="ruby-identifier">remove_attr</span>(<span class="ruby-value str">&quot;href&quot;</span>)
51:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;link&quot;</span>, <span class="ruby-identifier">all_rl</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">link</span><span class="ruby-operator">|</span> <span class="ruby-identifier">link</span>[<span class="ruby-value str">'href'</span>].<span class="ruby-identifier">nil?</span> }
52:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000069" class="method">
  <div id="M000069_title" class="title">
    <b>test_remove_class</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show source</a> ]</p>
  <div id="M000069_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 54</span>
54:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_class</span>
55:     <span class="ruby-identifier">all_c1</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p[@class*='last']&quot;</span>).<span class="ruby-identifier">remove_class</span>(<span class="ruby-value str">&quot;last&quot;</span>)
56:     <span class="ruby-identifier">assert_changed</span>(<span class="ruby-ivar">@basic</span>, <span class="ruby-value str">&quot;p[@class*='last']&quot;</span>, <span class="ruby-identifier">all_c1</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>[<span class="ruby-value str">'class'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'final'</span> }
57:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000065" class="method">
  <div id="M000065_title" class="title">
    <b>test_wrap</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show source</a> ]</p>
  <div id="M000065_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_alter.rb, line 24</span>
24:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_wrap</span>
25:     <span class="ruby-identifier">ohmy</span> = (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p.ohmy&quot;</span>).<span class="ruby-identifier">wrap</span>(<span class="ruby-value str">&quot;&lt;div id='wrapper'&gt;&lt;/div&gt;&quot;</span>)
26:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'wrapper'</span>, <span class="ruby-identifier">ohmy</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">parent</span>[<span class="ruby-value str">'id'</span>]
27:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ohmy'</span>, <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">to_html</span>).<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;#wrapper&quot;</span>).<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>][<span class="ruby-value str">'class'</span>]
28:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>