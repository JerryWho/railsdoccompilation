  <div id="C00000011">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestParser<br/>
  In:
<a href="#" onclick="jsHref('files/test/hpricot/test_paths_rb.html');">test/hpricot/test_paths.rb</a>
<a href="#" onclick="jsHref('files/test/hpricot/test_parser_rb.html');">test/hpricot/test_parser.rb</a>
<a href="#" onclick="jsHref('files/test/hpricot/test_xml_rb.html');">test/hpricot/test_xml.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000072&name=scan_basic" >scan_basic</a></li>
  <li><a href="index.html?a=M000080&name=test_abs_xpath" >test_abs_xpath</a></li>
  <li><a href="index.html?a=M000083&name=test_alt_predicates" >test_alt_predicates</a></li>
  <li><a href="index.html?a=M000090&name=test_body_newlines" >test_body_newlines</a></li>
  <li><a href="index.html?a=M000098&name=test_buffer_error" >test_buffer_error</a></li>
  <li><a href="index.html?a=M000105&name=test_casing" >test_casing</a></li>
  <li><a href="index.html?a=M000087&name=test_class_search" >test_class_search</a></li>
  <li><a href="index.html?a=M000078&name=test_css_negation" >test_css_negation</a></li>
  <li><a href="index.html?a=M000089&name=test_empty_comment" >test_empty_comment</a></li>
  <li><a href="index.html?a=M000066&name=test_filter_by_attr" >test_filter_by_attr</a></li>
  <li><a href="index.html?a=M000067&name=test_filter_contains" >test_filter_contains</a></li>
  <li><a href="index.html?a=M000101&name=test_filters" >test_filters</a></li>
  <li><a href="index.html?a=M000068&name=test_get_element_by_id" >test_get_element_by_id</a></li>
  <li><a href="index.html?a=M000069&name=test_get_element_by_tag_name" >test_get_element_by_tag_name</a></li>
  <li><a href="index.html?a=M000084&name=test_insert_after" >test_insert_after</a></li>
  <li><a href="index.html?a=M000085&name=test_insert_before" >test_insert_before</a></li>
  <li><a href="index.html?a=M000093&name=test_javascripts" >test_javascripts</a></li>
  <li><a href="index.html?a=M000102&name=test_keep_cdata" >test_keep_cdata</a></li>
  <li><a href="index.html?a=M000088&name=test_kleene_star" >test_kleene_star</a></li>
  <li><a href="index.html?a=M000096&name=test_mangled_tags" >test_mangled_tags</a></li>
  <li><a href="index.html?a=M000086&name=test_many_paths" >test_many_paths</a></li>
  <li><a href="index.html?a=M000103&name=test_namespace" >test_namespace</a></li>
  <li><a href="index.html?a=M000094&name=test_nested_scripts" >test_nested_scripts</a></li>
  <li><a href="index.html?a=M000091&name=test_nested_twins" >test_nested_twins</a></li>
  <li><a href="index.html?a=M000104&name=test_normally_empty" >test_normally_empty</a></li>
  <li><a href="index.html?a=M000070&name=test_output_basic" >test_output_basic</a></li>
  <li><a href="index.html?a=M000074&name=test_pace" >test_pace</a></li>
  <li><a href="index.html?a=M000073&name=test_positional" >test_positional</a></li>
  <li><a href="index.html?a=M000081&name=test_predicates" >test_predicates</a></li>
  <li><a href="index.html?a=M000097&name=test_procins" >test_procins</a></li>
  <li><a href="index.html?a=M000079&name=test_remove_attribute" >test_remove_attribute</a></li>
  <li><a href="index.html?a=M000076&name=test_reparent" >test_reparent</a></li>
  <li><a href="index.html?a=M000063&name=test_roundtrip" >test_roundtrip</a></li>
  <li><a href="index.html?a=M000071&name=test_scan_basic" >test_scan_basic</a></li>
  <li><a href="index.html?a=M000075&name=test_scan_boingboing" >test_scan_boingboing</a></li>
  <li><a href="index.html?a=M000065&name=test_scan_text" >test_scan_text</a></li>
  <li><a href="index.html?a=M000100&name=test_screwed_xmlns" >test_screwed_xmlns</a></li>
  <li><a href="index.html?a=M000064&name=test_set_attr" >test_set_attr</a></li>
  <li><a href="index.html?a=M000077&name=test_siblings" >test_siblings</a></li>
  <li><a href="index.html?a=M000082&name=test_tag_case" >test_tag_case</a></li>
  <li><a href="index.html?a=M000106&name=test_text_tags" >test_text_tags</a></li>
  <li><a href="index.html?a=M000095&name=test_uswebgen" >test_uswebgen</a></li>
  <li><a href="index.html?a=M000092&name=test_wildcard" >test_wildcard</a></li>
  <li><a href="index.html?a=M000099&name=test_youtube_attr" >test_youtube_attr</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M000072" class="method">
  <div id="M000072_title" class="title">
    <b>scan_basic</b>(doc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000072_source')" id="l_M000072_source">show source</a> ]</p>
  <div id="M000072_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 62</span>
62:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan_basic</span> <span class="ruby-identifier">doc</span>
63:     <span class="ruby-comment cmt">####</span>
64:     <span class="ruby-comment cmt"># Modified: asserting kind is not duck typey</span>
65:     <span class="ruby-comment cmt">#assert_kind_of Hpricot::XMLDecl, doc.children.first</span>
66:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_s</span> 
67:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#link1'</span>)[<span class="ruby-value str">'id'</span>]
68:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;p a&quot;</span>)[<span class="ruby-value str">'id'</span>]
69:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:p</span><span class="ruby-operator">/</span><span class="ruby-identifier">:a</span>).<span class="ruby-identifier">first</span>[<span class="ruby-value str">'id'</span>]
70:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p'</span>).<span class="ruby-identifier">at</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'id'</span>)
71: 
72:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link2'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'.ohmy'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'id'</span>)
73:     <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>)[<span class="ruby-value">2</span>], (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'[text()=&quot;The third paragraph&quot;]'</span>)[<span class="ruby-value">0</span>])
74:     <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>)[<span class="ruby-value">3</span>], (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'b'</span>)[<span class="ruby-value">0</span>])
75:     <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>)[<span class="ruby-value">1</span>], (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'a[@id=&quot;link2&quot;]'</span>)[<span class="ruby-value">0</span>])
76:     <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>)[<span class="ruby-value">3</span>], (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'.last'</span>)[<span class="ruby-value">0</span>])
77:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'*'</span>).<span class="ruby-identifier">length</span>
78:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'* *'</span>).<span class="ruby-identifier">length</span>
79:     <span class="ruby-identifier">eles</span> = (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'.ohmy'</span>)
80:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">eles</span>.<span class="ruby-identifier">length</span>
81:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'ohmy'</span>, <span class="ruby-identifier">eles</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'class'</span>)
82:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p:not(.ohmy)'</span>).<span class="ruby-identifier">length</span>
83: 
84:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">not</span>(<span class="ruby-value str">'.ohmy'</span>).<span class="ruby-identifier">length</span>
85:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">not</span>(<span class="ruby-identifier">eles</span>.<span class="ruby-identifier">first</span>).<span class="ruby-identifier">length</span>
86:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'[@class]'</span>).<span class="ruby-identifier">length</span>
87:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'last final'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p[@class~=&quot;final&quot;]'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'class'</span>)
88:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">filter</span>(<span class="ruby-value str">'[@class~=&quot;final&quot;]'</span>).<span class="ruby-identifier">length</span>
89:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p &gt; a'</span>).<span class="ruby-identifier">length</span>
90:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p.ohmy &gt; a'</span>).<span class="ruby-identifier">length</span>
91:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p / a'</span>).<span class="ruby-identifier">length</span>
92:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'link ~ link'</span>).<span class="ruby-identifier">length</span>
93:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'title ~ link'</span>).<span class="ruby-identifier">length</span>
94:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p/text()&quot;</span>).<span class="ruby-identifier">length</span>
95:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">6</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p[a]//text()&quot;</span>).<span class="ruby-identifier">length</span>
96:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p/a/text()&quot;</span>).<span class="ruby-identifier">length</span>
97:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000080" class="method">
  <div id="M000080_title" class="title">
    <b>test_abs_xpath</b>()
  </div>
  <div class="description">
  <p>
Modified: hpricot is giving incorrect counts. Libxml gets it right.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show source</a> ]</p>
  <div id="M000080_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 168</span>
168:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_abs_xpath</span>
169:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
170:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/html/body//p[@class='posted']&quot;</span>).<span class="ruby-identifier">length</span>
171:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/*/body//p[@class='posted']&quot;</span>).<span class="ruby-identifier">length</span>
172:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">18</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//script&quot;</span>).<span class="ruby-identifier">length</span>
173:     <span class="ruby-identifier">divs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//script/../div&quot;</span>)
174:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>,  <span class="ruby-identifier">divs</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment cmt"># hpricot says this is 1, but that's wrong.</span>
175:     <span class="ruby-identifier">imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p/a/img'</span>)
176:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">imgs</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment cmt"># hpricot says this is 15, but that's wrong.</span>
177:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">16</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p/a/img'</span>).<span class="ruby-identifier">length</span>
178:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'img'</span> }
179:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000083" class="method">
  <div id="M000083_title" class="title">
    <b>test_alt_predicates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show source</a> ]</p>
  <div id="M000083_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 200</span>
200:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_alt_predicates</span>
201:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
202:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'table/tr:last'</span>).<span class="ruby-identifier">length</span> <span class="ruby-comment cmt"># MODIFIED to not have '//' prefix</span>
203: 
204:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
205:     <span class="ruby-comment cmt">##</span>
206:     <span class="ruby-comment cmt">#  MODIFIED:</span>
207:     <span class="ruby-comment cmt">#  hpricot has an off-by-one bug eith eq-and-friends.</span>
208:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;The third paragraph&lt;/p&gt;&quot;</span>,
209:         <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:eq(3)'</span>).<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># under Hpricot this was eq(2)</span>
210:     <span class="ruby-comment cmt">##</span>
211:     <span class="ruby-comment cmt">#  MODIFIED: to be blank-agnostic, because Nokogiri's to_html is slightly different compared to Hpricot.</span>
212:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;p class=&quot;last final&quot;&gt;&lt;b&gt;THE FINAL PARAGRAPH&lt;/b&gt;&lt;/p&gt;'</span>,
213:         <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:last'</span>).<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s+/</span>,<span class="ruby-value str">' '</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
214:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'last final'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:last-of-type'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'class'</span>) <span class="ruby-comment cmt"># MODIFIED to not have '//' prefix</span>
215:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000090" class="method">
  <div id="M000090_title" class="title">
    <b>test_body_newlines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show source</a> ]</p>
  <div id="M000090_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 280</span>
280:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_body_newlines</span>
281:     <span class="ruby-ivar">@immob</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">IMMOB</span>)
282:     <span class="ruby-identifier">body</span> = <span class="ruby-ivar">@immob</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:body</span>)
283:     {<span class="ruby-value str">'background'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>, <span class="ruby-value str">'bgcolor'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#ffffff'</span>, <span class="ruby-value str">'text'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#000000'</span>, <span class="ruby-value str">'marginheight'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>,
284:      <span class="ruby-value str">'marginwidth'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'leftmargin'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'topmargin'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'link'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#000066'</span>,
285:      <span class="ruby-value str">'alink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#ff6600'</span>, <span class="ruby-value str">'hlink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;#ff6600&quot;</span>, <span class="ruby-value str">'vlink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;#000000&quot;</span>}.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
286:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">v</span>, <span class="ruby-identifier">body</span>[<span class="ruby-identifier">k</span>]
287:     <span class="ruby-keyword kw">end</span>
288:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000098" class="method">
  <div id="M000098_title" class="title">
    <b>test_buffer_error</b>()
  </div>
  <div class="description">
  <p>
Altered&#8230; libxml does not get a buffer error
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show source</a> ]</p>
  <div id="M000098_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 343</span>
343:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_buffer_error</span>
344:     <span class="ruby-identifier">assert_nothing_raised</span> {
345:       <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-node">%{&lt;p&gt;\n\n&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot;  value=&quot;#{((&quot;X&quot; * 2000) + &quot;\n&quot;) * 22}&quot; /&gt;\n\n&lt;/p&gt;}</span>)
346:     }
347:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000105" class="method">
  <div id="M000105_title" class="title">
    <b>test_casing</b>()
  </div>
  <div class="description">
  <p>
make sure XML doesn&#8217;t get downcased
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show source</a> ]</p>
  <div id="M000105_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_casing</span>
16:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">WHY</span>)
17: 
18:     <span class="ruby-comment cmt">### Modified.</span>
19:     <span class="ruby-comment cmt"># I don't want to differentiate pseudo classes from namespaces.  If</span>
20:     <span class="ruby-comment cmt"># you're parsing xml, use XPath.  That's what its for.  :-P</span>
21:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hourly&quot;</span>, (<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span> <span class="ruby-value str">&quot;//sy:updatePeriod&quot;</span>).<span class="ruby-identifier">content</span>
22:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;guid[@isPermaLink]&quot;</span>).<span class="ruby-identifier">length</span>
23:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000087" class="method">
  <div id="M000087_title" class="title">
    <b>test_class_search</b>()
  </div>
  <div class="description">
  <pre>
 Modified.  Epic Fail.  We're on the duck type train folks.
</pre>
<p>
def test_stacked_search
</p>
<pre>
  @boingboing = Hpricot.parse(TestFiles::BOINGBOING)
  assert_kind_of Hpricot::Elements, @boingboing.search('//div/p').search('a img')
</pre>
<p>
end
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show source</a> ]</p>
  <div id="M000087_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_search</span>
251:     <span class="ruby-comment cmt"># test case sent by Chih-Chao Lam</span>
252:     <span class="ruby-comment cmt"># Modified.  libxml corrects this differently than hpricot</span>
253:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;div class=xyz '&gt;abc&lt;/div&gt;&quot;</span>)
254:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.xyz&quot;</span>).<span class="ruby-identifier">length</span>
255: 
256:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;div class=xyz&gt;abc&lt;/div&gt;&lt;div class=abc&gt;xyz&lt;/div&gt;&quot;</span>)
257:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.xyz&quot;</span>).<span class="ruby-identifier">length</span>
258:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*&quot;</span>).<span class="ruby-identifier">length</span>
259:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000078" class="method">
  <div id="M000078_title" class="title">
    <b>test_css_negation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show source</a> ]</p>
  <div id="M000078_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 155</span>
155:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_negation</span>
156:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">'p:not(.final)'</span>).<span class="ruby-identifier">length</span>
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000089" class="method">
  <div id="M000089_title" class="title">
    <b>test_empty_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show source</a> ]</p>
  <div id="M000089_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 270</span>
270:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_comment</span>
271:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;!----&gt;&lt;/p&gt;&quot;</span>)
272:     <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//body'</span>).<span class="ruby-identifier">first</span>
273:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comment?</span>
274: 
275:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;!-- --&gt;&lt;/p&gt;&quot;</span>)
276:     <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//body'</span>).<span class="ruby-identifier">first</span>
277:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comment?</span>
278:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000066" class="method">
  <div id="M000066_title" class="title">
    <b>test_filter_by_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000066_source')" id="l_M000066_source">show source</a> ]</p>
  <div id="M000066_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filter_by_attr</span>
27:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
28: 
29:     <span class="ruby-comment cmt"># this link is escaped in the doc</span>
30:     <span class="ruby-identifier">link</span> = <span class="ruby-value str">'http://www.youtube.com/watch?v=TvSNXyNw26g&amp;search=chris%20ware'</span>
31:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">link</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">at</span>(<span class="ruby-node">&quot;a[@href='#{link}']&quot;</span>)[<span class="ruby-value str">'href'</span>]
32:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000067" class="method">
  <div id="M000067_title" class="title">
    <b>test_filter_contains</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000067_source')" id="l_M000067_source">show source</a> ]</p>
  <div id="M000067_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 34</span>
34:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filter_contains</span>
35:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
36:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;title&gt;Sample XHTML&lt;/title&gt;'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;title:contains('Sample')&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span>
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000101" class="method">
  <div id="M000101_title" class="title">
    <b>test_filters</b>()
  </div>
  <div class="description">
  <pre>
 Reported by Jonathan Nichols on the Hpricot list (24 May 2007)
 MODIFIED:  This is an issue with libxml which we cannot deal with....
</pre>
<p>
def test_self_closed_form
</p>
<pre>
  doc = Nokogiri.Hpricot(&lt;&lt;-edoc)
    &lt;body&gt;
    &lt;form action=&quot;/loginRegForm&quot; name=&quot;regForm&quot; method=&quot;POST&quot; /&gt;
    &lt;input type=&quot;button&quot;&gt;
    &lt;/form&gt;
    &lt;/body&gt;
  edoc
  assert_equal &quot;button&quot;, doc.at(&quot;//form/input&quot;)['type']
</pre>
<p>
end
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show source</a> ]</p>
  <div id="M000101_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 399</span>
399:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filters</span>
400:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
401:     <span class="ruby-comment cmt">##</span>
402:     <span class="ruby-comment cmt">#  MODIFIED:</span>
403:     <span class="ruby-comment cmt">#  Hpricot considers nodes with text-only (but no child tags) to be empty.</span>
404:     <span class="ruby-comment cmt">#  Nokogiri considers that any content makes a parent.</span>
405:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title:parent&quot;</span>).<span class="ruby-identifier">size</span> <span class="ruby-comment cmt"># so this was 0 under Hpricot</span>
406:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p:parent&quot;</span>).<span class="ruby-identifier">size</span>
407:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title:empty&quot;</span>).<span class="ruby-identifier">size</span>
408:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;link:empty&quot;</span>).<span class="ruby-identifier">size</span>
409:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000068" class="method">
  <div id="M000068_title" class="title">
    <b>test_get_element_by_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000068_source')" id="l_M000068_source">show source</a> ]</p>
  <div id="M000068_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_element_by_id</span>
40:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
41:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">get_element_by_id</span>(<span class="ruby-value str">'link1'</span>)[<span class="ruby-value str">'id'</span>]
42:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">get_element_by_id</span>(<span class="ruby-value str">'body1'</span>).<span class="ruby-identifier">get_element_by_id</span>(<span class="ruby-value str">'link1'</span>).<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'id'</span>)
43:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000069" class="method">
  <div id="M000069_title" class="title">
    <b>test_get_element_by_tag_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000069_source')" id="l_M000069_source">show source</a> ]</p>
  <div id="M000069_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_element_by_tag_name</span>
46:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
47:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">get_elements_by_tag_name</span>(<span class="ruby-value str">'a'</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'id'</span>)
48:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">get_elements_by_tag_name</span>(<span class="ruby-value str">'body'</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">get_element_by_id</span>(<span class="ruby-value str">'link1'</span>).<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'id'</span>)
49:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000084" class="method">
  <div id="M000084_title" class="title">
    <b>test_insert_after</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show source</a> ]</p>
  <div id="M000084_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_insert_after</span> <span class="ruby-comment cmt"># ticket #63</span>
218:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
219:     (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'div'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
220:       <span class="ruby-identifier">element</span>.<span class="ruby-identifier">after</span>(<span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>)
221:     <span class="ruby-keyword kw">end</span>
222:     <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>,
223:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
224:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000085" class="method">
  <div id="M000085_title" class="title">
    <b>test_insert_before</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show source</a> ]</p>
  <div id="M000085_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 226</span>
226:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_insert_before</span> <span class="ruby-comment cmt"># ticket #61</span>
227:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
228:     (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'div'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
229:       <span class="ruby-identifier">element</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>)
230:     <span class="ruby-keyword kw">end</span>
231:     <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;'</span>,
232:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
233:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000093" class="method">
  <div id="M000093_title" class="title">
    <b>test_javascripts</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show source</a> ]</p>
  <div id="M000093_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 301</span>
301:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_javascripts</span>
302:     <span class="ruby-ivar">@immob</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">IMMOB</span>)
303:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@immob</span><span class="ruby-operator">/</span><span class="ruby-identifier">:script</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&lt;LINK/</span>).<span class="ruby-identifier">length</span>
304:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000102" class="method">
  <div id="M000102_title" class="title">
    <b>test_keep_cdata</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show source</a> ]</p>
  <div id="M000102_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 411</span>
411:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_keep_cdata</span>
412:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">%{&lt;script&gt; /*&lt;![CDATA[*/
413:     /*]]&gt;*/ &lt;/script&gt;}</span>
414:     <span class="ruby-comment cmt"># MODIFIED: if you want the cdata, to_xml it</span>
415:     <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">str</span>, <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">str</span>).<span class="ruby-identifier">to_xml</span>
416:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000088" class="method">
  <div id="M000088_title" class="title">
    <b>test_kleene_star</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show source</a> ]</p>
  <div id="M000088_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 261</span>
261:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_kleene_star</span>
262:     <span class="ruby-comment cmt"># bug noticed by raja bhatia</span>
263:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;span class='small'&gt;1&lt;/span&gt;&lt;div class='large'&gt;2&lt;/div&gt;&lt;div class='small'&gt;3&lt;/div&gt;&lt;span class='blue large'&gt;4&lt;/span&gt;&quot;</span>)
264:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*[@class*='small']&quot;</span>).<span class="ruby-identifier">length</span>
265:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*.small&quot;</span>).<span class="ruby-identifier">length</span>
266:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.small&quot;</span>).<span class="ruby-identifier">length</span>
267:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.large&quot;</span>).<span class="ruby-identifier">length</span>
268:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000096" class="method">
  <div id="M000096_title" class="title">
    <b>test_mangled_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show source</a> ]</p>
  <div id="M000096_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 321</span>
321:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mangled_tags</span>
322:     [<span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' method='post' action='/units/a/login/1,13088,779-1,00.html'?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
323:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' ?URL= method='post' action='/units/a/login/1,13088,779-1,00.html'&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
324:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm'?URL= ?URL= method='post' action='/units/a/login/1,13088,779-1,00.html'?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
325:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' method='post' action='/units/a/login/1,13088,779-1,00.html' ?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>].
326:     <span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
327:       <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">str</span>)
328:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:form</span>).<span class="ruby-identifier">length</span>
329:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/units/a/login/1,13088,779-1,00.html'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;form&quot;</span>)[<span class="ruby-value str">'action'</span>]
330:     <span class="ruby-keyword kw">end</span>
331:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000086" class="method">
  <div id="M000086_title" class="title">
    <b>test_many_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show source</a> ]</p>
  <div id="M000086_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 235</span>
235:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_many_paths</span>
236:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
237:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">62</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p.posted, link[@rel=&quot;alternate&quot;]'</span>).<span class="ruby-identifier">length</span>
238:     <span class="ruby-comment cmt">###</span>
239:     <span class="ruby-comment cmt"># Modified.  I don't want to support this syntax.  Just use a comma.</span>
240:     <span class="ruby-comment cmt">#assert_equal 20, @boingboing.search('//div/p[a/img]|//link[@rel=&quot;alternate&quot;]').length</span>
241:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000103" class="method">
  <div id="M000103_title" class="title">
    <b>test_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show source</a> ]</p>
  <div id="M000103_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 418</span>
418:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace</span>
419:     <span class="ruby-identifier">chunk</span> = <span class="ruby-value str">&quot;&lt;a xmlns:t=\&quot;http://www.nexopia.com/dev/template\&quot;&gt;\n&lt;t:sam&gt;hi &lt;/t:sam&gt;\n&lt;/a&gt;\n&quot;</span>
420:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">chunk</span>)
421:     <span class="ruby-identifier">assert</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//t:sam&quot;</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>) <span class="ruby-comment cmt"># at least this should probably work</span>
422:     <span class="ruby-comment cmt"># assert (doc/&quot;//sam&quot;).size &gt; 0  # this would be nice </span>
423:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000094" class="method">
  <div id="M000094_title" class="title">
    <b>test_nested_scripts</b>()
  </div>
  <div class="description">
  <p>
Modified. This test passes with later versions of libxml
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show source</a> ]</p>
  <div id="M000094_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 308</span>
308:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_scripts</span>
309:     <span class="ruby-ivar">@week9</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">WEEK9</span>)
310:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">LIBXML_VERSION</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'2.6.16'</span>
311:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">14</span>, (<span class="ruby-ivar">@week9</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;a&quot;</span>).<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value str">&quot;GameCenter&quot;</span> }.<span class="ruby-identifier">length</span>
312:     <span class="ruby-keyword kw">end</span>
313:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000091" class="method">
  <div id="M000091_title" class="title">
    <b>test_nested_twins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show source</a> ]</p>
  <div id="M000091_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 290</span>
290:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_twins</span>
291:     <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-value str">&quot;&lt;div&gt;Hi&lt;div&gt;there&lt;/div&gt;&lt;/div&gt;&quot;</span>)
292:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-ivar">@doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;div div&quot;</span>).<span class="ruby-identifier">length</span>
293:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000104" class="method">
  <div id="M000104_title" class="title">
    <b>test_normally_empty</b>()
  </div>
  <div class="description">
  <p>
normally, the link tags are empty HTML tags. contributed by laudney.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show source</a> ]</p>
  <div id="M000104_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_normally_empty</span>
 9:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;rss&gt;&lt;channel&gt;&lt;title&gt;this is title&lt;/title&gt;&lt;link&gt;http://fake.com&lt;/link&gt;&lt;/channel&gt;&lt;/rss&gt;&quot;</span>)
10:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;this is title&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:rss</span><span class="ruby-operator">/</span><span class="ruby-identifier">:channel</span><span class="ruby-operator">/</span><span class="ruby-identifier">:title</span>).<span class="ruby-identifier">text</span>
11:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;http://fake.com&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:rss</span><span class="ruby-operator">/</span><span class="ruby-identifier">:channel</span><span class="ruby-operator">/</span><span class="ruby-identifier">:link</span>).<span class="ruby-identifier">text</span>
12:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000070" class="method">
  <div id="M000070_title" class="title">
    <b>test_output_basic</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000070_source')" id="l_M000070_source">show source</a> ]</p>
  <div id="M000070_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 51</span>
51:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_output_basic</span>
52:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
53:     <span class="ruby-ivar">@basic2</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">inner_html</span>)
54:     <span class="ruby-identifier">scan_basic</span> <span class="ruby-ivar">@basic2</span>
55:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000074" class="method">
  <div id="M000074_title" class="title">
    <b>test_pace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show source</a> ]</p>
  <div id="M000074_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 106</span>
106:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pace</span>
107:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">PACE_APPLICATION</span>)
108:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'get'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'form[@name=frmSect11]'</span>)[<span class="ruby-value str">'method'</span>]
109:     <span class="ruby-comment cmt"># assert_equal '2', doc.at('#hdnSpouse')['value']</span>
110:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000073" class="method">
  <div id="M000073_title" class="title">
    <b>test_positional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show source</a> ]</p>
  <div id="M000073_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 99</span>
 99:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_positional</span>
100:     <span class="ruby-identifier">h</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>( <span class="ruby-value str">&quot;&lt;div&gt;&lt;br/&gt;&lt;p&gt;one&lt;/p&gt;&lt;p&gt;two&lt;/p&gt;&lt;/div&gt;&quot;</span> )
101:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:eq(1)&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: eq(0) -&gt; eq(1), and removed initial '//'</span>
102:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:first&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: removed initial '//'</span>
103:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:first()&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: removed initial '//'</span>
104:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000081" class="method">
  <div id="M000081_title" class="title">
    <b>test_predicates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show source</a> ]</p>
  <div id="M000081_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 181</span>
181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_predicates</span>
182:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
183:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//link[@rel=&quot;alternate&quot;]'</span>).<span class="ruby-identifier">length</span>
184:     <span class="ruby-identifier">p_imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p[/a/img]'</span>)
185:     <span class="ruby-comment cmt">#assert_equal 15, p_imgs.length</span>
186:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'p'</span> }
187:     <span class="ruby-identifier">p_imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p[a/img]'</span>)
188:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">length</span>
189:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'p'</span> }
190:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//input[@checked]'</span>).<span class="ruby-identifier">length</span>
191:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000097" class="method">
  <div id="M000097_title" class="title">
    <b>test_procins</b>()
  </div>
  <div class="description">
  <p>
Modified. Added question. Don&#8216;t care.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show source</a> ]</p>
  <div id="M000097_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 335</span>
335:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_procins</span>
336:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">Hpricot</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;?php print('hello') ?&gt;\n&lt;?xml blah='blah'?&gt;&quot;</span>)
337:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;php&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">target</span>
338:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;blah='blah'?&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">content</span> <span class="ruby-comment cmt">#&quot;# quote added so emacs ruby-mode parser doesn't barf</span>
339:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000079" class="method">
  <div id="M000079_title" class="title">
    <b>test_remove_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show source</a> ]</p>
  <div id="M000079_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_attribute</span>
161:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
162:     (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-identifier">:p</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ele</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">remove_attribute</span>(<span class="ruby-value str">'class'</span>) }
163:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">'p[@class]'</span>).<span class="ruby-identifier">length</span>
164:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000076" class="method">
  <div id="M000076_title" class="title">
    <b>test_reparent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show source</a> ]</p>
  <div id="M000076_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 136</span>
136:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reparent</span>
137:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-value str">%{&lt;div id=&quot;blurb_1&quot;&gt;&lt;/div&gt;}</span>)
138:     <span class="ruby-identifier">div1</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'#blurb_1'</span>)
139:     <span class="ruby-identifier">div1</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;div id=&quot;blurb_0&quot;&gt;&lt;/div&gt;'</span>)
140: 
141:     <span class="ruby-identifier">div0</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'#blurb_0'</span>)
142:     <span class="ruby-identifier">div0</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;div id=&quot;blurb_a&quot;&gt;&lt;/div&gt;'</span>)
143: 
144:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'div'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#blurb_1'</span>).<span class="ruby-identifier">name</span>
145:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000063" class="method">
  <div id="M000063_title" class="title">
    <b>test_roundtrip</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000063_source')" id="l_M000063_source">show source</a> ]</p>
  <div id="M000063_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_paths.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_roundtrip</span>
 8:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
 9:     <span class="ruby-node">%w[link link[2] body #link1 a p.ohmy]</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">css_sel</span><span class="ruby-operator">|</span>
10:       <span class="ruby-identifier">ele</span> = <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">css_sel</span>)
11:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ele</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">ele</span>.<span class="ruby-identifier">css_path</span>), <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">css_path</span>
12:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ele</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">ele</span>.<span class="ruby-identifier">xpath</span>), <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">xpath</span>
13:     <span class="ruby-keyword kw">end</span>
14:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000071" class="method">
  <div id="M000071_title" class="title">
    <b>test_scan_basic</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000071_source')" id="l_M000071_source">show source</a> ]</p>
  <div id="M000071_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 57</span>
57:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scan_basic</span>
58:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
59:     <span class="ruby-identifier">scan_basic</span> <span class="ruby-ivar">@basic</span>
60:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000075" class="method">
  <div id="M000075_title" class="title">
    <b>test_scan_boingboing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show source</a> ]</p>
  <div id="M000075_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 112</span>
112:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scan_boingboing</span>
113:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
114:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, (<span class="ruby-ivar">@boingboing</span><span class="ruby-operator">/</span><span class="ruby-value str">'p.posted'</span>).<span class="ruby-identifier">length</span>
115:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a[@name='027906']&quot;</span>).<span class="ruby-identifier">length</span>
116:     <span class="ruby-comment cmt">###  MODIFIED: libxml wraps the contents of &lt;script&gt; in a CDATA tag, so we won't be able to parse comments.</span>
117: <span class="ruby-comment cmt">#    assert_equal 10, @boingboing.search(&quot;script comment()&quot;).length</span>
118:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;a[text()*='Boing']&quot;</span>).<span class="ruby-identifier">length</span>
119:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3[text()='College kids reportedly taking more smart drugs']&quot;</span>).<span class="ruby-identifier">length</span>
120:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3[text()='College']&quot;</span>).<span class="ruby-identifier">length</span>
121:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3&quot;</span>).<span class="ruby-identifier">length</span>
122:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">59</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3[text()!='College kids reportedly taking more smart drugs']&quot;</span>).<span class="ruby-identifier">length</span>
123:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">17</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3[text()$='s']&quot;</span>).<span class="ruby-identifier">length</span>
124:     <span class="ruby-comment cmt">### Modified.  Hpricot is wrong</span>
125:     <span class="ruby-comment cmt">#assert_equal 129, @boingboing.search(&quot;p[text()]&quot;).length</span>
126:     <span class="ruby-comment cmt">## This test seems to change between libxml versions, so I'm commenting</span>
127:     <span class="ruby-comment cmt">## it out.</span>
128:     <span class="ruby-comment cmt">#if Nokogiri::LIBXML_VERSION == '2.6.16'</span>
129:     <span class="ruby-comment cmt">#  assert_equal 111, @boingboing.search(&quot;p[text()]&quot;).length</span>
130:     <span class="ruby-comment cmt">#else</span>
131:     <span class="ruby-comment cmt">#  assert_equal 110, @boingboing.search(&quot;p[text()]&quot;).length</span>
132:     <span class="ruby-comment cmt">#end</span>
133:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">211</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;p&quot;</span>).<span class="ruby-identifier">length</span>
134:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000065" class="method">
  <div id="M000065_title" class="title">
    <b>test_scan_text</b>()
  </div>
  <div class="description">
  <pre>
 Modified.  Not supported
  Test creating a new element
</pre>
<p>
def test_new_element
</p>
<pre>
  elem = Hpricot::Elem.new(Hpricot::STag.new('form'))
  assert_not_nil(elem)
  assert_not_nil(elem.attributes)
</pre>
<p>
end
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000065_source')" id="l_M000065_source">show source</a> ]</p>
  <div id="M000065_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 22</span>
22:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scan_text</span>
23:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'FOO'</span>, <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">make</span>(<span class="ruby-value str">&quot;FOO&quot;</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">content</span>
24:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000100" class="method">
  <div id="M000100_title" class="title">
    <b>test_screwed_xmlns</b>()
  </div>
  <div class="description">
  <p>
ticket 84 by jamezilla
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show source</a> ]</p>
  <div id="M000100_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 377</span>
377:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_screwed_xmlns</span>
378:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-value str">&quot;&lt;?xml:namespace prefix = cwi /&gt;\n&lt;html&gt;&lt;body&gt;HAI&lt;/body&gt;&lt;/html&gt;\n&quot;</span>)
379:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;HAI&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;body&quot;</span>).<span class="ruby-identifier">inner_text</span>
380:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000064" class="method">
  <div id="M000064_title" class="title">
    <b>test_set_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000064_source')" id="l_M000064_source">show source</a> ]</p>
  <div id="M000064_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attr</span>
 8:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
 9:     <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">set</span>(<span class="ruby-value str">'class'</span>, <span class="ruby-value str">'para'</span>)
10:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">length</span>
11:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-value str">'class'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'para'</span> }.<span class="ruby-identifier">length</span>
12:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000077" class="method">
  <div id="M000077_title" class="title">
    <b>test_siblings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show source</a> ]</p>
  <div id="M000077_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 147</span>
147:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_siblings</span>
148:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
149:     <span class="ruby-identifier">t</span> = <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:title</span>)
150:     <span class="ruby-identifier">e</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">next_sibling</span>
151:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test1.css'</span>, <span class="ruby-identifier">e</span>[<span class="ruby-value str">'href'</span>]
152:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'title'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">previous_sibling</span>.<span class="ruby-identifier">name</span>
153:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000082" class="method">
  <div id="M000082_title" class="title">
    <b>test_tag_case</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show source</a> ]</p>
  <div id="M000082_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 193</span>
193:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tag_case</span> 
194:     <span class="ruby-ivar">@tenderlove</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">TENDERLOVE</span>) 
195:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span> 
196:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//area'</span>).<span class="ruby-identifier">length</span> 
197:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//meta'</span>).<span class="ruby-identifier">length</span> 
198:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000106" class="method">
  <div id="M000106_title" class="title">
    <b>test_text_tags</b>()
  </div>
  <div class="description">
  <p>
be sure tags named &quot;text&quot; are ok
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show source</a> ]</p>
  <div id="M000106_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_text_tags</span>
27:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Hpricot</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;feed&gt;&lt;title&gt;City Poisoned&lt;/title&gt;&lt;text&gt;Rita Lee has poisoned Brazil.&lt;/text&gt;&lt;/feed&gt;&quot;</span>)
28:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;City Poisoned&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title&quot;</span>).<span class="ruby-identifier">text</span>
29:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000095" class="method">
  <div id="M000095_title" class="title">
    <b>test_uswebgen</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show source</a> ]</p>
  <div id="M000095_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 315</span>
315:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uswebgen</span>
316:     <span class="ruby-ivar">@uswebgen</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">USWEBGEN</span>)
317:     <span class="ruby-comment cmt"># sent by brent beardsley, nokogiri 0.3 had problems with all the links.</span>
318:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">67</span>, (<span class="ruby-ivar">@uswebgen</span><span class="ruby-operator">/</span><span class="ruby-identifier">:a</span>).<span class="ruby-identifier">length</span>
319:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000092" class="method">
  <div id="M000092_title" class="title">
    <b>test_wildcard</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show source</a> ]</p>
  <div id="M000092_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 295</span>
295:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_wildcard</span>
296:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Hpricot</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
297:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;*[@id]&quot;</span>).<span class="ruby-identifier">length</span>
298:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//*[@id]&quot;</span>).<span class="ruby-identifier">length</span>
299:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000099" class="method">
  <div id="M000099_title" class="title">
    <b>test_youtube_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show source</a> ]</p>
  <div id="M000099_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 349</span>
349:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_youtube_attr</span>
350:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&lt;html&gt;&lt;body&gt;\nLorem ipsum. Jolly roger, ding-dong sing-a-long\n&lt;object width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;param name=\&quot;movie\&quot; value=\&quot;http://www.youtube.com/v/NbDQ4M_cuwA\&quot;&gt;&lt;/param&gt;\n&lt;param name=\&quot;wmode\&quot; value=\&quot;transparent\&quot;&gt;&lt;/param&gt;\n&lt;embed src=\&quot;http://www.youtube.com/v/NbDQ4M_cuwA\&quot;\ntype=\&quot;application/x-shockwave-flash\&quot; wmode=\&quot;transparent\&quot; width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;/embed&gt;\n&lt;/object&gt;\nCheck out my posting, I have bright mice in large clown cars.\n&lt;object width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;param name=\&quot;movie\&quot; value=\&quot;http://www.youtube.com/v/foobar\&quot;&gt;&lt;/param&gt;\n&lt;param name=\&quot;wmode\&quot; value=\&quot;transparent\&quot;&gt;&lt;/param&gt;\n&lt;embed src=\&quot;http://www.youtube.com/v/foobar\&quot;\ntype=\&quot;application/x-shockwave-flash\&quot; wmode=\&quot;transparent\&quot; width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;/embed&gt;\n&lt;/object&gt;\n&lt;/body&gt;&lt;/html?\n&quot;</span>
351:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">Hpricot</span>(<span class="ruby-identifier">str</span>)
352:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;http://www.youtube.com/v/NbDQ4M_cuwA&quot;</span>,
353:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;//object/param[@value='http://www.youtube.com/v/NbDQ4M_cuwA']&quot;</span>)[<span class="ruby-value str">'value'</span>]
354:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>