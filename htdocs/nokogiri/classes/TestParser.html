  <div id="C00000010">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestParser<br/>
  In:
<a href="#" onclick="jsHref('files/test/hpricot/test_parser_rb.html');">test/hpricot/test_parser.rb</a>
<a href="#" onclick="jsHref('files/test/hpricot/test_paths_rb.html');">test/hpricot/test_paths.rb</a>
<a href="#" onclick="jsHref('files/test/hpricot/test_xml_rb.html');">test/hpricot/test_xml.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000080&name=scan_basic" >scan_basic</a></li>
  <li><a href="index.html?a=M000088&name=test_abs_xpath" >test_abs_xpath</a></li>
  <li><a href="index.html?a=M000091&name=test_alt_predicates" >test_alt_predicates</a></li>
  <li><a href="index.html?a=M000098&name=test_body_newlines" >test_body_newlines</a></li>
  <li><a href="index.html?a=M000106&name=test_buffer_error" >test_buffer_error</a></li>
  <li><a href="index.html?a=M000114&name=test_casing" >test_casing</a></li>
  <li><a href="index.html?a=M000095&name=test_class_search" >test_class_search</a></li>
  <li><a href="index.html?a=M000086&name=test_css_negation" >test_css_negation</a></li>
  <li><a href="index.html?a=M000097&name=test_empty_comment" >test_empty_comment</a></li>
  <li><a href="index.html?a=M000074&name=test_filter_by_attr" >test_filter_by_attr</a></li>
  <li><a href="index.html?a=M000075&name=test_filter_contains" >test_filter_contains</a></li>
  <li><a href="index.html?a=M000109&name=test_filters" >test_filters</a></li>
  <li><a href="index.html?a=M000076&name=test_get_element_by_id" >test_get_element_by_id</a></li>
  <li><a href="index.html?a=M000077&name=test_get_element_by_tag_name" >test_get_element_by_tag_name</a></li>
  <li><a href="index.html?a=M000092&name=test_insert_after" >test_insert_after</a></li>
  <li><a href="index.html?a=M000093&name=test_insert_before" >test_insert_before</a></li>
  <li><a href="index.html?a=M000101&name=test_javascripts" >test_javascripts</a></li>
  <li><a href="index.html?a=M000110&name=test_keep_cdata" >test_keep_cdata</a></li>
  <li><a href="index.html?a=M000096&name=test_kleene_star" >test_kleene_star</a></li>
  <li><a href="index.html?a=M000104&name=test_mangled_tags" >test_mangled_tags</a></li>
  <li><a href="index.html?a=M000094&name=test_many_paths" >test_many_paths</a></li>
  <li><a href="index.html?a=M000111&name=test_namespace" >test_namespace</a></li>
  <li><a href="index.html?a=M000102&name=test_nested_scripts" >test_nested_scripts</a></li>
  <li><a href="index.html?a=M000099&name=test_nested_twins" >test_nested_twins</a></li>
  <li><a href="index.html?a=M000113&name=test_normally_empty" >test_normally_empty</a></li>
  <li><a href="index.html?a=M000078&name=test_output_basic" >test_output_basic</a></li>
  <li><a href="index.html?a=M000082&name=test_pace" >test_pace</a></li>
  <li><a href="index.html?a=M000081&name=test_positional" >test_positional</a></li>
  <li><a href="index.html?a=M000089&name=test_predicates" >test_predicates</a></li>
  <li><a href="index.html?a=M000105&name=test_procins" >test_procins</a></li>
  <li><a href="index.html?a=M000087&name=test_remove_attribute" >test_remove_attribute</a></li>
  <li><a href="index.html?a=M000084&name=test_reparent" >test_reparent</a></li>
  <li><a href="index.html?a=M000112&name=test_roundtrip" >test_roundtrip</a></li>
  <li><a href="index.html?a=M000079&name=test_scan_basic" >test_scan_basic</a></li>
  <li><a href="index.html?a=M000083&name=test_scan_boingboing" >test_scan_boingboing</a></li>
  <li><a href="index.html?a=M000108&name=test_screwed_xmlns" >test_screwed_xmlns</a></li>
  <li><a href="index.html?a=M000073&name=test_set_attr" >test_set_attr</a></li>
  <li><a href="index.html?a=M000085&name=test_siblings" >test_siblings</a></li>
  <li><a href="index.html?a=M000090&name=test_tag_case" >test_tag_case</a></li>
  <li><a href="index.html?a=M000115&name=test_text_tags" >test_text_tags</a></li>
  <li><a href="index.html?a=M000103&name=test_uswebgen" >test_uswebgen</a></li>
  <li><a href="index.html?a=M000100&name=test_wildcard" >test_wildcard</a></li>
  <li><a href="index.html?a=M000107&name=test_youtube_attr" >test_youtube_attr</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
  <li><a href="#" onclick="jsHref('classes/Nokogiri.html');">Nokogiri</a></li>
</ul>





<div class="sectiontitle">Public Instance methods</div>
<div id="M000080" class="method">
  <div id="M000080_title" class="title">
    <b>scan_basic</b>(doc)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000080_source')" id="l_M000080_source">show source</a> ]</p>
  <div id="M000080_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 50</span>
50:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">scan_basic</span> <span class="ruby-identifier">doc</span>
51:     <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">to_s</span>
52:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#link1'</span>)[<span class="ruby-value str">'id'</span>]
53:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;p a&quot;</span>)[<span class="ruby-value str">'id'</span>]
54:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:p</span><span class="ruby-operator">/</span><span class="ruby-identifier">:a</span>).<span class="ruby-identifier">first</span>[<span class="ruby-value str">'id'</span>]
55:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p'</span>).<span class="ruby-identifier">at</span>(<span class="ruby-value str">'a'</span>)[<span class="ruby-value str">'id'</span>]
56: 
57:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link2'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'.ohmy'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>[<span class="ruby-value str">'id'</span>]
58:     <span class="ruby-identifier">assert_equal</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>)[<span class="ruby-value">2</span>], (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'[text()=&quot;The third paragraph&quot;]'</span>)[<span class="ruby-value">0</span>])
59:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p:not(.ohmy)'</span>).<span class="ruby-identifier">length</span>
60: 
61:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'last final'</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p[@class~=&quot;final&quot;]'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'class'</span>)
62:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p &gt; a'</span>).<span class="ruby-identifier">length</span>
63:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p.ohmy &gt; a'</span>).<span class="ruby-identifier">length</span>
64:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'p / a'</span>).<span class="ruby-identifier">length</span>
65:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'link ~ link'</span>).<span class="ruby-identifier">length</span>
66:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'title ~ link'</span>).<span class="ruby-identifier">length</span>
67:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p/text()&quot;</span>).<span class="ruby-identifier">length</span>
68:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">6</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p[a]//text()&quot;</span>).<span class="ruby-identifier">length</span>
69:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//p/a/text()&quot;</span>).<span class="ruby-identifier">length</span>
70:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000088" class="method">
  <div id="M000088_title" class="title">
    <b>test_abs_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000088_source')" id="l_M000088_source">show source</a> ]</p>
  <div id="M000088_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 128</span>
128:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_abs_xpath</span>
129:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
130:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/html/body//p[@class='posted']&quot;</span>).<span class="ruby-identifier">length</span>
131:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;/*/body//p[@class='posted']&quot;</span>).<span class="ruby-identifier">length</span>
132:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">18</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//script&quot;</span>).<span class="ruby-identifier">length</span>
133:     <span class="ruby-identifier">divs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//script/../div&quot;</span>)
134:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>,  <span class="ruby-identifier">divs</span>.<span class="ruby-identifier">length</span>
135:     <span class="ruby-identifier">imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p/a/img'</span>)
136:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">imgs</span>.<span class="ruby-identifier">length</span>
137:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">16</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p/a/img'</span>).<span class="ruby-identifier">length</span>
138:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'img'</span> }
139:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000091" class="method">
  <div id="M000091_title" class="title">
    <b>test_alt_predicates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000091_source')" id="l_M000091_source">show source</a> ]</p>
  <div id="M000091_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 160</span>
160:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_alt_predicates</span>
161:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
162:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'table/tr:last'</span>).<span class="ruby-identifier">length</span>
163: 
164:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
165:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;The third paragraph&lt;/p&gt;&quot;</span>,
166:         <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:eq(3)'</span>).<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">chomp</span>
167:         <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:last'</span>).<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s+/</span>,<span class="ruby-value str">' '</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
168:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'last final'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p:last-of-type'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">get_attribute</span>(<span class="ruby-value str">'class'</span>)
169:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000098" class="method">
  <div id="M000098_title" class="title">
    <b>test_body_newlines</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000098_source')" id="l_M000098_source">show source</a> ]</p>
  <div id="M000098_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_body_newlines</span>
223:     <span class="ruby-ivar">@immob</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">IMMOB</span>)
224:     <span class="ruby-identifier">body</span> = <span class="ruby-ivar">@immob</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:body</span>)
225:     {<span class="ruby-value str">'background'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">''</span>, <span class="ruby-value str">'bgcolor'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#ffffff'</span>, <span class="ruby-value str">'text'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#000000'</span>, <span class="ruby-value str">'marginheight'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>,
226:      <span class="ruby-value str">'marginwidth'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'leftmargin'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'topmargin'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'10'</span>, <span class="ruby-value str">'link'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#000066'</span>,
227:      <span class="ruby-value str">'alink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'#ff6600'</span>, <span class="ruby-value str">'hlink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;#ff6600&quot;</span>, <span class="ruby-value str">'vlink'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;#000000&quot;</span>}.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>, <span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
228:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">v</span>, <span class="ruby-identifier">body</span>[<span class="ruby-identifier">k</span>]
229:     <span class="ruby-keyword kw">end</span>
230:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000106" class="method">
  <div id="M000106_title" class="title">
    <b>test_buffer_error</b>()
  </div>
  <div class="description">
  <p>
Altered&#8230; libxml does not get a buffer error
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show source</a> ]</p>
  <div id="M000106_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 285</span>
285:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_buffer_error</span>
286:     <span class="ruby-identifier">assert_nothing_raised</span> {
287:       <span class="ruby-constant">Nokogiri</span>(<span class="ruby-node">%{&lt;p&gt;\n\n&lt;input type=&quot;hidden&quot; name=&quot;__VIEWSTATE&quot;  value=&quot;#{((&quot;X&quot; * 2000) + &quot;\n&quot;) * 22}&quot; /&gt;\n\n&lt;/p&gt;}</span>)
288:     }
289:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000114" class="method">
  <div id="M000114_title" class="title">
    <b>test_casing</b>()
  </div>
  <div class="description">
  <p>
make sure XML doesn&#8217;t get downcased
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show source</a> ]</p>
  <div id="M000114_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 15</span>
15:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_casing</span>
16:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">WHY</span>)
17: 
18:     <span class="ruby-comment cmt">### Modified.</span>
19:     <span class="ruby-comment cmt"># I don't want to differentiate pseudo classes from namespaces.  If</span>
20:     <span class="ruby-comment cmt"># you're parsing xml, use XPath.  That's what its for.  :-P</span>
21:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hourly&quot;</span>, (<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span> <span class="ruby-value str">&quot;//sy:updatePeriod&quot;</span>).<span class="ruby-identifier">content</span>
22:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;guid[@isPermaLink]&quot;</span>).<span class="ruby-identifier">length</span>
23:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000095" class="method">
  <div id="M000095_title" class="title">
    <b>test_class_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000095_source')" id="l_M000095_source">show source</a> ]</p>
  <div id="M000095_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 194</span>
194:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_class_search</span>
195:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;div class=xyz '&gt;abc&lt;/div&gt;&quot;</span>)
196:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.xyz&quot;</span>).<span class="ruby-identifier">length</span>
197: 
198:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;div class=xyz&gt;abc&lt;/div&gt;&lt;div class=abc&gt;xyz&lt;/div&gt;&quot;</span>)
199:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.xyz&quot;</span>).<span class="ruby-identifier">length</span>
200:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*&quot;</span>).<span class="ruby-identifier">length</span>
201:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000086" class="method">
  <div id="M000086_title" class="title">
    <b>test_css_negation</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000086_source')" id="l_M000086_source">show source</a> ]</p>
  <div id="M000086_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 117</span>
117:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_negation</span>
118:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
119:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">'p:not(.final)'</span>).<span class="ruby-identifier">length</span>
120:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000097" class="method">
  <div id="M000097_title" class="title">
    <b>test_empty_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000097_source')" id="l_M000097_source">show source</a> ]</p>
  <div id="M000097_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 212</span>
212:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_comment</span>
213:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;!----&gt;&lt;/p&gt;&quot;</span>)
214:     <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//body'</span>).<span class="ruby-identifier">first</span>
215:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comment?</span>
216: 
217:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;p&gt;&lt;!-- --&gt;&lt;/p&gt;&quot;</span>)
218:     <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//body'</span>).<span class="ruby-identifier">first</span>
219:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">children</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">comment?</span>
220:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000074" class="method">
  <div id="M000074_title" class="title">
    <b>test_filter_by_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000074_source')" id="l_M000074_source">show source</a> ]</p>
  <div id="M000074_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 14</span>
14:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filter_by_attr</span>
15:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
16: 
17:     <span class="ruby-comment cmt"># this link is escaped in the doc</span>
18:     <span class="ruby-identifier">link</span> = <span class="ruby-value str">'http://www.youtube.com/watch?v=TvSNXyNw26g&amp;search=chris%20ware'</span>
19:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">link</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">at</span>(<span class="ruby-node">&quot;a[@href='#{link}']&quot;</span>)[<span class="ruby-value str">'href'</span>]
20:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000075" class="method">
  <div id="M000075_title" class="title">
    <b>test_filter_contains</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000075_source')" id="l_M000075_source">show source</a> ]</p>
  <div id="M000075_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 22</span>
22:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filter_contains</span>
23:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
24:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&lt;title&gt;Sample XHTML&lt;/title&gt;'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;title:contains('Sample')&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span>
25:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000109" class="method">
  <div id="M000109_title" class="title">
    <b>test_filters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show source</a> ]</p>
  <div id="M000109_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 328</span>
328:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_filters</span>
329:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
330:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title:parent&quot;</span>).<span class="ruby-identifier">size</span>
331:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;p:parent&quot;</span>).<span class="ruby-identifier">size</span>
332:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title:empty&quot;</span>).<span class="ruby-identifier">size</span>
333:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;link:empty&quot;</span>).<span class="ruby-identifier">size</span>
334:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000076" class="method">
  <div id="M000076_title" class="title">
    <b>test_get_element_by_id</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000076_source')" id="l_M000076_source">show source</a> ]</p>
  <div id="M000076_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 27</span>
27:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_element_by_id</span>
28:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
29:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#link1'</span>)[<span class="ruby-value str">'id'</span>]
30:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#body1'</span>).<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#link1'</span>)[<span class="ruby-value str">'id'</span>]
31:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000077" class="method">
  <div id="M000077_title" class="title">
    <b>test_get_element_by_tag_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000077_source')" id="l_M000077_source">show source</a> ]</p>
  <div id="M000077_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 33</span>
33:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_get_element_by_tag_name</span>
34:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
35:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'a'</span>)[<span class="ruby-value str">'id'</span>]
36:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'link1'</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'body'</span>).<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#link1'</span>)[<span class="ruby-value str">'id'</span>]
37:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000092" class="method">
  <div id="M000092_title" class="title">
    <b>test_insert_after</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000092_source')" id="l_M000092_source">show source</a> ]</p>
  <div id="M000092_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 171</span>
171:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_insert_after</span> <span class="ruby-comment cmt"># ticket #63</span>
172:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
173:     (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'div'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
174:       <span class="ruby-identifier">element</span>.<span class="ruby-identifier">after</span>(<span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>)
175:     <span class="ruby-keyword kw">end</span>
176:     <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>,
177:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
178:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000093" class="method">
  <div id="M000093_title" class="title">
    <b>test_insert_before</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000093_source')" id="l_M000093_source">show source</a> ]</p>
  <div id="M000093_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 180</span>
180:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_insert_before</span> <span class="ruby-comment cmt"># ticket #61</span>
181:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
182:     (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">'div'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">element</span><span class="ruby-operator">|</span>
183:       <span class="ruby-identifier">element</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;'</span>)
184:     <span class="ruby-keyword kw">end</span>
185:     <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'&lt;p&gt;Paragraph 1&lt;/p&gt;&lt;p&gt;Paragraph 2&lt;/p&gt;&lt;div id=&quot;a-div&quot;&gt;&lt;/div&gt;'</span>,
186:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>).<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/&gt;\s*&lt;/</span>, <span class="ruby-value str">'&gt;&lt;'</span>)
187:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000101" class="method">
  <div id="M000101_title" class="title">
    <b>test_javascripts</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show source</a> ]</p>
  <div id="M000101_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 243</span>
243:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_javascripts</span>
244:     <span class="ruby-ivar">@immob</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">IMMOB</span>)
245:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@immob</span><span class="ruby-operator">/</span><span class="ruby-identifier">:script</span>)[<span class="ruby-value">0</span>].<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-regexp re">/&lt;LINK/</span>).<span class="ruby-identifier">length</span>
246:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000110" class="method">
  <div id="M000110_title" class="title">
    <b>test_keep_cdata</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show source</a> ]</p>
  <div id="M000110_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 336</span>
336:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_keep_cdata</span>
337:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">%{&lt;script&gt; /*&lt;![CDATA[*/
338:     /*]]&gt;*/ &lt;/script&gt;}</span>
339:     <span class="ruby-comment cmt"># MODIFIED: if you want the cdata, to_xml it</span>
340:     <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">str</span>, <span class="ruby-constant">Nokogiri</span>(<span class="ruby-identifier">str</span>).<span class="ruby-identifier">to_xml</span>
341:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000096" class="method">
  <div id="M000096_title" class="title">
    <b>test_kleene_star</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000096_source')" id="l_M000096_source">show source</a> ]</p>
  <div id="M000096_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 203</span>
203:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_kleene_star</span>
204:     <span class="ruby-comment cmt"># bug noticed by raja bhatia</span>
205:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;span class='small'&gt;1&lt;/span&gt;&lt;div class='large'&gt;2&lt;/div&gt;&lt;div class='small'&gt;3&lt;/div&gt;&lt;span class='blue large'&gt;4&lt;/span&gt;&quot;</span>)
206:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*[@class*='small']&quot;</span>).<span class="ruby-identifier">length</span>
207:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;*.small&quot;</span>).<span class="ruby-identifier">length</span>
208:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.small&quot;</span>).<span class="ruby-identifier">length</span>
209:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;.large&quot;</span>).<span class="ruby-identifier">length</span>
210:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000104" class="method">
  <div id="M000104_title" class="title">
    <b>test_mangled_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show source</a> ]</p>
  <div id="M000104_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 263</span>
263:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_mangled_tags</span>
264:     [<span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' method='post' action='/units/a/login/1,13088,779-1,00.html'?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
265:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' ?URL= method='post' action='/units/a/login/1,13088,779-1,00.html'&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
266:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm'?URL= ?URL= method='post' action='/units/a/login/1,13088,779-1,00.html'?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>,
267:      <span class="ruby-value str">%{&lt;html&gt;&lt;form name='loginForm' method='post' action='/units/a/login/1,13088,779-1,00.html' ?URL=&gt;&lt;/form&gt;&lt;/html&gt;}</span>].
268:     <span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">str</span><span class="ruby-operator">|</span>
269:       <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-identifier">str</span>)
270:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:form</span>).<span class="ruby-identifier">length</span>
271:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/units/a/login/1,13088,779-1,00.html'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;form&quot;</span>)[<span class="ruby-value str">'action'</span>]
272:     <span class="ruby-keyword kw">end</span>
273:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000094" class="method">
  <div id="M000094_title" class="title">
    <b>test_many_paths</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000094_source')" id="l_M000094_source">show source</a> ]</p>
  <div id="M000094_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 189</span>
189:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_many_paths</span>
190:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
191:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">62</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p.posted, link[@rel=&quot;alternate&quot;]'</span>).<span class="ruby-identifier">length</span>
192:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000111" class="method">
  <div id="M000111_title" class="title">
    <b>test_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show source</a> ]</p>
  <div id="M000111_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 343</span>
343:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace</span>
344:     <span class="ruby-identifier">chunk</span> = <span class="ruby-value str">&quot;&lt;a xmlns:t=\&quot;http://www.nexopia.com/dev/template\&quot;&gt;\n&lt;t:sam&gt;hi &lt;/t:sam&gt;\n&lt;/a&gt;\n&quot;</span>
345:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">chunk</span>)
346:     <span class="ruby-identifier">assert</span>((<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//t:sam&quot;</span>).<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
347:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000102" class="method">
  <div id="M000102_title" class="title">
    <b>test_nested_scripts</b>()
  </div>
  <div class="description">
  <p>
Modified. This test passes with later versions of libxml
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show source</a> ]</p>
  <div id="M000102_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 250</span>
250:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_scripts</span>
251:     <span class="ruby-ivar">@week9</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">WEEK9</span>)
252:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">LIBXML_VERSION</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'2.6.16'</span>
253:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">14</span>, (<span class="ruby-ivar">@week9</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;a&quot;</span>).<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">include?</span> <span class="ruby-value str">&quot;GameCenter&quot;</span> }.<span class="ruby-identifier">length</span>
254:     <span class="ruby-keyword kw">end</span>
255:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000099" class="method">
  <div id="M000099_title" class="title">
    <b>test_nested_twins</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000099_source')" id="l_M000099_source">show source</a> ]</p>
  <div id="M000099_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 232</span>
232:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_twins</span>
233:     <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-value str">&quot;&lt;div&gt;Hi&lt;div&gt;there&lt;/div&gt;&lt;/div&gt;&quot;</span>)
234:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, (<span class="ruby-ivar">@doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;div div&quot;</span>).<span class="ruby-identifier">length</span>
235:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000113" class="method">
  <div id="M000113_title" class="title">
    <b>test_normally_empty</b>()
  </div>
  <div class="description">
  <p>
normally, the link tags are empty HTML tags. contributed by laudney.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show source</a> ]</p>
  <div id="M000113_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 8</span>
 8:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_normally_empty</span>
 9:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;rss&gt;&lt;channel&gt;&lt;title&gt;this is title&lt;/title&gt;&lt;link&gt;http://fake.com&lt;/link&gt;&lt;/channel&gt;&lt;/rss&gt;&quot;</span>)
10:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;this is title&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:rss</span><span class="ruby-operator">/</span><span class="ruby-identifier">:channel</span><span class="ruby-operator">/</span><span class="ruby-identifier">:title</span>).<span class="ruby-identifier">text</span>
11:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;http://fake.com&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-identifier">:rss</span><span class="ruby-operator">/</span><span class="ruby-identifier">:channel</span><span class="ruby-operator">/</span><span class="ruby-identifier">:link</span>).<span class="ruby-identifier">text</span>
12:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000078" class="method">
  <div id="M000078_title" class="title">
    <b>test_output_basic</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000078_source')" id="l_M000078_source">show source</a> ]</p>
  <div id="M000078_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 39</span>
39:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_output_basic</span>
40:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
41:     <span class="ruby-ivar">@basic2</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">inner_html</span>)
42:     <span class="ruby-identifier">scan_basic</span> <span class="ruby-ivar">@basic2</span>
43:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000082" class="method">
  <div id="M000082_title" class="title">
    <b>test_pace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000082_source')" id="l_M000082_source">show source</a> ]</p>
  <div id="M000082_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 79</span>
79:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pace</span>
80:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">PACE_APPLICATION</span>)
81:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'get'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'form[@name=frmSect11]'</span>)[<span class="ruby-value str">'method'</span>]
82:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000081" class="method">
  <div id="M000081_title" class="title">
    <b>test_positional</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000081_source')" id="l_M000081_source">show source</a> ]</p>
  <div id="M000081_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 72</span>
72:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_positional</span>
73:     <span class="ruby-identifier">h</span> = <span class="ruby-constant">Nokogiri</span>( <span class="ruby-value str">&quot;&lt;div&gt;&lt;br/&gt;&lt;p&gt;one&lt;/p&gt;&lt;p&gt;two&lt;/p&gt;&lt;/div&gt;&quot;</span> )
74:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:eq(1)&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: eq(0) -&gt; eq(1), and removed initial '//'</span>
75:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:first&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: removed initial '//'</span>
76:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;p&gt;one&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">h</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;div/p:first()&quot;</span>).<span class="ruby-identifier">to_s</span>.<span class="ruby-identifier">chomp</span> <span class="ruby-comment cmt"># MODIFIED: removed initial '//'</span>
77:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000089" class="method">
  <div id="M000089_title" class="title">
    <b>test_predicates</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000089_source')" id="l_M000089_source">show source</a> ]</p>
  <div id="M000089_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 141</span>
141:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_predicates</span>
142:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
143:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//link[@rel=&quot;alternate&quot;]'</span>).<span class="ruby-identifier">length</span>
144:     <span class="ruby-identifier">p_imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p[/a/img]'</span>)
145:     <span class="ruby-comment cmt">#assert_equal 15, p_imgs.length</span>
146:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'p'</span> }
147:     <span class="ruby-identifier">p_imgs</span> = <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/p[a/img]'</span>)
148:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">12</span>, <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">length</span>
149:     <span class="ruby-identifier">assert</span> <span class="ruby-identifier">p_imgs</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> <span class="ruby-operator">==</span> <span class="ruby-value str">'p'</span> }
150:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//input[@checked]'</span>).<span class="ruby-identifier">length</span>
151:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000105" class="method">
  <div id="M000105_title" class="title">
    <b>test_procins</b>()
  </div>
  <div class="description">
  <p>
Modified. Added question. Don&#8216;t care.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show source</a> ]</p>
  <div id="M000105_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 277</span>
277:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_procins</span>
278:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;?php print('hello') ?&gt;\n&lt;?xml blah='blah'?&gt;&quot;</span>)
279:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;php&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">name</span>
280:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;blah='blah'?&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">children</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">content</span> <span class="ruby-comment cmt">#&quot;# quote added so emacs ruby-mode parser doesn't barf</span>
281:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000087" class="method">
  <div id="M000087_title" class="title">
    <b>test_remove_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000087_source')" id="l_M000087_source">show source</a> ]</p>
  <div id="M000087_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 122</span>
122:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_attribute</span>
123:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
124:     (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-identifier">:p</span>).<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ele</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">remove_attribute</span>(<span class="ruby-value str">'class'</span>) }
125:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">'p[@class]'</span>).<span class="ruby-identifier">length</span>
126:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000084" class="method">
  <div id="M000084_title" class="title">
    <b>test_reparent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000084_source')" id="l_M000084_source">show source</a> ]</p>
  <div id="M000084_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 98</span>
 98:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_reparent</span>
 99:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-value str">%{&lt;div id=&quot;blurb_1&quot;&gt;&lt;/div&gt;}</span>)
100:     <span class="ruby-identifier">div1</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'#blurb_1'</span>)
101:     <span class="ruby-identifier">div1</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;div id=&quot;blurb_0&quot;&gt;&lt;/div&gt;'</span>)
102: 
103:     <span class="ruby-identifier">div0</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'#blurb_0'</span>)
104:     <span class="ruby-identifier">div0</span>.<span class="ruby-identifier">before</span>(<span class="ruby-value str">'&lt;div id=&quot;blurb_a&quot;&gt;&lt;/div&gt;'</span>)
105: 
106:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'div'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'#blurb_1'</span>).<span class="ruby-identifier">name</span>
107:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000112" class="method">
  <div id="M000112_title" class="title">
    <b>test_roundtrip</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show source</a> ]</p>
  <div id="M000112_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_paths.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_roundtrip</span>
 8:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
 9:     <span class="ruby-node">%w[link link[2] body #link1 a p.ohmy]</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">css_sel</span><span class="ruby-operator">|</span>
10:       <span class="ruby-identifier">ele</span> = <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">css_sel</span>)
11:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ele</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">ele</span>.<span class="ruby-identifier">css_path</span>), <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">css_path</span>
12:       <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ele</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">ele</span>.<span class="ruby-identifier">path</span>), <span class="ruby-identifier">ele</span>.<span class="ruby-identifier">xpath</span>
13:     <span class="ruby-keyword kw">end</span>
14:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000079" class="method">
  <div id="M000079_title" class="title">
    <b>test_scan_basic</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000079_source')" id="l_M000079_source">show source</a> ]</p>
  <div id="M000079_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 45</span>
45:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scan_basic</span>
46:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
47:     <span class="ruby-identifier">scan_basic</span> <span class="ruby-ivar">@basic</span>
48:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000083" class="method">
  <div id="M000083_title" class="title">
    <b>test_scan_boingboing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000083_source')" id="l_M000083_source">show source</a> ]</p>
  <div id="M000083_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 84</span>
84:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_scan_boingboing</span>
85:     <span class="ruby-ivar">@boingboing</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-constant">HTML</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BOINGBOING</span>)
86:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, (<span class="ruby-ivar">@boingboing</span><span class="ruby-operator">/</span><span class="ruby-value str">'p.posted'</span>).<span class="ruby-identifier">length</span>
87:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a[@name='027906']&quot;</span>).<span class="ruby-identifier">length</span>
88:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;a[text()*='Boing']&quot;</span>).<span class="ruby-identifier">length</span>
89:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(
90:       <span class="ruby-value str">&quot;//h3[normalize-space(text())='College kids reportedly taking more smart drugs']&quot;</span>
91:     ).<span class="ruby-identifier">length</span>
92:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3[text()='College']&quot;</span>).<span class="ruby-identifier">length</span>
93:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">60</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;h3&quot;</span>).<span class="ruby-identifier">length</span>
94:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">59</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//h3[normalize-space(text())!='College kids reportedly taking more smart drugs']&quot;</span>).<span class="ruby-identifier">length</span>
95:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">211</span>, <span class="ruby-ivar">@boingboing</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;p&quot;</span>).<span class="ruby-identifier">length</span>
96:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000108" class="method">
  <div id="M000108_title" class="title">
    <b>test_screwed_xmlns</b>()
  </div>
  <div class="description">
  <p>
ticket 84 by jamezilla
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show source</a> ]</p>
  <div id="M000108_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 319</span>
319:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_screwed_xmlns</span>
320:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-value str">&quot;&lt;?xml:namespace prefix = cwi /&gt;\n&lt;html&gt;&lt;body&gt;HAI&lt;/body&gt;&lt;/html&gt;\n&quot;</span>)
321:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;HAI&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;body&quot;</span>).<span class="ruby-identifier">inner_text</span>
322:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000073" class="method">
  <div id="M000073_title" class="title">
    <b>test_set_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000073_source')" id="l_M000073_source">show source</a> ]</p>
  <div id="M000073_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 7</span>
 7:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_attr</span>
 8:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
 9:     <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">set</span>(<span class="ruby-value str">'class'</span>, <span class="ruby-value str">'para'</span>)
10:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">length</span>
11:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">find_all</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>[<span class="ruby-value str">'class'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'para'</span> }.<span class="ruby-identifier">length</span>
12:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000085" class="method">
  <div id="M000085_title" class="title">
    <b>test_siblings</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000085_source')" id="l_M000085_source">show source</a> ]</p>
  <div id="M000085_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_siblings</span>
110:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
111:     <span class="ruby-identifier">t</span> = <span class="ruby-ivar">@basic</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:title</span>)
112:     <span class="ruby-identifier">e</span> = <span class="ruby-identifier">t</span>.<span class="ruby-identifier">next_sibling</span>
113:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test1.css'</span>, <span class="ruby-identifier">e</span>[<span class="ruby-value str">'href'</span>]
114:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'title'</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">previous_sibling</span>.<span class="ruby-identifier">name</span>
115:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000090" class="method">
  <div id="M000090_title" class="title">
    <b>test_tag_case</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000090_source')" id="l_M000090_source">show source</a> ]</p>
  <div id="M000090_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 153</span>
153:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_tag_case</span>
154:     <span class="ruby-ivar">@tenderlove</span> = <span class="ruby-constant">Nokogiri</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">TENDERLOVE</span>)
155:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span>
156:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//area'</span>).<span class="ruby-identifier">length</span>
157:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@tenderlove</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//meta'</span>).<span class="ruby-identifier">length</span>
158:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000115" class="method">
  <div id="M000115_title" class="title">
    <b>test_text_tags</b>()
  </div>
  <div class="description">
  <p>
be sure tags named &quot;text&quot; are ok
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show source</a> ]</p>
  <div id="M000115_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/hpricot/test_xml.rb, line 26</span>
26:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_text_tags</span>
27:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;feed&gt;&lt;title&gt;City Poisoned&lt;/title&gt;&lt;text&gt;Rita Lee has poisoned Brazil.&lt;/text&gt;&lt;/feed&gt;&quot;</span>)
28:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;City Poisoned&quot;</span>, (<span class="ruby-identifier">doc</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;title&quot;</span>).<span class="ruby-identifier">text</span>
29:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000103" class="method">
  <div id="M000103_title" class="title">
    <b>test_uswebgen</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show source</a> ]</p>
  <div id="M000103_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 257</span>
257:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_uswebgen</span>
258:     <span class="ruby-ivar">@uswebgen</span> = <span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">USWEBGEN</span>)
259:     <span class="ruby-comment cmt"># sent by brent beardsley, nokogiri 0.3 had problems with all the links.</span>
260:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">67</span>, (<span class="ruby-ivar">@uswebgen</span><span class="ruby-operator">/</span><span class="ruby-identifier">:a</span>).<span class="ruby-identifier">length</span>
261:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000100" class="method">
  <div id="M000100_title" class="title">
    <b>test_wildcard</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000100_source')" id="l_M000100_source">show source</a> ]</p>
  <div id="M000100_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 237</span>
237:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_wildcard</span>
238:     <span class="ruby-ivar">@basic</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">TestFiles</span><span class="ruby-operator">::</span><span class="ruby-constant">BASIC</span>)
239:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;*[@id]&quot;</span>).<span class="ruby-identifier">length</span>
240:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, (<span class="ruby-ivar">@basic</span><span class="ruby-operator">/</span><span class="ruby-value str">&quot;//*[@id]&quot;</span>).<span class="ruby-identifier">length</span>
241:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000107" class="method">
  <div id="M000107_title" class="title">
    <b>test_youtube_attr</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show source</a> ]</p>
  <div id="M000107_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/hpricot/test_parser.rb, line 291</span>
291:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_youtube_attr</span>
292:     <span class="ruby-identifier">str</span> = <span class="ruby-value str">&quot;&lt;html&gt;&lt;body&gt;\nLorem ipsum. Jolly roger, ding-dong sing-a-long\n&lt;object width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;param name=\&quot;movie\&quot; value=\&quot;http://www.youtube.com/v/NbDQ4M_cuwA\&quot;&gt;&lt;/param&gt;\n&lt;param name=\&quot;wmode\&quot; value=\&quot;transparent\&quot;&gt;&lt;/param&gt;\n&lt;embed src=\&quot;http://www.youtube.com/v/NbDQ4M_cuwA\&quot;\ntype=\&quot;application/x-shockwave-flash\&quot; wmode=\&quot;transparent\&quot; width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;/embed&gt;\n&lt;/object&gt;\nCheck out my posting, I have bright mice in large clown cars.\n&lt;object width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;param name=\&quot;movie\&quot; value=\&quot;http://www.youtube.com/v/foobar\&quot;&gt;&lt;/param&gt;\n&lt;param name=\&quot;wmode\&quot; value=\&quot;transparent\&quot;&gt;&lt;/param&gt;\n&lt;embed src=\&quot;http://www.youtube.com/v/foobar\&quot;\ntype=\&quot;application/x-shockwave-flash\&quot; wmode=\&quot;transparent\&quot; width=\&quot;425\&quot; height=\&quot;350\&quot;&gt;\n&lt;/embed&gt;\n&lt;/object&gt;\n&lt;/body&gt;&lt;/html?\n&quot;</span>
293:     <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span>(<span class="ruby-identifier">str</span>)
294:     <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;http://www.youtube.com/v/NbDQ4M_cuwA&quot;</span>,
295:       <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;//object/param[@value='http://www.youtube.com/v/NbDQ4M_cuwA']&quot;</span>)[<span class="ruby-value str">'value'</span>]
296:   <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>