  <div id="C00000050">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestNode<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/test_node_rb.html');">test/xml/test_node.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000772&name=accept" >accept</a></li>
  <li><a href="index.html?a=M000813&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000815&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000716&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000771&name=test_accept" >test_accept</a></li>
  <li><a href="index.html?a=M000759&name=test_add_default_ns" >test_add_default_ns</a></li>
  <li><a href="index.html?a=M000760&name=test_add_multiple_namespaces" >test_add_multiple_namespaces</a></li>
  <li><a href="index.html?a=M000757&name=test_add_namespace" >test_add_namespace</a></li>
  <li><a href="index.html?a=M000764&name=test_add_namespace_does_not_associate_node" >test_add_namespace_does_not_associate_node</a></li>
  <li><a href="index.html?a=M000758&name=test_add_namespace_twice" >test_add_namespace_twice</a></li>
  <li><a href="index.html?a=M000763&name=test_add_namespace_with_nil_associates_node" >test_add_namespace_with_nil_associates_node</a></li>
  <li><a href="index.html?a=M000784&name=test_ancestors" >test_ancestors</a></li>
  <li><a href="index.html?a=M000742&name=test_append_with_document" >test_append_with_document</a></li>
  <li><a href="index.html?a=M000767&name=test_at" >test_at</a></li>
  <li><a href="index.html?a=M000769&name=test_at_css" >test_at_css</a></li>
  <li><a href="index.html?a=M000768&name=test_at_xpath" >test_at_xpath</a></li>
  <li><a href="index.html?a=M000775&name=test_attribute_with_symbol" >test_attribute_with_symbol</a></li>
  <li><a href="index.html?a=M000797&name=test_attributes" >test_attributes</a></li>
  <li><a href="index.html?a=M000720&name=test_bad_xpath" >test_bad_xpath</a></li>
  <li><a href="index.html?a=M000794&name=test_child" >test_child</a></li>
  <li><a href="index.html?a=M000756&name=test_children" >test_children</a></li>
  <li><a href="index.html?a=M000802&name=test_content" >test_content</a></li>
  <li><a href="index.html?a=M000814&name=test_css_results_have_document_and_are_decorated" >test_css_results_have_document_and_are_decorated</a></li>
  <li><a href="index.html?a=M000761&name=test_default_namespace=" >test_default_namespace=</a></li>
  <li><a href="index.html?a=M000787&name=test_delete" >test_delete</a></li>
  <li><a href="index.html?a=M000747&name=test_description" >test_description</a></li>
  <li><a href="index.html?a=M000751&name=test_different_document_compare" >test_different_document_compare</a></li>
  <li><a href="index.html?a=M000750&name=test_document_compare" >test_document_compare</a></li>
  <li><a href="index.html?a=M000752&name=test_duplicate_node_removes_namespace" >test_duplicate_node_removes_namespace</a></li>
  <li><a href="index.html?a=M000781&name=test_each" >test_each</a></li>
  <li><a href="index.html?a=M000740&name=test_element?" >test_element?</a></li>
  <li><a href="index.html?a=M000718&name=test_element_children" >test_element_children</a></li>
  <li><a href="index.html?a=M000801&name=test_encode_special_chars" >test_encode_special_chars</a></li>
  <li><a href="index.html?a=M000789&name=test_find_by_css_with_tilde_eql" >test_find_by_css_with_tilde_eql</a></li>
  <li><a href="index.html?a=M000717&name=test_first_element_child" >test_first_element_child</a></li>
  <li><a href="index.html?a=M000753&name=test_fragment_creates_elements" >test_fragment_creates_elements</a></li>
  <li><a href="index.html?a=M000731&name=test_gt_string_arg" >test_gt_string_arg</a></li>
  <li><a href="index.html?a=M000778&name=test_hold_refence_to_subnode" >test_hold_refence_to_subnode</a></li>
  <li><a href="index.html?a=M000749&name=test_incorrect_spaceship" >test_incorrect_spaceship</a></li>
  <li><a href="index.html?a=M000743&name=test_inspect_ns" >test_inspect_ns</a></li>
  <li><a href="index.html?a=M000795&name=test_key?" >test_key?</a></li>
  <li><a href="index.html?a=M000780&name=test_keys" >test_keys</a></li>
  <li><a href="index.html?a=M000719&name=test_last_element_child" >test_last_element_child</a></li>
  <li><a href="index.html?a=M000811&name=test_line" >test_line</a></li>
  <li><a href="index.html?a=M000793&name=test_name=" >test_name=</a></li>
  <li><a href="index.html?a=M000809&name=test_namespace" >test_namespace</a></li>
  <li><a href="index.html?a=M000762&name=test_namespace=" >test_namespace=</a></li>
  <li><a href="index.html?a=M000745&name=test_namespace_definitions_when_no_exist" >test_namespace_definitions_when_no_exist</a></li>
  <li><a href="index.html?a=M000744&name=test_namespace_definitions_when_some_exist" >test_namespace_definitions_when_some_exist</a></li>
  <li><a href="index.html?a=M000746&name=test_namespace_goes_to_children" >test_namespace_goes_to_children</a></li>
  <li><a href="index.html?a=M000807&name=test_namespace_search_with_css" >test_namespace_search_with_css</a></li>
  <li><a href="index.html?a=M000806&name=test_namespace_search_with_xpath_and_hash" >test_namespace_search_with_xpath_and_hash</a></li>
  <li><a href="index.html?a=M000721&name=test_namespace_type_error" >test_namespace_type_error</a></li>
  <li><a href="index.html?a=M000810&name=test_namespace_without_an_href_on_html_node" >test_namespace_without_an_href_on_html_node</a></li>
  <li><a href="index.html?a=M000808&name=test_namespaces_should_include_all_namespace_definitions" >test_namespaces_should_include_all_namespace_definitions</a></li>
  <li><a href="index.html?a=M000782&name=test_new" >test_new</a></li>
  <li><a href="index.html?a=M000800&name=test_new_node" >test_new_node</a></li>
  <li><a href="index.html?a=M000755&name=test_new_node_can_have_ancestors" >test_new_node_can_have_ancestors</a></li>
  <li><a href="index.html?a=M000732&name=test_next_element_when_next_sibling_is_element_should_return_next_sibling" >test_next_element_when_next_sibling_is_element_should_return_next_sibling</a></li>
  <li><a href="index.html?a=M000735&name=test_next_element_when_next_sibling_is_not_an_element_and_no_following_element_should_return_nil" >test_next_element_when_next_sibling_is_not_an_element_and_no_following_element_should_return_nil</a></li>
  <li><a href="index.html?a=M000734&name=test_next_element_when_next_sibling_is_not_an_element_should_return_closest_next_element_sibling" >test_next_element_when_next_sibling_is_not_an_element_should_return_closest_next_element_sibling</a></li>
  <li><a href="index.html?a=M000733&name=test_next_element_when_there_is_no_next_sibling_should_return_nil" >test_next_element_when_there_is_no_next_sibling_should_return_nil</a></li>
  <li><a href="index.html?a=M000791&name=test_next_sibling" >test_next_sibling</a></li>
  <li><a href="index.html?a=M000754&name=test_node_added_to_root_should_get_namespace" >test_node_added_to_root_should_get_namespace</a></li>
  <li><a href="index.html?a=M000805&name=test_node_equality" >test_node_equality</a></li>
  <li><a href="index.html?a=M000724&name=test_parse" >test_parse</a></li>
  <li><a href="index.html?a=M000729&name=test_parse_error_list" >test_parse_error_list</a></li>
  <li><a href="index.html?a=M000728&name=test_parse_invalid_html_markup_results_in_empty_nodeset" >test_parse_invalid_html_markup_results_in_empty_nodeset</a></li>
  <li><a href="index.html?a=M000723&name=test_parse_needs_doc" >test_parse_needs_doc</a></li>
  <li><a href="index.html?a=M000725&name=test_parse_with_block" >test_parse_with_block</a></li>
  <li><a href="index.html?a=M000727&name=test_parse_with_empty_string" >test_parse_with_empty_string</a></li>
  <li><a href="index.html?a=M000726&name=test_parse_with_io" >test_parse_with_io</a></li>
  <li><a href="index.html?a=M000798&name=test_path" >test_path</a></li>
  <li><a href="index.html?a=M000770&name=test_percent" >test_percent</a></li>
  <li><a href="index.html?a=M000736&name=test_previous_element_when_previous_sibling_is_element_should_return_previous_sibling" >test_previous_element_when_previous_sibling_is_element_should_return_previous_sibling</a></li>
  <li><a href="index.html?a=M000739&name=test_previous_element_when_previous_sibling_is_not_an_element_and_no_following_element_should_return_nil" >test_previous_element_when_previous_sibling_is_not_an_element_and_no_following_element_should_return_nil</a></li>
  <li><a href="index.html?a=M000738&name=test_previous_element_when_previous_sibling_is_not_an_element_should_return_closest_previous_element_sibling" >test_previous_element_when_previous_sibling_is_not_an_element_should_return_closest_previous_element_sibling</a></li>
  <li><a href="index.html?a=M000737&name=test_previous_element_when_there_is_no_previous_sibling_should_return_nil" >test_previous_element_when_there_is_no_previous_sibling_should_return_nil</a></li>
  <li><a href="index.html?a=M000792&name=test_previous_sibling" >test_previous_sibling</a></li>
  <li><a href="index.html?a=M000785&name=test_read_only?" >test_read_only?</a></li>
  <li><a href="index.html?a=M000786&name=test_remove_attribute" >test_remove_attribute</a></li>
  <li><a href="index.html?a=M000722&name=test_remove_namespace" >test_remove_namespace</a></li>
  <li><a href="index.html?a=M000799&name=test_search_by_symbol" >test_search_by_symbol</a></li>
  <li><a href="index.html?a=M000777&name=test_serialize_with_block" >test_serialize_with_block</a></li>
  <li><a href="index.html?a=M000803&name=test_set_content_should_unlink_existing_content" >test_set_content_should_unlink_existing_content</a></li>
  <li><a href="index.html?a=M000788&name=test_set_content_with_symbol" >test_set_content_with_symbol</a></li>
  <li><a href="index.html?a=M000765&name=test_set_namespace_from_different_doc" >test_set_namespace_from_different_doc</a></li>
  <li><a href="index.html?a=M000766&name=test_set_namespace_must_only_take_a_namespace" >test_set_namespace_must_only_take_a_namespace</a></li>
  <li><a href="index.html?a=M000796&name=test_set_property" >test_set_property</a></li>
  <li><a href="index.html?a=M000741&name=test_slash_search" >test_slash_search</a></li>
  <li><a href="index.html?a=M000748&name=test_spaceship" >test_spaceship</a></li>
  <li><a href="index.html?a=M000730&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M000783&name=test_to_str" >test_to_str</a></li>
  <li><a href="index.html?a=M000790&name=test_unlink" >test_unlink</a></li>
  <li><a href="index.html?a=M000779&name=test_values" >test_values</a></li>
  <li><a href="index.html?a=M000804&name=test_whitespace_nodes" >test_whitespace_nodes</a></li>
  <li><a href="index.html?a=M000774&name=test_write_to" >test_write_to</a></li>
  <li><a href="index.html?a=M000776&name=test_write_to_with_block" >test_write_to_with_block</a></li>
  <li><a href="index.html?a=M000812&name=test_xpath_results_have_document_and_are_decorated" >test_xpath_results_have_document_and_are_decorated</a></li>
  <li><a href="index.html?a=M000773&name=visit" >visit</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000772" class="method">
  <div id="M000772_title" class="title">
    <b>accept</b>(target)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000772_source')" id="l_M000772_source">show source</a> ]</p>
  <div id="M000772_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 444</span>
444:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>
445:             <span class="ruby-identifier">target</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>)
446:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000813" class="method">
  <div id="M000813_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000813_source')" id="l_M000813_source">show source</a> ]</p>
  <div id="M000813_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 863</span>
863:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span> ; <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000815" class="method">
  <div id="M000815_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000815_source')" id="l_M000815_source">show source</a> ]</p>
  <div id="M000815_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 873</span>
873:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span> ; <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000716" class="method">
  <div id="M000716_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000716_source')" id="l_M000716_source">show source</a> ]</p>
  <div id="M000716_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 8</span>
 8:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 9:         <span class="ruby-keyword kw">super</span>
10:         <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
11:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000771" class="method">
  <div id="M000771_title" class="title">
    <b>test_accept</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000771_source')" id="l_M000771_source">show source</a> ]</p>
  <div id="M000771_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 441</span>
441:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_accept</span>
442:         <span class="ruby-identifier">visitor</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> {
443:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:visited</span>
444:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>
445:             <span class="ruby-identifier">target</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>)
446:           <span class="ruby-keyword kw">end</span>
447: 
448:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit</span> <span class="ruby-identifier">node</span>
449:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>) }
450:             <span class="ruby-ivar">@visited</span> = <span class="ruby-keyword kw">true</span>
451:           <span class="ruby-keyword kw">end</span>
452:         }.<span class="ruby-identifier">new</span>
453:         <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>)
454:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">visited</span>
455:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000759" class="method">
  <div id="M000759_title" class="title">
    <b>test_add_default_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000759_source')" id="l_M000759_source">show source</a> ]</p>
  <div id="M000759_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 350</span>
350:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_default_ns</span>
351:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
352:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
353:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
354:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000760" class="method">
  <div id="M000760_title" class="title">
    <b>test_add_multiple_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000760_source')" id="l_M000760_source">show source</a> ]</p>
  <div id="M000760_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 356</span>
356:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_multiple_namespaces</span>
357:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
358: 
359:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
360:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
361: 
362:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
363:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:foo'</span>]
364:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000757" class="method">
  <div id="M000757_title" class="title">
    <b>test_add_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000757_source')" id="l_M000757_source">show source</a> ]</p>
  <div id="M000757_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 337</span>
337:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace</span>
338:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
339:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
340:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:foo'</span>]
341:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000764" class="method">
  <div id="M000764_title" class="title">
    <b>test_add_namespace_does_not_associate_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000764_source')" id="l_M000764_source">show source</a> ]</p>
  <div id="M000764_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 393</span>
393:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_does_not_associate_node</span>
394:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
395:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
396:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tlm.com/'</span>
397:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
398:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000758" class="method">
  <div id="M000758_title" class="title">
    <b>test_add_namespace_twice</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000758_source')" id="l_M000758_source">show source</a> ]</p>
  <div id="M000758_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 343</span>
343:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_twice</span>
344:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
345:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
346:         <span class="ruby-identifier">ns2</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
347:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">ns2</span>
348:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000763" class="method">
  <div id="M000763_title" class="title">
    <b>test_add_namespace_with_nil_associates_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000763_source')" id="l_M000763_source">show source</a> ]</p>
  <div id="M000763_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 386</span>
386:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_with_nil_associates_node</span>
387:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
388:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
389:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tlm.com/'</span>
390:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
391:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000784" class="method">
  <div id="M000784_title" class="title">
    <b>test_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000784_source')" id="l_M000784_source">show source</a> ]</p>
  <div id="M000784_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 546</span>
546:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ancestors</span>
547:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
548:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
549:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'employee'</span>, <span class="ruby-value str">'staff'</span>, <span class="ruby-value str">'document'</span>],
550:           <span class="ruby-identifier">address</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }
551:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000742" class="method">
  <div id="M000742_title" class="title">
    <b>test_append_with_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000742_source')" id="l_M000742_source">show source</a> ]</p>
  <div id="M000742_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 177</span>
177:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_append_with_document</span>
178:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
179:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
180:         <span class="ruby-keyword kw">end</span>
181:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000767" class="method">
  <div id="M000767_title" class="title">
    <b>test_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000767_source')" id="l_M000767_source">show source</a> ]</p>
  <div id="M000767_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 417</span>
417:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at</span>
418:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
419:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
420:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000769" class="method">
  <div id="M000769_title" class="title">
    <b>test_at_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000769_source')" id="l_M000769_source">show source</a> ]</p>
  <div id="M000769_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 429</span>
429:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at_css</span>
430:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">'address'</span>)
431:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'address'</span>)
432:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">size</span>
433:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>
434:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000768" class="method">
  <div id="M000768_title" class="title">
    <b>test_at_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000768_source')" id="l_M000768_source">show source</a> ]</p>
  <div id="M000768_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 422</span>
422:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at_xpath</span>
423:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">'//address'</span>)
424:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)
425:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">size</span>
426:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>
427:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000775" class="method">
  <div id="M000775_title" class="title">
    <b>test_attribute_with_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000775_source')" id="l_M000775_source">show source</a> ]</p>
  <div id="M000775_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 464</span>
464:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_with_symbol</span>
465:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'address'</span>).<span class="ruby-identifier">first</span>[<span class="ruby-identifier">:domestic</span>]
466:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000797" class="method">
  <div id="M000797_title" class="title">
    <b>test_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000797_source')" id="l_M000797_source">show source</a> ]</p>
  <div id="M000797_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 662</span>
662:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes</span>
663:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
664:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value str">'asdfasdfasdf'</span>])
665:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">node</span>[<span class="ruby-value str">'domestic'</span>])
666: 
667:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">2</span>]
668:         <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>
669:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">size</span>
670:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'domestic'</span>].<span class="ruby-identifier">value</span>
671:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'domestic'</span>].<span class="ruby-identifier">to_s</span>
672:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'No'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'street'</span>].<span class="ruby-identifier">value</span>
673:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000720" class="method">
  <div id="M000720_title" class="title">
    <b>test_bad_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000720_source')" id="l_M000720_source">show source</a> ]</p>
  <div id="M000720_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 30</span>
30:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bad_xpath</span>
31:         <span class="ruby-identifier">bad_xpath</span> = <span class="ruby-value str">'//foo['</span>
32: 
33:         <span class="ruby-keyword kw">begin</span>
34:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-identifier">bad_xpath</span>)
35:         <span class="ruby-keyword kw">rescue</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">e</span>
36:           <span class="ruby-identifier">assert_match</span>(<span class="ruby-identifier">bad_xpath</span>, <span class="ruby-identifier">e</span>.<span class="ruby-identifier">to_s</span>)
37:         <span class="ruby-keyword kw">end</span>
38:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000794" class="method">
  <div id="M000794_title" class="title">
    <b>test_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000794_source')" id="l_M000794_source">show source</a> ]</p>
  <div id="M000794_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 645</span>
645:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_child</span>
646:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
647:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">child</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>
648:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'text'</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">name</span>)
649:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000756" class="method">
  <div id="M000756_title" class="title">
    <b>test_children</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000756_source')" id="l_M000756_source">show source</a> ]</p>
  <div id="M000756_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 321</span>
321:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_children</span>
322:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\#{'&lt;a/&gt;' * 9 }&lt;/root&gt;\n&quot;</span>)
323:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
324:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
325: 
326:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\#{'&lt;a/&gt;' * 15 }&lt;/root&gt;\n&quot;</span>)
327:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
328:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
329:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000802" class="method">
  <div id="M000802_title" class="title">
    <b>test_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000802_source')" id="l_M000802_source">show source</a> ]</p>
  <div id="M000802_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 700</span>
700:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content</span>
701:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-ivar">@xml</span>)
702:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
703: 
704:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'hello world!'</span>
705:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'hello world!'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
706: 
707:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'&amp; &lt;foo&gt; &amp;amp;'</span>
708:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&amp; &lt;foo&gt; &amp;amp;'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
709:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;form&gt;&amp;amp; &amp;lt;foo&amp;gt; &amp;amp;amp;&lt;/form&gt;'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">to_xml</span>)
710:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000814" class="method">
  <div id="M000814_title" class="title">
    <b>test_css_results_have_document_and_are_decorated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000814_source')" id="l_M000814_source">show source</a> ]</p>
  <div id="M000814_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 871</span>
871:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_css_results_have_document_and_are_decorated</span>
872:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
873:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span> ; <span class="ruby-keyword kw">end</span>
874:         <span class="ruby-keyword kw">end</span>
875:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
876:         <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;employee&quot;</span>)
877:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">document</span>
878:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
879:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000761" class="method">
  <div id="M000761_title" class="title">
    <b>test_default_namespace=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000761_source')" id="l_M000761_source">show source</a> ]</p>
  <div id="M000761_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 366</span>
366:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_namespace=</span>
367:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
368:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">default_namespace</span> = <span class="ruby-value str">'http://tenderlovemaking.com'</span>
369:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
370:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000787" class="method">
  <div id="M000787_title" class="title">
    <b>test_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000787_source')" id="l_M000787_source">show source</a> ]</p>
  <div id="M000787_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 567</span>
567:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete</span>
568:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'/staff/employee/address'</span>).<span class="ruby-identifier">first</span>
569:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
570:         <span class="ruby-identifier">address</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'domestic'</span>
571:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
572:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000747" class="method">
  <div id="M000747_title" class="title">
    <b>test_description</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000747_source')" id="l_M000747_source">show source</a> ]</p>
  <div id="M000747_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 244</span>
244:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_description</span>
245:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'employee'</span>).<span class="ruby-identifier">description</span>
246:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000751" class="method">
  <div id="M000751_title" class="title">
    <b>test_different_document_compare</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000751_source')" id="l_M000751_source">show source</a> ]</p>
  <div id="M000751_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 266</span>
266:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_different_document_compare</span>
267:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
268:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;a&gt;&lt;b/&gt;&lt;/a&gt;'</span>)
269:         <span class="ruby-identifier">b</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'b'</span>)
270:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>)
271:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000750" class="method">
  <div id="M000750_title" class="title">
    <b>test_document_compare</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000750_source')" id="l_M000750_source">show source</a> ]</p>
  <div id="M000750_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 261</span>
261:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_compare</span>
262:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
263:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-1</span>, (<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-ivar">@xml</span>))
264:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000752" class="method">
  <div id="M000752_title" class="title">
    <b>test_duplicate_node_removes_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000752_source')" id="l_M000752_source">show source</a> ]</p>
  <div id="M000752_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 273</span>
273:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_duplicate_node_removes_namespace</span>
274:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='www.fruits.org'&gt;\n&lt;Apple&gt;&lt;/Apple&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
275:         <span class="ruby-identifier">apple</span> = <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'fruit:Apple'</span>, {<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})[<span class="ruby-value">0</span>]
276:         <span class="ruby-identifier">new_apple</span> = <span class="ruby-identifier">apple</span>.<span class="ruby-identifier">dup</span>
277:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_apple</span>
278:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:Apple'</span>).<span class="ruby-identifier">length</span>
279:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">to_xml</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-value str">'www.fruits.org'</span>).<span class="ruby-identifier">length</span>
280:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000781" class="method">
  <div id="M000781_title" class="title">
    <b>test_each</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000781_source')" id="l_M000781_source">show source</a> ]</p>
  <div id="M000781_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 526</span>
526:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_each</span>
527:         <span class="ruby-identifier">attributes</span> = []
528:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
529:           <span class="ruby-identifier">attributes</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
530:         <span class="ruby-keyword kw">end</span>
531:         <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">'domestic'</span>, <span class="ruby-value str">'Yes'</span>], [<span class="ruby-value str">'street'</span>, <span class="ruby-value str">'Yes'</span>]], <span class="ruby-identifier">attributes</span>
532:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000740" class="method">
  <div id="M000740_title" class="title">
    <b>test_element?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000740_source')" id="l_M000740_source">show source</a> ]</p>
  <div id="M000740_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 169</span>
169:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_element?</span>
170:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">element?</span>, <span class="ruby-value str">'is an element'</span>
171:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000718" class="method">
  <div id="M000718_title" class="title">
    <b>test_element_children</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000718_source')" id="l_M000718_source">show source</a> ]</p>
  <div id="M000718_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 19</span>
19:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_element_children</span>
20:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">element_children</span>
21:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">first_element_child</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>
22:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">element?</span> }, <span class="ruby-value str">'all nodes are elements'</span>
23:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000801" class="method">
  <div id="M000801_title" class="title">
    <b>test_encode_special_chars</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000801_source')" id="l_M000801_source">show source</a> ]</p>
  <div id="M000801_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 695</span>
695:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encode_special_chars</span>
696:         <span class="ruby-identifier">foo</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'employee'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encode_special_chars</span>(<span class="ruby-value str">'&amp;'</span>)
697:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&amp;amp;'</span>, <span class="ruby-identifier">foo</span>
698:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000789" class="method">
  <div id="M000789_title" class="title">
    <b>test_find_by_css_with_tilde_eql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000789_source')" id="l_M000789_source">show source</a> ]</p>
  <div id="M000789_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 580</span>
580:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css_with_tilde_eql</span>
581:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;a class='foo bar'&gt;Bar&lt;/a&gt;\n&lt;a class='bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bar'&gt;Bar&lt;/a&gt;\n&lt;a class='baz bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bazbarfoo'&gt;Awesome&lt;/a&gt;\n&lt;a class='bazbar'&gt;Awesome&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
582:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a[@class~=&quot;bar&quot;]'</span>)
583:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
584:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'Bar'</span>], <span class="ruby-identifier">set</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> }.<span class="ruby-identifier">uniq</span>
585:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000717" class="method">
  <div id="M000717_title" class="title">
    <b>test_first_element_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000717_source')" id="l_M000717_source">show source</a> ]</p>
  <div id="M000717_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 13</span>
13:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_first_element_child</span>
14:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">first_element_child</span>
15:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>
16:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">element?</span>, <span class="ruby-value str">'node is an element'</span>
17:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000753" class="method">
  <div id="M000753_title" class="title">
    <b>test_fragment_creates_elements</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000753_source')" id="l_M000753_source">show source</a> ]</p>
  <div id="M000753_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 296</span>
296:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_creates_elements</span>
297:         <span class="ruby-identifier">apple</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;Apple/&gt;'</span>)
298:         <span class="ruby-identifier">apple</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
299:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">ELEMENT_NODE</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span>
300:           <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>, <span class="ruby-identifier">child</span>
301:         <span class="ruby-keyword kw">end</span>
302:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000731" class="method">
  <div id="M000731_title" class="title">
    <b>test_gt_string_arg</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000731_source')" id="l_M000731_source">show source</a> ]</p>
  <div id="M000731_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 106</span>
106:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_gt_string_arg</span>
107:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'employee'</span>)
108:         <span class="ruby-identifier">nodes</span> = (<span class="ruby-identifier">node</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value str">'name'</span>)
109:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">length</span>
110:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">parent</span>
111:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000778" class="method">
  <div id="M000778_title" class="title">
    <b>test_hold_refence_to_subnode</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000778_source')" id="l_M000778_source">show source</a> ]</p>
  <div id="M000778_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 503</span>
503:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hold_refence_to_subnode</span>
504:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;\n&lt;b /&gt;\n&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
505:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_a</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>
506:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_b</span> = <span class="ruby-identifier">node_a</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'b'</span>).<span class="ruby-identifier">first</span>
507:         <span class="ruby-identifier">node_a</span>.<span class="ruby-identifier">unlink</span>
508:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'b'</span>, <span class="ruby-identifier">node_b</span>.<span class="ruby-identifier">name</span>
509:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000749" class="method">
  <div id="M000749_title" class="title">
    <b>test_incorrect_spaceship</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000749_source')" id="l_M000749_source">show source</a> ]</p>
  <div id="M000749_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 256</span>
256:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_incorrect_spaceship</span>
257:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
258:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-value str">'asdf'</span>)
259:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000743" class="method">
  <div id="M000743_title" class="title">
    <b>test_inspect_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000743_source')" id="l_M000743_source">show source</a> ]</p>
  <div id="M000743_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 183</span>
183:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_ns</span>
184:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">noblanks</span> }
185:         <span class="ruby-identifier">ins</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">inspect</span>
186: 
187:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
188:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ins</span>
189:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:attributes</span>
190:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
191:               <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">k</span>, <span class="ruby-identifier">ins</span>
192:               <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">v</span>, <span class="ruby-identifier">ins</span>
193:             <span class="ruby-keyword kw">end</span>
194:           <span class="ruby-keyword kw">end</span>
195: 
196:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:namespace</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
197:             <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ins</span>
198:             <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>, <span class="ruby-identifier">ins</span>
199:           <span class="ruby-keyword kw">end</span>
200:         <span class="ruby-keyword kw">end</span>
201:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000795" class="method">
  <div id="M000795_title" class="title">
    <b>test_key?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000795_source')" id="l_M000795_source">show source</a> ]</p>
  <div id="M000795_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 651</span>
651:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_key?</span>
652:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
653:         <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'asdfasdf'</span>))
654:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000780" class="method">
  <div id="M000780_title" class="title">
    <b>test_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000780_source')" id="l_M000780_source">show source</a> ]</p>
  <div id="M000780_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 522</span>
522:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_keys</span>
523:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ domestic street }</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">keys</span>
524:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000719" class="method">
  <div id="M000719_title" class="title">
    <b>test_last_element_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000719_source')" id="l_M000719_source">show source</a> ]</p>
  <div id="M000719_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 25</span>
25:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_last_element_child</span>
26:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">element_children</span>
27:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">element_children</span>.<span class="ruby-identifier">last</span>
28:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000811" class="method">
  <div id="M000811_title" class="title">
    <b>test_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000811_source')" id="l_M000811_source">show source</a> ]</p>
  <div id="M000811_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 846</span>
846:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_line</span>
847:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;\nHello world\n&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
848: 
849:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a&quot;</span>)
850:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>
851:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">line</span>
852:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000793" class="method">
  <div id="M000793_title" class="title">
    <b>test_name=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000793_source')" id="l_M000793_source">show source</a> ]</p>
  <div id="M000793_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 639</span>
639:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_name=</span>
640:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
641:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">'awesome'</span>
642:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'awesome'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
643:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000809" class="method">
  <div id="M000809_title" class="title">
    <b>test_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000809_source')" id="l_M000809_source">show source</a> ]</p>
  <div id="M000809_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 813</span>
813:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace</span>
814:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns:a='http://foo.com/' xmlns:b='http://bar.com/'&gt;\n&lt;y xmlns:c='http://bazz.com/'&gt;\n&lt;a:div&gt;hello a&lt;/a:div&gt;\n&lt;b:div&gt;hello b&lt;/b:div&gt;\n&lt;c:div&gt;hello c&lt;/c:div&gt;\n&lt;div&gt;hello moon&lt;/div&gt;\n&lt;/y&gt;\n&lt;/x&gt;\n&quot;</span>)
815:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//y/*&quot;</span>)
816:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
817:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
818:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;c&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
819:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">namespace</span>
820:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000762" class="method">
  <div id="M000762_title" class="title">
    <b>test_namespace=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000762_source')" id="l_M000762_source">show source</a> ]</p>
  <div id="M000762_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 372</span>
372:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace=</span>
373:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
374:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
375:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-value str">'http://tlm.com/'</span>
376: 
377:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">definition</span>
378: 
379:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
380: 
381:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//foo:address'</span>, {
382:           <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://tlm.com/'</span>
383:         })
384:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000745" class="method">
  <div id="M000745_title" class="title">
    <b>test_namespace_definitions_when_no_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000745_source')" id="l_M000745_source">show source</a> ]</p>
  <div id="M000745_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 219</span>
219:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_definitions_when_no_exist</span>
220:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>
221:         <span class="ruby-identifier">namespace_definitions</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">'//xmlns:awesome'</span>).<span class="ruby-identifier">namespace_definitions</span>
222:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">namespace_definitions</span>.<span class="ruby-identifier">length</span>
223:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000744" class="method">
  <div id="M000744_title" class="title">
    <b>test_namespace_definitions_when_some_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000744_source')" id="l_M000744_source">show source</a> ]</p>
  <div id="M000744_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_definitions_when_some_exist</span>
209:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>
210:         <span class="ruby-identifier">namespace_definitions</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespace_definitions</span>
211:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">namespace_definitions</span>.<span class="ruby-identifier">length</span>
212:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000746" class="method">
  <div id="M000746_title" class="title">
    <b>test_namespace_goes_to_children</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000746_source')" id="l_M000746_source">show source</a> ]</p>
  <div id="M000746_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 230</span>
230:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_goes_to_children</span>
231:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='www.fruits.org'&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
232:         <span class="ruby-identifier">apple</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Apple'</span>, <span class="ruby-identifier">fruits</span>)
233:         <span class="ruby-identifier">orange</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Orange'</span>, <span class="ruby-identifier">fruits</span>)
234:         <span class="ruby-identifier">apple</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">orange</span>
235:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apple</span>
236:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//fruit:Orange'</span>,{<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})
237:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//fruit:Apple'</span>,{<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})
238:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000807" class="method">
  <div id="M000807_title" class="title">
    <b>test_namespace_search_with_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000807_source')" id="l_M000807_source">show source</a> ]</p>
  <div id="M000807_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 756</span>
756:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_search_with_css</span>
757:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;car xmlns:part=\&quot;http://general-motors.com/\&quot;&gt;\n&lt;part:tire&gt;Michelin Model XGV&lt;/part:tire&gt;\n&lt;/car&gt;\n&lt;bicycle xmlns:part=\&quot;http://schwinn.com/\&quot;&gt;\n&lt;part:tire&gt;I'm a bicycle tire!&lt;/part:tire&gt;\n&lt;/bicycle&gt;\n&lt;/root&gt;\n&quot;</span>)
758: 
759:         <span class="ruby-identifier">tires</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'bike|tire'</span>, <span class="ruby-value str">'bike'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://schwinn.com/'</span>)
760:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tires</span>.<span class="ruby-identifier">length</span>
761:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000806" class="method">
  <div id="M000806_title" class="title">
    <b>test_namespace_search_with_xpath_and_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000806_source')" id="l_M000806_source">show source</a> ]</p>
  <div id="M000806_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 739</span>
739:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_search_with_xpath_and_hash</span>
740:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;car xmlns:part=\&quot;http://general-motors.com/\&quot;&gt;\n&lt;part:tire&gt;Michelin Model XGV&lt;/part:tire&gt;\n&lt;/car&gt;\n&lt;bicycle xmlns:part=\&quot;http://schwinn.com/\&quot;&gt;\n&lt;part:tire&gt;I'm a bicycle tire!&lt;/part:tire&gt;\n&lt;/bicycle&gt;\n&lt;/root&gt;\n&quot;</span>)
741: 
742:         <span class="ruby-identifier">tires</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//bike:tire'</span>, {<span class="ruby-value str">'bike'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://schwinn.com/'</span>})
743:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tires</span>.<span class="ruby-identifier">length</span>
744:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000721" class="method">
  <div id="M000721_title" class="title">
    <b>test_namespace_type_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000721_source')" id="l_M000721_source">show source</a> ]</p>
  <div id="M000721_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 40</span>
40:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_type_error</span>
41:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">TypeError</span>) <span class="ruby-keyword kw">do</span>
42:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>
43:         <span class="ruby-keyword kw">end</span>
44:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000810" class="method">
  <div id="M000810_title" class="title">
    <b>test_namespace_without_an_href_on_html_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000810_source')" id="l_M000810_source">show source</a> ]</p>
  <div id="M000810_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 832</span>
832:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_without_an_href_on_html_node</span>
833:         <span class="ruby-comment cmt"># because microsoft word's HTML formatting does this. ick.</span>
834:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;div&gt;&lt;o:p&gt;foo&lt;/o:p&gt;&lt;/div&gt;\n&quot;</span>
835: 
836:         <span class="ruby-identifier">assert_not_nil</span>(<span class="ruby-identifier">node</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'p'</span>))
837: 
838:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span>
839:         <span class="ruby-identifier">assert</span>       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value str">'xmlns:o'</span>)
840:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:o'</span>]
841:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000808" class="method">
  <div id="M000808_title" class="title">
    <b>test_namespaces_should_include_all_namespace_definitions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000808_source')" id="l_M000808_source">show source</a> ]</p>
  <div id="M000808_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 773</span>
773:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespaces_should_include_all_namespace_definitions</span>
774:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns=\&quot;http://quux.com/\&quot; xmlns:a=\&quot;http://foo.com/\&quot; xmlns:b=\&quot;http://bar.com/\&quot;&gt;\n&lt;y xmlns:c=\&quot;http://bazz.com/\&quot;&gt;\n&lt;z&gt;hello&lt;/z&gt;\n&lt;a xmlns:c=\&quot;http://newc.com/\&quot; /&gt;\n&lt;/y&gt;\n&lt;/x&gt;\n&quot;</span>)
775: 
776:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">namespaces</span> <span class="ruby-comment cmt"># Document#namespace</span>
777:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">&quot;xmlns&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://quux.com/&quot;</span>,
778:                       <span class="ruby-value str">&quot;xmlns:a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://foo.com/&quot;</span>,
779:                       <span class="ruby-value str">&quot;xmlns:b&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bar.com/&quot;</span>}, <span class="ruby-identifier">namespaces</span>)
780: 
781:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespaces</span>
782:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">&quot;xmlns&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://quux.com/&quot;</span>,
783:                       <span class="ruby-value str">&quot;xmlns:a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://foo.com/&quot;</span>,
784:                       <span class="ruby-value str">&quot;xmlns:b&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bar.com/&quot;</span>}, <span class="ruby-identifier">namespaces</span>)
785: 
786:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">&quot;//xmlns:y&quot;</span>).<span class="ruby-identifier">namespaces</span>
787:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">&quot;xmlns&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://quux.com/&quot;</span>,
788:                       <span class="ruby-value str">&quot;xmlns:a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://foo.com/&quot;</span>,
789:                       <span class="ruby-value str">&quot;xmlns:b&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bar.com/&quot;</span>,
790:                       <span class="ruby-value str">&quot;xmlns:c&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bazz.com/&quot;</span>}, <span class="ruby-identifier">namespaces</span>)
791: 
792:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">&quot;//xmlns:z&quot;</span>).<span class="ruby-identifier">namespaces</span>
793:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">&quot;xmlns&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://quux.com/&quot;</span>,
794:                       <span class="ruby-value str">&quot;xmlns:a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://foo.com/&quot;</span>,
795:                       <span class="ruby-value str">&quot;xmlns:b&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bar.com/&quot;</span>,
796:                       <span class="ruby-value str">&quot;xmlns:c&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bazz.com/&quot;</span>}, <span class="ruby-identifier">namespaces</span>)
797: 
798:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">&quot;//xmlns:a&quot;</span>).<span class="ruby-identifier">namespaces</span>
799:         <span class="ruby-identifier">assert_equal</span>({<span class="ruby-value str">&quot;xmlns&quot;</span>   =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://quux.com/&quot;</span>,
800:                       <span class="ruby-value str">&quot;xmlns:a&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://foo.com/&quot;</span>,
801:                       <span class="ruby-value str">&quot;xmlns:b&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://bar.com/&quot;</span>,
802:                       <span class="ruby-value str">&quot;xmlns:c&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://newc.com/&quot;</span>}, <span class="ruby-identifier">namespaces</span>)
803:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000782" class="method">
  <div id="M000782_title" class="title">
    <b>test_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000782_source')" id="l_M000782_source">show source</a> ]</p>
  <div id="M000782_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 534</span>
534:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new</span>
535:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'input'</span>, <span class="ruby-ivar">@xml</span>)
536:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">node_type</span>
537:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>, <span class="ruby-identifier">node</span>
538:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000800" class="method">
  <div id="M000800_title" class="title">
    <b>test_new_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000800_source')" id="l_M000800_source">show source</a> ]</p>
  <div id="M000800_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 689</span>
689:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_node</span>
690:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-ivar">@xml</span>)
691:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
692:         <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">document</span>)
693:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000755" class="method">
  <div id="M000755_title" class="title">
    <b>test_new_node_can_have_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000755_source')" id="l_M000755_source">show source</a> ]</p>
  <div id="M000755_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 315</span>
315:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_node_can_have_ancestors</span>
316:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;text&lt;/root&gt;'</span>)
317:         <span class="ruby-identifier">item</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'item'</span>, <span class="ruby-identifier">xml</span>)
318:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
319:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000732" class="method">
  <div id="M000732_title" class="title">
    <b>test_next_element_when_next_sibling_is_element_should_return_next_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000732_source')" id="l_M000732_source">show source</a> ]</p>
  <div id="M000732_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 113</span>
113:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_element_when_next_sibling_is_element_should_return_next_sibling</span>
114:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;&lt;quux /&gt;&lt;/root&gt;&quot;</span>
115:         <span class="ruby-identifier">node</span>         = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
116:         <span class="ruby-identifier">next_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_element</span>
117:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">next_element</span>.<span class="ruby-identifier">element?</span>
118:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;quux&quot;</span>), <span class="ruby-identifier">next_element</span>
119:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000735" class="method">
  <div id="M000735_title" class="title">
    <b>test_next_element_when_next_sibling_is_not_an_element_and_no_following_element_should_return_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000735_source')" id="l_M000735_source">show source</a> ]</p>
  <div id="M000735_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 134</span>
134:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_element_when_next_sibling_is_not_an_element_and_no_following_element_should_return_nil</span>
135:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;bar&lt;/root&gt;&quot;</span>
136:         <span class="ruby-identifier">node</span>         = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
137:         <span class="ruby-identifier">next_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_element</span>
138:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">next_element</span>
139:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000734" class="method">
  <div id="M000734_title" class="title">
    <b>test_next_element_when_next_sibling_is_not_an_element_should_return_closest_next_element_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000734_source')" id="l_M000734_source">show source</a> ]</p>
  <div id="M000734_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 126</span>
126:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_element_when_next_sibling_is_not_an_element_should_return_closest_next_element_sibling</span>
127:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;bar&lt;quux /&gt;&lt;/root&gt;&quot;</span>
128:         <span class="ruby-identifier">node</span>         = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>)
129:         <span class="ruby-identifier">next_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_element</span>
130:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">next_element</span>.<span class="ruby-identifier">element?</span>
131:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;quux&quot;</span>), <span class="ruby-identifier">next_element</span>
132:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000733" class="method">
  <div id="M000733_title" class="title">
    <b>test_next_element_when_there_is_no_next_sibling_should_return_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000733_source')" id="l_M000733_source">show source</a> ]</p>
  <div id="M000733_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 121</span>
121:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_element_when_there_is_no_next_sibling_should_return_nil</span>
122:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;&lt;quux /&gt;&lt;/root&gt;&quot;</span>
123:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;quux&quot;</span>).<span class="ruby-identifier">next_element</span>
124:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000791" class="method">
  <div id="M000791_title" class="title">
    <b>test_next_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000791_source')" id="l_M000791_source">show source</a> ]</p>
  <div id="M000791_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 626</span>
626:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_sibling</span>
627:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
628:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sibling</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">next_sibling</span>
629:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">name</span>)
630:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000754" class="method">
  <div id="M000754_title" class="title">
    <b>test_node_added_to_root_should_get_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000754_source')" id="l_M000754_source">show source</a> ]</p>
  <div id="M000754_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 304</span>
304:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_added_to_root_should_get_namespace</span>
305:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='http://www.fruits.org'&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
306:         <span class="ruby-identifier">apple</span> = <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;Apple/&gt;'</span>)
307:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apple</span>
308:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:Apple'</span>).<span class="ruby-identifier">length</span>
309:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000805" class="method">
  <div id="M000805_title" class="title">
    <b>test_node_equality</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000805_source')" id="l_M000805_source">show source</a> ]</p>
  <div id="M000805_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 726</span>
726:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_equality</span>
727:         <span class="ruby-identifier">doc1</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
728:         <span class="ruby-identifier">doc2</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
729: 
730:         <span class="ruby-identifier">address1_1</span> = <span class="ruby-identifier">doc1</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
731:         <span class="ruby-identifier">address1_2</span> = <span class="ruby-identifier">doc1</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
732: 
733:         <span class="ruby-identifier">address2</span> = <span class="ruby-identifier">doc2</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
734: 
735:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">address1_1</span>, <span class="ruby-identifier">address2</span> <span class="ruby-comment cmt"># two references to very, very similar nodes</span>
736:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">address1_1</span>, <span class="ruby-identifier">address1_2</span> <span class="ruby-comment cmt"># two references to the exact same node</span>
737:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000724" class="method">
  <div id="M000724_title" class="title">
    <b>test_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000724_source')" id="l_M000724_source">show source</a> ]</p>
  <div id="M000724_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 59</span>
59:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse</span>
60:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'fooooooo &lt;hello /&gt;'</span>)
61:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
62:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000729" class="method">
  <div id="M000729_title" class="title">
    <b>test_parse_error_list</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000729_source')" id="l_M000729_source">show source</a> ]</p>
  <div id="M000729_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 93</span>
93:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_error_list</span>
94:         <span class="ruby-identifier">error_count</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span>
95:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;hello&gt;'</span>)
96:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
97:         <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">error_count</span> <span class="ruby-operator">&lt;</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span>, <span class="ruby-value str">&quot;errors should have increased&quot;</span>)
98:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000728" class="method">
  <div id="M000728_title" class="title">
    <b>test_parse_invalid_html_markup_results_in_empty_nodeset</b>()
  </div>
  <div class="description">
  <p>
descriptive, not prescriptive.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000728_source')" id="l_M000728_source">show source</a> ]</p>
  <div id="M000728_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 86</span>
86:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_invalid_html_markup_results_in_empty_nodeset</span>
87:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;&lt;/html&gt;&quot;</span>)
88:         <span class="ruby-identifier">nodeset</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;div&gt;&lt;div&gt;a&lt;/div&gt;&lt;snippet&gt;b&lt;/snippet&gt;&lt;/div&gt;&quot;</span>
89:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-comment cmt"># &quot;Tag snippet invalid&quot;</span>
90:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">nodeset</span>.<span class="ruby-identifier">length</span>
91:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000723" class="method">
  <div id="M000723_title" class="title">
    <b>test_parse_needs_doc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000723_source')" id="l_M000723_source">show source</a> ]</p>
  <div id="M000723_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 54</span>
54:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_needs_doc</span>
55:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'fooooooo &lt;hello /&gt;'</span>)
56:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'hello'</span>).<span class="ruby-identifier">length</span>
57:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000725" class="method">
  <div id="M000725_title" class="title">
    <b>test_parse_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000725_source')" id="l_M000725_source">show source</a> ]</p>
  <div id="M000725_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_with_block</span>
65:         <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
66:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;hello /&gt;'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
67:           <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
68:           <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">ParseOptions</span>, <span class="ruby-identifier">cfg</span>
69:         }
70:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>, <span class="ruby-value str">'config block called'</span>
71:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
72:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000727" class="method">
  <div id="M000727_title" class="title">
    <b>test_parse_with_empty_string</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000727_source')" id="l_M000727_source">show source</a> ]</p>
  <div id="M000727_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 80</span>
80:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_with_empty_string</span>
81:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">''</span>)
82:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
83:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000726" class="method">
  <div id="M000726_title" class="title">
    <b>test_parse_with_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000726_source')" id="l_M000726_source">show source</a> ]</p>
  <div id="M000726_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 74</span>
74:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_with_io</span>
75:         <span class="ruby-identifier">list</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'&lt;hello /&gt;'</span>))
76:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
77:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
78:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000798" class="method">
  <div id="M000798_title" class="title">
    <b>test_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000798_source')" id="l_M000798_source">show source</a> ]</p>
  <div id="M000798_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 675</span>
675:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_path</span>
676:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
677:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>
678:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/staff/employee[1]'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">path</span>)
679:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000770" class="method">
  <div id="M000770_title" class="title">
    <b>test_percent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000770_source')" id="l_M000770_source">show source</a> ]</p>
  <div id="M000770_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 436</span>
436:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_percent</span>
437:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span> <span class="ruby-operator">%</span> (<span class="ruby-value str">'address'</span>)
438:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
439:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000736" class="method">
  <div id="M000736_title" class="title">
    <b>test_previous_element_when_previous_sibling_is_element_should_return_previous_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000736_source')" id="l_M000736_source">show source</a> ]</p>
  <div id="M000736_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 141</span>
141:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_element_when_previous_sibling_is_element_should_return_previous_sibling</span>
142:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;&lt;quux /&gt;&lt;/root&gt;&quot;</span>
143:         <span class="ruby-identifier">node</span>             = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;quux&quot;</span>)
144:         <span class="ruby-identifier">previous_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_element</span>
145:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">previous_element</span>.<span class="ruby-identifier">element?</span>
146:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>), <span class="ruby-identifier">previous_element</span>
147:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000739" class="method">
  <div id="M000739_title" class="title">
    <b>test_previous_element_when_previous_sibling_is_not_an_element_and_no_following_element_should_return_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000739_source')" id="l_M000739_source">show source</a> ]</p>
  <div id="M000739_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 162</span>
162:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_element_when_previous_sibling_is_not_an_element_and_no_following_element_should_return_nil</span>
163:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;foo&lt;bar /&gt;&lt;/root&gt;&quot;</span>
164:         <span class="ruby-identifier">node</span>             = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;bar&quot;</span>)
165:         <span class="ruby-identifier">previous_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_element</span>
166:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">previous_element</span>
167:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000738" class="method">
  <div id="M000738_title" class="title">
    <b>test_previous_element_when_previous_sibling_is_not_an_element_should_return_closest_previous_element_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000738_source')" id="l_M000738_source">show source</a> ]</p>
  <div id="M000738_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 154</span>
154:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_element_when_previous_sibling_is_not_an_element_should_return_closest_previous_element_sibling</span>
155:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;bar&lt;quux /&gt;&lt;/root&gt;&quot;</span>
156:         <span class="ruby-identifier">node</span>             = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;quux&quot;</span>)
157:         <span class="ruby-identifier">previous_element</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_element</span>
158:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">previous_element</span>.<span class="ruby-identifier">element?</span>
159:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>), <span class="ruby-identifier">previous_element</span>
160:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000737" class="method">
  <div id="M000737_title" class="title">
    <b>test_previous_element_when_there_is_no_previous_sibling_should_return_nil</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000737_source')" id="l_M000737_source">show source</a> ]</p>
  <div id="M000737_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 149</span>
149:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_element_when_there_is_no_previous_sibling_should_return_nil</span>
150:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;&lt;foo /&gt;&lt;quux /&gt;&lt;/root&gt;&quot;</span>
151:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;foo&quot;</span>).<span class="ruby-identifier">previous_element</span>
152:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000792" class="method">
  <div id="M000792_title" class="title">
    <b>test_previous_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000792_source')" id="l_M000792_source">show source</a> ]</p>
  <div id="M000792_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 632</span>
632:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_sibling</span>
633:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
634:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sibling</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">next_sibling</span>
635:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">name</span>)
636:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">previous_sibling</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>)
637:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000785" class="method">
  <div id="M000785_title" class="title">
    <b>test_read_only?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000785_source')" id="l_M000785_source">show source</a> ]</p>
  <div id="M000785_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 553</span>
553:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_only?</span>
554:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">entity_decl</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">internal_subset</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
555:           <span class="ruby-identifier">x</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">ENTITY_DECL</span>
556:         }
557:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">entity_decl</span>.<span class="ruby-identifier">read_only?</span>
558:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000786" class="method">
  <div id="M000786_title" class="title">
    <b>test_remove_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000786_source')" id="l_M000786_source">show source</a> ]</p>
  <div id="M000786_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 560</span>
560:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_attribute</span>
561:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'/staff/employee/address'</span>).<span class="ruby-identifier">first</span>
562:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
563:         <span class="ruby-identifier">address</span>.<span class="ruby-identifier">remove_attribute</span> <span class="ruby-value str">'domestic'</span>
564:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
565:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000722" class="method">
  <div id="M000722_title" class="title">
    <b>test_remove_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000722_source')" id="l_M000722_source">show source</a> ]</p>
  <div id="M000722_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 46</span>
46:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_namespace</span>
47:         <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;r xmlns=&quot;v&quot;&gt;&lt;s /&gt;&lt;/r&gt;'</span>)
48:         <span class="ruby-identifier">tag</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'s'</span>)
49:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">namespace</span>
50:         <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-keyword kw">nil</span>
51:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">tag</span>.<span class="ruby-identifier">namespace</span>
52:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000799" class="method">
  <div id="M000799_title" class="title">
    <b>test_search_by_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000799_source')" id="l_M000799_source">show source</a> ]</p>
  <div id="M000799_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 681</span>
681:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_by_symbol</span>
682:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">:employee</span>)
683:         <span class="ruby-identifier">assert</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
684: 
685:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:employee</span>)
686:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/EMP0001/</span>
687:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000777" class="method">
  <div id="M000777_title" class="title">
    <b>test_serialize_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000777_source')" id="l_M000777_source">show source</a> ]</p>
  <div id="M000777_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 491</span>
491:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialize_with_block</span>
492:         <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
493:         <span class="ruby-identifier">conf</span> = <span class="ruby-keyword kw">nil</span>
494:         <span class="ruby-identifier">string</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
495:           <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
496:           <span class="ruby-identifier">conf</span> = <span class="ruby-identifier">config</span>
497:           <span class="ruby-identifier">config</span>.<span class="ruby-identifier">format</span>.<span class="ruby-identifier">as_html</span>.<span class="ruby-identifier">no_empty_tags</span>
498:         <span class="ruby-keyword kw">end</span>
499:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
500:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">options</span>), <span class="ruby-identifier">string</span>
501:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000803" class="method">
  <div id="M000803_title" class="title">
    <b>test_set_content_should_unlink_existing_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000803_source')" id="l_M000803_source">show source</a> ]</p>
  <div id="M000803_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 712</span>
712:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_content_should_unlink_existing_content</span>
713:         <span class="ruby-identifier">node</span>     = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">&quot;employee&quot;</span>)
714:         <span class="ruby-identifier">children</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>
715:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">&quot;hello&quot;</span>
716:         <span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span> <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">child</span>.<span class="ruby-identifier">parent</span> }
717:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000788" class="method">
  <div id="M000788_title" class="title">
    <b>test_set_content_with_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000788_source')" id="l_M000788_source">show source</a> ]</p>
  <div id="M000788_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 574</span>
574:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_content_with_symbol</span>
575:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//name'</span>)
576:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-identifier">:foo</span>
577:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>
578:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000765" class="method">
  <div id="M000765_title" class="title">
    <b>test_set_namespace_from_different_doc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000765_source')" id="l_M000765_source">show source</a> ]</p>
  <div id="M000765_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 400</span>
400:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_namespace_from_different_doc</span>
401:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
402:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
403:         <span class="ruby-identifier">decl</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>
404: 
405:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
406:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">decl</span>
407:         <span class="ruby-keyword kw">end</span>
408:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000766" class="method">
  <div id="M000766_title" class="title">
    <b>test_set_namespace_must_only_take_a_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000766_source')" id="l_M000766_source">show source</a> ]</p>
  <div id="M000766_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 410</span>
410:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_namespace_must_only_take_a_namespace</span>
411:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
412:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">TypeError</span>) <span class="ruby-keyword kw">do</span>
413:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">node</span>
414:         <span class="ruby-keyword kw">end</span>
415:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000796" class="method">
  <div id="M000796_title" class="title">
    <b>test_set_property</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000796_source')" id="l_M000796_source">show source</a> ]</p>
  <div id="M000796_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 656</span>
656:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_property</span>
657:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
658:         <span class="ruby-identifier">node</span>[<span class="ruby-value str">'foo'</span>] = <span class="ruby-value str">'bar'</span>
659:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">node</span>[<span class="ruby-value str">'foo'</span>])
660:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000741" class="method">
  <div id="M000741_title" class="title">
    <b>test_slash_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000741_source')" id="l_M000741_source">show source</a> ]</p>
  <div id="M000741_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 173</span>
173:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_slash_search</span>
174:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'EMP0001'</span>, (<span class="ruby-ivar">@xml</span><span class="ruby-operator">/</span><span class="ruby-identifier">:staff</span><span class="ruby-operator">/</span><span class="ruby-identifier">:employee</span><span class="ruby-operator">/</span><span class="ruby-identifier">:employeeId</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">text</span>
175:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000748" class="method">
  <div id="M000748_title" class="title">
    <b>test_spaceship</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000748_source')" id="l_M000748_source">show source</a> ]</p>
  <div id="M000748_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 248</span>
248:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_spaceship</span>
249:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
250:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-1</span>, (<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>))
251:         <span class="ruby-identifier">list</span> = [<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>].<span class="ruby-identifier">sort</span>
252:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">first</span>
253:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">last</span>
254:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000730" class="method">
  <div id="M000730_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000730_source')" id="l_M000730_source">show source</a> ]</p>
  <div id="M000730_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
101:         <span class="ruby-identifier">subclass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>)
102:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-ivar">@xml</span>).<span class="ruby-identifier">dup</span>
103:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">subclass</span>, <span class="ruby-identifier">node</span>
104:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000783" class="method">
  <div id="M000783_title" class="title">
    <b>test_to_str</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000783_source')" id="l_M000783_source">show source</a> ]</p>
  <div id="M000783_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 540</span>
540:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_str</span>
541:         <span class="ruby-identifier">name</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//name'</span>).<span class="ruby-identifier">first</span>
542:         <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/Margaret/</span>, <span class="ruby-value str">''</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>)
543:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Margaret Martin'</span>, <span class="ruby-value str">''</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>)
544:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000790" class="method">
  <div id="M000790_title" class="title">
    <b>test_unlink</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000790_source')" id="l_M000790_source">show source</a> ]</p>
  <div id="M000790_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 598</span>
598:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unlink</span>
599:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a class='foo bar'&gt;Bar&lt;/a&gt;\n&lt;a class='bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bar'&gt;Bar&lt;/a&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;a class='baz bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bazbarfoo'&gt;Awesome&lt;/a&gt;\n&lt;a class='bazbar'&gt;Awesome&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
600:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>)[<span class="ruby-value">3</span>]
601:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Hello world'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">text</span>)
602:         <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/Hello world/</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>)
603:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>
604:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">document</span>
605:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_sibling</span>
606:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_sibling</span>
607:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">unlink</span>
608:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>
609:         <span class="ruby-comment cmt">#assert !node.document</span>
610:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_sibling</span>
611:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_sibling</span>
612:         <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/Hello world/</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>)
613:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000779" class="method">
  <div id="M000779_title" class="title">
    <b>test_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000779_source')" id="l_M000779_source">show source</a> ]</p>
  <div id="M000779_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 518</span>
518:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_values</span>
519:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ Yes Yes }</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">values</span>
520:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000804" class="method">
  <div id="M000804_title" class="title">
    <b>test_whitespace_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000804_source')" id="l_M000804_source">show source</a> ]</p>
  <div id="M000804_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 719</span>
719:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nodes</span>
720:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;&lt;b&gt;Foo&lt;/b&gt;\n&lt;i&gt;Bar&lt;/i&gt; &lt;p&gt;Bazz&lt;/p&gt;&lt;/root&gt;&quot;</span>)
721:         <span class="ruby-identifier">children</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//root'</span>).<span class="ruby-identifier">children</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">to_s</span>}
722:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>]
723:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-identifier">children</span>[<span class="ruby-value">3</span>]
724:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000774" class="method">
  <div id="M000774_title" class="title">
    <b>test_write_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000774_source')" id="l_M000774_source">show source</a> ]</p>
  <div id="M000774_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 457</span>
457:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to</span>
458:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
459:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">write_to</span> <span class="ruby-identifier">io</span>
460:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
461:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>
462:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000776" class="method">
  <div id="M000776_title" class="title">
    <b>test_write_to_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000776_source')" id="l_M000776_source">show source</a> ]</p>
  <div id="M000776_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 468</span>
468:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to_with_block</span>
469:         <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
470:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
471:         <span class="ruby-identifier">conf</span> = <span class="ruby-keyword kw">nil</span>
472:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">write_to</span> <span class="ruby-identifier">io</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
473:           <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
474:           <span class="ruby-identifier">conf</span> = <span class="ruby-identifier">config</span>
475:           <span class="ruby-identifier">config</span>.<span class="ruby-identifier">format</span>.<span class="ruby-identifier">as_html</span>.<span class="ruby-identifier">no_empty_tags</span>
476:         <span class="ruby-keyword kw">end</span>
477:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
478:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
479:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">options</span>), <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>
480:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000812" class="method">
  <div id="M000812_title" class="title">
    <b>test_xpath_results_have_document_and_are_decorated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000812_source')" id="l_M000812_source">show source</a> ]</p>
  <div id="M000812_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 861</span>
861:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xpath_results_have_document_and_are_decorated</span>
862:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
863:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span> ; <span class="ruby-keyword kw">end</span>
864:         <span class="ruby-keyword kw">end</span>
865:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
866:         <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//employee&quot;</span>)
867:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">document</span>
868:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
869:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000773" class="method">
  <div id="M000773_title" class="title">
    <b>visit</b>(node)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000773_source')" id="l_M000773_source">show source</a> ]</p>
  <div id="M000773_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 448</span>
448:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit</span> <span class="ruby-identifier">node</span>
449:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>) }
450:             <span class="ruby-ivar">@visited</span> = <span class="ruby-keyword kw">true</span>
451:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>