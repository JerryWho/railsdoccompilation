  <div id="C00000075">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestNode<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/test_node_rb.html');">test/xml/test_node.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000805&name=accept" >accept</a></li>
  <li><a href="index.html?a=M000769&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000804&name=test_accept" >test_accept</a></li>
  <li><a href="index.html?a=M000826&name=test_add_child" >test_add_child</a></li>
  <li><a href="index.html?a=M000825&name=test_add_child_from_other_document" >test_add_child_from_other_document</a></li>
  <li><a href="index.html?a=M000824&name=test_add_child_in_same_document" >test_add_child_in_same_document</a></li>
  <li><a href="index.html?a=M000787&name=test_add_child_path_following_sequential_text_nodes" >test_add_child_path_following_sequential_text_nodes</a></li>
  <li><a href="index.html?a=M000808&name=test_add_child_should_inherit_namespace" >test_add_child_should_inherit_namespace</a></li>
  <li><a href="index.html?a=M000809&name=test_add_child_should_not_inherit_namespace_if_it_has_one" >test_add_child_should_not_inherit_namespace_if_it_has_one</a></li>
  <li><a href="index.html?a=M000792&name=test_add_default_ns" >test_add_default_ns</a></li>
  <li><a href="index.html?a=M000793&name=test_add_multiple_namespaces" >test_add_multiple_namespaces</a></li>
  <li><a href="index.html?a=M000790&name=test_add_namespace" >test_add_namespace</a></li>
  <li><a href="index.html?a=M000779&name=test_add_namespace_add_child" >test_add_namespace_add_child</a></li>
  <li><a href="index.html?a=M000797&name=test_add_namespace_does_not_associate_node" >test_add_namespace_does_not_associate_node</a></li>
  <li><a href="index.html?a=M000791&name=test_add_namespace_twice" >test_add_namespace_twice</a></li>
  <li><a href="index.html?a=M000796&name=test_add_namespace_with_nil_associates_node" >test_add_namespace_with_nil_associates_node</a></li>
  <li><a href="index.html?a=M000831&name=test_add_next_sibling_merge" >test_add_next_sibling_merge</a></li>
  <li><a href="index.html?a=M000829&name=test_add_previous_sibling" >test_add_previous_sibling</a></li>
  <li><a href="index.html?a=M000830&name=test_add_previous_sibling_merge" >test_add_previous_sibling_merge</a></li>
  <li><a href="index.html?a=M000820&name=test_ancestors" >test_ancestors</a></li>
  <li><a href="index.html?a=M000772&name=test_append_with_document" >test_append_with_document</a></li>
  <li><a href="index.html?a=M000800&name=test_at" >test_at</a></li>
  <li><a href="index.html?a=M000802&name=test_at_css" >test_at_css</a></li>
  <li><a href="index.html?a=M000801&name=test_at_xpath" >test_at_xpath</a></li>
  <li><a href="index.html?a=M000811&name=test_attribute_with_symbol" >test_attribute_with_symbol</a></li>
  <li><a href="index.html?a=M000840&name=test_attributes" >test_attributes</a></li>
  <li><a href="index.html?a=M000827&name=test_chevron_works_as_add_child" >test_chevron_works_as_add_child</a></li>
  <li><a href="index.html?a=M000837&name=test_child" >test_child</a></li>
  <li><a href="index.html?a=M000789&name=test_children" >test_children</a></li>
  <li><a href="index.html?a=M000845&name=test_content" >test_content</a></li>
  <li><a href="index.html?a=M000794&name=test_default_namespace=" >test_default_namespace=</a></li>
  <li><a href="index.html?a=M000823&name=test_delete" >test_delete</a></li>
  <li><a href="index.html?a=M000778&name=test_description" >test_description</a></li>
  <li><a href="index.html?a=M000783&name=test_different_document_compare" >test_different_document_compare</a></li>
  <li><a href="index.html?a=M000782&name=test_document_compare" >test_document_compare</a></li>
  <li><a href="index.html?a=M000784&name=test_duplicate_node_removes_namespace" >test_duplicate_node_removes_namespace</a></li>
  <li><a href="index.html?a=M000817&name=test_each" >test_each</a></li>
  <li><a href="index.html?a=M000770&name=test_element?" >test_element?</a></li>
  <li><a href="index.html?a=M000844&name=test_encode_special_chars" >test_encode_special_chars</a></li>
  <li><a href="index.html?a=M000832&name=test_find_by_css_with_tilde_eql" >test_find_by_css_with_tilde_eql</a></li>
  <li><a href="index.html?a=M000785&name=test_fragment_creates_elements" >test_fragment_creates_elements</a></li>
  <li><a href="index.html?a=M000814&name=test_hold_refence_to_subnode" >test_hold_refence_to_subnode</a></li>
  <li><a href="index.html?a=M000848&name=test_illegal_replace_of_node_with_doc" >test_illegal_replace_of_node_with_doc</a></li>
  <li><a href="index.html?a=M000781&name=test_incorrect_spaceship" >test_incorrect_spaceship</a></li>
  <li><a href="index.html?a=M000773&name=test_inspect_ns" >test_inspect_ns</a></li>
  <li><a href="index.html?a=M000838&name=test_key?" >test_key?</a></li>
  <li><a href="index.html?a=M000816&name=test_keys" >test_keys</a></li>
  <li><a href="index.html?a=M000855&name=test_line" >test_line</a></li>
  <li><a href="index.html?a=M000836&name=test_name=" >test_name=</a></li>
  <li><a href="index.html?a=M000853&name=test_namespace" >test_namespace</a></li>
  <li><a href="index.html?a=M000795&name=test_namespace=" >test_namespace=</a></li>
  <li><a href="index.html?a=M000850&name=test_namespace_as_hash" >test_namespace_as_hash</a></li>
  <li><a href="index.html?a=M000777&name=test_namespace_goes_to_children" >test_namespace_goes_to_children</a></li>
  <li><a href="index.html?a=M000774&name=test_namespace_nodes" >test_namespace_nodes</a></li>
  <li><a href="index.html?a=M000851&name=test_namespace_search_with_css" >test_namespace_search_with_css</a></li>
  <li><a href="index.html?a=M000854&name=test_namespace_without_an_href_on_html_node" >test_namespace_without_an_href_on_html_node</a></li>
  <li><a href="index.html?a=M000852&name=test_namespaces" >test_namespaces</a></li>
  <li><a href="index.html?a=M000818&name=test_new" >test_new</a></li>
  <li><a href="index.html?a=M000843&name=test_new_node" >test_new_node</a></li>
  <li><a href="index.html?a=M000788&name=test_new_node_can_have_ancestors" >test_new_node_can_have_ancestors</a></li>
  <li><a href="index.html?a=M000834&name=test_next_sibling" >test_next_sibling</a></li>
  <li><a href="index.html?a=M000775&name=test_no_definitions" >test_no_definitions</a></li>
  <li><a href="index.html?a=M000786&name=test_node_added_to_root_should_get_namespace" >test_node_added_to_root_should_get_namespace</a></li>
  <li><a href="index.html?a=M000849&name=test_node_equality" >test_node_equality</a></li>
  <li><a href="index.html?a=M000841&name=test_path" >test_path</a></li>
  <li><a href="index.html?a=M000803&name=test_percent" >test_percent</a></li>
  <li><a href="index.html?a=M000835&name=test_previous_sibling" >test_previous_sibling</a></li>
  <li><a href="index.html?a=M000821&name=test_read_only?" >test_read_only?</a></li>
  <li><a href="index.html?a=M000822&name=test_remove_attribute" >test_remove_attribute</a></li>
  <li><a href="index.html?a=M000847&name=test_replace" >test_replace</a></li>
  <li><a href="index.html?a=M000807&name=test_replace_with_default_namespaces" >test_replace_with_default_namespaces</a></li>
  <li><a href="index.html?a=M000842&name=test_search_by_symbol" >test_search_by_symbol</a></li>
  <li><a href="index.html?a=M000813&name=test_serialize_with_block" >test_serialize_with_block</a></li>
  <li><a href="index.html?a=M000828&name=test_set_content_with_symbol" >test_set_content_with_symbol</a></li>
  <li><a href="index.html?a=M000798&name=test_set_namespace_from_different_doc" >test_set_namespace_from_different_doc</a></li>
  <li><a href="index.html?a=M000799&name=test_set_namespace_must_only_take_a_namespace" >test_set_namespace_must_only_take_a_namespace</a></li>
  <li><a href="index.html?a=M000839&name=test_set_property" >test_set_property</a></li>
  <li><a href="index.html?a=M000771&name=test_slash_search" >test_slash_search</a></li>
  <li><a href="index.html?a=M000780&name=test_spaceship" >test_spaceship</a></li>
  <li><a href="index.html?a=M000776&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M000819&name=test_to_str" >test_to_str</a></li>
  <li><a href="index.html?a=M000833&name=test_unlink" >test_unlink</a></li>
  <li><a href="index.html?a=M000856&name=test_unlink_then_reparent" >test_unlink_then_reparent</a></li>
  <li><a href="index.html?a=M000815&name=test_values" >test_values</a></li>
  <li><a href="index.html?a=M000846&name=test_whitespace_nodes" >test_whitespace_nodes</a></li>
  <li><a href="index.html?a=M000810&name=test_write_to" >test_write_to</a></li>
  <li><a href="index.html?a=M000812&name=test_write_to_with_block" >test_write_to_with_block</a></li>
  <li><a href="index.html?a=M000806&name=visit" >visit</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000805" class="method">
  <div id="M000805_title" class="title">
    <b>accept</b>(target)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000805_source')" id="l_M000805_source">show source</a> ]</p>
  <div id="M000805_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 315</span>
315:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>
316:             <span class="ruby-identifier">target</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>)
317:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000769" class="method">
  <div id="M000769_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000769_source')" id="l_M000769_source">show source</a> ]</p>
  <div id="M000769_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 8</span>
 8:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 9:         <span class="ruby-keyword kw">super</span>
10:         <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
11:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000804" class="method">
  <div id="M000804_title" class="title">
    <b>test_accept</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000804_source')" id="l_M000804_source">show source</a> ]</p>
  <div id="M000804_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 312</span>
312:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_accept</span>
313:         <span class="ruby-identifier">visitor</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> {
314:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:visited</span>
315:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">accept</span> <span class="ruby-identifier">target</span>
316:             <span class="ruby-identifier">target</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>)
317:           <span class="ruby-keyword kw">end</span>
318: 
319:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit</span> <span class="ruby-identifier">node</span>
320:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>) }
321:             <span class="ruby-ivar">@visited</span> = <span class="ruby-keyword kw">true</span>
322:           <span class="ruby-keyword kw">end</span>
323:         }.<span class="ruby-identifier">new</span>
324:         <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>)
325:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">visitor</span>.<span class="ruby-identifier">visited</span>
326:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000826" class="method">
  <div id="M000826_title" class="title">
    <b>test_add_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000826_source')" id="l_M000826_source">show source</a> ]</p>
  <div id="M000826_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 518</span>
518:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child</span>
519:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
520:         <span class="ruby-identifier">text_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">xml</span>)
521:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">TEXT_NODE</span>, <span class="ruby-identifier">text_node</span>.<span class="ruby-identifier">type</span>
522:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">add_child</span> <span class="ruby-identifier">text_node</span>
523:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>
524:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000825" class="method">
  <div id="M000825_title" class="title">
    <b>test_add_child_from_other_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000825_source')" id="l_M000825_source">show source</a> ]</p>
  <div id="M000825_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 506</span>
506:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_from_other_document</span>
507:         <span class="ruby-identifier">d1</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;&lt;item&gt;1&lt;/item&gt;&lt;item&gt;2&lt;/item&gt;&lt;/root&gt;&quot;</span>)
508:         <span class="ruby-identifier">d2</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;&lt;item&gt;3&lt;/item&gt;&lt;item&gt;4&lt;/item&gt;&lt;/root&gt;&quot;</span>)
509: 
510:         <span class="ruby-identifier">d2</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'root'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'item'</span>).<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
511:           <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'root'</span>).<span class="ruby-identifier">add_child</span> <span class="ruby-identifier">i</span>
512:         <span class="ruby-keyword kw">end</span>
513: 
514:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">d2</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'item'</span>).<span class="ruby-identifier">size</span>
515:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">d1</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'item'</span>).<span class="ruby-identifier">size</span>
516:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000824" class="method">
  <div id="M000824_title" class="title">
    <b>test_add_child_in_same_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000824_source')" id="l_M000824_source">show source</a> ]</p>
  <div id="M000824_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 493</span>
493:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_in_same_document</span>
494:         <span class="ruby-identifier">child</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'employee'</span>).<span class="ruby-identifier">first</span>
495: 
496:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">previous_last_child</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>
497:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">new_child</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>
498: 
499:         <span class="ruby-identifier">last</span> = <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>
500: 
501:         <span class="ruby-identifier">child</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-identifier">new_child</span>)
502:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">new_child</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>
503:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">last</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">last</span>
504:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000787" class="method">
  <div id="M000787_title" class="title">
    <b>test_add_child_path_following_sequential_text_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000787_source')" id="l_M000787_source">show source</a> ]</p>
  <div id="M000787_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 179</span>
179:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_path_following_sequential_text_nodes</span>
180:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;text&lt;/root&gt;'</span>)
181:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'text'</span>, <span class="ruby-identifier">xml</span>))
182:         <span class="ruby-identifier">item</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'item'</span>, <span class="ruby-identifier">xml</span>))
183:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/root/item'</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">path</span>
184:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000808" class="method">
  <div id="M000808_title" class="title">
    <b>test_add_child_should_inherit_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000808_source')" id="l_M000808_source">show source</a> ]</p>
  <div id="M000808_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 344</span>
344:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_should_inherit_namespace</span>
345:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot;&gt;\n&lt;first&gt;\n&lt;/first&gt;\n&lt;/root&gt;\n&quot;</span>)
346:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:first'</span>)
347:         <span class="ruby-identifier">child</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'second'</span>, <span class="ruby-identifier">doc</span>)
348:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-identifier">child</span>)
349:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:second'</span>)
350:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000809" class="method">
  <div id="M000809_title" class="title">
    <b>test_add_child_should_not_inherit_namespace_if_it_has_one</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000809_source')" id="l_M000809_source">show source</a> ]</p>
  <div id="M000809_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 358</span>
358:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_should_not_inherit_namespace_if_it_has_one</span>
359:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;http://flavorjon.es/\&quot;&gt;\n&lt;first&gt;\n&lt;/first&gt;\n&lt;/root&gt;\n&quot;</span>)
360:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:first'</span>)
361:         <span class="ruby-identifier">child</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'second'</span>, <span class="ruby-identifier">doc</span>)
362: 
363:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespace_definitions</span>.<span class="ruby-identifier">detect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">prefix</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;foo&quot;</span> }
364:         <span class="ruby-identifier">child</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">ns</span>
365: 
366:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-identifier">child</span>)
367:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//foo:second'</span>, <span class="ruby-value str">&quot;foo&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://flavorjon.es/&quot;</span>)
368:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000792" class="method">
  <div id="M000792_title" class="title">
    <b>test_add_default_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000792_source')" id="l_M000792_source">show source</a> ]</p>
  <div id="M000792_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_default_ns</span>
222:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
223:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
224:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
225:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000793" class="method">
  <div id="M000793_title" class="title">
    <b>test_add_multiple_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000793_source')" id="l_M000793_source">show source</a> ]</p>
  <div id="M000793_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_multiple_namespaces</span>
228:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
229: 
230:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
231:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
232: 
233:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
234:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:foo'</span>]
235:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000790" class="method">
  <div id="M000790_title" class="title">
    <b>test_add_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000790_source')" id="l_M000790_source">show source</a> ]</p>
  <div id="M000790_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 208</span>
208:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace</span>
209:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
210:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
211:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:foo'</span>]
212:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000779" class="method">
  <div id="M000779_title" class="title">
    <b>test_add_namespace_add_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000779_source')" id="l_M000779_source">show source</a> ]</p>
  <div id="M000779_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_add_child</span>
101:         <span class="ruby-identifier">doc</span>   = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
102:         <span class="ruby-identifier">item</span>  = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'item'</span>, <span class="ruby-identifier">doc</span>)
103:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">item</span>
104: 
105:         <span class="ruby-identifier">entry</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'entry'</span>, <span class="ruby-identifier">doc</span>)
106:         <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'tlm'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
107:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:tlm'</span>]
108:         <span class="ruby-identifier">item</span>.<span class="ruby-identifier">add_child</span>(<span class="ruby-identifier">entry</span>)
109:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">entry</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:tlm'</span>]
110:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000797" class="method">
  <div id="M000797_title" class="title">
    <b>test_add_namespace_does_not_associate_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000797_source')" id="l_M000797_source">show source</a> ]</p>
  <div id="M000797_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 264</span>
264:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_does_not_associate_node</span>
265:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
266:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
267:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tlm.com/'</span>
268:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
269:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000791" class="method">
  <div id="M000791_title" class="title">
    <b>test_add_namespace_twice</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000791_source')" id="l_M000791_source">show source</a> ]</p>
  <div id="M000791_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 214</span>
214:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_twice</span>
215:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
216:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
217:         <span class="ruby-identifier">ns2</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>)
218:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">ns</span>, <span class="ruby-identifier">ns2</span>
219:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000796" class="method">
  <div id="M000796_title" class="title">
    <b>test_add_namespace_with_nil_associates_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000796_source')" id="l_M000796_source">show source</a> ]</p>
  <div id="M000796_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 257</span>
257:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_namespace_with_nil_associates_node</span>
258:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
259:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
260:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://tlm.com/'</span>
261:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
262:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000831" class="method">
  <div id="M000831_title" class="title">
    <b>test_add_next_sibling_merge</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000831_source')" id="l_M000831_source">show source</a> ]</p>
  <div id="M000831_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 583</span>
583:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_next_sibling_merge</span>
584:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
585: 
586:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_tag</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>
587: 
588:         <span class="ruby-identifier">left_space</span> = <span class="ruby-identifier">a_tag</span>.<span class="ruby-identifier">previous</span>
589:         <span class="ruby-identifier">right_space</span> = <span class="ruby-identifier">a_tag</span>.<span class="ruby-identifier">next</span>
590:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">left_space</span>.<span class="ruby-identifier">text?</span>
591:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">right_space</span>.<span class="ruby-identifier">text?</span>
592: 
593:         <span class="ruby-identifier">right_space</span>.<span class="ruby-identifier">add_next_sibling</span>(<span class="ruby-identifier">left_space</span>)
594:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">left_space</span>, <span class="ruby-identifier">right_space</span>
595:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000829" class="method">
  <div id="M000829_title" class="title">
    <b>test_add_previous_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000829_source')" id="l_M000829_source">show source</a> ]</p>
  <div id="M000829_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 549</span>
549:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_previous_sibling</span>
550:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
551:         <span class="ruby-identifier">b_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'a'</span>, <span class="ruby-identifier">xml</span>)
552:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">ELEMENT_NODE</span>, <span class="ruby-identifier">b_node</span>.<span class="ruby-identifier">type</span>
553:         <span class="ruby-identifier">b_node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'first'</span>
554:         <span class="ruby-identifier">a_node</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">first</span>
555:         <span class="ruby-identifier">a_node</span>.<span class="ruby-identifier">add_previous_sibling</span>(<span class="ruby-identifier">b_node</span>)
556:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'first'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">text</span>)
557:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000830" class="method">
  <div id="M000830_title" class="title">
    <b>test_add_previous_sibling_merge</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000830_source')" id="l_M000830_source">show source</a> ]</p>
  <div id="M000830_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 564</span>
564:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_previous_sibling_merge</span>
565:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
566: 
567:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">a_tag</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>
568: 
569:         <span class="ruby-identifier">left_space</span> = <span class="ruby-identifier">a_tag</span>.<span class="ruby-identifier">previous</span>
570:         <span class="ruby-identifier">right_space</span> = <span class="ruby-identifier">a_tag</span>.<span class="ruby-identifier">next</span>
571:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">left_space</span>.<span class="ruby-identifier">text?</span>
572:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">right_space</span>.<span class="ruby-identifier">text?</span>
573: 
574:         <span class="ruby-identifier">left_space</span>.<span class="ruby-identifier">add_previous_sibling</span>(<span class="ruby-identifier">right_space</span>)
575:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">left_space</span>, <span class="ruby-identifier">right_space</span>
576:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000820" class="method">
  <div id="M000820_title" class="title">
    <b>test_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000820_source')" id="l_M000820_source">show source</a> ]</p>
  <div id="M000820_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 465</span>
465:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ancestors</span>
466:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
467:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">address</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
468:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'employee'</span>, <span class="ruby-value str">'staff'</span>, <span class="ruby-value str">'document'</span>],
469:           <span class="ruby-identifier">address</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">name</span> }
470:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000772" class="method">
  <div id="M000772_title" class="title">
    <b>test_append_with_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000772_source')" id="l_M000772_source">show source</a> ]</p>
  <div id="M000772_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 21</span>
21:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_append_with_document</span>
22:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
23:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
24:         <span class="ruby-keyword kw">end</span>
25:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000800" class="method">
  <div id="M000800_title" class="title">
    <b>test_at</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000800_source')" id="l_M000800_source">show source</a> ]</p>
  <div id="M000800_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 288</span>
288:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at</span>
289:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
290:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
291:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000802" class="method">
  <div id="M000802_title" class="title">
    <b>test_at_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000802_source')" id="l_M000802_source">show source</a> ]</p>
  <div id="M000802_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 300</span>
300:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at_css</span>
301:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at_css</span>(<span class="ruby-value str">'address'</span>)
302:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'address'</span>)
303:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">size</span>
304:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>
305:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000801" class="method">
  <div id="M000801_title" class="title">
    <b>test_at_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000801_source')" id="l_M000801_source">show source</a> ]</p>
  <div id="M000801_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 293</span>
293:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_at_xpath</span>
294:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at_xpath</span>(<span class="ruby-value str">'//address'</span>)
295:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)
296:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">size</span>
297:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>
298:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000811" class="method">
  <div id="M000811_title" class="title">
    <b>test_attribute_with_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000811_source')" id="l_M000811_source">show source</a> ]</p>
  <div id="M000811_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 383</span>
383:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attribute_with_symbol</span>
384:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'address'</span>).<span class="ruby-identifier">first</span>[<span class="ruby-identifier">:domestic</span>]
385:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000840" class="method">
  <div id="M000840_title" class="title">
    <b>test_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000840_source')" id="l_M000840_source">show source</a> ]</p>
  <div id="M000840_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 684</span>
684:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes</span>
685:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
686:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">node</span>[<span class="ruby-value str">'asdfasdfasdf'</span>])
687:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">node</span>[<span class="ruby-value str">'domestic'</span>])
688: 
689:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">2</span>]
690:         <span class="ruby-identifier">attr</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>
691:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">attr</span>.<span class="ruby-identifier">size</span>
692:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'domestic'</span>].<span class="ruby-identifier">value</span>
693:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'domestic'</span>].<span class="ruby-identifier">to_s</span>
694:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'No'</span>, <span class="ruby-identifier">attr</span>[<span class="ruby-value str">'street'</span>].<span class="ruby-identifier">value</span>
695:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000827" class="method">
  <div id="M000827_title" class="title">
    <b>test_chevron_works_as_add_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000827_source')" id="l_M000827_source">show source</a> ]</p>
  <div id="M000827_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 531</span>
531:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_chevron_works_as_add_child</span>
532:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
533:         <span class="ruby-identifier">text_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">xml</span>)
534:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">text_node</span>
535:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>
536:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000837" class="method">
  <div id="M000837_title" class="title">
    <b>test_child</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000837_source')" id="l_M000837_source">show source</a> ]</p>
  <div id="M000837_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 667</span>
667:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_child</span>
668:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
669:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">child</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>
670:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'text'</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">name</span>)
671:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000789" class="method">
  <div id="M000789_title" class="title">
    <b>test_children</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000789_source')" id="l_M000789_source">show source</a> ]</p>
  <div id="M000789_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 192</span>
192:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_children</span>
193:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\#{'&lt;a/&gt;' * 9 }&lt;/root&gt;\n&quot;</span>)
194:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
195:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">9</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
196: 
197:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\#{'&lt;a/&gt;' * 15 }&lt;/root&gt;\n&quot;</span>)
198:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
199:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">15</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">to_a</span>.<span class="ruby-identifier">length</span>
200:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000845" class="method">
  <div id="M000845_title" class="title">
    <b>test_content</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000845_source')" id="l_M000845_source">show source</a> ]</p>
  <div id="M000845_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 722</span>
722:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_content</span>
723:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-ivar">@xml</span>)
724:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">''</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
725: 
726:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'hello world!'</span>
727:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'hello world!'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
728:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000794" class="method">
  <div id="M000794_title" class="title">
    <b>test_default_namespace=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000794_source')" id="l_M000794_source">show source</a> ]</p>
  <div id="M000794_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 237</span>
237:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_default_namespace=</span>
238:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
239:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">default_namespace</span> = <span class="ruby-value str">'http://tenderlovemaking.com'</span>
240:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://tenderlovemaking.com'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns'</span>]
241:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000823" class="method">
  <div id="M000823_title" class="title">
    <b>test_delete</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000823_source')" id="l_M000823_source">show source</a> ]</p>
  <div id="M000823_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 486</span>
486:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_delete</span>
487:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'/staff/employee/address'</span>).<span class="ruby-identifier">first</span>
488:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
489:         <span class="ruby-identifier">address</span>.<span class="ruby-identifier">delete</span> <span class="ruby-value str">'domestic'</span>
490:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
491:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000778" class="method">
  <div id="M000778_title" class="title">
    <b>test_description</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000778_source')" id="l_M000778_source">show source</a> ]</p>
  <div id="M000778_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 96</span>
96:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_description</span>
97:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'employee'</span>).<span class="ruby-identifier">description</span>
98:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000783" class="method">
  <div id="M000783_title" class="title">
    <b>test_different_document_compare</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000783_source')" id="l_M000783_source">show source</a> ]</p>
  <div id="M000783_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 130</span>
130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_different_document_compare</span>
131:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
132:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;a&gt;&lt;b/&gt;&lt;/a&gt;'</span>)
133:         <span class="ruby-identifier">b</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'b'</span>)
134:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">b</span>)
135:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000782" class="method">
  <div id="M000782_title" class="title">
    <b>test_document_compare</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000782_source')" id="l_M000782_source">show source</a> ]</p>
  <div id="M000782_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 125</span>
125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_compare</span>
126:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
127:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-1</span>, (<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-ivar">@xml</span>))
128:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000784" class="method">
  <div id="M000784_title" class="title">
    <b>test_duplicate_node_removes_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000784_source')" id="l_M000784_source">show source</a> ]</p>
  <div id="M000784_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 137</span>
137:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_duplicate_node_removes_namespace</span>
138:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='www.fruits.org'&gt;\n&lt;Apple&gt;&lt;/Apple&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
139:         <span class="ruby-identifier">apple</span> = <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'fruit:Apple'</span>, {<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})[<span class="ruby-value">0</span>]
140:         <span class="ruby-identifier">new_apple</span> = <span class="ruby-identifier">apple</span>.<span class="ruby-identifier">dup</span>
141:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">new_apple</span>
142:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:Apple'</span>).<span class="ruby-identifier">length</span>
143:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">to_xml</span>.<span class="ruby-identifier">scan</span>(<span class="ruby-value str">'www.fruits.org'</span>).<span class="ruby-identifier">length</span>
144:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000817" class="method">
  <div id="M000817_title" class="title">
    <b>test_each</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000817_source')" id="l_M000817_source">show source</a> ]</p>
  <div id="M000817_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 445</span>
445:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_each</span>
446:         <span class="ruby-identifier">attributes</span> = []
447:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
448:           <span class="ruby-identifier">attributes</span> <span class="ruby-operator">&lt;&lt;</span> [<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>]
449:         <span class="ruby-keyword kw">end</span>
450:         <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">'domestic'</span>, <span class="ruby-value str">'Yes'</span>], [<span class="ruby-value str">'street'</span>, <span class="ruby-value str">'Yes'</span>]], <span class="ruby-identifier">attributes</span>
451:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000770" class="method">
  <div id="M000770_title" class="title">
    <b>test_element?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000770_source')" id="l_M000770_source">show source</a> ]</p>
  <div id="M000770_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 13</span>
13:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_element?</span>
14:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">element?</span>, <span class="ruby-value str">'is an element'</span>
15:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000844" class="method">
  <div id="M000844_title" class="title">
    <b>test_encode_special_chars</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000844_source')" id="l_M000844_source">show source</a> ]</p>
  <div id="M000844_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 717</span>
717:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encode_special_chars</span>
718:         <span class="ruby-identifier">foo</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'employee'</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">encode_special_chars</span>(<span class="ruby-value str">'&amp;'</span>)
719:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&amp;amp;'</span>, <span class="ruby-identifier">foo</span>
720:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000832" class="method">
  <div id="M000832_title" class="title">
    <b>test_find_by_css_with_tilde_eql</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000832_source')" id="l_M000832_source">show source</a> ]</p>
  <div id="M000832_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 602</span>
602:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css_with_tilde_eql</span>
603:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;a class='foo bar'&gt;Bar&lt;/a&gt;\n&lt;a class='bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bar'&gt;Bar&lt;/a&gt;\n&lt;a class='baz bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bazbarfoo'&gt;Awesome&lt;/a&gt;\n&lt;a class='bazbar'&gt;Awesome&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
604:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a[@class~=&quot;bar&quot;]'</span>)
605:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
606:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'Bar'</span>], <span class="ruby-identifier">set</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> }.<span class="ruby-identifier">uniq</span>
607:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000785" class="method">
  <div id="M000785_title" class="title">
    <b>test_fragment_creates_elements</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000785_source')" id="l_M000785_source">show source</a> ]</p>
  <div id="M000785_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 160</span>
160:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_creates_elements</span>
161:         <span class="ruby-identifier">apple</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;Apple/&gt;'</span>)
162:         <span class="ruby-identifier">apple</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">child</span><span class="ruby-operator">|</span>
163:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">ELEMENT_NODE</span>, <span class="ruby-identifier">child</span>.<span class="ruby-identifier">type</span>
164:           <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>, <span class="ruby-identifier">child</span>
165:         <span class="ruby-keyword kw">end</span>
166:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000814" class="method">
  <div id="M000814_title" class="title">
    <b>test_hold_refence_to_subnode</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000814_source')" id="l_M000814_source">show source</a> ]</p>
  <div id="M000814_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 422</span>
422:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_hold_refence_to_subnode</span>
423:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;\n&lt;b /&gt;\n&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
424:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_a</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">first</span>
425:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_b</span> = <span class="ruby-identifier">node_a</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'b'</span>).<span class="ruby-identifier">first</span>
426:         <span class="ruby-identifier">node_a</span>.<span class="ruby-identifier">unlink</span>
427:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'b'</span>, <span class="ruby-identifier">node_b</span>.<span class="ruby-identifier">name</span>
428:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000848" class="method">
  <div id="M000848_title" class="title">
    <b>test_illegal_replace_of_node_with_doc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000848_source')" id="l_M000848_source">show source</a> ]</p>
  <div id="M000848_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 755</span>
755:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_illegal_replace_of_node_with_doc</span>
756:         <span class="ruby-identifier">new_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;foo&gt;bar&lt;/foo&gt;'</span>)
757:         <span class="ruby-identifier">old_node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//employee'</span>)
758:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>){ <span class="ruby-identifier">old_node</span>.<span class="ruby-identifier">replace</span> <span class="ruby-identifier">new_node</span> }
759:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000781" class="method">
  <div id="M000781_title" class="title">
    <b>test_incorrect_spaceship</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000781_source')" id="l_M000781_source">show source</a> ]</p>
  <div id="M000781_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 120</span>
120:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_incorrect_spaceship</span>
121:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
122:         <span class="ruby-identifier">assert_nil</span>(<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-value str">'asdf'</span>)
123:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000773" class="method">
  <div id="M000773_title" class="title">
    <b>test_inspect_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000773_source')" id="l_M000773_source">show source</a> ]</p>
  <div id="M000773_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 27</span>
27:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inspect_ns</span>
28:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">noblanks</span> }
29:         <span class="ruby-identifier">ins</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">inspect</span>
30: 
31:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">traverse</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
32:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ins</span>
33:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span> <span class="ruby-identifier">:attributes</span>
34:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">attributes</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span>
35:               <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">k</span>, <span class="ruby-identifier">ins</span>
36:               <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">v</span>, <span class="ruby-identifier">ins</span>
37:             <span class="ruby-keyword kw">end</span>
38:           <span class="ruby-keyword kw">end</span>
39: 
40:           <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:namespace</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
41:             <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">ins</span>
42:             <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>, <span class="ruby-identifier">ins</span>
43:           <span class="ruby-keyword kw">end</span>
44:         <span class="ruby-keyword kw">end</span>
45:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000838" class="method">
  <div id="M000838_title" class="title">
    <b>test_key?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000838_source')" id="l_M000838_source">show source</a> ]</p>
  <div id="M000838_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 673</span>
673:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_key?</span>
674:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
675:         <span class="ruby-identifier">assert</span>(<span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'asdfasdf'</span>))
676:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000816" class="method">
  <div id="M000816_title" class="title">
    <b>test_keys</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000816_source')" id="l_M000816_source">show source</a> ]</p>
  <div id="M000816_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 441</span>
441:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_keys</span>
442:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ domestic street }</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">keys</span>
443:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000855" class="method">
  <div id="M000855_title" class="title">
    <b>test_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000855_source')" id="l_M000855_source">show source</a> ]</p>
  <div id="M000855_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 869</span>
869:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_line</span>
870:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;\nHello world\n&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
871: 
872:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a&quot;</span>)
873:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>
874:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">line</span>
875:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000836" class="method">
  <div id="M000836_title" class="title">
    <b>test_name=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000836_source')" id="l_M000836_source">show source</a> ]</p>
  <div id="M000836_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 661</span>
661:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_name=</span>
662:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
663:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span> = <span class="ruby-value str">'awesome'</span>
664:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'awesome'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
665:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000853" class="method">
  <div id="M000853_title" class="title">
    <b>test_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000853_source')" id="l_M000853_source">show source</a> ]</p>
  <div id="M000853_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 836</span>
836:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace</span>
837:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns:a='http://foo.com/' xmlns:b='http://bar.com/'&gt;\n&lt;y xmlns:c='http://bazz.com/'&gt;\n&lt;a:div&gt;hello a&lt;/a:div&gt;\n&lt;b:div&gt;hello b&lt;/b:div&gt;\n&lt;c:div&gt;hello c&lt;/c:div&gt;\n&lt;div&gt;hello moon&lt;/div&gt;\n&lt;/y&gt;\n&lt;/x&gt;\n&quot;</span>)
838:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//y/*&quot;</span>)
839:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
840:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
841:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;c&quot;</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">2</span>].<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">prefix</span>
842:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">set</span>[<span class="ruby-value">3</span>].<span class="ruby-identifier">namespace</span>
843:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000795" class="method">
  <div id="M000795_title" class="title">
    <b>test_namespace=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000795_source')" id="l_M000795_source">show source</a> ]</p>
  <div id="M000795_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 243</span>
243:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace=</span>
244:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
245:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
246:         <span class="ruby-identifier">definition</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-value str">'http://tlm.com/'</span>
247: 
248:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">definition</span>
249: 
250:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span>
251: 
252:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//foo:address'</span>, {
253:           <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://tlm.com/'</span>
254:         })
255:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000850" class="method">
  <div id="M000850_title" class="title">
    <b>test_namespace_as_hash</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000850_source')" id="l_M000850_source">show source</a> ]</p>
  <div id="M000850_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 774</span>
774:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_as_hash</span>
775:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;car xmlns:part=\&quot;http://general-motors.com/\&quot;&gt;\n&lt;part:tire&gt;Michelin Model XGV&lt;/part:tire&gt;\n&lt;/car&gt;\n&lt;bicycle xmlns:part=\&quot;http://schwinn.com/\&quot;&gt;\n&lt;part:tire&gt;I'm a bicycle tire!&lt;/part:tire&gt;\n&lt;/bicycle&gt;\n&lt;/root&gt;\n&quot;</span>)
776: 
777:         <span class="ruby-identifier">tires</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//bike:tire'</span>, {<span class="ruby-value str">'bike'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://schwinn.com/'</span>})
778:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tires</span>.<span class="ruby-identifier">length</span>
779:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000777" class="method">
  <div id="M000777_title" class="title">
    <b>test_namespace_goes_to_children</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000777_source')" id="l_M000777_source">show source</a> ]</p>
  <div id="M000777_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 82</span>
82:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_goes_to_children</span>
83:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='www.fruits.org'&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
84:         <span class="ruby-identifier">apple</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Apple'</span>, <span class="ruby-identifier">fruits</span>)
85:         <span class="ruby-identifier">orange</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'Orange'</span>, <span class="ruby-identifier">fruits</span>)
86:         <span class="ruby-identifier">apple</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">orange</span>
87:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apple</span>
88:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//fruit:Orange'</span>,{<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})
89:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//fruit:Apple'</span>,{<span class="ruby-value str">'fruit'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-value str">'www.fruits.org'</span>})
90:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000774" class="method">
  <div id="M000774_title" class="title">
    <b>test_namespace_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000774_source')" id="l_M000774_source">show source</a> ]</p>
  <div id="M000774_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 52</span>
52:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_nodes</span>
53:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>
54:         <span class="ruby-identifier">awesome</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>
55:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">awesome</span>.<span class="ruby-identifier">namespace_definitions</span>
56:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">length</span>
57:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000851" class="method">
  <div id="M000851_title" class="title">
    <b>test_namespace_search_with_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000851_source')" id="l_M000851_source">show source</a> ]</p>
  <div id="M000851_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 791</span>
791:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_search_with_css</span>
792:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;car xmlns:part=\&quot;http://general-motors.com/\&quot;&gt;\n&lt;part:tire&gt;Michelin Model XGV&lt;/part:tire&gt;\n&lt;/car&gt;\n&lt;bicycle xmlns:part=\&quot;http://schwinn.com/\&quot;&gt;\n&lt;part:tire&gt;I'm a bicycle tire!&lt;/part:tire&gt;\n&lt;/bicycle&gt;\n&lt;/root&gt;\n&quot;</span>)
793: 
794:         <span class="ruby-identifier">tires</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'bike|tire'</span>, <span class="ruby-value str">'bike'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'http://schwinn.com/'</span>)
795:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">tires</span>.<span class="ruby-identifier">length</span>
796:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000854" class="method">
  <div id="M000854_title" class="title">
    <b>test_namespace_without_an_href_on_html_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000854_source')" id="l_M000854_source">show source</a> ]</p>
  <div id="M000854_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 855</span>
855:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_without_an_href_on_html_node</span>
856:         <span class="ruby-comment cmt"># because microsoft word's HTML formatting does this. ick.</span>
857:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;div&gt;&lt;o:p&gt;foo&lt;/o:p&gt;&lt;/div&gt;\n&quot;</span>
858: 
859:         <span class="ruby-identifier">assert_not_nil</span>(<span class="ruby-identifier">node</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'p'</span>))
860: 
861:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">keys</span>.<span class="ruby-identifier">size</span>
862:         <span class="ruby-identifier">assert</span>       <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-value str">'xmlns:o'</span>)
863:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:o'</span>]
864:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000852" class="method">
  <div id="M000852_title" class="title">
    <b>test_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000852_source')" id="l_M000852_source">show source</a> ]</p>
  <div id="M000852_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 808</span>
808:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespaces</span>
809:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns:a='http://foo.com/' xmlns:b='http://bar.com/'&gt;\n&lt;y xmlns:c='http://bazz.com/'&gt;\n&lt;a:div&gt;hello a&lt;/a:div&gt;\n&lt;b:div&gt;hello b&lt;/b:div&gt;\n&lt;c:div&gt;hello c&lt;/c:div&gt;\n&lt;/y&gt;\n&lt;/x&gt;\n&quot;</span>)
810:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespaces</span>
811:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'xmlns:a'</span>)
812:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://foo.com/'</span>, <span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:a'</span>]
813:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'xmlns:b'</span>)
814:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://bar.com/'</span>, <span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:b'</span>]
815:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span> <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'xmlns:c'</span>)
816: 
817:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">namespaces</span>
818:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'xmlns:a'</span>)
819:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://foo.com/'</span>, <span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:a'</span>]
820:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">key?</span>(<span class="ruby-value str">'xmlns:b'</span>)
821:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://bar.com/'</span>, <span class="ruby-identifier">namespaces</span>[<span class="ruby-value str">'xmlns:b'</span>]
822: 
823:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hello a&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a:div&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">namespaces</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_text</span>
824:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;hello b&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//b:div&quot;</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">namespaces</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_text</span>
825:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000818" class="method">
  <div id="M000818_title" class="title">
    <b>test_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000818_source')" id="l_M000818_source">show source</a> ]</p>
  <div id="M000818_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 453</span>
453:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new</span>
454:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'input'</span>, <span class="ruby-ivar">@xml</span>)
455:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">node_type</span>
456:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>, <span class="ruby-identifier">node</span>
457:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000843" class="method">
  <div id="M000843_title" class="title">
    <b>test_new_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000843_source')" id="l_M000843_source">show source</a> ]</p>
  <div id="M000843_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 711</span>
711:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_node</span>
712:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-ivar">@xml</span>)
713:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
714:         <span class="ruby-identifier">assert</span>(<span class="ruby-identifier">node</span>.<span class="ruby-identifier">document</span>)
715:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000788" class="method">
  <div id="M000788_title" class="title">
    <b>test_new_node_can_have_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000788_source')" id="l_M000788_source">show source</a> ]</p>
  <div id="M000788_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 186</span>
186:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_node_can_have_ancestors</span>
187:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;text&lt;/root&gt;'</span>)
188:         <span class="ruby-identifier">item</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'item'</span>, <span class="ruby-identifier">xml</span>)
189:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">item</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
190:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000834" class="method">
  <div id="M000834_title" class="title">
    <b>test_next_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000834_source')" id="l_M000834_source">show source</a> ]</p>
  <div id="M000834_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 648</span>
648:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_next_sibling</span>
649:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
650:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sibling</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">next_sibling</span>
651:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">name</span>)
652:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000775" class="method">
  <div id="M000775_title" class="title">
    <b>test_no_definitions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000775_source')" id="l_M000775_source">show source</a> ]</p>
  <div id="M000775_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_definitions</span>
65:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot; xmlns:foo=\&quot;bar\&quot;&gt;\n&lt;awesome/&gt;\n&lt;/root&gt;\n&quot;</span>
66:         <span class="ruby-identifier">awesome</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:awesome'</span>)
67:         <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">awesome</span>.<span class="ruby-identifier">namespace_definitions</span>
68:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">length</span>
69:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000786" class="method">
  <div id="M000786_title" class="title">
    <b>test_node_added_to_root_should_get_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000786_source')" id="l_M000786_source">show source</a> ]</p>
  <div id="M000786_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 168</span>
168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_added_to_root_should_get_namespace</span>
169:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;Fruit xmlns='http://www.fruits.org'&gt;\n&lt;/Fruit&gt;\n&quot;</span>)
170:         <span class="ruby-identifier">apple</span> = <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;Apple/&gt;'</span>)
171:         <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">root</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">apple</span>
172:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:Apple'</span>).<span class="ruby-identifier">length</span>
173:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000849" class="method">
  <div id="M000849_title" class="title">
    <b>test_node_equality</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000849_source')" id="l_M000849_source">show source</a> ]</p>
  <div id="M000849_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 761</span>
761:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_equality</span>
762:         <span class="ruby-identifier">doc1</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
763:         <span class="ruby-identifier">doc2</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
764: 
765:         <span class="ruby-identifier">address1_1</span> = <span class="ruby-identifier">doc1</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
766:         <span class="ruby-identifier">address1_2</span> = <span class="ruby-identifier">doc1</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
767: 
768:         <span class="ruby-identifier">address2</span> = <span class="ruby-identifier">doc2</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
769: 
770:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">address1_1</span>, <span class="ruby-identifier">address2</span> <span class="ruby-comment cmt"># two references to very, very similar nodes</span>
771:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">address1_1</span>, <span class="ruby-identifier">address1_2</span> <span class="ruby-comment cmt"># two references to the exact same node</span>
772:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000841" class="method">
  <div id="M000841_title" class="title">
    <b>test_path</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000841_source')" id="l_M000841_source">show source</a> ]</p>
  <div id="M000841_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 697</span>
697:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_path</span>
698:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
699:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>
700:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'/staff/employee[1]'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">path</span>)
701:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000803" class="method">
  <div id="M000803_title" class="title">
    <b>test_percent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000803_source')" id="l_M000803_source">show source</a> ]</p>
  <div id="M000803_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 307</span>
307:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_percent</span>
308:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span> <span class="ruby-operator">%</span> (<span class="ruby-value str">'address'</span>)
309:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">node</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
310:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000835" class="method">
  <div id="M000835_title" class="title">
    <b>test_previous_sibling</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000835_source')" id="l_M000835_source">show source</a> ]</p>
  <div id="M000835_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 654</span>
654:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_previous_sibling</span>
655:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>
656:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sibling</span> = <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>.<span class="ruby-identifier">next_sibling</span>
657:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">name</span>)
658:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">sibling</span>.<span class="ruby-identifier">previous_sibling</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">child</span>)
659:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000821" class="method">
  <div id="M000821_title" class="title">
    <b>test_read_only?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000821_source')" id="l_M000821_source">show source</a> ]</p>
  <div id="M000821_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 472</span>
472:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_read_only?</span>
473:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">entity_decl</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">internal_subset</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">find</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span>
474:           <span class="ruby-identifier">x</span>.<span class="ruby-identifier">type</span> <span class="ruby-operator">==</span> <span class="ruby-constant">Node</span><span class="ruby-operator">::</span><span class="ruby-constant">ENTITY_DECL</span>
475:         }
476:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">entity_decl</span>.<span class="ruby-identifier">read_only?</span>
477:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000822" class="method">
  <div id="M000822_title" class="title">
    <b>test_remove_attribute</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000822_source')" id="l_M000822_source">show source</a> ]</p>
  <div id="M000822_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 479</span>
479:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_attribute</span>
480:         <span class="ruby-identifier">address</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'/staff/employee/address'</span>).<span class="ruby-identifier">first</span>
481:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'Yes'</span>, <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
482:         <span class="ruby-identifier">address</span>.<span class="ruby-identifier">remove_attribute</span> <span class="ruby-value str">'domestic'</span>
483:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">address</span>[<span class="ruby-value str">'domestic'</span>]
484:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000847" class="method">
  <div id="M000847_title" class="title">
    <b>test_replace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000847_source')" id="l_M000847_source">show source</a> ]</p>
  <div id="M000847_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 737</span>
737:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_replace</span>
738:         <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
739:         <span class="ruby-identifier">assert</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
740:         <span class="ruby-identifier">assert</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//form'</span>).<span class="ruby-identifier">length</span>
741: 
742:         <span class="ruby-identifier">first</span> = <span class="ruby-identifier">set</span>[<span class="ruby-value">0</span>]
743:         <span class="ruby-identifier">second</span> = <span class="ruby-identifier">set</span>[<span class="ruby-value">1</span>]
744: 
745:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'form'</span>, <span class="ruby-ivar">@xml</span>)
746:         <span class="ruby-identifier">first</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">node</span>)
747: 
748:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
749:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">4</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
750:         <span class="ruby-identifier">assert</span> <span class="ruby-value">1</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//form'</span>).<span class="ruby-identifier">length</span>
751: 
752:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">set</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">to_xml</span>, <span class="ruby-identifier">second</span>.<span class="ruby-identifier">to_xml</span>
753:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000807" class="method">
  <div id="M000807_title" class="title">
    <b>test_replace_with_default_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000807_source')" id="l_M000807_source">show source</a> ]</p>
  <div id="M000807_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 328</span>
328:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_replace_with_default_namespaces</span>
329:         <span class="ruby-identifier">fruits</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;fruit xmlns=\&quot;http://fruits.org\&quot;&gt;\n&lt;apple /&gt;\n&lt;/fruit&gt;\n&quot;</span>)
330: 
331:         <span class="ruby-identifier">apple</span> = <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'apple'</span>).<span class="ruby-identifier">first</span>
332: 
333:         <span class="ruby-identifier">orange</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'orange'</span>, <span class="ruby-identifier">fruits</span>)
334:         <span class="ruby-identifier">apple</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">orange</span>)
335: 
336:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">orange</span>, <span class="ruby-identifier">fruits</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'orange'</span>).<span class="ruby-identifier">first</span>
337:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000842" class="method">
  <div id="M000842_title" class="title">
    <b>test_search_by_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000842_source')" id="l_M000842_source">show source</a> ]</p>
  <div id="M000842_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 703</span>
703:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_by_symbol</span>
704:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-identifier">:employee</span>)
705:         <span class="ruby-identifier">assert</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
706: 
707:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-identifier">:employee</span>)
708:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">text</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/EMP0001/</span>
709:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000813" class="method">
  <div id="M000813_title" class="title">
    <b>test_serialize_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000813_source')" id="l_M000813_source">show source</a> ]</p>
  <div id="M000813_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 410</span>
410:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialize_with_block</span>
411:         <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
412:         <span class="ruby-identifier">conf</span> = <span class="ruby-keyword kw">nil</span>
413:         <span class="ruby-identifier">string</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
414:           <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
415:           <span class="ruby-identifier">conf</span> = <span class="ruby-identifier">config</span>
416:           <span class="ruby-identifier">config</span>.<span class="ruby-identifier">format</span>.<span class="ruby-identifier">as_html</span>.<span class="ruby-identifier">no_empty_tags</span>
417:         <span class="ruby-keyword kw">end</span>
418:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
419:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">options</span>), <span class="ruby-identifier">string</span>
420:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000828" class="method">
  <div id="M000828_title" class="title">
    <b>test_set_content_with_symbol</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000828_source')" id="l_M000828_source">show source</a> ]</p>
  <div id="M000828_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 543</span>
543:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_content_with_symbol</span>
544:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//name'</span>)
545:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-identifier">:foo</span>
546:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>
547:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000798" class="method">
  <div id="M000798_title" class="title">
    <b>test_set_namespace_from_different_doc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000798_source')" id="l_M000798_source">show source</a> ]</p>
  <div id="M000798_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_namespace_from_different_doc</span>
272:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
273:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
274:         <span class="ruby-identifier">decl</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">add_namespace_definition</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>
275: 
276:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
277:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">decl</span>
278:         <span class="ruby-keyword kw">end</span>
279:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000799" class="method">
  <div id="M000799_title" class="title">
    <b>test_set_namespace_must_only_take_a_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000799_source')" id="l_M000799_source">show source</a> ]</p>
  <div id="M000799_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 281</span>
281:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_namespace_must_only_take_a_namespace</span>
282:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'address'</span>)
283:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">TypeError</span>) <span class="ruby-keyword kw">do</span>
284:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">namespace</span> = <span class="ruby-identifier">node</span>
285:         <span class="ruby-keyword kw">end</span>
286:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000839" class="method">
  <div id="M000839_title" class="title">
    <b>test_set_property</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000839_source')" id="l_M000839_source">show source</a> ]</p>
  <div id="M000839_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 678</span>
678:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_property</span>
679:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//address'</span>).<span class="ruby-identifier">first</span>
680:         <span class="ruby-identifier">node</span>[<span class="ruby-value str">'foo'</span>] = <span class="ruby-value str">'bar'</span>
681:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">node</span>[<span class="ruby-value str">'foo'</span>])
682:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000771" class="method">
  <div id="M000771_title" class="title">
    <b>test_slash_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000771_source')" id="l_M000771_source">show source</a> ]</p>
  <div id="M000771_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 17</span>
17:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_slash_search</span>
18:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'EMP0001'</span>, (<span class="ruby-ivar">@xml</span><span class="ruby-operator">/</span><span class="ruby-identifier">:staff</span><span class="ruby-operator">/</span><span class="ruby-identifier">:employee</span><span class="ruby-operator">/</span><span class="ruby-identifier">:employeeId</span>).<span class="ruby-identifier">first</span>.<span class="ruby-identifier">text</span>
19:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000780" class="method">
  <div id="M000780_title" class="title">
    <b>test_spaceship</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000780_source')" id="l_M000780_source">show source</a> ]</p>
  <div id="M000780_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_spaceship</span>
113:         <span class="ruby-identifier">nodes</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee'</span>)
114:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">-1</span>, (<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">&lt;=&gt;</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>))
115:         <span class="ruby-identifier">list</span> = [<span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>].<span class="ruby-identifier">sort</span>
116:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">first</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">first</span>
117:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">nodes</span>.<span class="ruby-identifier">last</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">last</span>
118:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000776" class="method">
  <div id="M000776_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000776_source')" id="l_M000776_source">show source</a> ]</p>
  <div id="M000776_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 76</span>
76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
77:         <span class="ruby-identifier">subclass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>)
78:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">subclass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-ivar">@xml</span>).<span class="ruby-identifier">dup</span>
79:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">subclass</span>, <span class="ruby-identifier">node</span>
80:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000819" class="method">
  <div id="M000819_title" class="title">
    <b>test_to_str</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000819_source')" id="l_M000819_source">show source</a> ]</p>
  <div id="M000819_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 459</span>
459:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_str</span>
460:         <span class="ruby-identifier">name</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//name'</span>).<span class="ruby-identifier">first</span>
461:         <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/Margaret/</span>, <span class="ruby-value str">''</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>)
462:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Margaret Martin'</span>, <span class="ruby-value str">''</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">name</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">first</span>)
463:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000833" class="method">
  <div id="M000833_title" class="title">
    <b>test_unlink</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000833_source')" id="l_M000833_source">show source</a> ]</p>
  <div id="M000833_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 620</span>
620:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unlink</span>
621:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a class='foo bar'&gt;Bar&lt;/a&gt;\n&lt;a class='bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bar'&gt;Bar&lt;/a&gt;\n&lt;a&gt;Hello world&lt;/a&gt;\n&lt;a class='baz bar foo'&gt;Bar&lt;/a&gt;\n&lt;a class='bazbarfoo'&gt;Awesome&lt;/a&gt;\n&lt;a class='bazbar'&gt;Awesome&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>)
622:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>)[<span class="ruby-value">3</span>]
623:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Hello world'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">text</span>)
624:         <span class="ruby-identifier">assert_match</span>(<span class="ruby-regexp re">/Hello world/</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>)
625:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>
626:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">document</span>
627:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_sibling</span>
628:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_sibling</span>
629:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">unlink</span>
630:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">parent</span>
631:         <span class="ruby-comment cmt">#assert !node.document</span>
632:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">previous_sibling</span>
633:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-identifier">node</span>.<span class="ruby-identifier">next_sibling</span>
634:         <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/Hello world/</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>)
635:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000856" class="method">
  <div id="M000856_title" class="title">
    <b>test_unlink_then_reparent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000856_source')" id="l_M000856_source">show source</a> ]</p>
  <div id="M000856_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 884</span>
884:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_unlink_then_reparent</span>
885:         <span class="ruby-comment cmt"># see http://github.com/tenderlove/nokogiri/issues#issue/22</span>
886:         <span class="ruby-value">10</span>.<span class="ruby-identifier">times</span> <span class="ruby-keyword kw">do</span>
887:           <span class="ruby-constant">STDOUT</span>.<span class="ruby-identifier">putc</span> <span class="ruby-value str">&quot;.&quot;</span>
888:           <span class="ruby-constant">STDOUT</span>.<span class="ruby-identifier">flush</span>
889:           <span class="ruby-keyword kw">begin</span>
890:             <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root&gt;\n&lt;a&gt;\n&lt;b/&gt;\n&lt;c/&gt;\n&lt;/a&gt;\n&lt;/root&gt;\n&quot;</span>
891: 
892:             <span class="ruby-identifier">root</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;root&quot;</span>)
893:             <span class="ruby-identifier">a</span> = <span class="ruby-identifier">root</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;a&quot;</span>)
894:             <span class="ruby-identifier">b</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;b&quot;</span>)
895:             <span class="ruby-identifier">c</span> = <span class="ruby-identifier">a</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">&quot;c&quot;</span>)
896:             <span class="ruby-identifier">a</span>.<span class="ruby-identifier">add_next_sibling</span>(<span class="ruby-identifier">b</span>.<span class="ruby-identifier">unlink</span>)
897:             <span class="ruby-identifier">c</span>.<span class="ruby-identifier">unlink</span>
898:           <span class="ruby-keyword kw">end</span>
899: 
900:           <span class="ruby-constant">GC</span>.<span class="ruby-identifier">start</span>
901:         <span class="ruby-keyword kw">end</span>
902: 
903:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000815" class="method">
  <div id="M000815_title" class="title">
    <b>test_values</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000815_source')" id="l_M000815_source">show source</a> ]</p>
  <div id="M000815_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 437</span>
437:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_values</span>
438:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ Yes Yes }</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//address'</span>)[<span class="ruby-value">1</span>].<span class="ruby-identifier">values</span>
439:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000846" class="method">
  <div id="M000846_title" class="title">
    <b>test_whitespace_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000846_source')" id="l_M000846_source">show source</a> ]</p>
  <div id="M000846_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 730</span>
730:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_whitespace_nodes</span>
731:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;root&gt;&lt;b&gt;Foo&lt;/b&gt;\n&lt;i&gt;Bar&lt;/i&gt; &lt;p&gt;Bazz&lt;/p&gt;&lt;/root&gt;&quot;</span>)
732:         <span class="ruby-identifier">children</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//root'</span>).<span class="ruby-identifier">children</span>.<span class="ruby-identifier">collect</span>{<span class="ruby-operator">|</span><span class="ruby-identifier">j</span><span class="ruby-operator">|</span> <span class="ruby-identifier">j</span>.<span class="ruby-identifier">to_s</span>}
733:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;\n&quot;</span>, <span class="ruby-identifier">children</span>[<span class="ruby-value">1</span>]
734:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot; &quot;</span>, <span class="ruby-identifier">children</span>[<span class="ruby-value">3</span>]
735:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000810" class="method">
  <div id="M000810_title" class="title">
    <b>test_write_to</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000810_source')" id="l_M000810_source">show source</a> ]</p>
  <div id="M000810_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 376</span>
376:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to</span>
377:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
378:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">write_to</span> <span class="ruby-identifier">io</span>
379:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
380:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>, <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>
381:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000812" class="method">
  <div id="M000812_title" class="title">
    <b>test_write_to_with_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000812_source')" id="l_M000812_source">show source</a> ]</p>
  <div id="M000812_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 387</span>
387:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to_with_block</span>
388:         <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
389:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
390:         <span class="ruby-identifier">conf</span> = <span class="ruby-keyword kw">nil</span>
391:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">write_to</span> <span class="ruby-identifier">io</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">config</span><span class="ruby-operator">|</span>
392:           <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
393:           <span class="ruby-identifier">conf</span> = <span class="ruby-identifier">config</span>
394:           <span class="ruby-identifier">config</span>.<span class="ruby-identifier">format</span>.<span class="ruby-identifier">as_html</span>.<span class="ruby-identifier">no_empty_tags</span>
395:         <span class="ruby-keyword kw">end</span>
396:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
397:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
398:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>(<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">conf</span>.<span class="ruby-identifier">options</span>), <span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>
399:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000806" class="method">
  <div id="M000806_title" class="title">
    <b>visit</b>(node)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000806_source')" id="l_M000806_source">show source</a> ]</p>
  <div id="M000806_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_node.rb, line 319</span>
319:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">visit</span> <span class="ruby-identifier">node</span>
320:             <span class="ruby-identifier">node</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">c</span><span class="ruby-operator">|</span> <span class="ruby-identifier">c</span>.<span class="ruby-identifier">accept</span>(<span class="ruby-keyword kw">self</span>) }
321:             <span class="ruby-ivar">@visited</span> = <span class="ruby-keyword kw">true</span>
322:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>