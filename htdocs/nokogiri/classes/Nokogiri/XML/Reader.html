  <div id="C00000057">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />Reader<br/>
  In:
<a href="#" onclick="jsHref('files/ext/nokogiri/html_document_c.html');">ext/nokogiri/html_document.c</a>
<a href="#" onclick="jsHref('files/lib/nokogiri/ffi/xml/reader_rb.html');">lib/nokogiri/ffi/xml/reader.rb</a>
<a href="#" onclick="jsHref('files/lib/nokogiri/xml/reader_rb.html');">lib/nokogiri/xml/reader.rb</a>

Parent:&nbsp;
Object
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
<a
href="index.html?a=C00000057&name=Nokogiri::XML::Reader">Nokogiri::XML::Reader</a>
parses an <a href="index.html?a=C00000017&name=XML">XML</a> document
similar to the way a cursor would move. The <a
href="index.html?a=C00000057&name=Reader">Reader</a> is given an <a
href="index.html?a=C00000017&name=XML">XML</a> document, and yields nodes
to an each block.
</p>
<p>
Here is an example of usage:
</p>
<pre>
  reader = Nokogiri::XML::Reader(&lt;&lt;-eoxml)
    &lt;x xmlns:tenderlove='http://tenderlovemaking.com/'&gt;
      &lt;tenderlove:foo awesome='true'&gt;snuggles!&lt;/tenderlove:foo&gt;
    &lt;/x&gt;
  eoxml

  reader.each do |node|

    # node is an instance of Nokogiri::XML::Reader
    puts node.name

  end
</pre>
<p>
Note that <a
href="index.html?a=M000577&name=Nokogiri::XML::Reader#each">Nokogiri::XML::Reader#each</a>
can only be called once!! Once the cursor moves through the entire
document, you must parse the document again. So make sure that you capture
any information you need during the first iteration.
</p>
<p>
The <a href="index.html?a=C00000057&name=Reader">Reader</a> parser is good
for when you need the speed of a <a
href="index.html?a=C00000018&name=SAX">SAX</a> parser, but do not want to
write a <a href="index.html?a=C00000074&name=Document">Document</a>
handler.
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000569&name=attribute" >attribute</a></li>
  <li><a href="index.html?a=M000571&name=attribute_at" >attribute_at</a></li>
  <li><a href="index.html?a=M000568&name=attribute_count" >attribute_count</a></li>
  <li><a href="index.html?a=M000572&name=attribute_nodes" >attribute_nodes</a></li>
  <li><a href="index.html?a=M000576&name=attributes" >attributes</a></li>
  <li><a href="index.html?a=M000573&name=attributes?" >attributes?</a></li>
  <li><a href="index.html?a=M000575&name=default?" >default?</a></li>
  <li><a href="index.html?a=M000567&name=depth" >depth</a></li>
  <li><a href="index.html?a=M000577&name=each" >each</a></li>
  <li><a href="index.html?a=M000557&name=from_io" >from_io</a></li>
  <li><a href="index.html?a=M000556&name=from_memory" >from_memory</a></li>
  <li><a href="index.html?a=M000565&name=lang" >lang</a></li>
  <li><a href="index.html?a=M000561&name=local_name" >local_name</a></li>
  <li><a href="index.html?a=M000560&name=name" >name</a></li>
  <li><a href="index.html?a=M000562&name=namespace_uri" >namespace_uri</a></li>
  <li><a href="index.html?a=M000570&name=namespaces" >namespaces</a></li>
  <li><a href="index.html?a=M000563&name=prefix" >prefix</a></li>
  <li><a href="index.html?a=M000558&name=read" >read</a></li>
  <li><a href="index.html?a=M000559&name=state" >state</a></li>
  <li><a href="index.html?a=M000564&name=value" >value</a></li>
  <li><a href="index.html?a=M000574&name=value?" >value?</a></li>
  <li><a href="index.html?a=M000566&name=xml_version" >xml_version</a></li>
  </ul>

<div class="sectiontitle">Included Modules</div>
<ul>
  <li><a href="#" onclick="jsHref('');">Enumerable</a></li>
</ul>




  <div class="sectiontitle">Attributes</div>
  <table border='0' cellpadding='5'>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>encoding</td>
    <td class='attr-desc'>
The encoding for the document

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[RW]
    </td>
    <td class='attr-name'>errors</td>
    <td class='attr-desc'>
A list of errors encountered while parsing

</td>
  </tr>
  <tr valign='top'>
    <td class='attr-rw'>
[R]
    </td>
    <td class='attr-name'>source</td>
    <td class='attr-desc'>
The <a href="index.html?a=C00000017&name=XML">XML</a> source

</td>
  </tr>
  </table>

<div class="sectiontitle">Public Class methods</div>
<div id="M000557" class="method">
  <div id="M000557_title" class="title">
    <b>from_io(io, url = nil, encoding = nil, options = 0)<br />
</b>
  </div>
  <div class="description">
  <p>
Create a new reader that parses <tt>io</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000557_source')" id="l_M000557_source">show source</a> ]</p>
  <div id="M000557_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   from_io(io, url = nil, encoding = nil, options = 0)
 *
 * Create a new reader that parses +io+
 */
static VALUE from_io(int argc, VALUE *argv, VALUE klass)
{
  VALUE rb_io, rb_url, encoding, rb_options;

  const char * c_url      = NULL;
  const char * c_encoding = NULL;
  int c_options           = 0; 

  rb_scan_args(argc, argv, &quot;13&quot;, &amp;rb_io, &amp;rb_url, &amp;encoding, &amp;rb_options);

  if (!RTEST(rb_io)) rb_raise(rb_eArgError, &quot;io cannot be nil&quot;);
  if (RTEST(rb_url)) c_url = StringValuePtr(rb_url);
  if (RTEST(encoding)) c_encoding = StringValuePtr(encoding);
  if (RTEST(rb_options)) c_options = NUM2INT(rb_options);

  xmlTextReaderPtr reader = xmlReaderForIO(
      (xmlInputReadCallback)io_read_callback,
      (xmlInputCloseCallback)io_close_callback,
      (void *)rb_io,
      c_url,
      c_encoding,
      c_options
  );

  if(reader == NULL) {
    xmlFreeTextReader(reader);
    rb_raise(rb_eRuntimeError, &quot;couldn't create a parser&quot;);
  }

  VALUE rb_reader = Data_Wrap_Struct(klass, NULL, dealloc, reader);
  rb_funcall(rb_reader, rb_intern(&quot;initialize&quot;), 3, rb_io, rb_url, encoding);

  return rb_reader;
}
</pre>
  </div>
</div>
</div>
<div id="M000556" class="method">
  <div id="M000556_title" class="title">
    <b>from_memory(string, url = nil, encoding = nil, options = 0)<br />
</b>
  </div>
  <div class="description">
  <p>
Create a new reader that parses <tt>string</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000556_source')" id="l_M000556_source">show source</a> ]</p>
  <div id="M000556_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   from_memory(string, url = nil, encoding = nil, options = 0)
 *
 * Create a new reader that parses +string+
 */
static VALUE from_memory(int argc, VALUE *argv, VALUE klass)
{
  VALUE rb_buffer, rb_url, encoding, rb_options;

  const char * c_url      = NULL;
  const char * c_encoding = NULL;
  int c_options           = 0; 

  rb_scan_args(argc, argv, &quot;13&quot;, &amp;rb_buffer, &amp;rb_url, &amp;encoding, &amp;rb_options);

  if (!RTEST(rb_buffer)) rb_raise(rb_eArgError, &quot;string cannot be nil&quot;);
  if (RTEST(rb_url)) c_url = StringValuePtr(rb_url);
  if (RTEST(encoding)) c_encoding = StringValuePtr(encoding);
  if (RTEST(rb_options)) c_options = NUM2INT(rb_options);

  xmlTextReaderPtr reader = xmlReaderForMemory(
      StringValuePtr(rb_buffer),
      RSTRING_LEN(rb_buffer),
      c_url,
      c_encoding,
      c_options
  );

  if(reader == NULL) {
    xmlFreeTextReader(reader);
    rb_raise(rb_eRuntimeError, &quot;couldn't create a parser&quot;);
  }

  VALUE rb_reader = Data_Wrap_Struct(klass, NULL, dealloc, reader);
  rb_funcall(rb_reader, rb_intern(&quot;initialize&quot;), 3, rb_buffer, rb_url, encoding);

  return rb_reader;
}
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000569" class="method">
  <div id="M000569_title" class="title">
    <b>attribute(name)<br />
</b>
  </div>
  <div class="description">
  <p>
Get the value of attribute named <tt>name</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000569_source')" id="l_M000569_source">show source</a> ]</p>
  <div id="M000569_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   attribute(name)
 *
 * Get the value of attribute named +name+
 */
static VALUE reader_attribute(VALUE self, VALUE name)
{
  xmlTextReaderPtr reader;
  xmlChar *value ;
  Data_Get_Struct(self, xmlTextReader, reader);

  if(name == Qnil) return Qnil;
  name = StringValue(name) ;

  value = xmlTextReaderGetAttribute(reader, (xmlChar*)StringValuePtr(name));
  if(value == NULL) {
    /* this section is an attempt to workaround older versions of libxml that
       don't handle namespaces properly in all attribute-and-friends functions */
    xmlChar *prefix = NULL ;
    xmlChar *localname = xmlSplitQName2((xmlChar*)StringValuePtr(name), &amp;prefix);
    if (localname != NULL) {
      value = xmlTextReaderLookupNamespace(reader, localname);
      xmlFree(localname) ;
    } else {
      value = xmlTextReaderLookupNamespace(reader, prefix);
    }
    xmlFree(prefix);
  }
  if(value == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  VALUE rb_value = NOKOGIRI_STR_NEW2(value,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
  xmlFree(value);
  return rb_value;
}
</pre>
  </div>
</div>
</div>
<div id="M000571" class="method">
  <div id="M000571_title" class="title">
    <b>attribute_at(index)<br />
</b>
  </div>
  <div class="description">
  <p>
Get the value of attribute at <tt>index</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000571_source')" id="l_M000571_source">show source</a> ]</p>
  <div id="M000571_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   attribute_at(index)
 *
 * Get the value of attribute at +index+
 */
static VALUE attribute_at(VALUE self, VALUE index)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);

  if(index == Qnil) return Qnil;
  index = rb_funcall(index, rb_intern(&quot;to_i&quot;), 0);

  xmlChar * value = xmlTextReaderGetAttributeNo(
      reader,
      NUM2INT(index)
  );
  if(value == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  VALUE rb_value = NOKOGIRI_STR_NEW2(value,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
  xmlFree(value);
  return rb_value;
}
</pre>
  </div>
</div>
</div>
<div id="M000568" class="method">
  <div id="M000568_title" class="title">
    <b>attribute_count<br />
</b>
  </div>
  <div class="description">
  <p>
Get the number of attributes for the current node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000568_source')" id="l_M000568_source">show source</a> ]</p>
  <div id="M000568_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   attribute_count
 *
 * Get the number of attributes for the current node
 */
static VALUE attribute_count(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  int count = xmlTextReaderAttributeCount(reader);
  if(count == -1) return Qnil;

  return INT2NUM(count);
}
</pre>
  </div>
</div>
</div>
<div id="M000572" class="method">
  <div id="M000572_title" class="title">
    <b>attribute_nodes<br />
</b>
  </div>
  <div class="description">
  <p>
Get a list of attributes for this <a
href="index.html?a=C00000049&name=Node">Node</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000572_source')" id="l_M000572_source">show source</a> ]</p>
  <div id="M000572_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   attribute_nodes
 *
 * Get a list of attributes for this Node
 */
static VALUE attribute_nodes(VALUE self)
{
  xmlTextReaderPtr reader;
  VALUE attr ;

  Data_Get_Struct(self, xmlTextReader, reader);

  attr = rb_ary_new() ;

  if (! has_attributes(reader))
    return attr ;

  xmlNodePtr ptr = xmlTextReaderExpand(reader);
  if(ptr == NULL) return Qnil;

  VALUE enc = rb_iv_get(self, &quot;@encoding&quot;);

  if(enc != Qnil &amp;&amp; NULL == ptr-&gt;doc-&gt;encoding) {
    ptr-&gt;doc-&gt;encoding = calloc((size_t)RSTRING_LEN(enc), sizeof(char));
    strncpy(
      (char *)ptr-&gt;doc-&gt;encoding,
      StringValuePtr(enc),
      (size_t)RSTRING_LEN(enc)
    );
  }

  Nokogiri_xml_node_properties(ptr, attr);

  return attr ;
}
</pre>
  </div>
</div>
</div>
<div id="M000576" class="method">
  <div id="M000576_title" class="title">
    <b>attributes</b>()
  </div>
  <div class="description">
  <p>
Get a list of attributes for the current node.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000576_source')" id="l_M000576_source">show source</a> ]</p>
  <div id="M000576_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nokogiri/xml/reader.rb, line 51</span>
51:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">attributes</span>
52:         <span class="ruby-constant">Hash</span>[<span class="ruby-operator">*</span>(<span class="ruby-identifier">attribute_nodes</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
53:           [<span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">to_s</span>]
54:         }.<span class="ruby-identifier">flatten</span>)].<span class="ruby-identifier">merge</span>(<span class="ruby-identifier">namespaces</span> <span class="ruby-operator">||</span> {})
55:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000573" class="method">
  <div id="M000573_title" class="title">
    <b>attributes?<br />
</b>
  </div>
  <div class="description">
  <p>
Does this node have attributes?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000573_source')" id="l_M000573_source">show source</a> ]</p>
  <div id="M000573_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   attributes?
 *
 * Does this node have attributes?
 */
static VALUE attributes_eh(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  int eh = has_attributes(reader);
  if(eh == 0) return Qfalse;
  if(eh == 1) return Qtrue;

  return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M000575" class="method">
  <div id="M000575_title" class="title">
    <b>default?<br />
</b>
  </div>
  <div class="description">
  <p>
Was an attribute generated from the default value in the <a
href="index.html?a=C00000073&name=DTD">DTD</a> or schema?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000575_source')" id="l_M000575_source">show source</a> ]</p>
  <div id="M000575_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   default?
 *
 * Was an attribute generated from the default value in the DTD or schema?
 */
static VALUE default_eh(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  int eh = xmlTextReaderIsDefault(reader);
  if(eh == 0) return Qfalse;
  if(eh == 1) return Qtrue;

  return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M000567" class="method">
  <div id="M000567_title" class="title">
    <b>depth<br />
</b>
  </div>
  <div class="description">
  <p>
Get the depth of the node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000567_source')" id="l_M000567_source">show source</a> ]</p>
  <div id="M000567_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   depth
 *
 * Get the depth of the node
 */
static VALUE depth(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  int depth = xmlTextReaderDepth(reader);
  if(depth == -1) return Qnil;

  return INT2NUM(depth);
}
</pre>
  </div>
</div>
</div>
<div id="M000577" class="method">
  <div id="M000577_title" class="title">
    <b>each</b>(&amp;block)
  </div>
  <div class="description">
  <p>
Move the cursor through the document yielding each node to the block
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000577_source')" id="l_M000577_source">show source</a> ]</p>
  <div id="M000577_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nokogiri/xml/reader.rb, line 59</span>
59:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">each</span>(<span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)
60:         <span class="ruby-keyword kw">while</span> <span class="ruby-identifier">node</span> = <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">read</span>
61:           <span class="ruby-identifier">block</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">node</span>)
62:         <span class="ruby-keyword kw">end</span>
63:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000565" class="method">
  <div id="M000565_title" class="title">
    <b>lang<br />
</b>
  </div>
  <div class="description">
  <p>
Get the xml:lang scope within which the node resides.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000565_source')" id="l_M000565_source">show source</a> ]</p>
  <div id="M000565_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   lang
 *
 * Get the xml:lang scope within which the node resides.
 */
static VALUE lang(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * lang = (const char *)xmlTextReaderConstXmlLang(reader);
  if(lang == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(lang,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000561" class="method">
  <div id="M000561_title" class="title">
    <b>local_name<br />
</b>
  </div>
  <div class="description">
  <p>
Get the local name of the node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000561_source')" id="l_M000561_source">show source</a> ]</p>
  <div id="M000561_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   local_name
 *
 * Get the local name of the node
 */
static VALUE local_name(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * name = (const char *)xmlTextReaderConstLocalName(reader);
  if(name == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(name,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000560" class="method">
  <div id="M000560_title" class="title">
    <b>name<br />
</b>
  </div>
  <div class="description">
  <p>
Get the name of the node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000560_source')" id="l_M000560_source">show source</a> ]</p>
  <div id="M000560_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   name
 *
 * Get the name of the node
 */
static VALUE name(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * name = (const char *)xmlTextReaderConstName(reader);
  if(name == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(name,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000562" class="method">
  <div id="M000562_title" class="title">
    <b>namespace_uri<br />
</b>
  </div>
  <div class="description">
  <p>
Get the URI defining the namespace associated with the node
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000562_source')" id="l_M000562_source">show source</a> ]</p>
  <div id="M000562_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   namespace_uri
 *
 * Get the URI defining the namespace associated with the node
 */
static VALUE namespace_uri(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * uri = (const char *)xmlTextReaderConstNamespaceUri(reader);
  if(uri == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(uri,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000570" class="method">
  <div id="M000570_title" class="title">
    <b>namespaces<br />
</b>
  </div>
  <div class="description">
  <p>
Get a hash of namespaces for this <a
href="index.html?a=C00000049&name=Node">Node</a>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000570_source')" id="l_M000570_source">show source</a> ]</p>
  <div id="M000570_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   namespaces
 *
 * Get a hash of namespaces for this Node
 */
static VALUE namespaces(VALUE self)
{
  xmlTextReaderPtr reader;
  VALUE attr ;

  Data_Get_Struct(self, xmlTextReader, reader);

  attr = rb_hash_new() ;

  if (! has_attributes(reader))
    return attr ;

  xmlNodePtr ptr = xmlTextReaderExpand(reader);
  if(ptr == NULL) return Qnil;

  Nokogiri_xml_node_namespaces(ptr, attr);

  return attr ;
}
</pre>
  </div>
</div>
</div>
<div id="M000563" class="method">
  <div id="M000563_title" class="title">
    <b>prefix<br />
</b>
  </div>
  <div class="description">
  <p>
Get the shorthand reference to the namespace associated with the node.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000563_source')" id="l_M000563_source">show source</a> ]</p>
  <div id="M000563_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   prefix
 *
 * Get the shorthand reference to the namespace associated with the node.
 */
static VALUE prefix(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * prefix = (const char *)xmlTextReaderConstPrefix(reader);
  if(prefix == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(prefix,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000558" class="method">
  <div id="M000558_title" class="title">
    <b>read<br />
</b>
  </div>
  <div class="description">
  <p>
Move the <a href="index.html?a=C00000057&name=Reader">Reader</a> forward
through the <a href="index.html?a=C00000017&name=XML">XML</a> document.
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000558_source')" id="l_M000558_source">show source</a> ]</p>
  <div id="M000558_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   read
 *
 * Move the Reader forward through the XML document.
 */
static VALUE read_more(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);

  VALUE error_list = rb_funcall(self, rb_intern(&quot;errors&quot;), 0);

  xmlSetStructuredErrorFunc((void *)error_list, Nokogiri_error_array_pusher);
  int ret = xmlTextReaderRead(reader);
  xmlSetStructuredErrorFunc(NULL, NULL);

  if(ret == 1) return self;
  if(ret == 0) return Qnil;

  xmlErrorPtr error = xmlGetLastError();
  if(error)
    rb_funcall(rb_mKernel, rb_intern(&quot;raise&quot;), 1,
        Nokogiri_wrap_xml_syntax_error((VALUE)NULL, error)
    );
  else
    rb_raise(rb_eRuntimeError, &quot;Error pulling: %d&quot;, ret);

  return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M000559" class="method">
  <div id="M000559_title" class="title">
    <b>state<br />
</b>
  </div>
  <div class="description">
  <p>
Get the state of the reader
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000559_source')" id="l_M000559_source">show source</a> ]</p>
  <div id="M000559_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   state
 *
 * Get the state of the reader
 */
static VALUE state(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  return INT2NUM(xmlTextReaderReadState(reader));
}
</pre>
  </div>
</div>
</div>
<div id="M000564" class="method">
  <div id="M000564_title" class="title">
    <b>value<br />
</b>
  </div>
  <div class="description">
  <p>
Get the text value of the node if present
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000564_source')" id="l_M000564_source">show source</a> ]</p>
  <div id="M000564_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   value
 *
 * Get the text value of the node if present
 */
static VALUE value(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * value = (const char *)xmlTextReaderConstValue(reader);
  if(value == NULL) return Qnil;

  VALUE MAYBE_UNUSED(enc) = rb_iv_get(self, &quot;@encoding&quot;);
  return NOKOGIRI_STR_NEW2(value,
      RTEST(enc) ? StringValuePtr(enc) : NULL);
}
</pre>
  </div>
</div>
</div>
<div id="M000574" class="method">
  <div id="M000574_title" class="title">
    <b>value?<br />
</b>
  </div>
  <div class="description">
  <p>
Does this node have a text value?
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000574_source')" id="l_M000574_source">show source</a> ]</p>
  <div id="M000574_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   value?
 *
 * Does this node have a text value?
 */
static VALUE value_eh(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  int eh = xmlTextReaderHasValue(reader);
  if(eh == 0) return Qfalse;
  if(eh == 1) return Qtrue;

  return Qnil;
}
</pre>
  </div>
</div>
</div>
<div id="M000566" class="method">
  <div id="M000566_title" class="title">
    <b>xml_version<br />
</b>
  </div>
  <div class="description">
  <p>
Get the <a href="index.html?a=C00000017&name=XML">XML</a> version of the
document being read
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000566_source')" id="l_M000566_source">show source</a> ]</p>
  <div id="M000566_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *   xml_version
 *
 * Get the XML version of the document being read
 */
static VALUE xml_version(VALUE self)
{
  xmlTextReaderPtr reader;
  Data_Get_Struct(self, xmlTextReader, reader);
  const char * version = (const char *)xmlTextReaderConstXmlVersion(reader);
  if(version == NULL) return Qnil;

  return NOKOGIRI_STR_NEW2(version, &quot;UTF-8&quot;);
}
</pre>
  </div>
</div>
</div>
</div>

  </div>