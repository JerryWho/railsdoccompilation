  <div id="C00000026">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestBuilder<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/test_builder_rb.html');">test/xml/test_builder.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000207&name=test_bang_and_underscore_is_escaped" >test_bang_and_underscore_is_escaped</a></li>
  <li><a href="index.html?a=M000213&name=test_builder_no_block" >test_builder_no_block</a></li>
  <li><a href="index.html?a=M000212&name=test_cdata" >test_cdata</a></li>
  <li><a href="index.html?a=M000209&name=test_nested_local_variable" >test_nested_local_variable</a></li>
  <li><a href="index.html?a=M000202&name=test_non_root_namespace" >test_non_root_namespace</a></li>
  <li><a href="index.html?a=M000210&name=test_raw_append" >test_raw_append</a></li>
  <li><a href="index.html?a=M000211&name=test_raw_append_with_instance_eval" >test_raw_append_with_instance_eval</a></li>
  <li><a href="index.html?a=M000200&name=test_root_namespace_default_decl" >test_root_namespace_default_decl</a></li>
  <li><a href="index.html?a=M000201&name=test_root_namespace_multi_decl" >test_root_namespace_multi_decl</a></li>
  <li><a href="index.html?a=M000206&name=test_set_encoding" >test_set_encoding</a></li>
  <li><a href="index.html?a=M000205&name=test_specified_namespace_undeclared" >test_specified_namespace_undeclared</a></li>
  <li><a href="index.html?a=M000203&name=test_specify_namespace" >test_specify_namespace</a></li>
  <li><a href="index.html?a=M000204&name=test_specify_namespace_nested" >test_specify_namespace_nested</a></li>
  <li><a href="index.html?a=M000208&name=test_square_brackets_set_attributes" >test_square_brackets_set_attributes</a></li>
  <li><a href="index.html?a=M000199&name=test_with_root" >test_with_root</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000207" class="method">
  <div id="M000207_title" class="title">
    <b>test_bang_and_underscore_is_escaped</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000207_source')" id="l_M000207_source">show source</a> ]</p>
  <div id="M000207_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 89</span>
89:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bang_and_underscore_is_escaped</span>
90:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
91:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
92:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">p_</span>(<span class="ruby-value str">'adsfadsf'</span>)
93:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">p!</span>(<span class="ruby-value str">'adsfadsf'</span>)
94:           <span class="ruby-keyword kw">end</span>
95:         <span class="ruby-keyword kw">end</span>
96:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//p'</span>).<span class="ruby-identifier">length</span>
97:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000213" class="method">
  <div id="M000213_title" class="title">
    <b>test_builder_no_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000213_source')" id="l_M000213_source">show source</a> ]</p>
  <div id="M000213_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 157</span>
157:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_builder_no_block</span>
158:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">&quot;hello world&quot;</span>
159:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span>
160:         <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">root</span> {
161:           <span class="ruby-identifier">cdata</span> <span class="ruby-identifier">string</span>
162:         }
163:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&lt;root&gt;&lt;![CDATA[hello world]]&gt;&lt;/root&gt;&quot;</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">to_xml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>))
164:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000212" class="method">
  <div id="M000212_title" class="title">
    <b>test_cdata</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000212_source')" id="l_M000212_source">show source</a> ]</p>
  <div id="M000212_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 148</span>
148:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_cdata</span>
149:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
150:           <span class="ruby-identifier">root</span> {
151:             <span class="ruby-identifier">cdata</span> <span class="ruby-value str">&quot;hello world&quot;</span>
152:           }
153:         <span class="ruby-keyword kw">end</span>
154:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;?xml version=\&quot;1.0\&quot;?&gt;&lt;root&gt;&lt;![CDATA[hello world]]&gt;&lt;/root&gt;&quot;</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">to_xml</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\n/</span>, <span class="ruby-value str">''</span>))
155:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000209" class="method">
  <div id="M000209_title" class="title">
    <b>test_nested_local_variable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000209_source')" id="l_M000209_source">show source</a> ]</p>
  <div id="M000209_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 110</span>
110:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_nested_local_variable</span>
111:         <span class="ruby-ivar">@ivar</span>     = <span class="ruby-value str">'hello'</span>
112:         <span class="ruby-identifier">local_var</span> = <span class="ruby-value str">'hello world'</span>
113:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
114:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
115:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">foo</span> <span class="ruby-identifier">local_var</span>
116:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">bar</span> <span class="ruby-ivar">@ivar</span>
117:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">baz</span> {
118:               <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">text</span> <span class="ruby-ivar">@ivar</span>
119:             }
120:           <span class="ruby-keyword kw">end</span>
121:         <span class="ruby-keyword kw">end</span>
122: 
123:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//root/foo'</span>).<span class="ruby-identifier">content</span>
124:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//root/bar'</span>).<span class="ruby-identifier">content</span>
125:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'baz'</span>).<span class="ruby-identifier">content</span>
126:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000202" class="method">
  <div id="M000202_title" class="title">
    <b>test_non_root_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000202_source')" id="l_M000202_source">show source</a> ]</p>
  <div id="M000202_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 34</span>
34:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_root_namespace</span>
35:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
36:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> { <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">hello</span>(<span class="ruby-identifier">:xmlns</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one'</span>) }
37:         }
38:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'one'</span>, <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'hello'</span>, <span class="ruby-value str">'xmlns'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
39:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000210" class="method">
  <div id="M000210_title" class="title">
    <b>test_raw_append</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000210_source')" id="l_M000210_source">show source</a> ]</p>
  <div id="M000210_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 128</span>
128:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_raw_append</span>
129:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
130:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
131:             <span class="ruby-identifier">xml</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'hello'</span>
132:           <span class="ruby-keyword kw">end</span>
133:         <span class="ruby-keyword kw">end</span>
134: 
135:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'/root'</span>).<span class="ruby-identifier">content</span>
136:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000211" class="method">
  <div id="M000211_title" class="title">
    <b>test_raw_append_with_instance_eval</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000211_source')" id="l_M000211_source">show source</a> ]</p>
  <div id="M000211_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 138</span>
138:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_raw_append_with_instance_eval</span>
139:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
140:           <span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
141:             <span class="ruby-keyword kw">self</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'hello'</span>
142:           <span class="ruby-keyword kw">end</span>
143:         <span class="ruby-keyword kw">end</span>
144: 
145:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'/root'</span>).<span class="ruby-identifier">content</span>
146:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000200" class="method">
  <div id="M000200_title" class="title">
    <b>test_root_namespace_default_decl</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000200_source')" id="l_M000200_source">show source</a> ]</p>
  <div id="M000200_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 14</span>
14:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_namespace_default_decl</span>
15:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>(<span class="ruby-identifier">:xmlns</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one:two'</span>) }
16:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>
17:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'one:two'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
18:         <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value str">'xmlns'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one:two'</span> }, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespaces</span>)
19:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000201" class="method">
  <div id="M000201_title" class="title">
    <b>test_root_namespace_multi_decl</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000201_source')" id="l_M000201_source">show source</a> ]</p>
  <div id="M000201_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 21</span>
21:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_namespace_multi_decl</span>
22:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
23:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>(<span class="ruby-identifier">:xmlns</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one:two'</span>, <span class="ruby-value str">'xmlns:foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>) <span class="ruby-keyword kw">do</span>
24:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">hello</span>
25:           <span class="ruby-keyword kw">end</span>
26:         }
27:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>
28:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'one:two'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
29:         <span class="ruby-identifier">assert_equal</span>({ <span class="ruby-value str">'xmlns'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'one:two'</span>, <span class="ruby-value str">'xmlns:foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span> }, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">namespaces</span>)
30: 
31:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'one:two'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'hello'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
32:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000206" class="method">
  <div id="M000206_title" class="title">
    <b>test_set_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000206_source')" id="l_M000206_source">show source</a> ]</p>
  <div id="M000206_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 80</span>
80:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_encoding</span>
81:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
82:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
83:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">bar</span> <span class="ruby-value str">'blah'</span>
84:           <span class="ruby-keyword kw">end</span>
85:         <span class="ruby-keyword kw">end</span>
86:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">to_xml</span>
87:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000205" class="method">
  <div id="M000205_title" class="title">
    <b>test_specified_namespace_undeclared</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000205_source')" id="l_M000205_source">show source</a> ]</p>
  <div id="M000205_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 70</span>
70:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_specified_namespace_undeclared</span>
71:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
72:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
73:             <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) <span class="ruby-keyword kw">do</span>
74:               <span class="ruby-identifier">xml</span>[<span class="ruby-identifier">:foo</span>]
75:             <span class="ruby-keyword kw">end</span>
76:           <span class="ruby-keyword kw">end</span>
77:         }
78:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000203" class="method">
  <div id="M000203_title" class="title">
    <b>test_specify_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000203_source')" id="l_M000203_source">show source</a> ]</p>
  <div id="M000203_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 41</span>
41:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_specify_namespace</span>
42:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
43:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>(<span class="ruby-value str">'xmlns:foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>) <span class="ruby-keyword kw">do</span>
44:             <span class="ruby-identifier">xml</span>[<span class="ruby-identifier">:foo</span>].<span class="ruby-identifier">bar</span>
45:             <span class="ruby-identifier">xml</span>[<span class="ruby-value str">'foo'</span>].<span class="ruby-identifier">baz</span>
46:           <span class="ruby-keyword kw">end</span>
47:         }
48:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>
49:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo|bar'</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
50:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo|baz'</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
51:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000204" class="method">
  <div id="M000204_title" class="title">
    <b>test_specify_namespace_nested</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000204_source')" id="l_M000204_source">show source</a> ]</p>
  <div id="M000204_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 53</span>
53:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_specify_namespace_nested</span>
54:         <span class="ruby-identifier">b</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
55:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span>(<span class="ruby-value str">'xmlns:foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>) <span class="ruby-keyword kw">do</span>
56:             <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">yay</span> <span class="ruby-keyword kw">do</span>
57:               <span class="ruby-identifier">xml</span>[<span class="ruby-identifier">:foo</span>].<span class="ruby-identifier">bar</span>
58: 
59:               <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">yikes</span> <span class="ruby-keyword kw">do</span>
60:                 <span class="ruby-identifier">xml</span>[<span class="ruby-value str">'foo'</span>].<span class="ruby-identifier">baz</span>
61:               <span class="ruby-keyword kw">end</span>
62:             <span class="ruby-keyword kw">end</span>
63:           <span class="ruby-keyword kw">end</span>
64:         }
65:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>
66:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo|bar'</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
67:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">b</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo|baz'</span>, <span class="ruby-value str">'foo'</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">namespace</span>.<span class="ruby-identifier">href</span>
68:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000208" class="method">
  <div id="M000208_title" class="title">
    <b>test_square_brackets_set_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000208_source')" id="l_M000208_source">show source</a> ]</p>
  <div id="M000208_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 99</span>
 99:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_square_brackets_set_attributes</span>
100:         <span class="ruby-identifier">builder</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
101:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">root</span> <span class="ruby-keyword kw">do</span>
102:             <span class="ruby-identifier">foo</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">foo</span>
103:             <span class="ruby-identifier">foo</span>[<span class="ruby-value str">'id'</span>] = <span class="ruby-value str">'hello'</span>
104:             <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">foo</span>[<span class="ruby-value str">'id'</span>]
105:           <span class="ruby-keyword kw">end</span>
106:         <span class="ruby-keyword kw">end</span>
107:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">builder</span>.<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//foo[@id = &quot;hello&quot;]'</span>).<span class="ruby-identifier">length</span>
108:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000199" class="method">
  <div id="M000199_title" class="title">
    <b>test_with_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000199_source')" id="l_M000199_source">show source</a> ]</p>
  <div id="M000199_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_builder.rb, line 6</span>
 6:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_with_root</span>
 7:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
 8:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Builder</span>.<span class="ruby-identifier">with</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'employee'</span>)) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">xml</span><span class="ruby-operator">|</span>
 9:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">foo</span>
10:         <span class="ruby-keyword kw">end</span>
11:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//employee/foo'</span>).<span class="ruby-identifier">length</span>
12:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>