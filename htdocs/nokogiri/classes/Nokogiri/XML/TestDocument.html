  <div id="C00000061">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestDocument<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/test_document_rb.html');">test/xml/test_document.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000643&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000645&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000609&name=new" >new</a></li>
  <li><a href="index.html?a=M000593&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000625&name=test_XML_function" >test_XML_function</a></li>
  <li><a href="index.html?a=M000606&name=test_XML_takes_block" >test_XML_takes_block</a></li>
  <li><a href="index.html?a=M000595&name=test_add_child_with_fragment" >test_add_child_with_fragment</a></li>
  <li><a href="index.html?a=M000596&name=test_add_child_with_multiple_roots" >test_add_child_with_multiple_roots</a></li>
  <li><a href="index.html?a=M000616&name=test_ancestors" >test_ancestors</a></li>
  <li><a href="index.html?a=M000631&name=test_bad_xpath_raises_syntax_error" >test_bad_xpath_raises_syntax_error</a></li>
  <li><a href="index.html?a=M000601&name=test_clone" >test_clone</a></li>
  <li><a href="index.html?a=M000644&name=test_decorator_is_applied" >test_decorator_is_applied</a></li>
  <li><a href="index.html?a=M000635&name=test_document" >test_document</a></li>
  <li><a href="index.html?a=M000623&name=test_document_has_errors" >test_document_has_errors</a></li>
  <li><a href="index.html?a=M000628&name=test_document_name" >test_document_name</a></li>
  <li><a href="index.html?a=M000627&name=test_document_parent" >test_document_parent</a></li>
  <li><a href="index.html?a=M000612&name=test_document_parse_method" >test_document_parse_method</a></li>
  <li><a href="index.html?a=M000602&name=test_document_should_not_have_default_ns" >test_document_should_not_have_default_ns</a></li>
  <li><a href="index.html?a=M000640&name=test_dump" >test_dump</a></li>
  <li><a href="index.html?a=M000641&name=test_dup" >test_dup</a></li>
  <li><a href="index.html?a=M000594&name=test_empty_node_converted_to_html_is_not_self_closing" >test_empty_node_converted_to_html_is_not_self_closing</a></li>
  <li><a href="index.html?a=M000622&name=test_encoding" >test_encoding</a></li>
  <li><a href="index.html?a=M000613&name=test_encoding=" >test_encoding=</a></li>
  <li><a href="index.html?a=M000633&name=test_find_with_namespace" >test_find_with_namespace</a></li>
  <li><a href="index.html?a=M000597&name=test_move_root_to_document_with_no_root" >test_move_root_to_document_with_no_root</a></li>
  <li><a href="index.html?a=M000598&name=test_move_root_with_existing_root_gets_gcd" >test_move_root_with_existing_root_gets_gcd</a></li>
  <li><a href="index.html?a=M000637&name=test_multiple_search" >test_multiple_search</a></li>
  <li><a href="index.html?a=M000614&name=test_namespace_should_not_exist" >test_namespace_should_not_exist</a></li>
  <li><a href="index.html?a=M000646&name=test_new" >test_new</a></li>
  <li><a href="index.html?a=M000632&name=test_new_document_collect_namespaces" >test_new_document_collect_namespaces</a></li>
  <li><a href="index.html?a=M000638&name=test_node_set_index" >test_node_set_index</a></li>
  <li><a href="index.html?a=M000615&name=test_non_existant_function" >test_non_existant_function</a></li>
  <li><a href="index.html?a=M000629&name=test_parse_can_take_io" >test_parse_can_take_io</a></li>
  <li><a href="index.html?a=M000603&name=test_parse_handles_nil_gracefully" >test_parse_handles_nil_gracefully</a></li>
  <li><a href="index.html?a=M000604&name=test_parse_takes_block" >test_parse_takes_block</a></li>
  <li><a href="index.html?a=M000605&name=test_parse_yields_parse_options" >test_parse_yields_parse_options</a></li>
  <li><a href="index.html?a=M000617&name=test_root_node_parent_is_document" >test_root_node_parent_is_document</a></li>
  <li><a href="index.html?a=M000639&name=test_search" >test_search</a></li>
  <li><a href="index.html?a=M000630&name=test_search_on_empty_documents" >test_search_on_empty_documents</a></li>
  <li><a href="index.html?a=M000647&name=test_set_root" >test_set_root</a></li>
  <li><a href="index.html?a=M000636&name=test_singleton_methods" >test_singleton_methods</a></li>
  <li><a href="index.html?a=M000624&name=test_strict_document_throws_syntax_error" >test_strict_document_throws_syntax_error</a></li>
  <li><a href="index.html?a=M000607&name=test_subclass" >test_subclass</a></li>
  <li><a href="index.html?a=M000610&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M000608&name=test_subclass_initialize" >test_subclass_initialize</a></li>
  <li><a href="index.html?a=M000611&name=test_subclass_parse" >test_subclass_parse</a></li>
  <li><a href="index.html?a=M000642&name=test_subset_is_decorated" >test_subset_is_decorated</a></li>
  <li><a href="index.html?a=M000620&name=test_to_xml_with_indent" >test_to_xml_with_indent</a></li>
  <li><a href="index.html?a=M000626&name=test_url" >test_url</a></li>
  <li><a href="index.html?a=M000599&name=test_validate" >test_validate</a></li>
  <li><a href="index.html?a=M000600&name=test_validate_no_internal_subset" >test_validate_no_internal_subset</a></li>
  <li><a href="index.html?a=M000621&name=test_write_xml_to_with_indent" >test_write_xml_to_with_indent</a></li>
  <li><a href="index.html?a=M000634&name=test_xml?" >test_xml?</a></li>
  <li><a href="index.html?a=M000618&name=test_xmlns_is_automatically_registered" >test_xmlns_is_automatically_registered</a></li>
  <li><a href="index.html?a=M000619&name=test_xmlns_is_registered_for_nodesets" >test_xmlns_is_registered_for_nodesets</a></li>
  <li><a href="index.html?a=M000648&name=util_decorate" >util_decorate</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M000609" class="method">
  <div id="M000609_title" class="title">
    <b>new</b>(*args)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000609_source')" id="l_M000609_source">show source</a> ]</p>
  <div id="M000609_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 116</span>
116:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
117:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
118:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000643" class="method">
  <div id="M000643_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000643_source')" id="l_M000643_source">show source</a> ]</p>
  <div id="M000643_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 407</span>
407:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
408:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000645" class="method">
  <div id="M000645_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000645_source')" id="l_M000645_source">show source</a> ]</p>
  <div id="M000645_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 423</span>
423:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
424:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000593" class="method">
  <div id="M000593_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000593_source')" id="l_M000593_source">show source</a> ]</p>
  <div id="M000593_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 8</span>
 8:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 9:         <span class="ruby-keyword kw">super</span>
10:         <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
11:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000625" class="method">
  <div id="M000625_title" class="title">
    <b>test_XML_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000625_source')" id="l_M000625_source">show source</a> ]</p>
  <div id="M000625_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 267</span>
267:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_XML_function</span>
268:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
269:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xml?</span>
270:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000606" class="method">
  <div id="M000606_title" class="title">
    <b>test_XML_takes_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000606_source')" id="l_M000606_source">show source</a> ]</p>
  <div id="M000606_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 95</span>
 95:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_XML_takes_block</span>
 96:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
 97:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
 98:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
 99:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
100:         <span class="ruby-keyword kw">end</span>
101:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
102:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
103:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
104:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000595" class="method">
  <div id="M000595_title" class="title">
    <b>test_add_child_with_fragment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000595_source')" id="l_M000595_source">show source</a> ]</p>
  <div id="M000595_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 18</span>
18:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_with_fragment</span>
19:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
20:         <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;hello /&gt;'</span>)
21:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">add_child</span> <span class="ruby-identifier">fragment</span>
22:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/hello'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//hello'</span>).<span class="ruby-identifier">path</span>
23:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">name</span>
24:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000596" class="method">
  <div id="M000596_title" class="title">
    <b>test_add_child_with_multiple_roots</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000596_source')" id="l_M000596_source">show source</a> ]</p>
  <div id="M000596_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 26</span>
26:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_with_multiple_roots</span>
27:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
28:           <span class="ruby-ivar">@xml</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-ivar">@xml</span>)
29:         <span class="ruby-keyword kw">end</span>
30:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000616" class="method">
  <div id="M000616_title" class="title">
    <b>test_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000616_source')" id="l_M000616_source">show source</a> ]</p>
  <div id="M000616_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 171</span>
171:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ancestors</span>
172:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
173:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000631" class="method">
  <div id="M000631_title" class="title">
    <b>test_bad_xpath_raises_syntax_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000631_source')" id="l_M000631_source">show source</a> ]</p>
  <div id="M000631_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 311</span>
311:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bad_xpath_raises_syntax_error</span>
312:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
313:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'\\'</span>)
314:         }
315:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000601" class="method">
  <div id="M000601_title" class="title">
    <b>test_clone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000601_source')" id="l_M000601_source">show source</a> ]</p>
  <div id="M000601_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 53</span>
53:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone</span>
54:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">clone</span>
55:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000644" class="method">
  <div id="M000644_title" class="title">
    <b>test_decorator_is_applied</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000644_source')" id="l_M000644_source">show source</a> ]</p>
  <div id="M000644_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 421</span>
421:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decorator_is_applied</span>
422:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
423:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
424:           <span class="ruby-keyword kw">end</span>
425:         <span class="ruby-keyword kw">end</span>
426:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
427: 
428:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
429:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
430:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
431:         <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
432:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>), <span class="ruby-identifier">node</span>.<span class="ruby-identifier">class</span>
433:         <span class="ruby-keyword kw">end</span>
434:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
435:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000635" class="method">
  <div id="M000635_title" class="title">
    <b>test_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000635_source')" id="l_M000635_source">show source</a> ]</p>
  <div id="M000635_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 354</span>
354:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document</span>
355:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">document</span>
356:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000623" class="method">
  <div id="M000623_title" class="title">
    <b>test_document_has_errors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000623_source')" id="l_M000623_source">show source</a> ]</p>
  <div id="M000623_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 243</span>
243:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_has_errors</span>
244:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;\n&quot;</span>)
245:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
246:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span>
247:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">error</span>.<span class="ruby-identifier">inspect</span>
248:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">error</span>.<span class="ruby-identifier">to_s</span>
249:         <span class="ruby-keyword kw">end</span>
250:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000628" class="method">
  <div id="M000628_title" class="title">
    <b>test_document_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000628_source')" id="l_M000628_source">show source</a> ]</p>
  <div id="M000628_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 284</span>
284:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_name</span>
285:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
286:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'document'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">name</span>
287:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000627" class="method">
  <div id="M000627_title" class="title">
    <b>test_document_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000627_source')" id="l_M000627_source">show source</a> ]</p>
  <div id="M000627_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 277</span>
277:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parent</span>
278:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
279:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
280:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">parent</span>
281:         }
282:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000612" class="method">
  <div id="M000612_title" class="title">
    <b>test_document_parse_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000612_source')" id="l_M000612_source">show source</a> ]</p>
  <div id="M000612_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 137</span>
137:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parse_method</span>
138:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
139:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>
140:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000602" class="method">
  <div id="M000602_title" class="title">
    <b>test_document_should_not_have_default_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000602_source')" id="l_M000602_source">show source</a> ]</p>
  <div id="M000602_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 57</span>
57:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_should_not_have_default_ns</span>
58:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
59: 
60:         <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
61:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">default_namespace</span> = <span class="ruby-value str">'http://innernet.com/'</span>
62:         <span class="ruby-keyword kw">end</span>
63: 
64:         <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
65:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">add_namespace_definition</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
66:         <span class="ruby-keyword kw">end</span>
67:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000640" class="method">
  <div id="M000640_title" class="title">
    <b>test_dump</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000640_source')" id="l_M000640_source">show source</a> ]</p>
  <div id="M000640_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 394</span>
394:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dump</span>
395:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>
396:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
397:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000641" class="method">
  <div id="M000641_title" class="title">
    <b>test_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000641_source')" id="l_M000641_source">show source</a> ]</p>
  <div id="M000641_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 399</span>
399:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup</span>
400:         <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">dup</span>
401:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">dup</span>
402:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">xml?</span>, <span class="ruby-value str">'duplicate should be xml'</span>
403:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000594" class="method">
  <div id="M000594_title" class="title">
    <b>test_empty_node_converted_to_html_is_not_self_closing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000594_source')" id="l_M000594_source">show source</a> ]</p>
  <div id="M000594_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 13</span>
13:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_node_converted_to_html_is_not_self_closing</span>
14:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;a&gt;&lt;/a&gt;'</span>)
15:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">inner_html</span>
16:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000622" class="method">
  <div id="M000622_title" class="title">
    <b>test_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000622_source')" id="l_M000622_source">show source</a> ]</p>
  <div id="M000622_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 237</span>
237:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encoding</span>
238:           <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'UTF-8'</span>)
239:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">encoding</span>
240:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000613" class="method">
  <div id="M000613_title" class="title">
    <b>test_encoding=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000613_source')" id="l_M000613_source">show source</a> ]</p>
  <div id="M000613_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 142</span>
142:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encoding=</span>
143:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-value str">'UTF-8'</span>
144:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
145: 
146:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-value str">'EUC-JP'</span>
147:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'EUC-JP'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
148:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000633" class="method">
  <div id="M000633_title" class="title">
    <b>test_find_with_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000633_source')" id="l_M000633_source">show source</a> ]</p>
  <div id="M000633_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 322</span>
322:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_namespace</span>
323:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns:tenderlove='http://tenderlovemaking.com/'&gt;\n&lt;tenderlove:foo awesome='true'&gt;snuggles!&lt;/tenderlove:foo&gt;\n&lt;/x&gt;\n&quot;</span>)
324: 
325:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
326:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'tenderlove'</span>, <span class="ruby-value str">'http://tenderlovemaking.com/'</span>
327:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//tenderlove:foo'</span>).<span class="ruby-identifier">node_set</span>
328:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
329:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
330: 
331:         <span class="ruby-comment cmt"># It looks like only the URI is important:</span>
332:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
333:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'america'</span>, <span class="ruby-value str">'http://tenderlovemaking.com/'</span>
334:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//america:foo'</span>).<span class="ruby-identifier">node_set</span>
335:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
336:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
337: 
338:         <span class="ruby-comment cmt"># Its so important that a missing slash will cause it to return nothing</span>
339:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
340:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'america'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>
341:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//america:foo'</span>).<span class="ruby-identifier">node_set</span>
342:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
343:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000597" class="method">
  <div id="M000597_title" class="title">
    <b>test_move_root_to_document_with_no_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000597_source')" id="l_M000597_source">show source</a> ]</p>
  <div id="M000597_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 32</span>
32:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_move_root_to_document_with_no_root</span>
33:         <span class="ruby-identifier">sender</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;foo&lt;/root&gt;'</span>)
34:         <span class="ruby-identifier">newdoc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
35:         <span class="ruby-identifier">newdoc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">sender</span>.<span class="ruby-identifier">root</span>
36:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000598" class="method">
  <div id="M000598_title" class="title">
    <b>test_move_root_with_existing_root_gets_gcd</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000598_source')" id="l_M000598_source">show source</a> ]</p>
  <div id="M000598_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 38</span>
38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_move_root_with_existing_root_gets_gcd</span>
39:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;test&lt;/root&gt;'</span>)
40:         <span class="ruby-identifier">doc2</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-node">&quot;&lt;root&gt;#{'x' * 5000000}&lt;/root&gt;&quot;</span>)
41:         <span class="ruby-identifier">doc2</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
42:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000637" class="method">
  <div id="M000637_title" class="title">
    <b>test_multiple_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000637_source')" id="l_M000637_source">show source</a> ]</p>
  <div id="M000637_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 369</span>
369:       <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_multiple_search</span><span class="ruby-identifier">test_multiple_search</span>
370:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>, <span class="ruby-value str">'//name'</span>)
371:         <span class="ruby-identifier">employees</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
372:         <span class="ruby-identifier">names</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
373:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">employees</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">names</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
374:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000614" class="method">
  <div id="M000614_title" class="title">
    <b>test_namespace_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000614_source')" id="l_M000614_source">show source</a> ]</p>
  <div id="M000614_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 150</span>
150:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_should_not_exist</span>
151:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
152:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">namespace</span>
153:         }
154:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000646" class="method">
  <div id="M000646_title" class="title">
    <b>test_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000646_source')" id="l_M000646_source">show source</a> ]</p>
  <div id="M000646_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 437</span>
437:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new</span>
438:         <span class="ruby-identifier">doc</span> = <span class="ruby-keyword kw">nil</span>
439:         <span class="ruby-identifier">assert_nothing_raised</span> {
440:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
441:         }
442:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>
443:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xml?</span>
444:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
445:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000632" class="method">
  <div id="M000632_title" class="title">
    <b>test_new_document_collect_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000632_source')" id="l_M000632_source">show source</a> ]</p>
  <div id="M000632_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 317</span>
317:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new_document_collect_namespaces</span>
318:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
319:         <span class="ruby-identifier">assert_equal</span>({}, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">collect_namespaces</span>)
320:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000638" class="method">
  <div id="M000638_title" class="title">
    <b>test_node_set_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000638_source')" id="l_M000638_source">show source</a> ]</p>
  <div id="M000638_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 376</span>
376:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_set_index</span>
377:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
378: 
379:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">5</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
380:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>[<span class="ruby-value">4</span>]
381:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node_set</span>[<span class="ruby-value">5</span>]
382:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000615" class="method">
  <div id="M000615_title" class="title">
    <b>test_non_existant_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000615_source')" id="l_M000615_source">show source</a> ]</p>
  <div id="M000615_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 156</span>
156:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existant_function</span>
157:         <span class="ruby-comment cmt"># WTF.  I don't know why this is different between MRI and ffi.</span>
158:         <span class="ruby-comment cmt"># They should be the same...  Either way, raising an exception</span>
159:         <span class="ruby-comment cmt"># is the correct thing to do.</span>
160:         <span class="ruby-identifier">exception</span> = <span class="ruby-constant">RuntimeError</span>
161: 
162:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION_INFO</span>[<span class="ruby-value str">'libxml'</span>][<span class="ruby-value str">'platform'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'jruby'</span>
163:           <span class="ruby-identifier">exception</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>
164:         <span class="ruby-keyword kw">end</span>
165: 
166:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-identifier">exception</span>) {
167:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//name[foo()]'</span>)
168:         }
169:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000629" class="method">
  <div id="M000629_title" class="title">
    <b>test_parse_can_take_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000629_source')" id="l_M000629_source">show source</a> ]</p>
  <div id="M000629_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 289</span>
289:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_can_take_io</span>
290:         <span class="ruby-identifier">xml</span> = <span class="ruby-keyword kw">nil</span>
291:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
292:           <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">f</span>)
293:         }
294:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xml?</span>
295:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
296:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
297:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000603" class="method">
  <div id="M000603_title" class="title">
    <b>test_parse_handles_nil_gracefully</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000603_source')" id="l_M000603_source">show source</a> ]</p>
  <div id="M000603_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_handles_nil_gracefully</span>
70:         <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
71:           <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-keyword kw">nil</span>)
72:         <span class="ruby-keyword kw">end</span>
73:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-ivar">@doc</span>
74:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000604" class="method">
  <div id="M000604_title" class="title">
    <b>test_parse_takes_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000604_source')" id="l_M000604_source">show source</a> ]</p>
  <div id="M000604_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 76</span>
76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_takes_block</span>
77:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
78:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
79:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
80:         <span class="ruby-keyword kw">end</span>
81:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>
82:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000605" class="method">
  <div id="M000605_title" class="title">
    <b>test_parse_yields_parse_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000605_source')" id="l_M000605_source">show source</a> ]</p>
  <div id="M000605_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 84</span>
84:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_yields_parse_options</span>
85:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
86:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
87:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
88:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
89:         <span class="ruby-keyword kw">end</span>
90:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
91:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
92:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
93:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000617" class="method">
  <div id="M000617_title" class="title">
    <b>test_root_node_parent_is_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000617_source')" id="l_M000617_source">show source</a> ]</p>
  <div id="M000617_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 175</span>
175:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_node_parent_is_document</span>
176:         <span class="ruby-identifier">parent</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parent</span>
177:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">parent</span>
178:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">parent</span>
179:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000639" class="method">
  <div id="M000639_title" class="title">
    <b>test_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000639_source')" id="l_M000639_source">show source</a> ]</p>
  <div id="M000639_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 384</span>
384:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search</span>
385:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
386: 
387:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">5</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
388: 
389:         <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
390:           <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
391:         <span class="ruby-keyword kw">end</span>
392:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000630" class="method">
  <div id="M000630_title" class="title">
    <b>test_search_on_empty_documents</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000630_source')" id="l_M000630_source">show source</a> ]</p>
  <div id="M000630_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 299</span>
299:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_on_empty_documents</span>
300:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
301:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//foo'</span>)
302:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
303: 
304:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>)
305:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
306: 
307:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//foo'</span>)
308:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
309:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000647" class="method">
  <div id="M000647_title" class="title">
    <b>test_set_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000647_source')" id="l_M000647_source">show source</a> ]</p>
  <div id="M000647_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 447</span>
447:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_root</span>
448:         <span class="ruby-identifier">doc</span> = <span class="ruby-keyword kw">nil</span>
449:         <span class="ruby-identifier">assert_nothing_raised</span> {
450:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
451:         }
452:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>
453:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xml?</span>
454:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
455:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">doc</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
456:           <span class="ruby-identifier">n</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'hello world'</span>
457:         }
458:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
459:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">node</span>
460:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>)
461:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000636" class="method">
  <div id="M000636_title" class="title">
    <b>test_singleton_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000636_source')" id="l_M000636_source">show source</a> ]</p>
  <div id="M000636_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 358</span>
358:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_singleton_methods</span>
359:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
360:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
361:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">first</span>
362:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">test</span>
363:           <span class="ruby-value str">'test'</span>
364:         <span class="ruby-keyword kw">end</span>
365:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
366:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">test</span>
367:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000624" class="method">
  <div id="M000624_title" class="title">
    <b>test_strict_document_throws_syntax_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000624_source')" id="l_M000624_source">show source</a> ]</p>
  <div id="M000624_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 255</span>
255:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_strict_document_throws_syntax_error</span>
256:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
257:           <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">0</span>)
258:         }
259: 
260:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
261:           <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
262:             <span class="ruby-identifier">cfg</span>.<span class="ruby-identifier">strict</span>
263:           }
264:         }
265:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000607" class="method">
  <div id="M000607_title" class="title">
    <b>test_subclass</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000607_source')" id="l_M000607_source">show source</a> ]</p>
  <div id="M000607_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 106</span>
106:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass</span>
107:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
108:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
109:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
110:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000610" class="method">
  <div id="M000610_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000610_source')" id="l_M000610_source">show source</a> ]</p>
  <div id="M000610_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 124</span>
124:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
125:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
126:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">dup</span>
127:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
128:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000608" class="method">
  <div id="M000608_title" class="title">
    <b>test_subclass_initialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000608_source')" id="l_M000608_source">show source</a> ]</p>
  <div id="M000608_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_initialize</span>
113:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>) <span class="ruby-keyword kw">do</span>
114:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:initialized_with</span>
115: 
116:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
117:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
118:           <span class="ruby-keyword kw">end</span>
119:         <span class="ruby-keyword kw">end</span>
120:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;1.0&quot;</span>, <span class="ruby-value">1</span>)
121:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;1.0&quot;</span>, <span class="ruby-value">1</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">initialized_with</span>
122:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000611" class="method">
  <div id="M000611_title" class="title">
    <b>test_subclass_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000611_source')" id="l_M000611_source">show source</a> ]</p>
  <div id="M000611_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 130</span>
130:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_parse</span>
131:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
132:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
133:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_s</span>
134:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
135:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000642" class="method">
  <div id="M000642_title" class="title">
    <b>test_subset_is_decorated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000642_source')" id="l_M000642_source">show source</a> ]</p>
  <div id="M000642_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 405</span>
405:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subset_is_decorated</span>
406:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
407:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
408:           <span class="ruby-keyword kw">end</span>
409:         <span class="ruby-keyword kw">end</span>
410:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
411: 
412:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
413:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//staff'</span>)
414:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
415:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">subset</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'.//employee'</span>)
416:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">subset</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
417:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sub_subset</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'.//name'</span>)
418:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sub_subset</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
419:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000620" class="method">
  <div id="M000620_title" class="title">
    <b>test_to_xml_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000620_source')" id="l_M000620_source">show source</a> ]</p>
  <div id="M000620_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 219</span>
219:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_with_indent</span>
220:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/root&gt;'</span>)
221:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>))
222: 
223:         <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
224:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000626" class="method">
  <div id="M000626_title" class="title">
    <b>test_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000626_source')" id="l_M000626_source">show source</a> ]</p>
  <div id="M000626_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 272</span>
272:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url</span>
273:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">url</span>
274:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">XML_FILE</span>, <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unescape</span>(<span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">url</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'file:///'</span>, <span class="ruby-value str">''</span>)
275:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000599" class="method">
  <div id="M000599_title" class="title">
    <b>test_validate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000599_source')" id="l_M000599_source">show source</a> ]</p>
  <div id="M000599_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_validate</span>
45:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">44</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">validate</span>.<span class="ruby-identifier">length</span>
46:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000600" class="method">
  <div id="M000600_title" class="title">
    <b>test_validate_no_internal_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000600_source')" id="l_M000600_source">show source</a> ]</p>
  <div id="M000600_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 48</span>
48:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_validate_no_internal_subset</span>
49:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;test/&gt;'</span>)
50:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">validate</span>
51:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000621" class="method">
  <div id="M000621_title" class="title">
    <b>test_write_xml_to_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000621_source')" id="l_M000621_source">show source</a> ]</p>
  <div id="M000621_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 226</span>
226:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_xml_to_with_indent</span>
227:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
228:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/root&gt;'</span>)
229:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">write_xml_to</span> <span class="ruby-identifier">io</span>, <span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
230:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
231:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>)
232:         <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
233:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000634" class="method">
  <div id="M000634_title" class="title">
    <b>test_xml?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000634_source')" id="l_M000634_source">show source</a> ]</p>
  <div id="M000634_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 350</span>
350:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml?</span>
351:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xml?</span>
352:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000618" class="method">
  <div id="M000618_title" class="title">
    <b>test_xmlns_is_automatically_registered</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000618_source')" id="l_M000618_source">show source</a> ]</p>
  <div id="M000618_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 181</span>
181:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xmlns_is_automatically_registered</span>
182:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot;&gt;\n&lt;foo&gt;\nbar\n&lt;/foo&gt;\n&lt;/root&gt;\n&quot;</span>)
183:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">length</span>
184:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">length</span>
185:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'|foo'</span>).<span class="ruby-identifier">length</span>
186:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">length</span>
187:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">length</span>
188:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">length</span>
189:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'xmlns|foo'</span>)
190:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:foo'</span>)
191:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo'</span>)
192:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000619" class="method">
  <div id="M000619_title" class="title">
    <b>test_xmlns_is_registered_for_nodesets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000619_source')" id="l_M000619_source">show source</a> ]</p>
  <div id="M000619_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 201</span>
201:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xmlns_is_registered_for_nodesets</span>
202:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot;&gt;\n&lt;foo&gt;\n&lt;bar&gt;\nbaz\n&lt;/bar&gt;\n&lt;/foo&gt;\n&lt;/root&gt;\n&quot;</span>)
203:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|bar'</span>).<span class="ruby-identifier">length</span>
204:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">length</span>
205:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'./xmlns:bar'</span>).<span class="ruby-identifier">length</span>
206:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|bar'</span>).<span class="ruby-identifier">length</span>
207:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'./xmlns:bar'</span>).<span class="ruby-identifier">length</span>
208:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000648" class="method">
  <div id="M000648_title" class="title">
    <b>util_decorate</b>(document, x)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000648_source')" id="l_M000648_source">show source</a> ]</p>
  <div id="M000648_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 463</span>
463:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">util_decorate</span>(<span class="ruby-identifier">document</span>, <span class="ruby-identifier">x</span>)
464:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorators</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
465:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorators</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">NodeSet</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
466:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorate!</span>
467:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>