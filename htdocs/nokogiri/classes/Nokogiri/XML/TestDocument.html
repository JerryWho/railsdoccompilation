  <div id="C00000061">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestDocument<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/test_document_rb.html');">test/xml/test_document.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000706&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000708&name=awesome!" >awesome!</a></li>
  <li><a href="index.html?a=M000673&name=new" >new</a></li>
  <li><a href="index.html?a=M000643&name=new" >new</a></li>
  <li><a href="index.html?a=M000641&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000689&name=test_XML_function" >test_XML_function</a></li>
  <li><a href="index.html?a=M000670&name=test_XML_takes_block" >test_XML_takes_block</a></li>
  <li><a href="index.html?a=M000659&name=test_add_child_with_fragment" >test_add_child_with_fragment</a></li>
  <li><a href="index.html?a=M000660&name=test_add_child_with_multiple_roots" >test_add_child_with_multiple_roots</a></li>
  <li><a href="index.html?a=M000680&name=test_ancestors" >test_ancestors</a></li>
  <li><a href="index.html?a=M000653&name=test_attributes" >test_attributes</a></li>
  <li><a href="index.html?a=M000695&name=test_bad_xpath_raises_syntax_error" >test_bad_xpath_raises_syntax_error</a></li>
  <li><a href="index.html?a=M000665&name=test_clone" >test_clone</a></li>
  <li><a href="index.html?a=M000645&name=test_create_element" >test_create_element</a></li>
  <li><a href="index.html?a=M000651&name=test_create_external_subset" >test_create_external_subset</a></li>
  <li><a href="index.html?a=M000650&name=test_create_external_subset_fails_with_existing_subset" >test_create_external_subset_fails_with_existing_subset</a></li>
  <li><a href="index.html?a=M000648&name=test_create_internal_subset" >test_create_internal_subset</a></li>
  <li><a href="index.html?a=M000647&name=test_create_internal_subset_on_existing_subset" >test_create_internal_subset_on_existing_subset</a></li>
  <li><a href="index.html?a=M000644&name=test_create_text_node" >test_create_text_node</a></li>
  <li><a href="index.html?a=M000707&name=test_decorator_is_applied" >test_decorator_is_applied</a></li>
  <li><a href="index.html?a=M000698&name=test_document" >test_document</a></li>
  <li><a href="index.html?a=M000687&name=test_document_has_errors" >test_document_has_errors</a></li>
  <li><a href="index.html?a=M000692&name=test_document_name" >test_document_name</a></li>
  <li><a href="index.html?a=M000691&name=test_document_parent" >test_document_parent</a></li>
  <li><a href="index.html?a=M000676&name=test_document_parse_method" >test_document_parse_method</a></li>
  <li><a href="index.html?a=M000666&name=test_document_should_not_have_default_ns" >test_document_should_not_have_default_ns</a></li>
  <li><a href="index.html?a=M000703&name=test_dump" >test_dump</a></li>
  <li><a href="index.html?a=M000704&name=test_dup" >test_dup</a></li>
  <li><a href="index.html?a=M000657&name=test_empty_node_converted_to_html_is_not_self_closing" >test_empty_node_converted_to_html_is_not_self_closing</a></li>
  <li><a href="index.html?a=M000686&name=test_encoding" >test_encoding</a></li>
  <li><a href="index.html?a=M000677&name=test_encoding=" >test_encoding=</a></li>
  <li><a href="index.html?a=M000649&name=test_external_subset" >test_external_subset</a></li>
  <li><a href="index.html?a=M000696&name=test_find_with_namespace" >test_find_with_namespace</a></li>
  <li><a href="index.html?a=M000658&name=test_fragment" >test_fragment</a></li>
  <li><a href="index.html?a=M000656&name=test_line" >test_line</a></li>
  <li><a href="index.html?a=M000661&name=test_move_root_to_document_with_no_root" >test_move_root_to_document_with_no_root</a></li>
  <li><a href="index.html?a=M000662&name=test_move_root_with_existing_root_gets_gcd" >test_move_root_with_existing_root_gets_gcd</a></li>
  <li><a href="index.html?a=M000700&name=test_multiple_search" >test_multiple_search</a></li>
  <li><a href="index.html?a=M000654&name=test_namespace" >test_namespace</a></li>
  <li><a href="index.html?a=M000655&name=test_namespace_definitions" >test_namespace_definitions</a></li>
  <li><a href="index.html?a=M000678&name=test_namespace_should_not_exist" >test_namespace_should_not_exist</a></li>
  <li><a href="index.html?a=M000709&name=test_new" >test_new</a></li>
  <li><a href="index.html?a=M000701&name=test_node_set_index" >test_node_set_index</a></li>
  <li><a href="index.html?a=M000679&name=test_non_existant_function" >test_non_existant_function</a></li>
  <li><a href="index.html?a=M000693&name=test_parse_can_take_io" >test_parse_can_take_io</a></li>
  <li><a href="index.html?a=M000667&name=test_parse_handles_nil_gracefully" >test_parse_handles_nil_gracefully</a></li>
  <li><a href="index.html?a=M000668&name=test_parse_takes_block" >test_parse_takes_block</a></li>
  <li><a href="index.html?a=M000669&name=test_parse_yields_parse_options" >test_parse_yields_parse_options</a></li>
  <li><a href="index.html?a=M000646&name=test_pp" >test_pp</a></li>
  <li><a href="index.html?a=M000711&name=test_remove_namespaces" >test_remove_namespaces</a></li>
  <li><a href="index.html?a=M000681&name=test_root_node_parent_is_document" >test_root_node_parent_is_document</a></li>
  <li><a href="index.html?a=M000702&name=test_search" >test_search</a></li>
  <li><a href="index.html?a=M000694&name=test_search_on_empty_documents" >test_search_on_empty_documents</a></li>
  <li><a href="index.html?a=M000710&name=test_set_root" >test_set_root</a></li>
  <li><a href="index.html?a=M000699&name=test_singleton_methods" >test_singleton_methods</a></li>
  <li><a href="index.html?a=M000688&name=test_strict_document_throws_syntax_error" >test_strict_document_throws_syntax_error</a></li>
  <li><a href="index.html?a=M000671&name=test_subclass" >test_subclass</a></li>
  <li><a href="index.html?a=M000674&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M000672&name=test_subclass_initialize" >test_subclass_initialize</a></li>
  <li><a href="index.html?a=M000642&name=test_subclass_initialize_modify" >test_subclass_initialize_modify</a></li>
  <li><a href="index.html?a=M000675&name=test_subclass_parse" >test_subclass_parse</a></li>
  <li><a href="index.html?a=M000705&name=test_subset_is_decorated" >test_subset_is_decorated</a></li>
  <li><a href="index.html?a=M000684&name=test_to_xml_with_indent" >test_to_xml_with_indent</a></li>
  <li><a href="index.html?a=M000690&name=test_url" >test_url</a></li>
  <li><a href="index.html?a=M000663&name=test_validate" >test_validate</a></li>
  <li><a href="index.html?a=M000664&name=test_validate_no_internal_subset" >test_validate_no_internal_subset</a></li>
  <li><a href="index.html?a=M000652&name=test_version" >test_version</a></li>
  <li><a href="index.html?a=M000685&name=test_write_xml_to_with_indent" >test_write_xml_to_with_indent</a></li>
  <li><a href="index.html?a=M000697&name=test_xml?" >test_xml?</a></li>
  <li><a href="index.html?a=M000682&name=test_xmlns_is_automatically_registered" >test_xmlns_is_automatically_registered</a></li>
  <li><a href="index.html?a=M000683&name=test_xmlns_is_registered_for_nodesets" >test_xmlns_is_registered_for_nodesets</a></li>
  <li><a href="index.html?a=M000712&name=util_decorate" >util_decorate</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M000673" class="method">
  <div id="M000673_title" class="title">
    <b>new</b>(*args)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000673_source')" id="l_M000673_source">show source</a> ]</p>
  <div id="M000673_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 231</span>
231:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
232:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
233:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000643" class="method">
  <div id="M000643_title" class="title">
    <b>new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000643_source')" id="l_M000643_source">show source</a> ]</p>
  <div id="M000643_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 15</span>
15:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
16:             <span class="ruby-keyword kw">super</span>
17:             <span class="ruby-identifier">body_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;body&quot;</span>, <span class="ruby-keyword kw">self</span>
18:             <span class="ruby-identifier">body_node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">&quot;stuff&quot;</span>
19:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">body_node</span>
20:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000706" class="method">
  <div id="M000706_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000706_source')" id="l_M000706_source">show source</a> ]</p>
  <div id="M000706_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 523</span>
523:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
524:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000708" class="method">
  <div id="M000708_title" class="title">
    <b>awesome!</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000708_source')" id="l_M000708_source">show source</a> ]</p>
  <div id="M000708_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 539</span>
539:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
540:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000641" class="method">
  <div id="M000641_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000641_source')" id="l_M000641_source">show source</a> ]</p>
  <div id="M000641_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 8</span>
 8:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 9:         <span class="ruby-keyword kw">super</span>
10:         <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
11:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000689" class="method">
  <div id="M000689_title" class="title">
    <b>test_XML_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000689_source')" id="l_M000689_source">show source</a> ]</p>
  <div id="M000689_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 388</span>
388:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_XML_function</span>
389:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
390:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xml?</span>
391:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000670" class="method">
  <div id="M000670_title" class="title">
    <b>test_XML_takes_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000670_source')" id="l_M000670_source">show source</a> ]</p>
  <div id="M000670_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_XML_takes_block</span>
211:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
212:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
213:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
214:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
215:         <span class="ruby-keyword kw">end</span>
216:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
217:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
218:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
219:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000659" class="method">
  <div id="M000659_title" class="title">
    <b>test_add_child_with_fragment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000659_source')" id="l_M000659_source">show source</a> ]</p>
  <div id="M000659_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 133</span>
133:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_with_fragment</span>
134:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
135:         <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'&lt;hello /&gt;'</span>)
136:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">add_child</span> <span class="ruby-identifier">fragment</span>
137:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'/hello'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//hello'</span>).<span class="ruby-identifier">path</span>
138:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">name</span>
139:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000660" class="method">
  <div id="M000660_title" class="title">
    <b>test_add_child_with_multiple_roots</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000660_source')" id="l_M000660_source">show source</a> ]</p>
  <div id="M000660_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 141</span>
141:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_add_child_with_multiple_roots</span>
142:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
143:           <span class="ruby-ivar">@xml</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-ivar">@xml</span>)
144:         <span class="ruby-keyword kw">end</span>
145:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000680" class="method">
  <div id="M000680_title" class="title">
    <b>test_ancestors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000680_source')" id="l_M000680_source">show source</a> ]</p>
  <div id="M000680_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 286</span>
286:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ancestors</span>
287:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">ancestors</span>.<span class="ruby-identifier">length</span>
288:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000653" class="method">
  <div id="M000653_title" class="title">
    <b>test_attributes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000653_source')" id="l_M000653_source">show source</a> ]</p>
  <div id="M000653_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 99</span>
 99:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_attributes</span>
100:         <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
101:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">attributes</span>
102:         <span class="ruby-keyword kw">end</span>
103:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000695" class="method">
  <div id="M000695_title" class="title">
    <b>test_bad_xpath_raises_syntax_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000695_source')" id="l_M000695_source">show source</a> ]</p>
  <div id="M000695_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 432</span>
432:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bad_xpath_raises_syntax_error</span>
433:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
434:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'\\'</span>)
435:         }
436:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000665" class="method">
  <div id="M000665_title" class="title">
    <b>test_clone</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000665_source')" id="l_M000665_source">show source</a> ]</p>
  <div id="M000665_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 168</span>
168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_clone</span>
169:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">clone</span>
170:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000645" class="method">
  <div id="M000645_title" class="title">
    <b>test_create_element</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000645_source')" id="l_M000645_source">show source</a> ]</p>
  <div id="M000645_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 31</span>
31:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_element</span>
32:         <span class="ruby-identifier">elm</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">create_element</span>(<span class="ruby-value str">'foo'</span>)
33:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Element</span>, <span class="ruby-identifier">elm</span>
34:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">elm</span>.<span class="ruby-identifier">name</span>
35:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">elm</span>.<span class="ruby-identifier">document</span>
36:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000651" class="method">
  <div id="M000651_title" class="title">
    <b>test_create_external_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000651_source')" id="l_M000651_source">show source</a> ]</p>
  <div id="M000651_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 87</span>
87:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_external_subset</span>
88:         <span class="ruby-identifier">dtd</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">create_external_subset</span>(<span class="ruby-value str">'staff'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'staff.dtd'</span>)
89:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">dtd</span>.<span class="ruby-identifier">external_id</span>
90:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'staff.dtd'</span>, <span class="ruby-identifier">dtd</span>.<span class="ruby-identifier">system_id</span>
91:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'staff'</span>, <span class="ruby-identifier">dtd</span>.<span class="ruby-identifier">name</span>
92:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">dtd</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">external_subset</span>
93:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000650" class="method">
  <div id="M000650_title" class="title">
    <b>test_create_external_subset_fails_with_existing_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000650_source')" id="l_M000650_source">show source</a> ]</p>
  <div id="M000650_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 73</span>
73:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_external_subset_fails_with_existing_subset</span>
74:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">external_subset</span>
75:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-constant">ASSETS_DIR</span>) <span class="ruby-keyword kw">do</span>
76:           <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
77:             <span class="ruby-identifier">cfg</span>.<span class="ruby-identifier">dtdload</span>
78:           }
79:         <span class="ruby-keyword kw">end</span>
80:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">external_subset</span>
81: 
82:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
83:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">create_external_subset</span>(<span class="ruby-value str">'staff'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'staff.dtd'</span>)
84:         <span class="ruby-keyword kw">end</span>
85:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000648" class="method">
  <div id="M000648_title" class="title">
    <b>test_create_internal_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000648_source')" id="l_M000648_source">show source</a> ]</p>
  <div id="M000648_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 52</span>
52:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_internal_subset</span>
53:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root /&gt;'</span>)
54:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">internal_subset</span>
55: 
56:         <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">create_internal_subset</span>(<span class="ruby-value str">'name'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'staff.dtd'</span>)
57:         <span class="ruby-identifier">ss</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">internal_subset</span>
58:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'name'</span>, <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">name</span>
59:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">external_id</span>
60:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'staff.dtd'</span>, <span class="ruby-identifier">ss</span>.<span class="ruby-identifier">system_id</span>
61:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000647" class="method">
  <div id="M000647_title" class="title">
    <b>test_create_internal_subset_on_existing_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000647_source')" id="l_M000647_source">show source</a> ]</p>
  <div id="M000647_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 45</span>
45:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_internal_subset_on_existing_subset</span>
46:         <span class="ruby-identifier">assert_not_nil</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">internal_subset</span>
47:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
48:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">create_internal_subset</span>(<span class="ruby-value str">'staff'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'staff.dtd'</span>)
49:         <span class="ruby-keyword kw">end</span>
50:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000644" class="method">
  <div id="M000644_title" class="title">
    <b>test_create_text_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000644_source')" id="l_M000644_source">show source</a> ]</p>
  <div id="M000644_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 24</span>
24:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_create_text_node</span>
25:         <span class="ruby-identifier">txt</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">create_text_node</span> <span class="ruby-value str">'foo'</span>
26:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Text</span>, <span class="ruby-identifier">txt</span>
27:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">text</span>
28:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">txt</span>.<span class="ruby-identifier">document</span>
29:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000707" class="method">
  <div id="M000707_title" class="title">
    <b>test_decorator_is_applied</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000707_source')" id="l_M000707_source">show source</a> ]</p>
  <div id="M000707_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 537</span>
537:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_decorator_is_applied</span>
538:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
539:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
540:           <span class="ruby-keyword kw">end</span>
541:         <span class="ruby-keyword kw">end</span>
542:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
543: 
544:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
545:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
546:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
547:         <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
548:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>), <span class="ruby-identifier">node</span>.<span class="ruby-identifier">class</span>
549:         <span class="ruby-keyword kw">end</span>
550:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
551:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000698" class="method">
  <div id="M000698_title" class="title">
    <b>test_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000698_source')" id="l_M000698_source">show source</a> ]</p>
  <div id="M000698_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 470</span>
470:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document</span>
471:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">document</span>
472:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000687" class="method">
  <div id="M000687_title" class="title">
    <b>test_document_has_errors</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000687_source')" id="l_M000687_source">show source</a> ]</p>
  <div id="M000687_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 358</span>
358:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_has_errors</span>
359:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;\n&quot;</span>)
360:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
361:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span>
362:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">error</span>.<span class="ruby-identifier">inspect</span>
363:           <span class="ruby-identifier">assert_match</span> <span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>, <span class="ruby-identifier">error</span>.<span class="ruby-identifier">to_s</span>
364:         <span class="ruby-keyword kw">end</span>
365:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000692" class="method">
  <div id="M000692_title" class="title">
    <b>test_document_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000692_source')" id="l_M000692_source">show source</a> ]</p>
  <div id="M000692_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 405</span>
405:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_name</span>
406:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
407:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'document'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">name</span>
408:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000691" class="method">
  <div id="M000691_title" class="title">
    <b>test_document_parent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000691_source')" id="l_M000691_source">show source</a> ]</p>
  <div id="M000691_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 398</span>
398:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parent</span>
399:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>)
400:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
401:           <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">parent</span>
402:         }
403:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000676" class="method">
  <div id="M000676_title" class="title">
    <b>test_document_parse_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000676_source')" id="l_M000676_source">show source</a> ]</p>
  <div id="M000676_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 252</span>
252:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parse_method</span>
253:         <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
254:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">to_s</span>
255:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000666" class="method">
  <div id="M000666_title" class="title">
    <b>test_document_should_not_have_default_ns</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000666_source')" id="l_M000666_source">show source</a> ]</p>
  <div id="M000666_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 172</span>
172:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_should_not_have_default_ns</span>
173:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
174: 
175:         <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
176:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">default_namespace</span> = <span class="ruby-value str">'http://innernet.com/'</span>
177:         <span class="ruby-keyword kw">end</span>
178: 
179:         <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
180:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">add_namespace_definition</span>(<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'bar'</span>)
181:         <span class="ruby-keyword kw">end</span>
182:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000703" class="method">
  <div id="M000703_title" class="title">
    <b>test_dump</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000703_source')" id="l_M000703_source">show source</a> ]</p>
  <div id="M000703_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 510</span>
510:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dump</span>
511:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">serialize</span>
512:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
513:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000704" class="method">
  <div id="M000704_title" class="title">
    <b>test_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000704_source')" id="l_M000704_source">show source</a> ]</p>
  <div id="M000704_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 515</span>
515:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup</span>
516:         <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">dup</span>
517:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">dup</span>
518:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">xml?</span>, <span class="ruby-value str">'duplicate should be xml'</span>
519:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000657" class="method">
  <div id="M000657_title" class="title">
    <b>test_empty_node_converted_to_html_is_not_self_closing</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000657_source')" id="l_M000657_source">show source</a> ]</p>
  <div id="M000657_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 123</span>
123:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_node_converted_to_html_is_not_self_closing</span>
124:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;a&gt;&lt;/a&gt;'</span>)
125:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;a&gt;&lt;/a&gt;&quot;</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">inner_html</span>
126:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000686" class="method">
  <div id="M000686_title" class="title">
    <b>test_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000686_source')" id="l_M000686_source">show source</a> ]</p>
  <div id="M000686_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 352</span>
352:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encoding</span>
353:           <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'UTF-8'</span>)
354:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">encoding</span>
355:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000677" class="method">
  <div id="M000677_title" class="title">
    <b>test_encoding=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000677_source')" id="l_M000677_source">show source</a> ]</p>
  <div id="M000677_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 257</span>
257:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_encoding=</span>
258:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-value str">'UTF-8'</span>
259:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
260: 
261:         <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">encoding</span> = <span class="ruby-value str">'EUC-JP'</span>
262:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'EUC-JP'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_xml</span>
263:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000649" class="method">
  <div id="M000649_title" class="title">
    <b>test_external_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000649_source')" id="l_M000649_source">show source</a> ]</p>
  <div id="M000649_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 63</span>
63:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_external_subset</span>
64:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">external_subset</span>
65:         <span class="ruby-constant">Dir</span>.<span class="ruby-identifier">chdir</span>(<span class="ruby-constant">ASSETS_DIR</span>) <span class="ruby-keyword kw">do</span>
66:           <span class="ruby-ivar">@xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
67:             <span class="ruby-identifier">cfg</span>.<span class="ruby-identifier">dtdload</span>
68:           }
69:         <span class="ruby-keyword kw">end</span>
70:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">external_subset</span>
71:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000696" class="method">
  <div id="M000696_title" class="title">
    <b>test_find_with_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000696_source')" id="l_M000696_source">show source</a> ]</p>
  <div id="M000696_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 438</span>
438:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_namespace</span>
439:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;x xmlns:tenderlove='http://tenderlovemaking.com/'&gt;\n&lt;tenderlove:foo awesome='true'&gt;snuggles!&lt;/tenderlove:foo&gt;\n&lt;/x&gt;\n&quot;</span>)
440: 
441:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
442:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'tenderlove'</span>, <span class="ruby-value str">'http://tenderlovemaking.com/'</span>
443:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//tenderlove:foo'</span>).<span class="ruby-identifier">node_set</span>
444:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
445:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
446: 
447:         <span class="ruby-comment cmt"># It looks like only the URI is important:</span>
448:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
449:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'america'</span>, <span class="ruby-value str">'http://tenderlovemaking.com/'</span>
450:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//america:foo'</span>).<span class="ruby-identifier">node_set</span>
451:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
452:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">name</span>
453: 
454:         <span class="ruby-comment cmt"># Its so important that a missing slash will cause it to return nothing</span>
455:         <span class="ruby-identifier">ctx</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPathContext</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">doc</span>)
456:         <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">register_ns</span> <span class="ruby-value str">'america'</span>, <span class="ruby-value str">'http://tenderlovemaking.com'</span>
457:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">evaluate</span>(<span class="ruby-value str">'//america:foo'</span>).<span class="ruby-identifier">node_set</span>
458:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>
459:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000658" class="method">
  <div id="M000658_title" class="title">
    <b>test_fragment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000658_source')" id="l_M000658_source">show source</a> ]</p>
  <div id="M000658_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 128</span>
128:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment</span>
129:         <span class="ruby-identifier">fragment</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">fragment</span>
130:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
131:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000656" class="method">
  <div id="M000656_title" class="title">
    <b>test_line</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000656_source')" id="l_M000656_source">show source</a> ]</p>
  <div id="M000656_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 117</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_line</span>
118:         <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
119:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">line</span>
120:         <span class="ruby-keyword kw">end</span>
121:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000661" class="method">
  <div id="M000661_title" class="title">
    <b>test_move_root_to_document_with_no_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000661_source')" id="l_M000661_source">show source</a> ]</p>
  <div id="M000661_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 147</span>
147:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_move_root_to_document_with_no_root</span>
148:         <span class="ruby-identifier">sender</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;foo&lt;/root&gt;'</span>)
149:         <span class="ruby-identifier">newdoc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
150:         <span class="ruby-identifier">newdoc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">sender</span>.<span class="ruby-identifier">root</span>
151:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000662" class="method">
  <div id="M000662_title" class="title">
    <b>test_move_root_with_existing_root_gets_gcd</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000662_source')" id="l_M000662_source">show source</a> ]</p>
  <div id="M000662_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 153</span>
153:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_move_root_with_existing_root_gets_gcd</span>
154:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;test&lt;/root&gt;'</span>)
155:         <span class="ruby-identifier">doc2</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-node">&quot;&lt;root&gt;#{'x' * 5000000}&lt;/root&gt;&quot;</span>)
156:         <span class="ruby-identifier">doc2</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
157:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000700" class="method">
  <div id="M000700_title" class="title">
    <b>test_multiple_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000700_source')" id="l_M000700_source">show source</a> ]</p>
  <div id="M000700_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 485</span>
485:       <span class="ruby-keyword kw">def</span>  <span class="ruby-identifier">test_multiple_search</span><span class="ruby-identifier">test_multiple_search</span>
486:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>, <span class="ruby-value str">'//name'</span>)
487:         <span class="ruby-identifier">employees</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
488:         <span class="ruby-identifier">names</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
489:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">employees</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">names</span>.<span class="ruby-identifier">length</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
490:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000654" class="method">
  <div id="M000654_title" class="title">
    <b>test_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000654_source')" id="l_M000654_source">show source</a> ]</p>
  <div id="M000654_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 105</span>
105:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace</span>
106:         <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
107:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">namespace</span>
108:         <span class="ruby-keyword kw">end</span>
109:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000655" class="method">
  <div id="M000655_title" class="title">
    <b>test_namespace_definitions</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000655_source')" id="l_M000655_source">show source</a> ]</p>
  <div id="M000655_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 111</span>
111:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_definitions</span>
112:         <span class="ruby-identifier">assert_raise</span> <span class="ruby-constant">NoMethodError</span> <span class="ruby-keyword kw">do</span>
113:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">namespace_definitions</span>
114:         <span class="ruby-keyword kw">end</span>
115:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000678" class="method">
  <div id="M000678_title" class="title">
    <b>test_namespace_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000678_source')" id="l_M000678_source">show source</a> ]</p>
  <div id="M000678_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 265</span>
265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_should_not_exist</span>
266:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
267:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">namespace</span>
268:         }
269:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000709" class="method">
  <div id="M000709_title" class="title">
    <b>test_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000709_source')" id="l_M000709_source">show source</a> ]</p>
  <div id="M000709_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 553</span>
553:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new</span>
554:         <span class="ruby-identifier">doc</span> = <span class="ruby-keyword kw">nil</span>
555:         <span class="ruby-identifier">assert_nothing_raised</span> {
556:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
557:         }
558:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>
559:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xml?</span>
560:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
561:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000701" class="method">
  <div id="M000701_title" class="title">
    <b>test_node_set_index</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000701_source')" id="l_M000701_source">show source</a> ]</p>
  <div id="M000701_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 492</span>
492:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_node_set_index</span>
493:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
494: 
495:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">5</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
496:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>[<span class="ruby-value">4</span>]
497:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">node_set</span>[<span class="ruby-value">5</span>]
498:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000679" class="method">
  <div id="M000679_title" class="title">
    <b>test_non_existant_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000679_source')" id="l_M000679_source">show source</a> ]</p>
  <div id="M000679_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 271</span>
271:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_non_existant_function</span>
272:         <span class="ruby-comment cmt"># WTF.  I don't know why this is different between MRI and ffi.</span>
273:         <span class="ruby-comment cmt"># They should be the same...  Either way, raising an exception</span>
274:         <span class="ruby-comment cmt"># is the correct thing to do.</span>
275:         <span class="ruby-identifier">exception</span> = <span class="ruby-constant">RuntimeError</span>
276: 
277:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION_INFO</span>[<span class="ruby-value str">'libxml'</span>][<span class="ruby-value str">'platform'</span>] <span class="ruby-operator">==</span> <span class="ruby-value str">'jruby'</span>
278:           <span class="ruby-identifier">exception</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">XPath</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>
279:         <span class="ruby-keyword kw">end</span>
280: 
281:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-identifier">exception</span>) {
282:           <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//name[foo()]'</span>)
283:         }
284:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000693" class="method">
  <div id="M000693_title" class="title">
    <b>test_parse_can_take_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000693_source')" id="l_M000693_source">show source</a> ]</p>
  <div id="M000693_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 410</span>
410:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_can_take_io</span>
411:         <span class="ruby-identifier">xml</span> = <span class="ruby-keyword kw">nil</span>
412:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
413:           <span class="ruby-identifier">xml</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">f</span>)
414:         }
415:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">xml?</span>
416:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
417:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
418:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000667" class="method">
  <div id="M000667_title" class="title">
    <b>test_parse_handles_nil_gracefully</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000667_source')" id="l_M000667_source">show source</a> ]</p>
  <div id="M000667_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 184</span>
184:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_handles_nil_gracefully</span>
185:         <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
186:           <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-keyword kw">nil</span>)
187:         <span class="ruby-keyword kw">end</span>
188:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-ivar">@doc</span>
189:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000668" class="method">
  <div id="M000668_title" class="title">
    <b>test_parse_takes_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000668_source')" id="l_M000668_source">show source</a> ]</p>
  <div id="M000668_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 191</span>
191:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_takes_block</span>
192:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
193:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
194:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
195:         <span class="ruby-keyword kw">end</span>
196:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>
197:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000669" class="method">
  <div id="M000669_title" class="title">
    <b>test_parse_yields_parse_options</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000669_source')" id="l_M000669_source">show source</a> ]</p>
  <div id="M000669_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 199</span>
199:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_yields_parse_options</span>
200:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
201:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>), <span class="ruby-constant">XML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
202:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
203:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
204:         <span class="ruby-keyword kw">end</span>
205:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
206:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
207:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
208:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000646" class="method">
  <div id="M000646_title" class="title">
    <b>test_pp</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000646_source')" id="l_M000646_source">show source</a> ]</p>
  <div id="M000646_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 38</span>
38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_pp</span>
39:         <span class="ruby-identifier">out</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">''</span>)
40:         <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
41:           <span class="ruby-operator">::</span><span class="ruby-constant">PP</span>.<span class="ruby-identifier">pp</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">out</span>
42:         <span class="ruby-keyword kw">end</span>
43:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000711" class="method">
  <div id="M000711_title" class="title">
    <b>test_remove_namespaces</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000711_source')" id="l_M000711_source">show source</a> ]</p>
  <div id="M000711_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 579</span>
579:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_remove_namespaces</span>
580:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span> <span class="ruby-value str">&quot;&lt;root xmlns:a=\&quot;http://a.flavorjon.es/\&quot; xmlns:b=\&quot;http://b.flavorjon.es/\&quot;&gt;\n&lt;a:foo&gt;hello from a&lt;/a:foo&gt;\n&lt;b:foo&gt;hello from b&lt;/b:foo&gt;\n&lt;container xmlns:c=\&quot;http://c.flavorjon.es/\&quot;&gt;\n&lt;c:foo&gt;hello from c&lt;/c:foo&gt;\n&lt;/container&gt;\n&lt;/root&gt;\n&quot;</span>
581: 
582:         <span class="ruby-comment cmt"># assert on setup</span>
583:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//foo&quot;</span>).<span class="ruby-identifier">length</span>
584:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//a:foo&quot;</span>).<span class="ruby-identifier">length</span>
585:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//a:foo&quot;</span>).<span class="ruby-identifier">length</span>
586:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//x:foo&quot;</span>, <span class="ruby-value str">&quot;x&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://c.flavorjon.es/&quot;</span>).<span class="ruby-identifier">length</span>
587: 
588:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">remove_namespaces!</span>
589: 
590:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//foo&quot;</span>).<span class="ruby-identifier">length</span>
591:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//a:foo&quot;</span>).<span class="ruby-identifier">length</span>
592:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//a:foo&quot;</span>).<span class="ruby-identifier">length</span>
593:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">&quot;//x:foo&quot;</span>, <span class="ruby-value str">&quot;x&quot;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">&quot;http://c.flavorjon.es/&quot;</span>).<span class="ruby-identifier">length</span>
594:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000681" class="method">
  <div id="M000681_title" class="title">
    <b>test_root_node_parent_is_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000681_source')" id="l_M000681_source">show source</a> ]</p>
  <div id="M000681_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 290</span>
290:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_node_parent_is_document</span>
291:         <span class="ruby-identifier">parent</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parent</span>
292:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">parent</span>
293:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">parent</span>
294:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000702" class="method">
  <div id="M000702_title" class="title">
    <b>test_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000702_source')" id="l_M000702_source">show source</a> ]</p>
  <div id="M000702_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 500</span>
500:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search</span>
501:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//employee'</span>)
502: 
503:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">5</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span>)
504: 
505:         <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">node</span><span class="ruby-operator">|</span>
506:           <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'employee'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">name</span>)
507:         <span class="ruby-keyword kw">end</span>
508:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000694" class="method">
  <div id="M000694_title" class="title">
    <b>test_search_on_empty_documents</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000694_source')" id="l_M000694_source">show source</a> ]</p>
  <div id="M000694_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 420</span>
420:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_on_empty_documents</span>
421:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
422:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//foo'</span>)
423:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
424: 
425:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>)
426:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
427: 
428:         <span class="ruby-identifier">ns</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//foo'</span>)
429:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">length</span>
430:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000710" class="method">
  <div id="M000710_title" class="title">
    <b>test_set_root</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000710_source')" id="l_M000710_source">show source</a> ]</p>
  <div id="M000710_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 563</span>
563:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_set_root</span>
564:         <span class="ruby-identifier">doc</span> = <span class="ruby-keyword kw">nil</span>
565:         <span class="ruby-identifier">assert_nothing_raised</span> {
566:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
567:         }
568:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>
569:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xml?</span>
570:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
571:         <span class="ruby-identifier">node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;b&quot;</span>, <span class="ruby-identifier">doc</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">n</span><span class="ruby-operator">|</span>
572:           <span class="ruby-identifier">n</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">'hello world'</span>
573:         }
574:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'hello world'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">content</span>)
575:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">node</span>
576:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-identifier">node</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>)
577:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000699" class="method">
  <div id="M000699_title" class="title">
    <b>test_singleton_methods</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000699_source')" id="l_M000699_source">show source</a> ]</p>
  <div id="M000699_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 474</span>
474:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_singleton_methods</span>
475:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
476:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
477:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">first</span>
478:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">node</span>.<span class="ruby-identifier">test</span>
479:           <span class="ruby-value str">'test'</span>
480:         <span class="ruby-keyword kw">end</span>
481:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//name'</span>)
482:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'test'</span>, <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">test</span>
483:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000688" class="method">
  <div id="M000688_title" class="title">
    <b>test_strict_document_throws_syntax_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000688_source')" id="l_M000688_source">show source</a> ]</p>
  <div id="M000688_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 370</span>
370:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_strict_document_throws_syntax_error</span>
371:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
372:           <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">0</span>)
373:         }
374: 
375:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
376:           <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
377:             <span class="ruby-identifier">cfg</span>.<span class="ruby-identifier">strict</span>
378:           }
379:         }
380: 
381:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SyntaxError</span>) {
382:           <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>)) { <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
383:             <span class="ruby-identifier">cfg</span>.<span class="ruby-identifier">strict</span>
384:           }
385:         }
386:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000671" class="method">
  <div id="M000671_title" class="title">
    <b>test_subclass</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000671_source')" id="l_M000671_source">show source</a> ]</p>
  <div id="M000671_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 221</span>
221:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass</span>
222:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
223:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
224:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
225:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000674" class="method">
  <div id="M000674_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000674_source')" id="l_M000674_source">show source</a> ]</p>
  <div id="M000674_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 239</span>
239:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
240:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
241:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">dup</span>
242:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
243:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000672" class="method">
  <div id="M000672_title" class="title">
    <b>test_subclass_initialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000672_source')" id="l_M000672_source">show source</a> ]</p>
  <div id="M000672_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_initialize</span>
228:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>) <span class="ruby-keyword kw">do</span>
229:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:initialized_with</span>
230: 
231:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
232:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
233:           <span class="ruby-keyword kw">end</span>
234:         <span class="ruby-keyword kw">end</span>
235:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;1.0&quot;</span>, <span class="ruby-value">1</span>)
236:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;1.0&quot;</span>, <span class="ruby-value">1</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">initialized_with</span>
237:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000642" class="method">
  <div id="M000642_title" class="title">
    <b>test_subclass_initialize_modify</b>(
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000642_source')" id="l_M000642_source">show source</a> ]</p>
  <div id="M000642_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 13</span>
13:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_initialize_modify</span> <span class="ruby-comment cmt"># testing a segv</span>
14:         <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>) {
15:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>
16:             <span class="ruby-keyword kw">super</span>
17:             <span class="ruby-identifier">body_node</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>.<span class="ruby-identifier">new</span> <span class="ruby-value str">&quot;body&quot;</span>, <span class="ruby-keyword kw">self</span>
18:             <span class="ruby-identifier">body_node</span>.<span class="ruby-identifier">content</span> = <span class="ruby-value str">&quot;stuff&quot;</span>
19:             <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">root</span> = <span class="ruby-identifier">body_node</span>
20:           <span class="ruby-keyword kw">end</span>
21:         }.<span class="ruby-identifier">new</span>
22:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000675" class="method">
  <div id="M000675_title" class="title">
    <b>test_subclass_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000675_source')" id="l_M000675_source">show source</a> ]</p>
  <div id="M000675_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 245</span>
245:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_parse</span>
246:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
247:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
248:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_s</span>
249:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
250:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000705" class="method">
  <div id="M000705_title" class="title">
    <b>test_subset_is_decorated</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000705_source')" id="l_M000705_source">show source</a> ]</p>
  <div id="M000705_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 521</span>
521:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subset_is_decorated</span>
522:         <span class="ruby-identifier">x</span> = <span class="ruby-constant">Module</span>.<span class="ruby-identifier">new</span> <span class="ruby-keyword kw">do</span>
523:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome!</span>
524:           <span class="ruby-keyword kw">end</span>
525:         <span class="ruby-keyword kw">end</span>
526:         <span class="ruby-identifier">util_decorate</span>(<span class="ruby-ivar">@xml</span>, <span class="ruby-identifier">x</span>)
527: 
528:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
529:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span> = <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//staff'</span>)
530:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
531:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">subset</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'.//employee'</span>)
532:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">subset</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
533:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sub_subset</span> = <span class="ruby-identifier">node_set</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'.//name'</span>)
534:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">sub_subset</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:awesome!</span>)
535:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000684" class="method">
  <div id="M000684_title" class="title">
    <b>test_to_xml_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000684_source')" id="l_M000684_source">show source</a> ]</p>
  <div id="M000684_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 334</span>
334:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml_with_indent</span>
335:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/root&gt;'</span>)
336:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_xml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>))
337: 
338:         <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
339:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000690" class="method">
  <div id="M000690_title" class="title">
    <b>test_url</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000690_source')" id="l_M000690_source">show source</a> ]</p>
  <div id="M000690_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 393</span>
393:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_url</span>
394:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">url</span>
395:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-constant">XML_FILE</span>, <span class="ruby-constant">URI</span>.<span class="ruby-identifier">unescape</span>(<span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">url</span>).<span class="ruby-identifier">sub</span>(<span class="ruby-value str">'file:///'</span>, <span class="ruby-value str">''</span>)
396:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000663" class="method">
  <div id="M000663_title" class="title">
    <b>test_validate</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000663_source')" id="l_M000663_source">show source</a> ]</p>
  <div id="M000663_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 159</span>
159:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_validate</span>
160:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">44</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">validate</span>.<span class="ruby-identifier">length</span>
161:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000664" class="method">
  <div id="M000664_title" class="title">
    <b>test_validate_no_internal_subset</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000664_source')" id="l_M000664_source">show source</a> ]</p>
  <div id="M000664_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 163</span>
163:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_validate_no_internal_subset</span>
164:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;test/&gt;'</span>)
165:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">validate</span>
166:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000652" class="method">
  <div id="M000652_title" class="title">
    <b>test_version</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000652_source')" id="l_M000652_source">show source</a> ]</p>
  <div id="M000652_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 95</span>
95:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_version</span>
96:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'1.0'</span>, <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">version</span>
97:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000685" class="method">
  <div id="M000685_title" class="title">
    <b>test_write_xml_to_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000685_source')" id="l_M000685_source">show source</a> ]</p>
  <div id="M000685_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 341</span>
341:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_xml_to_with_indent</span>
342:         <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
343:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;root&gt;&lt;foo&gt;&lt;bar/&gt;&lt;/foo&gt;&lt;/root&gt;'</span>)
344:         <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">write_xml_to</span> <span class="ruby-identifier">io</span>, <span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
345:         <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
346:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>)
347:         <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
348:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000697" class="method">
  <div id="M000697_title" class="title">
    <b>test_xml?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000697_source')" id="l_M000697_source">show source</a> ]</p>
  <div id="M000697_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 466</span>
466:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml?</span>
467:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@xml</span>.<span class="ruby-identifier">xml?</span>
468:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000682" class="method">
  <div id="M000682_title" class="title">
    <b>test_xmlns_is_automatically_registered</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000682_source')" id="l_M000682_source">show source</a> ]</p>
  <div id="M000682_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 296</span>
296:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xmlns_is_automatically_registered</span>
297:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot;&gt;\n&lt;foo&gt;\nbar\n&lt;/foo&gt;\n&lt;/root&gt;\n&quot;</span>)
298:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">length</span>
299:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">length</span>
300:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'|foo'</span>).<span class="ruby-identifier">length</span>
301:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">length</span>
302:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">length</span>
303:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">length</span>
304:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'xmlns|foo'</span>)
305:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'//xmlns:foo'</span>)
306:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'foo'</span>)
307:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000683" class="method">
  <div id="M000683_title" class="title">
    <b>test_xmlns_is_registered_for_nodesets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000683_source')" id="l_M000683_source">show source</a> ]</p>
  <div id="M000683_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 316</span>
316:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xmlns_is_registered_for_nodesets</span>
317:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">&quot;&lt;root xmlns=\&quot;http://tenderlovemaking.com/\&quot;&gt;\n&lt;foo&gt;\n&lt;bar&gt;\nbaz\n&lt;/bar&gt;\n&lt;/foo&gt;\n&lt;/root&gt;\n&quot;</span>)
318:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'xmlns|bar'</span>).<span class="ruby-identifier">length</span>
319:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'foo'</span>).<span class="ruby-identifier">css</span>(<span class="ruby-value str">'bar'</span>).<span class="ruby-identifier">length</span>
320:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'./xmlns:bar'</span>).<span class="ruby-identifier">length</span>
321:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|foo'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'xmlns|bar'</span>).<span class="ruby-identifier">length</span>
322:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//xmlns:foo'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'./xmlns:bar'</span>).<span class="ruby-identifier">length</span>
323:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000712" class="method">
  <div id="M000712_title" class="title">
    <b>util_decorate</b>(document, x)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000712_source')" id="l_M000712_source">show source</a> ]</p>
  <div id="M000712_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/test_document.rb, line 605</span>
605:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">util_decorate</span>(<span class="ruby-identifier">document</span>, <span class="ruby-identifier">x</span>)
606:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorators</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">Node</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
607:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorators</span>(<span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">NodeSet</span>) <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">x</span>
608:         <span class="ruby-identifier">document</span>.<span class="ruby-identifier">decorate!</span>
609:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>