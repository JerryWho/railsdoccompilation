  <div id="C00000018">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />ParserContext<br/>
  In:
<a href="#" onclick="jsHref('files/ext/nokogiri/html_sax_parser_context_c.html');">ext/nokogiri/html_sax_parser_context.c</a>
<a href="#" onclick="jsHref('files/lib/nokogiri/xml/sax/parser_context_rb.html');">lib/nokogiri/xml/sax/parser_context.rb</a>

Parent:&nbsp;
Object
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">

  <div class="description"><p>
Context for <a href="index.html?a=C00000009&name=XML">XML</a> <a
href="index.html?a=C00000013&name=SAX">SAX</a> parsers. This class is
usually not instantiated by the user. Instead, you should be looking at <a
href="index.html?a=C00000014&name=Nokogiri::XML::SAX::Parser">Nokogiri::XML::SAX::Parser</a>
</p>
</div>



  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000103&name=file" >file</a></li>
  <li><a href="index.html?a=M000101&name=io" >io</a></li>
  <li><a href="index.html?a=M000102&name=memory" >memory</a></li>
  <li><a href="index.html?a=M000107&name=new" >new</a></li>
  <li><a href="index.html?a=M000104&name=parse_with" >parse_with</a></li>
  <li><a href="index.html?a=M000106&name=replace_entities" >replace_entities</a></li>
  <li><a href="index.html?a=M000105&name=replace_entities=" >replace_entities=</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M000103" class="method">
  <div id="M000103_title" class="title">
    <b>parse_file(filename)<br />
</b>
  </div>
  <div class="description">
  <p>
Parse file given <tt>filename</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000103_source')" id="l_M000103_source">show source</a> ]</p>
  <div id="M000103_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  parse_file(filename)
 *
 * Parse file given +filename+
 */
static VALUE parse_file(VALUE klass, VALUE filename)
{
  xmlParserCtxtPtr ctxt = xmlCreateFileParserCtxt(StringValuePtr(filename));
  return Data_Wrap_Struct(klass, NULL, deallocate, ctxt);
}
</pre>
  </div>
</div>
</div>
<div id="M000101" class="method">
  <div id="M000101_title" class="title">
    <b>parse_io(io, encoding)<br />
</b>
  </div>
  <div class="description">
  <p>
Parse <tt>io</tt> object with <tt>encoding</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000101_source')" id="l_M000101_source">show source</a> ]</p>
  <div id="M000101_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  parse_io(io, encoding)
 *
 * Parse +io+ object with +encoding+
 */
static VALUE parse_io(VALUE klass, VALUE io, VALUE encoding)
{
  xmlCharEncoding enc = (xmlCharEncoding)NUM2INT(encoding); 

  xmlParserCtxtPtr ctxt = xmlCreateIOParserCtxt(
      NULL,
      NULL,
      (xmlInputReadCallback)io_read_callback,
      (xmlInputCloseCallback)io_close_callback,
      (void *)io,
      enc
  );

  return Data_Wrap_Struct(klass, NULL, deallocate, ctxt);
}
</pre>
  </div>
</div>
</div>
<div id="M000102" class="method">
  <div id="M000102_title" class="title">
    <b>parse_memory(data)<br />
</b>
  </div>
  <div class="description">
  <p>
Parse the <a href="index.html?a=C00000009&name=XML">XML</a> stored in
memory in <tt>data</tt>
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000102_source')" id="l_M000102_source">show source</a> ]</p>
  <div id="M000102_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  parse_memory(data)
 *
 * Parse the XML stored in memory in +data+
 */
static VALUE parse_memory(VALUE klass, VALUE data)
{
  if(NIL_P(data)) rb_raise(rb_eArgError, &quot;data cannot be nil&quot;);
  if(!(int)RSTRING_LEN(data))
    rb_raise(rb_eRuntimeError, &quot;data cannot be empty&quot;);

  xmlParserCtxtPtr ctxt = xmlCreateMemoryParserCtxt(
      StringValuePtr(data),
      (int)RSTRING_LEN(data)
  );

  return Data_Wrap_Struct(klass, NULL, deallocate, ctxt);
}
</pre>
  </div>
</div>
</div>
<div id="M000107" class="method">
  <div id="M000107_title" class="title">
    <b>new</b>(thing, encoding = 'UTF-8')
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000107_source')" id="l_M000107_source">show source</a> ]</p>
  <div id="M000107_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File lib/nokogiri/xml/sax/parser_context.rb, line 9</span>
 9:         <span class="ruby-keyword kw">def</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">thing</span>, <span class="ruby-identifier">encoding</span> = <span class="ruby-value str">'UTF-8'</span>
10:           [<span class="ruby-identifier">:read</span>, <span class="ruby-identifier">:close</span>].<span class="ruby-identifier">all?</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">x</span>) } <span class="ruby-operator">?</span>
11:             <span class="ruby-identifier">io</span>(<span class="ruby-identifier">thing</span>, <span class="ruby-constant">Parser</span><span class="ruby-operator">::</span><span class="ruby-constant">ENCODINGS</span>[<span class="ruby-identifier">encoding</span>]) <span class="ruby-operator">:</span> <span class="ruby-identifier">memory</span>(<span class="ruby-identifier">thing</span>)
12:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000104" class="method">
  <div id="M000104_title" class="title">
    <b>parse_with(sax_handler)<br />
</b>
  </div>
  <div class="description">
  <p>
Use <tt>sax_handler</tt> and parse the current document
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000104_source')" id="l_M000104_source">show source</a> ]</p>
  <div id="M000104_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  parse_with(sax_handler)
 *
 * Use +sax_handler+ and parse the current document
 */
static VALUE parse_with(VALUE self, VALUE sax_handler)
{
  if(!rb_obj_is_kind_of(sax_handler, cNokogiriXmlSaxParser))
    rb_raise(rb_eArgError, &quot;argument must be a Nokogiri::XML::SAX::Parser&quot;);

  xmlParserCtxtPtr ctxt;
  Data_Get_Struct(self, xmlParserCtxt, ctxt);

  xmlSAXHandlerPtr sax;
  Data_Get_Struct(sax_handler, xmlSAXHandler, sax);

  // Free the sax handler since we'll assign our own
  if(ctxt-&gt;sax &amp;&amp; ctxt-&gt;sax != (xmlSAXHandlerPtr)&amp;xmlDefaultSAXHandler)
    xmlFree(ctxt-&gt;sax);

  ctxt-&gt;sax = sax;
  ctxt-&gt;userData = (void *)NOKOGIRI_SAX_TUPLE_NEW(ctxt, sax_handler);

  xmlParseDocument(ctxt);

  if(NULL != ctxt-&gt;myDoc) xmlFreeDoc(ctxt-&gt;myDoc);

  NOKOGIRI_SAX_TUPLE_DESTROY(ctxt-&gt;userData);
}
</pre>
  </div>
</div>
</div>
<div id="M000106" class="method">
  <div id="M000106_title" class="title">
    <b>replace_entities<br />
</b>
  </div>
  <div class="description">
  <p>
Should this parser replace entities? &amp;amp; will get converted to
&#8217;&amp;&#8217; if set to true
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000106_source')" id="l_M000106_source">show source</a> ]</p>
  <div id="M000106_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  replace_entities
 *
 * Should this parser replace entities?  &amp;amp; will get converted to '&amp;' if
 * set to true
 */
static VALUE get_replace_entities(VALUE self)
{
  xmlParserCtxtPtr ctxt;
  Data_Get_Struct(self, xmlParserCtxt, ctxt);

  if(0 == ctxt-&gt;replaceEntities)
    return Qfalse;
  else
    return Qtrue;
}
</pre>
  </div>
</div>
</div>
<div id="M000105" class="method">
  <div id="M000105_title" class="title">
    <b>replace_entities=(boolean)<br />
</b>
  </div>
  <div class="description">
  <p>
Should this parser replace entities? &amp;amp; will get converted to
&#8217;&amp;&#8217; if set to true
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000105_source')" id="l_M000105_source">show source</a> ]</p>
  <div id="M000105_source" class="dyn-source">
<pre>
/*
 * call-seq:
 *  replace_entities=(boolean)
 *
 * Should this parser replace entities?  &amp;amp; will get converted to '&amp;' if
 * set to true
 */
static VALUE set_replace_entities(VALUE self, VALUE value)
{
  xmlParserCtxtPtr ctxt;
  Data_Get_Struct(self, xmlParserCtxt, ctxt);

  if(Qfalse == value)
    ctxt-&gt;replaceEntities = 0;
  else
    ctxt-&gt;replaceEntities = 1;

  return value;
}
</pre>
  </div>
</div>
</div>
</div>

  </div>