  <div id="C00000019">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestParser<br/>
  In:
<a href="#" onclick="jsHref('files/test/xml/sax/test_parser_rb.html');">test/xml/sax/test_parser.rb</a>

Parent:&nbsp;
Nokogiri::SAX::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000108&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000114&name=test_bad_document_calls_error_handler" >test_bad_document_calls_error_handler</a></li>
  <li><a href="index.html?a=M000128&name=test_characters" >test_characters</a></li>
  <li><a href="index.html?a=M000127&name=test_comment" >test_comment</a></li>
  <li><a href="index.html?a=M000126&name=test_ctag" >test_ctag</a></li>
  <li><a href="index.html?a=M000129&name=test_end_document" >test_end_document</a></li>
  <li><a href="index.html?a=M000130&name=test_end_element" >test_end_element</a></li>
  <li><a href="index.html?a=M000120&name=test_errors_set_after_parsing_bad_dom" >test_errors_set_after_parsing_bad_dom</a></li>
  <li><a href="index.html?a=M000115&name=test_namespace_are_super_fun_to_parse" >test_namespace_are_super_fun_to_parse</a></li>
  <li><a href="index.html?a=M000113&name=test_namespace_declaration_order_is_saved" >test_namespace_declaration_order_is_saved</a></li>
  <li><a href="index.html?a=M000132&name=test_parse_document" >test_parse_document</a></li>
  <li><a href="index.html?a=M000112&name=test_parse_empty" >test_parse_empty</a></li>
  <li><a href="index.html?a=M000124&name=test_parse_file" >test_parse_file</a></li>
  <li><a href="index.html?a=M000123&name=test_parse_io" >test_parse_io</a></li>
  <li><a href="index.html?a=M000122&name=test_parse_with_io_argument" >test_parse_with_io_argument</a></li>
  <li><a href="index.html?a=M000121&name=test_parse_with_memory_argument" >test_parse_with_memory_argument</a></li>
  <li><a href="index.html?a=M000110&name=test_parser_context_yielded_in_memory" >test_parser_context_yielded_in_memory</a></li>
  <li><a href="index.html?a=M000109&name=test_parser_context_yielded_io" >test_parser_context_yielded_io</a></li>
  <li><a href="index.html?a=M000119&name=test_parser_sets_encoding" >test_parser_sets_encoding</a></li>
  <li><a href="index.html?a=M000125&name=test_render_parse_nil_param" >test_render_parse_nil_param</a></li>
  <li><a href="index.html?a=M000116&name=test_sax_v1_namespace_attribute_declarations" >test_sax_v1_namespace_attribute_declarations</a></li>
  <li><a href="index.html?a=M000117&name=test_sax_v1_namespace_nodes" >test_sax_v1_namespace_nodes</a></li>
  <li><a href="index.html?a=M000131&name=test_start_element_attrs" >test_start_element_attrs</a></li>
  <li><a href="index.html?a=M000118&name=test_start_is_called_without_namespace" >test_start_is_called_without_namespace</a></li>
  <li><a href="index.html?a=M000111&name=test_xml_decl" >test_xml_decl</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000108" class="method">
  <div id="M000108_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000108_source')" id="l_M000108_source">show source</a> ]</p>
  <div id="M000108_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 9</span>
 9:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
10:           <span class="ruby-keyword kw">super</span>
11:           <span class="ruby-ivar">@parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SAX</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Doc</span>.<span class="ruby-identifier">new</span>)
12:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000114" class="method">
  <div id="M000114_title" class="title">
    <b>test_bad_document_calls_error_handler</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000114_source')" id="l_M000114_source">show source</a> ]</p>
  <div id="M000114_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 83</span>
83:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_bad_document_calls_error_handler</span>
84:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>)
85:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">errors</span>
86:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
87:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000128" class="method">
  <div id="M000128_title" class="title">
    <b>test_characters</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000128_source')" id="l_M000128_source">show source</a> ]</p>
  <div id="M000128_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 274</span>
274:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_characters</span>
275:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;Paragraph 1&lt;/p&gt;\n&quot;</span>)
276:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'Paragraph 1'</span>], <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">data</span>
277:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000127" class="method">
  <div id="M000127_title" class="title">
    <b>test_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000127_source')" id="l_M000127_source">show source</a> ]</p>
  <div id="M000127_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 263</span>
263:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_comment</span>
264:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;\n&lt;!-- This is a comment --&gt;\nParagraph 1\n&lt;/p&gt;\n&quot;</span>)
265:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">' This is a comment '</span>], <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">comments</span>
266:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000126" class="method">
  <div id="M000126_title" class="title">
    <b>test_ctag</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000126_source')" id="l_M000126_source">show source</a> ]</p>
  <div id="M000126_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 252</span>
252:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ctag</span>
253:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;\n&lt;![CDATA[ This is a comment ]]&gt;\nParagraph 1\n&lt;/p&gt;\n&quot;</span>)
254:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">' This is a comment '</span>], <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">cdata_blocks</span>
255:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000129" class="method">
  <div id="M000129_title" class="title">
    <b>test_end_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000129_source')" id="l_M000129_source">show source</a> ]</p>
  <div id="M000129_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 282</span>
282:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_document</span>
283:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;Paragraph 1&lt;/p&gt;\n&quot;</span>)
284:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">end_document_called</span>
285:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000130" class="method">
  <div id="M000130_title" class="title">
    <b>test_end_element</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000130_source')" id="l_M000130_source">show source</a> ]</p>
  <div id="M000130_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 290</span>
290:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_end_element</span>
291:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;Paragraph 1&lt;/p&gt;\n&quot;</span>)
292:           <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">&quot;p&quot;</span>]],
293:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">end_elements</span>
294:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000120" class="method">
  <div id="M000120_title" class="title">
    <b>test_errors_set_after_parsing_bad_dom</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000120_source')" id="l_M000120_source">show source</a> ]</p>
  <div id="M000120_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 161</span>
161:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_errors_set_after_parsing_bad_dom</span>
162:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">XML</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>)
163:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>
164: 
165:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;foo&gt;&lt;bar&gt;&lt;/foo&gt;'</span>)
166:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">errors</span>
167:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
168: 
169:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^1\.9/</span>
170:             <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">error</span><span class="ruby-operator">|</span>
171:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">error</span>.<span class="ruby-identifier">message</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
172:             <span class="ruby-keyword kw">end</span>
173:           <span class="ruby-keyword kw">end</span>
174: 
175:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span>, <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span>
176:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000115" class="method">
  <div id="M000115_title" class="title">
    <b>test_namespace_are_super_fun_to_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000115_source')" id="l_M000115_source">show source</a> ]</p>
  <div id="M000115_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 89</span>
 89:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_are_super_fun_to_parse</span>
 90:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;root xmlns:foo='http://foo.example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;b xmlns:foo='http://bar.example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;/b&gt;\n&lt;foo:bar&gt;hello world&lt;/foo:bar&gt;\n&lt;/root&gt;\n&quot;</span>
 91:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements_namespace</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
 92:           <span class="ruby-identifier">el</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements_namespace</span>[<span class="ruby-value">1</span>]
 93:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'a'</span>, <span class="ruby-identifier">el</span>.<span class="ruby-identifier">first</span>
 94:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">el</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">length</span>
 95: 
 96:           <span class="ruby-identifier">attribute</span> = <span class="ruby-identifier">el</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">first</span>
 97:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'bar'</span>, <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">localname</span>
 98:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'foo'</span>, <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">prefix</span>
 99:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'hello'</span>, <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">value</span>
100:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'http://foo.example.com/'</span>, <span class="ruby-identifier">attribute</span>.<span class="ruby-identifier">uri</span>
101:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000113" class="method">
  <div id="M000113_title" class="title">
    <b>test_namespace_declaration_order_is_saved</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000113_source')" id="l_M000113_source">show source</a> ]</p>
  <div id="M000113_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 69</span>
69:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_declaration_order_is_saved</span>
70:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;root xmlns:foo='http://foo.example.com/' xmlns='http://example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;/root&gt;\n&quot;</span>
71:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements_namespace</span>.<span class="ruby-identifier">length</span>
72:           <span class="ruby-identifier">el</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements_namespace</span>.<span class="ruby-identifier">first</span>
73:           <span class="ruby-identifier">namespaces</span> = <span class="ruby-identifier">el</span>.<span class="ruby-identifier">last</span>
74:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'foo'</span>, <span class="ruby-value str">'http://foo.example.com/'</span>], <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">first</span>
75:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'http://example.com/'</span>], <span class="ruby-identifier">namespaces</span>.<span class="ruby-identifier">last</span>
76:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000132" class="method">
  <div id="M000132_title" class="title">
    <b>test_parse_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000132_source')" id="l_M000132_source">show source</a> ]</p>
  <div id="M000132_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 308</span>
308:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_document</span>
309:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p&gt;Paragraph 1&lt;/p&gt;\n&lt;p&gt;Paragraph 2&lt;/p&gt;\n&quot;</span>)
310:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000112" class="method">
  <div id="M000112_title" class="title">
    <b>test_parse_empty</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000112_source')" id="l_M000112_source">show source</a> ]</p>
  <div id="M000112_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 63</span>
63:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_empty</span>
64:           <span class="ruby-identifier">assert_raises</span> <span class="ruby-constant">RuntimeError</span> <span class="ruby-keyword kw">do</span>
65:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">''</span>)
66:           <span class="ruby-keyword kw">end</span>
67:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000124" class="method">
  <div id="M000124_title" class="title">
    <b>test_parse_file</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000124_source')" id="l_M000124_source">show source</a> ]</p>
  <div id="M000124_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 233</span>
233:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_file</span>
234:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-constant">XML_FILE</span>)
235: 
236:           <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) {
237:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-keyword kw">nil</span>)
238:           }
239: 
240:           <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">ENOENT</span>) {
241:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-value str">''</span>)
242:           }
243:           <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">Errno</span><span class="ruby-operator">::</span><span class="ruby-constant">EISDIR</span>) {
244:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_file</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">expand_path</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">dirname</span>(<span class="ruby-keyword kw">__FILE__</span>)))
245:           }
246:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000123" class="method">
  <div id="M000123_title" class="title">
    <b>test_parse_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000123_source')" id="l_M000123_source">show source</a> ]</p>
  <div id="M000123_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 190</span>
190:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_io</span>
191:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
192:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_io</span>(<span class="ruby-identifier">f</span>, <span class="ruby-value str">'UTF-8'</span>)
193:           }
194:           <span class="ruby-identifier">assert</span>(<span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">cdata_blocks</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
195:           <span class="ruby-keyword kw">if</span> <span class="ruby-constant">RUBY_VERSION</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/^1\.9/</span>
196:             <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
197:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
198:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
199:               <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
200:             <span class="ruby-keyword kw">end</span>
201:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
202: 
203:             <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
204:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">end_elements</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
205:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
206:               <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
207:             <span class="ruby-keyword kw">end</span>
208:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
209: 
210:             <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
211:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">data</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
212:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
213:               <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
214:             <span class="ruby-keyword kw">end</span>
215:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
216: 
217:             <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
218:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">comments</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
219:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
220:               <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
221:             <span class="ruby-keyword kw">end</span>
222:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
223: 
224:             <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">false</span>
225:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">cdata_blocks</span>.<span class="ruby-identifier">flatten</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">thing</span><span class="ruby-operator">|</span>
226:               <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">thing</span>.<span class="ruby-identifier">encoding</span>.<span class="ruby-identifier">name</span>
227:               <span class="ruby-identifier">called</span> = <span class="ruby-keyword kw">true</span>
228:             <span class="ruby-keyword kw">end</span>
229:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">called</span>
230:           <span class="ruby-keyword kw">end</span>
231:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000122" class="method">
  <div id="M000122_title" class="title">
    <b>test_parse_with_io_argument</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000122_source')" id="l_M000122_source">show source</a> ]</p>
  <div id="M000122_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 183</span>
183:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_with_io_argument</span>
184:           <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">XML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
185:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">f</span>)
186:           }
187:           <span class="ruby-identifier">assert</span>(<span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">cdata_blocks</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
188:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000121" class="method">
  <div id="M000121_title" class="title">
    <b>test_parse_with_memory_argument</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000121_source')" id="l_M000121_source">show source</a> ]</p>
  <div id="M000121_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 178</span>
178:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_with_memory_argument</span>
179:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">XML_FILE</span>))
180:           <span class="ruby-identifier">assert</span>(<span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">cdata_blocks</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>)
181:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000110" class="method">
  <div id="M000110_title" class="title">
    <b>test_parser_context_yielded_in_memory</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000110_source')" id="l_M000110_source">show source</a> ]</p>
  <div id="M000110_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 30</span>
30:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parser_context_yielded_in_memory</span>
31:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Doc</span>.<span class="ruby-identifier">new</span>
32:           <span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SAX</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">doc</span>
33:           <span class="ruby-identifier">xml</span> = <span class="ruby-value str">&quot;&lt;foo a='&amp;amp;b'/&gt;&quot;</span>
34: 
35:           <span class="ruby-identifier">block_called</span> = <span class="ruby-keyword kw">false</span>
36:           <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">xml</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">ctx</span><span class="ruby-operator">|</span>
37:             <span class="ruby-identifier">block_called</span> = <span class="ruby-keyword kw">true</span>
38:             <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">replace_entities</span> = <span class="ruby-keyword kw">true</span>
39:           }
40: 
41:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">block_called</span>
42: 
43:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'a'</span>, <span class="ruby-value str">'&amp;b'</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">last</span>
44:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000109" class="method">
  <div id="M000109_title" class="title">
    <b>test_parser_context_yielded_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000109_source')" id="l_M000109_source">show source</a> ]</p>
  <div id="M000109_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 14</span>
14:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parser_context_yielded_io</span>
15:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Doc</span>.<span class="ruby-identifier">new</span>
16:           <span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SAX</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span> <span class="ruby-identifier">doc</span>
17:           <span class="ruby-identifier">xml</span> = <span class="ruby-value str">&quot;&lt;foo a='&amp;amp;b'/&gt;&quot;</span>
18: 
19:           <span class="ruby-identifier">block_called</span> = <span class="ruby-keyword kw">false</span>
20:           <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">xml</span>)) { <span class="ruby-operator">|</span><span class="ruby-identifier">ctx</span><span class="ruby-operator">|</span>
21:             <span class="ruby-identifier">block_called</span> = <span class="ruby-keyword kw">true</span>
22:             <span class="ruby-identifier">ctx</span>.<span class="ruby-identifier">replace_entities</span> = <span class="ruby-keyword kw">true</span>
23:           }
24: 
25:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">block_called</span>
26: 
27:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'a'</span>, <span class="ruby-value str">'&amp;b'</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">last</span>
28:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000119" class="method">
  <div id="M000119_title" class="title">
    <b>test_parser_sets_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000119_source')" id="l_M000119_source">show source</a> ]</p>
  <div id="M000119_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 156</span>
156:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parser_sets_encoding</span>
157:           <span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SAX</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Doc</span>.<span class="ruby-identifier">new</span>, <span class="ruby-value str">'UTF-8'</span>)
158:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">encoding</span>
159:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000125" class="method">
  <div id="M000125_title" class="title">
    <b>test_render_parse_nil_param</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000125_source')" id="l_M000125_source">show source</a> ]</p>
  <div id="M000125_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 248</span>
248:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_render_parse_nil_param</span>
249:           <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">ArgumentError</span>) { <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-keyword kw">nil</span>) }
250:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000116" class="method">
  <div id="M000116_title" class="title">
    <b>test_sax_v1_namespace_attribute_declarations</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000116_source')" id="l_M000116_source">show source</a> ]</p>
  <div id="M000116_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 112</span>
112:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_sax_v1_namespace_attribute_declarations</span>
113:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;root xmlns:foo='http://foo.example.com/' xmlns='http://example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;b xmlns:foo='http://bar.example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;/b&gt;\n&lt;foo:bar&gt;hello world&lt;/foo:bar&gt;\n&lt;/root&gt;\n&quot;</span>
114:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
115:           <span class="ruby-identifier">elm</span> = <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">first</span>
116:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'root'</span>, <span class="ruby-identifier">elm</span>.<span class="ruby-identifier">first</span>
117:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">elm</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">include?</span>([<span class="ruby-value str">'xmlns:foo'</span>, <span class="ruby-value str">'http://foo.example.com/'</span>])
118:           <span class="ruby-identifier">assert</span> <span class="ruby-identifier">elm</span>[<span class="ruby-value">1</span>].<span class="ruby-identifier">include?</span>([<span class="ruby-value str">'xmlns'</span>, <span class="ruby-value str">'http://example.com/'</span>])
119:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000117" class="method">
  <div id="M000117_title" class="title">
    <b>test_sax_v1_namespace_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000117_source')" id="l_M000117_source">show source</a> ]</p>
  <div id="M000117_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 130</span>
130:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_sax_v1_namespace_nodes</span>
131:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-value str">&quot;&lt;root xmlns:foo='http://foo.example.com/' xmlns='http://example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;b xmlns:foo='http://bar.example.com/'&gt;\n&lt;a foo:bar='hello' /&gt;\n&lt;/b&gt;\n&lt;foo:bar&gt;hello world&lt;/foo:bar&gt;\n&lt;/root&gt;\n&quot;</span>
132:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">5</span>, <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">length</span>
133:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">se</span><span class="ruby-operator">|</span>
134:             <span class="ruby-identifier">se</span>.<span class="ruby-identifier">first</span>
135:           }.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'foo:bar'</span>)
136:           <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">end_elements</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">se</span><span class="ruby-operator">|</span>
137:             <span class="ruby-identifier">se</span>.<span class="ruby-identifier">first</span>
138:           }.<span class="ruby-identifier">include?</span>(<span class="ruby-value str">'foo:bar'</span>)
139:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000131" class="method">
  <div id="M000131_title" class="title">
    <b>test_start_element_attrs</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000131_source')" id="l_M000131_source">show source</a> ]</p>
  <div id="M000131_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 299</span>
299:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_start_element_attrs</span>
300:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse_memory</span>(<span class="ruby-value str">&quot;&lt;p id=\&quot;asdfasdf\&quot;&gt;Paragraph 1&lt;/p&gt;\n&quot;</span>)
301:           <span class="ruby-identifier">assert_equal</span> [[<span class="ruby-value str">&quot;p&quot;</span>, [<span class="ruby-value str">&quot;id&quot;</span>, <span class="ruby-value str">&quot;asdfasdf&quot;</span>]]],
302:                        <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>
303:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000118" class="method">
  <div id="M000118_title" class="title">
    <b>test_start_is_called_without_namespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000118_source')" id="l_M000118_source">show source</a> ]</p>
  <div id="M000118_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 150</span>
150:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_start_is_called_without_namespace</span>
151:           <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;foo:f&gt;&lt;bar&gt;&lt;/foo:f&gt;'</span>)
152:           <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'foo:f'</span>, <span class="ruby-value str">'bar'</span>],
153:             <span class="ruby-ivar">@parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_elements</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">first</span> }
154:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000111" class="method">
  <div id="M000111_title" class="title">
    <b>test_xml_decl</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000111_source')" id="l_M000111_source">show source</a> ]</p>
  <div id="M000111_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/xml/sax/test_parser.rb, line 46</span>
46:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_xml_decl</span>
47:           {
48:             <span class="ruby-value str">''</span>          =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>,
49:             <span class="ruby-value str">'&lt;?xml version=&quot;1.0&quot; ?&gt;'</span>                  =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'1.0'</span>],
50:             <span class="ruby-value str">'&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;'</span> =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'1.0'</span>, <span class="ruby-value str">'UTF-8'</span>],
51:             <span class="ruby-value str">'&lt;?xml version=&quot;1.0&quot; standalone=&quot;yes&quot;?&gt;'</span>  =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'1.0'</span>, <span class="ruby-value str">'yes'</span>],
52:             <span class="ruby-value str">'&lt;?xml version=&quot;1.0&quot; standalone=&quot;no&quot;?&gt;'</span>   =<span class="ruby-operator">&gt;</span> [<span class="ruby-value str">'1.0'</span>, <span class="ruby-value str">'no'</span>],
53:           }.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">decl</span>,<span class="ruby-identifier">value</span><span class="ruby-operator">|</span>
54:             <span class="ruby-identifier">parser</span> = <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">SAX</span><span class="ruby-operator">::</span><span class="ruby-constant">Parser</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Doc</span>.<span class="ruby-identifier">new</span>)
55: 
56:             <span class="ruby-identifier">xml</span> = <span class="ruby-node">&quot;#{decl}\n&lt;root /&gt;&quot;</span>
57:             <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">parse</span> <span class="ruby-identifier">xml</span>
58:             <span class="ruby-identifier">assert</span> <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">start_document_called</span>, <span class="ruby-identifier">xml</span>
59:             <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">value</span>, <span class="ruby-identifier">parser</span>.<span class="ruby-identifier">document</span>.<span class="ruby-identifier">xmldecls</span>, <span class="ruby-identifier">xml</span>
60:           <span class="ruby-keyword kw">end</span>
61:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>