  <div id="C00000063">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestDocumentFragment<br/>
  In:
<a href="#" onclick="jsHref('files/test/html/test_document_fragment_rb.html');">test/html/test_document_fragment.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000902&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000905&name=test_ancestors_search" >test_ancestors_search</a></li>
  <li><a href="index.html?a=M000910&name=test_empty_fragment_should_be_searchable" >test_empty_fragment_should_be_searchable</a></li>
  <li><a href="index.html?a=M000909&name=test_empty_fragment_should_be_searchable_by_css" >test_empty_fragment_should_be_searchable_by_css</a></li>
  <li><a href="index.html?a=M000928&name=test_fragment_script_tag_with_cdata" >test_fragment_script_tag_with_cdata</a></li>
  <li><a href="index.html?a=M000908&name=test_fragment_should_have_document" >test_fragment_should_have_document</a></li>
  <li><a href="index.html?a=M000929&name=test_fragment_with_comment" >test_fragment_with_comment</a></li>
  <li><a href="index.html?a=M000906&name=test_fun_encoding" >test_fun_encoding</a></li>
  <li><a href="index.html?a=M000916&name=test_html_fragment" >test_html_fragment</a></li>
  <li><a href="index.html?a=M000918&name=test_html_fragment_case_insensitivity" >test_html_fragment_case_insensitivity</a></li>
  <li><a href="index.html?a=M000917&name=test_html_fragment_has_outer_text" >test_html_fragment_has_outer_text</a></li>
  <li><a href="index.html?a=M000923&name=test_html_fragment_with_leading_entity" >test_html_fragment_with_leading_entity</a></li>
  <li><a href="index.html?a=M000921&name=test_html_fragment_with_leading_text_and_newline" >test_html_fragment_with_leading_text_and_newline</a></li>
  <li><a href="index.html?a=M000919&name=test_html_fragment_with_leading_whitespace" >test_html_fragment_with_leading_whitespace</a></li>
  <li><a href="index.html?a=M000920&name=test_html_fragment_with_leading_whitespace_and_newline" >test_html_fragment_with_leading_whitespace_and_newline</a></li>
  <li><a href="index.html?a=M000922&name=test_html_fragment_with_leading_whitespace_and_text_and_newline" >test_html_fragment_with_leading_whitespace_and_text_and_newline</a></li>
  <li><a href="index.html?a=M000913&name=test_many_fragments" >test_many_fragments</a></li>
  <li><a href="index.html?a=M000911&name=test_name" >test_name</a></li>
  <li><a href="index.html?a=M000907&name=test_new" >test_new</a></li>
  <li><a href="index.html?a=M000903&name=test_no_contextual_parsing_on_unlinked_nodes" >test_no_contextual_parsing_on_unlinked_nodes</a></li>
  <li><a href="index.html?a=M000904&name=test_parse_in_context" >test_parse_in_context</a></li>
  <li><a href="index.html?a=M000912&name=test_static_method" >test_static_method</a></li>
  <li><a href="index.html?a=M000914&name=test_subclass" >test_subclass</a></li>
  <li><a href="index.html?a=M000915&name=test_subclass_parse" >test_subclass_parse</a></li>
  <li><a href="index.html?a=M000925&name=test_to_html" >test_to_html</a></li>
  <li><a href="index.html?a=M000924&name=test_to_s" >test_to_s</a></li>
  <li><a href="index.html?a=M000926&name=test_to_xhtml" >test_to_xhtml</a></li>
  <li><a href="index.html?a=M000927&name=test_to_xml" >test_to_xml</a></li>
  </ul>






<div class="sectiontitle">Public Instance methods</div>
<div id="M000902" class="method">
  <div id="M000902_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000902_source')" id="l_M000902_source">show source</a> ]</p>
  <div id="M000902_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 7</span>
 7:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
 8:         <span class="ruby-keyword kw">super</span>
 9:         <span class="ruby-ivar">@html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>), <span class="ruby-constant">HTML_FILE</span>)
10:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000905" class="method">
  <div id="M000905_title" class="title">
    <b>test_ancestors_search</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000905_source')" id="l_M000905_source">show source</a> ]</p>
  <div id="M000905_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 24</span>
24:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_ancestors_search</span>
25:         <span class="ruby-identifier">html</span> = <span class="ruby-value str">%q{
26:           &lt;div&gt;
27:             &lt;ul&gt;
28:               &lt;li&gt;foo&lt;/li&gt;
29:             &lt;/ul&gt;
30:           &lt;/div&gt;
31:         }</span>
32:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span> <span class="ruby-identifier">html</span>
33:         <span class="ruby-identifier">li</span> = <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">at</span>(<span class="ruby-value str">'li'</span>)
34:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">li</span>.<span class="ruby-identifier">matches?</span>(<span class="ruby-value str">'li'</span>)
35:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000910" class="method">
  <div id="M000910_title" class="title">
    <b>test_empty_fragment_should_be_searchable</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000910_source')" id="l_M000910_source">show source</a> ]</p>
  <div id="M000910_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 59</span>
59:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_fragment_should_be_searchable</span>
60:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&quot;</span>)
61:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">&quot;//a&quot;</span>).<span class="ruby-identifier">size</span>
62:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000909" class="method">
  <div id="M000909_title" class="title">
    <b>test_empty_fragment_should_be_searchable_by_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000909_source')" id="l_M000909_source">show source</a> ]</p>
  <div id="M000909_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 54</span>
54:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_fragment_should_be_searchable_by_css</span>
55:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&quot;</span>)
56:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;a&quot;</span>).<span class="ruby-identifier">size</span>
57:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000928" class="method">
  <div id="M000928_title" class="title">
    <b>test_fragment_script_tag_with_cdata</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000928_source')" id="l_M000928_source">show source</a> ]</p>
  <div id="M000928_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 167</span>
167:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_script_tag_with_cdata</span>
168:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
169:         <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&lt;script&gt;var foo = 'bar';&lt;/script&gt;&quot;</span>)
170:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;script&gt;var foo = 'bar';&lt;/script&gt;&quot;</span>,
171:           <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>)
172:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000908" class="method">
  <div id="M000908_title" class="title">
    <b>test_fragment_should_have_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000908_source')" id="l_M000908_source">show source</a> ]</p>
  <div id="M000908_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 49</span>
49:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_should_have_document</span>
50:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@html</span>)
51:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">document</span>
52:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000929" class="method">
  <div id="M000929_title" class="title">
    <b>test_fragment_with_comment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000929_source')" id="l_M000929_source">show source</a> ]</p>
  <div id="M000929_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 174</span>
174:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_with_comment</span>
175:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>
176:         <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&lt;p&gt;hello&lt;!-- your ad here --&gt;&lt;/p&gt;&quot;</span>)
177:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">&quot;&lt;p&gt;hello&lt;!-- your ad here --&gt;&lt;/p&gt;&quot;</span>,
178:           <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>)
179:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000906" class="method">
  <div id="M000906_title" class="title">
    <b>test_fun_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000906_source')" id="l_M000906_source">show source</a> ]</p>
  <div id="M000906_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 37</span>
37:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fun_encoding</span>
38:         <span class="ruby-identifier">string</span> = <span class="ruby-value str">%Q(&lt;body&gt;こんにちは&lt;/body&gt;)</span>
39:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(
40:           <span class="ruby-identifier">string</span>
41:         ).<span class="ruby-identifier">to_html</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>)
42:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">string</span>, <span class="ruby-identifier">html</span>
43:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000916" class="method">
  <div id="M000916_title" class="title">
    <b>test_html_fragment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000916_source')" id="l_M000916_source">show source</a> ]</p>
  <div id="M000916_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 90</span>
90:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment</span>
91:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&lt;div&gt;a&lt;/div&gt;&quot;</span>)
92:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;a&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
93:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000918" class="method">
  <div id="M000918_title" class="title">
    <b>test_html_fragment_case_insensitivity</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000918_source')" id="l_M000918_source">show source</a> ]</p>
  <div id="M000918_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 105</span>
105:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_case_insensitivity</span>
106:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;&lt;Div&gt;b&lt;/Div&gt;&quot;</span>
107:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
108:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;b&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
109:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000917" class="method">
  <div id="M000917_title" class="title">
    <b>test_html_fragment_has_outer_text</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000917_source')" id="l_M000917_source">show source</a> ]</p>
  <div id="M000917_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 95</span>
 95:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_has_outer_text</span>
 96:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;a&lt;div&gt;b&lt;/div&gt;c&quot;</span>
 97:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
 98:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION_INFO</span>[<span class="ruby-value str">'libxml'</span>][<span class="ruby-value str">'loaded'</span>] <span class="ruby-operator">&lt;=</span> <span class="ruby-value str">&quot;2.6.16&quot;</span>
 99:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&lt;div&gt;b&lt;/div&gt;&lt;p&gt;c&lt;/p&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
100:         <span class="ruby-keyword kw">else</span>
101:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;a&lt;div&gt;b&lt;/div&gt;c&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
102:         <span class="ruby-keyword kw">end</span>
103:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000923" class="method">
  <div id="M000923_title" class="title">
    <b>test_html_fragment_with_leading_entity</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000923_source')" id="l_M000923_source">show source</a> ]</p>
  <div id="M000923_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 133</span>
133:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_with_leading_entity</span>
134:         <span class="ruby-identifier">failed</span> = <span class="ruby-value str">&quot;&amp;quot;test&lt;br/&gt;test&amp;quot;&quot;</span>
135:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-identifier">failed</span>)
136:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'&quot;test&lt;br&gt;test&quot;'</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_html</span>
137:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000921" class="method">
  <div id="M000921_title" class="title">
    <b>test_html_fragment_with_leading_text_and_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000921_source')" id="l_M000921_source">show source</a> ]</p>
  <div id="M000921_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 123</span>
123:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_with_leading_text_and_newline</span>
124:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;First line\nSecond line&lt;br&gt;Broken line&quot;</span>)
125:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-value str">&quot;First line\nSecond line&lt;br&gt;Broken line&quot;</span>
126:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000919" class="method">
  <div id="M000919_title" class="title">
    <b>test_html_fragment_with_leading_whitespace</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000919_source')" id="l_M000919_source">show source</a> ]</p>
  <div id="M000919_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 111</span>
111:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_with_leading_whitespace</span>
112:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;     &lt;div&gt;b&lt;/div&gt;  &quot;</span>
113:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
114:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;b&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
115:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000920" class="method">
  <div id="M000920_title" class="title">
    <b>test_html_fragment_with_leading_whitespace_and_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000920_source')" id="l_M000920_source">show source</a> ]</p>
  <div id="M000920_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 117</span>
117:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_with_leading_whitespace_and_newline</span>
118:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;     \n&lt;div&gt;b&lt;/div&gt;  &quot;</span>
119:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
120:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;div&gt;b&lt;/div&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
121:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000922" class="method">
  <div id="M000922_title" class="title">
    <b>test_html_fragment_with_leading_whitespace_and_text_and_newline</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000922_source')" id="l_M000922_source">show source</a> ]</p>
  <div id="M000922_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 128</span>
128:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html_fragment_with_leading_whitespace_and_text_and_newline</span>
129:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;  First line\nSecond line&lt;br&gt;Broken line&quot;</span>)
130:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;First line\nSecond line&lt;br&gt;Broken line&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
131:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000913" class="method">
  <div id="M000913_title" class="title">
    <b>test_many_fragments</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000913_source')" id="l_M000913_source">show source</a> ]</p>
  <div id="M000913_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 74</span>
74:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_many_fragments</span>
75:         <span class="ruby-value">100</span>.<span class="ruby-identifier">times</span> { <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@html</span>) }
76:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000911" class="method">
  <div id="M000911_title" class="title">
    <b>test_name</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000911_source')" id="l_M000911_source">show source</a> ]</p>
  <div id="M000911_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_name</span>
65:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@html</span>)
66:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'#document-fragment'</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">name</span>
67:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000907" class="method">
  <div id="M000907_title" class="title">
    <b>test_new</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000907_source')" id="l_M000907_source">show source</a> ]</p>
  <div id="M000907_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 45</span>
45:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_new</span>
46:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@html</span>)
47:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000903" class="method">
  <div id="M000903_title" class="title">
    <b>test_no_contextual_parsing_on_unlinked_nodes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000903_source')" id="l_M000903_source">show source</a> ]</p>
  <div id="M000903_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 12</span>
12:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_contextual_parsing_on_unlinked_nodes</span>
13:         <span class="ruby-identifier">node</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'body'</span>).<span class="ruby-identifier">first</span>
14:         <span class="ruby-identifier">node</span>.<span class="ruby-identifier">unlink</span>
15:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">RuntimeError</span>) <span class="ruby-keyword kw">do</span>
16:           <span class="ruby-identifier">node</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;br /&gt;'</span>)
17:         <span class="ruby-keyword kw">end</span>
18:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000904" class="method">
  <div id="M000904_title" class="title">
    <b>test_parse_in_context</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000904_source')" id="l_M000904_source">show source</a> ]</p>
  <div id="M000904_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 20</span>
20:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_in_context</span>
21:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;br&gt;'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">'&lt;br /&gt;'</span>).<span class="ruby-identifier">to_s</span>)
22:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000912" class="method">
  <div id="M000912_title" class="title">
    <b>test_static_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000912_source')" id="l_M000912_source">show source</a> ]</p>
  <div id="M000912_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_static_method</span>
70:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;div&gt;a&lt;/div&gt;&quot;</span>)
71:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>, <span class="ruby-identifier">fragment</span>
72:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000914" class="method">
  <div id="M000914_title" class="title">
    <b>test_subclass</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000914_source')" id="l_M000914_source">show source</a> ]</p>
  <div id="M000914_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 78</span>
78:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass</span>
79:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>)
80:         <span class="ruby-identifier">fragment</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@html</span>, <span class="ruby-value str">&quot;&lt;div&gt;a&lt;/div&gt;&quot;</span>)
81:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">fragment</span>
82:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000915" class="method">
  <div id="M000915_title" class="title">
    <b>test_subclass_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000915_source')" id="l_M000915_source">show source</a> ]</p>
  <div id="M000915_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 84</span>
84:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_parse</span>
85:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">DocumentFragment</span>)
86:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-value str">&quot;&lt;div&gt;a&lt;/div&gt;&quot;</span>)
87:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
88:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000925" class="method">
  <div id="M000925_title" class="title">
    <b>test_to_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000925_source')" id="l_M000925_source">show source</a> ]</p>
  <div id="M000925_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_html</span>
146:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>
147:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
148:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_html</span>
149:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000924" class="method">
  <div id="M000924_title" class="title">
    <b>test_to_s</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000924_source')" id="l_M000924_source">show source</a> ]</p>
  <div id="M000924_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 139</span>
139:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_s</span>
140:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>
141:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
142:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_s</span>
143:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000926" class="method">
  <div id="M000926_title" class="title">
    <b>test_to_xhtml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000926_source')" id="l_M000926_source">show source</a> ]</p>
  <div id="M000926_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 151</span>
151:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xhtml</span>
152:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>
153:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
154:         <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">VERSION_INFO</span>[<span class="ruby-value str">'libxml'</span>][<span class="ruby-value str">'loaded'</span>] <span class="ruby-operator">&gt;=</span> <span class="ruby-value str">&quot;2.7.0&quot;</span>
155:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br /&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_xhtml</span>
156:         <span class="ruby-keyword kw">else</span>
157:           <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_xhtml</span>
158:         <span class="ruby-keyword kw">end</span>
159:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000927" class="method">
  <div id="M000927_title" class="title">
    <b>test_to_xml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000927_source')" id="l_M000927_source">show source</a> ]</p>
  <div id="M000927_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document_fragment.rb, line 161</span>
161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xml</span>
162:         <span class="ruby-identifier">doc</span> = <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>
163:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-identifier">doc</span>)
164:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">&quot;&lt;span&gt;foo&lt;br/&gt;&lt;/span&gt;&lt;span&gt;bar&lt;/span&gt;&quot;</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">to_xml</span>
165:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>