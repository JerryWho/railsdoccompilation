  <div id="C00000101">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestDocument<br/>
  In:
<a href="#" onclick="jsHref('files/test/html/test_document_rb.html');">test/html/test_document.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M001051&name=awesome" >awesome</a></li>
  <li><a href="index.html?a=M001024&name=new" >new</a></li>
  <li><a href="index.html?a=M001018&name=setup" >setup</a></li>
  <li><a href="index.html?a=M001039&name=test_HTML_function" >test_HTML_function</a></li>
  <li><a href="index.html?a=M001043&name=test_document_has_error" >test_document_has_error</a></li>
  <li><a href="index.html?a=M001027&name=test_document_parse_method" >test_document_parse_method</a></li>
  <li><a href="index.html?a=M001020&name=test_document_takes_config_block" >test_document_takes_config_block</a></li>
  <li><a href="index.html?a=M001056&name=test_dup" >test_dup</a></li>
  <li><a href="index.html?a=M001054&name=test_dup_document" >test_dup_document</a></li>
  <li><a href="index.html?a=M001055&name=test_dup_document_shallow" >test_dup_document_shallow</a></li>
  <li><a href="index.html?a=M001052&name=test_dup_shallow" >test_dup_shallow</a></li>
  <li><a href="index.html?a=M001028&name=test_empty_string_returns_empty_doc" >test_empty_string_returns_empty_doc</a></li>
  <li><a href="index.html?a=M001048&name=test_find_by_css" >test_find_by_css</a></li>
  <li><a href="index.html?a=M001049&name=test_find_by_css_with_square_brackets" >test_find_by_css_with_square_brackets</a></li>
  <li><a href="index.html?a=M001047&name=test_find_by_xpath" >test_find_by_xpath</a></li>
  <li><a href="index.html?a=M001062&name=test_find_classes" >test_find_classes</a></li>
  <li><a href="index.html?a=M001050&name=test_find_with_function" >test_find_with_function</a></li>
  <li><a href="index.html?a=M001019&name=test_fragment" >test_fragment</a></li>
  <li><a href="index.html?a=M001059&name=test_fragment_contains_text_node" >test_fragment_contains_text_node</a></li>
  <li><a href="index.html?a=M001060&name=test_fragment_includes_two_tags" >test_fragment_includes_two_tags</a></li>
  <li><a href="index.html?a=M001064&name=test_html?" >test_html?</a></li>
  <li><a href="index.html?a=M001057&name=test_inner_html" >test_inner_html</a></li>
  <li><a href="index.html?a=M001046&name=test_inner_text" >test_inner_text</a></li>
  <li><a href="index.html?a=M001033&name=test_meta_encoding" >test_meta_encoding</a></li>
  <li><a href="index.html?a=M001034&name=test_meta_encoding=" >test_meta_encoding=</a></li>
  <li><a href="index.html?a=M001035&name=test_meta_encoding_without_head" >test_meta_encoding_without_head</a></li>
  <li><a href="index.html?a=M001045&name=test_multi_css" >test_multi_css</a></li>
  <li><a href="index.html?a=M001032&name=test_namespace_should_not_exist" >test_namespace_should_not_exist</a></li>
  <li><a href="index.html?a=M001042&name=test_no_xml_header" >test_no_xml_header</a></li>
  <li><a href="index.html?a=M001063&name=test_parse_can_take_io" >test_parse_can_take_io</a></li>
  <li><a href="index.html?a=M001038&name=test_parse_empty_document" >test_parse_empty_document</a></li>
  <li><a href="index.html?a=M001037&name=test_parse_handles_nil_gracefully" >test_parse_handles_nil_gracefully</a></li>
  <li><a href="index.html?a=M001040&name=test_parse_io" >test_parse_io</a></li>
  <li><a href="index.html?a=M001021&name=test_parse_takes_config_block" >test_parse_takes_config_block</a></li>
  <li><a href="index.html?a=M001044&name=test_relative_css" >test_relative_css</a></li>
  <li><a href="index.html?a=M001061&name=test_relative_css_finder" >test_relative_css_finder</a></li>
  <li><a href="index.html?a=M001036&name=test_root_node_parent_is_document" >test_root_node_parent_is_document</a></li>
  <li><a href="index.html?a=M001058&name=test_round_trip" >test_round_trip</a></li>
  <li><a href="index.html?a=M001053&name=test_search_can_handle_xpath_and_css" >test_search_can_handle_xpath_and_css</a></li>
  <li><a href="index.html?a=M001065&name=test_serialize" >test_serialize</a></li>
  <li><a href="index.html?a=M001022&name=test_subclass" >test_subclass</a></li>
  <li><a href="index.html?a=M001025&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M001023&name=test_subclass_initialize" >test_subclass_initialize</a></li>
  <li><a href="index.html?a=M001026&name=test_subclass_parse" >test_subclass_parse</a></li>
  <li><a href="index.html?a=M001031&name=test_swap_should_not_exist" >test_swap_should_not_exist</a></li>
  <li><a href="index.html?a=M001041&name=test_to_xhtml" >test_to_xhtml</a></li>
  <li><a href="index.html?a=M001029&name=test_to_xhtml_with_indent" >test_to_xhtml_with_indent</a></li>
  <li><a href="index.html?a=M001030&name=test_write_to_xhtml_with_indent" >test_write_to_xhtml_with_indent</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M001024" class="method">
  <div id="M001024_title" class="title">
    <b>new</b>(*args)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001024_source')" id="l_M001024_source">show source</a> ]</p>
  <div id="M001024_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 48</span>
48:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
49:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
50:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M001051" class="method">
  <div id="M001051_title" class="title">
    <b>awesome</b>(divs)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001051_source')" id="l_M001051_source">show source</a> ]</p>
  <div id="M001051_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 262</span>
262:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome</span> <span class="ruby-identifier">divs</span>
263:             [<span class="ruby-identifier">divs</span>.<span class="ruby-identifier">first</span>]
264:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001018" class="method">
  <div id="M001018_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001018_source')" id="l_M001018_source">show source</a> ]</p>
  <div id="M001018_source" class="dyn-source">
<pre>
   <span class="ruby-comment cmt"># File test/html/test_document.rb, line 6</span>
6:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
7:         <span class="ruby-keyword kw">super</span>
8:         <span class="ruby-ivar">@html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
9:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001039" class="method">
  <div id="M001039_title" class="title">
    <b>test_HTML_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001039_source')" id="l_M001039_source">show source</a> ]</p>
  <div id="M001039_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 149</span>
149:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_HTML_function</span>
150:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
151:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html?</span>
152:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001043" class="method">
  <div id="M001043_title" class="title">
    <b>test_document_has_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001043_source')" id="l_M001043_source">show source</a> ]</p>
  <div id="M001043_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 178</span>
178:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_has_error</span>
179:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div awesome=\&quot;asdf&gt;\n&lt;p&gt;inside div tag&lt;/p&gt;\n&lt;/div&gt;\n&lt;p&gt;outside div tag&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
180:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
181:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001027" class="method">
  <div id="M001027_title" class="title">
    <b>test_document_parse_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001027_source')" id="l_M001027_source">show source</a> ]</p>
  <div id="M001027_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parse_method</span>
70:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
71:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_s</span>
72:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001020" class="method">
  <div id="M001020_title" class="title">
    <b>test_document_takes_config_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001020_source')" id="l_M001020_source">show source</a> ]</p>
  <div id="M001020_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 16</span>
16:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_takes_config_block</span>
17:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
18:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>), <span class="ruby-constant">HTML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
19:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
20:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
21:         <span class="ruby-keyword kw">end</span>
22:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
23:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
24:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
25:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001056" class="method">
  <div id="M001056_title" class="title">
    <b>test_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001056_source')" id="l_M001056_source">show source</a> ]</p>
  <div id="M001056_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 296</span>
296:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup</span>
297:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">first</span>
298:         <span class="ruby-identifier">dup</span> = <span class="ruby-identifier">found</span>.<span class="ruby-identifier">dup</span>
299:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>
300:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">content</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">content</span>
301:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">document</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">document</span>
302:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001054" class="method">
  <div id="M001054_title" class="title">
    <b>test_dup_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001054_source')" id="l_M001054_source">show source</a> ]</p>
  <div id="M001054_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 282</span>
282:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_document</span>
283:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">dup</span>
284:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">dup</span>, <span class="ruby-ivar">@html</span>
285:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">html?</span>
286:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">dup</span>
287:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">html?</span>, <span class="ruby-value str">'duplicate should be html'</span>
288:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">to_s</span>
289:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001055" class="method">
  <div id="M001055_title" class="title">
    <b>test_dup_document_shallow</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001055_source')" id="l_M001055_source">show source</a> ]</p>
  <div id="M001055_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 291</span>
291:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_document_shallow</span>
292:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">dup</span>(<span class="ruby-value">0</span>)
293:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">dup</span>, <span class="ruby-ivar">@html</span>
294:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001052" class="method">
  <div id="M001052_title" class="title">
    <b>test_dup_shallow</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001052_source')" id="l_M001052_source">show source</a> ]</p>
  <div id="M001052_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 268</span>
268:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_shallow</span>
269:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">first</span>
270:         <span class="ruby-identifier">dup</span> = <span class="ruby-identifier">found</span>.<span class="ruby-identifier">dup</span>(<span class="ruby-value">0</span>)
271:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>
272:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">content</span>
273:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001028" class="method">
  <div id="M001028_title" class="title">
    <b>test_empty_string_returns_empty_doc</b>()
  </div>
  <div class="description">
  <p>
<a href="index.html?a=C00000085&name=Nokogiri::HTML">Nokogiri::HTML</a>
returns an empty <a
href="index.html?a=C00000104&name=Document">Document</a> when given a blank
string GH#11
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001028_source')" id="l_M001028_source">show source</a> ]</p>
  <div id="M001028_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 76</span>
76:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_string_returns_empty_doc</span>
77:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">''</span>)
78:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">doc</span>
79:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>
80:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001048" class="method">
  <div id="M001048_title" class="title">
    <b>test_find_by_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001048_source')" id="l_M001048_source">show source</a> ]</p>
  <div id="M001048_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 249</span>
249:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css</span>
250:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div &gt; a'</span>)
251:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
252:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001049" class="method">
  <div id="M001049_title" class="title">
    <b>test_find_by_css_with_square_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001049_source')" id="l_M001049_source">show source</a> ]</p>
  <div id="M001049_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 254</span>
254:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css_with_square_brackets</span>
255:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div[@id='header'] &gt; h1&quot;</span>)
256:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div[@id='header'] h1&quot;</span>) <span class="ruby-comment cmt"># this blows up on commit 6fa0f6d329d9dbf1cc21c0ac72f7e627bb4c05fc</span>
257:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
258:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001047" class="method">
  <div id="M001047_title" class="title">
    <b>test_find_by_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001047_source')" id="l_M001047_source">show source</a> ]</p>
  <div id="M001047_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 244</span>
244:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_xpath</span>
245:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div/a'</span>)
246:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
247:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001062" class="method">
  <div id="M001062_title" class="title">
    <b>test_find_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001062_source')" id="l_M001062_source">show source</a> ]</p>
  <div id="M001062_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 361</span>
361:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_classes</span>
362:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;p class=\&quot;red\&quot;&gt;RED&lt;/p&gt;\n&lt;p class=\&quot;awesome red\&quot;&gt;RED&lt;/p&gt;\n&lt;p class=\&quot;notred\&quot;&gt;GREEN&lt;/p&gt;\n&lt;p class=\&quot;green notred\&quot;&gt;GREEN&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
363:         <span class="ruby-identifier">list</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'.red'</span>)
364:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
365:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ RED RED }</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">text</span> }
366:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001050" class="method">
  <div id="M001050_title" class="title">
    <b>test_find_with_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001050_source')" id="l_M001050_source">show source</a> ]</p>
  <div id="M001050_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 260</span>
260:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_function</span>
261:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div:awesome() h1&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> {
262:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome</span> <span class="ruby-identifier">divs</span>
263:             [<span class="ruby-identifier">divs</span>.<span class="ruby-identifier">first</span>]
264:           <span class="ruby-keyword kw">end</span>
265:         }.<span class="ruby-identifier">new</span>)
266:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001019" class="method">
  <div id="M001019_title" class="title">
    <b>test_fragment</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001019_source')" id="l_M001019_source">show source</a> ]</p>
  <div id="M001019_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 11</span>
11:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment</span>
12:         <span class="ruby-identifier">fragment</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">fragment</span>
13:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
14:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001059" class="method">
  <div id="M001059_title" class="title">
    <b>test_fragment_contains_text_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001059_source')" id="l_M001059_source">show source</a> ]</p>
  <div id="M001059_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 326</span>
326:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_contains_text_node</span>
327:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'fooo'</span>)
328:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
329:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'fooo'</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">inner_text</span>
330:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001060" class="method">
  <div id="M001060_title" class="title">
    <b>test_fragment_includes_two_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001060_source')" id="l_M001060_source">show source</a> ]</p>
  <div id="M001060_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 332</span>
332:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_includes_two_tags</span>
333:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&lt;br/&gt;&lt;hr/&gt;&quot;</span>).<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
334:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001064" class="method">
  <div id="M001064_title" class="title">
    <b>test_html?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001064_source')" id="l_M001064_source">show source</a> ]</p>
  <div id="M001064_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 386</span>
386:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html?</span>
387:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xml?</span>
388:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">html?</span>
389:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001057" class="method">
  <div id="M001057_title" class="title">
    <b>test_inner_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001057_source')" id="l_M001057_source">show source</a> ]</p>
  <div id="M001057_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 304</span>
304:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inner_html</span>
305:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;\nHello world!\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
306:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">first</span>
307:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;p&gt;Helloworld!&lt;/p&gt;'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s/</span>, <span class="ruby-value str">''</span>))
308:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001046" class="method">
  <div id="M001046_title" class="title">
    <b>test_inner_text</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001046_source')" id="l_M001046_source">show source</a> ]</p>
  <div id="M001046_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inner_text</span>
228:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;\nHello world!\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
229:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">first</span>
230:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Hello world!'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">inner_text</span>.<span class="ruby-identifier">strip</span>)
231:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001033" class="method">
  <div id="M001033_title" class="title">
    <b>test_meta_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001033_source')" id="l_M001033_source">show source</a> ]</p>
  <div id="M001033_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_meta_encoding</span>
113:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span>
114:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001034" class="method">
  <div id="M001034_title" class="title">
    <b>test_meta_encoding=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001034_source')" id="l_M001034_source">show source</a> ]</p>
  <div id="M001034_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 116</span>
116:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_meta_encoding=</span>
117:         <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span> = <span class="ruby-value str">'EUC-JP'</span>
118:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'EUC-JP'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span>
119:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001035" class="method">
  <div id="M001035_title" class="title">
    <b>test_meta_encoding_without_head</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001035_source')" id="l_M001035_source">show source</a> ]</p>
  <div id="M001035_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 121</span>
121:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_meta_encoding_without_head</span>
122:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;foo&lt;/body&gt;&lt;/html&gt;'</span>)
123:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">meta_encoding</span>
124: 
125:         <span class="ruby-identifier">html</span>.<span class="ruby-identifier">meta_encoding</span> = <span class="ruby-value str">'EUC-JP'</span>
126:         <span class="ruby-identifier">assert_nil</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">meta_encoding</span>
127:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001045" class="method">
  <div id="M001045_title" class="title">
    <b>test_multi_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001045_source')" id="l_M001045_source">show source</a> ]</p>
  <div id="M001045_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_css</span>
211:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;p tag&lt;/p&gt;\n&lt;a&gt;a tag&lt;/a&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
212:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'p, a'</span>)
213:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>)
214:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'a tag'</span>, <span class="ruby-value str">'p tag'</span>].<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">content</span> }.<span class="ruby-identifier">sort</span>
215:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001032" class="method">
  <div id="M001032_title" class="title">
    <b>test_namespace_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001032_source')" id="l_M001032_source">show source</a> ]</p>
  <div id="M001032_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 106</span>
106:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_should_not_exist</span>
107:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
108:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">namespace</span>
109:         }
110:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001042" class="method">
  <div id="M001042_title" class="title">
    <b>test_no_xml_header</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001042_source')" id="l_M001042_source">show source</a> ]</p>
  <div id="M001042_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 168</span>
168:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_xml_header</span>
169:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;/html&gt;\n&quot;</span>)
170:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'html length is too short'</span>
171:         <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/^&lt;\?xml/</span>, <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_html</span>)
172:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001063" class="method">
  <div id="M001063_title" class="title">
    <b>test_parse_can_take_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001063_source')" id="l_M001063_source">show source</a> ]</p>
  <div id="M001063_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 378</span>
378:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_can_take_io</span>
379:         <span class="ruby-identifier">html</span> = <span class="ruby-keyword kw">nil</span>
380:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">HTML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
381:           <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">f</span>)
382:         }
383:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html?</span>
384:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001038" class="method">
  <div id="M001038_title" class="title">
    <b>test_parse_empty_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001038_source')" id="l_M001038_source">show source</a> ]</p>
  <div id="M001038_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 142</span>
142:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_empty_document</span>
143:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
144:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">length</span>
145:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span>
146:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span>
147:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001037" class="method">
  <div id="M001037_title" class="title">
    <b>test_parse_handles_nil_gracefully</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001037_source')" id="l_M001037_source">show source</a> ]</p>
  <div id="M001037_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 135</span>
135:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_handles_nil_gracefully</span>
136:         <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
137:           <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-keyword kw">nil</span>)
138:         <span class="ruby-keyword kw">end</span>
139:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-ivar">@doc</span>
140:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001040" class="method">
  <div id="M001040_title" class="title">
    <b>test_parse_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001040_source')" id="l_M001040_source">show source</a> ]</p>
  <div id="M001040_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 154</span>
154:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_io</span>
155:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">HTML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
156:           <span class="ruby-constant">Document</span>.<span class="ruby-identifier">read_io</span>(<span class="ruby-identifier">f</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'UTF-8'</span>,
157:                            <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">ParseOptions</span><span class="ruby-operator">::</span><span class="ruby-constant">NOERROR</span> <span class="ruby-operator">|</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">ParseOptions</span><span class="ruby-operator">::</span><span class="ruby-constant">NOWARNING</span>
158:                           )
159:         }
160:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001021" class="method">
  <div id="M001021_title" class="title">
    <b>test_parse_takes_config_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001021_source')" id="l_M001021_source">show source</a> ]</p>
  <div id="M001021_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 27</span>
27:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_takes_config_block</span>
28:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
29:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>), <span class="ruby-constant">HTML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
30:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
31:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
32:         <span class="ruby-keyword kw">end</span>
33:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
34:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
35:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
36:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001044" class="method">
  <div id="M001044_title" class="title">
    <b>test_relative_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001044_source')" id="l_M001044_source">show source</a> ]</p>
  <div id="M001044_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 193</span>
193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_css</span>
194:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;inside div tag&lt;/p&gt;\n&lt;/div&gt;\n&lt;p&gt;outside div tag&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
195:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'div'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p'</span>)
196:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>)
197:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'inside div tag'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_text</span>)
198:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001061" class="method">
  <div id="M001061_title" class="title">
    <b>test_relative_css_finder</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001061_source')" id="l_M001061_source">show source</a> ]</p>
  <div id="M001061_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 336</span>
336:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_css_finder</span>
337:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div class=\&quot;red\&quot;&gt;\n&lt;p&gt;\ninside red\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;div class=\&quot;green\&quot;&gt;\n&lt;p&gt;\ninside green\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
338:         <span class="ruby-identifier">red_divs</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div.red'</span>)
339:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">red_divs</span>.<span class="ruby-identifier">length</span>
340:         <span class="ruby-identifier">p_tags</span> = <span class="ruby-identifier">red_divs</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'p'</span>)
341:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p_tags</span>.<span class="ruby-identifier">length</span>
342:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'inside red'</span>, <span class="ruby-identifier">p_tags</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">strip</span>
343:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001036" class="method">
  <div id="M001036_title" class="title">
    <b>test_root_node_parent_is_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001036_source')" id="l_M001036_source">show source</a> ]</p>
  <div id="M001036_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 129</span>
129:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_node_parent_is_document</span>
130:         <span class="ruby-identifier">parent</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parent</span>
131:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>, <span class="ruby-identifier">parent</span>
132:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">parent</span>
133:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001058" class="method">
  <div id="M001058_title" class="title">
    <b>test_round_trip</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001058_source')" id="l_M001058_source">show source</a> ]</p>
  <div id="M001058_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 321</span>
321:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_round_trip</span>
322:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-ivar">@html</span>.<span class="ruby-identifier">inner_html</span>)
323:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">to_html</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">to_html</span>
324:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001053" class="method">
  <div id="M001053_title" class="title">
    <b>test_search_can_handle_xpath_and_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001053_source')" id="l_M001053_source">show source</a> ]</p>
  <div id="M001053_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 275</span>
275:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_can_handle_xpath_and_css</span>
276:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>, <span class="ruby-value str">'div &gt; p'</span>)
277:         <span class="ruby-identifier">length</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span>
278:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div &gt; p'</span>).<span class="ruby-identifier">length</span>
279:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">length</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
280:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001065" class="method">
  <div id="M001065_title" class="title">
    <b>test_serialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001065_source')" id="l_M001065_source">show source</a> ]</p>
  <div id="M001065_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 391</span>
391:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialize</span>
392:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">serialize</span>
393:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_html</span>
394:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001022" class="method">
  <div id="M001022_title" class="title">
    <b>test_subclass</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001022_source')" id="l_M001022_source">show source</a> ]</p>
  <div id="M001022_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 38</span>
38:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass</span>
39:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
40:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
41:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
42:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001025" class="method">
  <div id="M001025_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001025_source')" id="l_M001025_source">show source</a> ]</p>
  <div id="M001025_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 56</span>
56:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
57:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
58:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">dup</span>
59:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
60:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001023" class="method">
  <div id="M001023_title" class="title">
    <b>test_subclass_initialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001023_source')" id="l_M001023_source">show source</a> ]</p>
  <div id="M001023_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 44</span>
44:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_initialize</span>
45:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>) <span class="ruby-keyword kw">do</span>
46:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:initialized_with</span>
47: 
48:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
49:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
50:           <span class="ruby-keyword kw">end</span>
51:         <span class="ruby-keyword kw">end</span>
52:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;uri&quot;</span>, <span class="ruby-value str">&quot;external_id&quot;</span>, <span class="ruby-value">1</span>)
53:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;uri&quot;</span>, <span class="ruby-value str">&quot;external_id&quot;</span>, <span class="ruby-value">1</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">initialized_with</span>
54:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001026" class="method">
  <div id="M001026_title" class="title">
    <b>test_subclass_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001026_source')" id="l_M001026_source">show source</a> ]</p>
  <div id="M001026_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 62</span>
62:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_parse</span>
63:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
64:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
65:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_s</span>
66:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
67:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001031" class="method">
  <div id="M001031_title" class="title">
    <b>test_swap_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001031_source')" id="l_M001031_source">show source</a> ]</p>
  <div id="M001031_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 100</span>
100:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_swap_should_not_exist</span>
101:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
102:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">swap</span>
103:         }
104:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001041" class="method">
  <div id="M001041_title" class="title">
    <b>test_to_xhtml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001041_source')" id="l_M001041_source">show source</a> ]</p>
  <div id="M001041_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 162</span>
162:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xhtml</span>
163:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'XHTML'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>
164:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'XHTML'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>)
165:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>)
166:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001029" class="method">
  <div id="M001029_title" class="title">
    <b>test_to_xhtml_with_indent</b>()
  </div>
  <div class="description">
  <p>
FIXME: this is a hack around broken libxml versions
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001029_source')" id="l_M001029_source">show source</a> ]</p>
  <div id="M001029_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 84</span>
84:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xhtml_with_indent</span>
85:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;a&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
86:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>))
87:           <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>
88:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M001030" class="method">
  <div id="M001030_title" class="title">
    <b>test_write_to_xhtml_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M001030_source')" id="l_M001030_source">show source</a> ]</p>
  <div id="M001030_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 90</span>
90:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to_xhtml_with_indent</span>
91:           <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
92:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;a&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
93:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">write_xhtml_to</span> <span class="ruby-identifier">io</span>, <span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
94:           <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
95:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>)
96:           <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
97:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>