  <div id="C00000096">
<div class='banner'>
  <span class="file-title-prefix">Class</span><br />TestDocument<br/>
  In:
<a href="#" onclick="jsHref('files/test/html/test_document_rb.html');">test/html/test_document.rb</a>

Parent:&nbsp;
Nokogiri::TestCase
</div>
 <!-- banner header -->

  <div id="bodyContent" >
      <div id="content">




  <div class="sectiontitle">Methods</div>
  <ul>
  <li><a href="index.html?a=M000934&name=awesome" >awesome</a></li>
  <li><a href="index.html?a=M000908&name=new" >new</a></li>
  <li><a href="index.html?a=M000903&name=setup" >setup</a></li>
  <li><a href="index.html?a=M000922&name=test_HTML_function" >test_HTML_function</a></li>
  <li><a href="index.html?a=M000926&name=test_document_has_error" >test_document_has_error</a></li>
  <li><a href="index.html?a=M000911&name=test_document_parse_method" >test_document_parse_method</a></li>
  <li><a href="index.html?a=M000904&name=test_document_takes_config_block" >test_document_takes_config_block</a></li>
  <li><a href="index.html?a=M000939&name=test_dup" >test_dup</a></li>
  <li><a href="index.html?a=M000937&name=test_dup_document" >test_dup_document</a></li>
  <li><a href="index.html?a=M000938&name=test_dup_document_shallow" >test_dup_document_shallow</a></li>
  <li><a href="index.html?a=M000935&name=test_dup_shallow" >test_dup_shallow</a></li>
  <li><a href="index.html?a=M000912&name=test_empty_string_returns_empty_doc" >test_empty_string_returns_empty_doc</a></li>
  <li><a href="index.html?a=M000931&name=test_find_by_css" >test_find_by_css</a></li>
  <li><a href="index.html?a=M000932&name=test_find_by_css_with_square_brackets" >test_find_by_css_with_square_brackets</a></li>
  <li><a href="index.html?a=M000930&name=test_find_by_xpath" >test_find_by_xpath</a></li>
  <li><a href="index.html?a=M000944&name=test_find_classes" >test_find_classes</a></li>
  <li><a href="index.html?a=M000933&name=test_find_with_function" >test_find_with_function</a></li>
  <li><a href="index.html?a=M000941&name=test_fragment_contains_text_node" >test_fragment_contains_text_node</a></li>
  <li><a href="index.html?a=M000942&name=test_fragment_includes_two_tags" >test_fragment_includes_two_tags</a></li>
  <li><a href="index.html?a=M000946&name=test_html?" >test_html?</a></li>
  <li><a href="index.html?a=M000940&name=test_inner_html" >test_inner_html</a></li>
  <li><a href="index.html?a=M000929&name=test_inner_text" >test_inner_text</a></li>
  <li><a href="index.html?a=M000917&name=test_meta_encoding" >test_meta_encoding</a></li>
  <li><a href="index.html?a=M000918&name=test_meta_encoding=" >test_meta_encoding=</a></li>
  <li><a href="index.html?a=M000928&name=test_multi_css" >test_multi_css</a></li>
  <li><a href="index.html?a=M000916&name=test_namespace_should_not_exist" >test_namespace_should_not_exist</a></li>
  <li><a href="index.html?a=M000925&name=test_no_xml_header" >test_no_xml_header</a></li>
  <li><a href="index.html?a=M000945&name=test_parse_can_take_io" >test_parse_can_take_io</a></li>
  <li><a href="index.html?a=M000921&name=test_parse_empty_document" >test_parse_empty_document</a></li>
  <li><a href="index.html?a=M000920&name=test_parse_handles_nil_gracefully" >test_parse_handles_nil_gracefully</a></li>
  <li><a href="index.html?a=M000923&name=test_parse_io" >test_parse_io</a></li>
  <li><a href="index.html?a=M000905&name=test_parse_takes_config_block" >test_parse_takes_config_block</a></li>
  <li><a href="index.html?a=M000927&name=test_relative_css" >test_relative_css</a></li>
  <li><a href="index.html?a=M000943&name=test_relative_css_finder" >test_relative_css_finder</a></li>
  <li><a href="index.html?a=M000919&name=test_root_node_parent_is_document" >test_root_node_parent_is_document</a></li>
  <li><a href="index.html?a=M000936&name=test_search_can_handle_xpath_and_css" >test_search_can_handle_xpath_and_css</a></li>
  <li><a href="index.html?a=M000947&name=test_serialize" >test_serialize</a></li>
  <li><a href="index.html?a=M000906&name=test_subclass" >test_subclass</a></li>
  <li><a href="index.html?a=M000909&name=test_subclass_dup" >test_subclass_dup</a></li>
  <li><a href="index.html?a=M000907&name=test_subclass_initialize" >test_subclass_initialize</a></li>
  <li><a href="index.html?a=M000910&name=test_subclass_parse" >test_subclass_parse</a></li>
  <li><a href="index.html?a=M000915&name=test_swap_should_not_exist" >test_swap_should_not_exist</a></li>
  <li><a href="index.html?a=M000924&name=test_to_xhtml" >test_to_xhtml</a></li>
  <li><a href="index.html?a=M000913&name=test_to_xhtml_with_indent" >test_to_xhtml_with_indent</a></li>
  <li><a href="index.html?a=M000914&name=test_write_to_xhtml_with_indent" >test_write_to_xhtml_with_indent</a></li>
  </ul>






<div class="sectiontitle">Public Class methods</div>
<div id="M000908" class="method">
  <div id="M000908_title" class="title">
    <b>new</b>(*args)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000908_source')" id="l_M000908_source">show source</a> ]</p>
  <div id="M000908_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 43</span>
43:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
44:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
45:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div class="sectiontitle">Public Instance methods</div>
<div id="M000934" class="method">
  <div id="M000934_title" class="title">
    <b>awesome</b>(divs)
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000934_source')" id="l_M000934_source">show source</a> ]</p>
  <div id="M000934_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 245</span>
245:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome</span> <span class="ruby-identifier">divs</span>
246:             [<span class="ruby-identifier">divs</span>.<span class="ruby-identifier">first</span>]
247:           <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000903" class="method">
  <div id="M000903_title" class="title">
    <b>setup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000903_source')" id="l_M000903_source">show source</a> ]</p>
  <div id="M000903_source" class="dyn-source">
<pre>
   <span class="ruby-comment cmt"># File test/html/test_document.rb, line 6</span>
6:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">setup</span>
7:         <span class="ruby-keyword kw">super</span>
8:         <span class="ruby-ivar">@html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
9:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000922" class="method">
  <div id="M000922_title" class="title">
    <b>test_HTML_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000922_source')" id="l_M000922_source">show source</a> ]</p>
  <div id="M000922_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 132</span>
132:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_HTML_function</span>
133:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
134:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html?</span>
135:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000926" class="method">
  <div id="M000926_title" class="title">
    <b>test_document_has_error</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000926_source')" id="l_M000926_source">show source</a> ]</p>
  <div id="M000926_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 161</span>
161:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_has_error</span>
162:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div awesome=\&quot;asdf&gt;\n&lt;p&gt;inside div tag&lt;/p&gt;\n&lt;/div&gt;\n&lt;p&gt;outside div tag&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
163:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">errors</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
164:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000911" class="method">
  <div id="M000911_title" class="title">
    <b>test_document_parse_method</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000911_source')" id="l_M000911_source">show source</a> ]</p>
  <div id="M000911_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 64</span>
64:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_parse_method</span>
65:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
66:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_s</span>
67:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000904" class="method">
  <div id="M000904_title" class="title">
    <b>test_document_takes_config_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000904_source')" id="l_M000904_source">show source</a> ]</p>
  <div id="M000904_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 11</span>
11:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_document_takes_config_block</span>
12:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
13:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>), <span class="ruby-constant">HTML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
14:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
15:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
16:         <span class="ruby-keyword kw">end</span>
17:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
18:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
19:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
20:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000939" class="method">
  <div id="M000939_title" class="title">
    <b>test_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000939_source')" id="l_M000939_source">show source</a> ]</p>
  <div id="M000939_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 279</span>
279:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup</span>
280:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">first</span>
281:         <span class="ruby-identifier">dup</span> = <span class="ruby-identifier">found</span>.<span class="ruby-identifier">dup</span>
282:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>
283:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">content</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">content</span>
284:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">found</span>.<span class="ruby-identifier">document</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">document</span>
285:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000937" class="method">
  <div id="M000937_title" class="title">
    <b>test_dup_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000937_source')" id="l_M000937_source">show source</a> ]</p>
  <div id="M000937_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 265</span>
265:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_document</span>
266:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">dup</span>
267:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">dup</span>, <span class="ruby-ivar">@html</span>
268:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">html?</span>
269:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">dup</span>
270:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">html?</span>, <span class="ruby-value str">'duplicate should be html'</span>
271:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">to_s</span>
272:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000938" class="method">
  <div id="M000938_title" class="title">
    <b>test_dup_document_shallow</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000938_source')" id="l_M000938_source">show source</a> ]</p>
  <div id="M000938_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 274</span>
274:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_document_shallow</span>
275:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">dup</span>(<span class="ruby-value">0</span>)
276:         <span class="ruby-identifier">assert_not_equal</span> <span class="ruby-identifier">dup</span>, <span class="ruby-ivar">@html</span>
277:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000935" class="method">
  <div id="M000935_title" class="title">
    <b>test_dup_shallow</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000935_source')" id="l_M000935_source">show source</a> ]</p>
  <div id="M000935_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 251</span>
251:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_dup_shallow</span>
252:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">first</span>
253:         <span class="ruby-identifier">dup</span> = <span class="ruby-identifier">found</span>.<span class="ruby-identifier">dup</span>(<span class="ruby-value">0</span>)
254:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">dup</span>
255:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">''</span>, <span class="ruby-identifier">dup</span>.<span class="ruby-identifier">content</span>
256:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000912" class="method">
  <div id="M000912_title" class="title">
    <b>test_empty_string_returns_empty_doc</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000912_source')" id="l_M000912_source">show source</a> ]</p>
  <div id="M000912_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 69</span>
69:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_empty_string_returns_empty_doc</span>
70:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">''</span>)
71:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000931" class="method">
  <div id="M000931_title" class="title">
    <b>test_find_by_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000931_source')" id="l_M000931_source">show source</a> ]</p>
  <div id="M000931_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 232</span>
232:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css</span>
233:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div &gt; a'</span>)
234:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
235:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000932" class="method">
  <div id="M000932_title" class="title">
    <b>test_find_by_css_with_square_brackets</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000932_source')" id="l_M000932_source">show source</a> ]</p>
  <div id="M000932_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 237</span>
237:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_css_with_square_brackets</span>
238:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div[@id='header'] &gt; h1&quot;</span>)
239:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div[@id='header'] h1&quot;</span>) <span class="ruby-comment cmt"># this blows up on commit 6fa0f6d329d9dbf1cc21c0ac72f7e627bb4c05fc</span>
240:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
241:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000930" class="method">
  <div id="M000930_title" class="title">
    <b>test_find_by_xpath</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000930_source')" id="l_M000930_source">show source</a> ]</p>
  <div id="M000930_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 227</span>
227:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_by_xpath</span>
228:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div/a'</span>)
229:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">3</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
230:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000944" class="method">
  <div id="M000944_title" class="title">
    <b>test_find_classes</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000944_source')" id="l_M000944_source">show source</a> ]</p>
  <div id="M000944_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 339</span>
339:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_classes</span>
340:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;p class=\&quot;red\&quot;&gt;RED&lt;/p&gt;\n&lt;p class=\&quot;awesome red\&quot;&gt;RED&lt;/p&gt;\n&lt;p class=\&quot;notred\&quot;&gt;GREEN&lt;/p&gt;\n&lt;p class=\&quot;green notred\&quot;&gt;GREEN&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
341:         <span class="ruby-identifier">list</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'.red'</span>)
342:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">length</span>
343:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-node">%w{ RED RED }</span>, <span class="ruby-identifier">list</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">text</span> }
344:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000933" class="method">
  <div id="M000933_title" class="title">
    <b>test_find_with_function</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000933_source')" id="l_M000933_source">show source</a> ]</p>
  <div id="M000933_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 243</span>
243:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_find_with_function</span>
244:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">&quot;div:awesome() h1&quot;</span>, <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span> {
245:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">awesome</span> <span class="ruby-identifier">divs</span>
246:             [<span class="ruby-identifier">divs</span>.<span class="ruby-identifier">first</span>]
247:           <span class="ruby-keyword kw">end</span>
248:         }.<span class="ruby-identifier">new</span>)
249:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000941" class="method">
  <div id="M000941_title" class="title">
    <b>test_fragment_contains_text_node</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000941_source')" id="l_M000941_source">show source</a> ]</p>
  <div id="M000941_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 304</span>
304:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_contains_text_node</span>
305:         <span class="ruby-identifier">fragment</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">'fooo'</span>)
306:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
307:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'fooo'</span>, <span class="ruby-identifier">fragment</span>.<span class="ruby-identifier">inner_text</span>
308:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000942" class="method">
  <div id="M000942_title" class="title">
    <b>test_fragment_includes_two_tags</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000942_source')" id="l_M000942_source">show source</a> ]</p>
  <div id="M000942_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 310</span>
310:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_fragment_includes_two_tags</span>
311:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">2</span>, <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">fragment</span>(<span class="ruby-value str">&quot;&lt;br/&gt;&lt;hr/&gt;&quot;</span>).<span class="ruby-identifier">children</span>.<span class="ruby-identifier">length</span>
312:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000946" class="method">
  <div id="M000946_title" class="title">
    <b>test_html?</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000946_source')" id="l_M000946_source">show source</a> ]</p>
  <div id="M000946_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 364</span>
364:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_html?</span>
365:         <span class="ruby-identifier">assert</span> <span class="ruby-operator">!</span><span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xml?</span>
366:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">html?</span>
367:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000940" class="method">
  <div id="M000940_title" class="title">
    <b>test_inner_html</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000940_source')" id="l_M000940_source">show source</a> ]</p>
  <div id="M000940_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 287</span>
287:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inner_html</span>
288:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;\nHello world!\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
289:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">first</span>
290:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'&lt;p&gt;Helloworld!&lt;/p&gt;'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">inner_html</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/\s/</span>, <span class="ruby-value str">''</span>))
291:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000929" class="method">
  <div id="M000929_title" class="title">
    <b>test_inner_text</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000929_source')" id="l_M000929_source">show source</a> ]</p>
  <div id="M000929_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 210</span>
210:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_inner_text</span>
211:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;\nHello world!\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
212:         <span class="ruby-identifier">node</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div'</span>).<span class="ruby-identifier">first</span>
213:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'Hello world!'</span>, <span class="ruby-identifier">node</span>.<span class="ruby-identifier">inner_text</span>.<span class="ruby-identifier">strip</span>)
214:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000917" class="method">
  <div id="M000917_title" class="title">
    <b>test_meta_encoding</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000917_source')" id="l_M000917_source">show source</a> ]</p>
  <div id="M000917_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 103</span>
103:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_meta_encoding</span>
104:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span>
105:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000918" class="method">
  <div id="M000918_title" class="title">
    <b>test_meta_encoding=</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000918_source')" id="l_M000918_source">show source</a> ]</p>
  <div id="M000918_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 107</span>
107:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_meta_encoding=</span>
108:         <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span> = <span class="ruby-value str">'EUC-JP'</span>
109:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'EUC-JP'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">meta_encoding</span>
110:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000928" class="method">
  <div id="M000928_title" class="title">
    <b>test_multi_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000928_source')" id="l_M000928_source">show source</a> ]</p>
  <div id="M000928_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 193</span>
193:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_multi_css</span>
194:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;p tag&lt;/p&gt;\n&lt;a&gt;a tag&lt;/a&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
195:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'p, a'</span>)
196:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">2</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>)
197:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">'a tag'</span>, <span class="ruby-value str">'p tag'</span>].<span class="ruby-identifier">sort</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">x</span><span class="ruby-operator">|</span> <span class="ruby-identifier">x</span>.<span class="ruby-identifier">content</span> }.<span class="ruby-identifier">sort</span>
198:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000916" class="method">
  <div id="M000916_title" class="title">
    <b>test_namespace_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000916_source')" id="l_M000916_source">show source</a> ]</p>
  <div id="M000916_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 97</span>
 97:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_namespace_should_not_exist</span>
 98:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
 99:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">namespace</span>
100:         }
101:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000925" class="method">
  <div id="M000925_title" class="title">
    <b>test_no_xml_header</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000925_source')" id="l_M000925_source">show source</a> ]</p>
  <div id="M000925_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 151</span>
151:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_no_xml_header</span>
152:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;/html&gt;\n&quot;</span>)
153:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_html</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>, <span class="ruby-value str">'html length is too short'</span>
154:         <span class="ruby-identifier">assert_no_match</span>(<span class="ruby-regexp re">/^&lt;\?xml/</span>, <span class="ruby-identifier">html</span>.<span class="ruby-identifier">to_html</span>)
155:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000945" class="method">
  <div id="M000945_title" class="title">
    <b>test_parse_can_take_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000945_source')" id="l_M000945_source">show source</a> ]</p>
  <div id="M000945_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 356</span>
356:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_can_take_io</span>
357:         <span class="ruby-identifier">html</span> = <span class="ruby-keyword kw">nil</span>
358:         <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">HTML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
359:           <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">f</span>)
360:         }
361:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">html</span>.<span class="ruby-identifier">html?</span>
362:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000921" class="method">
  <div id="M000921_title" class="title">
    <b>test_parse_empty_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000921_source')" id="l_M000921_source">show source</a> ]</p>
  <div id="M000921_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 125</span>
125:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_empty_document</span>
126:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;\n&quot;</span>)
127:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'a'</span>).<span class="ruby-identifier">length</span>
128:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span>
129:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">0</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//a'</span>).<span class="ruby-identifier">length</span>
130:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000920" class="method">
  <div id="M000920_title" class="title">
    <b>test_parse_handles_nil_gracefully</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000920_source')" id="l_M000920_source">show source</a> ]</p>
  <div id="M000920_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 118</span>
118:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_handles_nil_gracefully</span>
119:         <span class="ruby-identifier">assert_nothing_raised</span> <span class="ruby-keyword kw">do</span>
120:           <span class="ruby-ivar">@doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-keyword kw">nil</span>)
121:         <span class="ruby-keyword kw">end</span>
122:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-ivar">@doc</span>
123:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000923" class="method">
  <div id="M000923_title" class="title">
    <b>test_parse_io</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000923_source')" id="l_M000923_source">show source</a> ]</p>
  <div id="M000923_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 137</span>
137:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_io</span>
138:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">doc</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">open</span>(<span class="ruby-constant">HTML_FILE</span>, <span class="ruby-value str">'rb'</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span>
139:           <span class="ruby-constant">Document</span>.<span class="ruby-identifier">read_io</span>(<span class="ruby-identifier">f</span>, <span class="ruby-keyword kw">nil</span>, <span class="ruby-value str">'UTF-8'</span>,
140:                            <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">ParseOptions</span><span class="ruby-operator">::</span><span class="ruby-constant">NOERROR</span> <span class="ruby-operator">|</span> <span class="ruby-constant">XML</span><span class="ruby-operator">::</span><span class="ruby-constant">ParseOptions</span><span class="ruby-operator">::</span><span class="ruby-constant">NOWARNING</span>
141:                           )
142:         }
143:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000905" class="method">
  <div id="M000905_title" class="title">
    <b>test_parse_takes_config_block</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000905_source')" id="l_M000905_source">show source</a> ]</p>
  <div id="M000905_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 22</span>
22:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_parse_takes_config_block</span>
23:         <span class="ruby-identifier">options</span> = <span class="ruby-keyword kw">nil</span>
24:         <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>), <span class="ruby-constant">HTML_FILE</span>) <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">cfg</span><span class="ruby-operator">|</span>
25:           <span class="ruby-identifier">options</span> = <span class="ruby-identifier">cfg</span>
26:           <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet</span>.<span class="ruby-identifier">nowarning</span>.<span class="ruby-identifier">dtdattr</span>
27:         <span class="ruby-keyword kw">end</span>
28:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nonet?</span>
29:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">nowarning?</span>
30:         <span class="ruby-identifier">assert</span> <span class="ruby-identifier">options</span>.<span class="ruby-identifier">dtdattr?</span>
31:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000927" class="method">
  <div id="M000927_title" class="title">
    <b>test_relative_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000927_source')" id="l_M000927_source">show source</a> ]</p>
  <div id="M000927_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 176</span>
176:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_css</span>
177:         <span class="ruby-identifier">html</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div&gt;\n&lt;p&gt;inside div tag&lt;/p&gt;\n&lt;/div&gt;\n&lt;p&gt;outside div tag&lt;/p&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
178:         <span class="ruby-identifier">set</span> = <span class="ruby-identifier">html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'div'</span>).<span class="ruby-identifier">search</span>(<span class="ruby-value str">'p'</span>)
179:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value">1</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">length</span>)
180:         <span class="ruby-identifier">assert_equal</span>(<span class="ruby-value str">'inside div tag'</span>, <span class="ruby-identifier">set</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">inner_text</span>)
181:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000943" class="method">
  <div id="M000943_title" class="title">
    <b>test_relative_css_finder</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000943_source')" id="l_M000943_source">show source</a> ]</p>
  <div id="M000943_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 314</span>
314:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_relative_css_finder</span>
315:         <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">&quot;&lt;html&gt;\n&lt;body&gt;\n&lt;div class=\&quot;red\&quot;&gt;\n&lt;p&gt;\ninside red\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;div class=\&quot;green\&quot;&gt;\n&lt;p&gt;\ninside green\n&lt;/p&gt;\n&lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n&quot;</span>)
316:         <span class="ruby-identifier">red_divs</span> = <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div.red'</span>)
317:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">red_divs</span>.<span class="ruby-identifier">length</span>
318:         <span class="ruby-identifier">p_tags</span> = <span class="ruby-identifier">red_divs</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'p'</span>)
319:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value">1</span>, <span class="ruby-identifier">p_tags</span>.<span class="ruby-identifier">length</span>
320:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-value str">'inside red'</span>, <span class="ruby-identifier">p_tags</span>.<span class="ruby-identifier">first</span>.<span class="ruby-identifier">text</span>.<span class="ruby-identifier">strip</span>
321:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000919" class="method">
  <div id="M000919_title" class="title">
    <b>test_root_node_parent_is_document</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000919_source')" id="l_M000919_source">show source</a> ]</p>
  <div id="M000919_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 112</span>
112:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_root_node_parent_is_document</span>
113:         <span class="ruby-identifier">parent</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">root</span>.<span class="ruby-identifier">parent</span>
114:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>, <span class="ruby-identifier">parent</span>
115:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>, <span class="ruby-identifier">parent</span>
116:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000936" class="method">
  <div id="M000936_title" class="title">
    <b>test_search_can_handle_xpath_and_css</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000936_source')" id="l_M000936_source">show source</a> ]</p>
  <div id="M000936_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 258</span>
258:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_search_can_handle_xpath_and_css</span>
259:         <span class="ruby-identifier">found</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">search</span>(<span class="ruby-value str">'//div/a'</span>, <span class="ruby-value str">'div &gt; p'</span>)
260:         <span class="ruby-identifier">length</span> = <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">xpath</span>(<span class="ruby-value str">'//div/a'</span>).<span class="ruby-identifier">length</span> <span class="ruby-operator">+</span>
261:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">css</span>(<span class="ruby-value str">'div &gt; p'</span>).<span class="ruby-identifier">length</span>
262:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-identifier">length</span>, <span class="ruby-identifier">found</span>.<span class="ruby-identifier">length</span>
263:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000947" class="method">
  <div id="M000947_title" class="title">
    <b>test_serialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000947_source')" id="l_M000947_source">show source</a> ]</p>
  <div id="M000947_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 369</span>
369:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_serialize</span>
370:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">serialize</span>
371:         <span class="ruby-identifier">assert</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_html</span>
372:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000906" class="method">
  <div id="M000906_title" class="title">
    <b>test_subclass</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000906_source')" id="l_M000906_source">show source</a> ]</p>
  <div id="M000906_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 33</span>
33:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass</span>
34:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
35:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>
36:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
37:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000909" class="method">
  <div id="M000909_title" class="title">
    <b>test_subclass_dup</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000909_source')" id="l_M000909_source">show source</a> ]</p>
  <div id="M000909_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 51</span>
51:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_dup</span>
52:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
53:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>.<span class="ruby-identifier">dup</span>
54:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
55:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000907" class="method">
  <div id="M000907_title" class="title">
    <b>test_subclass_initialize</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000907_source')" id="l_M000907_source">show source</a> ]</p>
  <div id="M000907_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 39</span>
39:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_initialize</span>
40:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>) <span class="ruby-keyword kw">do</span>
41:           <span class="ruby-identifier">attr_accessor</span> <span class="ruby-identifier">:initialized_with</span>
42: 
43:           <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-operator">*</span><span class="ruby-identifier">args</span>)
44:             <span class="ruby-ivar">@initialized_with</span> = <span class="ruby-identifier">args</span>
45:           <span class="ruby-keyword kw">end</span>
46:         <span class="ruby-keyword kw">end</span>
47:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;uri&quot;</span>, <span class="ruby-value str">&quot;external_id&quot;</span>, <span class="ruby-value">1</span>)
48:         <span class="ruby-identifier">assert_equal</span> [<span class="ruby-value str">&quot;uri&quot;</span>, <span class="ruby-value str">&quot;external_id&quot;</span>, <span class="ruby-value">1</span>], <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">initialized_with</span>
49:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000910" class="method">
  <div id="M000910_title" class="title">
    <b>test_subclass_parse</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000910_source')" id="l_M000910_source">show source</a> ]</p>
  <div id="M000910_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 57</span>
57:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_subclass_parse</span>
58:         <span class="ruby-identifier">klass</span> = <span class="ruby-constant">Class</span>.<span class="ruby-identifier">new</span>(<span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span><span class="ruby-operator">::</span><span class="ruby-constant">Document</span>)
59:         <span class="ruby-identifier">doc</span> = <span class="ruby-identifier">klass</span>.<span class="ruby-identifier">parse</span>(<span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-constant">HTML_FILE</span>))
60:         <span class="ruby-identifier">assert_equal</span> <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_s</span>, <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_s</span>
61:         <span class="ruby-identifier">assert_instance_of</span> <span class="ruby-identifier">klass</span>, <span class="ruby-identifier">doc</span>
62:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000915" class="method">
  <div id="M000915_title" class="title">
    <b>test_swap_should_not_exist</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000915_source')" id="l_M000915_source">show source</a> ]</p>
  <div id="M000915_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 91</span>
91:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_swap_should_not_exist</span>
92:         <span class="ruby-identifier">assert_raises</span>(<span class="ruby-constant">NoMethodError</span>) {
93:           <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">swap</span>
94:         }
95:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000924" class="method">
  <div id="M000924_title" class="title">
    <b>test_to_xhtml</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000924_source')" id="l_M000924_source">show source</a> ]</p>
  <div id="M000924_source" class="dyn-source">
<pre>
     <span class="ruby-comment cmt"># File test/html/test_document.rb, line 145</span>
145:       <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xhtml</span>
146:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'XHTML'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>
147:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'XHTML'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>)
148:         <span class="ruby-identifier">assert_match</span> <span class="ruby-value str">'UTF-8'</span>, <span class="ruby-ivar">@html</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:encoding</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value str">'UTF-8'</span>)
149:       <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000913" class="method">
  <div id="M000913_title" class="title">
    <b>test_to_xhtml_with_indent</b>()
  </div>
  <div class="description">
  <p>
FIXME: this is a hack around broken libxml versions
</p>
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000913_source')" id="l_M000913_source">show source</a> ]</p>
  <div id="M000913_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 75</span>
75:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_to_xhtml_with_indent</span>
76:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;a&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
77:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">doc</span>.<span class="ruby-identifier">to_xhtml</span>(<span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">2</span>))
78:           <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">2</span>, <span class="ruby-identifier">doc</span>
79:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
<div id="M000914" class="method">
  <div id="M000914_title" class="title">
    <b>test_write_to_xhtml_with_indent</b>()
  </div>
<div class="sourcecode">
  <p class="source-link">[ <a href="javascript:toggleSource('M000914_source')" id="l_M000914_source">show source</a> ]</p>
  <div id="M000914_source" class="dyn-source">
<pre>
    <span class="ruby-comment cmt"># File test/html/test_document.rb, line 81</span>
81:         <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">test_write_to_xhtml_with_indent</span>
82:           <span class="ruby-identifier">io</span> = <span class="ruby-constant">StringIO</span>.<span class="ruby-identifier">new</span>
83:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-value str">'&lt;html&gt;&lt;body&gt;&lt;a&gt;foo&lt;/a&gt;&lt;/body&gt;&lt;/html&gt;'</span>)
84:           <span class="ruby-identifier">doc</span>.<span class="ruby-identifier">write_xhtml_to</span> <span class="ruby-identifier">io</span>, <span class="ruby-identifier">:indent</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-value">5</span>
85:           <span class="ruby-identifier">io</span>.<span class="ruby-identifier">rewind</span>
86:           <span class="ruby-identifier">doc</span> = <span class="ruby-constant">Nokogiri</span><span class="ruby-operator">::</span><span class="ruby-constant">HTML</span>(<span class="ruby-identifier">io</span>.<span class="ruby-identifier">read</span>)
87:           <span class="ruby-identifier">assert_indent</span> <span class="ruby-value">5</span>, <span class="ruby-identifier">doc</span>
88:         <span class="ruby-keyword kw">end</span>
</pre>
  </div>
</div>
</div>
</div>

  </div>